function addStackTraceToMessage(message,stackTrace){return-1!==message.toLowerCase().indexOf("stacktrace")?message:(stackTrace||(stackTrace=qmLog.getStackTrace()),message+".  StackTrace: "+stackTrace)}function getCalleeFunction(){return arguments.callee.caller.caller.caller.caller}function getCalleeFunctionName(){return getCalleeFunction()&&getCalleeFunction().name&&""!==getCalleeFunction().name?getCalleeFunction().name:null}function getCallerFunction(){if(getCalleeFunction())try{return getCalleeFunction().caller}catch(error){return console.error(error),null}return null}function getCallerFunctionName(){return getCallerFunction()&&getCallerFunction().name&&""!==getCallerFunction().name?getCallerFunction().name:null}function addCallerFunctionToMessage(message){return"undefined"===message&&(message=""),getCalleeFunctionName()&&(message="callee "+getCalleeFunctionName()+": "+message||""),getCallerFunctionName()&&(message="Caller "+getCallerFunctionName()+" called "+message||""),message}function bugsnagNotify(name,message,metaData,logLevel,stackTrace){"undefined"!=typeof bugsnagClient?(metaData=qmLog.addGlobalMetaData(name,message,metaData,logLevel,stackTrace),name||(name="No error name provided"),message||(message="No error message provided"),"string"!=typeof name&&(name=JSON.stringify(name)),"string"!=typeof message&&(message=JSON.stringify(message)),bugsnagClient.notify({name:name,message:message},{severity:logLevel,metaData:metaData})):qm.appMode.isDevelopment()||console.error("bugsnagClient not defined",metaData)}function getConsoleLogString(name,message,metaData,stackTrace){var logString=name;return message&&logString!==message&&(logString=logString+": "+message),logString=addCallerFunctionToMessage(logString),stackTrace&&(logString=logString+". stackTrace: "+stackTrace),metaData&&(logString=logString+". metaData: "+metaData),logString}function getSizeInKiloBytes(string){return"string"!=typeof value&&(string=JSON.stringify(string)),Math.round(16*string.length/8192)}function getLocalStorageNameForRequest(type,route){return"last_"+type+"_"+route.replace("/","_")+"_request_at"}function multiplyScreenHeight(factor){return"undefined"!=typeof screen&&parseInt(factor*screen.height)}function multiplyScreenWidth(factor){return"undefined"!=typeof screen&&parseInt(factor*screen.height)}!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).bugsnag=f()}}(function(){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ___classCallCheck_9(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function randomBlock(){return _$pad_31((Math.random()*discreteValues<<0).toString(base),blockSize)}function safeCounter(){return c=c<discreteValues?c:0,++c-1}function cuid(){return"c"+(new Date).getTime().toString(base)+_$pad_31(safeCounter().toString(base),blockSize)+_$fingerprint_30()+(randomBlock()+randomBlock())}function ___classCallCheck_10(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ___classCallCheck_2(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getNodeSelector(el){var parts=[el.tagName];if(el.id&&parts.push("#"+el.id),el.className&&el.className.length&&parts.push("."+el.className.split(" ").join(".")),!document.querySelectorAll||!Array.prototype.indexOf)return parts.join("");try{if(1===document.querySelectorAll(parts.join("")).length)return parts.join("")}catch(e){return parts.join("")}if(el.parentNode.childNodes.length>1){var index=Array.prototype.indexOf.call(el.parentNode.childNodes,el)+1;parts.push(":nth-child("+index+")")}return 1===document.querySelectorAll(parts.join("")).length?parts.join(""):el.parentNode?getNodeSelector(el.parentNode)+" > "+parts.join(""):parts.join("")}function truncate(value,length){return value&&value.length<=length?value:value.slice(0,length-"(...)".length)+"(...)"}function handleXHRLoad(){if(this[REQUEST_URL_KEY]!==client.config.endpoint&&this[REQUEST_URL_KEY]!==client.config.sessionEndpoint){var metaData={status:this.status,request:this[REQUEST_METHOD_KEY]+" "+this[REQUEST_URL_KEY]};this.status>=400?client.leaveBreadcrumb("XMLHttpRequest failed",metaData,BREADCRUMB_TYPE):client.leaveBreadcrumb("XMLHttpRequest succeeded",metaData,BREADCRUMB_TYPE)}}function handleXHRError(){this[REQUEST_URL_KEY]!==client.config.endpoint&&this[REQUEST_URL_KEY]!==client.config.sessionEndpoint&&client.leaveBreadcrumb("XMLHttpRequest error",{request:this[REQUEST_METHOD_KEY]+" "+this[REQUEST_URL_KEY]},BREADCRUMB_TYPE)}function throwsMessage(err){return"[Throws: "+(err?err.message:"?")+"]"}function find(haystack,needle){for(var i=0,len=haystack.length;i<len;i++)if(haystack[i]===needle)return!0;return!1}function __isArray_32(obj){return"[object Array]"===Object.prototype.toString.call(obj)}function safelyGetProp(obj,prop){try{return obj[prop]}catch(err){return throwsMessage(err)}}function ensureProperties(obj){function visit(obj,depth){function edgesExceeded(){return depth>MIN_PRESERVED_DEPTH&&edges>MAX_EDGES}if(edges++,void 0===depth&&(depth=0),depth>MAX_DEPTH)return REPLACEMENT_NODE;if(edgesExceeded())return REPLACEMENT_NODE;if(null===obj||"object"!=typeof obj)return obj;if(find(seen,obj))return"[Circular]";if(seen.push(obj),"function"==typeof obj.toJSON)try{edges--;var fResult=visit(obj.toJSON(),depth);return seen.pop(),fResult}catch(err){return throwsMessage(err)}if(__isArray_32(obj)){for(var aResult=[],i=0,len=obj.length;i<len;i++){if(edgesExceeded()){aResult.push(REPLACEMENT_NODE);break}aResult.push(visit(obj[i],depth+1))}return seen.pop(),aResult}var result={};try{for(var prop in obj)if(Object.prototype.hasOwnProperty.call(obj,prop)){if(edgesExceeded()){result[prop]=REPLACEMENT_NODE;break}result[prop]=visit(safelyGetProp(obj,prop),depth+1)}}catch(e){}return seen.pop(),result}var seen=[],edges=0;return visit(obj)}var reduce=function(arr,fn,accum){for(var val=accum,i=0,len=arr.length;i<len;i++)val=fn(val,arr[i],i,arr);return val},_hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),_dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],_pad=function(n){return n<10?"0"+n:n},_$esUtils_4={map:function(arr,fn){return reduce(arr,function(accum,item,i,arr){return accum.concat(fn(item,i,arr))},[])},reduce:reduce,filter:function(arr,fn){return reduce(arr,function(accum,item,i,arr){return fn(item,i,arr)?accum.concat(item):accum},[])},includes:function(arr,x){return reduce(arr,function(accum,item,i,arr){return!0===accum||item===x},!1)},keys:function(obj){var result=[],prop=void 0;for(prop in obj)Object.prototype.hasOwnProperty.call(obj,prop)&&result.push(prop);if(!_hasDontEnumBug)return result;for(var i=0,len=_dontEnums.length;i<len;i++)Object.prototype.hasOwnProperty.call(obj,_dontEnums[i])&&result.push(_dontEnums[i]);return result},isArray:function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},isoDate:function(){var d=new Date;return d.getUTCFullYear()+"-"+_pad(d.getUTCMonth()+1)+"-"+_pad(d.getUTCDate())+"T"+_pad(d.getUTCHours())+":"+_pad(d.getUTCMinutes())+":"+_pad(d.getUTCSeconds())+"."+(d.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}},__isoDate_1=_$esUtils_4.isoDate,_$BugsnagBreadcrumb_1=function(){function BugsnagBreadcrumb(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[anonymous]",metaData=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},type=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"manual",timestamp=arguments.length>3&&void 0!==arguments[3]?arguments[3]:__isoDate_1();_classCallCheck(this,BugsnagBreadcrumb),this.type=type,this.name=name,this.metaData=metaData,this.timestamp=timestamp}return BugsnagBreadcrumb.prototype.toJSON=function(){return{type:this.type,name:this.name,timestamp:this.timestamp,metaData:this.metaData}},BugsnagBreadcrumb}(),__includes_7=_$esUtils_4.includes,_$positiveIntCheck_7=function(value){return __includes_7(["undefined","number"],typeof value)&&parseInt(""+value,10)===value&&value>0},_$config_3={},__filter_3=_$esUtils_4.filter,__reduce_3=_$esUtils_4.reduce,__keys_3=_$esUtils_4.keys,__isArray_3=_$esUtils_4.isArray;_$config_3.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:function(value){return"string"==typeof value&&value.length}},appVersion:{defaultValue:function(){return null},message:"should be a string",validate:function(value){return null===value||"string"==typeof value&&value.length}},autoNotify:{defaultValue:function(){return!0},message:"should be true|false",validate:function(value){return!0===value||!1===value}},beforeSend:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:function(value){return"function"==typeof value||__isArray_3(value)&&__filter_3(value,function(f){return"function"==typeof f}).length===value.length}},endpoint:{defaultValue:function(){return"https://notify.bugsnag.com"},message:"should be a URL",validate:function(){return!0}},sessionEndpoint:{defaultValue:function(){return"https://sessions.bugsnag.com"},message:"should be a URL",validate:function(){return!0}},autoCaptureSessions:{defaultValue:function(){return!1},message:"should be true|false",validate:function(val){return!0===val||!1===val}},notifyReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(value){return null===value||__isArray_3(value)&&__filter_3(value,function(f){return"string"==typeof f}).length===value.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(value){return"string"==typeof value&&value.length}},maxBreadcrumbs:{defaultValue:function(){return 20},message:"should be a number ≤40",validate:function(value){return 0===value||_$positiveIntCheck_7(value)&&(void 0===value||value<=40)}},autoBreadcrumbs:{defaultValue:function(){return!0},message:"should be true|false",validate:function(value){return"boolean"==typeof value}},user:{defaultValue:function(){return null},message:"(object) user should be an object",validate:function(value){return"object"==typeof value}},metaData:{defaultValue:function(){return null},message:"should be an object",validate:function(value){return"object"==typeof value}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(value){return!value||value&&__reduce_3(["debug","info","warn","error"],function(accum,method){return accum&&"function"==typeof value[method]},!0)}}},_$config_3.mergeDefaults=function(opts,schema){if(!opts||!schema)throw new Error("schema.mergeDefaults(opts, schema): opts and schema objects are required");return __reduce_3(__keys_3(schema),function(accum,key){return accum[key]=void 0!==opts[key]?opts[key]:schema[key].defaultValue(),accum},{})},_$config_3.validate=function(opts,schema){if(!opts||!schema)throw new Error("schema.mergeDefaults(opts, schema): opts and schema objects are required");var errors=__reduce_3(__keys_3(schema),function(accum,key){return schema[key].validate(opts[key])?accum:accum.concat({key:key,message:schema[key].message,value:opts[key]})},[]);return{valid:!errors.length,errors:errors}};var _$inferReleaseStage_6=function(client){return client.app&&"string"==typeof client.app.releaseStage?client.app.releaseStage:client.config.releaseStage},_$hasStack_5=function(err){return!(!err||!err.stack&&!err.stacktrace&&!err["opera#sourceloc"]||"string"!=typeof(err.stack||err.stacktrace||err["opera#sourceloc"]))},_$stackframe_36={};!function(root,factory){"use strict";"object"==typeof _$stackframe_36?_$stackframe_36=factory():root.StackFrame=factory()}(this,function(){"use strict";function _isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function _capitalize(str){return str.charAt(0).toUpperCase()+str.substring(1)}function _getter(p){return function(){return this[p]}}function StackFrame(obj){if(obj instanceof Object)for(var i=0;i<props.length;i++)obj.hasOwnProperty(props[i])&&void 0!==obj[props[i]]&&this["set"+_capitalize(props[i])](obj[props[i]])}var booleanProps=["isConstructor","isEval","isNative","isToplevel"],numericProps=["columnNumber","lineNumber"],stringProps=["fileName","functionName","source"],arrayProps=["args"],props=booleanProps.concat(numericProps,stringProps,arrayProps);StackFrame.prototype={getArgs:function(){return this.args},setArgs:function(v){if("[object Array]"!==Object.prototype.toString.call(v))throw new TypeError("Args must be an Array");this.args=v},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(v){if(v instanceof StackFrame)this.evalOrigin=v;else{if(!(v instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new StackFrame(v)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(_isNumber(this.getLineNumber())?":"+this.getLineNumber():"")+(_isNumber(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var i=0;i<booleanProps.length;i++)StackFrame.prototype["get"+_capitalize(booleanProps[i])]=_getter(booleanProps[i]),StackFrame.prototype["set"+_capitalize(booleanProps[i])]=function(p){return function(v){this[p]=Boolean(v)}}(booleanProps[i]);for(var j=0;j<numericProps.length;j++)StackFrame.prototype["get"+_capitalize(numericProps[j])]=_getter(numericProps[j]),StackFrame.prototype["set"+_capitalize(numericProps[j])]=function(p){return function(v){if(!_isNumber(v))throw new TypeError(p+" must be a Number");this[p]=Number(v)}}(numericProps[j]);for(var k=0;k<stringProps.length;k++)StackFrame.prototype["get"+_capitalize(stringProps[k])]=_getter(stringProps[k]),StackFrame.prototype["set"+_capitalize(stringProps[k])]=function(p){return function(v){this[p]=String(v)}}(stringProps[k]);return StackFrame});var _$errorStackParser_33={};!function(root,factory){"use strict";"object"==typeof _$errorStackParser_33?_$errorStackParser_33=factory(_$stackframe_36):root.ErrorStackParser=factory(root.StackFrame)}(this,function(StackFrame){"use strict";var FIREFOX_SAFARI_STACK_REGEXP=/(^|@)\S+\:\d+/,CHROME_IE_STACK_REGEXP=/^\s*at .*(\S+\:\d+|\(native\))/m,SAFARI_NATIVE_CODE_REGEXP=/^(eval@)?(\[native code\])?$/;return{parse:function(error){if(void 0!==error.stacktrace||void 0!==error["opera#sourceloc"])return this.parseOpera(error);if(error.stack&&error.stack.match(CHROME_IE_STACK_REGEXP))return this.parseV8OrIE(error);if(error.stack)return this.parseFFOrSafari(error);throw new Error("Cannot parse given Error object")},extractLocation:function(urlLike){if(-1===urlLike.indexOf(":"))return[urlLike];var parts=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(urlLike.replace(/[\(\)]/g,""));return[parts[1],parts[2]||void 0,parts[3]||void 0]},parseV8OrIE:function(error){return error.stack.split("\n").filter(function(line){return!!line.match(CHROME_IE_STACK_REGEXP)},this).map(function(line){line.indexOf("(eval ")>-1&&(line=line.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var tokens=line.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),locationParts=this.extractLocation(tokens.pop()),functionName=tokens.join(" ")||void 0,fileName=["eval","<anonymous>"].indexOf(locationParts[0])>-1?void 0:locationParts[0];return new StackFrame({functionName:functionName,fileName:fileName,lineNumber:locationParts[1],columnNumber:locationParts[2],source:line})},this)},parseFFOrSafari:function(error){return error.stack.split("\n").filter(function(line){return!line.match(SAFARI_NATIVE_CODE_REGEXP)},this).map(function(line){if(line.indexOf(" > eval")>-1&&(line=line.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===line.indexOf("@")&&-1===line.indexOf(":"))return new StackFrame({functionName:line});var tokens=line.split("@"),locationParts=this.extractLocation(tokens.pop()),functionName=tokens.join("@")||void 0;return new StackFrame({functionName:functionName,fileName:locationParts[0],lineNumber:locationParts[1],columnNumber:locationParts[2],source:line})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var lineRE=/Line (\d+).*script (?:in )?(\S+)/i,lines=e.message.split("\n"),result=[],i=2,len=lines.length;i<len;i+=2){var match=lineRE.exec(lines[i]);match&&result.push(new StackFrame({fileName:match[2],lineNumber:match[1],source:lines[i]}))}return result},parseOpera10:function(e){for(var lineRE=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,lines=e.stacktrace.split("\n"),result=[],i=0,len=lines.length;i<len;i+=2){var match=lineRE.exec(lines[i]);match&&result.push(new StackFrame({functionName:match[3]||void 0,fileName:match[2],lineNumber:match[1],source:lines[i]}))}return result},parseOpera11:function(error){return error.stack.split("\n").filter(function(line){return!!line.match(FIREFOX_SAFARI_STACK_REGEXP)&&!line.match(/^Error created at/)},this).map(function(line){var argsRaw,tokens=line.split("@"),locationParts=this.extractLocation(tokens.pop()),functionCall=tokens.shift()||"",functionName=functionCall.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;functionCall.match(/\(([^\)]*)\)/)&&(argsRaw=functionCall.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var args=void 0===argsRaw||"[arguments not available]"===argsRaw?void 0:argsRaw.split(",");return new StackFrame({functionName:functionName,args:args,fileName:locationParts[0],lineNumber:locationParts[1],columnNumber:locationParts[2],source:line})},this)}}});var _$stackGenerator_35={};!function(root,factory){"use strict";"object"==typeof _$stackGenerator_35?_$stackGenerator_35=factory(_$stackframe_36):root.StackGenerator=factory(root.StackFrame)}(this,function(StackFrame){return{backtrace:function(opts){var stack=[],maxStackSize=10;"object"==typeof opts&&"number"==typeof opts.maxStackSize&&(maxStackSize=opts.maxStackSize);for(var curr=arguments.callee;curr&&stack.length<maxStackSize&&curr.arguments;){for(var args=new Array(curr.arguments.length),i=0;i<args.length;++i)args[i]=curr.arguments[i];/function(?:\s+([\w$]+))+\s*\(/.test(curr.toString())?stack.push(new StackFrame({functionName:RegExp.$1||void 0,args:args})):stack.push(new StackFrame({args:args}));try{curr=curr.caller}catch(e){break}}return stack}}});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},__reduce_9=_$esUtils_4.reduce,__filter_9=_$esUtils_4.filter,BugsnagReport=function(){function BugsnagReport(errorClass,errorMessage){var stacktrace=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],handledState=arguments.length>3&&void 0!==arguments[3]?arguments[3]:defaultHandledState();___classCallCheck_9(this,BugsnagReport),this.__isBugsnagReport=!0,this._ignored=!1,this._handledState=handledState,this.app=void 0,this.apiKey=void 0,this.breadcrumbs=[],this.context=void 0,this.device=void 0,this.errorClass=stringOrFallback(errorClass,"[no error class]"),this.errorMessage=stringOrFallback(errorMessage,"[no error message]"),this.groupingHash=void 0,this.metaData={},this.request=void 0,this.severity=this._handledState.severity,this.stacktrace=__reduce_9(stacktrace,function(accum,frame){var f=formatStackframe(frame);try{return"{}"===JSON.stringify(f)?accum:accum.concat(f)}catch(e){return accum}},[]),this.user=void 0,this.session=void 0}return BugsnagReport.prototype.ignore=function(){this._ignored=!0},BugsnagReport.prototype.isIgnored=function(){return this._ignored},BugsnagReport.prototype.updateMetaData=function(section){var _updates;if(!section)return this;var updates=void 0;return null===(arguments.length<=1?void 0:arguments[1])?this.removeMetaData(section):null===(arguments.length<=2?void 0:arguments[2])?this.removeMetaData(section,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]):("object"==typeof(arguments.length<=1?void 0:arguments[1])&&(updates=arguments.length<=1?void 0:arguments[1]),"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(_updates={},_updates[arguments.length<=1?void 0:arguments[1]]=arguments.length<=2?void 0:arguments[2],updates=_updates),updates?(this.metaData[section]||(this.metaData[section]={}),this.metaData[section]=_extends({},this.metaData[section],updates),this):this)},BugsnagReport.prototype.removeMetaData=function(section,property){return"string"!=typeof section?this:property?this.metaData[section]?(delete this.metaData[section][property],this):this:(delete this.metaData[section],this)},BugsnagReport.prototype.toJSON=function(){return{payloadVersion:"4",exceptions:[{errorClass:this.errorClass,message:this.errorMessage,stacktrace:this.stacktrace,type:"browserjs"}],severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,breadcrumbs:this.breadcrumbs,context:this.context,user:this.user,metaData:this.metaData,groupingHash:this.groupingHash,request:this.request,session:this.session}},BugsnagReport}(),formatStackframe=function(frame){var f={file:frame.fileName,method:normaliseFunctionName(frame.functionName),lineNumber:frame.lineNumber,columnNumber:frame.columnNumber,code:void 0,inProject:void 0};return f.lineNumber>-1&&!f.file&&!f.method&&(f.file="global code"),f},normaliseFunctionName=function(name){return/^global code$/i.test(name)?"global code":name},defaultHandledState=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},stringOrFallback=function(str,fallback){return"string"==typeof str&&str?str:fallback};BugsnagReport.getStacktrace=function(error){var errorFramesToSkip=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,generatedFramesToSkip=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _$hasStack_5(error)?_$errorStackParser_33.parse(error).slice(errorFramesToSkip):__filter_9(_$stackGenerator_35.backtrace(),function(frame){return-1===(frame.functionName||"").indexOf("StackGenerator$$")}).slice(1+generatedFramesToSkip)},BugsnagReport.ensureReport=function(reportOrError){var errorFramesToSkip=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,generatedFramesToSkip=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(reportOrError.__isBugsnagReport)return reportOrError;try{var stacktrace=BugsnagReport.getStacktrace(reportOrError,errorFramesToSkip,1+generatedFramesToSkip);return new BugsnagReport(reportOrError.name,reportOrError.message,stacktrace)}catch(e){return new BugsnagReport(reportOrError.name,reportOrError.message,[])}};var _$BugsnagReport_9=BugsnagReport,_$pad_31=function(num,size){var s="000000000"+num;return s.substr(s.length-size)},env="object"==typeof window?window:self,globalCount=0;for(var prop in env)Object.hasOwnProperty.call(env,prop)&&globalCount++;var mimeTypesLength=navigator.mimeTypes?navigator.mimeTypes.length:0,clientId=_$pad_31((mimeTypesLength+navigator.userAgent.length).toString(36)+globalCount.toString(36),4),_$fingerprint_30=function(){return clientId},c=0,blockSize=4,base=36,discreteValues=Math.pow(base,blockSize);cuid.fingerprint=_$fingerprint_30;var _$cuid_29=cuid,__isoDate_10=_$esUtils_4.isoDate,_$Session_10=function(){function Session(){___classCallCheck_10(this,Session),this.id=_$cuid_29(),this.startedAt=__isoDate_10(),this._handled=0,this._unhandled=0}return Session.prototype.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},Session.prototype.trackError=function(report){this[report._handledState.unhandled?"_unhandled":"_handled"]+=1},Session}(),_$isError_34=function(value){switch(Object.prototype.toString.call(value)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return value instanceof Error}},___extends_2=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},__map_2=_$esUtils_4.map,__reduce_2=_$esUtils_4.reduce,__includes_2=_$esUtils_4.includes,__isArray_2=_$esUtils_4.isArray,noop=function(){},BugsnagClient=function(){function BugsnagClient(notifier){var configSchema=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_$config_3.schema,session=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(___classCallCheck_2(this,BugsnagClient),!notifier)throw new Error("new BugsnagClient(notifier, configSchema) requires `notifier` argument");if(!notifier.name||!notifier.version||!notifier.url)throw new Error("new BugsnagClient(notifier, configSchema) - `notifier` requires: `{ name, version, url }`");this.notifier=notifier,this.configSchema=configSchema,this._configured=!1,this._transport={name:"NULL_TRANSPORT",sendSession:noop,sendReport:noop},this._logger={debug:noop,info:noop,warn:noop,error:noop},this.plugins=[],this.session=session,this.beforeSession=[],this.breadcrumbs=[],this.app={},this.context=void 0,this.device=void 0,this.metaData=void 0,this.request=void 0,this.user={},this.BugsnagReport=_$BugsnagReport_9,this.BugsnagBreadcrumb=_$BugsnagBreadcrumb_1,this.BugsnagSession=_$Session_10}return BugsnagClient.prototype.configure=function(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=_$config_3.mergeDefaults(___extends_2({},this.config,opts),this.configSchema);var validity=_$config_3.validate(this.config,this.configSchema);if(!0==!validity.valid){var err=new Error("Bugsnag configuration error");throw err.errors=__map_2(validity.errors,function(err){return err.key+" "+err.message+" \n  "+err.value}),err}return"function"==typeof this.config.beforeSend&&(this.config.beforeSend=[this.config.beforeSend]),null!==this.config.appVersion&&(this.app.version=this.config.appVersion),this.config.metaData&&(this.metaData=this.config.metaData),this.config.user&&(this.user=this.config.user),this.config.logger&&this.logger(this.config.logger),this._configured=!0,this._logger.debug("Loaded!"),this},BugsnagClient.prototype.use=function(plugin){return this.plugins.push(plugin),plugin.init(this)},BugsnagClient.prototype.transport=function(t){return this._transport=t,this},BugsnagClient.prototype.logger=function(l,sid){return this._logger=l,this},BugsnagClient.prototype.sessionDelegate=function(s){return this._sessionDelegate=s,this},BugsnagClient.prototype.startSession=function(){return this._sessionDelegate?this._sessionDelegate.startSession(this):(this._logger.warn("No session implementation is installed"),this)},BugsnagClient.prototype.leaveBreadcrumb=function(name,metaData,type,timestamp){if(!this._configured)throw new Error("Bugsnag must be configured before calling leaveBreadcrumb()");if(name=name||void 0,type="string"==typeof type?type:void 0,timestamp="string"==typeof timestamp?timestamp:void 0,metaData="object"==typeof metaData&&null!==metaData?metaData:void 0,"string"==typeof name||metaData){var crumb=new _$BugsnagBreadcrumb_1(name,metaData,type,timestamp);return this.breadcrumbs.push(crumb),this.breadcrumbs.length>this.config.maxBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs.slice(this.breadcrumbs.length-this.config.maxBreadcrumbs)),this}},BugsnagClient.prototype.notify=function(error){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._configured)throw new Error("Bugsnag must be configured before calling report()");var releaseStage=_$inferReleaseStage_6(this),_normaliseError=normaliseError(error,opts,this._logger),err=_normaliseError.err,errorFramesToSkip=_normaliseError.errorFramesToSkip,_opts=_normaliseError._opts;_opts&&(opts=_opts),err||(this._logger.warn('Usage error. notify() called with no "error" parameter'),err=new Error('Bugsnag usage error. notify() called with no "error" parameter')),"object"==typeof opts&&null!==opts||(opts={});var report=_$BugsnagReport_9.ensureReport(err,errorFramesToSkip,1);if(report.app=___extends_2({releaseStage:releaseStage},report.app,this.app),report.context=report.context||opts.context||this.context||void 0,report.device=___extends_2({},report.device,this.device,opts.device),report.request=___extends_2({},report.request,this.request,opts.request),report.user=___extends_2({},report.user,this.user,opts.user),report.metaData=___extends_2({},report.metaData,this.metaData,opts.metaData),report.breadcrumbs=this.breadcrumbs.slice(0),this.session&&(this.session.trackError(report),report.session=this.session),void 0!==opts.severity&&(report.severity=opts.severity,report._handledState.severityReason={type:"userSpecifiedSeverity"}),__isArray_2(this.config.notifyReleaseStages)&&!__includes_2(this.config.notifyReleaseStages,releaseStage))return this._logger.warn("Report not sent due to releaseStage/notifyReleaseStages configuration"),!1;var originalSeverity=report.severity,beforeSend=[].concat(opts.beforeSend).concat(this.config.beforeSend);return __reduce_2(beforeSend,function(accum,fn){return!0===accum||("function"==typeof fn&&!1===fn(report)||!!report.isIgnored())},!1)?(this._logger.debug("Report not sent due to beforeSend callback"),!1):(this.config.autoBreadcrumbs&&this.leaveBreadcrumb(report.errorClass,{errorClass:report.errorClass,errorMessage:report.errorMessage,severity:report.severity,stacktrace:report.stacktrace},"error"),originalSeverity!==report.severity&&(report._handledState.severityReason={type:"userCallbackSetSeverity"}),this._transport.sendReport(this._logger,this.config,{apiKey:report.apiKey||this.config.apiKey,notifier:this.notifier,events:[report]}),!0)},BugsnagClient}(),normaliseError=function(error,opts,logger){var err=void 0,errorFramesToSkip=0,_opts=void 0;switch(typeof error){case"string":"string"==typeof opts?(logger.warn("Usage error. notify() called with (string, string) but expected (error, object)"),err=new Error("Bugsnag usage error. notify() called with (string, string) but expected (error, object)"),_opts={metaData:{notifier:{notifyArgs:[error,opts]}}}):(err=new Error(String(error)),errorFramesToSkip+=2);break;case"number":case"boolean":err=new Error(String(error));break;case"function":logger.warn('Usage error. notify() called with a function as "error" parameter'),err=new Error('Bugsnag usage error. notify() called with a function as "error" parameter');break;case"object":null!==error&&(_$isError_34(error)||error.__isBugsnagReport)?err=error:null!==error&&hasNecessaryFields(error)?((err=new Error(error.message||error.errorMessage)).name=error.name||error.errorClass,errorFramesToSkip+=2):(logger.warn('Usage error. notify() called with an unsupported object as "error" parameter. Supply an Error or { name, message } object.'),err=new Error('Bugsnag usage error. notify() called with an unsupported object as "error" parameter. Supply an Error or { name, message } object.'))}return{err:err,errorFramesToSkip:errorFramesToSkip,_opts:_opts}},hasNecessaryFields=function(error){return!("string"!=typeof error.name&&"string"!=typeof error.errorClass||"string"!=typeof error.message&&"string"!=typeof error.errorMessage)},_$BugsnagClient_2=BugsnagClient,_$throttle_8={init:function(client){var n=0;client.config.beforeSend.push(function(report){if(n>=client.config.maxEvents)return report.ignore();n++}),client.refresh=function(){n=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer ≤100",validate:function(val){return _$positiveIntCheck_7(val)&&val<100}}}},___extends_11=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},schema=_$config_3.schema,__map_11=_$esUtils_4.map,_$config_11={releaseStage:{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"},message:"(string) releaseStage should be set",validate:function(value){return"string"==typeof value&&value.length}},collectUserIp:{defaultValue:function(){return!0},message:"(boolean) collectUserIp should true/false",validate:function(value){return!0===value||!1===value}},logger:___extends_11({},schema.logger,{defaultValue:function(){return"undefined"!=typeof console&&"function"==typeof console.debug?getPrefixedConsole():void 0}})},getPrefixedConsole=function(){var logger={},consoleLog=console.log;return __map_11(["debug","info","warn","error"],function(method){var consoleMethod=console[method];logger[method]="function"==typeof consoleMethod?consoleMethod.bind(console,"[bugsnag]"):consoleLog.bind(console,"[bugsnag]")}),logger},_$consoleBreadcrumbs_13={},__map_13=_$esUtils_4.map,__reduce_13=_$esUtils_4.reduce,__filter_13=_$esUtils_4.filter;_$consoleBreadcrumbs_13.init=function(client){__map_13(CONSOLE_LOG_METHODS,function(method){var original=console[method];console[method]=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];client.leaveBreadcrumb("Console output",__reduce_13(args,function(accum,arg,i){var stringified=String(arg);if("[object Object]"===stringified)try{stringified=JSON.stringify(arg)}catch(e){}return accum["["+i+"]"]=stringified,accum},{severity:0===method.indexOf("group")?"log":method}),"log"),original.apply(console,args)},console[method]._restore=function(){console[method]=original}})},_$consoleBreadcrumbs_13.configSchema={consoleBreadcrumbsEnabled:{defaultValue:function(){},validate:function(value){return!0===value||!1===value||void 0===value},message:"should be true|false"}};var CONSOLE_LOG_METHODS=__filter_13(["log","debug","info","warn","error"],function(method){return"undefined"!=typeof console&&"function"==typeof console[method]}),_$context_14={init:function(client){client.config.beforeSend.unshift(function(report){report.context||(report.context=window.location.pathname)})}},___extends_15=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},__isoDate_15=_$esUtils_4.isoDate,_$device_15={init:function(client){client.config.beforeSend.unshift(function(report){report.device=___extends_15({time:__isoDate_15(),locale:navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||navigator.language,userAgent:navigator.userAgent},report.device)}),client.beforeSession.push(function(session){session.device={userAgent:navigator.userAgent}})}},_$inlineScriptContent_16={},__reduce_16=_$esUtils_4.reduce,scriptStartRe=/^.*<script.*?>/,scriptEndRe=/<\/script>.*$/,extractScriptContent=(_$inlineScriptContent_16={init:function(client){var html="",DOMContentLoaded=!1,getHtml=function(){return document.documentElement.outerHTML},originalLocation=window.location.href;html=getHtml(),document.onreadystatechange=function(){"interactive"===document.readyState&&(html=getHtml(),DOMContentLoaded=!0)},client.config.beforeSend.unshift(function(report){var frame=report.stacktrace[0];if(!frame||!frame.file||!frame.lineNumber)return frame;if(frame.file.replace(/#.*$/,"")!==originalLocation.replace(/#.*$/,""))return frame;DOMContentLoaded&&html||(html=getHtml());var htmlLines=["\x3c!-- DOCUMENT START --\x3e"].concat(html.split("\n")),_extractScriptContent=extractScriptContent(htmlLines,frame.lineNumber-1),script=_extractScriptContent.script,start=_extractScriptContent.start,code=__reduce_16(script,function(accum,line,i){return Math.abs(start+i+1-frame.lineNumber)>10?accum:(accum[""+(start+i+1)]=line,accum)},{});frame.code=code,report.updateMetaData("script",{content:script.join("\n")})})}}).extractScriptContent=function(lines,startLine){for(var line=startLine;line<lines.length&&!scriptEndRe.test(lines[line]);)line++;for(var end=line;line>0&&!scriptStartRe.test(lines[line]);)line--;var start=line,script=lines.slice(start,end+1);return script[0]=script[0].replace(scriptStartRe,""),script[script.length-1]=script[script.length-1].replace(scriptEndRe,""),{script:script,start:start}},_$interactionBreadcrumbs_17={init:function(client){"addEventListener"in window&&window.addEventListener("click",function(event){var targetText=void 0,targetSelector=void 0;try{targetText=getNodeText(event.target),targetSelector=getNodeSelector(event.target)}catch(e){targetText="[hidden]",targetSelector="[hidden]",client._logger.error("Cross domain error when tracking click event. See https://docs.bugsnag.com/platforms/browsers/faq/#3-cross-origin-script-errors")}client.leaveBreadcrumb("UI click",{targetText:targetText,targetSelector:targetSelector},"user")},!0)},configSchema:{interactionBreadcrumbsEnabled:{defaultValue:function(){},validate:function(value){return!0===value||!1===value||void 0===value},message:"should be true|false"}}},getNodeText=function(el){var text=el.textContent||el.innerText||"";return text||"submit"!==el.type&&"button"!==el.type||(text=el.value),text=text.replace(/^\s+|\s+$/g,""),truncate(text,140)},___extends_18=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_$ip_18={init:function(client){client.config.collectUserIp||client.config.beforeSend.push(function(report){report.user=___extends_18({id:"[NOT COLLECTED]"},report.user),report.request=___extends_18({clientIp:"[NOT COLLECTED]"},report.request)})}},_$navigationBreadcrumbs_19={};_$navigationBreadcrumbs_19.init=function(client){if("addEventListener"in window){var drop=function(name){return function(){return client.leaveBreadcrumb(name,{},"navigation")}};window.addEventListener("pagehide",drop("Page hidden"),!0),window.addEventListener("pageshow",drop("Page shown"),!0),window.addEventListener("load",drop("Page loaded"),!0),window.document.addEventListener("DOMContentLoaded",drop("DOMContentLoaded"),!0),window.addEventListener("load",function(){return window.addEventListener("popstate",drop("Navigated back"),!0)}),window.addEventListener("hashchange",function(event){var metaData=event.oldURL?{from:relativeLocation(event.oldURL),to:relativeLocation(event.newURL),state:window.history.state}:{to:relativeLocation(window.location.href)};client.leaveBreadcrumb("Hash changed",metaData,"navigation")},!0),window.history.replaceState&&wrapHistoryFn(client,window.history,"replaceState"),window.history.pushState&&wrapHistoryFn(client,window.history,"pushState"),client.leaveBreadcrumb("Bugsnag loaded",{},"navigation")}},_$navigationBreadcrumbs_19.configSchema={navigationBreadcrumbsEnabled:{defaultValue:function(){},validate:function(value){return!0===value||!1===value||void 0===value},message:"should be true|false"}};var relativeLocation=function(url){var a=document.createElement("A");return a.href=url,""+a.pathname+a.search+a.hash},stateChangeToMetaData=function(state,title,url){var currentPath=relativeLocation(window.location.href);return{title:title,state:state,prevState:window.history.state,to:url||currentPath,from:currentPath}},wrapHistoryFn=function(client,target,fn){var orig=target[fn];target[fn]=function(state,title,url){client.leaveBreadcrumb("History "+fn,stateChangeToMetaData(state,title,url),"navigation"),"function"==typeof client.refresh&&client.refresh(),client.session&&client.startSession(),orig.call(target,state,title,url)},target[fn]._restore=function(){target[fn]=orig}},_$networkBreadcrumbs_20={},BREADCRUMB_TYPE="network",REQUEST_URL_KEY="BUGSNAG:REQUEST_URL",REQUEST_METHOD_KEY="BUGSNAG:REQUEST_METHOD",client=void 0;_$networkBreadcrumbs_20.init=function(_client){client=_client,monkeyPatchXMLHttpRequest(),monkeyPatchFetch()},_$networkBreadcrumbs_20.configSchema={networkBreadcrumbsEnabled:{defaultValue:function(){},validate:function(value){return!0===value||!1===value||void 0===value},message:"should be true|false"}};var monkeyPatchXMLHttpRequest=function(){if("addEventListener"in window.XMLHttpRequest.prototype){var nativeOpen=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(method,url){this[REQUEST_URL_KEY]=url,this[REQUEST_METHOD_KEY]=method,this["BUGSNAG:SETUP"]&&(this.removeEventListener("load",handleXHRLoad),this.removeEventListener("error",handleXHRError)),this.addEventListener("load",handleXHRLoad),this.addEventListener("error",handleXHRError),this["BUGSNAG:SETUP"]=!0,nativeOpen.apply(this,arguments)}}},monkeyPatchFetch=function(){if("fetch"in window){var oldFetch=window.fetch;window.fetch=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var url=args[0],options=args[1],method="GET";return options&&options.method&&(method=options.method),new Promise(function(resolve,reject){oldFetch.apply(void 0,args).then(function(response){handleFetchSuccess(response,method,url),resolve(response)}).catch(function(error){handleFetchError(method,url),reject(error)})})}}},handleFetchSuccess=function(response,method,url){var metaData={status:response.status,request:method+" "+url};response.status>=400?client.leaveBreadcrumb("fetch() failed",metaData,BREADCRUMB_TYPE):client.leaveBreadcrumb("fetch() succeeded",metaData,BREADCRUMB_TYPE)},handleFetchError=function(method,url){client.leaveBreadcrumb("fetch() error",{request:method+" "+url},BREADCRUMB_TYPE)},___extends_21=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_$request_21={init:function(client){client.config.beforeSend.unshift(function(report){report.request&&report.request.url||(report.request=___extends_21({},report.request,{url:window.location.href}))})}},___extends_22=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},__map_22=_$esUtils_4.map,__isArray_22=_$esUtils_4.isArray,__includes_22=_$esUtils_4.includes,_$sessions_22={init:function(client){return client.sessionDelegate(sessionDelegate)}},sessionDelegate={startSession:function(client){var sessionClient=client;sessionClient.session=new client.BugsnagSession,__map_22(sessionClient.beforeSession,function(fn){return fn(sessionClient)});var releaseStage=_$inferReleaseStage_6(sessionClient);return __isArray_22(sessionClient.config.notifyReleaseStages)&&!__includes_22(sessionClient.config.notifyReleaseStages,releaseStage)?(sessionClient._logger.warn("Session not sent due to releaseStage/notifyReleaseStages configuration"),sessionClient):(sessionClient._transport.sendSession(sessionClient._logger,sessionClient.config,{notifier:sessionClient.notifier,device:sessionClient.device,app:___extends_22({releaseStage:releaseStage},sessionClient.app),sessions:[{id:sessionClient.session.id,startedAt:sessionClient.session.startedAt,user:sessionClient.user}]}),sessionClient)}},_$stripQueryString_23={},___extends_23=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},__map_23=_$esUtils_4.map,strip=(_$stripQueryString_23={init:function(client){client.config.beforeSend.push(function(report){report.stacktrace=__map_23(report.stacktrace,function(frame){return ___extends_23({},frame,{file:strip(frame.file)})})})}})._strip=function(str){return"string"==typeof str?str.replace(/\?.*$/,"").replace(/#.*$/,""):str},_$unhandledRejection_24={},__reduce_24=_$esUtils_4.reduce,_listener=void 0;_$unhandledRejection_24.init=function(client){var listener=function(event){var error=event.reason,isBluebird=!1;event.detail&&event.detail.reason&&(error=event.detail.reason,isBluebird=!0);var handledState={severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},report=void 0;if(error&&_$hasStack_5(error))report=new client.BugsnagReport(error.name,error.message,_$errorStackParser_33.parse(error),handledState),isBluebird&&(report.stacktrace=__reduce_24(report.stacktrace,fixBluebirdStacktrace(error),[]));else{(report=new client.BugsnagReport(error&&error.name?error.name:"UnhandledRejection",error&&error.message?error.message:'Rejection reason was not an Error. See "Promise" tab for more detail.',[],handledState)).updateMetaData("promise","rejection reason",serializableReason(error))}client.notify(report)};"addEventListener"in window?window.addEventListener("unhandledrejection",listener):window.onunhandledrejection=function(reason,promise){listener({detail:{reason:reason,promise:promise}})},_listener=listener};var serializableReason=function(err){if(null===err||void 0===err)return"undefined (or null)";if(_$isError_34(err)){var _ref;return _ref={},_ref[Object.prototype.toString.call(err)]={name:err.name,message:err.message,code:err.code,stack:err.stack},_ref}return err},fixBluebirdStacktrace=function(error){return function(accum,frame){return frame.file===error.toString()?accum:(frame.method&&(frame.method=frame.method.replace(/^\s+/,"")),accum.concat(frame))}},_$windowOnerror_25={init:function(client){var prevOnError=window.onerror;window.onerror=function(messageOrEvent,url,lineNo,charNo,error){if(0===lineNo&&/Script error\.?/.test(messageOrEvent))client._logger.warn("Ignoring cross-domain or eval script error. See https://docs.bugsnag.com/platforms/browsers/faq/#3-cross-origin-script-errors");else{var handledState={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},report=void 0;if(error)error.name&&error.message?report=new client.BugsnagReport(error.name,error.message,decorateStack(client.BugsnagReport.getStacktrace(error),url,lineNo,charNo),handledState):(report=new client.BugsnagReport("window.onerror",String(error),decorateStack(client.BugsnagReport.getStacktrace(error,1),url,lineNo,charNo),handledState)).updateMetaData("window onerror",{error:error});else if("object"!=typeof messageOrEvent||null===messageOrEvent||url||lineNo||charNo||error)(report=new client.BugsnagReport("window.onerror",String(messageOrEvent),decorateStack(client.BugsnagReport.getStacktrace(error,1),url,lineNo,charNo),handledState)).updateMetaData("window onerror",{event:messageOrEvent});else{var name=messageOrEvent.type?"Event: "+messageOrEvent.type:"window.onerror",message=messageOrEvent.message||messageOrEvent.detail||"";(report=new client.BugsnagReport(name,message,client.BugsnagReport.getStacktrace(new Error,1).slice(1),handledState)).updateMetaData("window onerror",{event:messageOrEvent})}client.notify(report),"function"==typeof prevOnError&&prevOnError(messageOrEvent,url,lineNo,charNo,error)}}}},decorateStack=function(stack,url,lineNo,charNo){var culprit=stack[0];return culprit?(culprit.fileName||culprit.setFileName(url),culprit.lineNumber||culprit.setLineNumber(lineNo),culprit.columnNumber||(void 0!==charNo?culprit.setColumnNumber(charNo):window.event&&window.event.errorCharacter&&culprit.setColumnNumber(window.event&&window.event.errorCharacter)),stack):stack},_$safeJsonStringify_32=function(data,replacer,space){return JSON.stringify(ensureProperties(data),replacer,space)},MAX_DEPTH=20,MAX_EDGES=25e3,MIN_PRESERVED_DEPTH=8,REPLACEMENT_NODE="...",_$payload_26=function(report){var payload=_$safeJsonStringify_32(report);if(payload.length>1e6&&(delete report.events[0].metaData,report.events[0].metaData={notifier:"WARNING!\nThe serialized payload was "+payload.length/1e6+"MB. The limit is 1MB.\nreport.metaData was stripped to make the payload of a deliverable size."},(payload=_$safeJsonStringify_32(report)).length>1e6))throw new Error("payload exceeded 1MB limit");return payload},_$xDomainRequest_27={},__isoDate_27=_$esUtils_4.isoDate,matchPageProtocol=(_$xDomainRequest_27={name:"XDomainRequest",sendReport:function(logger,config,report){var cb=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},url=matchPageProtocol(config.endpoint,window.location.protocol)+"?apiKey="+encodeURIComponent(config.apiKey)+"&payloadVersion=4.0&sentAt="+encodeURIComponent(__isoDate_27()),req=new window.XDomainRequest;req.onload=function(){cb(null,req.responseText)},req.open("POST",url),setTimeout(function(){try{req.send(_$payload_26(report))}catch(e){logger.error(e)}},0)},sendSession:function(logger,config,session){var cb=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},url=matchPageProtocol(config.sessionEndpoint,window.location.protocol)+"?apiKey="+encodeURIComponent(config.apiKey)+"&payloadVersion=1.0&sentAt="+encodeURIComponent(__isoDate_27()),req=new window.XDomainRequest;req.onload=function(){cb(null,req.responseText)},req.open("POST",url),setTimeout(function(){try{req.send(_$safeJsonStringify_32(session))}catch(e){logger.error(e)}},0)}})._matchPageProtocol=function(endpoint,pageProtocol){return"http:"===pageProtocol?endpoint.replace(/^https:/,"http:"):endpoint},__isoDate_28=_$esUtils_4.isoDate,_$xmlHttpRequest_28={name:"XMLHttpRequest",sendReport:function(logger,config,report){var cb=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},url=config.endpoint,req=new window.XMLHttpRequest;req.onreadystatechange=function(){req.readyState===window.XMLHttpRequest.DONE&&cb(null,req.responseText)},req.open("POST",url),req.setRequestHeader("Content-Type","application/json"),req.setRequestHeader("Bugsnag-Api-Key",report.apiKey||config.apiKey),req.setRequestHeader("Bugsnag-Payload-Version","4.0"),req.setRequestHeader("Bugsnag-Sent-At",__isoDate_28());try{req.send(_$payload_26(report))}catch(e){logger.error(e)}},sendSession:function(logger,config,session){var cb=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},url=config.sessionEndpoint,req=new window.XMLHttpRequest;req.onreadystatechange=function(){req.readyState===window.XMLHttpRequest.DONE&&cb(null,req.responseText)},req.open("POST",url),req.setRequestHeader("Content-Type","application/json"),req.setRequestHeader("Bugsnag-Api-Key",config.apiKey),req.setRequestHeader("Bugsnag-Payload-Version","1.0"),req.setRequestHeader("Bugsnag-Sent-At",__isoDate_28());try{req.send(_$safeJsonStringify_32(session))}catch(e){logger.error(e)}}},_$browser_12={},___extends_12=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},__map_12=_$esUtils_4.map,__reduce_12=_$esUtils_4.reduce,__schema_12=___extends_12({},_$config_3.schema,_$config_11),plugins=[_$windowOnerror_25,_$unhandledRejection_24,_$device_15,_$context_14,_$request_21,_$throttle_8,_$consoleBreadcrumbs_13,_$networkBreadcrumbs_20,_$navigationBreadcrumbs_19,_$interactionBreadcrumbs_17,_$inlineScriptContent_16,_$sessions_22,_$ip_18,_$stripQueryString_23],transports={XDomainRequest:_$xDomainRequest_27,XMLHttpRequest:_$xmlHttpRequest_28};_$browser_12=function(opts){var userPlugins=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];"string"==typeof opts&&(opts={apiKey:opts}),opts.sessionTrackingEnabled&&(opts.autoCaptureSessions=opts.sessionTrackingEnabled);var finalSchema=__reduce_12([].concat(plugins).concat(userPlugins),function(accum,plugin){return plugin.configSchema?___extends_12({},accum,plugin.configSchema):accum},__schema_12),bugsnag=new _$BugsnagClient_2({name:"Bugsnag JavaScript",version:"4.6.0",url:"https://github.com/bugsnag/bugsnag-js"},finalSchema);bugsnag.transport(window.XDomainRequest?transports.XDomainRequest:transports.XMLHttpRequest);try{bugsnag.configure(opts)}catch(e){throw bugsnag._logger.warn(e),e.errors&&__map_12(e.errors,bugsnag._logger.warn),e}return bugsnag.use(_$device_15),bugsnag.use(_$context_14),bugsnag.use(_$request_21),bugsnag.use(_$inlineScriptContent_16),bugsnag.use(_$throttle_8),bugsnag.use(_$sessions_22),bugsnag.use(_$ip_18),bugsnag.use(_$stripQueryString_23),!1!==bugsnag.config.autoNotify&&(bugsnag.use(_$windowOnerror_25),bugsnag.use(_$unhandledRejection_24)),inferBreadcrumbSetting(bugsnag.config,"navigationBreadcrumbsEnabled")&&bugsnag.use(_$navigationBreadcrumbs_19),inferBreadcrumbSetting(bugsnag.config,"interactionBreadcrumbsEnabled")&&bugsnag.use(_$interactionBreadcrumbs_17),inferBreadcrumbSetting(bugsnag.config,"networkBreadcrumbsEnabled")&&bugsnag.use(_$networkBreadcrumbs_20),inferBreadcrumbSetting(bugsnag.config,"consoleBreadcrumbsEnabled",!1)&&bugsnag.use(_$consoleBreadcrumbs_13),__map_12(userPlugins,function(plugin){return bugsnag.use(plugin)}),bugsnag.config.autoCaptureSessions?bugsnag.startSession():bugsnag};var inferBreadcrumbSetting=function(config,val){var defaultInDev=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"boolean"==typeof config[val]?config[val]:config.autoBreadcrumbs&&(defaultInDev||!/^dev(elopment)?$/.test(config.releaseStage))};return _$browser_12.Bugsnag={Client:_$BugsnagClient_2,Report:_$BugsnagReport_9,Session:_$Session_10,Breadcrumb:_$BugsnagBreadcrumb_1},_$browser_12.default=_$browser_12,_$browser_12}),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).localforage=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){(function(global){"use strict";function nextTick(){draining=!0;for(var i,oldQueue,len=queue.length;len;){for(oldQueue=queue,queue=[],i=-1;++i<len;)oldQueue[i]();len=queue.length}draining=!1}var scheduleDrain,Mutation=global.MutationObserver||global.WebKitMutationObserver;if(Mutation){var called=0,observer=new Mutation(nextTick),element=global.document.createTextNode("");observer.observe(element,{characterData:!0}),scheduleDrain=function(){element.data=called=++called%2}}else if(global.setImmediate||void 0===global.MessageChannel)scheduleDrain="document"in global&&"onreadystatechange"in global.document.createElement("script")?function(){var scriptEl=global.document.createElement("script");scriptEl.onreadystatechange=function(){nextTick(),scriptEl.onreadystatechange=null,scriptEl.parentNode.removeChild(scriptEl),scriptEl=null},global.document.documentElement.appendChild(scriptEl)}:function(){setTimeout(nextTick,0)};else{var channel=new global.MessageChannel;channel.port1.onmessage=nextTick,scheduleDrain=function(){channel.port2.postMessage(0)}}var draining,queue=[];module.exports=function(task){1!==queue.push(task)||draining||scheduleDrain()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(_dereq_,module,exports){"use strict";function INTERNAL(){}function Promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function");this.state=PENDING,this.queue=[],this.outcome=void 0,resolver!==INTERNAL&&safelyResolveThenable(this,resolver)}function QueueItem(promise,onFulfilled,onRejected){this.promise=promise,"function"==typeof onFulfilled&&(this.onFulfilled=onFulfilled,this.callFulfilled=this.otherCallFulfilled),"function"==typeof onRejected&&(this.onRejected=onRejected,this.callRejected=this.otherCallRejected)}function unwrap(promise,func,value){immediate(function(){var returnValue;try{returnValue=func(value)}catch(e){return handlers.reject(promise,e)}returnValue===promise?handlers.reject(promise,new TypeError("Cannot resolve promise with itself")):handlers.resolve(promise,returnValue)})}function getThen(obj){var then=obj&&obj.then;if(obj&&"object"==typeof obj&&"function"==typeof then)return function(){then.apply(obj,arguments)}}function safelyResolveThenable(self,thenable){function onError(value){called||(called=!0,handlers.reject(self,value))}function onSuccess(value){called||(called=!0,handlers.resolve(self,value))}var called=!1,result=tryCatch(function(){thenable(onSuccess,onError)});"error"===result.status&&onError(result.value)}function tryCatch(func,value){var out={};try{out.value=func(value),out.status="success"}catch(e){out.status="error",out.value=e}return out}var immediate=_dereq_(1),handlers={},REJECTED=["REJECTED"],FULFILLED=["FULFILLED"],PENDING=["PENDING"];module.exports=exports=Promise,Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){if("function"!=typeof onFulfilled&&this.state===FULFILLED||"function"!=typeof onRejected&&this.state===REJECTED)return this;var promise=new this.constructor(INTERNAL);return this.state!==PENDING?unwrap(promise,this.state===FULFILLED?onFulfilled:onRejected,this.outcome):this.queue.push(new QueueItem(promise,onFulfilled,onRejected)),promise},QueueItem.prototype.callFulfilled=function(value){handlers.resolve(this.promise,value)},QueueItem.prototype.otherCallFulfilled=function(value){unwrap(this.promise,this.onFulfilled,value)},QueueItem.prototype.callRejected=function(value){handlers.reject(this.promise,value)},QueueItem.prototype.otherCallRejected=function(value){unwrap(this.promise,this.onRejected,value)},handlers.resolve=function(self,value){var result=tryCatch(getThen,value);if("error"===result.status)return handlers.reject(self,result.value);var thenable=result.value;if(thenable)safelyResolveThenable(self,thenable);else{self.state=FULFILLED,self.outcome=value;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callFulfilled(value)}return self},handlers.reject=function(self,error){self.state=REJECTED,self.outcome=error;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callRejected(error);return self},exports.resolve=function(value){return value instanceof this?value:handlers.resolve(new this(INTERNAL),value)},exports.reject=function(reason){var promise=new this(INTERNAL);return handlers.reject(promise,reason)},exports.all=function(iterable){var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var values=new Array(len),resolved=0,i=-1,promise=new this(INTERNAL);++i<len;)!function(value,i){self.resolve(value).then(function(outValue){values[i]=outValue,++resolved!==len||called||(called=!0,handlers.resolve(promise,values))},function(error){called||(called=!0,handlers.reject(promise,error))})}(iterable[i],i);return promise},exports.race=function(iterable){var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var i=-1,promise=new this(INTERNAL);++i<len;)!function(value){self.resolve(value).then(function(response){called||(called=!0,handlers.resolve(promise,response))},function(error){called||(called=!0,handlers.reject(promise,error))})}(iterable[i]);return promise}},{1:1}],3:[function(_dereq_,module,exports){(function(global){"use strict";"function"!=typeof global.Promise&&(global.Promise=_dereq_(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(_dereq_,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function createBlob(parts,properties){parts=parts||[],properties=properties||{};try{return new Blob(parts,properties)}catch(e){if("TypeError"!==e.name)throw e;for(var builder=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<parts.length;i+=1)builder.append(parts[i]);return builder.getBlob(properties.type)}}function executeCallback(promise,callback){callback&&promise.then(function(result){callback(null,result)},function(error){callback(error)})}function executeTwoCallbacks(promise,callback,errorCallback){"function"==typeof callback&&promise.then(callback),"function"==typeof errorCallback&&promise.catch(errorCallback)}function normalizeKey(key){return"string"!=typeof key&&(console.warn(key+" used as a key, but it is not a string."),key=String(key)),key}function getCallback(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function _binStringToArrayBuffer(bin){for(var length=bin.length,buf=new ArrayBuffer(length),arr=new Uint8Array(buf),i=0;i<length;i++)arr[i]=bin.charCodeAt(i);return buf}function _checkBlobSupportWithoutCaching(idb){return new Promise$1(function(resolve){var txn=idb.transaction(DETECT_BLOB_SUPPORT_STORE,READ_WRITE),blob=createBlob([""]);txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob,"key"),txn.onabort=function(e){e.preventDefault(),e.stopPropagation(),resolve(!1)},txn.oncomplete=function(){var matchedChrome=navigator.userAgent.match(/Chrome\/(\d+)/),matchedEdge=navigator.userAgent.match(/Edge\//);resolve(matchedEdge||!matchedChrome||parseInt(matchedChrome[1],10)>=43)}}).catch(function(){return!1})}function _checkBlobSupport(idb){return"boolean"==typeof supportsBlobs?Promise$1.resolve(supportsBlobs):_checkBlobSupportWithoutCaching(idb).then(function(value){return supportsBlobs=value})}function _deferReadiness(dbInfo){var dbContext=dbContexts[dbInfo.name],deferredOperation={};deferredOperation.promise=new Promise$1(function(resolve,reject){deferredOperation.resolve=resolve,deferredOperation.reject=reject}),dbContext.deferredOperations.push(deferredOperation),dbContext.dbReady?dbContext.dbReady=dbContext.dbReady.then(function(){return deferredOperation.promise}):dbContext.dbReady=deferredOperation.promise}function _advanceReadiness(dbInfo){var deferredOperation=dbContexts[dbInfo.name].deferredOperations.pop();if(deferredOperation)return deferredOperation.resolve(),deferredOperation.promise}function _rejectReadiness(dbInfo,err){var deferredOperation=dbContexts[dbInfo.name].deferredOperations.pop();if(deferredOperation)return deferredOperation.reject(err),deferredOperation.promise}function _getConnection(dbInfo,upgradeNeeded){return new Promise$1(function(resolve,reject){if(dbContexts[dbInfo.name]=dbContexts[dbInfo.name]||createDbContext(),dbInfo.db){if(!upgradeNeeded)return resolve(dbInfo.db);_deferReadiness(dbInfo),dbInfo.db.close()}var dbArgs=[dbInfo.name];upgradeNeeded&&dbArgs.push(dbInfo.version);var openreq=idb.open.apply(idb,dbArgs);upgradeNeeded&&(openreq.onupgradeneeded=function(e){var db=openreq.result;try{db.createObjectStore(dbInfo.storeName),e.oldVersion<=1&&db.createObjectStore(DETECT_BLOB_SUPPORT_STORE)}catch(ex){if("ConstraintError"!==ex.name)throw ex;console.warn('The database "'+dbInfo.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+dbInfo.storeName+'" already exists.')}}),openreq.onerror=function(e){e.preventDefault(),reject(openreq.error)},openreq.onsuccess=function(){resolve(openreq.result),_advanceReadiness(dbInfo)}})}function _getOriginalConnection(dbInfo){return _getConnection(dbInfo,!1)}function _getUpgradedConnection(dbInfo){return _getConnection(dbInfo,!0)}function _isUpgradeNeeded(dbInfo,defaultVersion){if(!dbInfo.db)return!0;var isNewStore=!dbInfo.db.objectStoreNames.contains(dbInfo.storeName),isDowngrade=dbInfo.version<dbInfo.db.version,isUpgrade=dbInfo.version>dbInfo.db.version;if(isDowngrade&&(dbInfo.version!==defaultVersion&&console.warn('The database "'+dbInfo.name+"\" can't be downgraded from version "+dbInfo.db.version+" to version "+dbInfo.version+"."),dbInfo.version=dbInfo.db.version),isUpgrade||isNewStore){if(isNewStore){var incVersion=dbInfo.db.version+1;incVersion>dbInfo.version&&(dbInfo.version=incVersion)}return!0}return!1}function _encodeBlob(blob){return new Promise$1(function(resolve,reject){var reader=new FileReader;reader.onerror=reject,reader.onloadend=function(e){var base64=btoa(e.target.result||"");resolve({__local_forage_encoded_blob:!0,data:base64,type:blob.type})},reader.readAsBinaryString(blob)})}function _decodeBlob(encodedBlob){return createBlob([_binStringToArrayBuffer(atob(encodedBlob.data))],{type:encodedBlob.type})}function _isEncodedBlob(value){return value&&value.__local_forage_encoded_blob}function _fullyReady(callback){var self=this,promise=self._initReady().then(function(){var dbContext=dbContexts[self._dbInfo.name];if(dbContext&&dbContext.dbReady)return dbContext.dbReady});return executeTwoCallbacks(promise,callback,callback),promise}function _tryReconnect(dbInfo){_deferReadiness(dbInfo);for(var dbContext=dbContexts[dbInfo.name],forages=dbContext.forages,i=0;i<forages.length;i++){var forage=forages[i];forage._dbInfo.db&&(forage._dbInfo.db.close(),forage._dbInfo.db=null)}return dbInfo.db=null,_getOriginalConnection(dbInfo).then(function(db){return dbInfo.db=db,_isUpgradeNeeded(dbInfo)?_getUpgradedConnection(dbInfo):db}).then(function(db){dbInfo.db=dbContext.db=db;for(var i=0;i<forages.length;i++)forages[i]._dbInfo.db=db}).catch(function(err){throw _rejectReadiness(dbInfo,err),err})}function createTransaction(dbInfo,mode,callback,retries){void 0===retries&&(retries=1);try{var tx=dbInfo.db.transaction(dbInfo.storeName,mode);callback(null,tx)}catch(err){if(retries>0&&(!dbInfo.db||"InvalidStateError"===err.name||"NotFoundError"===err.name))return Promise$1.resolve().then(function(){if(!dbInfo.db||"NotFoundError"===err.name&&!dbInfo.db.objectStoreNames.contains(dbInfo.storeName)&&dbInfo.version<=dbInfo.db.version)return dbInfo.db&&(dbInfo.version=dbInfo.db.version+1),_getUpgradedConnection(dbInfo)}).then(function(){return _tryReconnect(dbInfo).then(function(){createTransaction(dbInfo,mode,callback,retries-1)})}).catch(callback);callback(err)}}function createDbContext(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function stringToBuffer(serializedString){var i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*serializedString.length,len=serializedString.length,p=0;"="===serializedString[serializedString.length-1]&&(bufferLength--,"="===serializedString[serializedString.length-2]&&bufferLength--);var buffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(buffer);for(i=0;i<len;i+=4)encoded1=BASE_CHARS.indexOf(serializedString[i]),encoded2=BASE_CHARS.indexOf(serializedString[i+1]),encoded3=BASE_CHARS.indexOf(serializedString[i+2]),encoded4=BASE_CHARS.indexOf(serializedString[i+3]),bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return buffer}function bufferToString(buffer){var i,bytes=new Uint8Array(buffer),base64String="";for(i=0;i<bytes.length;i+=3)base64String+=BASE_CHARS[bytes[i]>>2],base64String+=BASE_CHARS[(3&bytes[i])<<4|bytes[i+1]>>4],base64String+=BASE_CHARS[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64String+=BASE_CHARS[63&bytes[i+2]];return bytes.length%3==2?base64String=base64String.substring(0,base64String.length-1)+"=":bytes.length%3==1&&(base64String=base64String.substring(0,base64String.length-2)+"=="),base64String}function createDbTable(t,dbInfo,callback,errorCallback){t.executeSql("CREATE TABLE IF NOT EXISTS "+dbInfo.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],callback,errorCallback)}function tryExecuteSql(t,dbInfo,sqlStatement,args,callback,errorCallback){t.executeSql(sqlStatement,args,callback,function(t,error){error.code===error.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[name],function(t,results){results.rows.length?errorCallback(t,error):createDbTable(t,dbInfo,function(){t.executeSql(sqlStatement,args,callback,errorCallback)},errorCallback)},errorCallback):errorCallback(t,error)},errorCallback)}function _setItem(key,value,callback,retriesLeft){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){void 0===value&&(value=null);var originalValue=value,dbInfo=self._dbInfo;dbInfo.serializer.serialize(value,function(value,error){error?reject(error):dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"INSERT OR REPLACE INTO "+dbInfo.storeName+" (key, value) VALUES (?, ?)",[key,value],function(){resolve(originalValue)},function(t,error){reject(error)})},function(sqlError){if(sqlError.code===sqlError.QUOTA_ERR){if(retriesLeft>0)return void resolve(_setItem.apply(self,[key,originalValue,callback,retriesLeft-1]));reject(sqlError)}})})}).catch(reject)});return executeCallback(promise,callback),promise}function getAllStoreNames(db){return new Promise$1(function(resolve,reject){db.transaction(function(t){t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,results){for(var storeNames=[],i=0;i<results.rows.length;i++)storeNames.push(results.rows.item(i).name);resolve({db:db,storeNames:storeNames})},function(t,error){reject(error)})},function(sqlError){reject(sqlError)})})}function _getKeyPrefix(options,defaultConfig){var keyPrefix=options.name+"/";return options.storeName!==defaultConfig.storeName&&(keyPrefix+=options.storeName+"/"),keyPrefix}function checkIfLocalStorageThrows(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}function _isLocalStorageUsable(){return!checkIfLocalStorageThrows()||localStorage.length>0}function callWhenReady(localForageInstance,libraryMethod){localForageInstance[libraryMethod]=function(){var _args=arguments;return localForageInstance.ready().then(function(){return localForageInstance[libraryMethod].apply(localForageInstance,_args)})}}function extend(){for(var i=1;i<arguments.length;i++){var arg=arguments[i];if(arg)for(var _key in arg)arg.hasOwnProperty(_key)&&(isArray(arg[_key])?arguments[0][_key]=arg[_key].slice():arguments[0][_key]=arg[_key])}return arguments[0]}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},idb=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();"undefined"==typeof Promise&&_dereq_(3);var Promise$1=Promise,DETECT_BLOB_SUPPORT_STORE="local-forage-detect-blob-support",supportsBlobs=void 0,dbContexts={},toString=Object.prototype.toString,READ_ONLY="readonly",READ_WRITE="readwrite",asyncStorage={_driver:"asyncStorage",_initStorage:function(options){var self=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]=options[i];var dbContext=dbContexts[dbInfo.name];dbContext||(dbContext=createDbContext(),dbContexts[dbInfo.name]=dbContext),dbContext.forages.push(self),self._initReady||(self._initReady=self.ready,self.ready=_fullyReady);for(var initPromises=[],j=0;j<dbContext.forages.length;j++){var forage=dbContext.forages[j];forage!==self&&initPromises.push(forage._initReady().catch(function(){return Promise$1.resolve()}))}var forages=dbContext.forages.slice(0);return Promise$1.all(initPromises).then(function(){return dbInfo.db=dbContext.db,_getOriginalConnection(dbInfo)}).then(function(db){return dbInfo.db=db,_isUpgradeNeeded(dbInfo,self._defaultConfig.version)?_getUpgradedConnection(dbInfo):db}).then(function(db){dbInfo.db=dbContext.db=db,self._dbInfo=dbInfo;for(var k=0;k<forages.length;k++){var forage=forages[k];forage!==self&&(forage._dbInfo.db=dbInfo.db,forage._dbInfo.version=dbInfo.version)}})},_support:function(){try{if(!idb)return!1;var isSafari="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),hasFetch="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!isSafari||hasFetch)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(iterator,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).openCursor(),iterationNumber=1;req.onsuccess=function(){var cursor=req.result;if(cursor){var value=cursor.value;_isEncodedBlob(value)&&(value=_decodeBlob(value));var result=iterator(value,cursor.key,iterationNumber++);void 0!==result?resolve(result):cursor.continue()}else resolve()},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise},getItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).get(key);req.onsuccess=function(){var value=req.result;void 0===value&&(value=null),_isEncodedBlob(value)&&(value=_decodeBlob(value)),resolve(value)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise},setItem:function(key,value,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){var dbInfo;self.ready().then(function(){return dbInfo=self._dbInfo,"[object Blob]"===toString.call(value)?_checkBlobSupport(dbInfo.db).then(function(blobSupport){return blobSupport?value:_encodeBlob(value)}):value}).then(function(value){createTransaction(self._dbInfo,READ_WRITE,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self._dbInfo.storeName);null===value&&(value=void 0);var req=store.put(value,key);transaction.oncomplete=function(){void 0===value&&(value=null),resolve(value)},transaction.onabort=transaction.onerror=function(){var err=req.error?req.error:req.transaction.error;reject(err)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise},removeItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,READ_WRITE,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).delete(key);transaction.oncomplete=function(){resolve()},transaction.onerror=function(){reject(req.error)},transaction.onabort=function(){var err=req.error?req.error:req.transaction.error;reject(err)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise},clear:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,READ_WRITE,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).clear();transaction.oncomplete=function(){resolve()},transaction.onabort=transaction.onerror=function(){var err=req.error?req.error:req.transaction.error;reject(err)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise},length:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).count();req.onsuccess=function(){resolve(req.result)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise},key:function(n,callback){var self=this,promise=new Promise$1(function(resolve,reject){n<0?resolve(null):self.ready().then(function(){createTransaction(self._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var advanced=!1,req=transaction.objectStore(self._dbInfo.storeName).openCursor();req.onsuccess=function(){var cursor=req.result;cursor?0===n?resolve(cursor.key):advanced?resolve(cursor.key):(advanced=!0,cursor.advance(n)):resolve(null)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise},keys:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).openCursor(),keys=[];req.onsuccess=function(){var cursor=req.result;cursor?(keys.push(cursor.key),cursor.continue()):resolve(keys)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise},dropInstance:function(options,callback){callback=getCallback.apply(this,arguments);var currentConfig=this.config();(options="function"!=typeof options&&options||{}).name||(options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName);var promise,self=this;if(options.name){var dbPromise=options.name===currentConfig.name&&self._dbInfo.db?Promise$1.resolve(self._dbInfo.db):_getOriginalConnection(options).then(function(db){var dbContext=dbContexts[options.name],forages=dbContext.forages;dbContext.db=db;for(var i=0;i<forages.length;i++)forages[i]._dbInfo.db=db;return db});promise=options.storeName?dbPromise.then(function(db){if(db.objectStoreNames.contains(options.storeName)){var newVersion=db.version+1;_deferReadiness(options);var dbContext=dbContexts[options.name],forages=dbContext.forages;db.close();for(var i=0;i<forages.length;i++){var forage=forages[i];forage._dbInfo.db=null,forage._dbInfo.version=newVersion}return new Promise$1(function(resolve,reject){var req=idb.open(options.name,newVersion);req.onerror=function(err){req.result.close(),reject(err)},req.onupgradeneeded=function(){req.result.deleteObjectStore(options.storeName)},req.onsuccess=function(){var db=req.result;db.close(),resolve(db)}}).then(function(db){dbContext.db=db;for(var j=0;j<forages.length;j++){var _forage2=forages[j];_forage2._dbInfo.db=db,_advanceReadiness(_forage2._dbInfo)}}).catch(function(err){throw(_rejectReadiness(options,err)||Promise$1.resolve()).catch(function(){}),err})}}):dbPromise.then(function(db){_deferReadiness(options);var dbContext=dbContexts[options.name],forages=dbContext.forages;db.close();for(var i=0;i<forages.length;i++)forages[i]._dbInfo.db=null;return new Promise$1(function(resolve,reject){var req=idb.deleteDatabase(options.name);req.onerror=req.onblocked=function(err){var db=req.result;db&&db.close(),reject(err)},req.onsuccess=function(){var db=req.result;db&&db.close(),resolve(db)}}).then(function(db){dbContext.db=db;for(var i=0;i<forages.length;i++)_advanceReadiness(forages[i]._dbInfo)}).catch(function(err){throw(_rejectReadiness(options,err)||Promise$1.resolve()).catch(function(){}),err})})}else promise=Promise$1.reject("Invalid arguments");return executeCallback(promise,callback),promise}},BASE_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BLOB_TYPE_PREFIX="~~local_forage_type~",BLOB_TYPE_PREFIX_REGEX=/^~~local_forage_type~([^~]+)~/,SERIALIZED_MARKER="__lfsc__:",SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER.length,TYPE_ARRAYBUFFER="arbf",TYPE_BLOB="blob",TYPE_INT8ARRAY="si08",TYPE_UINT8ARRAY="ui08",TYPE_UINT8CLAMPEDARRAY="uic8",TYPE_INT16ARRAY="si16",TYPE_INT32ARRAY="si32",TYPE_UINT16ARRAY="ur16",TYPE_UINT32ARRAY="ui32",TYPE_FLOAT32ARRAY="fl32",TYPE_FLOAT64ARRAY="fl64",TYPE_SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER_LENGTH+TYPE_ARRAYBUFFER.length,toString$1=Object.prototype.toString,localforageSerializer={serialize:function(value,callback){var valueType="";if(value&&(valueType=toString$1.call(value)),value&&("[object ArrayBuffer]"===valueType||value.buffer&&"[object ArrayBuffer]"===toString$1.call(value.buffer))){var buffer,marker=SERIALIZED_MARKER;value instanceof ArrayBuffer?(buffer=value,marker+=TYPE_ARRAYBUFFER):(buffer=value.buffer,"[object Int8Array]"===valueType?marker+=TYPE_INT8ARRAY:"[object Uint8Array]"===valueType?marker+=TYPE_UINT8ARRAY:"[object Uint8ClampedArray]"===valueType?marker+=TYPE_UINT8CLAMPEDARRAY:"[object Int16Array]"===valueType?marker+=TYPE_INT16ARRAY:"[object Uint16Array]"===valueType?marker+=TYPE_UINT16ARRAY:"[object Int32Array]"===valueType?marker+=TYPE_INT32ARRAY:"[object Uint32Array]"===valueType?marker+=TYPE_UINT32ARRAY:"[object Float32Array]"===valueType?marker+=TYPE_FLOAT32ARRAY:"[object Float64Array]"===valueType?marker+=TYPE_FLOAT64ARRAY:callback(new Error("Failed to get type for BinaryArray"))),callback(marker+bufferToString(buffer))}else if("[object Blob]"===valueType){var fileReader=new FileReader;fileReader.onload=function(){var str=BLOB_TYPE_PREFIX+value.type+"~"+bufferToString(this.result);callback(SERIALIZED_MARKER+TYPE_BLOB+str)},fileReader.readAsArrayBuffer(value)}else try{callback(JSON.stringify(value))}catch(e){console.error("Couldn't convert value into a JSON string: ",value),callback(null,e)}},deserialize:function(value){if(value.substring(0,SERIALIZED_MARKER_LENGTH)!==SERIALIZED_MARKER)return JSON.parse(value);var blobType,serializedString=value.substring(TYPE_SERIALIZED_MARKER_LENGTH),type=value.substring(SERIALIZED_MARKER_LENGTH,TYPE_SERIALIZED_MARKER_LENGTH);if(type===TYPE_BLOB&&BLOB_TYPE_PREFIX_REGEX.test(serializedString)){var matcher=serializedString.match(BLOB_TYPE_PREFIX_REGEX);blobType=matcher[1],serializedString=serializedString.substring(matcher[0].length)}var buffer=stringToBuffer(serializedString);switch(type){case TYPE_ARRAYBUFFER:return buffer;case TYPE_BLOB:return createBlob([buffer],{type:blobType});case TYPE_INT8ARRAY:return new Int8Array(buffer);case TYPE_UINT8ARRAY:return new Uint8Array(buffer);case TYPE_UINT8CLAMPEDARRAY:return new Uint8ClampedArray(buffer);case TYPE_INT16ARRAY:return new Int16Array(buffer);case TYPE_UINT16ARRAY:return new Uint16Array(buffer);case TYPE_INT32ARRAY:return new Int32Array(buffer);case TYPE_UINT32ARRAY:return new Uint32Array(buffer);case TYPE_FLOAT32ARRAY:return new Float32Array(buffer);case TYPE_FLOAT64ARRAY:return new Float64Array(buffer);default:throw new Error("Unkown type: "+type)}},stringToBuffer:stringToBuffer,bufferToString:bufferToString},webSQLStorage={_driver:"webSQLStorage",_initStorage:function(options){var self=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]="string"!=typeof options[i]?options[i].toString():options[i];var dbInfoPromise=new Promise$1(function(resolve,reject){try{dbInfo.db=openDatabase(dbInfo.name,String(dbInfo.version),dbInfo.description,dbInfo.size)}catch(e){return reject(e)}dbInfo.db.transaction(function(t){createDbTable(t,dbInfo,function(){self._dbInfo=dbInfo,resolve()},function(t,error){reject(error)})},reject)});return dbInfo.serializer=localforageSerializer,dbInfoPromise},_support:"function"==typeof openDatabase,iterate:function(iterator,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"SELECT * FROM "+dbInfo.storeName,[],function(t,results){for(var rows=results.rows,length=rows.length,i=0;i<length;i++){var item=rows.item(i),result=item.value;if(result&&(result=dbInfo.serializer.deserialize(result)),void 0!==(result=iterator(result,item.key,i+1)))return void resolve(result)}resolve()},function(t,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise},getItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"SELECT * FROM "+dbInfo.storeName+" WHERE key = ? LIMIT 1",[key],function(t,results){var result=results.rows.length?results.rows.item(0).value:null;result&&(result=dbInfo.serializer.deserialize(result)),resolve(result)},function(t,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise},setItem:function(key,value,callback){return _setItem.apply(this,[key,value,callback,1])},removeItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"DELETE FROM "+dbInfo.storeName+" WHERE key = ?",[key],function(){resolve()},function(t,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise},clear:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"DELETE FROM "+dbInfo.storeName,[],function(){resolve()},function(t,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise},length:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"SELECT COUNT(key) as c FROM "+dbInfo.storeName,[],function(t,results){var result=results.rows.item(0).c;resolve(result)},function(t,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise},key:function(n,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"SELECT key FROM "+dbInfo.storeName+" WHERE id = ? LIMIT 1",[n+1],function(t,results){var result=results.rows.length?results.rows.item(0).key:null;resolve(result)},function(t,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise},keys:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,"SELECT key FROM "+dbInfo.storeName,[],function(t,results){for(var keys=[],i=0;i<results.rows.length;i++)keys.push(results.rows.item(i).key);resolve(keys)},function(t,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise},dropInstance:function(options,callback){callback=getCallback.apply(this,arguments);var currentConfig=this.config();(options="function"!=typeof options&&options||{}).name||(options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName);var promise,self=this;return promise=options.name?new Promise$1(function(resolve){var db;db=options.name===currentConfig.name?self._dbInfo.db:openDatabase(options.name,"","",0),resolve(options.storeName?{db:db,storeNames:[options.storeName]}:getAllStoreNames(db))}).then(function(operationInfo){return new Promise$1(function(resolve,reject){operationInfo.db.transaction(function(t){for(var operations=[],i=0,len=operationInfo.storeNames.length;i<len;i++)operations.push(function(storeName){return new Promise$1(function(resolve,reject){t.executeSql("DROP TABLE IF EXISTS "+storeName,[],function(){resolve()},function(t,error){reject(error)})})}(operationInfo.storeNames[i]));Promise$1.all(operations).then(function(){resolve()}).catch(function(e){reject(e)})},function(sqlError){reject(sqlError)})})}):Promise$1.reject("Invalid arguments"),executeCallback(promise,callback),promise}},localStorageWrapper={_driver:"localStorageWrapper",_initStorage:function(options){var self=this,dbInfo={};if(options)for(var i in options)dbInfo[i]=options[i];return dbInfo.keyPrefix=_getKeyPrefix(options,self._defaultConfig),_isLocalStorageUsable()?(self._dbInfo=dbInfo,dbInfo.serializer=localforageSerializer,Promise$1.resolve()):Promise$1.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(iterator,callback){var self=this,promise=self.ready().then(function(){for(var dbInfo=self._dbInfo,keyPrefix=dbInfo.keyPrefix,keyPrefixLength=keyPrefix.length,length=localStorage.length,iterationNumber=1,i=0;i<length;i++){var key=localStorage.key(i);if(0===key.indexOf(keyPrefix)){var value=localStorage.getItem(key);if(value&&(value=dbInfo.serializer.deserialize(value)),void 0!==(value=iterator(value,key.substring(keyPrefixLength),iterationNumber++)))return value}}});return executeCallback(promise,callback),promise},getItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=self.ready().then(function(){var dbInfo=self._dbInfo,result=localStorage.getItem(dbInfo.keyPrefix+key);return result&&(result=dbInfo.serializer.deserialize(result)),result});return executeCallback(promise,callback),promise},setItem:function(key,value,callback){var self=this;key=normalizeKey(key);var promise=self.ready().then(function(){void 0===value&&(value=null);var originalValue=value;return new Promise$1(function(resolve,reject){var dbInfo=self._dbInfo;dbInfo.serializer.serialize(value,function(value,error){if(error)reject(error);else try{localStorage.setItem(dbInfo.keyPrefix+key,value),resolve(originalValue)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||reject(e),reject(e)}})})});return executeCallback(promise,callback),promise},removeItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=self.ready().then(function(){var dbInfo=self._dbInfo;localStorage.removeItem(dbInfo.keyPrefix+key)});return executeCallback(promise,callback),promise},clear:function(callback){var self=this,promise=self.ready().then(function(){for(var keyPrefix=self._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var key=localStorage.key(i);0===key.indexOf(keyPrefix)&&localStorage.removeItem(key)}});return executeCallback(promise,callback),promise},length:function(callback){var promise=this.keys().then(function(keys){return keys.length});return executeCallback(promise,callback),promise},key:function(n,callback){var self=this,promise=self.ready().then(function(){var result,dbInfo=self._dbInfo;try{result=localStorage.key(n)}catch(error){result=null}return result&&(result=result.substring(dbInfo.keyPrefix.length)),result});return executeCallback(promise,callback),promise},keys:function(callback){var self=this,promise=self.ready().then(function(){for(var dbInfo=self._dbInfo,length=localStorage.length,keys=[],i=0;i<length;i++){var itemKey=localStorage.key(i);0===itemKey.indexOf(dbInfo.keyPrefix)&&keys.push(itemKey.substring(dbInfo.keyPrefix.length))}return keys});return executeCallback(promise,callback),promise},dropInstance:function(options,callback){if(callback=getCallback.apply(this,arguments),!(options="function"!=typeof options&&options||{}).name){var currentConfig=this.config();options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName}var promise,self=this;return promise=options.name?new Promise$1(function(resolve){resolve(options.storeName?_getKeyPrefix(options,self._defaultConfig):options.name+"/")}).then(function(keyPrefix){for(var i=localStorage.length-1;i>=0;i--){var key=localStorage.key(i);0===key.indexOf(keyPrefix)&&localStorage.removeItem(key)}}):Promise$1.reject("Invalid arguments"),executeCallback(promise,callback),promise}},sameValue=function(x,y){return x===y||"number"==typeof x&&"number"==typeof y&&isNaN(x)&&isNaN(y)},includes=function(array,searchElement){for(var len=array.length,i=0;i<len;){if(sameValue(array[i],searchElement))return!0;i++}return!1},isArray=Array.isArray||function(arg){return"[object Array]"===Object.prototype.toString.call(arg)},DefinedDrivers={},DriverSupport={},DefaultDrivers={INDEXEDDB:asyncStorage,WEBSQL:webSQLStorage,LOCALSTORAGE:localStorageWrapper},DefaultDriverOrder=[DefaultDrivers.INDEXEDDB._driver,DefaultDrivers.WEBSQL._driver,DefaultDrivers.LOCALSTORAGE._driver],OptionalDriverMethods=["dropInstance"],LibraryMethods=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(OptionalDriverMethods),DefaultConfig={description:"",driver:DefaultDriverOrder.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},localforage_js=new(function(){function LocalForage(options){_classCallCheck(this,LocalForage);for(var driverTypeKey in DefaultDrivers)if(DefaultDrivers.hasOwnProperty(driverTypeKey)){var driver=DefaultDrivers[driverTypeKey],driverName=driver._driver;this[driverTypeKey]=driverName,DefinedDrivers[driverName]||this.defineDriver(driver)}this._defaultConfig=extend({},DefaultConfig),this._config=extend({},this._defaultConfig,options),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return LocalForage.prototype.config=function(options){if("object"===(void 0===options?"undefined":_typeof(options))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in options){if("storeName"===i&&(options[i]=options[i].replace(/\W/g,"_")),"version"===i&&"number"!=typeof options[i])return new Error("Database version must be a number.");this._config[i]=options[i]}return!("driver"in options&&options.driver)||this.setDriver(this._config.driver)}return"string"==typeof options?this._config[options]:this._config},LocalForage.prototype.defineDriver=function(driverObject,callback,errorCallback){var promise=new Promise$1(function(resolve,reject){try{var driverName=driverObject._driver,complianceError=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!driverObject._driver)return void reject(complianceError);for(var driverMethods=LibraryMethods.concat("_initStorage"),i=0,len=driverMethods.length;i<len;i++){var driverMethodName=driverMethods[i];if((!includes(OptionalDriverMethods,driverMethodName)||driverObject[driverMethodName])&&"function"!=typeof driverObject[driverMethodName])return void reject(complianceError)}!function(){for(var _i=0,_len=OptionalDriverMethods.length;_i<_len;_i++){var optionalDriverMethod=OptionalDriverMethods[_i];driverObject[optionalDriverMethod]||(driverObject[optionalDriverMethod]=function(methodName){return function(){var error=new Error("Method "+methodName+" is not implemented by the current driver"),promise=Promise$1.reject(error);return executeCallback(promise,arguments[arguments.length-1]),promise}}(optionalDriverMethod))}}();var setDriverSupport=function(support){DefinedDrivers[driverName]&&console.info("Redefining LocalForage driver: "+driverName),DefinedDrivers[driverName]=driverObject,DriverSupport[driverName]=support,resolve()};"_support"in driverObject?driverObject._support&&"function"==typeof driverObject._support?driverObject._support().then(setDriverSupport,reject):setDriverSupport(!!driverObject._support):setDriverSupport(!0)}catch(e){reject(e)}});return executeTwoCallbacks(promise,callback,errorCallback),promise},LocalForage.prototype.driver=function(){return this._driver||null},LocalForage.prototype.getDriver=function(driverName,callback,errorCallback){var getDriverPromise=DefinedDrivers[driverName]?Promise$1.resolve(DefinedDrivers[driverName]):Promise$1.reject(new Error("Driver not found."));return executeTwoCallbacks(getDriverPromise,callback,errorCallback),getDriverPromise},LocalForage.prototype.getSerializer=function(callback){var serializerPromise=Promise$1.resolve(localforageSerializer);return executeTwoCallbacks(serializerPromise,callback),serializerPromise},LocalForage.prototype.ready=function(callback){var self=this,promise=self._driverSet.then(function(){return null===self._ready&&(self._ready=self._initDriver()),self._ready});return executeTwoCallbacks(promise,callback,callback),promise},LocalForage.prototype.setDriver=function(drivers,callback,errorCallback){function setDriverToConfig(){self._config.driver=self.driver()}function extendSelfWithDriver(driver){return self._extend(driver),setDriverToConfig(),self._ready=self._initStorage(self._config),self._ready}function initDriver(supportedDrivers){return function(){function driverPromiseLoop(){for(;currentDriverIndex<supportedDrivers.length;){var driverName=supportedDrivers[currentDriverIndex];return currentDriverIndex++,self._dbInfo=null,self._ready=null,self.getDriver(driverName).then(extendSelfWithDriver).catch(driverPromiseLoop)}setDriverToConfig();var error=new Error("No available storage method found.");return self._driverSet=Promise$1.reject(error),self._driverSet}var currentDriverIndex=0;return driverPromiseLoop()}}var self=this;isArray(drivers)||(drivers=[drivers]);var supportedDrivers=this._getSupportedDrivers(drivers),oldDriverSetDone=null!==this._driverSet?this._driverSet.catch(function(){return Promise$1.resolve()}):Promise$1.resolve();return this._driverSet=oldDriverSetDone.then(function(){var driverName=supportedDrivers[0];return self._dbInfo=null,self._ready=null,self.getDriver(driverName).then(function(driver){self._driver=driver._driver,setDriverToConfig(),self._wrapLibraryMethodsWithReady(),self._initDriver=initDriver(supportedDrivers)})}).catch(function(){setDriverToConfig();var error=new Error("No available storage method found.");return self._driverSet=Promise$1.reject(error),self._driverSet}),executeTwoCallbacks(this._driverSet,callback,errorCallback),this._driverSet},LocalForage.prototype.supports=function(driverName){return!!DriverSupport[driverName]},LocalForage.prototype._extend=function(libraryMethodsAndProperties){extend(this,libraryMethodsAndProperties)},LocalForage.prototype._getSupportedDrivers=function(drivers){for(var supportedDrivers=[],i=0,len=drivers.length;i<len;i++){var driverName=drivers[i];this.supports(driverName)&&supportedDrivers.push(driverName)}return supportedDrivers},LocalForage.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,len=LibraryMethods.length;i<len;i++)callWhenReady(this,LibraryMethods[i])},LocalForage.prototype.createInstance=function(options){return new LocalForage(options)},LocalForage}());module.exports=localforage_js},{3:3}]},{},[4])(4)}),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"!==c&&!n.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a))}function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}function D(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),"string"==typeof(c=a.getAttribute(d))){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c)}catch(e){}M.set(a,b,c)}else c=void 0;return c}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||("none"!==(c=sa(a,b))&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),(b=qa[0].contentDocument).write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}function xa(a,b,c){var d,e,f,g,h=a.style;return(c=c||wa(a))&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function Fa(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;e--;)if((b=Ea[e]+c)in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if((0>(e=xa(a,b,f))||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)(d=a[g]).style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)(d=a[g]).style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=n.cssHooks[d])&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),f=1-(c/j.duration||0),g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}var e={},f=a===mb;return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if((h=e.split(" "))[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"===n.type(a)&&!a.nodeType&&!n.isWindow(a)&&!(a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;(a=n.trim(a))&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var e=0,f=a.length,g=s(a);if(c){if(g)for(;f>e&&!1!==b.apply(a[e],c);e++);else for(e in a)if(!1===b.apply(a[e],c))break}else if(g)for(;f>e&&!1!==b.call(a[e],e,a[e]);e++);else for(e in a)if(!1===b.call(a[e],e,a[e]))break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var e=[],f=0,g=a.length,h=!c;g>f;f++)!b(a[f],f)!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,i=[];if(s(a))for(;g>f;f++)null!=(d=b(a[f],f,c))&&i.push(d);else for(f in a)null!=(d=b(a[f],f,c))&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});var t=function(a){function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(!(h=b.getElementById(j))||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){for(o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;l--;)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}var a=[];return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){for(var c=a.split("|"),e=a.length;e--;)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&void 0!==a.getElementsByTagName&&a}function qa(){}function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=va(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if((c=d.filter[a[i].type].apply(null,a[i].matches))[u]){for(e=++i;f>e&&!d.relative[a[e].type];e++);return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){for(m=0;o=a[m++];)if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){for(m=0;o=b[m++];)o(r,s,g,h);if(f){if(p>0)for(;q--;)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,(e=g.defaultView)&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(void 0!==b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d||(1&(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){for(;b=a[f++];)b===a[f]&&(e=d.push(f));for(;e--;)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else for(;b=a[d++];)c+=e(b);return c},(d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(n=(j=(k=q[u]||(q[u]={}))[a]||[])[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[u]||(l[u]={}))[a]=[w,m]),l!==b)););return(m-=e)===d||m%d==0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do{if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}}).pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}(b);return qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=d.preFilter;h;){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)},h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){for(b||(b=g(a)),c=b.length;c--;)(f=xa(b[c]))[u]?d.push(f):e.push(f);(f=A(a,ya(e,d))).selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if((j=o[0]=o[0].slice(0)).length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(!(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0]))return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}for(i=X.needsContext.test(a)?0:j.length;i--&&(k=j[i],!d.relative[l=k.type]);)if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),!(a=f.length&&ra(j)))return H.apply(e,f),e;break}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(!(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a))||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return(d=l.getElementById(c[2]))&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))}).prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};n.Callbacks=function(a){var b,c,d,e,f,g,h=[],i=!(a="string"==typeof a?F[a]||G(a):n.extend({},a)).once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(!1===h[g].apply(l[0],l[1])&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){for(var c;(c=n.inArray(b,h,c))>-1;)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var i,j,k,b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}};if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(!0===a?--n.readyWait:n.isReady)||(n.isReady=!0,!0!==a&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?void 0!==(d=this.get(a,b))?d:this.get(a,n.camelCase(b)):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&0===(d=g[c].name).indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d]));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(void 0!==(c=M.get(f,a)))return c;if(void 0!==(c=M.get(f,d)))return c;if(void 0!==(c=P(f,d,void 0)))return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b);"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,function(){n.dequeue(a,b)},f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=L.get(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var b=l.createDocumentFragment().appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),j=(b=(b||"").match(E)||[""]).length;j--;)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&!1!==l.setup.call(a,d,p,g)||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){for(j=(b=(b||"").match(E)||[""]).length;j--;)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){for(l=n.event.special[o]||{},m=i[o=(d?l.delegateType:l.bindType)||o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,p,r.handle)||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||!1!==o.trigger.apply(d,c))){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=p[f++])&&!b.isPropagationStopped();)b.type=f>1?i:o.bindType||q,(m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"))&&m.apply(g,c),(m=k&&g[k])&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),!1===b.result&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&!1!==o._default.apply(p.pop(),c)||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&((h=d[k])&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,a)){for(h=n.event.handlers.call(this,a,j),b=0;(f=h[b++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,c=0;(g=f.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,void 0!==(e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i))&&!1===(a.result=e)&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(!0!==i.disabled||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),!1===d)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(!1===b||"function"==typeof b)&&(c=b,b=void 0),!1===c&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td,n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return(g=oa(h,"script")).length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if((e=a[m])||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;n.merge(l,f.childNodes),(f=k.firstChild).textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c))for(j=0;e=f[j++];)fa.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando])&&(b=L.cache[e])){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ja(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)1===(b=this[c]||{}).nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(g=(f=n.map(oa(c,"script"),ka)).length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={},ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f),a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}}))}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:("string"===(f=typeof c)&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),void(null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),(g=n.cssHooks[b]||n.cssHooks[h])&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),!0===c||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(0,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""))&&"auto"!==b?b:0:a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[function(a,b,c){var d,e,f,g,h,i,j,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(null==(h=n._queueHooks(a,"fx")).unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],"inline"===("none"===(j=n.css(a,"display"))?L.get(a,"olddisplay")||ta(a.nodeName):j)&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do{h=h||".5",g/=h,n.style(c.elem,a,g+f)}while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||!0===d.queue)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)(a=c[b])()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,(a=l.createElement("input")).value="t",a.type="radio",k.radioValue="t"===a.value}();var Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:void 0)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:null==(e=n.find.attr(a,b))?void 0:e:null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)for(;c=f[e++];)d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return!1===b?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{for:"htmlFor",class:"className"},prop:function(a,b,c){var d,e,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return(1!==g||!n.isXMLDoc(a))&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=n(this),f=a.match(E)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||!1===a?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(null==(e=d?a.call(this,c,n(this).val()):a)?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),(b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:"string"==typeof(c=e.value)?c.replace(bb,""):null==c?"":c:void 0}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(!(!(c=d[i]).selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=n.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&((w=v.getResponseHeader("Last-Modified"))&&(n.lastModified[d]=w),(w=v.getResponseHeader("etag"))&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f)for(f={};b=gb.exec(e);)f[b[1].toLowerCase()]=b[2];b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;(i=n.event&&k.global)&&0==n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),!1===k.cache&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&!1!==k.contentType||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(!1===k.beforeSend.call(l,v,k)||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):!1!==b.jsonp&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;return f?(b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e):void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Ib;a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position");)a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(!0===d||!0===e?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n}),function(){function tapEventListener(type,enable,useCapture){!1!==enable?tapDoc.addEventListener(type,tapEventListeners[type],useCapture):tapDoc.removeEventListener(type,tapEventListeners[type])}function tapClick(e){var ele=tapTargetElement(tapContainingElement(e.target));if(ionic.tap.requiresNativeClick(ele)||tapPointerMoved)return!1;var c=ionic.tap.pointerCoord(e);triggerMouseEvent("click",ele,c.x,c.y),tapHandleFocus(ele)}function triggerMouseEvent(type,ele,x,y){var clickEvent=document.createEvent("MouseEvents");clickEvent.initMouseEvent(type,!0,!0,window,1,0,0,x,y,!1,!1,!1,!1,0,null),clickEvent.isIonicTap=!0,ele.dispatchEvent(clickEvent)}function tapTouchStart(e){tapIgnoreEvent(e)||(tapPointerMoved=!1,tapEnableTouchEvents(),tapPointerStart=ionic.tap.pointerCoord(e),tapEventListener(tapTouchMoveListener),ionic.activator.start(e),ionic.Platform.isIOS()&&ionic.tap.isLabelWithTextInput(e.target)&&tapTargetElement(tapContainingElement(e.target))!==tapActiveEle&&e.preventDefault())}function tapTouchEnd(e){tapIgnoreEvent(e)||(tapEnableTouchEvents(),tapHasPointerMoved(e)||(tapClick(e),isSelectOrOption(e.target.tagName)&&e.preventDefault()),tapLastTouchTarget=e.target,tapTouchCancel())}function tapTouchMove(e){if(tapHasPointerMoved(e))return tapPointerMoved=!0,tapEventListener(tapTouchMoveListener,!1),ionic.activator.end(),!1}function tapTouchCancel(){tapEventListener(tapTouchMoveListener,!1),ionic.activator.end(),tapPointerMoved=!1}function tapEnableTouchEvents(){tapEnabledTouchEvents=!0,clearTimeout(tapMouseResetTimer),tapMouseResetTimer=setTimeout(function(){tapEnabledTouchEvents=!1},600)}function tapIgnoreEvent(e){return!!e.isTapHandled||(e.isTapHandled=!0,!!ionic.tap.isElementTapDisabled(e.target)||(ionic.scroll.isScrolling&&ionic.tap.containsOrIsTextInput(e.target)?(e.preventDefault(),!0):void 0))}function tapHandleFocus(ele){tapTouchFocusedInput=null;var triggerFocusIn=!1;"SELECT"==ele.tagName?(triggerMouseEvent("mousedown",ele,0,0),ele.focus&&ele.focus(),triggerFocusIn=!0):tapActiveElement()===ele?triggerFocusIn=!0:/^(input|textarea|ion-label)$/i.test(ele.tagName)||ele.isContentEditable?(triggerFocusIn=!0,ele.focus&&ele.focus(),ele.value=ele.value,tapEnabledTouchEvents&&(tapTouchFocusedInput=ele)):tapFocusOutActive(),triggerFocusIn&&(tapActiveElement(ele),ionic.trigger("ionic.focusin",{target:ele},!0))}function tapFocusOutActive(){var ele=tapActiveElement();ele&&(/^(input|textarea|select)$/i.test(ele.tagName)||ele.isContentEditable)&&ele.blur(),tapActiveElement(null)}function tapActiveElement(ele){return arguments.length&&(tapActiveEle=ele),tapActiveEle||document.activeElement}function tapHasPointerMoved(endEvent){if(!endEvent||1!==endEvent.target.nodeType||!tapPointerStart||0===tapPointerStart.x&&0===tapPointerStart.y)return!1;var endCoordinates=ionic.tap.pointerCoord(endEvent),releaseTolerance=!(!endEvent.target.classList||!endEvent.target.classList.contains||"function"!=typeof endEvent.target.classList.contains)&&endEvent.target.classList.contains("button")?TAP_RELEASE_BUTTON_TOLERANCE:TAP_RELEASE_TOLERANCE;return Math.abs(tapPointerStart.x-endCoordinates.x)>releaseTolerance||Math.abs(tapPointerStart.y-endCoordinates.y)>releaseTolerance}function tapContainingElement(ele,allowSelf){for(var climbEle=ele,x=0;x<6&&climbEle;x++){if("LABEL"===climbEle.tagName)return climbEle;climbEle=climbEle.parentElement}if(!1!==allowSelf)return ele}function tapTargetElement(ele){if(ele&&"LABEL"===ele.tagName){if(ele.control)return ele.control;if(ele.querySelector){var control=ele.querySelector("input,textarea,select");if(control)return control}}return ele}function isSelectOrOption(tagName){return/^(select|option)$/i.test(tagName)}function keyboardInit(){ionic.keyboard.isInitialized||(keyboardHasPlugin()?(window.addEventListener("native.keyboardshow",debouncedKeyboardNativeShow),window.addEventListener("native.keyboardhide",keyboardFocusOut)):document.body.addEventListener("focusout",keyboardFocusOut),document.body.addEventListener("ionic.focusin",debouncedKeyboardFocusIn),document.body.addEventListener("focusin",debouncedKeyboardFocusIn),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerDown",keyboardInit):document.removeEventListener("touchstart",keyboardInit),ionic.keyboard.isInitialized=!0)}function keyboardFocusOut(){clearTimeout(keyboardFocusOutTimer),(ionic.keyboard.isOpen||ionic.keyboard.isOpening)&&(ionic.keyboard.isClosing=!0,ionic.keyboard.isOpening=!1),keyboardFocusOutTimer=setTimeout(function(){ionic.requestAnimationFrame(function(){wasOrientationChange?keyboardWaitForResize(function(){keyboardUpdateViewportHeight(),keyboardHide()},!1):keyboardWaitForResize(keyboardHide,!1)})},50)}function keyboardOrientationChange(){ionic.keyboard.isLandscape=!ionic.keyboard.isLandscape,ionic.Platform.isIOS()&&keyboardUpdateViewportHeight(),ionic.Platform.isAndroid()&&(ionic.keyboard.isOpen&&keyboardHasPlugin()?wasOrientationChange=!0:keyboardWaitForResize(keyboardUpdateViewportHeight,!1))}function keyboardOnKeyDown(e){ionic.scroll.isScrolling&&keyboardPreventDefault(e)}function keyboardPreventDefault(e){"TEXTAREA"!==e.target.tagName&&e.preventDefault()}function keyboardWaitForResize(callback,isOpening){clearInterval(waitForResizeTimer);var maxCount,count=0,initialHeight=getViewportHeight(),viewportHeight=initialHeight;return maxCount=ionic.Platform.isAndroid()&&ionic.Platform.version()<4.4?30:ionic.Platform.isAndroid()?10:1,waitForResizeTimer=setInterval(function(){viewportHeight=getViewportHeight(),++count<maxCount&&(!isPortraitViewportHeight(viewportHeight)&&!isLandscapeViewportHeight(viewportHeight)||!ionic.keyboard.height)||(keyboardHasPlugin()||(ionic.keyboard.height=Math.abs(initialHeight-window.innerHeight)),ionic.keyboard.isOpen=isOpening,clearInterval(waitForResizeTimer),callback())},50),maxCount}function keyboardHide(){clearTimeout(keyboardFocusOutTimer),ionic.keyboard.isOpen=!1,ionic.keyboard.isClosing=!1,(keyboardActiveElement||lastKeyboardActiveElement)&&ionic.trigger("resetScrollView",{target:keyboardActiveElement||lastKeyboardActiveElement},!0),ionic.requestAnimationFrame(function(){document.body.classList.remove(KEYBOARD_OPEN_CSS)}),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerMove",keyboardPreventDefault):document.removeEventListener("touchmove",keyboardPreventDefault),document.removeEventListener("keydown",keyboardOnKeyDown),ionic.Platform.isAndroid()&&(keyboardHasPlugin()&&cordova.plugins.Keyboard.close(),keyboardActiveElement&&keyboardActiveElement.blur()),keyboardActiveElement=null,lastKeyboardActiveElement=null}function keyboardShow(){ionic.keyboard.isOpen=!0,ionic.keyboard.isOpening=!1;var details={keyboardHeight:keyboardGetHeight(),viewportHeight:keyboardCurrentViewportHeight};if(keyboardActiveElement){details.target=keyboardActiveElement;var elementBounds=keyboardActiveElement.getBoundingClientRect();details.elementTop=Math.round(elementBounds.top),details.elementBottom=Math.round(elementBounds.bottom),details.windowHeight=details.viewportHeight-details.keyboardHeight,details.isElementUnderKeyboard=details.elementBottom>details.windowHeight,ionic.trigger("scrollChildIntoView",details,!0)}return setTimeout(function(){document.body.classList.add(KEYBOARD_OPEN_CSS)},400),details}function keyboardGetHeight(){if(ionic.keyboard.height)return ionic.keyboard.height;if(ionic.Platform.isAndroid()){if(ionic.Platform.isFullScreen)return 275;var contentHeight=window.innerHeight;return contentHeight<keyboardCurrentViewportHeight?keyboardCurrentViewportHeight-contentHeight:0}return ionic.Platform.isIOS()?ionic.keyboard.isLandscape?206:ionic.Platform.isWebView()?260:216:275}function isPortraitViewportHeight(viewportHeight){return!!(!ionic.keyboard.isLandscape&&keyboardPortraitViewportHeight&&Math.abs(keyboardPortraitViewportHeight-viewportHeight)<2)}function isLandscapeViewportHeight(viewportHeight){return!!(ionic.keyboard.isLandscape&&keyboardLandscapeViewportHeight&&Math.abs(keyboardLandscapeViewportHeight-viewportHeight)<2)}function keyboardUpdateViewportHeight(){wasOrientationChange=!1,keyboardCurrentViewportHeight=getViewportHeight(),ionic.keyboard.isLandscape&&!keyboardLandscapeViewportHeight?keyboardLandscapeViewportHeight=keyboardCurrentViewportHeight:ionic.keyboard.isLandscape||keyboardPortraitViewportHeight||(keyboardPortraitViewportHeight=keyboardCurrentViewportHeight),keyboardActiveElement&&ionic.trigger("resetScrollView",{target:keyboardActiveElement},!0),ionic.keyboard.isOpen&&ionic.tap.isTextInput(keyboardActiveElement)&&keyboardShow()}function keyboardInitViewportHeight(){var viewportHeight=getViewportHeight();viewportHeight/window.innerWidth<1&&(ionic.keyboard.isLandscape=!0),keyboardCurrentViewportHeight=viewportHeight,ionic.keyboard.isLandscape&&!keyboardLandscapeViewportHeight?keyboardLandscapeViewportHeight=keyboardCurrentViewportHeight:ionic.keyboard.isLandscape||keyboardPortraitViewportHeight||(keyboardPortraitViewportHeight=keyboardCurrentViewportHeight)}function getViewportHeight(){var windowHeight=window.innerHeight;return ionic.Platform.isAndroid()&&ionic.Platform.isFullScreen||!ionic.keyboard.isOpen&&!ionic.keyboard.isOpening||ionic.keyboard.isClosing?windowHeight:windowHeight+keyboardGetHeight()}function keyboardHasPlugin(){return!!(window.cordova&&cordova.plugins&&cordova.plugins.Keyboard)}function viewportLoadTag(){var x;for(x=0;x<document.head.children.length;x++)if("viewport"==document.head.children[x].name){viewportTag=document.head.children[x];break}if(viewportTag){var keyValue,props=viewportTag.content.toLowerCase().replace(/\s+/g,"").split(",");for(x=0;x<props.length;x++)props[x]&&(keyValue=props[x].split("="),viewportProperties[keyValue[0]]=keyValue.length>1?keyValue[1]:"_");viewportUpdate()}}function viewportUpdate(){var initWidth=viewportProperties.width,initHeight=viewportProperties.height,p=ionic.Platform,version=p.version(),orientation=ionic.viewport.orientation();delete viewportProperties.height,viewportProperties.width="device-width",p.isIPad()?version>7?delete viewportProperties.width:p.isWebView()?90==orientation?viewportProperties.height="0":7==version&&(viewportProperties.height="device-height"):version<7&&(viewportProperties.height="0"):p.isIOS()&&(p.isWebView()?version>7?delete viewportProperties.width:version<7?initHeight&&(viewportProperties.height="0"):7==version&&(viewportProperties.height="device-height"):version<7&&initHeight&&(viewportProperties.height="0")),initWidth===viewportProperties.width&&initHeight===viewportProperties.height||viewportTagUpdate()}function viewportTagUpdate(){var key,props=[];for(key in viewportProperties)viewportProperties[key]&&props.push(key+("_"==viewportProperties[key]?"":"="+viewportProperties[key]));viewportTag.content=props.join(", ")}window.ionic=window.ionic||{},window.ionic.views={},window.ionic.version="1.3.1",window.ionic.DelegateService=function(methodNames){function trueFn(){return!0}if(methodNames.indexOf("$getByHandle")>-1)throw new Error("Method '$getByHandle' is implicitly added to each delegate service. Do not list it as a method.");return["$log",function($log){function DelegateInstance(instances,handle){this._instances=instances,this.handle=handle}function DelegateService(){this._instances=[]}function instanceMethodCaller(methodName){return function(){var returnValue,handle=this.handle,args=arguments,foundInstancesCount=0;return this._instances.forEach(function(instance){if((!handle||handle==instance.$$delegateHandle)&&instance.$$filterFn(instance)){foundInstancesCount++;var ret=instance[methodName].apply(instance,args);1===foundInstancesCount&&(returnValue=ret)}}),!foundInstancesCount&&handle?$log.warn('Delegate for handle "'+handle+'" could not find a corresponding element with delegate-handle="'+handle+'"! '+methodName+"() was not called!\nPossible cause: If you are calling "+methodName+'() immediately, and your element with delegate-handle="'+handle+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+methodName+"() and try again."):returnValue}}return methodNames.forEach(function(methodName){DelegateInstance.prototype[methodName]=instanceMethodCaller(methodName)}),DelegateService.prototype=DelegateInstance.prototype,DelegateService.prototype._registerInstance=function(instance,handle,filterFn){var instances=this._instances;return instance.$$delegateHandle=handle,instance.$$filterFn=filterFn||trueFn,instances.push(instance),function(){var index=instances.indexOf(instance);-1!==index&&instances.splice(index,1)}},DelegateService.prototype.$getByHandle=function(handle){return new DelegateInstance(this._instances,handle)},new DelegateService}]},function(window,document,ionic){function domReady(){isDomReady=!0;for(var x=0;x<readyCallbacks.length;x++)ionic.requestAnimationFrame(readyCallbacks[x]);readyCallbacks=[],document.removeEventListener("DOMContentLoaded",domReady)}var readyCallbacks=[],isDomReady="complete"===document.readyState||"interactive"===document.readyState;isDomReady||document.addEventListener("DOMContentLoaded",domReady),window._rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,16)};var cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelRequestAnimationFrame;ionic.DomUtil={requestAnimationFrame:function(cb){return window._rAF(cb)},cancelAnimationFrame:function(requestId){cancelAnimationFrame(requestId)},animationFrameThrottle:function(cb){var args,isQueued,context;return function(){args=arguments,context=this,isQueued||(isQueued=!0,ionic.requestAnimationFrame(function(){cb.apply(context,args),isQueued=!1}))}},contains:function(parentNode,otherNode){for(var current=otherNode;current;){if(current===parentNode)return!0;current=current.parentNode}},getPositionInParent:function(el){return{left:el.offsetLeft,top:el.offsetTop}},getOffsetTop:function(el){var curtop=0;if(el.offsetParent){do{curtop+=el.offsetTop,el=el.offsetParent}while(el);return curtop}},ready:function(cb){isDomReady?ionic.requestAnimationFrame(cb):readyCallbacks.push(cb)},getTextBounds:function(textNode){if(document.createRange){var range=document.createRange();if(range.selectNodeContents(textNode),range.getBoundingClientRect){var rect=range.getBoundingClientRect();if(rect){var sx=window.scrollX,sy=window.scrollY;return{top:rect.top+sy,left:rect.left+sx,right:rect.left+sx+rect.width,bottom:rect.top+sy+rect.height,width:rect.width,height:rect.height}}}}return null},getChildIndex:function(element,type){if(type)for(var c,ch=element.parentNode.children,i=0,k=0,j=ch.length;i<j;i++)if((c=ch[i]).nodeName&&c.nodeName.toLowerCase()==type){if(c==element)return k;k++}return Array.prototype.slice.call(element.parentNode.children).indexOf(element)},swapNodes:function(src,dest){dest.parentNode.insertBefore(src,dest)},elementIsDescendant:function(el,parent,stopAt){var current=el;do{if(current===parent)return!0;current=current.parentNode}while(current&&current!==stopAt);return!1},getParentWithClass:function(e,className,depth){for(depth=depth||10;e.parentNode&&depth--;){if(e.parentNode.classList&&e.parentNode.classList.contains(className))return e.parentNode;e=e.parentNode}return null},getParentOrSelfWithClass:function(e,className,depth){for(depth=depth||10;e&&depth--;){if(e.classList&&e.classList.contains(className))return e;e=e.parentNode}return null},rectContains:function(x,y,x1,y1,x2,y2){return!(x<x1||x>x2)&&!(y<y1||y>y2)},blurAll:function(){return document.activeElement&&document.activeElement!=document.body?(document.activeElement.blur(),document.activeElement):null},cachedAttr:function(ele,key,value){if((ele=ele&&ele.length&&ele[0]||ele)&&ele.setAttribute){var dataKey="$attr-"+key;return arguments.length>2?ele[dataKey]!==value&&(ele.setAttribute(key,value),ele[dataKey]=value):void 0===ele[dataKey]&&(ele[dataKey]=ele.getAttribute(key)),ele[dataKey]}},cachedStyles:function(ele,styles){if((ele=ele&&ele.length&&ele[0]||ele)&&ele.style)for(var prop in styles)ele["$style-"+prop]!==styles[prop]&&(ele.style[prop]=ele["$style-"+prop]=styles[prop])}},ionic.requestAnimationFrame=ionic.DomUtil.requestAnimationFrame,ionic.cancelAnimationFrame=ionic.DomUtil.cancelAnimationFrame,ionic.animationFrameThrottle=ionic.DomUtil.animationFrameThrottle}(window,document,ionic),function(ionic){ionic.CustomEvent=function(){if("function"==typeof window.CustomEvent)return CustomEvent;var customEvent=function(event,params){var evt;params=params||{bubbles:!1,cancelable:!1,detail:void 0};try{(evt=document.createEvent("CustomEvent")).initCustomEvent(event,params.bubbles,params.cancelable,params.detail)}catch(error){evt=document.createEvent("Event");for(var param in params)evt[param]=params[param];evt.initEvent(event,params.bubbles,params.cancelable)}return evt};return customEvent.prototype=window.Event.prototype,customEvent}(),ionic.EventController={VIRTUALIZED_EVENTS:["tap","swipe","swiperight","swipeleft","drag","hold","release"],trigger:function(eventType,data,bubbles,cancelable){var event=new ionic.CustomEvent(eventType,{detail:data,bubbles:!!bubbles,cancelable:!!cancelable});data&&data.target&&data.target.dispatchEvent&&data.target.dispatchEvent(event)||window.dispatchEvent(event)},on:function(type,callback,element){for(var e=element||window,i=0,j=this.VIRTUALIZED_EVENTS.length;i<j;i++)if(type==this.VIRTUALIZED_EVENTS[i]){var gesture=new ionic.Gesture(element);return gesture.on(type,callback),gesture}e.addEventListener(type,callback)},off:function(type,callback,element){element.removeEventListener(type,callback)},onGesture:function(type,callback,element,options){var gesture=new ionic.Gesture(element,options);return gesture.on(type,callback),gesture},offGesture:function(gesture,type,callback){gesture&&gesture.off(type,callback)},handlePopState:function(){}},ionic.on=function(){ionic.EventController.on.apply(ionic.EventController,arguments)},ionic.off=function(){ionic.EventController.off.apply(ionic.EventController,arguments)},ionic.trigger=ionic.EventController.trigger,ionic.onGesture=function(){return ionic.EventController.onGesture.apply(ionic.EventController.onGesture,arguments)},ionic.offGesture=function(){return ionic.EventController.offGesture.apply(ionic.EventController.offGesture,arguments)}}(window.ionic),function(ionic){function setup(){if(!ionic.Gestures.READY){ionic.Gestures.event.determineEventTypes();for(var name in ionic.Gestures.gestures)ionic.Gestures.gestures.hasOwnProperty(name)&&ionic.Gestures.detection.register(ionic.Gestures.gestures[name]);ionic.Gestures.event.onTouch(ionic.Gestures.DOCUMENT,ionic.Gestures.EVENT_MOVE,ionic.Gestures.detection.detect),ionic.Gestures.event.onTouch(ionic.Gestures.DOCUMENT,ionic.Gestures.EVENT_END,ionic.Gestures.detection.detect),ionic.Gestures.READY=!0}}ionic.Gesture=function(element,options){return new ionic.Gestures.Instance(element,options||{})},ionic.Gestures={},ionic.Gestures.defaults={stop_browser_behavior:"disable-user-behavior"},ionic.Gestures.HAS_POINTEREVENTS=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ionic.Gestures.HAS_TOUCHEVENTS="ontouchstart"in window,ionic.Gestures.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,ionic.Gestures.NO_MOUSEEVENTS=ionic.Gestures.HAS_TOUCHEVENTS&&window.navigator.userAgent.match(ionic.Gestures.MOBILE_REGEX),ionic.Gestures.EVENT_TYPES={},ionic.Gestures.DIRECTION_DOWN="down",ionic.Gestures.DIRECTION_LEFT="left",ionic.Gestures.DIRECTION_UP="up",ionic.Gestures.DIRECTION_RIGHT="right",ionic.Gestures.POINTER_MOUSE="mouse",ionic.Gestures.POINTER_TOUCH="touch",ionic.Gestures.POINTER_PEN="pen",ionic.Gestures.EVENT_START="start",ionic.Gestures.EVENT_MOVE="move",ionic.Gestures.EVENT_END="end",ionic.Gestures.DOCUMENT=window.document,ionic.Gestures.plugins={},ionic.Gestures.READY=!1,ionic.Gestures.Instance=function(element,options){var self=this;return null===element?this:(setup(),this.element=element,this.enabled=!0,this.options=ionic.Gestures.utils.extend(ionic.Gestures.utils.extend({},ionic.Gestures.defaults),options||{}),this.options.stop_browser_behavior&&ionic.Gestures.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),ionic.Gestures.event.onTouch(element,ionic.Gestures.EVENT_START,function(ev){self.enabled&&ionic.Gestures.detection.startDetect(self,ev)}),this)},ionic.Gestures.Instance.prototype={on:function(gesture,handler){for(var gestures=gesture.split(" "),t=0;t<gestures.length;t++)this.element.addEventListener(gestures[t],handler,!1);return this},off:function(gesture,handler){for(var gestures=gesture.split(" "),t=0;t<gestures.length;t++)this.element.removeEventListener(gestures[t],handler,!1);return this},trigger:function(gesture,eventData){var event=ionic.Gestures.DOCUMENT.createEvent("Event");event.initEvent(gesture,!0,!0),event.gesture=eventData;var element=this.element;return ionic.Gestures.utils.hasParent(eventData.target,element)&&(element=eventData.target),element.dispatchEvent(event),this},enable:function(state){return this.enabled=state,this}};var last_move_event=null,enable_detect=!1,touch_triggered=!1;ionic.Gestures.event={bindDom:function(element,type,handler){for(var types=type.split(" "),t=0;t<types.length;t++)element.addEventListener(types[t],handler,!1)},onTouch:function(element,eventType,handler){var self=this;this.bindDom(element,ionic.Gestures.EVENT_TYPES[eventType],function(ev){var sourceEventType=ev.type.toLowerCase();if(!sourceEventType.match(/mouse/)||!touch_triggered){sourceEventType.match(/touch/)||sourceEventType.match(/pointerdown/)||sourceEventType.match(/mouse/)&&1===ev.which?enable_detect=!0:sourceEventType.match(/mouse/)&&1!==ev.which&&(enable_detect=!1),sourceEventType.match(/touch|pointer/)&&(touch_triggered=!0);var count_touches=0;enable_detect&&(ionic.Gestures.HAS_POINTEREVENTS&&eventType!=ionic.Gestures.EVENT_END?count_touches=ionic.Gestures.PointerEvent.updatePointer(eventType,ev):sourceEventType.match(/touch/)?count_touches=ev.touches.length:touch_triggered||(count_touches=sourceEventType.match(/up/)?0:1),count_touches>0&&eventType==ionic.Gestures.EVENT_END?eventType=ionic.Gestures.EVENT_MOVE:count_touches||(eventType=ionic.Gestures.EVENT_END),(count_touches||null===last_move_event)&&(last_move_event=ev),handler.call(ionic.Gestures.detection,self.collectEventData(element,eventType,self.getTouchList(last_move_event,eventType),ev)),ionic.Gestures.HAS_POINTEREVENTS&&eventType==ionic.Gestures.EVENT_END&&(count_touches=ionic.Gestures.PointerEvent.updatePointer(eventType,ev))),count_touches||(last_move_event=null,enable_detect=!1,touch_triggered=!1,ionic.Gestures.PointerEvent.reset())}})},determineEventTypes:function(){var types;types=ionic.Gestures.HAS_POINTEREVENTS?ionic.Gestures.PointerEvent.getEvents():ionic.Gestures.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],ionic.Gestures.EVENT_TYPES[ionic.Gestures.EVENT_START]=types[0],ionic.Gestures.EVENT_TYPES[ionic.Gestures.EVENT_MOVE]=types[1],ionic.Gestures.EVENT_TYPES[ionic.Gestures.EVENT_END]=types[2]},getTouchList:function(ev){return ionic.Gestures.HAS_POINTEREVENTS?ionic.Gestures.PointerEvent.getTouchList():ev.touches?ev.touches:(ev.identifier=1,[ev])},collectEventData:function(element,eventType,touches,ev){var pointerType=ionic.Gestures.POINTER_TOUCH;return(ev.type.match(/mouse/)||ionic.Gestures.PointerEvent.matchType(ionic.Gestures.POINTER_MOUSE,ev))&&(pointerType=ionic.Gestures.POINTER_MOUSE),{center:ionic.Gestures.utils.getCenter(touches),timeStamp:(new Date).getTime(),target:ev.target,touches:touches,eventType:eventType,pointerType:pointerType,srcEvent:ev,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return ionic.Gestures.detection.stopDetect()}}}},ionic.Gestures.PointerEvent={pointers:{},getTouchList:function(){var self=this,touchlist=[];return Object.keys(self.pointers).sort().forEach(function(id){touchlist.push(self.pointers[id])}),touchlist},updatePointer:function(type,pointerEvent){return type==ionic.Gestures.EVENT_END?this.pointers={}:(pointerEvent.identifier=pointerEvent.pointerId,this.pointers[pointerEvent.pointerId]=pointerEvent),Object.keys(this.pointers).length},matchType:function(pointerType,ev){if(!ev.pointerType)return!1;var types={};return types[ionic.Gestures.POINTER_MOUSE]=ev.pointerType==ev.MSPOINTER_TYPE_MOUSE||ev.pointerType==ionic.Gestures.POINTER_MOUSE,types[ionic.Gestures.POINTER_TOUCH]=ev.pointerType==ev.MSPOINTER_TYPE_TOUCH||ev.pointerType==ionic.Gestures.POINTER_TOUCH,types[ionic.Gestures.POINTER_PEN]=ev.pointerType==ev.MSPOINTER_TYPE_PEN||ev.pointerType==ionic.Gestures.POINTER_PEN,types[pointerType]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},ionic.Gestures.utils={extend:function(dest,src,merge){for(var key in src)void 0!==dest[key]&&merge||(dest[key]=src[key]);return dest},hasParent:function(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1},getCenter:function(touches){for(var valuesX=[],valuesY=[],t=0,len=touches.length;t<len;t++)valuesX.push(touches[t].pageX),valuesY.push(touches[t].pageY);return{pageX:(Math.min.apply(Math,valuesX)+Math.max.apply(Math,valuesX))/2,pageY:(Math.min.apply(Math,valuesY)+Math.max.apply(Math,valuesY))/2}},getVelocity:function(delta_time,delta_x,delta_y){return{x:Math.abs(delta_x/delta_time)||0,y:Math.abs(delta_y/delta_time)||0}},getAngle:function(touch1,touch2){var y=touch2.pageY-touch1.pageY,x=touch2.pageX-touch1.pageX;return 180*Math.atan2(y,x)/Math.PI},getDirection:function(touch1,touch2){return Math.abs(touch1.pageX-touch2.pageX)>=Math.abs(touch1.pageY-touch2.pageY)?touch1.pageX-touch2.pageX>0?ionic.Gestures.DIRECTION_LEFT:ionic.Gestures.DIRECTION_RIGHT:touch1.pageY-touch2.pageY>0?ionic.Gestures.DIRECTION_UP:ionic.Gestures.DIRECTION_DOWN},getDistance:function(touch1,touch2){var x=touch2.pageX-touch1.pageX,y=touch2.pageY-touch1.pageY;return Math.sqrt(x*x+y*y)},getScale:function(start,end){return start.length>=2&&end.length>=2?this.getDistance(end[0],end[1])/this.getDistance(start[0],start[1]):1},getRotation:function(start,end){return start.length>=2&&end.length>=2?this.getAngle(end[1],end[0])-this.getAngle(start[1],start[0]):0},isVertical:function(direction){return direction==ionic.Gestures.DIRECTION_UP||direction==ionic.Gestures.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(element,css_class){element&&element.classList&&(element.classList.add(css_class),element.onselectstart=function(){return!1})}},ionic.Gestures.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(inst,eventData){this.current||(this.stopped=!1,this.current={inst:inst,startEvent:ionic.Gestures.utils.extend({},eventData),lastEvent:!1,name:""},this.detect(eventData))},detect:function(eventData){if(!this.current||this.stopped)return null;eventData=this.extendEventData(eventData);for(var inst_options=this.current.inst.options,g=0,len=this.gestures.length;g<len;g++){var gesture=this.gestures[g];if(!this.stopped&&!1!==inst_options[gesture.name]&&!1===gesture.handler.call(gesture,eventData,this.current.inst)){this.stopDetect();break}}return this.current&&(this.current.lastEvent=eventData),eventData.eventType==ionic.Gestures.EVENT_END&&!eventData.touches.length-1&&this.stopDetect(),eventData},stopDetect:function(){this.previous=ionic.Gestures.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(ev){var startEv=this.current.startEvent;if(startEv&&(ev.touches.length!=startEv.touches.length||ev.touches===startEv.touches)){startEv.touches=[];for(var i=0,len=ev.touches.length;i<len;i++)startEv.touches.push(ionic.Gestures.utils.extend({},ev.touches[i]))}var delta_time=ev.timeStamp-startEv.timeStamp,delta_x=ev.center.pageX-startEv.center.pageX,delta_y=ev.center.pageY-startEv.center.pageY,velocity=ionic.Gestures.utils.getVelocity(delta_time,delta_x,delta_y);return ionic.Gestures.utils.extend(ev,{deltaTime:delta_time,deltaX:delta_x,deltaY:delta_y,velocityX:velocity.x,velocityY:velocity.y,distance:ionic.Gestures.utils.getDistance(startEv.center,ev.center),angle:ionic.Gestures.utils.getAngle(startEv.center,ev.center),direction:ionic.Gestures.utils.getDirection(startEv.center,ev.center),scale:ionic.Gestures.utils.getScale(startEv.touches,ev.touches),rotation:ionic.Gestures.utils.getRotation(startEv.touches,ev.touches),startEvent:startEv}),ev},register:function(gesture){var options=gesture.defaults||{};return void 0===options[gesture.name]&&(options[gesture.name]=!0),ionic.Gestures.utils.extend(ionic.Gestures.defaults,options,!0),gesture.index=gesture.index||1e3,this.gestures.push(gesture),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},ionic.Gestures.gestures=ionic.Gestures.gestures||{},ionic.Gestures.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:9},timer:null,handler:function(ev,inst){switch(ev.eventType){case ionic.Gestures.EVENT_START:clearTimeout(this.timer),ionic.Gestures.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==ionic.Gestures.detection.current.name&&(ionic.tap.cancelClick(),inst.trigger("hold",ev))},inst.options.hold_timeout);break;case ionic.Gestures.EVENT_MOVE:ev.distance>inst.options.hold_threshold&&clearTimeout(this.timer);break;case ionic.Gestures.EVENT_END:clearTimeout(this.timer)}}},ionic.Gestures.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(ev,inst){if(ev.eventType==ionic.Gestures.EVENT_END&&"touchcancel"!=ev.srcEvent.type){var prev=ionic.Gestures.detection.previous,did_doubletap=!1;if(ev.deltaTime>inst.options.tap_max_touchtime||ev.distance>inst.options.tap_max_distance)return;prev&&"tap"==prev.name&&ev.timeStamp-prev.lastEvent.timeStamp<inst.options.doubletap_interval&&ev.distance<inst.options.doubletap_distance&&(inst.trigger("doubletap",ev),did_doubletap=!0),did_doubletap&&!inst.options.tap_always||(ionic.Gestures.detection.current.name="tap",inst.trigger("tap",ev))}}},ionic.Gestures.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.4},handler:function(ev,inst){if(ev.eventType==ionic.Gestures.EVENT_END){if(inst.options.swipe_max_touches>0&&ev.touches.length>inst.options.swipe_max_touches)return;(ev.velocityX>inst.options.swipe_velocity||ev.velocityY>inst.options.swipe_velocity)&&(inst.trigger(this.name,ev),inst.trigger(this.name+ev.direction,ev))}}},ionic.Gestures.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!0,drag_block_vertical:!0,drag_lock_to_axis:!1,drag_lock_min_distance:25,prevent_default_directions:[]},triggered:!1,handler:function(ev,inst){if("touchstart"==ev.srcEvent.type||"touchend"==ev.srcEvent.type?this.preventedFirstMove=!1:this.preventedFirstMove||"touchmove"!=ev.srcEvent.type||(inst.options.prevent_default_directions.length>0&&-1!=inst.options.prevent_default_directions.indexOf(ev.direction)&&ev.srcEvent.preventDefault(),this.preventedFirstMove=!0),ionic.Gestures.detection.current.name!=this.name&&this.triggered)return inst.trigger(this.name+"end",ev),void(this.triggered=!1);if(!(inst.options.drag_max_touches>0&&ev.touches.length>inst.options.drag_max_touches))switch(ev.eventType){case ionic.Gestures.EVENT_START:this.triggered=!1;break;case ionic.Gestures.EVENT_MOVE:if(ev.distance<inst.options.drag_min_distance&&ionic.Gestures.detection.current.name!=this.name)return;if(ionic.Gestures.detection.current.name!=this.name&&(ionic.Gestures.detection.current.name=this.name,inst.options.correct_for_drag_min_distance)){var factor=Math.abs(inst.options.drag_min_distance/ev.distance);ionic.Gestures.detection.current.startEvent.center.pageX+=ev.deltaX*factor,ionic.Gestures.detection.current.startEvent.center.pageY+=ev.deltaY*factor,ev=ionic.Gestures.detection.extendEventData(ev)}(ionic.Gestures.detection.current.lastEvent.drag_locked_to_axis||inst.options.drag_lock_to_axis&&inst.options.drag_lock_min_distance<=ev.distance)&&(ev.drag_locked_to_axis=!0);var last_direction=ionic.Gestures.detection.current.lastEvent.direction;ev.drag_locked_to_axis&&last_direction!==ev.direction&&(ionic.Gestures.utils.isVertical(last_direction)?ev.direction=ev.deltaY<0?ionic.Gestures.DIRECTION_UP:ionic.Gestures.DIRECTION_DOWN:ev.direction=ev.deltaX<0?ionic.Gestures.DIRECTION_LEFT:ionic.Gestures.DIRECTION_RIGHT),this.triggered||(inst.trigger(this.name+"start",ev),this.triggered=!0),inst.trigger(this.name,ev),inst.trigger(this.name+ev.direction,ev),(inst.options.drag_block_vertical&&ionic.Gestures.utils.isVertical(ev.direction)||inst.options.drag_block_horizontal&&!ionic.Gestures.utils.isVertical(ev.direction))&&ev.preventDefault();break;case ionic.Gestures.EVENT_END:this.triggered&&inst.trigger(this.name+"end",ev),this.triggered=!1}}},ionic.Gestures.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(ev,inst){if(ionic.Gestures.detection.current.name!=this.name&&this.triggered)return inst.trigger(this.name+"end",ev),void(this.triggered=!1);if(!(ev.touches.length<2))switch(inst.options.transform_always_block&&ev.preventDefault(),ev.eventType){case ionic.Gestures.EVENT_START:this.triggered=!1;break;case ionic.Gestures.EVENT_MOVE:var scale_threshold=Math.abs(1-ev.scale),rotation_threshold=Math.abs(ev.rotation);if(scale_threshold<inst.options.transform_min_scale&&rotation_threshold<inst.options.transform_min_rotation)return;ionic.Gestures.detection.current.name=this.name,this.triggered||(inst.trigger(this.name+"start",ev),this.triggered=!0),inst.trigger(this.name,ev),rotation_threshold>inst.options.transform_min_rotation&&inst.trigger("rotate",ev),scale_threshold>inst.options.transform_min_scale&&(inst.trigger("pinch",ev),inst.trigger("pinch"+(ev.scale<1?"in":"out"),ev));break;case ionic.Gestures.EVENT_END:this.triggered&&inst.trigger(this.name+"end",ev),this.triggered=!1}}},ionic.Gestures.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(ev,inst){inst.options.prevent_mouseevents&&ev.pointerType==ionic.Gestures.POINTER_MOUSE?ev.stopDetect():(inst.options.prevent_default&&ev.preventDefault(),ev.eventType==ionic.Gestures.EVENT_START&&inst.trigger(this.name,ev))}},ionic.Gestures.gestures.Release={name:"release",index:1/0,handler:function(ev,inst){ev.eventType==ionic.Gestures.EVENT_END&&inst.trigger(this.name,ev)}}}(window.ionic),function(window,document,ionic){function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}function onWindowLoad(){self.isWebView()?document.addEventListener("deviceready",onPlatformReady,!1):onPlatformReady(),windowLoadListenderAttached&&window.removeEventListener("load",onWindowLoad,!1)}function onPlatformReady(){self.isReady=!0,self.detect();for(var x=0;x<readyCallbacks.length;x++)readyCallbacks[x]();readyCallbacks=[],ionic.trigger("platformready",{target:document}),requestAnimationFrame(function(){document.body.classList.add("platform-ready")})}var windowLoadListenderAttached,requestAnimationFrame=ionic.requestAnimationFrame,self=ionic.Platform={navigator:window.navigator,isReady:!1,isFullScreen:!1,platforms:null,grade:null,ua:navigator.userAgent,ready:function(cb){self.isReady?cb():readyCallbacks.push(cb)},detect:function(){self._checkPlatforms(),requestAnimationFrame(function(){for(var i=0;i<self.platforms.length;i++)document.body.classList.add("platform-"+self.platforms[i])})},setGrade:function(grade){var oldGrade=self.grade;self.grade=grade,requestAnimationFrame(function(){oldGrade&&document.body.classList.remove("grade-"+oldGrade),document.body.classList.add("grade-"+grade)})},device:function(){return window.device||{}},_checkPlatforms:function(){self.platforms=[];var grade="a";self.isWebView()?(self.platforms.push("webview"),window.cordova||window.PhoneGap||window.phonegap?self.platforms.push("cordova"):"object"==typeof window.forge&&self.platforms.push("trigger")):self.platforms.push("browser"),self.isIPad()&&self.platforms.push("ipad");var platform=self.platform();if(platform){self.platforms.push(platform);var version=self.version();if(version){var v=version.toString();v.indexOf(".")>0?v=v.replace(".","_"):v+="_0",self.platforms.push(platform+v.split("_")[0]),self.platforms.push(platform+v),self.isAndroid()&&version<4.4?grade=version<4?"c":"b":self.isWindowsPhone()&&(grade="b")}}self.setGrade(grade)},isWebView:function(){return!(!window.cordova&&!window.PhoneGap&&!window.phonegap&&"object"!==window.forge)},isIPad:function(){return!!/iPad/i.test(self.navigator.platform)||/iPad/i.test(self.ua)},isIOS:function(){return self.is("ios")},isAndroid:function(){return self.is("android")},isWindowsPhone:function(){return self.is("windowsphone")},isEdge:function(){return self.is("edge")},isCrosswalk:function(){return self.is("crosswalk")},platform:function(){return null===platformName&&self.setPlatform(self.device().platform),platformName},setPlatform:function(n){platformName=void 0!==n&&null!==n&&n.length?n.toLowerCase():getParameterByName("ionicplatform")?getParameterByName("ionicplatform"):self.ua.indexOf("Edge")>-1?"edge":self.ua.indexOf("Windows Phone")>-1?"windowsphone":self.ua.indexOf("Android")>0?"android":/iPhone|iPad|iPod/.test(self.ua)?"ios":self.navigator.platform&&navigator.platform.toLowerCase().split(" ")[0]||""},version:function(){return null===platformVersion&&self.setVersion(self.device().version),platformVersion},setVersion:function(v){if(void 0===v||null===v||(v=v.split("."),v=parseFloat(v[0]+"."+(v.length>1?v[1]:0)),isNaN(v))){platformVersion=0;var pName=self.platform(),versionMatch={android:/Android (\d+).(\d+)?/,ios:/OS (\d+)_(\d+)?/,windowsphone:/Windows Phone (\d+).(\d+)?/};versionMatch[pName]&&(v=self.ua.match(versionMatch[pName]))&&v.length>2&&(platformVersion=parseFloat(v[1]+"."+v[2]))}else platformVersion=v},is:function(type){if(type=type.toLowerCase(),self.platforms)for(var x=0;x<self.platforms.length;x++)if(self.platforms[x]===type)return!0;var pName=self.platform();return pName?pName===type.toLowerCase():self.ua.toLowerCase().indexOf(type)>=0},exitApp:function(){self.ready(function(){navigator.app&&navigator.app.exitApp&&navigator.app.exitApp()})},showStatusBar:function(val){self._showStatusBar=val,self.ready(function(){requestAnimationFrame(function(){self._showStatusBar?(window.StatusBar&&window.StatusBar.show(),document.body.classList.remove("status-bar-hide")):(window.StatusBar&&window.StatusBar.hide(),document.body.classList.add("status-bar-hide"))})})},fullScreen:function(showFullScreen,showStatusBar){self.isFullScreen=!1!==showFullScreen,ionic.DomUtil.ready(function(){requestAnimationFrame(function(){self.isFullScreen?document.body.classList.add("fullscreen"):document.body.classList.remove("fullscreen")}),self.showStatusBar(!0===showStatusBar)})}},platformName=null,platformVersion=null,readyCallbacks=[],platformReadyTimer=2e3;setTimeout(function(){!self.isReady&&self.isWebView()},platformReadyTimer),"complete"===document.readyState?onWindowLoad():(windowLoadListenderAttached=!0,window.addEventListener("load",onWindowLoad,!1))}(window,document,ionic),function(document,ionic){"use strict";ionic.CSS={},ionic.CSS.TRANSITION=[],ionic.CSS.TRANSFORM=[],ionic.EVENTS={},function(){var i,keys=["webkitTransform","transform","-webkit-transform","webkit-transform","-moz-transform","moz-transform","MozTransform","mozTransform","msTransform"];for(i=0;i<keys.length;i++)if(void 0!==document.documentElement.style[keys[i]]){ionic.CSS.TRANSFORM=keys[i];break}for(keys=["webkitTransition","mozTransition","msTransition","transition"],i=0;i<keys.length;i++)if(void 0!==document.documentElement.style[keys[i]]){ionic.CSS.TRANSITION=keys[i];break}ionic.CSS.TRANSITION=ionic.CSS.TRANSITION||"transition";var isWebkit=ionic.CSS.TRANSITION.indexOf("webkit")>-1;ionic.CSS.TRANSITION_DURATION=(isWebkit?"-webkit-":"")+"transition-duration",ionic.CSS.TRANSITIONEND=(isWebkit?"webkitTransitionEnd ":"")+"transitionend"}(),function(){var touchStartEvent="touchstart",touchMoveEvent="touchmove",touchEndEvent="touchend",touchCancelEvent="touchcancel";window.navigator.pointerEnabled?(touchStartEvent="pointerdown",touchMoveEvent="pointermove",touchEndEvent="pointerup",touchCancelEvent="pointercancel"):window.navigator.msPointerEnabled&&(touchStartEvent="MSPointerDown",touchMoveEvent="MSPointerMove",touchEndEvent="MSPointerUp",touchCancelEvent="MSPointerCancel"),ionic.EVENTS.touchstart=touchStartEvent,ionic.EVENTS.touchmove=touchMoveEvent,ionic.EVENTS.touchend=touchEndEvent,ionic.EVENTS.touchcancel=touchCancelEvent}(),"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function update(fn){return function(){var x,classes=self.className.split(/\s+/);for(x=0;x<arguments.length;x++)fn(classes,classes.indexOf(arguments[x]),arguments[x]);self.className=classes.join(" ")}}var self=this;return{add:update(function(classes,index,value){~index||classes.push(value)}),remove:update(function(classes,index){~index&&classes.splice(index,1)}),toggle:update(function(classes,index,value){~index?classes.splice(index,1):classes.push(value)}),contains:function(value){return!!~self.className.split(/\s+/).indexOf(value)},item:function(i){return self.className.split(/\s+/)[i]||null}}}})}(document,ionic);var tapDoc,tapActiveEle,tapEnabledTouchEvents,tapMouseResetTimer,tapPointerMoved,tapPointerStart,tapTouchFocusedInput,tapLastTouchTarget,tapTouchMoveListener="touchmove",TAP_RELEASE_TOLERANCE=12,TAP_RELEASE_BUTTON_TOLERANCE=50,tapEventListeners={click:function(e){return"submit"==e.target.type&&0===e.detail?null:ionic.scroll.isScrolling&&ionic.tap.containsOrIsTextInput(e.target)||!e.isIonicTap&&!ionic.tap.requiresNativeClick(e.target)?(e.stopPropagation(),ionic.tap.isLabelWithTextInput(e.target)||e.preventDefault(),!1):void 0},mousedown:function(e){return e.isIonicTap||tapIgnoreEvent(e)?null:tapEnabledTouchEvents?(e.stopPropagation(),ionic.Platform.isEdge()||ionic.tap.isTextInput(e.target)&&tapLastTouchTarget===e.target||isSelectOrOption(e.target.tagName)||ionic.tap.isVideo(e.target)||e.preventDefault(),!1):(tapPointerMoved=!1,tapPointerStart=ionic.tap.pointerCoord(e),tapEventListener("mousemove"),void ionic.activator.start(e))},mouseup:function(e){return tapEnabledTouchEvents?(e.stopPropagation(),e.preventDefault(),!1):!tapIgnoreEvent(e)&&!isSelectOrOption(e.target.tagName)&&(tapHasPointerMoved(e)||tapClick(e),tapEventListener("mousemove",!1),ionic.activator.end(),void(tapPointerMoved=!1))},mousemove:function(e){if(tapHasPointerMoved(e))return tapEventListener("mousemove",!1),ionic.activator.end(),tapPointerMoved=!0,!1},touchstart:tapTouchStart,touchend:tapTouchEnd,touchcancel:tapTouchCancel,touchmove:tapTouchMove,pointerdown:tapTouchStart,pointerup:tapTouchEnd,pointercancel:tapTouchCancel,pointermove:tapTouchMove,MSPointerDown:tapTouchStart,MSPointerUp:tapTouchEnd,MSPointerCancel:tapTouchCancel,MSPointerMove:tapTouchMove,focusin:function(e){tapEnabledTouchEvents&&ionic.tap.isTextInput(tapActiveElement())&&ionic.tap.isTextInput(tapTouchFocusedInput)&&tapTouchFocusedInput!==e.target&&(tapTouchFocusedInput.focus(),tapTouchFocusedInput=null),ionic.scroll.isScrolling=!1},focusout:function(){tapActiveElement(null)}};ionic.tap={register:function(ele){return tapDoc=ele,tapEventListener("click",!0,!0),tapEventListener("mouseup"),tapEventListener("mousedown"),window.navigator.pointerEnabled?(tapEventListener("pointerdown"),tapEventListener("pointerup"),tapEventListener("pointercancel"),tapTouchMoveListener="pointermove"):window.navigator.msPointerEnabled?(tapEventListener("MSPointerDown"),tapEventListener("MSPointerUp"),tapEventListener("MSPointerCancel"),tapTouchMoveListener="MSPointerMove"):(tapEventListener("touchstart"),tapEventListener("touchend"),tapEventListener("touchcancel")),tapEventListener("focusin"),tapEventListener("focusout"),function(){for(var type in tapEventListeners)tapEventListener(type,!1);tapDoc=null,tapActiveEle=null,tapEnabledTouchEvents=!1,tapPointerMoved=!1,tapPointerStart=null}},ignoreScrollStart:function(e){return e.defaultPrevented||/^(file|range)$/i.test(e.target.type)||"true"==(e.target.dataset?e.target.dataset.preventScroll:e.target.getAttribute("data-prevent-scroll"))||!!/^(object|embed)$/i.test(e.target.tagName)||ionic.tap.isElementTapDisabled(e.target)},isTextInput:function(ele){return!!ele&&("TEXTAREA"==ele.tagName||"true"===ele.contentEditable||"INPUT"==ele.tagName&&!/^(radio|checkbox|range|file|submit|reset|color|image|button)$/i.test(ele.type))},isDateInput:function(ele){return!!ele&&"INPUT"==ele.tagName&&/^(date|time|datetime-local|month|week)$/i.test(ele.type)},isVideo:function(ele){return!!ele&&"VIDEO"==ele.tagName},isKeyboardElement:function(ele){return!ionic.Platform.isIOS()||ionic.Platform.isIPad()?ionic.tap.isTextInput(ele)&&!ionic.tap.isDateInput(ele):ionic.tap.isTextInput(ele)||!!ele&&"SELECT"==ele.tagName},isLabelWithTextInput:function(ele){var container=tapContainingElement(ele,!1);return!!container&&ionic.tap.isTextInput(tapTargetElement(container))},containsOrIsTextInput:function(ele){return ionic.tap.isTextInput(ele)||ionic.tap.isLabelWithTextInput(ele)},cloneFocusedInput:function(container){ionic.tap.hasCheckedClone||(ionic.tap.hasCheckedClone=!0,ionic.requestAnimationFrame(function(){var focusInput=container.querySelector(":focus");if(ionic.tap.isTextInput(focusInput)&&!ionic.tap.isDateInput(focusInput)){var clonedInput=focusInput.cloneNode(!0);clonedInput.value=focusInput.value,clonedInput.classList.add("cloned-text-input"),clonedInput.readOnly=!0,focusInput.isContentEditable&&(clonedInput.contentEditable=focusInput.contentEditable,clonedInput.innerHTML=focusInput.innerHTML),focusInput.parentElement.insertBefore(clonedInput,focusInput),focusInput.classList.add("previous-input-focus"),clonedInput.scrollTop=focusInput.scrollTop}}))},hasCheckedClone:!1,removeClonedInputs:function(container){ionic.tap.hasCheckedClone=!1,ionic.requestAnimationFrame(function(){var x,clonedInputs=container.querySelectorAll(".cloned-text-input"),previousInputFocus=container.querySelectorAll(".previous-input-focus");for(x=0;x<clonedInputs.length;x++)clonedInputs[x].parentElement.removeChild(clonedInputs[x]);for(x=0;x<previousInputFocus.length;x++)previousInputFocus[x].classList.remove("previous-input-focus"),previousInputFocus[x].style.top="",ionic.keyboard.isOpen&&!ionic.keyboard.isClosing&&previousInputFocus[x].focus()})},requiresNativeClick:function(ele){return!(!ionic.Platform.isWindowsPhone()||"A"!=ele.tagName&&"BUTTON"!=ele.tagName&&!ele.hasAttribute("ng-click")&&("INPUT"!=ele.tagName||"button"!=ele.type&&"submit"!=ele.type))||(!!(!ele||ele.disabled||/^(file|range)$/i.test(ele.type)||/^(object|video)$/i.test(ele.tagName)||ionic.tap.isLabelContainingFileInput(ele))||ionic.tap.isElementTapDisabled(ele))},isLabelContainingFileInput:function(ele){var lbl=tapContainingElement(ele);if("LABEL"!==lbl.tagName)return!1;var fileInput=lbl.querySelector("input[type=file]");return!(!fileInput||!1!==fileInput.disabled)},isElementTapDisabled:function(ele){if(ele&&1===ele.nodeType)for(var element=ele;element;){if(element.getAttribute&&"true"==element.getAttribute("data-tap-disabled"))return!0;element=element.parentElement}return!1},setTolerance:function(releaseTolerance,releaseButtonTolerance){TAP_RELEASE_TOLERANCE=releaseTolerance,TAP_RELEASE_BUTTON_TOLERANCE=releaseButtonTolerance},cancelClick:function(){tapPointerMoved=!0},pointerCoord:function(event){var c={x:0,y:0};if(event){var touches=event.touches&&event.touches.length?event.touches:[event],e=event.changedTouches&&event.changedTouches[0]||touches[0];e&&(c.x=e.clientX||e.pageX||0,c.y=e.clientY||e.pageY||0)}return c}},ionic.DomUtil.ready(function(){var ng="undefined"!=typeof angular?angular:null;(!ng||ng&&!ng.scenario)&&ionic.tap.register(document)}),function(document,ionic){"use strict";function clear(){queueElements={},ionic.requestAnimationFrame(deactivateElements)}function activateElements(){for(var key in queueElements)queueElements[key]&&(queueElements[key].classList.add(ACTIVATED_CLASS),activeElements[key]=queueElements[key]);queueElements={}}function deactivateElements(){if(ionic.transition&&ionic.transition.isActive)setTimeout(deactivateElements,400);else for(var key in activeElements)activeElements[key]&&(activeElements[key].classList.remove(ACTIVATED_CLASS),delete activeElements[key])}var queueElements={},activeElements={},keyId=0,ACTIVATED_CLASS="activated";ionic.activator={start:function(e){var hitX=ionic.tap.pointerCoord(e).x;hitX>0&&hitX<30||ionic.requestAnimationFrame(function(){if(!(ionic.scroll&&ionic.scroll.isScrolling||ionic.tap.requiresNativeClick(e.target))){for(var eleToActivate,ele=e.target,x=0;x<6&&(ele&&1===ele.nodeType);x++){if(eleToActivate&&ele.classList&&ele.classList.contains("item")){eleToActivate=ele;break}if("A"==ele.tagName||"BUTTON"==ele.tagName||ele.hasAttribute("ng-click")){eleToActivate=ele;break}if(ele.classList&&ele.classList.contains("button")){eleToActivate=ele;break}if("ION-CONTENT"==ele.tagName||ele.classList&&ele.classList.contains("pane")||"BODY"==ele.tagName)break;ele=ele.parentElement}eleToActivate&&(queueElements[keyId]=eleToActivate,ionic.requestAnimationFrame(activateElements),keyId=keyId>29?0:keyId+1)}})},end:function(){setTimeout(clear,200)}}}(document,ionic),function(ionic){var nextId=0;ionic.Utils={arrayMove:function(arr,oldIndex,newIndex){if(newIndex>=arr.length)for(var k=newIndex-arr.length;1+k--;)arr.push(void 0);return arr.splice(newIndex,0,arr.splice(oldIndex,1)[0]),arr},proxy:function(func,context){var args=Array.prototype.slice.call(arguments,2);return function(){return func.apply(context,args.concat(Array.prototype.slice.call(arguments)))}},debounce:function(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this,args=arguments,timestamp=new Date;var later=function(){var last=new Date-timestamp;last<wait?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args)))},callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args)),result}},throttle:function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=!1===options.leading?0:Date.now(),timeout=null,result=func.apply(context,args)};return function(){var now=Date.now();previous||!1!==options.leading||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,remaining<=0?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||!1===options.trailing||(timeout=setTimeout(later,remaining)),result}},inherit:function(protoProps,staticProps){var child,parent=this;child=protoProps&&protoProps.hasOwnProperty("constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},ionic.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&ionic.extend(child.prototype,protoProps),child.__super__=parent.prototype,child},extend:function(obj){for(var args=Array.prototype.slice.call(arguments,1),i=0;i<args.length;i++){var source=args[i];if(source)for(var prop in source)obj[prop]=source[prop]}return obj},nextUid:function(){return"ion"+nextId++},disconnectScope:function(scope){if(scope&&scope.$root!==scope){var parent=scope.$parent;scope.$$disconnected=!0,scope.$broadcast("$ionic.disconnectScope",scope),parent.$$childHead===scope&&(parent.$$childHead=scope.$$nextSibling),parent.$$childTail===scope&&(parent.$$childTail=scope.$$prevSibling),scope.$$prevSibling&&(scope.$$prevSibling.$$nextSibling=scope.$$nextSibling),scope.$$nextSibling&&(scope.$$nextSibling.$$prevSibling=scope.$$prevSibling),scope.$$nextSibling=scope.$$prevSibling=null}},reconnectScope:function(scope){if(scope&&scope.$root!==scope&&scope.$$disconnected){var parent=scope.$parent;scope.$$disconnected=!1,scope.$broadcast("$ionic.reconnectScope",scope),scope.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=scope,parent.$$childTail=scope):parent.$$childHead=parent.$$childTail=scope}},isScopeDisconnected:function(scope){for(var climbScope=scope;climbScope;){if(climbScope.$$disconnected)return!0;climbScope=climbScope.$parent}return!1}},ionic.inherit=ionic.Utils.inherit,ionic.extend=ionic.Utils.extend,ionic.throttle=ionic.Utils.throttle,ionic.proxy=ionic.Utils.proxy,ionic.debounce=ionic.Utils.debounce}(window.ionic);var keyboardActiveElement,lastKeyboardActiveElement,scrollView,waitForResizeTimer,keyboardFocusOutTimer,keyboardCurrentViewportHeight=0,keyboardPortraitViewportHeight=0,keyboardLandscapeViewportHeight=0,wasOrientationChange=!1,KEYBOARD_OPEN_CSS="keyboard-open",SCROLL_CONTAINER_CSS="scroll-content",debouncedKeyboardFocusIn=ionic.debounce(function(e){if(clearTimeout(keyboardFocusOutTimer),!e.target||e.target.readOnly||!ionic.tap.isKeyboardElement(e.target)||!(scrollView=ionic.DomUtil.getParentWithClass(e.target,SCROLL_CONTAINER_CSS)))return keyboardActiveElement&&(lastKeyboardActiveElement=keyboardActiveElement),void(keyboardActiveElement=null);keyboardActiveElement=e.target,scrollView.classList.contains("overflow-scroll")||(document.body.scrollTop=0,scrollView.scrollTop=0,ionic.requestAnimationFrame(function(){document.body.scrollTop=0,scrollView.scrollTop=0}),window.navigator.msPointerEnabled?document.addEventListener("MSPointerMove",keyboardPreventDefault,!1):document.addEventListener("touchmove",keyboardPreventDefault,!1)),ionic.keyboard.isOpen&&!ionic.keyboard.isClosing||(ionic.keyboard.isOpening=!0,ionic.keyboard.isClosing=!1),document.addEventListener("keydown",keyboardOnKeyDown,!1),ionic.keyboard.isOpen||keyboardHasPlugin()?ionic.keyboard.isOpen&&keyboardShow():keyboardWaitForResize(keyboardShow,!0)},200,!0),debouncedKeyboardNativeShow=ionic.debounce(function(e){clearTimeout(keyboardFocusOutTimer),ionic.keyboard.isOpen&&!ionic.keyboard.isClosing||(ionic.keyboard.isOpening=!0,ionic.keyboard.isClosing=!1),ionic.keyboard.height=e.keyboardHeight,wasOrientationChange?keyboardWaitForResize(keyboardUpdateViewportHeight,!0):keyboardWaitForResize(keyboardShow,!0)},100,!0);ionic.keyboard={isOpen:!1,isClosing:!1,isOpening:!1,height:0,isLandscape:!1,isInitialized:!1,hide:function(){keyboardHasPlugin()&&cordova.plugins.Keyboard.close(),keyboardActiveElement&&keyboardActiveElement.blur()},show:function(){keyboardHasPlugin()&&cordova.plugins.Keyboard.show()},disable:function(){keyboardHasPlugin()?(window.removeEventListener("native.keyboardshow",debouncedKeyboardNativeShow),window.removeEventListener("native.keyboardhide",keyboardFocusOut)):document.body.removeEventListener("focusout",keyboardFocusOut),document.body.removeEventListener("ionic.focusin",debouncedKeyboardFocusIn),document.body.removeEventListener("focusin",debouncedKeyboardFocusIn),window.removeEventListener("orientationchange",keyboardOrientationChange),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerDown",keyboardInit):document.removeEventListener("touchstart",keyboardInit),ionic.keyboard.isInitialized=!1},enable:function(){keyboardInit()}},keyboardCurrentViewportHeight=getViewportHeight(),ionic.Platform.ready(function(){keyboardInitViewportHeight(),window.addEventListener("orientationchange",keyboardOrientationChange),setTimeout(keyboardInitViewportHeight,999),window.navigator.msPointerEnabled?document.addEventListener("MSPointerDown",keyboardInit,!1):document.addEventListener("touchstart",keyboardInit,!1)});var viewportTag,viewportProperties={};ionic.viewport={orientation:function(){return window.innerWidth>window.innerHeight?90:0}},ionic.Platform.ready(function(){viewportLoadTag(),window.addEventListener("orientationchange",function(){setTimeout(viewportUpdate,1e3)},!1)}),function(ionic){"use strict";ionic.views.View=function(){this.initialize.apply(this,arguments)},ionic.views.View.inherit=ionic.inherit,ionic.extend(ionic.views.View.prototype,{initialize:function(){}})}(window.ionic);var zyngaCore={effect:{}};!function(global){var time=Date.now||function(){return+new Date},running={},counter=1;zyngaCore.effect.Animate={requestAnimationFrame:function(){var requestFrame=global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozRequestAnimationFrame||global.oRequestAnimationFrame,isNative=!!requestFrame;if(requestFrame&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(requestFrame.toString())&&(isNative=!1),isNative)return function(callback,root){requestFrame(callback,root)};var requests={},requestCount=0,rafHandle=1,intervalHandle=null,lastActive=+new Date;return function(callback){var callbackHandle=rafHandle++;return requests[callbackHandle]=callback,requestCount++,null===intervalHandle&&(intervalHandle=setInterval(function(){var time=+new Date,currentRequests=requests;requests={},requestCount=0;for(var key in currentRequests)currentRequests.hasOwnProperty(key)&&(currentRequests[key](time),lastActive=time);time-lastActive>2500&&(clearInterval(intervalHandle),intervalHandle=null)},1e3/60)),callbackHandle}}(),stop:function(id){var cleared=null!=running[id];return cleared&&(running[id]=null),cleared},isRunning:function(id){return null!=running[id]},start:function(stepCallback,verifyCallback,completedCallback,duration,easingMethod,root){var start=time(),lastFrame=start,percent=0,dropCounter=0,id=counter++;if(root||(root=document.body),id%20==0){var newRunning={};for(var usedId in running)newRunning[usedId]=!0;running=newRunning}var step=function(virtual){var render=!0!==virtual,now=time();if(!running[id]||verifyCallback&&!verifyCallback(id))return running[id]=null,void(completedCallback&&completedCallback(60-dropCounter/((now-start)/1e3),id,!1));if(render)for(var droppedFrames=Math.round((now-lastFrame)/(1e3/60))-1,j=0;j<Math.min(droppedFrames,4);j++)step(!0),dropCounter++;duration&&(percent=(now-start)/duration)>1&&(percent=1);var value=easingMethod?easingMethod(percent):percent;!1!==stepCallback(value,now,render)&&1!==percent||!render?render&&(lastFrame=now,zyngaCore.effect.Animate.requestAnimationFrame(step,root)):(running[id]=null,completedCallback&&completedCallback(60-dropCounter/((now-start)/1e3),id,1===percent||null==duration))};return running[id]=!0,zyngaCore.effect.Animate.requestAnimationFrame(step,root),id}}}(window),function(ionic){var NOOP=function(){},easeOutCubic=function(pos){return Math.pow(pos-1,3)+1},easeInOutCubic=function(pos){return(pos/=.5)<1?.5*Math.pow(pos,3):.5*(Math.pow(pos-2,3)+2)};ionic.views.Scroll=ionic.views.View.inherit({initialize:function(options){var self=this;self.__container=options.el,self.__content=options.el.firstElementChild,setTimeout(function(){self.__container&&self.__content&&(self.__container.scrollTop=0,self.__content.scrollTop=0)}),self.options={scrollingX:!1,scrollbarX:!0,scrollingY:!0,scrollbarY:!0,startX:0,startY:0,wheelDampen:6,minScrollbarSizeX:5,minScrollbarSizeY:5,scrollbarsFade:!0,scrollbarFadeDelay:300,scrollbarResizeFadeDelay:1e3,animating:!0,animationDuration:250,decelVelocityThreshold:4,decelVelocityThresholdPaging:4,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,deceleration:.97,preventDefault:!1,scrollingComplete:NOOP,penetrationDeceleration:.03,penetrationAcceleration:.08,scrollEventInterval:10,freeze:!1,getContentWidth:function(){return Math.max(self.__content.scrollWidth,self.__content.offsetWidth)},getContentHeight:function(){return Math.max(self.__content.scrollHeight,self.__content.offsetHeight+2*self.__content.offsetTop)}};for(var key in options)self.options[key]=options[key];self.hintResize=ionic.debounce(function(){self.resize()},1e3,!0),self.onScroll=function(){ionic.scroll.isScrolling?(clearTimeout(self.scrollTimer),self.scrollTimer=setTimeout(self.setScrollStop,80)):setTimeout(self.setScrollStart,50)},self.freeze=function(shouldFreeze){return arguments.length&&(self.options.freeze=shouldFreeze),self.options.freeze},self.freezeShut=self.freeze,self.setScrollStart=function(){ionic.scroll.isScrolling=Math.abs(ionic.scroll.lastTop-self.__scrollTop)>1,clearTimeout(self.scrollTimer),self.scrollTimer=setTimeout(self.setScrollStop,80)},self.setScrollStop=function(){ionic.scroll.isScrolling=!1,ionic.scroll.lastTop=self.__scrollTop},self.triggerScrollEvent=ionic.throttle(function(){self.onScroll(),ionic.trigger("scroll",{scrollTop:self.__scrollTop,scrollLeft:self.__scrollLeft,target:self.__container})},self.options.scrollEventInterval),self.triggerScrollEndEvent=function(){ionic.trigger("scrollend",{scrollTop:self.__scrollTop,scrollLeft:self.__scrollLeft,target:self.__container})},self.__scrollLeft=self.options.startX,self.__scrollTop=self.options.startY,self.__callback=self.getRenderFn(),self.__initEventHandlers(),self.__createScrollbars()},run:function(){this.resize(),this.__fadeScrollbars("out",this.options.scrollbarResizeFadeDelay)},__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,__transformProperty:null,__perspectiveProperty:null,__indicatorX:null,__indicatorY:null,__scrollbarFadeTimeout:null,__didWaitForSize:null,__sizerTimeout:null,__initEventHandlers:function(){function getEventTouches(e){return e.touches&&e.touches.length?e.touches:[{pageX:e.pageX,pageY:e.pageY}]}var scrollViewOffsetHeight,self=this,container=self.__container;if(self.scrollChildIntoView=function(e){var scrollBottomOffsetToTop=container.getBoundingClientRect().bottom;scrollViewOffsetHeight=container.offsetHeight;var alreadyShrunk=self.isShrunkForKeyboard,isInsetModal=container.parentNode.classList.contains("modal")&&window.innerWidth>=680;if(!alreadyShrunk){if(ionic.Platform.isIOS()||ionic.Platform.isFullScreen||isInsetModal){var scrollBottomOffsetToBottom=e.detail.viewportHeight-scrollBottomOffsetToTop,keyboardOffset=Math.max(0,e.detail.keyboardHeight-scrollBottomOffsetToBottom);ionic.requestAnimationFrame(function(){scrollViewOffsetHeight-=keyboardOffset,container.style.height=scrollViewOffsetHeight+"px",container.style.overflow="visible",self.resize()})}self.isShrunkForKeyboard=!0}e.detail.isElementUnderKeyboard&&ionic.requestAnimationFrame(function(){container.scrollTop=0,self.isShrunkForKeyboard&&!alreadyShrunk&&(scrollBottomOffsetToTop=container.getBoundingClientRect().bottom);var scrollMidpointOffset=.5*scrollViewOffsetHeight,scrollTop=(e.detail.elementBottom+e.detail.elementTop)/2-scrollBottomOffsetToTop+scrollMidpointOffset;scrollTop>0&&(ionic.Platform.isIOS()&&ionic.tap.cloneFocusedInput(container,self),self.scrollBy(0,scrollTop,!0),self.onScroll())}),e.stopPropagation()},self.resetScrollView=function(){self.isShrunkForKeyboard&&(self.isShrunkForKeyboard=!1,container.style.height="",container.style.overflow=""),self.resize()},container.addEventListener("scrollChildIntoView",self.scrollChildIntoView),document.addEventListener("resetScrollView",self.resetScrollView),self.touchStart=function(e){self.startCoordinates=ionic.tap.pointerCoord(e),ionic.tap.ignoreScrollStart(e)||(self.__isDown=!0,ionic.tap.containsOrIsTextInput(e.target)||"SELECT"===e.target.tagName?self.__hasStarted=!1:(self.__isSelectable=!0,self.__enableScrollY=!0,self.__hasStarted=!0,self.doTouchStart(getEventTouches(e),e.timeStamp),e.preventDefault()))},self.touchMove=function(e){if(!(self.options.freeze||!self.__isDown||!self.__isDown&&e.defaultPrevented||"TEXTAREA"===e.target.tagName&&e.target.parentElement.querySelector(":focus"))){if(!self.__hasStarted&&(ionic.tap.containsOrIsTextInput(e.target)||"SELECT"===e.target.tagName))return self.__hasStarted=!0,self.doTouchStart(getEventTouches(e),e.timeStamp),void e.preventDefault();if(self.startCoordinates){var currentCoordinates=ionic.tap.pointerCoord(e);self.__isSelectable&&ionic.tap.isTextInput(e.target)&&Math.abs(self.startCoordinates.x-currentCoordinates.x)>20&&(self.__enableScrollY=!1,self.__isSelectable=!0),self.__enableScrollY&&Math.abs(self.startCoordinates.y-currentCoordinates.y)>10&&(self.__isSelectable=!1,ionic.tap.cloneFocusedInput(container,self))}self.doTouchMove(getEventTouches(e),e.timeStamp,e.scale),self.__isDown=!0}},self.touchMoveBubble=function(e){self.__isDown&&self.options.preventDefault&&e.preventDefault()},self.touchEnd=function(e){self.__isDown&&(self.doTouchEnd(e,e.timeStamp),self.__isDown=!1,self.__hasStarted=!1,self.__isSelectable=!0,self.__enableScrollY=!0,self.__isDragging||self.__isDecelerating||self.__isAnimating||ionic.tap.removeClonedInputs(container,self))},self.mouseWheel=ionic.animationFrameThrottle(function(e){var scrollParent=ionic.DomUtil.getParentOrSelfWithClass(e.target,"ionic-scroll");self.options.freeze||scrollParent!==self.__container||(self.hintResize(),self.scrollBy((e.wheelDeltaX||e.deltaX||0)/self.options.wheelDampen,(-e.wheelDeltaY||e.deltaY||0)/self.options.wheelDampen),self.__fadeScrollbars("in"),clearTimeout(self.__wheelHideBarTimeout),self.__wheelHideBarTimeout=setTimeout(function(){self.__fadeScrollbars("out")},100))}),"ontouchstart"in window)container.addEventListener("touchstart",self.touchStart,!1),self.options.preventDefault&&container.addEventListener("touchmove",self.touchMoveBubble,!1),document.addEventListener("touchmove",self.touchMove,!1),document.addEventListener("touchend",self.touchEnd,!1),document.addEventListener("touchcancel",self.touchEnd,!1),document.addEventListener("wheel",self.mouseWheel,!1);else if(window.navigator.pointerEnabled)container.addEventListener("pointerdown",self.touchStart,!1),self.options.preventDefault&&container.addEventListener("pointermove",self.touchMoveBubble,!1),document.addEventListener("pointermove",self.touchMove,!1),document.addEventListener("pointerup",self.touchEnd,!1),document.addEventListener("pointercancel",self.touchEnd,!1),document.addEventListener("wheel",self.mouseWheel,!1);else if(window.navigator.msPointerEnabled)container.addEventListener("MSPointerDown",self.touchStart,!1),self.options.preventDefault&&container.addEventListener("MSPointerMove",self.touchMoveBubble,!1),document.addEventListener("MSPointerMove",self.touchMove,!1),document.addEventListener("MSPointerUp",self.touchEnd,!1),document.addEventListener("MSPointerCancel",self.touchEnd,!1),document.addEventListener("wheel",self.mouseWheel,!1);else{var mousedown=!1;self.mouseDown=function(e){ionic.tap.ignoreScrollStart(e)||"SELECT"===e.target.tagName||(self.doTouchStart(getEventTouches(e),e.timeStamp),ionic.tap.isTextInput(e.target)||e.preventDefault(),mousedown=!0)},self.mouseMove=function(e){self.options.freeze||!mousedown||!mousedown&&e.defaultPrevented||(self.doTouchMove(getEventTouches(e),e.timeStamp),mousedown=!0)},self.mouseMoveBubble=function(e){mousedown&&self.options.preventDefault&&e.preventDefault()},self.mouseUp=function(e){mousedown&&(self.doTouchEnd(e,e.timeStamp),mousedown=!1)},container.addEventListener("mousedown",self.mouseDown,!1),self.options.preventDefault&&container.addEventListener("mousemove",self.mouseMoveBubble,!1),document.addEventListener("mousemove",self.mouseMove,!1),document.addEventListener("mouseup",self.mouseUp,!1),document.addEventListener("mousewheel",self.mouseWheel,!1),document.addEventListener("wheel",self.mouseWheel,!1)}},__cleanup:function(){var self=this,container=self.__container;container.removeEventListener("touchstart",self.touchStart),container.removeEventListener("touchmove",self.touchMoveBubble),document.removeEventListener("touchmove",self.touchMove),document.removeEventListener("touchend",self.touchEnd),document.removeEventListener("touchcancel",self.touchEnd),container.removeEventListener("pointerdown",self.touchStart),container.removeEventListener("pointermove",self.touchMoveBubble),document.removeEventListener("pointermove",self.touchMove),document.removeEventListener("pointerup",self.touchEnd),document.removeEventListener("pointercancel",self.touchEnd),container.removeEventListener("MSPointerDown",self.touchStart),container.removeEventListener("MSPointerMove",self.touchMoveBubble),document.removeEventListener("MSPointerMove",self.touchMove),document.removeEventListener("MSPointerUp",self.touchEnd),document.removeEventListener("MSPointerCancel",self.touchEnd),container.removeEventListener("mousedown",self.mouseDown),container.removeEventListener("mousemove",self.mouseMoveBubble),document.removeEventListener("mousemove",self.mouseMove),document.removeEventListener("mouseup",self.mouseUp),document.removeEventListener("mousewheel",self.mouseWheel),document.removeEventListener("wheel",self.mouseWheel),container.removeEventListener("scrollChildIntoView",self.scrollChildIntoView),document.removeEventListener("resetScrollView",self.resetScrollView),ionic.tap.removeClonedInputs(container,self),delete self.__container,delete self.__content,delete self.__indicatorX,delete self.__indicatorY,delete self.options.el,self.__callback=self.scrollChildIntoView=self.resetScrollView=NOOP,self.mouseMove=self.mouseDown=self.mouseUp=self.mouseWheel=self.touchStart=self.touchMove=self.touchEnd=self.touchCancel=NOOP,self.resize=self.scrollTo=self.zoomTo=self.__scrollingComplete=NOOP,container=null},__createScrollbar:function(direction){var bar=document.createElement("div"),indicator=document.createElement("div");return indicator.className="scroll-bar-indicator scroll-bar-fade-out",bar.className="h"==direction?"scroll-bar scroll-bar-h":"scroll-bar scroll-bar-v",bar.appendChild(indicator),bar},__createScrollbars:function(){var indicatorX,indicatorY,self=this;self.options.scrollingX&&((indicatorX={el:self.__createScrollbar("h"),sizeRatio:1}).indicator=indicatorX.el.children[0],self.options.scrollbarX&&self.__container.appendChild(indicatorX.el),self.__indicatorX=indicatorX),self.options.scrollingY&&((indicatorY={el:self.__createScrollbar("v"),sizeRatio:1}).indicator=indicatorY.el.children[0],self.options.scrollbarY&&self.__container.appendChild(indicatorY.el),self.__indicatorY=indicatorY)},__resizeScrollbars:function(){var self=this;if(self.__indicatorX){var width=Math.max(Math.round(self.__clientWidth*self.__clientWidth/self.__contentWidth),20);width>self.__contentWidth&&(width=0),width!==self.__indicatorX.size&&ionic.requestAnimationFrame(function(){self.__indicatorX.indicator.style.width=width+"px"}),self.__indicatorX.size=width,self.__indicatorX.minScale=self.options.minScrollbarSizeX/width,self.__indicatorX.maxPos=self.__clientWidth-width,self.__indicatorX.sizeRatio=self.__maxScrollLeft?self.__indicatorX.maxPos/self.__maxScrollLeft:1}if(self.__indicatorY){var height=Math.max(Math.round(self.__clientHeight*self.__clientHeight/self.__contentHeight),20);height>self.__contentHeight&&(height=0),height!==self.__indicatorY.size&&ionic.requestAnimationFrame(function(){self.__indicatorY&&(self.__indicatorY.indicator.style.height=height+"px")}),self.__indicatorY.size=height,self.__indicatorY.minScale=self.options.minScrollbarSizeY/height,self.__indicatorY.maxPos=self.__clientHeight-height,self.__indicatorY.sizeRatio=self.__maxScrollTop?self.__indicatorY.maxPos/self.__maxScrollTop:1}},__repositionScrollbars:function(){var heightScale,widthScale,widthDiff,heightDiff,x,y,self=this,xstop=0,ystop=0;if(self.__indicatorX){self.__indicatorY&&(xstop=10),x=Math.round(self.__indicatorX.sizeRatio*self.__scrollLeft)||0,widthDiff=self.__scrollLeft-(self.__maxScrollLeft-xstop),self.__scrollLeft<0?(widthScale=Math.max(self.__indicatorX.minScale,(self.__indicatorX.size-Math.abs(self.__scrollLeft))/self.__indicatorX.size),x=0,self.__indicatorX.indicator.style[self.__transformOriginProperty]="left center"):widthDiff>0?(widthScale=Math.max(self.__indicatorX.minScale,(self.__indicatorX.size-widthDiff)/self.__indicatorX.size),x=self.__indicatorX.maxPos-xstop,self.__indicatorX.indicator.style[self.__transformOriginProperty]="right center"):(x=Math.min(self.__maxScrollLeft,Math.max(0,x)),widthScale=1);var translate3dX="translate3d("+x+"px, 0, 0) scaleX("+widthScale+")";self.__indicatorX.transformProp!==translate3dX&&(self.__indicatorX.indicator.style[self.__transformProperty]=translate3dX,self.__indicatorX.transformProp=translate3dX)}if(self.__indicatorY){y=Math.round(self.__indicatorY.sizeRatio*self.__scrollTop)||0,self.__indicatorX&&(ystop=10),heightDiff=self.__scrollTop-(self.__maxScrollTop-ystop),self.__scrollTop<0?(heightScale=Math.max(self.__indicatorY.minScale,(self.__indicatorY.size-Math.abs(self.__scrollTop))/self.__indicatorY.size),y=0,"center top"!==self.__indicatorY.originProp&&(self.__indicatorY.indicator.style[self.__transformOriginProperty]="center top",self.__indicatorY.originProp="center top")):heightDiff>0?(heightScale=Math.max(self.__indicatorY.minScale,(self.__indicatorY.size-heightDiff)/self.__indicatorY.size),y=self.__indicatorY.maxPos-ystop,"center bottom"!==self.__indicatorY.originProp&&(self.__indicatorY.indicator.style[self.__transformOriginProperty]="center bottom",self.__indicatorY.originProp="center bottom")):(y=Math.min(self.__maxScrollTop,Math.max(0,y)),heightScale=1);var translate3dY="translate3d(0,"+y+"px, 0) scaleY("+heightScale+")";self.__indicatorY.transformProp!==translate3dY&&(self.__indicatorY.indicator.style[self.__transformProperty]=translate3dY,self.__indicatorY.transformProp=translate3dY)}},__fadeScrollbars:function(direction,delay){var self=this;if(self.options.scrollbarsFade){var className="scroll-bar-fade-out";!0===self.options.scrollbarsFade&&(clearTimeout(self.__scrollbarFadeTimeout),"in"==direction?(self.__indicatorX&&self.__indicatorX.indicator.classList.remove(className),self.__indicatorY&&self.__indicatorY.indicator.classList.remove(className)):self.__scrollbarFadeTimeout=setTimeout(function(){self.__indicatorX&&self.__indicatorX.indicator.classList.add(className),self.__indicatorY&&self.__indicatorY.indicator.classList.add(className)},delay||self.options.scrollbarFadeDelay))}},__scrollingComplete:function(){this.options.scrollingComplete(),ionic.tap.removeClonedInputs(this.__container,this),this.__fadeScrollbars("out")},resize:function(continueScrolling){var self=this;self.__container&&self.options&&self.setDimensions(self.__container.clientWidth,self.__container.clientHeight,self.options.getContentWidth(),self.options.getContentHeight(),continueScrolling)},getRenderFn:function(){var engine,self=this,content=self.__content,docStyle=document.documentElement.style;"MozAppearance"in docStyle?engine="gecko":"WebkitAppearance"in docStyle?engine="webkit":"string"==typeof navigator.cpuClass&&(engine="trident");var vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[engine],helperElem=document.createElement("div"),perspectiveProperty=vendorPrefix+"Perspective",transformProperty=vendorPrefix+"Transform",transformOriginProperty=vendorPrefix+"TransformOrigin";return self.__perspectiveProperty=transformProperty,self.__transformProperty=transformProperty,self.__transformOriginProperty=transformOriginProperty,void 0!==helperElem.style[perspectiveProperty]?function(left,top,zoom,wasResize){var translate3d="translate3d("+-left+"px,"+-top+"px,0) scale("+zoom+")";translate3d!==self.contentTransform&&(content.style[transformProperty]=translate3d,self.contentTransform=translate3d),self.__repositionScrollbars(),wasResize||self.triggerScrollEvent()}:void 0!==helperElem.style[transformProperty]?function(left,top,zoom,wasResize){content.style[transformProperty]="translate("+-left+"px,"+-top+"px) scale("+zoom+")",self.__repositionScrollbars(),wasResize||self.triggerScrollEvent()}:function(left,top,zoom,wasResize){content.style.marginLeft=left?-left/zoom+"px":"",content.style.marginTop=top?-top/zoom+"px":"",content.style.zoom=zoom||"",self.__repositionScrollbars(),wasResize||self.triggerScrollEvent()}},setDimensions:function(clientWidth,clientHeight,contentWidth,contentHeight,continueScrolling){var self=this;(clientWidth||clientHeight||contentWidth||contentHeight)&&(clientWidth===+clientWidth&&(self.__clientWidth=clientWidth),clientHeight===+clientHeight&&(self.__clientHeight=clientHeight),contentWidth===+contentWidth&&(self.__contentWidth=contentWidth),contentHeight===+contentHeight&&(self.__contentHeight=contentHeight),self.__computeScrollMax(),self.__resizeScrollbars(),continueScrolling||self.scrollTo(self.__scrollLeft,self.__scrollTop,!0,null,!0))},setPosition:function(left,top){this.__clientLeft=left||0,this.__clientTop=top||0},setSnapSize:function(width,height){this.__snapWidth=width,this.__snapHeight=height},activatePullToRefresh:function(height,refresherMethods){var self=this;self.__refreshHeight=height,self.__refreshActivate=function(){ionic.requestAnimationFrame(refresherMethods.activate)},self.__refreshDeactivate=function(){ionic.requestAnimationFrame(refresherMethods.deactivate)},self.__refreshStart=function(){ionic.requestAnimationFrame(refresherMethods.start)},self.__refreshShow=function(){ionic.requestAnimationFrame(refresherMethods.show)},self.__refreshHide=function(){ionic.requestAnimationFrame(refresherMethods.hide)},self.__refreshTail=function(){ionic.requestAnimationFrame(refresherMethods.tail)},self.__refreshTailTime=100,self.__minSpinTime=600},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0);var d=new Date;this.refreshStartTime=d.getTime(),this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){var self=this,d=new Date,delay=0;self.refreshStartTime+self.__minSpinTime>d.getTime()&&(delay=self.refreshStartTime+self.__minSpinTime-d.getTime()),setTimeout(function(){self.__refreshTail&&self.__refreshTail(),setTimeout(function(){self.__refreshActive=!1,self.__refreshDeactivate&&self.__refreshDeactivate(),self.__refreshHide&&self.__refreshHide(),self.scrollTo(self.__scrollLeft,self.__scrollTop,!0)},self.__refreshTailTime)},delay)},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,zoom:this.__zoomLevel}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(level,animate,originLeft,originTop){var self=this;if(!self.options.zooming)throw new Error("Zooming is not enabled!");self.__isDecelerating&&(zyngaCore.effect.Animate.stop(self.__isDecelerating),self.__isDecelerating=!1);var oldLevel=self.__zoomLevel;null==originLeft&&(originLeft=self.__clientWidth/2),null==originTop&&(originTop=self.__clientHeight/2),level=Math.max(Math.min(level,self.options.maxZoom),self.options.minZoom),self.__computeScrollMax(level);var left=(originLeft+self.__scrollLeft)*level/oldLevel-originLeft,top=(originTop+self.__scrollTop)*level/oldLevel-originTop;left>self.__maxScrollLeft?left=self.__maxScrollLeft:left<0&&(left=0),top>self.__maxScrollTop?top=self.__maxScrollTop:top<0&&(top=0),self.__publish(left,top,level,animate)},zoomBy:function(factor,animate,originLeft,originTop){this.zoomTo(this.__zoomLevel*factor,animate,originLeft,originTop)},scrollTo:function(left,top,animate,zoom,wasResize){var self=this;if(self.__isDecelerating&&(zyngaCore.effect.Animate.stop(self.__isDecelerating),self.__isDecelerating=!1),null!=zoom&&zoom!==self.__zoomLevel){if(!self.options.zooming)throw new Error("Zooming is not enabled!");left*=zoom,top*=zoom,self.__computeScrollMax(zoom)}else zoom=self.__zoomLevel;self.options.scrollingX?self.options.paging?left=Math.round(left/self.__clientWidth)*self.__clientWidth:self.options.snapping&&(left=Math.round(left/self.__snapWidth)*self.__snapWidth):left=self.__scrollLeft,self.options.scrollingY?self.options.paging?top=Math.round(top/self.__clientHeight)*self.__clientHeight:self.options.snapping&&(top=Math.round(top/self.__snapHeight)*self.__snapHeight):top=self.__scrollTop,left=Math.max(Math.min(self.__maxScrollLeft,left),0),top=Math.max(Math.min(self.__maxScrollTop,top),0),left===self.__scrollLeft&&top===self.__scrollTop&&(animate=!1),self.__publish(left,top,zoom,animate,wasResize)},scrollBy:function(left,top,animate){var self=this,startLeft=self.__isAnimating?self.__scheduledLeft:self.__scrollLeft,startTop=self.__isAnimating?self.__scheduledTop:self.__scrollTop;self.scrollTo(startLeft+(left||0),startTop+(top||0),animate)},doMouseZoom:function(wheelDelta,timeStamp,pageX,pageY){var change=wheelDelta>0?.97:1.03;return this.zoomTo(this.__zoomLevel*change,!1,pageX-this.__clientLeft,pageY-this.__clientTop)},doTouchStart:function(touches,timeStamp){var self=this;self.__decStopped=!(!self.__isDecelerating&&!self.__isAnimating),self.hintResize(),timeStamp instanceof Date&&(timeStamp=timeStamp.valueOf()),"number"!=typeof timeStamp&&(timeStamp=Date.now()),self.__interruptedAnimation=!0,self.__isDecelerating&&(zyngaCore.effect.Animate.stop(self.__isDecelerating),self.__isDecelerating=!1,self.__interruptedAnimation=!0),self.__isAnimating&&(zyngaCore.effect.Animate.stop(self.__isAnimating),self.__isAnimating=!1,self.__interruptedAnimation=!0);var currentTouchLeft,currentTouchTop,isSingleTouch=1===touches.length;isSingleTouch?(currentTouchLeft=touches[0].pageX,currentTouchTop=touches[0].pageY):(currentTouchLeft=Math.abs(touches[0].pageX+touches[1].pageX)/2,currentTouchTop=Math.abs(touches[0].pageY+touches[1].pageY)/2),self.__initialTouchLeft=currentTouchLeft,self.__initialTouchTop=currentTouchTop,self.__initialTouches=touches,self.__zoomLevelStart=self.__zoomLevel,self.__lastTouchLeft=currentTouchLeft,self.__lastTouchTop=currentTouchTop,self.__lastTouchMove=timeStamp,self.__lastScale=1,self.__enableScrollX=!isSingleTouch&&self.options.scrollingX,self.__enableScrollY=!isSingleTouch&&self.options.scrollingY,self.__isTracking=!0,self.__didDecelerationComplete=!1,self.__isDragging=!isSingleTouch,self.__isSingleTouch=isSingleTouch,self.__positions=[]},doTouchMove:function(touches,timeStamp,scale){timeStamp instanceof Date&&(timeStamp=timeStamp.valueOf()),"number"!=typeof timeStamp&&(timeStamp=Date.now());var self=this;if(self.__isTracking){var currentTouchLeft,currentTouchTop;2===touches.length?(currentTouchLeft=Math.abs(touches[0].pageX+touches[1].pageX)/2,currentTouchTop=Math.abs(touches[0].pageY+touches[1].pageY)/2,!scale&&self.options.zooming&&(scale=self.__getScale(self.__initialTouches,touches))):(currentTouchLeft=touches[0].pageX,currentTouchTop=touches[0].pageY);var positions=self.__positions;if(self.__isDragging){self.__decStopped=!1;var moveX=currentTouchLeft-self.__lastTouchLeft,moveY=currentTouchTop-self.__lastTouchTop,scrollLeft=self.__scrollLeft,scrollTop=self.__scrollTop,level=self.__zoomLevel;if(null!=scale&&self.options.zooming){var oldLevel=level;if(level=level/self.__lastScale*scale,level=Math.max(Math.min(level,self.options.maxZoom),self.options.minZoom),oldLevel!==level){var currentTouchLeftRel=currentTouchLeft-self.__clientLeft,currentTouchTopRel=currentTouchTop-self.__clientTop;scrollLeft=(currentTouchLeftRel+scrollLeft)*level/oldLevel-currentTouchLeftRel,scrollTop=(currentTouchTopRel+scrollTop)*level/oldLevel-currentTouchTopRel,self.__computeScrollMax(level)}}if(self.__enableScrollX){scrollLeft-=moveX*self.options.speedMultiplier;var maxScrollLeft=self.__maxScrollLeft;(scrollLeft>maxScrollLeft||scrollLeft<0)&&(self.options.bouncing?scrollLeft+=moveX/2*self.options.speedMultiplier:scrollLeft=scrollLeft>maxScrollLeft?maxScrollLeft:0)}if(self.__enableScrollY){scrollTop-=moveY*self.options.speedMultiplier;var maxScrollTop=self.__maxScrollTop;scrollTop>maxScrollTop||scrollTop<0?self.options.bouncing||self.__refreshHeight&&scrollTop<0?(scrollTop+=moveY/2*self.options.speedMultiplier,self.__enableScrollX||null==self.__refreshHeight||(scrollTop<0?(self.__refreshHidden=!1,self.__refreshShow()):(self.__refreshHide(),self.__refreshHidden=!0),!self.__refreshActive&&scrollTop<=-self.__refreshHeight?(self.__refreshActive=!0,self.__refreshActivate&&self.__refreshActivate()):self.__refreshActive&&scrollTop>-self.__refreshHeight&&(self.__refreshActive=!1,self.__refreshDeactivate&&self.__refreshDeactivate()))):scrollTop=scrollTop>maxScrollTop?maxScrollTop:0:self.__refreshHeight&&!self.__refreshHidden&&(self.__refreshHide(),self.__refreshHidden=!0)}positions.length>60&&positions.splice(0,30),positions.push(scrollLeft,scrollTop,timeStamp),self.__publish(scrollLeft,scrollTop,level)}else{var minimumTrackingForScroll=self.options.locking?3:0,distanceX=Math.abs(currentTouchLeft-self.__initialTouchLeft),distanceY=Math.abs(currentTouchTop-self.__initialTouchTop);self.__enableScrollX=self.options.scrollingX&&distanceX>=minimumTrackingForScroll,self.__enableScrollY=self.options.scrollingY&&distanceY>=minimumTrackingForScroll,positions.push(self.__scrollLeft,self.__scrollTop,timeStamp),self.__isDragging=(self.__enableScrollX||self.__enableScrollY)&&(distanceX>=5||distanceY>=5),self.__isDragging&&(self.__interruptedAnimation=!1,self.__fadeScrollbars("in"))}self.__lastTouchLeft=currentTouchLeft,self.__lastTouchTop=currentTouchTop,self.__lastTouchMove=timeStamp,self.__lastScale=scale}},doTouchEnd:function(e,timeStamp){timeStamp instanceof Date&&(timeStamp=timeStamp.valueOf()),"number"!=typeof timeStamp&&(timeStamp=Date.now());var self=this;if(self.__isTracking){if(self.__isTracking=!1,self.__isDragging)if(self.__isDragging=!1,self.__isSingleTouch&&self.options.animating&&timeStamp-self.__lastTouchMove<=100){for(var positions=self.__positions,endPos=positions.length-1,startPos=endPos,i=endPos;i>0&&positions[i]>self.__lastTouchMove-100;i-=3)startPos=i;if(startPos!==endPos){var timeOffset=positions[endPos]-positions[startPos],movedLeft=self.__scrollLeft-positions[startPos-2],movedTop=self.__scrollTop-positions[startPos-1];self.__decelerationVelocityX=movedLeft/timeOffset*(1e3/60),self.__decelerationVelocityY=movedTop/timeOffset*(1e3/60);var minVelocityToStartDeceleration=self.options.paging||self.options.snapping?self.options.decelVelocityThresholdPaging:self.options.decelVelocityThreshold;(Math.abs(self.__decelerationVelocityX)>minVelocityToStartDeceleration||Math.abs(self.__decelerationVelocityY)>minVelocityToStartDeceleration)&&(self.__refreshActive||self.__startDeceleration(timeStamp))}else self.__scrollingComplete()}else timeStamp-self.__lastTouchMove>100&&self.__scrollingComplete();else self.__decStopped&&(e.isTapHandled=!0,self.__decStopped=!1);if(!self.__isDecelerating)if(self.__refreshActive&&self.__refreshStart){self.__publish(self.__scrollLeft,-self.__refreshHeight,self.__zoomLevel,!0);var d=new Date;self.refreshStartTime=d.getTime(),self.__refreshStart&&self.__refreshStart(),ionic.Platform.isAndroid()||self.__startDeceleration()}else(self.__interruptedAnimation||self.__isDragging)&&self.__scrollingComplete(),self.scrollTo(self.__scrollLeft,self.__scrollTop,!0,self.__zoomLevel),self.__refreshActive&&(self.__refreshActive=!1,self.__refreshDeactivate&&self.__refreshDeactivate());self.__positions.length=0}},__publish:function(left,top,zoom,animate,wasResize){var self=this,wasAnimating=self.__isAnimating;if(wasAnimating&&(zyngaCore.effect.Animate.stop(wasAnimating),self.__isAnimating=!1),animate&&self.options.animating){self.__scheduledLeft=left,self.__scheduledTop=top,self.__scheduledZoom=zoom;var oldLeft=self.__scrollLeft,oldTop=self.__scrollTop,oldZoom=self.__zoomLevel,diffLeft=left-oldLeft,diffTop=top-oldTop,diffZoom=zoom-oldZoom;self.__isAnimating=zyngaCore.effect.Animate.start(function(percent,now,render){render&&(self.__scrollLeft=oldLeft+diffLeft*percent,self.__scrollTop=oldTop+diffTop*percent,self.__zoomLevel=oldZoom+diffZoom*percent,self.__callback&&self.__callback(self.__scrollLeft,self.__scrollTop,self.__zoomLevel,wasResize))},function(id){return self.__isAnimating===id},function(renderedFramesPerSecond,animationId,wasFinished){animationId===self.__isAnimating&&(self.__isAnimating=!1),(self.__didDecelerationComplete||wasFinished)&&self.__scrollingComplete(),self.options.zooming&&self.__computeScrollMax()},self.options.animationDuration,wasAnimating?easeOutCubic:easeInOutCubic)}else self.__scheduledLeft=self.__scrollLeft=left,self.__scheduledTop=self.__scrollTop=top,self.__scheduledZoom=self.__zoomLevel=zoom,self.__callback&&self.__callback(left,top,zoom,wasResize),self.options.zooming&&self.__computeScrollMax()},__computeScrollMax:function(zoomLevel){var self=this;null==zoomLevel&&(zoomLevel=self.__zoomLevel),self.__maxScrollLeft=Math.max(self.__contentWidth*zoomLevel-self.__clientWidth,0),self.__maxScrollTop=Math.max(self.__contentHeight*zoomLevel-self.__clientHeight,0),self.__didWaitForSize||self.__maxScrollLeft||self.__maxScrollTop||(self.__didWaitForSize=!0,self.__waitForSize())},__waitForSize:function(){var self=this;clearTimeout(self.__sizerTimeout);var sizer=function(){self.resize(!0)};sizer(),self.__sizerTimeout=setTimeout(sizer,500)},__startDeceleration:function(){var self=this;if(self.options.paging){var scrollLeft=Math.max(Math.min(self.__scrollLeft,self.__maxScrollLeft),0),scrollTop=Math.max(Math.min(self.__scrollTop,self.__maxScrollTop),0),clientWidth=self.__clientWidth,clientHeight=self.__clientHeight;self.__minDecelerationScrollLeft=Math.floor(scrollLeft/clientWidth)*clientWidth,self.__minDecelerationScrollTop=Math.floor(scrollTop/clientHeight)*clientHeight,self.__maxDecelerationScrollLeft=Math.ceil(scrollLeft/clientWidth)*clientWidth,self.__maxDecelerationScrollTop=Math.ceil(scrollTop/clientHeight)*clientHeight}else self.__minDecelerationScrollLeft=0,self.__minDecelerationScrollTop=0,self.__maxDecelerationScrollLeft=self.__maxScrollLeft,self.__maxDecelerationScrollTop=self.__maxScrollTop,self.__refreshActive&&(self.__minDecelerationScrollTop=-1*self.__refreshHeight);self.__minVelocityToKeepDecelerating=self.options.snapping?4:.1;self.__isDecelerating=zyngaCore.effect.Animate.start(function(percent,now,render){self.__stepThroughDeceleration(render)},function(){var shouldContinue=Math.abs(self.__decelerationVelocityX)>=self.__minVelocityToKeepDecelerating||Math.abs(self.__decelerationVelocityY)>=self.__minVelocityToKeepDecelerating;return shouldContinue||(self.__didDecelerationComplete=!0,self.options.bouncing&&!self.__refreshActive&&self.scrollTo(Math.min(Math.max(self.__scrollLeft,0),self.__maxScrollLeft),Math.min(Math.max(self.__scrollTop,0),self.__maxScrollTop),self.__refreshActive)),shouldContinue},function(){self.__isDecelerating=!1,self.__didDecelerationComplete&&self.__scrollingComplete(),self.options.paging&&self.scrollTo(self.__scrollLeft,self.__scrollTop,self.options.snapping)})},__stepThroughDeceleration:function(render){var self=this,scrollLeft=self.__scrollLeft+self.__decelerationVelocityX,scrollTop=self.__scrollTop+self.__decelerationVelocityY;if(!self.options.bouncing){var scrollLeftFixed=Math.max(Math.min(self.__maxDecelerationScrollLeft,scrollLeft),self.__minDecelerationScrollLeft);scrollLeftFixed!==scrollLeft&&(scrollLeft=scrollLeftFixed,self.__decelerationVelocityX=0);var scrollTopFixed=Math.max(Math.min(self.__maxDecelerationScrollTop,scrollTop),self.__minDecelerationScrollTop);scrollTopFixed!==scrollTop&&(scrollTop=scrollTopFixed,self.__decelerationVelocityY=0)}if(render?self.__publish(scrollLeft,scrollTop,self.__zoomLevel):(self.__scrollLeft=scrollLeft,self.__scrollTop=scrollTop),!self.options.paging){var frictionFactor=self.options.deceleration;self.__decelerationVelocityX*=frictionFactor,self.__decelerationVelocityY*=frictionFactor}if(self.options.bouncing){var scrollOutsideX=0,scrollOutsideY=0,penetrationDeceleration=self.options.penetrationDeceleration,penetrationAcceleration=self.options.penetrationAcceleration;if(scrollLeft<self.__minDecelerationScrollLeft?scrollOutsideX=self.__minDecelerationScrollLeft-scrollLeft:scrollLeft>self.__maxDecelerationScrollLeft&&(scrollOutsideX=self.__maxDecelerationScrollLeft-scrollLeft),scrollTop<self.__minDecelerationScrollTop?scrollOutsideY=self.__minDecelerationScrollTop-scrollTop:scrollTop>self.__maxDecelerationScrollTop&&(scrollOutsideY=self.__maxDecelerationScrollTop-scrollTop),0!==scrollOutsideX){var isHeadingOutwardsX=scrollOutsideX*self.__decelerationVelocityX<=self.__minDecelerationScrollLeft;isHeadingOutwardsX&&(self.__decelerationVelocityX+=scrollOutsideX*penetrationDeceleration);var isStoppedX=Math.abs(self.__decelerationVelocityX)<=self.__minVelocityToKeepDecelerating;isHeadingOutwardsX&&!isStoppedX||(self.__decelerationVelocityX=scrollOutsideX*penetrationAcceleration)}if(0!==scrollOutsideY){var isHeadingOutwardsY=scrollOutsideY*self.__decelerationVelocityY<=self.__minDecelerationScrollTop;isHeadingOutwardsY&&(self.__decelerationVelocityY+=scrollOutsideY*penetrationDeceleration);var isStoppedY=Math.abs(self.__decelerationVelocityY)<=self.__minVelocityToKeepDecelerating;isHeadingOutwardsY&&!isStoppedY||(self.__decelerationVelocityY=scrollOutsideY*penetrationAcceleration)}}},__getDistance:function(touch1,touch2){var x=touch2.pageX-touch1.pageX,y=touch2.pageY-touch1.pageY;return Math.sqrt(x*x+y*y)},__getScale:function(start,end){return start.length>=2&&end.length>=2?this.__getDistance(end[0],end[1])/this.__getDistance(start[0],start[1]):1}}),ionic.scroll={isScrolling:!1,lastTop:0}}(ionic),function(ionic){var NOOP=function(){},deprecated=function(name){};ionic.views.ScrollNative=ionic.views.View.inherit({initialize:function(options){var self=this;self.__container=self.el=options.el,self.__content=options.el.firstElementChild,self.__frozen=!1,self.isNative=!0,self.__scrollTop=self.el.scrollTop,self.__scrollLeft=self.el.scrollLeft,self.__clientHeight=self.__content.clientHeight,self.__clientWidth=self.__content.clientWidth,self.__maxScrollTop=Math.max(self.__contentHeight-self.__clientHeight,0),self.__maxScrollLeft=Math.max(self.__contentWidth-self.__clientWidth,0),(options.startY>=0||options.startX>=0)&&ionic.requestAnimationFrame(function(){self.el.scrollTop=options.startY||0,self.el.scrollLeft=options.startX||0,self.__scrollTop=self.el.scrollTop,self.__scrollLeft=self.el.scrollLeft}),self.options={freeze:!1,getContentWidth:function(){return Math.max(self.__content.scrollWidth,self.__content.offsetWidth)},getContentHeight:function(){return Math.max(self.__content.scrollHeight,self.__content.offsetHeight+2*self.__content.offsetTop)}};for(var key in options)self.options[key]=options[key];self.onScroll=function(){ionic.scroll.isScrolling||(ionic.scroll.isScrolling=!0),clearTimeout(self.scrollTimer),self.scrollTimer=setTimeout(function(){ionic.scroll.isScrolling=!1},80)},self.freeze=function(shouldFreeze){self.__frozen=shouldFreeze},self.freezeShut=function(shouldFreezeShut){self.__frozenShut=shouldFreezeShut},self.__initEventHandlers()},__callback:function(){deprecated()},zoomTo:function(){deprecated()},zoomBy:function(){deprecated()},activatePullToRefresh:function(){deprecated()},resize:function(continueScrolling){var self=this;self.__container&&self.options&&self.setDimensions(self.__container.clientWidth,self.__container.clientHeight,self.options.getContentWidth(),self.options.getContentHeight(),continueScrolling)},run:function(){this.resize()},getValues:function(){var self=this;return self.update(),{left:self.__scrollLeft,top:self.__scrollTop,zoom:1}},update:function(){var self=this;self.__scrollLeft=self.el.scrollLeft,self.__scrollTop=self.el.scrollTop},setDimensions:function(clientWidth,clientHeight,contentWidth,contentHeight){var self=this;(clientWidth||clientHeight||contentWidth||contentHeight)&&(clientWidth===+clientWidth&&(self.__clientWidth=clientWidth),clientHeight===+clientHeight&&(self.__clientHeight=clientHeight),contentWidth===+contentWidth&&(self.__contentWidth=contentWidth),contentHeight===+contentHeight&&(self.__contentHeight=contentHeight),self.__computeScrollMax())},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},scrollBy:function(left,top,animate){var self=this;self.update();var startLeft=self.__isAnimating?self.__scheduledLeft:self.__scrollLeft,startTop=self.__isAnimating?self.__scheduledTop:self.__scrollTop;self.scrollTo(startLeft+(left||0),startTop+(top||0),animate)},scrollTo:function(left,top,animate){var self=this;if(!animate)return self.el.scrollTop=top,self.el.scrollLeft=left,void self.resize();var oldOverflowX=self.el.style.overflowX,oldOverflowY=self.el.style.overflowY;clearTimeout(self.__scrollToCleanupTimeout),self.__scrollToCleanupTimeout=setTimeout(function(){self.el.style.overflowX=oldOverflowX,self.el.style.overflowY=oldOverflowY},500),self.el.style.overflowY="hidden",self.el.style.overflowX="hidden",function(Y,X){function easeOutCubic(t){return--t*t*t+1}function animateScrollStep(){var currentTime=Date.now(),time=Math.min(1,(currentTime-start)/duration),easedT=easeOutCubic(time);fromY!=Y&&(self.el.scrollTop=parseInt(easedT*(Y-fromY)+fromY,10)),fromX!=X&&(self.el.scrollLeft=parseInt(easedT*(X-fromX)+fromX,10)),time<1?ionic.requestAnimationFrame(animateScrollStep):(ionic.tap.removeClonedInputs(self.__container,self),self.el.style.overflowX=oldOverflowX,self.el.style.overflowY=oldOverflowY,self.resize())}var start=Date.now(),duration=250,fromY=self.el.scrollTop,fromX=self.el.scrollLeft;if(fromY===Y&&fromX===X)return self.el.style.overflowX=oldOverflowX,self.el.style.overflowY=oldOverflowY,void self.resize();ionic.requestAnimationFrame(animateScrollStep)}(top,left)},__waitForSize:function(){var self=this;clearTimeout(self.__sizerTimeout);var sizer=function(){self.resize(!0)};sizer(),self.__sizerTimeout=setTimeout(sizer,500)},__computeScrollMax:function(){var self=this;self.__maxScrollLeft=Math.max(self.__contentWidth-self.__clientWidth,0),self.__maxScrollTop=Math.max(self.__contentHeight-self.__clientHeight,0),self.__didWaitForSize||self.__maxScrollLeft||self.__maxScrollTop||(self.__didWaitForSize=!0,self.__waitForSize())},__initEventHandlers:function(){var scrollViewOffsetHeight,lastKeyboardHeight,self=this,container=self.__container;self.scrollChildIntoView=function(e){var rect=container.getBoundingClientRect();self.__originalContainerHeight||(self.__originalContainerHeight=rect.height),scrollViewOffsetHeight=self.__originalContainerHeight;var alreadyShrunk=self.isShrunkForKeyboard,isModal=container.parentNode.classList.contains("modal"),isPopover=container.parentNode.classList.contains("popover"),isInsetModal=isModal&&window.innerWidth>=680,changedKeyboardHeight=lastKeyboardHeight&&lastKeyboardHeight!==e.detail.keyboardHeight;alreadyShrunk&&!changedKeyboardHeight||(!isPopover&&(ionic.Platform.isIOS()||ionic.Platform.isFullScreen||isInsetModal)&&ionic.requestAnimationFrame(function(){scrollViewOffsetHeight=Math.max(0,Math.min(self.__originalContainerHeight,self.__originalContainerHeight-(e.detail.keyboardHeight-43))),container.style.height=scrollViewOffsetHeight+"px",container.classList.add("keyboard-up"),self.resize()}),self.isShrunkForKeyboard=!0),lastKeyboardHeight=e.detail.keyboardHeight,e.detail.isElementUnderKeyboard&&ionic.requestAnimationFrame(function(){var pos=ionic.DomUtil.getOffsetTop(e.detail.target);setTimeout(function(){ionic.Platform.isIOS()&&ionic.tap.cloneFocusedInput(container,self),self.scrollTo(0,pos-(rect.top+100),!0),self.onScroll()},32)}),e.stopPropagation()},self.resetScrollView=function(){self.isShrunkForKeyboard&&(self.isShrunkForKeyboard=!1,container.style.height="",self.__originalContainerHeight=container.getBoundingClientRect().height,ionic.Platform.isIOS()&&ionic.requestAnimationFrame(function(){container.classList.remove("keyboard-up")})),self.resize()},self.handleTouchMove=function(e){return self.__frozenShut?(e.preventDefault(),e.stopPropagation(),!1):!self.__frozen||(e.preventDefault(),!1)},container.addEventListener("scroll",self.onScroll),container.addEventListener("scrollChildIntoView",self.scrollChildIntoView),container.addEventListener(ionic.EVENTS.touchstart,self.handleTouchMove),container.addEventListener(ionic.EVENTS.touchmove,self.handleTouchMove),document.addEventListener("resetScrollView",self.resetScrollView)},__cleanup:function(){var self=this,container=self.__container;container.removeEventListener("resetScrollView",self.resetScrollView),container.removeEventListener("scroll",self.onScroll),container.removeEventListener("scrollChildIntoView",self.scrollChildIntoView),container.removeEventListener("resetScrollView",self.resetScrollView),container.removeEventListener(ionic.EVENTS.touchstart,self.handleTouchMove),container.removeEventListener(ionic.EVENTS.touchmove,self.handleTouchMove),ionic.tap.removeClonedInputs(container,self),delete self.__container,delete self.__content,delete self.__indicatorX,delete self.__indicatorY,delete self.options.el,self.resize=self.scrollTo=self.onScroll=self.resetScrollView=NOOP,self.scrollChildIntoView=NOOP,container=null}})}(ionic),function(ionic){"use strict";var DragOp=function(){};DragOp.prototype={start:function(){},drag:function(){},end:function(){},isSameItem:function(){return!1}};var SlideDrag=function(opts){this.dragThresholdX=opts.dragThresholdX||10,this.el=opts.el,this.item=opts.item,this.canSwipe=opts.canSwipe};(SlideDrag.prototype=new DragOp).start=function(e){var content,buttons,offsetX,buttonsWidth;this.canSwipe()&&(content=e.target.classList.contains("item-content")?e.target:e.target.classList.contains("item")?e.target.querySelector(".item-content"):ionic.DomUtil.getParentWithClass(e.target,"item-content"))&&(content.classList.remove("item-sliding"),offsetX=parseFloat(content.style[ionic.CSS.TRANSFORM].replace("translate3d(","").split(",")[0])||0,(buttons=content.parentNode.querySelector(".item-options"))&&(buttons.classList.remove("invisible"),buttonsWidth=buttons.offsetWidth,this._currentDrag={buttons:buttons,buttonsWidth:buttonsWidth,content:content,startOffsetX:offsetX}))},SlideDrag.prototype.isSameItem=function(op){return!(!op._lastDrag||!this._currentDrag)&&this._currentDrag.content==op._lastDrag.content},SlideDrag.prototype.clean=function(isInstant){function makeInvisible(){lastDrag.buttons&&lastDrag.buttons.classList.add("invisible")}var lastDrag=this._lastDrag;lastDrag&&lastDrag.content&&(lastDrag.content.style[ionic.CSS.TRANSITION]="",lastDrag.content.style[ionic.CSS.TRANSFORM]="",isInstant?(lastDrag.content.style[ionic.CSS.TRANSITION]="none",makeInvisible(),ionic.requestAnimationFrame(function(){lastDrag.content.style[ionic.CSS.TRANSITION]=""})):ionic.requestAnimationFrame(function(){setTimeout(makeInvisible,250)}))},SlideDrag.prototype.drag=ionic.animationFrameThrottle(function(e){var buttonsWidth;if(this._currentDrag&&(!this._isDragging&&(Math.abs(e.gesture.deltaX)>this.dragThresholdX||Math.abs(this._currentDrag.startOffsetX)>0)&&(this._isDragging=!0),this._isDragging)){buttonsWidth=this._currentDrag.buttonsWidth;var newX=Math.min(0,this._currentDrag.startOffsetX+e.gesture.deltaX);newX<-buttonsWidth&&(newX=Math.min(-buttonsWidth,-buttonsWidth+.4*(e.gesture.deltaX+buttonsWidth))),this._currentDrag.content.$$ionicOptionsOpen=0!==newX,this._currentDrag.content.style[ionic.CSS.TRANSFORM]="translate3d("+newX+"px, 0, 0)",this._currentDrag.content.style[ionic.CSS.TRANSITION]="none"}}),SlideDrag.prototype.end=function(e,doneCallback){var self=this;if(self._currentDrag){var restingPoint=-self._currentDrag.buttonsWidth;e.gesture.deltaX>-self._currentDrag.buttonsWidth/2&&("left"==e.gesture.direction&&Math.abs(e.gesture.velocityX)<.3?restingPoint=0:"right"==e.gesture.direction&&(restingPoint=0)),ionic.requestAnimationFrame(function(){if(0===restingPoint){self._currentDrag.content.style[ionic.CSS.TRANSFORM]="";var buttons=self._currentDrag.buttons;setTimeout(function(){buttons&&buttons.classList.add("invisible")},250)}else self._currentDrag.content.style[ionic.CSS.TRANSFORM]="translate3d("+restingPoint+"px,0,0)";self._currentDrag.content.style[ionic.CSS.TRANSITION]="",self._lastDrag||(self._lastDrag={}),ionic.extend(self._lastDrag,self._currentDrag),self._currentDrag&&(self._currentDrag.buttons=null,self._currentDrag.content=null),self._currentDrag=null,doneCallback&&doneCallback()})}else doneCallback&&doneCallback()};var ReorderDrag=function(opts){var self=this;if(self.dragThresholdY=opts.dragThresholdY||0,self.onReorder=opts.onReorder,self.listEl=opts.listEl,self.el=self.item=opts.el,self.scrollEl=opts.scrollEl,self.scrollView=opts.scrollView,self.listElTrueTop=0,self.listEl.offsetParent){var obj=self.listEl;do{self.listElTrueTop+=obj.offsetTop,obj=obj.offsetParent}while(obj)}};(ReorderDrag.prototype=new DragOp)._moveElement=function(e){var y=e.gesture.center.pageY+this.scrollView.getValues().top-this._currentDrag.elementHeight/2-this.listElTrueTop;this.el.style[ionic.CSS.TRANSFORM]="translate3d(0, "+y+"px, 0)"},ReorderDrag.prototype.deregister=function(){this.listEl=this.el=this.scrollEl=this.scrollView=null},ReorderDrag.prototype.start=function(e){var startIndex=ionic.DomUtil.getChildIndex(this.el,this.el.nodeName.toLowerCase()),elementHeight=this.el.scrollHeight,placeholder=this.el.cloneNode(!0);placeholder.classList.add("item-placeholder"),this.el.parentNode.insertBefore(placeholder,this.el),this.el.classList.add("item-reordering"),this._currentDrag={elementHeight:elementHeight,startIndex:startIndex,placeholder:placeholder,scrollHeight:scroll,list:placeholder.parentNode},this._moveElement(e)},ReorderDrag.prototype.drag=ionic.animationFrameThrottle(function(e){var self=this;if(this._currentDrag){var scrollY=0,pageY=e.gesture.center.pageY,offset=this.listElTrueTop;if(this.scrollView){var container=this.scrollView.__container;scrollY=this.scrollView.getValues().top;var containerTop=container.offsetTop,pixelsPastTop=containerTop-pageY+this._currentDrag.elementHeight/2,pixelsPastBottom=pageY+this._currentDrag.elementHeight/2-containerTop-container.offsetHeight;e.gesture.deltaY<0&&pixelsPastTop>0&&scrollY>0&&(this.scrollView.scrollBy(null,-pixelsPastTop),ionic.requestAnimationFrame(function(){self.drag(e)})),e.gesture.deltaY>0&&pixelsPastBottom>0&&scrollY<this.scrollView.getScrollMax().top&&(this.scrollView.scrollBy(null,pixelsPastBottom),ionic.requestAnimationFrame(function(){self.drag(e)}))}!this._isDragging&&Math.abs(e.gesture.deltaY)>this.dragThresholdY&&(this._isDragging=!0),this._isDragging&&(this._moveElement(e),this._currentDrag.currentY=scrollY+pageY-offset)}}),ReorderDrag.prototype._getReorderIndex=function(){for(var el,self=this,siblings=Array.prototype.slice.call(self._currentDrag.placeholder.parentNode.children).filter(function(el){return el.nodeName===self.el.nodeName&&el!==self.el}),dragOffsetTop=self._currentDrag.currentY,i=0,len=siblings.length;i<len;i++)if(el=siblings[i],i===len-1){if(dragOffsetTop>el.offsetTop)return i}else if(0===i){if(dragOffsetTop<el.offsetTop+el.offsetHeight)return i}else if(dragOffsetTop>el.offsetTop-el.offsetHeight/2&&dragOffsetTop<el.offsetTop+el.offsetHeight)return i;return self._currentDrag.startIndex},ReorderDrag.prototype.end=function(e,doneCallback){if(this._currentDrag){var placeholder=this._currentDrag.placeholder,finalIndex=this._getReorderIndex();this.el.classList.remove("item-reordering"),this.el.style[ionic.CSS.TRANSFORM]="",placeholder.parentNode.insertBefore(this.el,placeholder),placeholder.parentNode.removeChild(placeholder),this.onReorder&&this.onReorder(this.el,this._currentDrag.startIndex,finalIndex),this._currentDrag={placeholder:null,content:null},this._currentDrag=null,doneCallback&&doneCallback()}else doneCallback&&doneCallback()},ionic.views.ListView=ionic.views.View.inherit({initialize:function(opts){var self=this;opts=ionic.extend({onReorder:function(){},virtualRemoveThreshold:-200,virtualAddThreshold:200,canSwipe:function(){return!0}},opts),ionic.extend(self,opts),!self.itemHeight&&self.listEl&&(self.itemHeight=self.listEl.children[0]&&parseInt(self.listEl.children[0].style.height,10)),self.onRefresh=opts.onRefresh||function(){},self.onRefreshOpening=opts.onRefreshOpening||function(){},self.onRefreshHolding=opts.onRefreshHolding||function(){};var gestureOpts={};ionic.DomUtil.getParentOrSelfWithClass(self.el,"overflow-scroll")&&(gestureOpts.prevent_default_directions=["left","right"]),window.ionic.onGesture("release",function(e){self._handleEndDrag(e)},self.el,gestureOpts),window.ionic.onGesture("drag",function(e){self._handleDrag(e)},self.el,gestureOpts),self._initDrag()},deregister:function(){this.el=this.listEl=this.scrollEl=this.scrollView=null,this.isScrollFreeze&&self.scrollView.freeze(!1)},stopRefreshing:function(){this.el.querySelector(".list-refresher").style.height="0"},didScroll:function(e){var self=this;if(self.isVirtual){var itemHeight=self.itemHeight,scrollHeight=e.target.scrollHeight,viewportHeight=self.el.parentNode.offsetHeight,highWater=Math.max(0,e.scrollTop+self.virtualRemoveThreshold),lowWater=Math.min(scrollHeight,Math.abs(e.scrollTop)+viewportHeight+self.virtualAddThreshold),first=parseInt(Math.abs(highWater/itemHeight),10),last=parseInt(Math.abs(lowWater/itemHeight),10);self._virtualItemsToRemove=Array.prototype.slice.call(self.listEl.children,0,first),self.renderViewport&&self.renderViewport(highWater,lowWater,first,last)}},didStopScrolling:function(){if(this.isVirtual)for(var i=0;i<this._virtualItemsToRemove.length;i++)this.didHideItem&&this.didHideItem(i)},clearDragEffects:function(isInstant){this._lastDragOp&&(this._lastDragOp.clean&&this._lastDragOp.clean(isInstant),this._lastDragOp.deregister&&this._lastDragOp.deregister(),this._lastDragOp=null)},_initDrag:function(){this._lastDragOp&&this._lastDragOp.deregister&&this._lastDragOp.deregister(),this._lastDragOp=this._dragOp,this._dragOp=null},_getItem:function(target){for(;target;){if(target.classList&&target.classList.contains("item"))return target;target=target.parentNode}return null},_startDrag:function(e){var self=this;self._isDragging=!1;var item,lastDragOp=self._lastDragOp;self._didDragUpOrDown&&lastDragOp instanceof SlideDrag&&lastDragOp.clean&&lastDragOp.clean(),!ionic.DomUtil.getParentOrSelfWithClass(e.target,"item-reorder")||"up"!=e.gesture.direction&&"down"!=e.gesture.direction?!self._didDragUpOrDown&&("left"==e.gesture.direction||"right"==e.gesture.direction)&&Math.abs(e.gesture.deltaX)>5&&(item=self._getItem(e.target))&&item.querySelector(".item-options")&&(self._dragOp=new SlideDrag({el:self.el,item:item,canSwipe:self.canSwipe}),self._dragOp.start(e),e.preventDefault(),self.isScrollFreeze=self.scrollView.freeze(!0)):(item=self._getItem(e.target))&&(self._dragOp=new ReorderDrag({listEl:self.el,el:item,scrollEl:self.scrollEl,scrollView:self.scrollView,onReorder:function(el,start,end){self.onReorder&&self.onReorder(el,start,end)}}),self._dragOp.start(e),e.preventDefault()),lastDragOp&&self._dragOp&&!self._dragOp.isSameItem(lastDragOp)&&e.defaultPrevented&&lastDragOp.clean&&lastDragOp.clean()},_handleEndDrag:function(e){var self=this;self.scrollView&&(self.isScrollFreeze=self.scrollView.freeze(!1)),self._didDragUpOrDown=!1,self._dragOp&&self._dragOp.end(e,function(){self._initDrag()})},_handleDrag:function(e){var self=this;Math.abs(e.gesture.deltaY)>5&&(self._didDragUpOrDown=!0),self.isDragging||self._dragOp||self._startDrag(e),self._dragOp&&(e.gesture.srcEvent.preventDefault(),self._dragOp.drag(e))}})}(ionic),function(ionic){"use strict";ionic.views.Modal=ionic.views.View.inherit({initialize:function(opts){opts=ionic.extend({focusFirstInput:!1,unfocusOnHide:!0,focusFirstDelay:600,backdropClickToClose:!0,hardwareBackButtonClose:!0},opts),ionic.extend(this,opts),this.el=opts.el},show:function(){var self=this;self.focusFirstInput&&window.setTimeout(function(){var input=self.el.querySelector("input, textarea");input&&input.focus&&input.focus()},self.focusFirstDelay)},hide:function(){if(this.unfocusOnHide){var inputs=this.el.querySelectorAll("input, textarea");window.setTimeout(function(){for(var i=0;i<inputs.length;i++)inputs[i].blur&&inputs[i].blur()})}}})}(ionic),function(ionic){"use strict";ionic.views.SideMenu=ionic.views.View.inherit({initialize:function(opts){this.el=opts.el,this.isEnabled=void 0===opts.isEnabled||opts.isEnabled,this.setWidth(opts.width)},getFullWidth:function(){return this.width},setWidth:function(width){this.width=width,this.el.style.width=width+"px"},setIsEnabled:function(isEnabled){this.isEnabled=isEnabled},bringUp:function(){"0"!==this.el.style.zIndex&&(this.el.style.zIndex="0")},pushDown:function(){"-1"!==this.el.style.zIndex&&(this.el.style.zIndex="-1")}}),ionic.views.SideMenuContent=ionic.views.View.inherit({initialize:function(opts){ionic.extend(this,{animationClass:"menu-animated",onDrag:function(){},onEndDrag:function(){}},opts),ionic.onGesture("drag",ionic.proxy(this._onDrag,this),this.el),ionic.onGesture("release",ionic.proxy(this._onEndDrag,this),this.el)},_onDrag:function(e){this.onDrag&&this.onDrag(e)},_onEndDrag:function(e){this.onEndDrag&&this.onEndDrag(e)},disableAnimation:function(){this.el.classList.remove(this.animationClass)},enableAnimation:function(){this.el.classList.add(this.animationClass)},getTranslateX:function(){return parseFloat(this.el.style[ionic.CSS.TRANSFORM].replace("translate3d(","").split(",")[0])},setTranslateX:ionic.animationFrameThrottle(function(x){this.el.style[ionic.CSS.TRANSFORM]="translate3d("+x+"px, 0, 0)"})})}(ionic),function(ionic){"use strict";ionic.views.Slider=ionic.views.View.inherit({initialize:function(options){function setup(){if(container.offsetWidth){slides=element.children,length=slides.length,slides.length<2&&(options.continuous=!1),browser.transitions&&options.continuous&&slides.length<3&&(element.appendChild(slides[0].cloneNode(!0)),element.appendChild(element.children[1].cloneNode(!0)),slides=element.children),slidePos=new Array(slides.length),width=container.offsetWidth||container.getBoundingClientRect().width,element.style.width=slides.length*width+"px";for(var pos=slides.length;pos--;){var slide=slides[pos];slide.style.width=width+"px",slide.setAttribute("data-index",pos),browser.transitions&&(slide.style.left=pos*-width+"px",move(pos,index>pos?-width:index<pos?width:0,0))}options.continuous&&browser.transitions&&(move(circle(index-1),-width,0),move(circle(index+1),width,0)),browser.transitions||(element.style.left=index*-width+"px"),container.style.visibility="visible",options.slidesChanged&&options.slidesChanged()}}function prev(slideSpeed){options.continuous?slide(index-1,slideSpeed):index&&slide(index-1,slideSpeed)}function next(slideSpeed){options.continuous?slide(index+1,slideSpeed):index<slides.length-1&&slide(index+1,slideSpeed)}function circle(index){return(slides.length+index%slides.length)%slides.length}function slide(to,slideSpeed){if(index!=to)if(slides){if(browser.transitions){var direction=Math.abs(index-to)/(index-to);if(options.continuous){var naturalDirection=direction;(direction=-slidePos[circle(to)]/width)!==naturalDirection&&(to=-direction*slides.length+to)}for(var diff=Math.abs(index-to)-1;diff--;)move(circle((to>index?to:index)-diff-1),width*direction,0);to=circle(to),move(index,width*direction,slideSpeed||speed),move(to,0,slideSpeed||speed),options.continuous&&move(circle(to-direction),-width*direction,0)}else to=circle(to),animate(index*-width,to*-width,slideSpeed||speed);index=to,offloadFn(options.callback&&options.callback(index,slides[index]))}else index=to}function move(index,dist,speed){translate(index,dist,speed),slidePos[index]=dist}function translate(index,dist,speed){var slide=slides[index],style=slide&&slide.style;style&&(style.webkitTransitionDuration=style.MozTransitionDuration=style.msTransitionDuration=style.OTransitionDuration=style.transitionDuration=speed+"ms",style.webkitTransform="translate("+dist+"px,0)translateZ(0)",style.msTransform=style.MozTransform=style.OTransform="translateX("+dist+"px)")}function animate(from,to,speed){if(speed)var start=+new Date,timer=setInterval(function(){var timeElap=+new Date-start;if(timeElap>speed)return element.style.left=to+"px",delay&&begin(),options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]),void clearInterval(timer);element.style.left=(to-from)*(Math.floor(timeElap/speed*100)/100)+from+"px"},4);else element.style.left=to+"px"}function begin(){interval=setTimeout(next,delay)}function stop(){delay=options.auto||0,clearTimeout(interval)}var touchStartEvent,touchMoveEvent,touchEndEvent,slider=this;window.navigator.pointerEnabled?(touchStartEvent="pointerdown",touchMoveEvent="pointermove",touchEndEvent="pointerup"):window.navigator.msPointerEnabled?(touchStartEvent="MSPointerDown",touchMoveEvent="MSPointerMove",touchEndEvent="MSPointerUp"):(touchStartEvent="touchstart",touchMoveEvent="touchmove",touchEndEvent="touchend");var noop=function(){},offloadFn=function(fn){setTimeout(fn||noop,0)},browser={addEventListener:!!window.addEventListener,transitions:function(temp){var props=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in props)if(void 0!==temp.style[props[i]])return!0;return!1}(document.createElement("swipe"))},container=options.el;if(container){var slides,slidePos,width,length,element=container.children[0];options=options||{};var index=parseInt(options.startSlide,10)||0,speed=options.speed||300;options.continuous=void 0===options.continuous||options.continuous;var interval,isScrolling,delay=options.auto||0,start={},delta={},events={handleEvent:function(event){switch(!event.touches&&event.pageX&&event.pageY&&(event.touches=[{pageX:event.pageX,pageY:event.pageY}]),event.type){case touchStartEvent:case"mousedown":this.start(event);break;case touchMoveEvent:case"mousemove":this.touchmove(event);break;case touchEndEvent:case"mouseup":offloadFn(this.end(event));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":offloadFn(this.transitionEnd(event));break;case"resize":offloadFn(setup)}options.stopPropagation&&event.stopPropagation()},start:function(event){if(event.touches){var touches=event.touches[0];start={x:touches.pageX,y:touches.pageY,time:+new Date},isScrolling=void 0,delta={},element.addEventListener(touchMoveEvent,this,!1),element.addEventListener("mousemove",this,!1),element.addEventListener(touchEndEvent,this,!1),element.addEventListener("mouseup",this,!1),document.addEventListener(touchEndEvent,this,!1),document.addEventListener("mouseup",this,!1)}},touchmove:function(event){if(!(!event.touches||event.touches.length>1||event.scale&&1!==event.scale||slider.slideIsDisabled)){options.disableScroll&&event.preventDefault();var touches=event.touches[0];delta={x:touches.pageX-start.x,y:touches.pageY-start.y},void 0===isScrolling&&(isScrolling=!!(isScrolling||Math.abs(delta.x)<Math.abs(delta.y))),isScrolling||(event.preventDefault(),stop(),options.continuous?(translate(circle(index-1),delta.x+slidePos[circle(index-1)],0),translate(index,delta.x+slidePos[index],0),translate(circle(index+1),delta.x+slidePos[circle(index+1)],0)):(options.bouncing?delta.x=delta.x/(!index&&delta.x>0||index==slides.length-1&&delta.x<0?Math.abs(delta.x)/width+1:1):(width*index-delta.x<0&&(delta.x=Math.min(delta.x,width*index)),Math.abs(delta.x)>width*(slides.length-index-1)&&(delta.x=Math.max(-width*(slides.length-index-1),delta.x))),translate(index-1,delta.x+slidePos[index-1],0),translate(index,delta.x+slidePos[index],0),translate(index+1,delta.x+slidePos[index+1],0)),options.onDrag&&options.onDrag())}},end:function(){var duration=+new Date-start.time,isValidSlide=Number(duration)<250&&Math.abs(delta.x)>20||Math.abs(delta.x)>width/2,isPastBounds=!index&&delta.x>0||index==slides.length-1&&delta.x<0;options.continuous&&(isPastBounds=!1);var direction=delta.x<0;isScrolling||(isValidSlide&&!isPastBounds?(direction?(options.continuous?(move(circle(index-1),-width,0),move(circle(index+2),width,0)):move(index-1,-width,0),move(index,slidePos[index]-width,speed),move(circle(index+1),slidePos[circle(index+1)]-width,speed),index=circle(index+1)):(options.continuous?(move(circle(index+1),width,0),move(circle(index-2),-width,0)):move(index+1,width,0),move(index,slidePos[index]+width,speed),move(circle(index-1),slidePos[circle(index-1)]+width,speed),index=circle(index-1)),options.callback&&options.callback(index,slides[index])):options.continuous?(move(circle(index-1),-width,speed),move(index,0,speed),move(circle(index+1),width,speed)):(move(index-1,-width,speed),move(index,0,speed),move(index+1,width,speed))),element.removeEventListener(touchMoveEvent,events,!1),element.removeEventListener("mousemove",events,!1),element.removeEventListener(touchEndEvent,events,!1),element.removeEventListener("mouseup",events,!1),document.removeEventListener(touchEndEvent,events,!1),document.removeEventListener("mouseup",events,!1),options.onDragEnd&&options.onDragEnd()},transitionEnd:function(event){parseInt(event.target.getAttribute("data-index"),10)==index&&(delay&&begin(),options.transitionEnd&&options.transitionEnd.call(event,index,slides[index]))}};this.update=function(){setTimeout(setup)},this.setup=function(){setup()},this.loop=function(value){return arguments.length&&(options.continuous=!!value),options.continuous},this.enableSlide=function(shouldEnable){return arguments.length&&(this.slideIsDisabled=!shouldEnable),!this.slideIsDisabled},this.slide=this.select=function(to,speed){stop(),slide(to,speed)},this.prev=this.previous=function(){stop(),prev()},this.next=function(){stop(),next()},this.stop=function(){stop()},this.start=function(){begin()},this.autoPlay=function(newDelay){!delay||delay<0?stop():(delay=newDelay,begin())},this.currentIndex=this.selected=function(){return index},this.slidesCount=this.count=function(){return length},this.kill=function(){stop(),element.style.width="",element.style.left="",slides&&(slides=[]),browser.addEventListener?(element.removeEventListener(touchStartEvent,events,!1),element.removeEventListener("mousedown",events,!1),element.removeEventListener("webkitTransitionEnd",events,!1),element.removeEventListener("msTransitionEnd",events,!1),element.removeEventListener("oTransitionEnd",events,!1),element.removeEventListener("otransitionend",events,!1),element.removeEventListener("transitionend",events,!1),window.removeEventListener("resize",events,!1)):window.onresize=null},this.load=function(){setup(),delay&&begin(),browser.addEventListener?(element.addEventListener(touchStartEvent,events,!1),element.addEventListener("mousedown",events,!1),browser.transitions&&(element.addEventListener("webkitTransitionEnd",events,!1),element.addEventListener("msTransitionEnd",events,!1),element.addEventListener("oTransitionEnd",events,!1),element.addEventListener("otransitionend",events,!1),element.addEventListener("transitionend",events,!1)),window.addEventListener("resize",events,!1)):window.onresize=function(){setup()}}}}})}(ionic),function(){"use strict";var $,Swiper=function(container,params,_scope,$compile){function isH(){return"horizontal"===s.params.direction}function round(a){return Math.floor(a)}function autoplay(){s.autoplayTimeoutId=setTimeout(function(){s.params.loop?(s.fixLoop(),s._slideNext()):s.isEnd?params.autoplayStopOnLast?s.stopAutoplay():s._slideTo(0):s._slideNext()},s.params.autoplay)}function findElementInEvent(e,selector){var el=$(e.target);if(!el.is(selector))if("string"==typeof selector)el=el.parents(selector);else if(selector.nodeType){var found;return el.parents().each(function(index,_el){_el===selector&&(found=selector)}),found?selector:void 0}if(0!==el.length)return el[0]}function initObserver(target,options){options=options||{};var observer=new(window.MutationObserver||window.WebkitMutationObserver)(function(mutations){mutations.forEach(function(mutation){s.onResize(!0),s.emit("onObserverUpdate",s,mutation)})});observer.observe(target,{attributes:void 0===options.attributes||options.attributes,childList:void 0===options.childList||options.childList,characterData:void 0===options.characterData||options.characterData}),s.observers.push(observer)}function handleKeyboard(e){e.originalEvent&&(e=e.originalEvent);var kc=e.keyCode||e.charCode;if(!s.params.allowSwipeToNext&&(isH()&&39===kc||!isH()&&40===kc))return!1;if(!s.params.allowSwipeToPrev&&(isH()&&37===kc||!isH()&&38===kc))return!1;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||document.activeElement&&document.activeElement.nodeName&&("input"===document.activeElement.nodeName.toLowerCase()||"textarea"===document.activeElement.nodeName.toLowerCase()))){if(37===kc||39===kc||38===kc||40===kc){var inView=!1;if(s.container.parents(".swiper-slide").length>0&&0===s.container.parents(".swiper-slide-active").length)return;var windowScroll={left:window.pageXOffset,top:window.pageYOffset},windowWidth=window.innerWidth,windowHeight=window.innerHeight,swiperOffset=s.container.offset();s.rtl&&(swiperOffset.left=swiperOffset.left-s.container[0].scrollLeft);for(var swiperCoord=[[swiperOffset.left,swiperOffset.top],[swiperOffset.left+s.width,swiperOffset.top],[swiperOffset.left,swiperOffset.top+s.height],[swiperOffset.left+s.width,swiperOffset.top+s.height]],i=0;i<swiperCoord.length;i++){var point=swiperCoord[i];point[0]>=windowScroll.left&&point[0]<=windowScroll.left+windowWidth&&point[1]>=windowScroll.top&&point[1]<=windowScroll.top+windowHeight&&(inView=!0)}if(!inView)return}isH()?(37!==kc&&39!==kc||(e.preventDefault?e.preventDefault():e.returnValue=!1),(39===kc&&!s.rtl||37===kc&&s.rtl)&&s.slideNext(),(37===kc&&!s.rtl||39===kc&&s.rtl)&&s.slidePrev()):(38!==kc&&40!==kc||(e.preventDefault?e.preventDefault():e.returnValue=!1),40===kc&&s.slideNext(),38===kc&&s.slidePrev())}}function handleMousewheel(e){e.originalEvent&&(e=e.originalEvent);var we=s.mousewheel.event,delta=0,rtlFactor=s.rtl?-1:1;if(e.detail)delta=-e.detail;else if("mousewheel"===we)if(s.params.mousewheelForceToAxis)if(isH()){if(!(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)))return;delta=e.wheelDeltaX*rtlFactor}else{if(!(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX)))return;delta=e.wheelDeltaY}else delta=Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?-e.wheelDeltaX*rtlFactor:-e.wheelDeltaY;else if("DOMMouseScroll"===we)delta=-e.detail;else if("wheel"===we)if(s.params.mousewheelForceToAxis)if(isH()){if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY)))return;delta=-e.deltaX*rtlFactor}else{if(!(Math.abs(e.deltaY)>Math.abs(e.deltaX)))return;delta=-e.deltaY}else delta=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX*rtlFactor:-e.deltaY;if(0!==delta){if(s.params.mousewheelInvert&&(delta=-delta),s.params.freeMode){var position=s.getWrapperTranslate()+delta*s.params.mousewheelSensitivity,wasBeginning=s.isBeginning,wasEnd=s.isEnd;if(position>=s.minTranslate()&&(position=s.minTranslate()),position<=s.maxTranslate()&&(position=s.maxTranslate()),s.setWrapperTransition(0),s.setWrapperTranslate(position),s.updateProgress(),s.updateActiveIndex(),(!wasBeginning&&s.isBeginning||!wasEnd&&s.isEnd)&&s.updateClasses(),s.params.freeModeSticky&&(clearTimeout(s.mousewheel.timeout),s.mousewheel.timeout=setTimeout(function(){s.slideReset()},300)),0===position||position===s.maxTranslate())return}else{if((new window.Date).getTime()-s.mousewheel.lastScrollTime>60)if(delta<0)if(s.isEnd&&!s.params.loop||s.animating){if(s.params.mousewheelReleaseOnEdges)return!0}else s.slideNext();else if(s.isBeginning&&!s.params.loop||s.animating){if(s.params.mousewheelReleaseOnEdges)return!0}else s.slidePrev();s.mousewheel.lastScrollTime=(new window.Date).getTime()}return s.params.autoplay&&s.stopAutoplay(),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}}function setParallaxTransform(el,progress){el=$(el);var p,pX,pY,rtlFactor=s.rtl?-1:1;p=el.attr("data-swiper-parallax")||"0",pX=el.attr("data-swiper-parallax-x"),pY=el.attr("data-swiper-parallax-y"),pX||pY?(pX=pX||"0",pY=pY||"0"):isH()?(pX=p,pY="0"):(pY=p,pX="0"),pX=pX.indexOf("%")>=0?parseInt(pX,10)*progress*rtlFactor+"%":pX*progress*rtlFactor+"px",pY=pY.indexOf("%")>=0?parseInt(pY,10)*progress+"%":pY*progress+"px",el.transform("translate3d("+pX+", "+pY+",0px)")}function normalizeEventName(eventName){return 0!==eventName.indexOf("on")&&(eventName=eventName[0]!==eventName[0].toUpperCase()?"on"+eventName[0].toUpperCase()+eventName.substring(1):"on"+eventName),eventName}if(!(this instanceof Swiper))return new Swiper(container,params);var defaults={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fade:{crossFade:!1},parallax:!1,scrollbar:null,scrollbarHide:!0,scrollbarDraggable:!1,scrollbarSnapOnRelease:!1,keyboardControl:!1,mousewheelControl:!1,mousewheelReleaseOnEdges:!1,mousewheelInvert:!1,mousewheelForceToAxis:!1,mousewheelSensitivity:1,hashnav:!1,breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,pagination:null,paginationElement:"span",paginationClickable:!1,paginationHide:!1,paginationBulletRender:null,resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingOnTransitionStart:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,controlBy:"slide",allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationHiddenClass:"swiper-pagination-hidden",observer:!1,observeParents:!1,a11y:!1,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",runCallbacksOnInit:!0},initialVirtualTranslate=params&&params.virtualTranslate;params=params||{};var originalParams={};for(var param in params)if("object"!=typeof params[param]||(params[param].nodeType||params[param]===window||params[param]===document||void 0!==Dom7&&params[param]instanceof Dom7||"undefined"!=typeof jQuery&&params[param]instanceof jQuery))originalParams[param]=params[param];else{originalParams[param]={};for(var deepParam in params[param])originalParams[param][deepParam]=params[param][deepParam]}for(var def in defaults)if(void 0===params[def])params[def]=defaults[def];else if("object"==typeof params[def])for(var deepDef in defaults[def])void 0===params[def][deepDef]&&(params[def][deepDef]=defaults[def][deepDef]);var s=this;if(s.params=params,s.originalParams=originalParams,s.classNames=[],void 0!==$&&void 0!==Dom7&&($=Dom7),(void 0!==$||($=void 0===Dom7?window.Dom7||window.Zepto||window.jQuery:Dom7))&&(s.$=$,s.currentBreakpoint=void 0,s.getActiveBreakpoint=function(){if(!s.params.breakpoints)return!1;var point,breakpoint=!1,points=[];for(point in s.params.breakpoints)s.params.breakpoints.hasOwnProperty(point)&&points.push(point);points.sort(function(a,b){return parseInt(a,10)>parseInt(b,10)});for(var i=0;i<points.length;i++)(point=points[i])>=window.innerWidth&&!breakpoint&&(breakpoint=point);return breakpoint||"max"},s.setBreakpoint=function(){var breakpoint=s.getActiveBreakpoint();if(breakpoint&&s.currentBreakpoint!==breakpoint){var breakPointsParams=breakpoint in s.params.breakpoints?s.params.breakpoints[breakpoint]:s.originalParams;for(var param in breakPointsParams)s.params[param]=breakPointsParams[param];s.currentBreakpoint=breakpoint}},s.params.breakpoints&&s.setBreakpoint(),s.container=$(container),0!==s.container.length)){if(!(s.container.length>1)){s.container[0].swiper=s,s.container.data("swiper",s),s.classNames.push("swiper-container-"+s.params.direction),s.params.freeMode&&s.classNames.push("swiper-container-free-mode"),s.support.flexbox||(s.classNames.push("swiper-container-no-flexbox"),s.params.slidesPerColumn=1),s.params.autoHeight&&s.classNames.push("swiper-container-autoheight"),(s.params.parallax||s.params.watchSlidesVisibility)&&(s.params.watchSlidesProgress=!0),["cube","coverflow"].indexOf(s.params.effect)>=0&&(s.support.transforms3d?(s.params.watchSlidesProgress=!0,s.classNames.push("swiper-container-3d")):s.params.effect="slide"),"slide"!==s.params.effect&&s.classNames.push("swiper-container-"+s.params.effect),"cube"===s.params.effect&&(s.params.resistanceRatio=0,s.params.slidesPerView=1,s.params.slidesPerColumn=1,s.params.slidesPerGroup=1,s.params.centeredSlides=!1,s.params.spaceBetween=0,s.params.virtualTranslate=!0,s.params.setWrapperSize=!1),"fade"===s.params.effect&&(s.params.slidesPerView=1,s.params.slidesPerColumn=1,s.params.slidesPerGroup=1,s.params.watchSlidesProgress=!0,s.params.spaceBetween=0,void 0===initialVirtualTranslate&&(s.params.virtualTranslate=!0)),s.params.grabCursor&&s.support.touch&&(s.params.grabCursor=!1),s.wrapper=s.container.children("."+s.params.wrapperClass),s.params.pagination&&(s.paginationContainer=$(s.params.pagination),s.params.paginationClickable&&s.paginationContainer.addClass("swiper-pagination-clickable")),s.rtl=isH()&&("rtl"===s.container[0].dir.toLowerCase()||"rtl"===s.container.css("direction")),s.rtl&&s.classNames.push("swiper-container-rtl"),s.rtl&&(s.wrongRTL="-webkit-box"===s.wrapper.css("display")),s.params.slidesPerColumn>1&&s.classNames.push("swiper-container-multirow"),s.device.android&&s.classNames.push("swiper-container-android"),s.container.addClass(s.classNames.join(" ")),s.translate=0,s.progress=0,s.velocity=0,s.lockSwipeToNext=function(){s.params.allowSwipeToNext=!1},s.lockSwipeToPrev=function(){s.params.allowSwipeToPrev=!1},s.lockSwipes=function(){s.params.allowSwipeToNext=s.params.allowSwipeToPrev=!1},s.unlockSwipeToNext=function(){s.params.allowSwipeToNext=!0},s.unlockSwipeToPrev=function(){s.params.allowSwipeToPrev=!0},s.unlockSwipes=function(){s.params.allowSwipeToNext=s.params.allowSwipeToPrev=!0},s.params.grabCursor&&(s.container[0].style.cursor="move",s.container[0].style.cursor="-webkit-grab",s.container[0].style.cursor="-moz-grab",s.container[0].style.cursor="grab"),s.imagesToLoad=[],s.imagesLoaded=0,s.loadImage=function(imgElement,src,srcset,checkForComplete,callback){function onReady(){callback&&callback()}var image;imgElement.complete&&checkForComplete?onReady():src?((image=new window.Image).onload=onReady,image.onerror=onReady,srcset&&(image.srcset=srcset),src&&(image.src=src)):onReady()},s.preloadImages=function(){s.imagesToLoad=s.container.find("img");for(var i=0;i<s.imagesToLoad.length;i++)s.loadImage(s.imagesToLoad[i],s.imagesToLoad[i].currentSrc||s.imagesToLoad[i].getAttribute("src"),s.imagesToLoad[i].srcset||s.imagesToLoad[i].getAttribute("srcset"),!0,function(){void 0!==s&&null!==s&&(void 0!==s.imagesLoaded&&s.imagesLoaded++,s.imagesLoaded===s.imagesToLoad.length&&(s.params.updateOnImagesReady&&s.update(),s.emit("onImagesReady",s)))})},s.autoplayTimeoutId=void 0,s.autoplaying=!1,s.autoplayPaused=!1,s.startAutoplay=function(){return void 0===s.autoplayTimeoutId&&(!!s.params.autoplay&&(!s.autoplaying&&(s.autoplaying=!0,s.emit("onAutoplayStart",s),void autoplay())))},s.stopAutoplay=function(internal){s.autoplayTimeoutId&&(s.autoplayTimeoutId&&clearTimeout(s.autoplayTimeoutId),s.autoplaying=!1,s.autoplayTimeoutId=void 0,s.emit("onAutoplayStop",s))},s.pauseAutoplay=function(speed){s.autoplayPaused||(s.autoplayTimeoutId&&clearTimeout(s.autoplayTimeoutId),s.autoplayPaused=!0,0===speed?(s.autoplayPaused=!1,autoplay()):s.wrapper.transitionEnd(function(){s&&(s.autoplayPaused=!1,s.autoplaying?autoplay():s.stopAutoplay())}))},s.minTranslate=function(){return-s.snapGrid[0]},s.maxTranslate=function(){return-s.snapGrid[s.snapGrid.length-1]},s.updateAutoHeight=function(){s.slides.eq(s.activeIndex)[0].offsetHeight&&s.wrapper.css("height",s.slides.eq(s.activeIndex)[0].offsetHeight+"px")},s.updateContainerSize=function(){var width,height;width=void 0!==s.params.width?s.params.width:s.container[0].clientWidth,height=void 0!==s.params.height?s.params.height:s.container[0].clientHeight,0===width&&isH()||0===height&&!isH()||(width=width-parseInt(s.container.css("padding-left"),10)-parseInt(s.container.css("padding-right"),10),height=height-parseInt(s.container.css("padding-top"),10)-parseInt(s.container.css("padding-bottom"),10),s.width=width,s.height=height,s.size=isH()?s.width:s.height)},s.updateSlidesSize=function(){s.slides=s.wrapper.children("."+s.params.slideClass),s.snapGrid=[],s.slidesGrid=[],s.slidesSizesGrid=[];var i,spaceBetween=s.params.spaceBetween,slidePosition=-s.params.slidesOffsetBefore,prevSlideSize=0,index=0;"string"==typeof spaceBetween&&spaceBetween.indexOf("%")>=0&&(spaceBetween=parseFloat(spaceBetween.replace("%",""))/100*s.size),s.virtualSize=-spaceBetween,s.rtl?s.slides.css({marginLeft:"",marginTop:""}):s.slides.css({marginRight:"",marginBottom:""});var slidesNumberEvenToRows;s.params.slidesPerColumn>1&&(slidesNumberEvenToRows=Math.floor(s.slides.length/s.params.slidesPerColumn)===s.slides.length/s.params.slidesPerColumn?s.slides.length:Math.ceil(s.slides.length/s.params.slidesPerColumn)*s.params.slidesPerColumn,"auto"!==s.params.slidesPerView&&"row"===s.params.slidesPerColumnFill&&(slidesNumberEvenToRows=Math.max(slidesNumberEvenToRows,s.params.slidesPerView*s.params.slidesPerColumn)));var slideSize,slidesPerColumn=s.params.slidesPerColumn,slidesPerRow=slidesNumberEvenToRows/slidesPerColumn,numFullColumns=slidesPerRow-(s.params.slidesPerColumn*slidesPerRow-s.slides.length);for(i=0;i<s.slides.length;i++){slideSize=0;var slide=s.slides.eq(i);if(s.params.slidesPerColumn>1){var newSlideOrderIndex,column,row;"column"===s.params.slidesPerColumnFill?(row=i-(column=Math.floor(i/slidesPerColumn))*slidesPerColumn,(column>numFullColumns||column===numFullColumns&&row===slidesPerColumn-1)&&++row>=slidesPerColumn&&(row=0,column++),newSlideOrderIndex=column+row*slidesNumberEvenToRows/slidesPerColumn,slide.css({"-webkit-box-ordinal-group":newSlideOrderIndex,"-moz-box-ordinal-group":newSlideOrderIndex,"-ms-flex-order":newSlideOrderIndex,"-webkit-order":newSlideOrderIndex,order:newSlideOrderIndex})):column=i-(row=Math.floor(i/slidesPerRow))*slidesPerRow,slide.css({"margin-top":0!==row&&s.params.spaceBetween&&s.params.spaceBetween+"px"}).attr("data-swiper-column",column).attr("data-swiper-row",row)}"none"!==slide.css("display")&&("auto"===s.params.slidesPerView?(slideSize=isH()?slide.outerWidth(!0):slide.outerHeight(!0),s.params.roundLengths&&(slideSize=round(slideSize))):(slideSize=(s.size-(s.params.slidesPerView-1)*spaceBetween)/s.params.slidesPerView,s.params.roundLengths&&(slideSize=round(slideSize)),isH()?s.slides[i].style.width=slideSize+"px":s.slides[i].style.height=slideSize+"px"),s.slides[i].swiperSlideSize=slideSize,s.slidesSizesGrid.push(slideSize),s.params.centeredSlides?(slidePosition=slidePosition+slideSize/2+prevSlideSize/2+spaceBetween,0===i&&(slidePosition=slidePosition-s.size/2-spaceBetween),Math.abs(slidePosition)<.001&&(slidePosition=0),index%s.params.slidesPerGroup==0&&s.snapGrid.push(slidePosition),s.slidesGrid.push(slidePosition)):(index%s.params.slidesPerGroup==0&&s.snapGrid.push(slidePosition),s.slidesGrid.push(slidePosition),slidePosition=slidePosition+slideSize+spaceBetween),s.virtualSize+=slideSize+spaceBetween,prevSlideSize=slideSize,index++)}s.virtualSize=Math.max(s.virtualSize,s.size)+s.params.slidesOffsetAfter;var newSlidesGrid;if(s.rtl&&s.wrongRTL&&("slide"===s.params.effect||"coverflow"===s.params.effect)&&s.wrapper.css({width:s.virtualSize+s.params.spaceBetween+"px"}),s.support.flexbox&&!s.params.setWrapperSize||(isH()?s.wrapper.css({width:s.virtualSize+s.params.spaceBetween+"px"}):s.wrapper.css({height:s.virtualSize+s.params.spaceBetween+"px"})),s.params.slidesPerColumn>1&&(s.virtualSize=(slideSize+s.params.spaceBetween)*slidesNumberEvenToRows,s.virtualSize=Math.ceil(s.virtualSize/s.params.slidesPerColumn)-s.params.spaceBetween,s.wrapper.css({width:s.virtualSize+s.params.spaceBetween+"px"}),s.params.centeredSlides)){for(newSlidesGrid=[],i=0;i<s.snapGrid.length;i++)s.snapGrid[i]<s.virtualSize+s.snapGrid[0]&&newSlidesGrid.push(s.snapGrid[i]);s.snapGrid=newSlidesGrid}if(!s.params.centeredSlides){for(newSlidesGrid=[],i=0;i<s.snapGrid.length;i++)s.snapGrid[i]<=s.virtualSize-s.size&&newSlidesGrid.push(s.snapGrid[i]);s.snapGrid=newSlidesGrid,Math.floor(s.virtualSize-s.size)>Math.floor(s.snapGrid[s.snapGrid.length-1])&&s.snapGrid.push(s.virtualSize-s.size)}0===s.snapGrid.length&&(s.snapGrid=[0]),0!==s.params.spaceBetween&&(isH()?s.rtl?s.slides.css({marginLeft:spaceBetween+"px"}):s.slides.css({marginRight:spaceBetween+"px"}):s.slides.css({marginBottom:spaceBetween+"px"})),s.params.watchSlidesProgress&&s.updateSlidesOffset()},s.updateSlidesOffset=function(){for(var i=0;i<s.slides.length;i++)s.slides[i].swiperSlideOffset=isH()?s.slides[i].offsetLeft:s.slides[i].offsetTop},s.updateSlidesProgress=function(translate){if(void 0===translate&&(translate=s.translate||0),0!==s.slides.length){void 0===s.slides[0].swiperSlideOffset&&s.updateSlidesOffset();var offsetCenter=-translate;s.rtl&&(offsetCenter=translate),s.slides.removeClass(s.params.slideVisibleClass);for(var i=0;i<s.slides.length;i++){var slide=s.slides[i],slideProgress=(offsetCenter-slide.swiperSlideOffset)/(slide.swiperSlideSize+s.params.spaceBetween);if(s.params.watchSlidesVisibility){var slideBefore=-(offsetCenter-slide.swiperSlideOffset),slideAfter=slideBefore+s.slidesSizesGrid[i];(slideBefore>=0&&slideBefore<s.size||slideAfter>0&&slideAfter<=s.size||slideBefore<=0&&slideAfter>=s.size)&&s.slides.eq(i).addClass(s.params.slideVisibleClass)}slide.progress=s.rtl?-slideProgress:slideProgress}}},s.updateProgress=function(translate){void 0===translate&&(translate=s.translate||0);var translatesDiff=s.maxTranslate()-s.minTranslate(),wasBeginning=s.isBeginning,wasEnd=s.isEnd;0===translatesDiff?(s.progress=0,s.isBeginning=s.isEnd=!0):(s.progress=(translate-s.minTranslate())/translatesDiff,s.isBeginning=s.progress<=0,s.isEnd=s.progress>=1),s.isBeginning&&!wasBeginning&&s.emit("onReachBeginning",s),s.isEnd&&!wasEnd&&s.emit("onReachEnd",s),s.params.watchSlidesProgress&&s.updateSlidesProgress(translate),s.emit("onProgress",s,s.progress)},s.updateActiveIndex=function(){var newActiveIndex,i,snapIndex,translate=s.rtl?s.translate:-s.translate;for(i=0;i<s.slidesGrid.length;i++)void 0!==s.slidesGrid[i+1]?translate>=s.slidesGrid[i]&&translate<s.slidesGrid[i+1]-(s.slidesGrid[i+1]-s.slidesGrid[i])/2?newActiveIndex=i:translate>=s.slidesGrid[i]&&translate<s.slidesGrid[i+1]&&(newActiveIndex=i+1):translate>=s.slidesGrid[i]&&(newActiveIndex=i);(newActiveIndex<0||void 0===newActiveIndex)&&(newActiveIndex=0),(snapIndex=Math.floor(newActiveIndex/s.params.slidesPerGroup))>=s.snapGrid.length&&(snapIndex=s.snapGrid.length-1),newActiveIndex!==s.activeIndex&&(s.snapIndex=snapIndex,s.previousIndex=s.activeIndex,s.activeIndex=newActiveIndex,s.updateClasses())},s.updateClasses=function(){s.slides.removeClass(s.params.slideActiveClass+" "+s.params.slideNextClass+" "+s.params.slidePrevClass);var activeSlide=s.slides.eq(s.activeIndex);if(activeSlide.addClass(s.params.slideActiveClass),activeSlide.next("."+s.params.slideClass).addClass(s.params.slideNextClass),activeSlide.prev("."+s.params.slideClass).addClass(s.params.slidePrevClass),s.bullets&&s.bullets.length>0){s.bullets.removeClass(s.params.bulletActiveClass);var bulletIndex;s.params.loop?((bulletIndex=Math.ceil(s.activeIndex-s.loopedSlides)/s.params.slidesPerGroup)>s.slides.length-1-2*s.loopedSlides&&(bulletIndex-=s.slides.length-2*s.loopedSlides),bulletIndex>s.bullets.length-1&&(bulletIndex-=s.bullets.length)):bulletIndex=void 0!==s.snapIndex?s.snapIndex:s.activeIndex||0,s.paginationContainer.length>1?s.bullets.each(function(){$(this).index()===bulletIndex&&$(this).addClass(s.params.bulletActiveClass)}):s.bullets.eq(bulletIndex).addClass(s.params.bulletActiveClass)}s.params.loop||(s.params.prevButton&&(s.isBeginning?($(s.params.prevButton).addClass(s.params.buttonDisabledClass),s.params.a11y&&s.a11y&&s.a11y.disable($(s.params.prevButton))):($(s.params.prevButton).removeClass(s.params.buttonDisabledClass),s.params.a11y&&s.a11y&&s.a11y.enable($(s.params.prevButton)))),s.params.nextButton&&(s.isEnd?($(s.params.nextButton).addClass(s.params.buttonDisabledClass),s.params.a11y&&s.a11y&&s.a11y.disable($(s.params.nextButton))):($(s.params.nextButton).removeClass(s.params.buttonDisabledClass),s.params.a11y&&s.a11y&&s.a11y.enable($(s.params.nextButton)))))},s.updatePagination=function(){if(s.params.pagination&&s.paginationContainer&&s.paginationContainer.length>0){for(var bulletsHTML="",numberOfBullets=s.params.loop?Math.ceil((s.slides.length-2*s.loopedSlides)/s.params.slidesPerGroup):s.snapGrid.length,i=0;i<numberOfBullets;i++)s.params.paginationBulletRender?bulletsHTML+=s.params.paginationBulletRender(i,s.params.bulletClass):bulletsHTML+="<"+s.params.paginationElement+' class="'+s.params.bulletClass+'"></'+s.params.paginationElement+">";s.paginationContainer.html(bulletsHTML),s.bullets=s.paginationContainer.find("."+s.params.bulletClass),s.params.paginationClickable&&s.params.a11y&&s.a11y&&s.a11y.initPagination()}},s.update=function(updateTranslate){function forceSetTranslate(){newTranslate=Math.min(Math.max(s.translate,s.maxTranslate()),s.minTranslate()),s.setWrapperTranslate(newTranslate),s.updateActiveIndex(),s.updateClasses()}if(s.updateContainerSize(),s.updateSlidesSize(),s.updateProgress(),s.updatePagination(),s.updateClasses(),s.params.scrollbar&&s.scrollbar&&s.scrollbar.set(),updateTranslate){var newTranslate;s.controller&&s.controller.spline&&(s.controller.spline=void 0),s.params.freeMode?(forceSetTranslate(),s.params.autoHeight&&s.updateAutoHeight()):(("auto"===s.params.slidesPerView||s.params.slidesPerView>1)&&s.isEnd&&!s.params.centeredSlides?s.slideTo(s.slides.length-1,0,!1,!0):s.slideTo(s.activeIndex,0,!1,!0))||forceSetTranslate()}else s.params.autoHeight&&s.updateAutoHeight()},s.onResize=function(forceUpdatePagination){s.params.breakpoints&&s.setBreakpoint();var allowSwipeToPrev=s.params.allowSwipeToPrev,allowSwipeToNext=s.params.allowSwipeToNext;if(s.params.allowSwipeToPrev=s.params.allowSwipeToNext=!0,s.updateContainerSize(),s.updateSlidesSize(),("auto"===s.params.slidesPerView||s.params.freeMode||forceUpdatePagination)&&s.updatePagination(),s.params.scrollbar&&s.scrollbar&&s.scrollbar.set(),s.controller&&s.controller.spline&&(s.controller.spline=void 0),s.params.freeMode){var newTranslate=Math.min(Math.max(s.translate,s.maxTranslate()),s.minTranslate());s.setWrapperTranslate(newTranslate),s.updateActiveIndex(),s.updateClasses(),s.params.autoHeight&&s.updateAutoHeight()}else s.updateClasses(),("auto"===s.params.slidesPerView||s.params.slidesPerView>1)&&s.isEnd&&!s.params.centeredSlides?s.slideTo(s.slides.length-1,0,!1,!0):s.slideTo(s.activeIndex,0,!1,!0);s.params.allowSwipeToPrev=allowSwipeToPrev,s.params.allowSwipeToNext=allowSwipeToNext};var desktopEvents=["mousedown","mousemove","mouseup"];window.navigator.pointerEnabled?desktopEvents=["pointerdown","pointermove","pointerup"]:window.navigator.msPointerEnabled&&(desktopEvents=["MSPointerDown","MSPointerMove","MSPointerUp"]),s.touchEvents={start:s.support.touch||!s.params.simulateTouch?"touchstart":desktopEvents[0],move:s.support.touch||!s.params.simulateTouch?"touchmove":desktopEvents[1],end:s.support.touch||!s.params.simulateTouch?"touchend":desktopEvents[2]},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===s.params.touchEventsTarget?s.container:s.wrapper).addClass("swiper-wp8-"+s.params.direction),s.initEvents=function(detach){var actionDom=detach?"off":"on",action=detach?"removeEventListener":"addEventListener",touchEventsTarget="container"===s.params.touchEventsTarget?s.container[0]:s.wrapper[0],target=s.support.touch?touchEventsTarget:document,moveCapture=!!s.params.nested;s.browser.ie?(touchEventsTarget[action](s.touchEvents.start,s.onTouchStart,!1),target[action](s.touchEvents.move,s.onTouchMove,moveCapture),target[action](s.touchEvents.end,s.onTouchEnd,!1)):(s.support.touch&&(touchEventsTarget[action](s.touchEvents.start,s.onTouchStart,!1),touchEventsTarget[action](s.touchEvents.move,s.onTouchMove,moveCapture),touchEventsTarget[action](s.touchEvents.end,s.onTouchEnd,!1)),!params.simulateTouch||s.device.ios||s.device.android||(touchEventsTarget[action]("mousedown",s.onTouchStart,!1),document[action]("mousemove",s.onTouchMove,moveCapture),document[action]("mouseup",s.onTouchEnd,!1))),window[action]("resize",s.onResize),s.params.nextButton&&($(s.params.nextButton)[actionDom]("click",s.onClickNext),s.params.a11y&&s.a11y&&$(s.params.nextButton)[actionDom]("keydown",s.a11y.onEnterKey)),s.params.prevButton&&($(s.params.prevButton)[actionDom]("click",s.onClickPrev),s.params.a11y&&s.a11y&&$(s.params.prevButton)[actionDom]("keydown",s.a11y.onEnterKey)),s.params.pagination&&s.params.paginationClickable&&($(s.paginationContainer)[actionDom]("click","."+s.params.bulletClass,s.onClickIndex),s.params.a11y&&s.a11y&&$(s.paginationContainer)[actionDom]("keydown","."+s.params.bulletClass,s.a11y.onEnterKey)),(s.params.preventClicks||s.params.preventClicksPropagation)&&touchEventsTarget[action]("click",s.preventClicks,!0)},s.attachEvents=function(detach){s.initEvents()},s.detachEvents=function(){s.initEvents(!0)},s.allowClick=!0,s.preventClicks=function(e){s.allowClick||(s.params.preventClicks&&e.preventDefault(),s.params.preventClicksPropagation&&s.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))},s.onClickNext=function(e){e.preventDefault(),s.isEnd&&!s.params.loop||s.slideNext()},s.onClickPrev=function(e){e.preventDefault(),s.isBeginning&&!s.params.loop||s.slidePrev()},s.onClickIndex=function(e){e.preventDefault();var index=$(this).index()*s.params.slidesPerGroup;s.params.loop&&(index+=s.loopedSlides),s.slideTo(index)},s.updateClickedSlide=function(e){var slide=findElementInEvent(e,"."+s.params.slideClass),slideFound=!1;if(slide)for(var i=0;i<s.slides.length;i++)s.slides[i]===slide&&(slideFound=!0);if(!slide||!slideFound)return s.clickedSlide=void 0,void(s.clickedIndex=void 0);if(s.clickedSlide=slide,s.clickedIndex=$(slide).index(),s.params.slideToClickedSlide&&void 0!==s.clickedIndex&&s.clickedIndex!==s.activeIndex){var realIndex,slideToIndex=s.clickedIndex;if(s.params.loop){if(s.animating)return;realIndex=$(s.clickedSlide).attr("data-swiper-slide-index"),s.params.centeredSlides?slideToIndex<s.loopedSlides-s.params.slidesPerView/2||slideToIndex>s.slides.length-s.loopedSlides+s.params.slidesPerView/2?(s.fixLoop(),slideToIndex=s.wrapper.children("."+s.params.slideClass+'[data-swiper-slide-index="'+realIndex+'"]:not(.swiper-slide-duplicate)').eq(0).index(),setTimeout(function(){s.slideTo(slideToIndex)},0)):s.slideTo(slideToIndex):slideToIndex>s.slides.length-s.params.slidesPerView?(s.fixLoop(),slideToIndex=s.wrapper.children("."+s.params.slideClass+'[data-swiper-slide-index="'+realIndex+'"]:not(.swiper-slide-duplicate)').eq(0).index(),setTimeout(function(){s.slideTo(slideToIndex)},0)):s.slideTo(slideToIndex)}else s.slideTo(slideToIndex)}};var isTouched,isMoved,allowTouchCallbacks,touchStartTime,isScrolling,currentTranslate,startTranslate,allowThresholdMove,clickTimeout,allowMomentumBounce,formElements="input, select, textarea, button",lastClickTime=Date.now(),velocities=[];s.animating=!1,s.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var isTouchEvent,startMoving;if(s.onTouchStart=function(e){if(e.originalEvent&&(e=e.originalEvent),(isTouchEvent="touchstart"===e.type)||!("which"in e)||3!==e.which)if(s.params.noSwiping&&findElementInEvent(e,"."+s.params.noSwipingClass))s.allowClick=!0;else if(!s.params.swipeHandler||findElementInEvent(e,s.params.swipeHandler)){var startX=s.touches.currentX="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,startY=s.touches.currentY="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY;if(!(s.device.ios&&s.params.iOSEdgeSwipeDetection&&startX<=s.params.iOSEdgeSwipeThreshold)){if(isTouched=!0,isMoved=!1,allowTouchCallbacks=!0,isScrolling=void 0,startMoving=void 0,s.touches.startX=startX,s.touches.startY=startY,touchStartTime=Date.now(),s.allowClick=!0,s.updateContainerSize(),s.swipeDirection=void 0,s.params.threshold>0&&(allowThresholdMove=!1),"touchstart"!==e.type){var preventDefault=!0;$(e.target).is(formElements)&&(preventDefault=!1),document.activeElement&&$(document.activeElement).is(formElements)&&document.activeElement.blur(),preventDefault&&e.preventDefault()}s.emit("onTouchStart",s,e)}}},s.onTouchMove=function(e){if(e.originalEvent&&(e=e.originalEvent),!(isTouchEvent&&"mousemove"===e.type||e.preventedByNestedSwiper)){if(s.params.onlyExternal)return s.allowClick=!1,void(isTouched&&(s.touches.startX=s.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s.touches.startY=s.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,touchStartTime=Date.now()));if(isTouchEvent&&document.activeElement&&e.target===document.activeElement&&$(e.target).is(formElements))return isMoved=!0,void(s.allowClick=!1);if(allowTouchCallbacks&&s.emit("onTouchMove",s,e),!(e.targetTouches&&e.targetTouches.length>1)){if(s.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,void 0===isScrolling){var touchAngle=180*Math.atan2(Math.abs(s.touches.currentY-s.touches.startY),Math.abs(s.touches.currentX-s.touches.startX))/Math.PI;isScrolling=isH()?touchAngle>s.params.touchAngle:90-touchAngle>s.params.touchAngle}if(isScrolling&&s.emit("onTouchMoveOpposite",s,e),void 0===startMoving&&s.browser.ieTouch&&(s.touches.currentX===s.touches.startX&&s.touches.currentY===s.touches.startY||(startMoving=!0)),isTouched)if(isScrolling)isTouched=!1;else if(startMoving||!s.browser.ieTouch){s.allowClick=!1,s.emit("onSliderMove",s,e),e.preventDefault(),s.params.touchMoveStopPropagation&&!s.params.nested&&e.stopPropagation(),isMoved||(params.loop&&s.fixLoop(),startTranslate=s.getWrapperTranslate(),s.setWrapperTransition(0),s.animating&&s.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),s.params.autoplay&&s.autoplaying&&(s.params.autoplayDisableOnInteraction?s.stopAutoplay():s.pauseAutoplay()),allowMomentumBounce=!1,s.params.grabCursor&&(s.container[0].style.cursor="move",s.container[0].style.cursor="-webkit-grabbing",s.container[0].style.cursor="-moz-grabbin",s.container[0].style.cursor="grabbing")),isMoved=!0;var diff=s.touches.diff=isH()?s.touches.currentX-s.touches.startX:s.touches.currentY-s.touches.startY;diff*=s.params.touchRatio,s.rtl&&(diff=-diff),s.swipeDirection=diff>0?"prev":"next",currentTranslate=diff+startTranslate;var disableParentSwiper=!0;if(diff>0&&currentTranslate>s.minTranslate()?(disableParentSwiper=!1,s.params.resistance&&(currentTranslate=s.minTranslate()-1+Math.pow(-s.minTranslate()+startTranslate+diff,s.params.resistanceRatio))):diff<0&&currentTranslate<s.maxTranslate()&&(disableParentSwiper=!1,s.params.resistance&&(currentTranslate=s.maxTranslate()+1-Math.pow(s.maxTranslate()-startTranslate-diff,s.params.resistanceRatio))),disableParentSwiper&&(e.preventedByNestedSwiper=!0),!s.params.allowSwipeToNext&&"next"===s.swipeDirection&&currentTranslate<startTranslate&&(currentTranslate=startTranslate),!s.params.allowSwipeToPrev&&"prev"===s.swipeDirection&&currentTranslate>startTranslate&&(currentTranslate=startTranslate),s.params.followFinger){if(s.params.threshold>0){if(!(Math.abs(diff)>s.params.threshold||allowThresholdMove))return void(currentTranslate=startTranslate);if(!allowThresholdMove)return allowThresholdMove=!0,s.touches.startX=s.touches.currentX,s.touches.startY=s.touches.currentY,currentTranslate=startTranslate,void(s.touches.diff=isH()?s.touches.currentX-s.touches.startX:s.touches.currentY-s.touches.startY)}(s.params.freeMode||s.params.watchSlidesProgress)&&s.updateActiveIndex(),s.params.freeMode&&(0===velocities.length&&velocities.push({position:s.touches[isH()?"startX":"startY"],time:touchStartTime}),velocities.push({position:s.touches[isH()?"currentX":"currentY"],time:(new window.Date).getTime()})),s.updateProgress(currentTranslate),s.setWrapperTranslate(currentTranslate)}}}}},s.onTouchEnd=function(e){if(e.originalEvent&&(e=e.originalEvent),allowTouchCallbacks&&s.emit("onTouchEnd",s,e),allowTouchCallbacks=!1,isTouched){s.params.grabCursor&&isMoved&&isTouched&&(s.container[0].style.cursor="move",s.container[0].style.cursor="-webkit-grab",s.container[0].style.cursor="-moz-grab",s.container[0].style.cursor="grab");var touchEndTime=Date.now(),timeDiff=touchEndTime-touchStartTime;if(s.allowClick&&(s.updateClickedSlide(e),s.emit("onTap",s,e),timeDiff<300&&touchEndTime-lastClickTime>300&&(clickTimeout&&clearTimeout(clickTimeout),clickTimeout=setTimeout(function(){s&&(s.params.paginationHide&&s.paginationContainer.length>0&&!$(e.target).hasClass(s.params.bulletClass)&&s.paginationContainer.toggleClass(s.params.paginationHiddenClass),s.emit("onClick",s,e))},300)),timeDiff<300&&touchEndTime-lastClickTime<300&&(clickTimeout&&clearTimeout(clickTimeout),s.emit("onDoubleTap",s,e))),lastClickTime=Date.now(),setTimeout(function(){s&&(s.allowClick=!0)},0),isTouched&&isMoved&&s.swipeDirection&&0!==s.touches.diff&&currentTranslate!==startTranslate){isTouched=isMoved=!1;var currentPos;if(currentPos=s.params.followFinger?s.rtl?s.translate:-s.translate:-currentTranslate,s.params.freeMode){if(currentPos<-s.minTranslate())return void s.slideTo(s.activeIndex);if(currentPos>-s.maxTranslate())return void(s.slides.length<s.snapGrid.length?s.slideTo(s.snapGrid.length-1):s.slideTo(s.slides.length-1));if(s.params.freeModeMomentum){if(velocities.length>1){var lastMoveEvent=velocities.pop(),velocityEvent=velocities.pop(),distance=lastMoveEvent.position-velocityEvent.position,time=lastMoveEvent.time-velocityEvent.time;s.velocity=distance/time,s.velocity=s.velocity/2,Math.abs(s.velocity)<s.params.freeModeMinimumVelocity&&(s.velocity=0),(time>150||(new window.Date).getTime()-lastMoveEvent.time>300)&&(s.velocity=0)}else s.velocity=0;velocities.length=0;var momentumDuration=1e3*s.params.freeModeMomentumRatio,momentumDistance=s.velocity*momentumDuration,newPosition=s.translate+momentumDistance;s.rtl&&(newPosition=-newPosition);var afterBouncePosition,doBounce=!1,bounceAmount=20*Math.abs(s.velocity)*s.params.freeModeMomentumBounceRatio;if(newPosition<s.maxTranslate())s.params.freeModeMomentumBounce?(newPosition+s.maxTranslate()<-bounceAmount&&(newPosition=s.maxTranslate()-bounceAmount),afterBouncePosition=s.maxTranslate(),doBounce=!0,allowMomentumBounce=!0):newPosition=s.maxTranslate();else if(newPosition>s.minTranslate())s.params.freeModeMomentumBounce?(newPosition-s.minTranslate()>bounceAmount&&(newPosition=s.minTranslate()+bounceAmount),afterBouncePosition=s.minTranslate(),doBounce=!0,allowMomentumBounce=!0):newPosition=s.minTranslate();else if(s.params.freeModeSticky){var nextSlide,j=0;for(j=0;j<s.snapGrid.length;j+=1)if(s.snapGrid[j]>-newPosition){nextSlide=j;break}newPosition=Math.abs(s.snapGrid[nextSlide]-newPosition)<Math.abs(s.snapGrid[nextSlide-1]-newPosition)||"next"===s.swipeDirection?s.snapGrid[nextSlide]:s.snapGrid[nextSlide-1],s.rtl||(newPosition=-newPosition)}if(0!==s.velocity)momentumDuration=s.rtl?Math.abs((-newPosition-s.translate)/s.velocity):Math.abs((newPosition-s.translate)/s.velocity);else if(s.params.freeModeSticky)return void s.slideReset();s.params.freeModeMomentumBounce&&doBounce?(s.updateProgress(afterBouncePosition),s.setWrapperTransition(momentumDuration),s.setWrapperTranslate(newPosition),s.onTransitionStart(),s.animating=!0,s.wrapper.transitionEnd(function(){s&&allowMomentumBounce&&(s.emit("onMomentumBounce",s),s.setWrapperTransition(s.params.speed),s.setWrapperTranslate(afterBouncePosition),s.wrapper.transitionEnd(function(){s&&s.onTransitionEnd()}))})):s.velocity?(s.updateProgress(newPosition),s.setWrapperTransition(momentumDuration),s.setWrapperTranslate(newPosition),s.onTransitionStart(),s.animating||(s.animating=!0,s.wrapper.transitionEnd(function(){s&&s.onTransitionEnd()}))):s.updateProgress(newPosition),s.updateActiveIndex()}(!s.params.freeModeMomentum||timeDiff>=s.params.longSwipesMs)&&(s.updateProgress(),s.updateActiveIndex())}else{var i,stopIndex=0,groupSize=s.slidesSizesGrid[0];for(i=0;i<s.slidesGrid.length;i+=s.params.slidesPerGroup)void 0!==s.slidesGrid[i+s.params.slidesPerGroup]?currentPos>=s.slidesGrid[i]&&currentPos<s.slidesGrid[i+s.params.slidesPerGroup]&&(stopIndex=i,groupSize=s.slidesGrid[i+s.params.slidesPerGroup]-s.slidesGrid[i]):currentPos>=s.slidesGrid[i]&&(stopIndex=i,groupSize=s.slidesGrid[s.slidesGrid.length-1]-s.slidesGrid[s.slidesGrid.length-2]);var ratio=(currentPos-s.slidesGrid[stopIndex])/groupSize;if(timeDiff>s.params.longSwipesMs){if(!s.params.longSwipes)return void s.slideTo(s.activeIndex);"next"===s.swipeDirection&&(ratio>=s.params.longSwipesRatio?s.slideTo(stopIndex+s.params.slidesPerGroup):s.slideTo(stopIndex)),"prev"===s.swipeDirection&&(ratio>1-s.params.longSwipesRatio?s.slideTo(stopIndex+s.params.slidesPerGroup):s.slideTo(stopIndex))}else{if(!s.params.shortSwipes)return void s.slideTo(s.activeIndex);"next"===s.swipeDirection&&s.slideTo(stopIndex+s.params.slidesPerGroup),"prev"===s.swipeDirection&&s.slideTo(stopIndex)}}}else isTouched=isMoved=!1}},s._slideTo=function(slideIndex,speed){return s.slideTo(slideIndex,speed,!0,!0)},s.slideTo=function(slideIndex,speed,runCallbacks,internal){void 0===runCallbacks&&(runCallbacks=!0),void 0===slideIndex&&(slideIndex=0),slideIndex<0&&(slideIndex=0),s.snapIndex=Math.floor(slideIndex/s.params.slidesPerGroup),s.snapIndex>=s.snapGrid.length&&(s.snapIndex=s.snapGrid.length-1);var translate=-s.snapGrid[s.snapIndex];s.params.autoplay&&s.autoplaying&&(internal||!s.params.autoplayDisableOnInteraction?s.pauseAutoplay(speed):s.stopAutoplay()),s.updateProgress(translate);for(var i=0;i<s.slidesGrid.length;i++)-Math.floor(100*translate)>=Math.floor(100*s.slidesGrid[i])&&(slideIndex=i);return!(!s.params.allowSwipeToNext&&translate<s.translate&&translate<s.minTranslate())&&(!(!s.params.allowSwipeToPrev&&translate>s.translate&&translate>s.maxTranslate()&&(s.activeIndex||0)!==slideIndex)&&(void 0===speed&&(speed=s.params.speed),s.previousIndex=s.activeIndex||0,s.activeIndex=slideIndex,s.rtl&&-translate===s.translate||!s.rtl&&translate===s.translate?(s.params.autoHeight&&s.updateAutoHeight(),s.updateClasses(),"slide"!==s.params.effect&&s.setWrapperTranslate(translate),!1):(s.updateClasses(),s.onTransitionStart(runCallbacks),0===speed?(s.setWrapperTranslate(translate),s.setWrapperTransition(0),s.onTransitionEnd(runCallbacks)):(s.setWrapperTranslate(translate),s.setWrapperTransition(speed),s.animating||(s.animating=!0,s.wrapper.transitionEnd(function(){s&&s.onTransitionEnd(runCallbacks)}))),!0)))},s.onTransitionStart=function(runCallbacks){void 0===runCallbacks&&(runCallbacks=!0),s.params.autoHeight&&s.updateAutoHeight(),s.lazy&&s.lazy.onTransitionStart(),runCallbacks&&(s.emit("onTransitionStart",s),s.activeIndex!==s.previousIndex&&(s.emit("onSlideChangeStart",s),_scope.$emit("$ionicSlides.slideChangeStart",{slider:s,activeIndex:s.getSlideDataIndex(s.activeIndex),previousIndex:s.getSlideDataIndex(s.previousIndex)}),s.activeIndex>s.previousIndex?s.emit("onSlideNextStart",s):s.emit("onSlidePrevStart",s)))},s.onTransitionEnd=function(runCallbacks){s.animating=!1,s.setWrapperTransition(0),void 0===runCallbacks&&(runCallbacks=!0),s.lazy&&s.lazy.onTransitionEnd(),runCallbacks&&(s.emit("onTransitionEnd",s),s.activeIndex!==s.previousIndex&&(s.emit("onSlideChangeEnd",s),_scope.$emit("$ionicSlides.slideChangeEnd",{slider:s,activeIndex:s.getSlideDataIndex(s.activeIndex),previousIndex:s.getSlideDataIndex(s.previousIndex)}),s.activeIndex>s.previousIndex?s.emit("onSlideNextEnd",s):s.emit("onSlidePrevEnd",s))),s.params.hashnav&&s.hashnav&&s.hashnav.setHash()},s.slideNext=function(runCallbacks,speed,internal){if(s.params.loop){if(s.animating)return!1;s.fixLoop();s.container[0].clientLeft;return s.slideTo(s.activeIndex+s.params.slidesPerGroup,speed,runCallbacks,internal)}return s.slideTo(s.activeIndex+s.params.slidesPerGroup,speed,runCallbacks,internal)},s._slideNext=function(speed){return s.slideNext(!0,speed,!0)},s.slidePrev=function(runCallbacks,speed,internal){if(s.params.loop){if(s.animating)return!1;s.fixLoop();s.container[0].clientLeft;return s.slideTo(s.activeIndex-1,speed,runCallbacks,internal)}return s.slideTo(s.activeIndex-1,speed,runCallbacks,internal)},s._slidePrev=function(speed){return s.slidePrev(!0,speed,!0)},s.slideReset=function(runCallbacks,speed,internal){return s.slideTo(s.activeIndex,speed,runCallbacks)},s.setWrapperTransition=function(duration,byController){s.wrapper.transition(duration),"slide"!==s.params.effect&&s.effects[s.params.effect]&&s.effects[s.params.effect].setTransition(duration),s.params.parallax&&s.parallax&&s.parallax.setTransition(duration),s.params.scrollbar&&s.scrollbar&&s.scrollbar.setTransition(duration),s.params.control&&s.controller&&s.controller.setTransition(duration,byController),s.emit("onSetTransition",s,duration)},s.setWrapperTranslate=function(translate,updateActiveIndex,byController){var x=0,y=0;isH()?x=s.rtl?-translate:translate:y=translate,s.params.roundLengths&&(x=round(x),y=round(y)),s.params.virtualTranslate||(s.support.transforms3d?s.wrapper.transform("translate3d("+x+"px, "+y+"px, 0px)"):s.wrapper.transform("translate("+x+"px, "+y+"px)")),s.translate=isH()?x:y;var translatesDiff=s.maxTranslate()-s.minTranslate();(0===translatesDiff?0:(translate-s.minTranslate())/translatesDiff)!==s.progress&&s.updateProgress(translate),updateActiveIndex&&s.updateActiveIndex(),"slide"!==s.params.effect&&s.effects[s.params.effect]&&s.effects[s.params.effect].setTranslate(s.translate),s.params.parallax&&s.parallax&&s.parallax.setTranslate(s.translate),s.params.scrollbar&&s.scrollbar&&s.scrollbar.setTranslate(s.translate),s.params.control&&s.controller&&s.controller.setTranslate(s.translate,byController),s.emit("onSetTranslate",s,s.translate)},s.getTranslate=function(el,axis){var matrix,curTransform,curStyle,transformMatrix;return void 0===axis&&(axis="x"),s.params.virtualTranslate?s.rtl?-s.translate:s.translate:(curStyle=window.getComputedStyle(el,null),window.WebKitCSSMatrix?((curTransform=curStyle.transform||curStyle.webkitTransform).split(",").length>6&&(curTransform=curTransform.split(", ").map(function(a){return a.replace(",",".")}).join(", ")),transformMatrix=new window.WebKitCSSMatrix("none"===curTransform?"":curTransform)):matrix=(transformMatrix=curStyle.MozTransform||curStyle.OTransform||curStyle.MsTransform||curStyle.msTransform||curStyle.transform||curStyle.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===axis&&(curTransform=window.WebKitCSSMatrix?transformMatrix.m41:16===matrix.length?parseFloat(matrix[12]):parseFloat(matrix[4])),"y"===axis&&(curTransform=window.WebKitCSSMatrix?transformMatrix.m42:16===matrix.length?parseFloat(matrix[13]):parseFloat(matrix[5])),s.rtl&&curTransform&&(curTransform=-curTransform),curTransform||0)},s.getWrapperTranslate=function(axis){return void 0===axis&&(axis=isH()?"x":"y"),s.getTranslate(s.wrapper[0],axis)},s.observers=[],s.initObservers=function(){if(s.params.observeParents)for(var containerParents=s.container.parents(),i=0;i<containerParents.length;i++)initObserver(containerParents[i]);initObserver(s.container[0],{childList:!1}),initObserver(s.wrapper[0],{attributes:!1})},s.disconnectObservers=function(){for(var i=0;i<s.observers.length;i++)s.observers[i].disconnect();s.observers=[]},s.updateLoop=function(){var currentSlide=s.slides.eq(s.activeIndex);if(angular.element(currentSlide).hasClass(s.params.slideDuplicateClass)){for(var swiperSlideIndex=angular.element(currentSlide).attr("data-swiper-slide-index"),slides=s.wrapper.children("."+s.params.slideClass),i=0;i<slides.length;i++)if(!angular.element(slides[i]).hasClass(s.params.slideDuplicateClass)&&angular.element(slides[i]).attr("data-swiper-slide-index")===swiperSlideIndex){s.slideTo(i,0,!1,!0);break}setTimeout(function(){s.createLoop()},50)}},s.getSlideDataIndex=function(slideIndex){var slide=s.slides.eq(slideIndex),attributeIndex=angular.element(slide).attr("data-swiper-slide-index");return parseInt(attributeIndex)},s.createLoop=function(){s.wrapper.children("."+s.params.slideClass+"."+s.params.slideDuplicateClass).remove();var slides=s.wrapper.children("."+s.params.slideClass);"auto"!==s.params.slidesPerView||s.params.loopedSlides||(s.params.loopedSlides=slides.length),s.loopedSlides=parseInt(s.params.loopedSlides||s.params.slidesPerView,10),s.loopedSlides=s.loopedSlides+s.params.loopAdditionalSlides,s.loopedSlides>slides.length&&(s.loopedSlides=slides.length);var i,scope,newNode,prependSlides=[],appendSlides=[];for(slides.each(function(index,el){var slide=$(this);index<s.loopedSlides&&appendSlides.push(el),index<slides.length&&index>=slides.length-s.loopedSlides&&prependSlides.push(el),slide.attr("data-swiper-slide-index",index)}),i=0;i<appendSlides.length;i++)(newNode=angular.element(appendSlides[i]).clone().addClass(s.params.slideDuplicateClass)).removeAttr("ng-transclude"),newNode.removeAttr("ng-repeat"),scope=angular.element(appendSlides[i]).scope(),newNode=$compile(newNode)(scope),angular.element(s.wrapper).append(newNode);for(i=prependSlides.length-1;i>=0;i--)(newNode=angular.element(prependSlides[i]).clone().addClass(s.params.slideDuplicateClass)).removeAttr("ng-transclude"),newNode.removeAttr("ng-repeat"),scope=angular.element(prependSlides[i]).scope(),newNode=$compile(newNode)(scope),angular.element(s.wrapper).prepend(newNode)},s.destroyLoop=function(){s.wrapper.children("."+s.params.slideClass+"."+s.params.slideDuplicateClass).remove(),s.slides.removeAttr("data-swiper-slide-index")},s.fixLoop=function(){var newIndex;s.activeIndex<s.loopedSlides?(newIndex=s.slides.length-3*s.loopedSlides+s.activeIndex,newIndex+=s.loopedSlides,s.slideTo(newIndex,0,!1,!0)):("auto"===s.params.slidesPerView&&s.activeIndex>=2*s.loopedSlides||s.activeIndex>s.slides.length-2*s.params.slidesPerView)&&(newIndex=-s.slides.length+s.activeIndex+s.loopedSlides,newIndex+=s.loopedSlides,s.slideTo(newIndex,0,!1,!0))},s.appendSlide=function(slides){if(s.params.loop&&s.destroyLoop(),"object"==typeof slides&&slides.length)for(var i=0;i<slides.length;i++)slides[i]&&s.wrapper.append(slides[i]);else s.wrapper.append(slides);s.params.loop&&s.createLoop(),s.params.observer&&s.support.observer||s.update(!0)},s.prependSlide=function(slides){s.params.loop&&s.destroyLoop();var newActiveIndex=s.activeIndex+1;if("object"==typeof slides&&slides.length){for(var i=0;i<slides.length;i++)slides[i]&&s.wrapper.prepend(slides[i]);newActiveIndex=s.activeIndex+slides.length}else s.wrapper.prepend(slides);s.params.loop&&s.createLoop(),s.params.observer&&s.support.observer||s.update(!0),s.slideTo(newActiveIndex,0,!1)},s.removeSlide=function(slidesIndexes){s.params.loop&&(s.destroyLoop(),s.slides=s.wrapper.children("."+s.params.slideClass));var indexToRemove,newActiveIndex=s.activeIndex;if("object"==typeof slidesIndexes&&slidesIndexes.length){for(var i=0;i<slidesIndexes.length;i++)indexToRemove=slidesIndexes[i],s.slides[indexToRemove]&&s.slides.eq(indexToRemove).remove(),indexToRemove<newActiveIndex&&newActiveIndex--;newActiveIndex=Math.max(newActiveIndex,0)}else indexToRemove=slidesIndexes,s.slides[indexToRemove]&&s.slides.eq(indexToRemove).remove(),indexToRemove<newActiveIndex&&newActiveIndex--,newActiveIndex=Math.max(newActiveIndex,0);s.params.loop&&s.createLoop(),s.params.observer&&s.support.observer||s.update(!0),s.params.loop?s.slideTo(newActiveIndex+s.loopedSlides,0,!1):s.slideTo(newActiveIndex,0,!1)},s.removeAllSlides=function(){for(var slidesIndexes=[],i=0;i<s.slides.length;i++)slidesIndexes.push(i);s.removeSlide(slidesIndexes)},s.effects={fade:{setTranslate:function(){for(var i=0;i<s.slides.length;i++){var slide=s.slides.eq(i),tx=-slide[0].swiperSlideOffset;s.params.virtualTranslate||(tx-=s.translate);var ty=0;isH()||(ty=tx,tx=0);var slideOpacity=s.params.fade.crossFade?Math.max(1-Math.abs(slide[0].progress),0):1+Math.min(Math.max(slide[0].progress,-1),0);slide.css({opacity:slideOpacity}).transform("translate3d("+tx+"px, "+ty+"px, 0px)")}},setTransition:function(duration){if(s.slides.transition(duration),s.params.virtualTranslate&&0!==duration){var eventTriggered=!1;s.slides.transitionEnd(function(){if(!eventTriggered&&s){eventTriggered=!0,s.animating=!1;for(var triggerEvents=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=0;i<triggerEvents.length;i++)s.wrapper.trigger(triggerEvents[i])}})}}},cube:{setTranslate:function(){var cubeShadow,wrapperRotate=0;s.params.cube.shadow&&(isH()?(0===(cubeShadow=s.wrapper.find(".swiper-cube-shadow")).length&&(cubeShadow=$('<div class="swiper-cube-shadow"></div>'),s.wrapper.append(cubeShadow)),cubeShadow.css({height:s.width+"px"})):0===(cubeShadow=s.container.find(".swiper-cube-shadow")).length&&(cubeShadow=$('<div class="swiper-cube-shadow"></div>'),s.container.append(cubeShadow)));for(var i=0;i<s.slides.length;i++){var slide=s.slides.eq(i),slideAngle=90*i,round=Math.floor(slideAngle/360);s.rtl&&(slideAngle=-slideAngle,round=Math.floor(-slideAngle/360));var progress=Math.max(Math.min(slide[0].progress,1),-1),tx=0,ty=0,tz=0;i%4==0?(tx=4*-round*s.size,tz=0):(i-1)%4==0?(tx=0,tz=4*-round*s.size):(i-2)%4==0?(tx=s.size+4*round*s.size,tz=s.size):(i-3)%4==0&&(tx=-s.size,tz=3*s.size+4*s.size*round),s.rtl&&(tx=-tx),isH()||(ty=tx,tx=0);var transform="rotateX("+(isH()?0:-slideAngle)+"deg) rotateY("+(isH()?slideAngle:0)+"deg) translate3d("+tx+"px, "+ty+"px, "+tz+"px)";if(progress<=1&&progress>-1&&(wrapperRotate=90*i+90*progress,s.rtl&&(wrapperRotate=90*-i-90*progress)),slide.transform(transform),s.params.cube.slideShadows){var shadowBefore=isH()?slide.find(".swiper-slide-shadow-left"):slide.find(".swiper-slide-shadow-top"),shadowAfter=isH()?slide.find(".swiper-slide-shadow-right"):slide.find(".swiper-slide-shadow-bottom");0===shadowBefore.length&&(shadowBefore=$('<div class="swiper-slide-shadow-'+(isH()?"left":"top")+'"></div>'),slide.append(shadowBefore)),0===shadowAfter.length&&(shadowAfter=$('<div class="swiper-slide-shadow-'+(isH()?"right":"bottom")+'"></div>'),slide.append(shadowAfter));slide[0].progress;shadowBefore.length&&(shadowBefore[0].style.opacity=-slide[0].progress),shadowAfter.length&&(shadowAfter[0].style.opacity=slide[0].progress)}}if(s.wrapper.css({"-webkit-transform-origin":"50% 50% -"+s.size/2+"px","-moz-transform-origin":"50% 50% -"+s.size/2+"px","-ms-transform-origin":"50% 50% -"+s.size/2+"px","transform-origin":"50% 50% -"+s.size/2+"px"}),s.params.cube.shadow)if(isH())cubeShadow.transform("translate3d(0px, "+(s.width/2+s.params.cube.shadowOffset)+"px, "+-s.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+s.params.cube.shadowScale+")");else{var shadowAngle=Math.abs(wrapperRotate)-90*Math.floor(Math.abs(wrapperRotate)/90),multiplier=1.5-(Math.sin(2*shadowAngle*Math.PI/360)/2+Math.cos(2*shadowAngle*Math.PI/360)/2),scale1=s.params.cube.shadowScale,scale2=s.params.cube.shadowScale/multiplier,offset=s.params.cube.shadowOffset;cubeShadow.transform("scale3d("+scale1+", 1, "+scale2+") translate3d(0px, "+(s.height/2+offset)+"px, "+-s.height/2/scale2+"px) rotateX(-90deg)")}var zFactor=s.isSafari||s.isUiWebView?-s.size/2:0;s.wrapper.transform("translate3d(0px,0,"+zFactor+"px) rotateX("+(isH()?0:wrapperRotate)+"deg) rotateY("+(isH()?-wrapperRotate:0)+"deg)")},setTransition:function(duration){s.slides.transition(duration).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(duration),s.params.cube.shadow&&!isH()&&s.container.find(".swiper-cube-shadow").transition(duration)}},coverflow:{setTranslate:function(){for(var transform=s.translate,center=isH()?-transform+s.width/2:-transform+s.height/2,rotate=isH()?s.params.coverflow.rotate:-s.params.coverflow.rotate,translate=s.params.coverflow.depth,i=0,length=s.slides.length;i<length;i++){var slide=s.slides.eq(i),slideSize=s.slidesSizesGrid[i],offsetMultiplier=(center-slide[0].swiperSlideOffset-slideSize/2)/slideSize*s.params.coverflow.modifier,rotateY=isH()?rotate*offsetMultiplier:0,rotateX=isH()?0:rotate*offsetMultiplier,translateZ=-translate*Math.abs(offsetMultiplier),translateY=isH()?0:s.params.coverflow.stretch*offsetMultiplier,translateX=isH()?s.params.coverflow.stretch*offsetMultiplier:0;Math.abs(translateX)<.001&&(translateX=0),Math.abs(translateY)<.001&&(translateY=0),Math.abs(translateZ)<.001&&(translateZ=0),Math.abs(rotateY)<.001&&(rotateY=0),Math.abs(rotateX)<.001&&(rotateX=0);var slideTransform="translate3d("+translateX+"px,"+translateY+"px,"+translateZ+"px)  rotateX("+rotateX+"deg) rotateY("+rotateY+"deg)";if(slide.transform(slideTransform),slide[0].style.zIndex=1-Math.abs(Math.round(offsetMultiplier)),s.params.coverflow.slideShadows){var shadowBefore=isH()?slide.find(".swiper-slide-shadow-left"):slide.find(".swiper-slide-shadow-top"),shadowAfter=isH()?slide.find(".swiper-slide-shadow-right"):slide.find(".swiper-slide-shadow-bottom");0===shadowBefore.length&&(shadowBefore=$('<div class="swiper-slide-shadow-'+(isH()?"left":"top")+'"></div>'),slide.append(shadowBefore)),0===shadowAfter.length&&(shadowAfter=$('<div class="swiper-slide-shadow-'+(isH()?"right":"bottom")+'"></div>'),slide.append(shadowAfter)),shadowBefore.length&&(shadowBefore[0].style.opacity=offsetMultiplier>0?offsetMultiplier:0),shadowAfter.length&&(shadowAfter[0].style.opacity=-offsetMultiplier>0?-offsetMultiplier:0)}}s.browser.ie&&(s.wrapper[0].style.perspectiveOrigin=center+"px 50%")},setTransition:function(duration){s.slides.transition(duration).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(duration)}}},s.lazy={initialImageLoaded:!1,loadImageInSlide:function(index,loadInDuplicate){if(void 0!==index&&(void 0===loadInDuplicate&&(loadInDuplicate=!0),0!==s.slides.length)){var slide=s.slides.eq(index),img=slide.find(".swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)");!slide.hasClass("swiper-lazy")||slide.hasClass("swiper-lazy-loaded")||slide.hasClass("swiper-lazy-loading")||(img=img.add(slide[0])),0!==img.length&&img.each(function(){var _img=$(this);_img.addClass("swiper-lazy-loading");var background=_img.attr("data-background"),src=_img.attr("data-src"),srcset=_img.attr("data-srcset");s.loadImage(_img[0],src||background,srcset,!1,function(){if(background?(_img.css("background-image","url("+background+")"),_img.removeAttr("data-background")):(srcset&&(_img.attr("srcset",srcset),_img.removeAttr("data-srcset")),src&&(_img.attr("src",src),_img.removeAttr("data-src"))),_img.addClass("swiper-lazy-loaded").removeClass("swiper-lazy-loading"),slide.find(".swiper-lazy-preloader, .preloader").remove(),s.params.loop&&loadInDuplicate){var slideOriginalIndex=slide.attr("data-swiper-slide-index");if(slide.hasClass(s.params.slideDuplicateClass)){var originalSlide=s.wrapper.children('[data-swiper-slide-index="'+slideOriginalIndex+'"]:not(.'+s.params.slideDuplicateClass+")");s.lazy.loadImageInSlide(originalSlide.index(),!1)}else{var duplicatedSlide=s.wrapper.children("."+s.params.slideDuplicateClass+'[data-swiper-slide-index="'+slideOriginalIndex+'"]');s.lazy.loadImageInSlide(duplicatedSlide.index(),!1)}}s.emit("onLazyImageReady",s,slide[0],_img[0])}),s.emit("onLazyImageLoad",s,slide[0],_img[0])})}},load:function(){var i;if(s.params.watchSlidesVisibility)s.wrapper.children("."+s.params.slideVisibleClass).each(function(){s.lazy.loadImageInSlide($(this).index())});else if(s.params.slidesPerView>1)for(i=s.activeIndex;i<s.activeIndex+s.params.slidesPerView;i++)s.slides[i]&&s.lazy.loadImageInSlide(i);else s.lazy.loadImageInSlide(s.activeIndex);if(s.params.lazyLoadingInPrevNext)if(s.params.slidesPerView>1){for(i=s.activeIndex+s.params.slidesPerView;i<s.activeIndex+s.params.slidesPerView+s.params.slidesPerView;i++)s.slides[i]&&s.lazy.loadImageInSlide(i);for(i=s.activeIndex-s.params.slidesPerView;i<s.activeIndex;i++)s.slides[i]&&s.lazy.loadImageInSlide(i)}else{var nextSlide=s.wrapper.children("."+s.params.slideNextClass);nextSlide.length>0&&s.lazy.loadImageInSlide(nextSlide.index());var prevSlide=s.wrapper.children("."+s.params.slidePrevClass);prevSlide.length>0&&s.lazy.loadImageInSlide(prevSlide.index())}},onTransitionStart:function(){s.params.lazyLoading&&(s.params.lazyLoadingOnTransitionStart||!s.params.lazyLoadingOnTransitionStart&&!s.lazy.initialImageLoaded)&&s.lazy.load()},onTransitionEnd:function(){s.params.lazyLoading&&!s.params.lazyLoadingOnTransitionStart&&s.lazy.load()}},s.scrollbar={isTouched:!1,setDragPosition:function(e){var sb=s.scrollbar,position=(isH()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY)-sb.track.offset()[isH()?"left":"top"]-sb.dragSize/2,positionMin=-s.minTranslate()*sb.moveDivider,positionMax=-s.maxTranslate()*sb.moveDivider;position<positionMin?position=positionMin:position>positionMax&&(position=positionMax),position=-position/sb.moveDivider,s.updateProgress(position),s.setWrapperTranslate(position,!0)},dragStart:function(e){var sb=s.scrollbar;sb.isTouched=!0,e.preventDefault(),e.stopPropagation(),sb.setDragPosition(e),clearTimeout(sb.dragTimeout),sb.track.transition(0),s.params.scrollbarHide&&sb.track.css("opacity",1),s.wrapper.transition(100),sb.drag.transition(100),s.emit("onScrollbarDragStart",s)},dragMove:function(e){var sb=s.scrollbar;sb.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,sb.setDragPosition(e),s.wrapper.transition(0),sb.track.transition(0),sb.drag.transition(0),s.emit("onScrollbarDragMove",s))},dragEnd:function(e){var sb=s.scrollbar;sb.isTouched&&(sb.isTouched=!1,s.params.scrollbarHide&&(clearTimeout(sb.dragTimeout),sb.dragTimeout=setTimeout(function(){sb.track.css("opacity",0),sb.track.transition(400)},1e3)),s.emit("onScrollbarDragEnd",s),s.params.scrollbarSnapOnRelease&&s.slideReset())},enableDraggable:function(){var sb=s.scrollbar,target=s.support.touch?sb.track:document;$(sb.track).on(s.touchEvents.start,sb.dragStart),$(target).on(s.touchEvents.move,sb.dragMove),$(target).on(s.touchEvents.end,sb.dragEnd)},disableDraggable:function(){var sb=s.scrollbar,target=s.support.touch?sb.track:document;$(sb.track).off(s.touchEvents.start,sb.dragStart),$(target).off(s.touchEvents.move,sb.dragMove),$(target).off(s.touchEvents.end,sb.dragEnd)},set:function(){if(s.params.scrollbar){var sb=s.scrollbar;sb.track=$(s.params.scrollbar),sb.drag=sb.track.find(".swiper-scrollbar-drag"),0===sb.drag.length&&(sb.drag=$('<div class="swiper-scrollbar-drag"></div>'),sb.track.append(sb.drag)),sb.drag[0].style.width="",sb.drag[0].style.height="",sb.trackSize=isH()?sb.track[0].offsetWidth:sb.track[0].offsetHeight,sb.divider=s.size/s.virtualSize,sb.moveDivider=sb.divider*(sb.trackSize/s.size),sb.dragSize=sb.trackSize*sb.divider,isH()?sb.drag[0].style.width=sb.dragSize+"px":sb.drag[0].style.height=sb.dragSize+"px",sb.divider>=1?sb.track[0].style.display="none":sb.track[0].style.display="",s.params.scrollbarHide&&(sb.track[0].style.opacity=0)}},setTranslate:function(){if(s.params.scrollbar){var newPos,sb=s.scrollbar,newSize=(s.translate,sb.dragSize);newPos=(sb.trackSize-sb.dragSize)*s.progress,s.rtl&&isH()?(newPos=-newPos)>0?(newSize=sb.dragSize-newPos,newPos=0):-newPos+sb.dragSize>sb.trackSize&&(newSize=sb.trackSize+newPos):newPos<0?(newSize=sb.dragSize+newPos,newPos=0):newPos+sb.dragSize>sb.trackSize&&(newSize=sb.trackSize-newPos),isH()?(s.support.transforms3d?sb.drag.transform("translate3d("+newPos+"px, 0, 0)"):sb.drag.transform("translateX("+newPos+"px)"),sb.drag[0].style.width=newSize+"px"):(s.support.transforms3d?sb.drag.transform("translate3d(0px, "+newPos+"px, 0)"):sb.drag.transform("translateY("+newPos+"px)"),sb.drag[0].style.height=newSize+"px"),s.params.scrollbarHide&&(clearTimeout(sb.timeout),sb.track[0].style.opacity=1,sb.timeout=setTimeout(function(){sb.track[0].style.opacity=0,sb.track.transition(400)},1e3))}},setTransition:function(duration){s.params.scrollbar&&s.scrollbar.drag.transition(duration)}},s.controller={LinearSpline:function(x,y){this.x=x,this.y=y,this.lastIndex=x.length-1;var i1,i3;this.x.length;this.interpolate=function(x2){return x2?(i3=binarySearch(this.x,x2),i1=i3-1,(x2-this.x[i1])*(this.y[i3]-this.y[i1])/(this.x[i3]-this.x[i1])+this.y[i1]):0};var binarySearch=function(){var maxIndex,minIndex,guess;return function(array,val){for(minIndex=-1,maxIndex=array.length;maxIndex-minIndex>1;)array[guess=maxIndex+minIndex>>1]<=val?minIndex=guess:maxIndex=guess;return maxIndex}}()},getInterpolateFunction:function(c){s.controller.spline||(s.controller.spline=s.params.loop?new s.controller.LinearSpline(s.slidesGrid,c.slidesGrid):new s.controller.LinearSpline(s.snapGrid,c.snapGrid))},setTranslate:function(translate,byController){function setControlledTranslate(c){translate=c.rtl&&"horizontal"===c.params.direction?-s.translate:s.translate,"slide"===s.params.controlBy&&(s.controller.getInterpolateFunction(c),controlledTranslate=-s.controller.spline.interpolate(-translate)),controlledTranslate&&"container"!==s.params.controlBy||(multiplier=(c.maxTranslate()-c.minTranslate())/(s.maxTranslate()-s.minTranslate()),controlledTranslate=(translate-s.minTranslate())*multiplier+c.minTranslate()),s.params.controlInverse&&(controlledTranslate=c.maxTranslate()-controlledTranslate),c.updateProgress(controlledTranslate),c.setWrapperTranslate(controlledTranslate,!1,s),c.updateActiveIndex()}var multiplier,controlledTranslate,controlled=s.params.control;if(s.isArray(controlled))for(var i=0;i<controlled.length;i++)controlled[i]!==byController&&controlled[i]instanceof Swiper&&setControlledTranslate(controlled[i]);else controlled instanceof Swiper&&byController!==controlled&&setControlledTranslate(controlled)},setTransition:function(duration,byController){function setControlledTransition(c){c.setWrapperTransition(duration,s),0!==duration&&(c.onTransitionStart(),c.wrapper.transitionEnd(function(){controlled&&(c.params.loop&&"slide"===s.params.controlBy&&c.fixLoop(),c.onTransitionEnd())}))}var i,controlled=s.params.control;if(s.isArray(controlled))for(i=0;i<controlled.length;i++)controlled[i]!==byController&&controlled[i]instanceof Swiper&&setControlledTransition(controlled[i]);else controlled instanceof Swiper&&byController!==controlled&&setControlledTransition(controlled)}},s.hashnav={init:function(){if(s.params.hashnav){s.hashnav.initialized=!0;var hash=document.location.hash.replace("#","");if(hash)for(var i=0,length=s.slides.length;i<length;i++){var slide=s.slides.eq(i);if(slide.attr("data-hash")===hash&&!slide.hasClass(s.params.slideDuplicateClass)){var index=slide.index();s.slideTo(index,0,s.params.runCallbacksOnInit,!0)}}}},setHash:function(){s.hashnav.initialized&&s.params.hashnav&&(document.location.hash=s.slides.eq(s.activeIndex).attr("data-hash")||"")}},s.disableKeyboardControl=function(){s.params.keyboardControl=!1,$(document).off("keydown",handleKeyboard)},s.enableKeyboardControl=function(){s.params.keyboardControl=!0,$(document).on("keydown",handleKeyboard)},s.mousewheel={event:!1,lastScrollTime:(new window.Date).getTime()},s.params.mousewheelControl){try{new window.WheelEvent("wheel"),s.mousewheel.event="wheel"}catch(e){}s.mousewheel.event||void 0===document.onmousewheel||(s.mousewheel.event="mousewheel"),s.mousewheel.event||(s.mousewheel.event="DOMMouseScroll")}s.disableMousewheelControl=function(){return!!s.mousewheel.event&&(s.container.off(s.mousewheel.event,handleMousewheel),!0)},s.enableMousewheelControl=function(){return!!s.mousewheel.event&&(s.container.on(s.mousewheel.event,handleMousewheel),!0)},s.parallax={setTranslate:function(){s.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){setParallaxTransform(this,s.progress)}),s.slides.each(function(){var slide=$(this);slide.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){setParallaxTransform(this,Math.min(Math.max(slide[0].progress,-1),1))})})},setTransition:function(duration){void 0===duration&&(duration=s.params.speed),s.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var el=$(this),parallaxDuration=parseInt(el.attr("data-swiper-parallax-duration"),10)||duration;0===duration&&(parallaxDuration=0),el.transition(parallaxDuration)})}},s._plugins=[];for(var plugin in s.plugins){var p=s.plugins[plugin](s,s.params[plugin]);p&&s._plugins.push(p)}return s.callPlugins=function(eventName){for(var i=0;i<s._plugins.length;i++)eventName in s._plugins[i]&&s._plugins[i][eventName](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},s.emitterEventListeners={},s.emit=function(eventName){s.params[eventName]&&s.params[eventName](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);var i;if(s.emitterEventListeners[eventName])for(i=0;i<s.emitterEventListeners[eventName].length;i++)s.emitterEventListeners[eventName][i](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);s.callPlugins&&s.callPlugins(eventName,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},s.on=function(eventName,handler){return eventName=normalizeEventName(eventName),s.emitterEventListeners[eventName]||(s.emitterEventListeners[eventName]=[]),s.emitterEventListeners[eventName].push(handler),s},s.off=function(eventName,handler){var i;if(eventName=normalizeEventName(eventName),void 0===handler)return s.emitterEventListeners[eventName]=[],s;if(s.emitterEventListeners[eventName]&&0!==s.emitterEventListeners[eventName].length){for(i=0;i<s.emitterEventListeners[eventName].length;i++)s.emitterEventListeners[eventName][i]===handler&&s.emitterEventListeners[eventName].splice(i,1);return s}},s.once=function(eventName,handler){eventName=normalizeEventName(eventName);var _handler=function(){handler(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),s.off(eventName,_handler)};return s.on(eventName,_handler),s},s.a11y={makeFocusable:function($el){return $el.attr("tabIndex","0"),$el},addRole:function($el,role){return $el.attr("role",role),$el},addLabel:function($el,label){return $el.attr("aria-label",label),$el},disable:function($el){return $el.attr("aria-disabled",!0),$el},enable:function($el){return $el.attr("aria-disabled",!1),$el},onEnterKey:function(event){13===event.keyCode&&($(event.target).is(s.params.nextButton)?(s.onClickNext(event),s.isEnd?s.a11y.notify(s.params.lastSlideMessage):s.a11y.notify(s.params.nextSlideMessage)):$(event.target).is(s.params.prevButton)&&(s.onClickPrev(event),s.isBeginning?s.a11y.notify(s.params.firstSlideMessage):s.a11y.notify(s.params.prevSlideMessage)),$(event.target).is("."+s.params.bulletClass)&&$(event.target)[0].click())},liveRegion:$('<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>'),notify:function(message){var notification=s.a11y.liveRegion;0!==notification.length&&(notification.html(""),notification.html(message))},init:function(){if(s.params.nextButton){var nextButton=$(s.params.nextButton);s.a11y.makeFocusable(nextButton),s.a11y.addRole(nextButton,"button"),s.a11y.addLabel(nextButton,s.params.nextSlideMessage)}if(s.params.prevButton){var prevButton=$(s.params.prevButton);s.a11y.makeFocusable(prevButton),s.a11y.addRole(prevButton,"button"),s.a11y.addLabel(prevButton,s.params.prevSlideMessage)}$(s.container).append(s.a11y.liveRegion)},initPagination:function(){s.params.pagination&&s.params.paginationClickable&&s.bullets&&s.bullets.length&&s.bullets.each(function(){var bullet=$(this);s.a11y.makeFocusable(bullet),s.a11y.addRole(bullet,"button"),s.a11y.addLabel(bullet,s.params.paginationBulletMessage.replace(/{{index}}/,bullet.index()+1))})},destroy:function(){s.a11y.liveRegion&&s.a11y.liveRegion.length>0&&s.a11y.liveRegion.remove()}},s.init=function(){s.params.loop&&s.createLoop(),s.updateContainerSize(),s.updateSlidesSize(),s.updatePagination(),s.params.scrollbar&&s.scrollbar&&(s.scrollbar.set(),s.params.scrollbarDraggable&&s.scrollbar.enableDraggable()),"slide"!==s.params.effect&&s.effects[s.params.effect]&&(s.params.loop||s.updateProgress(),s.effects[s.params.effect].setTranslate()),s.params.loop?s.slideTo(s.params.initialSlide+s.loopedSlides,0,s.params.runCallbacksOnInit):(s.slideTo(s.params.initialSlide,0,s.params.runCallbacksOnInit),0===s.params.initialSlide&&(s.parallax&&s.params.parallax&&s.parallax.setTranslate(),s.lazy&&s.params.lazyLoading&&(s.lazy.load(),s.lazy.initialImageLoaded=!0))),s.attachEvents(),s.params.observer&&s.support.observer&&s.initObservers(),s.params.preloadImages&&!s.params.lazyLoading&&s.preloadImages(),s.params.autoplay&&s.startAutoplay(),s.params.keyboardControl&&s.enableKeyboardControl&&s.enableKeyboardControl(),s.params.mousewheelControl&&s.enableMousewheelControl&&s.enableMousewheelControl(),s.params.hashnav&&s.hashnav&&s.hashnav.init(),s.params.a11y&&s.a11y&&s.a11y.init(),s.emit("onInit",s)},s.cleanupStyles=function(){s.container.removeClass(s.classNames.join(" ")).removeAttr("style"),s.wrapper.removeAttr("style"),s.slides&&s.slides.length&&s.slides.removeClass([s.params.slideVisibleClass,s.params.slideActiveClass,s.params.slideNextClass,s.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),s.paginationContainer&&s.paginationContainer.length&&s.paginationContainer.removeClass(s.params.paginationHiddenClass),s.bullets&&s.bullets.length&&s.bullets.removeClass(s.params.bulletActiveClass),s.params.prevButton&&$(s.params.prevButton).removeClass(s.params.buttonDisabledClass),s.params.nextButton&&$(s.params.nextButton).removeClass(s.params.buttonDisabledClass),s.params.scrollbar&&s.scrollbar&&(s.scrollbar.track&&s.scrollbar.track.length&&s.scrollbar.track.removeAttr("style"),s.scrollbar.drag&&s.scrollbar.drag.length&&s.scrollbar.drag.removeAttr("style"))},s.destroy=function(deleteInstance,cleanupStyles){s.detachEvents(),s.stopAutoplay(),s.params.scrollbar&&s.scrollbar&&s.params.scrollbarDraggable&&s.scrollbar.disableDraggable(),s.params.loop&&s.destroyLoop(),cleanupStyles&&s.cleanupStyles(),s.disconnectObservers(),s.params.keyboardControl&&s.disableKeyboardControl&&s.disableKeyboardControl(),s.params.mousewheelControl&&s.disableMousewheelControl&&s.disableMousewheelControl(),s.params.a11y&&s.a11y&&s.a11y.destroy(),s.emit("onDestroy"),!1!==deleteInstance&&(s=null)},s.init(),s}s.container.each(function(){new Swiper(this,params)})}};Swiper.prototype={isSafari:function(){var ua=navigator.userAgent.toLowerCase();return ua.indexOf("safari")>=0&&ua.indexOf("chrome")<0&&ua.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(arr){return"[object Array]"===Object.prototype.toString.apply(arr)},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1},device:function(){var ua=navigator.userAgent,android=ua.match(/(Android);?[\s\/]+([\d.]+)?/),ipad=ua.match(/(iPad).*OS\s([\d_]+)/),ipod=ua.match(/(iPod)(.*OS\s([\d_]+))?/),iphone=!ipad&&ua.match(/(iPhone\sOS)\s([\d_]+)/);return{ios:ipad||iphone||ipod,android:android}}(),support:{touch:window.Modernizr&&!0===Modernizr.touch||!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),transforms3d:window.Modernizr&&!0===Modernizr.csstransforms3d||function(){var div=document.createElement("div").style;return"webkitPerspective"in div||"MozPerspective"in div||"OPerspective"in div||"MsPerspective"in div||"perspective"in div}(),flexbox:function(){for(var div=document.createElement("div").style,styles="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),i=0;i<styles.length;i++)if(styles[i]in div)return!0}(),observer:"MutationObserver"in window||"WebkitMutationObserver"in window},plugins:{}};for(var Dom7=function(){var Dom7=function(arr){var _this=this,i=0;for(i=0;i<arr.length;i++)_this[i]=arr[i];return _this.length=arr.length,this},$=function(selector,context){var arr=[],i=0;if(selector&&!context&&selector instanceof Dom7)return selector;if(selector)if("string"==typeof selector){var els,tempParent,html=selector.trim();if(html.indexOf("<")>=0&&html.indexOf(">")>=0){var toCreate="div";for(0===html.indexOf("<li")&&(toCreate="ul"),0===html.indexOf("<tr")&&(toCreate="tbody"),0!==html.indexOf("<td")&&0!==html.indexOf("<th")||(toCreate="tr"),0===html.indexOf("<tbody")&&(toCreate="table"),0===html.indexOf("<option")&&(toCreate="select"),(tempParent=document.createElement(toCreate)).innerHTML=selector,i=0;i<tempParent.childNodes.length;i++)arr.push(tempParent.childNodes[i])}else for(els=context||"#"!==selector[0]||selector.match(/[ .<>:~]/)?(context||document).querySelectorAll(selector):[document.getElementById(selector.split("#")[1])],i=0;i<els.length;i++)els[i]&&arr.push(els[i])}else if(selector.nodeType||selector===window||selector===document)arr.push(selector);else if(selector.length>0&&selector[0].nodeType)for(i=0;i<selector.length;i++)arr.push(selector[i]);return new Dom7(arr)};return Dom7.prototype={addClass:function(className){if(void 0===className)return this;for(var classes=className.split(" "),i=0;i<classes.length;i++)for(var j=0;j<this.length;j++)this[j].classList.add(classes[i]);return this},removeClass:function(className){for(var classes=className.split(" "),i=0;i<classes.length;i++)for(var j=0;j<this.length;j++)this[j].classList.remove(classes[i]);return this},hasClass:function(className){return!!this[0]&&this[0].classList.contains(className)},toggleClass:function(className){for(var classes=className.split(" "),i=0;i<classes.length;i++)for(var j=0;j<this.length;j++)this[j].classList.toggle(classes[i]);return this},attr:function(attrs,value){if(1===arguments.length&&"string"==typeof attrs)return this[0]?this[0].getAttribute(attrs):void 0;for(var i=0;i<this.length;i++)if(2===arguments.length)this[i].setAttribute(attrs,value);else for(var attrName in attrs)this[i][attrName]=attrs[attrName],this[i].setAttribute(attrName,attrs[attrName]);return this},removeAttr:function(attr){for(var i=0;i<this.length;i++)this[i].removeAttribute(attr);return this},data:function(key,value){if(void 0!==value){for(var i=0;i<this.length;i++){var el=this[i];el.dom7ElementDataStorage||(el.dom7ElementDataStorage={}),el.dom7ElementDataStorage[key]=value}return this}if(this[0]){var dataKey=this[0].getAttribute("data-"+key);return dataKey||(this[0].dom7ElementDataStorage&&key in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[key]:void 0)}},transform:function(transform){for(var i=0;i<this.length;i++){var elStyle=this[i].style;elStyle.webkitTransform=elStyle.MsTransform=elStyle.msTransform=elStyle.MozTransform=elStyle.OTransform=elStyle.transform=transform}return this},transition:function(duration){"string"!=typeof duration&&(duration+="ms");for(var i=0;i<this.length;i++){var elStyle=this[i].style;elStyle.webkitTransitionDuration=elStyle.MsTransitionDuration=elStyle.msTransitionDuration=elStyle.MozTransitionDuration=elStyle.OTransitionDuration=elStyle.transitionDuration=duration}return this},on:function(eventName,targetSelector,listener,capture){function handleLiveEvent(e){var target=e.target;if($(target).is(targetSelector))listener.call(target,e);else for(var parents=$(target).parents(),k=0;k<parents.length;k++)$(parents[k]).is(targetSelector)&&listener.call(parents[k],e)}var i,j,events=eventName.split(" ");for(i=0;i<this.length;i++)if("function"==typeof targetSelector||!1===targetSelector)for("function"==typeof targetSelector&&(listener=arguments[1],capture=arguments[2]||!1),j=0;j<events.length;j++)this[i].addEventListener(events[j],listener,capture);else for(j=0;j<events.length;j++)this[i].dom7LiveListeners||(this[i].dom7LiveListeners=[]),this[i].dom7LiveListeners.push({listener:listener,liveListener:handleLiveEvent}),this[i].addEventListener(events[j],handleLiveEvent,capture);return this},off:function(eventName,targetSelector,listener,capture){for(var events=eventName.split(" "),i=0;i<events.length;i++)for(var j=0;j<this.length;j++)if("function"==typeof targetSelector||!1===targetSelector)"function"==typeof targetSelector&&(listener=arguments[1],capture=arguments[2]||!1),this[j].removeEventListener(events[i],listener,capture);else if(this[j].dom7LiveListeners)for(var k=0;k<this[j].dom7LiveListeners.length;k++)this[j].dom7LiveListeners[k].listener===listener&&this[j].removeEventListener(events[i],this[j].dom7LiveListeners[k].liveListener,capture);return this},once:function(eventName,targetSelector,listener,capture){function proxy(e){listener(e),dom.off(eventName,targetSelector,proxy,capture)}var dom=this;"function"==typeof targetSelector&&(targetSelector=!1,listener=arguments[1],capture=arguments[2]),dom.on(eventName,targetSelector,proxy,capture)},trigger:function(eventName,eventData){for(var i=0;i<this.length;i++){var evt;try{evt=new window.CustomEvent(eventName,{detail:eventData,bubbles:!0,cancelable:!0})}catch(e){(evt=document.createEvent("Event")).initEvent(eventName,!0,!0),evt.detail=eventData}this[i].dispatchEvent(evt)}return this},transitionEnd:function(callback){function fireCallBack(e){if(e.target===this)for(callback.call(this,e),i=0;i<events.length;i++)dom.off(events[i],fireCallBack)}var i,events=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],dom=this;if(callback)for(i=0;i<events.length;i++)dom.on(events[i],fireCallBack);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(includeMargins){return this.length>0?includeMargins?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(includeMargins){return this.length>0?includeMargins?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var el=this[0],box=el.getBoundingClientRect(),body=document.body,clientTop=el.clientTop||body.clientTop||0,clientLeft=el.clientLeft||body.clientLeft||0,scrollTop=window.pageYOffset||el.scrollTop,scrollLeft=window.pageXOffset||el.scrollLeft;return{top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-clientLeft}}return null},css:function(props,value){var i;if(1===arguments.length){if("string"!=typeof props){for(i=0;i<this.length;i++)for(var prop in props)this[i].style[prop]=props[prop];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(props)}if(2===arguments.length&&"string"==typeof props){for(i=0;i<this.length;i++)this[i].style[props]=value;return this}return this},each:function(callback){for(var i=0;i<this.length;i++)callback.call(this[i],i,this[i]);return this},html:function(html){if(void 0===html)return this[0]?this[0].innerHTML:void 0;for(var i=0;i<this.length;i++)this[i].innerHTML=html;return this},is:function(selector){if(!this[0])return!1;var compareWith,i;if("string"==typeof selector){var el=this[0];if(el===document)return selector===document;if(el===window)return selector===window;if(el.matches)return el.matches(selector);if(el.webkitMatchesSelector)return el.webkitMatchesSelector(selector);if(el.mozMatchesSelector)return el.mozMatchesSelector(selector);if(el.msMatchesSelector)return el.msMatchesSelector(selector);for(compareWith=$(selector),i=0;i<compareWith.length;i++)if(compareWith[i]===this[0])return!0;return!1}if(selector===document)return this[0]===document;if(selector===window)return this[0]===window;if(selector.nodeType||selector instanceof Dom7){for(compareWith=selector.nodeType?[selector]:selector,i=0;i<compareWith.length;i++)if(compareWith[i]===this[0])return!0;return!1}return!1},index:function(){if(this[0]){for(var child=this[0],i=0;null!==(child=child.previousSibling);)1===child.nodeType&&i++;return i}},eq:function(index){if(void 0===index)return this;var returnIndex,length=this.length;return index>length-1?new Dom7([]):index<0?(returnIndex=length+index,new Dom7(returnIndex<0?[]:[this[returnIndex]])):new Dom7([this[index]])},append:function(newChild){var i,j;for(i=0;i<this.length;i++)if("string"==typeof newChild){var tempDiv=document.createElement("div");for(tempDiv.innerHTML=newChild;tempDiv.firstChild;)this[i].appendChild(tempDiv.firstChild)}else if(newChild instanceof Dom7)for(j=0;j<newChild.length;j++)this[i].appendChild(newChild[j]);else this[i].appendChild(newChild);return this},prepend:function(newChild){var i,j;for(i=0;i<this.length;i++)if("string"==typeof newChild){var tempDiv=document.createElement("div");for(tempDiv.innerHTML=newChild,j=tempDiv.childNodes.length-1;j>=0;j--)this[i].insertBefore(tempDiv.childNodes[j],this[i].childNodes[0])}else if(newChild instanceof Dom7)for(j=0;j<newChild.length;j++)this[i].insertBefore(newChild[j],this[i].childNodes[0]);else this[i].insertBefore(newChild,this[i].childNodes[0]);return this},insertBefore:function(selector){for(var before=$(selector),i=0;i<this.length;i++)if(1===before.length)before[0].parentNode.insertBefore(this[i],before[0]);else if(before.length>1)for(var j=0;j<before.length;j++)before[j].parentNode.insertBefore(this[i].cloneNode(!0),before[j])},insertAfter:function(selector){for(var after=$(selector),i=0;i<this.length;i++)if(1===after.length)after[0].parentNode.insertBefore(this[i],after[0].nextSibling);else if(after.length>1)for(var j=0;j<after.length;j++)after[j].parentNode.insertBefore(this[i].cloneNode(!0),after[j].nextSibling)},next:function(selector){return new Dom7(this.length>0?selector?this[0].nextElementSibling&&$(this[0].nextElementSibling).is(selector)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(selector){var nextEls=[],el=this[0];if(!el)return new Dom7([]);for(;el.nextElementSibling;){var next=el.nextElementSibling;selector?$(next).is(selector)&&nextEls.push(next):nextEls.push(next),el=next}return new Dom7(nextEls)},prev:function(selector){return new Dom7(this.length>0?selector?this[0].previousElementSibling&&$(this[0].previousElementSibling).is(selector)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(selector){var prevEls=[],el=this[0];if(!el)return new Dom7([]);for(;el.previousElementSibling;){var prev=el.previousElementSibling;selector?$(prev).is(selector)&&prevEls.push(prev):prevEls.push(prev),el=prev}return new Dom7(prevEls)},parent:function(selector){for(var parents=[],i=0;i<this.length;i++)selector?$(this[i].parentNode).is(selector)&&parents.push(this[i].parentNode):parents.push(this[i].parentNode);return $($.unique(parents))},parents:function(selector){for(var parents=[],i=0;i<this.length;i++)for(var parent=this[i].parentNode;parent;)selector?$(parent).is(selector)&&parents.push(parent):parents.push(parent),parent=parent.parentNode;return $($.unique(parents))},find:function(selector){for(var foundElements=[],i=0;i<this.length;i++)for(var found=this[i].querySelectorAll(selector),j=0;j<found.length;j++)foundElements.push(found[j]);return new Dom7(foundElements)},children:function(selector){for(var children=[],i=0;i<this.length;i++)for(var childNodes=this[i].childNodes,j=0;j<childNodes.length;j++)selector?1===childNodes[j].nodeType&&$(childNodes[j]).is(selector)&&children.push(childNodes[j]):1===childNodes[j].nodeType&&children.push(childNodes[j]);return new Dom7($.unique(children))},remove:function(){for(var i=0;i<this.length;i++)this[i].parentNode&&this[i].parentNode.removeChild(this[i]);return this},add:function(){var i,j,dom=this;for(i=0;i<arguments.length;i++){var toAdd=$(arguments[i]);for(j=0;j<toAdd.length;j++)dom[dom.length]=toAdd[j],dom.length++}return dom}},$.fn=Dom7.prototype,$.unique=function(arr){for(var unique=[],i=0;i<arr.length;i++)-1===unique.indexOf(arr[i])&&unique.push(arr[i]);return unique},$}(),swiperDomPlugins=["jQuery","Zepto","Dom7"],i=0;i<swiperDomPlugins.length;i++)window[swiperDomPlugins[i]]&&function(lib){lib.fn.swiper=function(params){var firstInstance;return lib(this).each(function(){var s=new Swiper(this,params);firstInstance||(firstInstance=s)}),firstInstance}}(window[swiperDomPlugins[i]]);var domLib;(domLib=void 0===Dom7?window.Dom7||window.Zepto||window.jQuery:Dom7)&&("transitionEnd"in domLib.fn||(domLib.fn.transitionEnd=function(callback){function fireCallBack(e){if(e.target===this)for(callback.call(this,e),i=0;i<events.length;i++)dom.off(events[i],fireCallBack)}var i,events=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],dom=this;if(callback)for(i=0;i<events.length;i++)dom.on(events[i],fireCallBack);return this}),"transform"in domLib.fn||(domLib.fn.transform=function(transform){for(var i=0;i<this.length;i++){var elStyle=this[i].style;elStyle.webkitTransform=elStyle.MsTransform=elStyle.msTransform=elStyle.MozTransform=elStyle.OTransform=elStyle.transform=transform}return this}),"transition"in domLib.fn||(domLib.fn.transition=function(duration){"string"!=typeof duration&&(duration+="ms");for(var i=0;i<this.length;i++){var elStyle=this[i].style;elStyle.webkitTransitionDuration=elStyle.MsTransitionDuration=elStyle.msTransitionDuration=elStyle.MozTransitionDuration=elStyle.OTransitionDuration=elStyle.transitionDuration=duration}return this})),ionic.views.Swiper=Swiper}(),function(ionic){"use strict";ionic.views.Toggle=ionic.views.View.inherit({initialize:function(opts){var self=this;this.el=opts.el,this.checkbox=opts.checkbox,this.track=opts.track,this.handle=opts.handle,this.openPercent=-1,this.onChange=opts.onChange||function(){},this.triggerThreshold=opts.triggerThreshold||20,this.dragStartHandler=function(e){self.dragStart(e)},this.dragHandler=function(e){self.drag(e)},this.holdHandler=function(e){self.hold(e)},this.releaseHandler=function(e){self.release(e)},this.dragStartGesture=ionic.onGesture("dragstart",this.dragStartHandler,this.el),this.dragGesture=ionic.onGesture("drag",this.dragHandler,this.el),this.dragHoldGesture=ionic.onGesture("hold",this.holdHandler,this.el),this.dragReleaseGesture=ionic.onGesture("release",this.releaseHandler,this.el)},destroy:function(){ionic.offGesture(this.dragStartGesture,"dragstart",this.dragStartGesture),ionic.offGesture(this.dragGesture,"drag",this.dragGesture),ionic.offGesture(this.dragHoldGesture,"hold",this.holdHandler),ionic.offGesture(this.dragReleaseGesture,"release",this.releaseHandler)},tap:function(){"disabled"!==this.el.getAttribute("disabled")&&this.val(!this.checkbox.checked)},dragStart:function(e){this.checkbox.disabled||(this._dragInfo={width:this.el.offsetWidth,left:this.el.offsetLeft,right:this.el.offsetLeft+this.el.offsetWidth,triggerX:this.el.offsetWidth/2,initialState:this.checkbox.checked},e.gesture.srcEvent.preventDefault(),this.hold(e))},drag:function(e){var self=this;this._dragInfo&&(e.gesture.srcEvent.preventDefault(),ionic.requestAnimationFrame(function(){if(self._dragInfo){var px=e.gesture.touches[0].pageX-self._dragInfo.left,mx=self._dragInfo.width-self.triggerThreshold;self._dragInfo.initialState?px<self.triggerThreshold?self.setOpenPercent(0):px>self._dragInfo.triggerX&&self.setOpenPercent(100):px<self._dragInfo.triggerX?self.setOpenPercent(0):px>mx&&self.setOpenPercent(100)}}))},endDrag:function(){this._dragInfo=null},hold:function(){this.el.classList.add("dragging")},release:function(e){this.el.classList.remove("dragging"),this.endDrag(e)},setOpenPercent:function(openPercent){if(this.openPercent<0||openPercent<this.openPercent-3||openPercent>this.openPercent+3)if(this.openPercent=openPercent,0===openPercent)this.val(!1);else if(100===openPercent)this.val(!0);else{var openPixel=Math.round(openPercent/100*this.track.offsetWidth-this.handle.offsetWidth);openPixel=openPixel<1?0:openPixel,this.handle.style[ionic.CSS.TRANSFORM]="translate3d("+openPixel+"px,0,0)"}},val:function(value){return!0!==value&&!1!==value||(""!==this.handle.style[ionic.CSS.TRANSFORM]&&(this.handle.style[ionic.CSS.TRANSFORM]=""),this.checkbox.checked=value,this.openPercent=value?100:0,this.onChange&&this.onChange()),this.checkbox.checked}})}(ionic)}(),function(window,document,undefined){"use strict";function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var paramPrefix,i,templateArgs=arguments,code=templateArgs[0],message="["+(module?module+":":"")+code+"] ";for(message+=templateArgs[1].replace(/\{\d+\}/g,function(match){var shiftedIndex=+match.slice(1,-1)+2;return shiftedIndex<templateArgs.length?toDebugString(templateArgs[shiftedIndex]):match}),message+="\nhttp://errors.angularjs.org/1.5.3/"+(module?module+"/":"")+code,i=2,paramPrefix="?";i<templateArgs.length;i++,paramPrefix="&")message+=paramPrefix+"p"+(i-2)+"="+encodeURIComponent(toDebugString(templateArgs[i]));return new ErrorConstructor(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;if(isArray(obj)||isString(obj)||jqLite&&obj instanceof jqLite)return!0;var length="length"in Object(obj)&&obj.length;return isNumber(length)&&(length>=0&&(length-1 in obj||obj instanceof Array)||"function"==typeof obj.item)}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;key<length;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else if(isBlankObject(obj))for(key in obj)iterator.call(context,obj[key],key,obj);else if("function"==typeof obj.hasOwnProperty)for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else for(key in obj)hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj);return obj}function forEachSorted(obj,iterator,context){for(var keys=Object.keys(obj).sort(),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function baseExtend(dst,objs,deep){for(var h=dst.$$hashKey,i=0,ii=objs.length;i<ii;++i){var obj=objs[i];if(isObject(obj)||isFunction(obj))for(var keys=Object.keys(obj),j=0,jj=keys.length;j<jj;j++){var key=keys[j],src=obj[key];deep&&isObject(src)?isDate(src)?dst[key]=new Date(src.valueOf()):isRegExp(src)?dst[key]=new RegExp(src):src.nodeName?dst[key]=src.cloneNode(!0):isElement(src)?dst[key]=src.clone():(isObject(dst[key])||(dst[key]=isArray(src)?[]:{}),baseExtend(dst[key],[src],!0)):dst[key]=src}}return setHashKey(dst,h),dst}function extend(dst){return baseExtend(dst,slice.call(arguments,1),!1)}function merge(dst){return baseExtend(dst,slice.call(arguments,1),!0)}function toInt(str){return parseInt(str,10)}function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==toString}function isUndefined(value){return void 0===value}function isDefined(value){return void 0!==value}function isObject(value){return null!==value&&"object"==typeof value}function isBlankObject(value){return null!==value&&"object"==typeof value&&!getPrototypeOf(value)}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isFormData(obj){return"[object FormData]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}function isTypedArray(value){return value&&isNumber(value.length)&&TYPED_ARRAY_REGEXP.test(toString.call(value))}function isArrayBuffer(obj){return"[object ArrayBuffer]"===toString.call(obj)}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),index}function copy(source,destination){function copyRecurse(source,destination){var key,h=destination.$$hashKey;if(isArray(source))for(var i=0,ii=source.length;i<ii;i++)destination.push(copyElement(source[i]));else if(isBlankObject(source))for(key in source)destination[key]=copyElement(source[key]);else if(source&&"function"==typeof source.hasOwnProperty)for(key in source)source.hasOwnProperty(key)&&(destination[key]=copyElement(source[key]));else for(key in source)hasOwnProperty.call(source,key)&&(destination[key]=copyElement(source[key]));return setHashKey(destination,h),destination}function copyElement(source){if(!isObject(source))return source;var index=stackSource.indexOf(source);if(-1!==index)return stackDest[index];if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var needsRecurse=!1,destination=copyType(source);return destination===undefined&&(destination=isArray(source)?[]:Object.create(getPrototypeOf(source)),needsRecurse=!0),stackSource.push(source),stackDest.push(destination),needsRecurse?copyRecurse(source,destination):destination}function copyType(source){switch(toString.call(source)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new source.constructor(copyElement(source.buffer));case"[object ArrayBuffer]":if(!source.slice){var copied=new ArrayBuffer(source.byteLength);return new Uint8Array(copied).set(new Uint8Array(source)),copied}return source.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new source.constructor(source.valueOf());case"[object RegExp]":var re=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]);return re.lastIndex=source.lastIndex,re;case"[object Blob]":return new source.constructor([source],{type:source.type})}if(isFunction(source.cloneNode))return source.cloneNode(!0)}var stackSource=[],stackDest=[];if(destination){if(isTypedArray(destination)||isArrayBuffer(destination))throw ngMinErr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");return isArray(destination)?destination.length=0:forEach(destination,function(value,key){"$$hashKey"!==key&&delete destination[key]}),stackSource.push(source),stackDest.push(destination),copyRecurse(source,destination)}return copyElement(source)}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key])}return dst||src}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1;if(t1==typeof o2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return!!isDate(o2)&&equals(o1.getTime(),o2.getTime());if(isRegExp(o1))return!!isRegExp(o2)&&o1.toString()==o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;keySet=createMap();for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!(key in keySet)&&"$"!==key.charAt(0)&&isDefined(o2[key])&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;key<length;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return isUndefined(obj)?undefined:(isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty))}function fromJson(json){return isString(json)?JSON.parse(json):json}function timezoneToOffset(timezone,fallback){timezone=timezone.replace(ALL_COLONS,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return(date=new Date(date.getTime())).setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset();return addDateMinutes(date,reverse*(timezoneToOffset(timezone,dateTimezoneOffset)-dateTimezoneOffset))}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var obj={};return forEach((keyValue||"").split("&"),function(keyValue){var splitPoint,key,val;keyValue&&(key=keyValue=keyValue.replace(/\+/g,"%20"),-1!==(splitPoint=keyValue.indexOf("="))&&(key=keyValue.substring(0,splitPoint),val=keyValue.substring(splitPoint+1)),isDefined(key=tryDecodeURIComponent(key))&&(val=!isDefined(val)||tryDecodeURIComponent(val),hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val))}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(!0===arrayValue?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(!0===value?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.getAttribute(attr)))return attr;return null}function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))}),appElement&&(config.strictDi=null!==getNgAttribute(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config))}function bootstrap(element,modules,config){isObject(config)||(config={}),config=extend({strictDi:!1},config);var doBootstrap=function(){if((element=jqLite(element)).injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}(modules=modules||[]).unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;if(window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name))return doBootstrap();window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,function(module){modules.push(module)}),doBootstrap()},isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;i<len;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){for(var blockNodes,node=nodes[0],endNode=nodes[nodes.length-1],i=1;node!==endNode&&(node=node.nextSibling);i++)(blockNodes||nodes[i]!==node)&&(blockNodes||(blockNodes=jqLite(slice.call(nodes,0,i))),blockNodes.push(node));return blockNodes||nodes}function createMap(){return Object.create(null)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){return function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}function invokeLaterAndSetModuleName(provider,method){return function(recipeName,factoryFunction){return factoryFunction&&isFunction(factoryFunction)&&(factoryFunction.$$moduleName=name),invokeQueue.push([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator"),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),component:invokeLaterAndSetModuleName("$compileProvider","component"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function serializeObject(obj){var seen=[];return JSON.stringify(obj,function(key,val){if(val=toJsonReplacer(key,val),isObject(val)){if(seen.indexOf(val)>=0)return"...";seen.push(val)}return val})}function toDebugString(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):isUndefined(obj)?"undefined":"string"!=typeof obj?serializeObject(obj):obj}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),(tmp=fragment.firstChild).textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}function jqLiteParseHTML(html,context){context=context||document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]}function jqLiteWrapNode(node,wrapper){var parent=node.parentNode;parent&&parent.replaceChild(wrapper,node),wrapper.appendChild(node)}function JQLite(element){if(element instanceof JQLite)return element;var argIsString;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}argIsString?jqLiteAddNodes(this,jqLiteParseHTML(element)):jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){if(onlyDescendants||jqLiteRemoveData(element),element.querySelectorAll)for(var descendants=element.querySelectorAll("*"),i=0,l=descendants.length;i<l;i++)jqLiteRemoveData(descendants[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type){var removeHandler=function(type){var listenerFns=events[type];isDefined(fn)&&arrayRemove(listenerFns||[],fn),isDefined(fn)&&listenerFns&&listenerFns.length>0||(removeEventListenerFn(element,type,handle),delete events[type])};forEach(type.split(" "),function(type){removeHandler(type),MOUSE_EVENT_MAP[type]&&removeHandler(MOUSE_EVENT_MAP[type])})}else for(type in events)"$destroy"!==type&&removeEventListenerFn(element,type,handle),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=undefined}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={events:{},data:{},handle:undefined}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[key]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}}function jqLiteHasClass(element,selector){return!!element.getAttribute&&(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;i<length;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element.nodeType==NODE_TYPE_DOCUMENT&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;i<ii;i++)if(isDefined(value=jqLite.data(element,names[i])))return value;element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}function jqLiteDocumentLoaded(action,win){"complete"===(win=win||window).document.readyState?win.setTimeout(action):jqLite(win).on("load",action)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function getAliasedAttrName(name){return ALIASED_ATTR[name]}function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return!0===event.immediatePropagationStopped};var handlerWrapper=eventFns.specialHandlerWrapper||defaultHandlerWrapper;eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;i<eventFnsLength;i++)event.isImmediatePropagationStopped()||handlerWrapper(element,event,eventFns[i])}};return eventHandler.elem=element,eventHandler}function defaultHandlerWrapper(element,event,handler){handler.call(element,event)}function specialMouseHandlerWrapper(target,event,handler){var related=event.relatedTarget;related&&(related===target||jqLiteContains.call(target,related))||handler.call(target,event)}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"==objType||"object"==objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}function extractArgs(fn){var fnText=fn.toString().replace(STRIP_COMMENTS,"");return fnText.match(ARROW_ARG)||fnText.match(FN_ARGS)}function anonFn(fn){var args=extractArgs(fn);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function createInjector(modulesToLoad,strictDi){function supportObject(delegate){return function(key,value){if(!isObject(key))return delegate(key,value);forEach(key,reverseParams(delegate))}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function enforceReturnValue(name,factory){return function(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}function factory(name,factoryFn,enforce){return provider(name,{$get:!1!==enforce?enforceReturnValue(name,factoryFn):factoryFn})}function loadModules(modulesToLoad){assertArg(isUndefined(modulesToLoad)||isArray(modulesToLoad),"modulesToLoad","not an array");var moduleFn,runBlocks=[];return forEach(modulesToLoad,function(module){function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;i<ii;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}if(!loadedModules.get(module)){loadedModules.put(module,!0);try{isString(module)?(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function injectionArgs(fn,locals,serviceName){for(var args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName),i=0,length=$inject.length;i<length;i++){var key=$inject[i];if("string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return args}function isClass(func){return!(msie<=11)&&("function"==typeof func&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(func)))}return{invoke:function(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var args=injectionArgs(fn,locals,serviceName);return isArray(fn)&&(fn=fn[fn.length-1]),isClass(fn)?(args.unshift(null),new(Function.prototype.bind.apply(fn,args))):fn.apply(self,args)},instantiate:function(Type,locals,serviceName){var ctor=isArray(Type)?Type[Type.length-1]:Type,args=injectionArgs(Type,locals,serviceName);return args.unshift(null),new(Function.prototype.bind.apply(ctor,args))},get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}strictDi=!0===strictDi;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],!0),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(function(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}),value:supportObject(function(name,val){return factory(name,valueFn(val),!1)}),constant:supportObject(function(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}),decorator:function(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},protoInstanceInjector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,undefined,serviceName)}),instanceInjector=protoInstanceInjector;providerCache["$injector"+providerSuffix]={$get:valueFn(protoInstanceInjector)};var runBlocks=loadModules(modulesToLoad);return instanceInjector=protoInstanceInjector.get("$injector"),instanceInjector.strictDi=strictDi,forEach(runBlocks,function(fn){fn&&instanceInjector.invoke(fn)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return Array.prototype.some.call(list,function(element){if("a"===nodeName_(element))return result=element,!0}),result}function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0];offset="fixed"!==$window.getComputedStyle(elem).position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(hash){var elm;(hash=isString(hash)?hash:$location.hash())?(elm=document.getElementById(hash))?scrollTo(elm):(elm=getFirstAnchor(document.getElementsByName(hash)))?scrollTo(elm):"top"===hash&&scrollTo(null):scrollTo(null)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(newVal,oldVal){newVal===oldVal&&""===newVal||jqLiteDocumentLoaded(function(){$rootScope.$evalAsync(scroll)})}),scroll}]}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}function splitClasses(classes){isString(classes)&&(classes=classes.split(" "));var obj=createMap();return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}function prepareAnimateOptions(options){return isObject(options)?options:{}}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(0==--outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function getHash(url){var index=url.indexOf("#");return-1===index?"":url.substr(index)}function cacheStateAndFireUrlChange(){pendingLocation=null,cacheState(),fireUrlChange()}function cacheState(){cachedState=getCurrentState(),equals(cachedState=isUndefined(cachedState)?null:cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState}function fireUrlChange(){lastBrowserUrl===self.url()&&lastHistoryState===cachedState||(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)}))}var self=this,location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),pendingLocation=null,getCurrentState=$sniffer.history?function(){try{return history.state}catch(e){}}:noop;cacheState(),lastHistoryState=cachedState,self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?(sameBase&&!pendingLocation||(pendingLocation=url),replace?location.replace(url):sameBase?location.hash=getHash(url):location.href=url,location.href!==url&&(pendingLocation=url)):(history[replace?"replaceState":"pushState"](state,"",url),cacheState(),lastHistoryState=cachedState),self}return pendingLocation||location.href.replace(/%27/g,"'")},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1,lastCachedState=null;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$applicationDestroyed=function(){jqLite(window).off("hashchange popstate",cacheStateAndFireUrlChange)},self.$$checkUrlChange=fireUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return!!pendingDeferIds[deferId]&&(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0)}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),(freshEnd=entry).n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data=createMap(),capacity=options&&options.capacity||Number.MAX_VALUE,lruHash=createMap(),freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(!isUndefined(value))return capacity<Number.MAX_VALUE&&refresh(lruHash[key]||(lruHash[key]={key:key})),key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}key in data&&(delete data[key],size--)},removeAll:function(){data=createMap(),size=0,lruHash=createMap(),freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){function parseIsolateBindings(scope,directiveName,isController){var LOCAL_REGEXP=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,bindings={};return forEach(scope,function(definition,scopeName){if(definition in bindingCache)bindings[scopeName]=bindingCache[definition];else{var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition,isController?"controller bindings definition":"isolate scope definition");bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName},match[4]&&(bindingCache[definition]=bindings[scopeName])}}),bindings}function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)&&(!0===directive.bindToController?(bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,!0),bindings.isolateScope={}):bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,!1)),isObject(directive.bindToController)&&(bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,!0)),isObject(bindings.bindToController)){var controller=directive.controller,controllerAs=directive.controllerAs;if(!controller)throw $compileMinErr("noctrl","Cannot bind to controller without directive '{0}'s controller.",directiveName);if(!identifierForController(controller,controllerAs))throw $compileMinErr("noident","Cannot bind to controller without identifier for directive '{0}'.",directiveName)}return bindings}function assertValidDirectiveName(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter))throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",name);if(name!==name.trim())throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",name)}var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w\-]+)(?:\:([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/,bindingCache=createMap();this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertValidDirectiveName(name),assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"EA",directive.$$moduleName=directiveFactory.$$moduleName,directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.component=function(name,options){function factory($injector){function makeInjectable(fn){return isFunction(fn)||isArray(fn)?function(tElement,tAttrs){return $injector.invoke(fn,this,{$element:tElement,$attrs:tAttrs})}:fn}var template=options.template||options.templateUrl?options.template:"";return{controller:controller,controllerAs:identifierForController(options.controller)||options.controllerAs||"$ctrl",template:makeInjectable(template),templateUrl:makeInjectable(options.templateUrl),transclude:options.transclude,scope:{},bindToController:options.bindings||{},restrict:"E",require:options.require}}var controller=options.controller||noop;return forEach(options,function(val,key){"$"===key.charAt(0)&&(factory[key]=val,controller[key]=val)}),factory.$inject=["$injector"],this.directive(name,factory)},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled};var TTL=10;this.onChangesTtl=function(value){return arguments.length?(TTL=value,this):TTL},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$sce,$animate,$$sanitizeUri){function flushOnChangesQueue(){try{if(!--onChangesTtl)throw onChangesQueue=undefined,$compileMinErr("infchng","{0} $onChanges() iterations reached. Aborting!\n",TTL);$rootScope.$apply(function(){for(var i=0,ii=onChangesQueue.length;i<ii;++i)onChangesQueue[i]();onChangesQueue=undefined})}finally{onChangesTtl++}}function Attributes(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;i<l;i++)this[key=keys[i]]=attributesToCopy[key]}else this.$attr={};this.$$element=element}function setSpecialAttr(element,attrName,value){specialAttrHolder.innerHTML="<span "+attrName+">";var attributes=specialAttrHolder.firstChild.attributes,attribute=attributes[0];attributes.removeNamedItem(attribute.name),attribute.value=value,element.attributes.setNamedItem(attribute)}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes));for(var NOT_EMPTY=/\S+/,i=0,len=$compileNodes.length;i<len;i++){var domNode=$compileNodes[i];domNode.nodeType===NODE_TYPE_TEXT&&domNode.nodeValue.match(NOT_EMPTY)&&jqLiteWrapNode(domNode,$compileNodes[i]=document.createElement("span"))}var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function(scope,cloneConnectFn,options){assertArg(scope,"scope"),previousCompileContext&&previousCompileContext.needsNewScope&&(scope=scope.$parent.$new());var parentBoundTranscludeFn=(options=options||{}).parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(namespace=detectNamespaceForChildElements(futureParentElement));var $linkNode;if($linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];return node&&"foreignobject"!==nodeName_(node)&&toString.call(node).match(/SVG/)?"svg":"html"}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,(nodeLinkFn=(directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective)).length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null)&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?function(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)stableNodeList[idx=linkFns[i]]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;i<ii;)node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope)):childScope=scope,nodeLinkFn(childLinkFn,childScope,node,$rootElement,nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null)):childLinkFn&&childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){function boundTranscludeFn(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||((transcludedScope=scope.$new(!1,containingScope)).$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})}var boundSlots=boundTranscludeFn.$$slots=createMap();for(var slotName in transcludeFn.$$slots)transcludeFn.$$slots[slotName]?boundSlots[slotName]=createBoundTranscludeFn(scope,transcludeFn.$$slots[slotName],previousBoundTranscludeFn):boundSlots[slotName]=null;return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case NODE_TYPE_ELEMENT:addDirective(directives,directiveNormalize(nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;j<jj;j++){var attrStartName=!1,attrEndName=!1;name=(attr=nAttrs[j]).name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()}));var multiElementMatch=ngAttrName.match(MULTI_ELEMENT_DIR_RE);multiElementMatch&&directiveIsMultiElement(multiElementMatch[1])&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),attrsMap[nName=directiveNormalize(name.toLowerCase())]=name,!isNgAttr&&attrs.hasOwnProperty(nName)||(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if(className=node.className,isObject(className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)addDirective(directives,nName=directiveNormalize(match[2]),"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:if(11===msie)for(;node.parentNode&&node.nextSibling&&node.nextSibling.nodeType===NODE_TYPE_TEXT;)node.nodeValue=node.nodeValue+node.nextSibling.nodeValue,node.parentNode.removeChild(node.nextSibling);addTextInterpolateDirective(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:try{(match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue))&&addDirective(directives,nName=directiveNormalize(match[1]),"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2]))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart))do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);node.nodeType==NODE_TYPE_ELEMENT&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0);else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function compilationGenerator(eager,$compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){var compiled;return eager?compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext):function(){return compiled||(compiled=compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext),$compileNodes=transcludeFn=previousCompileContext=null),compiled.apply(this,arguments)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){var i,ii,linkFn,isolateScope,controllerScope,elementControllers,transcludeFn,$element,attrs,removeScopeBindingWatches,removeControllerBindingWatches;compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):attrs=new Attributes($element=jqLite(linkNode),templateAttrs),controllerScope=scope,newIsolateScopeDirective?isolateScope=scope.$new(!0):newScopeDirective&&(controllerScope=scope.$parent),boundTranscludeFn&&((transcludeFn=function(scope,cloneAttachFn,futureParentElement,slotName){var transcludeControllers;if(isScope(scope)||(slotName=futureParentElement,futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element),!slotName)return boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);var slotTranscludeFn=boundTranscludeFn.$$slots[slotName];if(slotTranscludeFn)return slotTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);if(isUndefined(slotTranscludeFn))throw $compileMinErr("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',slotName,startingTag($element))}).$$boundTransclude=boundTranscludeFn,transcludeFn.isSlotFilled=function(slotName){return!!boundTranscludeFn.$$slots[slotName]}),controllerDirectives&&(elementControllers=setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective)),newIsolateScopeDirective&&(compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0),isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,(removeScopeBindingWatches=initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective))&&isolateScope.$on("$destroy",removeScopeBindingWatches));for(var name in elementControllers){var controllerDirective=controllerDirectives[name],controller=elementControllers[name],bindings=controllerDirective.$$bindings.bindToController;controller.identifier&&bindings&&(removeControllerBindingWatches=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective));var controllerResult=controller();controllerResult!==controller.instance&&(controller.instance=controllerResult,$element.data("$"+controllerDirective.name+"Controller",controllerResult),removeControllerBindingWatches&&removeControllerBindingWatches(),removeControllerBindingWatches=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective))}for(forEach(controllerDirectives,function(controllerDirective,name){var require=controllerDirective.require;controllerDirective.bindToController&&!isArray(require)&&isObject(require)&&extend(elementControllers[name].instance,getControllers(name,require,$element,elementControllers))}),forEach(elementControllers,function(controller){var controllerInstance=controller.instance;isFunction(controllerInstance.$onInit)&&controllerInstance.$onInit(),isFunction(controllerInstance.$onDestroy)&&controllerScope.$on("$destroy",function(){controllerInstance.$onDestroy()})}),i=0,ii=preLinkFns.length;i<ii;i++)invokeLinkFn(linkFn=preLinkFns[i],linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)invokeLinkFn(linkFn=postLinkFns[i],linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);forEach(elementControllers,function(controller){var controllerInstance=controller.instance;isFunction(controllerInstance.$postLink)&&controllerInstance.$postLink()})}previousCompileContext=previousCompileContext||{};for(var directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,didScanForMultipleTransclusion=!1,mightHaveMultipleTransclusionError=!1,i=0,ii=directives.length;i<ii;i++){var attrStart=(directive=directives[i]).$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!didScanForMultipleTransclusion&&(directive.replace&&(directive.templateUrl||directive.template)||directive.transclude&&!directive.$$tlb)){for(var candidateDirective,scanningIndex=i+1;candidateDirective=directives[scanningIndex++];)if(candidateDirective.transclude&&!candidateDirective.$$tlb||candidateDirective.replace&&(candidateDirective.templateUrl||candidateDirective.template)){mightHaveMultipleTransclusionError=!0;break}didScanForMultipleTransclusion=!0}if(!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||createMap(),assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),directiveValue=directive.transclude)if(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue)hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(compile.$$createComment(directiveName,templateAttrs[directiveName])),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),$template[0].$$parentNode=$template[0].parentNode,childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective});else{var slots=createMap();if($template=jqLite(jqLiteClone(compileNode)).contents(),isObject(directiveValue)){$template=[];var slotMap=createMap(),filledSlots=createMap();forEach(directiveValue,function(elementSelector,slotName){var optional="?"===elementSelector.charAt(0);elementSelector=optional?elementSelector.substring(1):elementSelector,slotMap[elementSelector]=slotName,slots[slotName]=null,filledSlots[slotName]=optional}),forEach($compileNode.contents(),function(node){var slotName=slotMap[directiveNormalize(nodeName_(node))];slotName?(filledSlots[slotName]=!0,slots[slotName]=slots[slotName]||[],slots[slotName].push(node)):$template.push(node)}),forEach(filledSlots,function(filled,slotName){if(!filled)throw $compileMinErr("reqslot","Required transclusion slot `{0}` was not filled.",slotName)});for(var slotName in slots)slots[slotName]&&(slots[slotName]=compilationGenerator(mightHaveMultipleTransclusionError,slots[slotName],transcludeFn))}$compileNode.empty(),(childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,undefined,undefined,{needsNewScope:directive.$$isolateScope||directive.$$newScope})).$$slots=slots}if(directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));(newIsolateScopeDirective||newScopeDirective)&&markDirectiveScope(templateDirectives,newIsolateScopeDirective,newScopeDirective),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:newScopeDirective!==directive&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{isFunction(linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn))?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&!0===newScopeDirective.scope,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP),name=require.substring(match[0].length),inheritType=match[1]||match[3],optional="?"===match[2];if("^^"===inheritType?$element=$element.parent():(value=elementControllers&&elementControllers[name],value=value&&value.instance),!value){var dataName="$"+name+"Controller";value=inheritType?$element.inheritedData(dataName):$element.data(dataName)}if(!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",name,directiveName)}else if(isArray(require)){value=[];for(var i=0,ii=require.length;i<ii;i++)value[i]=getControllers(directiveName,require[i],$element,elementControllers)}else isObject(require)&&(value={},forEach(require,function(controller,property){value[property]=getControllers(directiveName,controller,$element,elementControllers)}));return value||null}function setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey],locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn},controller=directive.controller;"@"==controller&&(controller=attrs[directive.name]);var controllerInstance=$controller(controller,locals,!0,directive.controllerAs);elementControllers[directive.name]=controllerInstance,$element.data("$"+directive.name+"Controller",controllerInstance.instance)}return elementControllers}function markDirectiveScope(directives,isolateScope,newScope){for(var j=0,jj=directives.length;j<jj;j++)directives[j]=inherit(directives[j],{$$isolateScope:isolateScope,$$newScope:newScope})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)try{if(directive=directives[i],(isUndefined(maxPriority)||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)){if(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),!directive.$$bindings){var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);isObject(bindings.isolateScope)&&(directive.$$isolateBindings=bindings.isolateScope)}tDirectives.push(directive),match=directive}}catch(e){$exceptionHandler(e)}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)if(directives[i].multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst.class=(dst.class?dst.class+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest(templateUrl).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectiveScope(templateDirectives,!0),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}}linkQueue=null}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?" (module: "+moduleName+")":""}if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"form"==tag&&"action"==attrNormalizedName||"img"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name,allOrNothing){var trustedContext=getTrustedContext(node,name);allOrNothing=ALL_OR_NOTHING_ATTRS[name]||allOrNothing;var interpolateFn=$interpolate(value,!0,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers=createMap());if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;i<ii;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;j<jj;j++,j2++)j2<jj?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();for(i=0;i<removeCount;i++)fragment.appendChild(elementsToRemove[i]);for(jqLite.hasData(firstElementToRemove)&&(jqLite.data(newNode,jqLite.data(firstElementToRemove)),jqLite(firstElementToRemove).off("$destroy")),jqLite.cleanData(fragment.querySelectorAll("*")),i=1;i<removeCount;i++)delete elementsToRemove[i];elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}function initializeDirectiveBindings(scope,attrs,destination,bindings,directive){function recordChanges(key,currentValue,previousValue){isFunction(destination.$onChanges)&&currentValue!==previousValue&&(onChangesQueue||(scope.$$postDigest(flushOnChangesQueue),onChangesQueue=[]),changes||(changes={},onChangesQueue.push(triggerOnChangesHook)),changes[key]&&(previousValue=changes[key].previousValue),changes[key]={previousValue:previousValue,currentValue:currentValue})}function triggerOnChangesHook(){destination.$onChanges(changes),changes=undefined}var changes,removeWatchCollection=[];return forEach(bindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,removeWatch,attrName=definition.attrName,optional=definition.optional;switch(definition.mode){case"@":optional||hasOwnProperty.call(attrs,attrName)||(destination[scopeName]=attrs[attrName]=void 0),attrs.$observe(attrName,function(value){if(isString(value)){var oldValue=destination[scopeName];recordChanges(scopeName,value,oldValue),destination[scopeName]=value}}),attrs.$$observers[attrName].$$scope=scope,isString(lastValue=attrs[attrName])?destination[scopeName]=$interpolate(lastValue)(scope):isBoolean(lastValue)&&(destination[scopeName]=lastValue);break;case"=":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!==a&&b!==b},parentSet=parentGet.assign||function(){throw lastValue=destination[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",attrs[attrName],attrName,directive.name)},lastValue=destination[scopeName]=parentGet(scope);var parentValueWatch=function(parentValue){return compare(parentValue,destination[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=destination[scopeName]):destination[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0,removeWatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),removeWatchCollection.push(removeWatch);break;case"<":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]),destination[scopeName]=parentGet(scope),removeWatch=scope.$watch(parentGet,function(newParentValue){var oldValue=destination[scopeName];recordChanges(scopeName,newParentValue,oldValue),destination[scopeName]=newParentValue},parentGet.literal),removeWatchCollection.push(removeWatch);break;case"&":if((parentGet=attrs.hasOwnProperty(attrName)?$parse(attrs[attrName]):noop)===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)}}}),removeWatchCollection.length&&function(){for(var i=0,ii=removeWatchCollection.length;i<ii;++i)removeWatchCollection[i]()}}var onChangesQueue,SIMPLE_ATTR_NAME=/^\w/,specialAttrHolder=document.createElement("div"),onChangesTtl=TTL;Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,booleanKey=getBooleanAttrName(this.$$element[0],key),aliasedKey=getAliasedAttrName(key),observer=key;if(booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key])||(this.$attr[key]=attrName=snake_case(key,"-")),"a"===(nodeName=nodeName_(this.$$element))&&("href"===key||"xlinkHref"===key)||"img"===nodeName&&"src"===key)this[key]=value=$$sanitizeUri(value,"src"===key);else if("img"===nodeName&&"srcset"===key){for(var result="",trimmedSrcset=trim(value),srcPattern=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,pattern=/\s/.test(trimmedSrcset)?srcPattern:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;i<nbrUrisWith2parts;i++){var innerIdx=2*i;result+=$$sanitizeUri(trim(rawUris[innerIdx]),!0),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),!0),2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),this[key]=value=result}!1!==writeAttr&&(null===value||isUndefined(value)?this.$$element.removeAttr(attrName):SIMPLE_ATTR_NAME.test(attrName)?this.$$element.attr(attrName,value):setSpecialAttr(this.$$element[0],attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||!attrs.hasOwnProperty(key)||isUndefined(attrs[key])||fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol&&"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/,MULTI_ELEMENT_DIR_RE=/^(.+)Start$/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile.$$createComment=function(directiveName,comment){var content="";return debugInfoEnabled&&(content=" "+(directiveName||"")+": "+(comment||"")+" "),document.createComment(content)},compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){var i=(jqNodes=jqLite(jqNodes)).length;if(i<=1)return jqNodes;for(;i--;)jqNodes[i].nodeType===NODE_TYPE_COMMENT&&splice.call(jqNodes,i,1);return jqNodes}function identifierForController(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}function $ControllerProvider(){var controllers={},globals=!1;this.has=function(name){return controllers.hasOwnProperty(name)},this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=!0===later,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(!(match=expression.match(CNTRL_REG)))throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);constructor=match[1],identifier=identifier||match[3],assertArgFn(expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):undefined),constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name);return extend(function(){var result=$injector.invoke(expression,instance,locals,constructor);return result!==instance&&(isObject(result)||isFunction(result))&&(instance=result,identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name)),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}function serializeValue(v){return isObject(v)?isDate(v)?v.toISOString():toJson(v):v}function $HttpParamSerializerProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)?forEach(value,function(v){parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(v)))}):parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(value))))}),parts.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function(params){function serialize(toSerialize,prefix,topLevel){null===toSerialize||isUndefined(toSerialize)||(isArray(toSerialize)?forEach(toSerialize,function(value,index){serialize(value,prefix+"["+(isObject(value)?index:"")+"]")}):isObject(toSerialize)&&!isDate(toSerialize)?forEachSorted(toSerialize,function(value,key){serialize(value,prefix+(topLevel?"":"[")+key+(topLevel?"":"]"))}):parts.push(encodeUriQuery(prefix)+"="+encodeUriQuery(serializeValue(toSerialize))))}if(!params)return"";var parts=[];return serialize(params,"",!0),parts.join("&")}}}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type");(contentType&&0===contentType.indexOf(APPLICATION_JSON)||isJsonLike(tempData))&&(data=fromJson(tempData))}}return data}function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str)}function parseHeaders(headers){function fillInParsed(key,val){key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}var i,parsed=createMap();return isString(headers)?forEach(headers.split("\n"),function(line){i=line.indexOf(":"),fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))}):isObject(headers)&&forEach(headers,function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))}),parsed}function headersGetter(headers){var headersObj;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,function(fn){data=fn(data,headers,status)}),data)}function isSuccess(status){return 200<=status&&status<300}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)||isFormData(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var useLegacyPromise=!0;this.useLegacyPromiseExtensions=function(value){return isDefined(value)?(useLegacyPromise=!!value,this):useLegacyPromise};var interceptorFactories=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response);return resp.data=transformData(response.data,response.headers,response.status,config.transformResponse),isSuccess(response.status)?resp:$q.reject(resp)}function executeHeaderFns(headers,config){var headerContent,processedHeaders={};return forEach(headers,function(headerFn,header){isFunction(headerFn)?null!=(headerContent=headerFn(config))&&(processedHeaders[header]=headerContent):processedHeaders[header]=headerFn}),processedHeaders}if(!isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);if(!isString(requestConfig.url))throw minErr("$http")("badreq","Http request configuration url must be a string.  Received: {0}",requestConfig.url);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer},requestConfig);config.headers=function(config){var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return executeHeaderFns(reqHeaders,shallowCopy(config))}(requestConfig),config.method=uppercase(config.method),config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer;var chain=[function(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),undefined,config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData).then(transformResponse,transformResponse)},undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return useLegacyPromise?(promise.success=function(fn){return assertArgFn(fn,"fn"),promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return assertArgFn(fn,"fn"),promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise}):(promise.success=$httpMinErrLegacyFn("success"),promise.error=$httpMinErrLegacyFn("error")),promise}function sendReq(config,reqData){function resolvePromise(response,status,headers,statusText){(isSuccess(status=status>=-1?status:0)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,reqHeaders=config.headers,url=buildUrl(config.url,config.paramSerializer(config.params));if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||!1===config.cache||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache&&(isDefined(cachedResp=cache.get(url))?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK"):cache.put(url,promise)),isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,function(status,response,headersString,statusText){function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())},reqHeaders,config.timeout,config.withCredentials,config.responseType)}return promise}function buildUrl(url,serializedParams){return serializedParams.length>0&&(url+=(-1==url.indexOf("?")?"?":"&")+serializedParams),url}var defaultCache=$cacheFactory("$http");defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;var reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),$http.pendingRequests=[],function(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}})}("get","delete","head","jsonp"),function(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}})}("post","put","patch"),$http.defaults=defaults,$http}]}function $xhrFactoryProvider(){this.$get=function(){return function(){return new window.XMLHttpRequest}}}function $HttpBackendProvider(){this.$get=["$browser","$window","$document","$xhrFactory",function($browser,$window,$document,$xhrFactory){return createHttpBackend($browser,$xhrFactory,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,callbackId,done){var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks[callbackId].called||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),rawDocument.body.appendChild(script),callback}return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){isDefined(timeoutId)&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data,callbacks[callbackId].called=!0};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text),callbacks[callbackId]=noop})}else{var xhr=createXhr(method,url);xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onload=function(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText)};var requestError=function(){completeRequest(callback,-1,null,null,"")};if(xhr.onerror=requestError,xhr.onabort=requestError,withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(isUndefined(post)?null:post)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function escape(ch){return"\\\\\\"+ch}function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function stringify(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=toJson(value)}return value}function constantWatchDelegate(scope,listener,objectEquality,constantInterp){var unwatch;return unwatch=scope.$watch(function(scope){return unwatch(),constantInterp(scope)},listener,objectEquality)}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){if(!text.length||-1===text.indexOf(startSymbol)){var constantInterp;return mustHaveExpression||((constantInterp=valueFn(unescapeText(text))).exp=text,constantInterp.expressions=[],constantInterp.$$watchDelegate=constantWatchDelegate),constantInterp}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,exp,index=0,expressions=[],parseFns=[],textLength=text.length,concat=[],expressionPositions=[];index<textLength;){if(-1==(startIndex=text.indexOf(startSymbol,index))||-1==(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,function(value){try{return value=getValue(value),allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}})),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&concat.length>1&&$interpolateMinErr.throwNoconcat(text),!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;i<ii;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;i<ii;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue})}})}}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q","$browser",function($rootScope,$window,$q,$$q,$browser){function interval(fn,delay,count,invokeApply){function callback(){hasParams?fn.apply(null,args):fn(iteration)}var hasParams=arguments.length>4,args=hasParams?sliceArgs(arguments,4):[],setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.$$intervalId=setInterval(function(){skipApply?$browser.defer(callback):$rootScope.$evalAsync(callback),deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return!!(promise&&promise.$$intervalId in intervals)&&(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0)},interval}]}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){if(0===whole.indexOf(begin))return whole.substr(begin.length)}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,appBaseNoFile,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"",parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var appUrl,prevAppUrl,rewrittenUrl;return isDefined(appUrl=beginsWith(appBase,url))?(prevAppUrl=appUrl,rewrittenUrl=isDefined(appUrl=beginsWith(basePrefix,appUrl))?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):isDefined(appUrl=beginsWith(appBaseNoFile,url))?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile==url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl}}function LocationHashbangUrl(appBase,appBaseNoFile,hashPrefix){parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var withoutHashUrl,withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url);isUndefined(withoutBaseUrl)||"#"!==withoutBaseUrl.charAt(0)?this.$$html5?withoutHashUrl=withoutBaseUrl:(withoutHashUrl="",isUndefined(withoutBaseUrl)&&(appBase=url,this.replace())):isUndefined(withoutHashUrl=beginsWith(hashPrefix,withoutBaseUrl))&&(withoutHashUrl=withoutBaseUrl),parseAppUrl(withoutHashUrl,this),this.$$path=function(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path))?firstPathSegmentMatch[1]:path}(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)==stripHash(url)&&(this.$$parse(url),!0)}}function LocationHashbangInHtml5Url(appBase,appBaseNoFile,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments),this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var rewrittenUrl,appUrl;return appBase==stripHash(url)?rewrittenUrl=url:(appUrl=beginsWith(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),isBoolean(mode.rewriteLinks)&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;var appBaseNoFile=stripFile(appBase);($location=new LocationMode(appBase,appBaseNoFile,"#"+hashPrefix)).$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;$rootElement.on("click",function(event){if(html5Mode.rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!=event.which&&2!=event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!=$browser.url()&&($rootScope.$apply(),$window.angular["ff-684208-preventDefault"]=!0))}}),trimEmptyHash($location.absUrl())!=trimEmptyHash(initialUrl)&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange(function(newUrl,newState){isUndefined(beginsWith(appBaseNoFile,newUrl))?$window.location.href=newUrl:($rootScope.$evalAsync(function(){var defaultPrevented,oldUrl=$location.absUrl(),oldState=$location.$$state;newUrl=trimEmptyHash(newUrl),$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState,setBrowserUrlWithFallback(oldUrl,!1,oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))}),$rootScope.$$phase||$rootScope.$digest())}),$rootScope.$watch(function(){var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync(function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))})),$location.$$replace=!1}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function getStringValue(name){return name+""}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.window===obj)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function ensureSafeAssignContext(obj,fullExpression){if(obj&&(obj===(0).constructor||obj===(!1).constructor||obj==="".constructor||obj==={}.constructor||obj===[].constructor||obj===Function.constructor))throw $parseMinErr("isecaf","Assigning to a constructor is disallowed! Expression: {0}",fullExpression)}function ifDefined(v,d){return void 0!==v?v:d}function plusFn(l,r){return void 0===l?r:void 0===r?l:l+r}function isStateless($filter,filterName){return!$filter(filterName).$stateful}function findConstantAndWatchExpressions(ast,$filter){var allConstants,argsToWatch;switch(ast.type){case AST.Program:allConstants=!0,forEach(ast.body,function(expr){findConstantAndWatchExpressions(expr.expression,$filter),allConstants=allConstants&&expr.expression.constant}),ast.constant=allConstants;break;case AST.Literal:ast.constant=!0,ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter),ast.constant=ast.argument.constant,ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter),findConstantAndWatchExpressions(ast.alternate,$filter),findConstantAndWatchExpressions(ast.consequent,$filter),ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=!1,ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter),ast.computed&&findConstantAndWatchExpressions(ast.property,$filter),ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant),ast.toWatch=[ast];break;case AST.CallExpression:allConstants=!!ast.filter&&isStateless($filter,ast.callee.name),argsToWatch=[],forEach(ast.arguments,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=ast.filter&&isStateless($filter,ast.callee.name)?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=!0,argsToWatch=[],forEach(ast.elements,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=!0,argsToWatch=[],forEach(ast.properties,function(property){findConstantAndWatchExpressions(property.value,$filter),allConstants=allConstants&&property.value.constant,property.value.constant||argsToWatch.push.apply(argsToWatch,property.value.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ThisExpression:case AST.LocalsExpression:ast.constant=!1,ast.toWatch=[]}}function getInputs(body){if(1==body.length){var lastExpression=body[0].expression,candidate=lastExpression.toWatch;return 1!==candidate.length?candidate:candidate[0]!==lastExpression?candidate:undefined}}function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}function assignableAST(ast){if(1===ast.body.length&&isAssignable(ast.body[0].expression))return{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:"="}}function isLiteral(ast){return 0===ast.body.length||1===ast.body.length&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}function isConstant(ast){return ast.constant}function ASTCompiler(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}function ASTInterpreter(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}function isPossiblyDangerousMemberName(name){return"constructor"==name}function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var cacheDefault=createMap(),cacheExpensive=createMap(),literals={true:!0,false:!1,null:null,undefined:undefined};this.addLiteral=function(literalName,literalValue){literals[literalName]=literalValue},this.$get=["$filter",function($filter){function $parse(exp,interceptorFn,expensiveChecks){var parsedExpression,oneTime,cacheKey;switch(expensiveChecks=expensiveChecks||runningChecksEnabled,typeof exp){case"string":cacheKey=exp=exp.trim();var cache=expensiveChecks?cacheExpensive:cacheDefault;if(!(parsedExpression=cache[cacheKey])){":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2));var parseOptions=expensiveChecks?$parseOptionsExpensive:$parseOptions,lexer=new Lexer(parseOptions);(parsedExpression=new Parser(lexer,$filter,parseOptions).parse(exp)).constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate:parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),expensiveChecks&&(parsedExpression=expensiveChecksInterceptor(parsedExpression)),cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}function expensiveChecksInterceptor(fn){function expensiveCheckFn(scope,locals,assign,inputs){var expensiveCheckOldValue=runningChecksEnabled;runningChecksEnabled=!0;try{return fn(scope,locals,assign,inputs)}finally{runningChecksEnabled=expensiveCheckOldValue}}if(!fn)return fn;expensiveCheckFn.$$watchDelegate=fn.$$watchDelegate,expensiveCheckFn.assign=expensiveChecksInterceptor(fn.assign),expensiveCheckFn.constant=fn.constant,expensiveCheckFn.literal=fn.literal;for(var i=0;fn.inputs&&i<fn.inputs.length;++i)fn.inputs[i]=expensiveChecksInterceptor(fn.inputs[i]);return expensiveCheckFn.inputs=fn.inputs,expensiveCheckFn}function expressionInputDirtyCheck(newValue,oldValueOfValue){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:("object"!=typeof newValue||"object"!=typeof(newValue=getValueOf(newValue)))&&(newValue===oldValueOfValue||newValue!==newValue&&oldValueOfValue!==oldValueOfValue)}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var lastResult,inputExpressions=parsedExpression.inputs;if(1===inputExpressions.length){var oldInputValueOf=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValueOf)||(lastResult=parsedExpression(scope,undefined,undefined,[newInputValue]),oldInputValueOf=newInputValue&&getValueOf(newInputValue)),lastResult},listener,objectEquality,prettyPrintExpression)}for(var oldInputValueOfValues=[],oldInputValues=[],i=0,ii=inputExpressions.length;i<ii;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck,oldInputValues[i]=null;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;i<ii;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i])))&&(oldInputValues[i]=newInputValue,oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope,undefined,undefined,oldInputValues)),lastResult},listener,objectEquality,prettyPrintExpression)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.apply(this,arguments),isDefined(value)&&scope.$$postDigest(function(){isDefined(lastValue)&&unwatch()})},objectEquality)}function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.call(this,value,old,scope),isAllDefined(value)&&scope.$$postDigest(function(){isAllDefined(lastValue)&&unwatch()})},objectEquality)}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch;return unwatch=scope.$watch(function(scope){return unwatch(),parsedExpression(scope)},listener,objectEquality)}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate,useInputs=!1,fn=watchDelegate!==oneTimeLiteralWatchDelegate&&watchDelegate!==oneTimeWatchDelegate?function(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs);return interceptorFn(value,scope,locals)}:function(scope,locals,assign,inputs){var value=parsedExpression(scope,locals,assign,inputs),result=interceptorFn(value,scope,locals);return isDefined(value)?result:value};return parsedExpression.$$watchDelegate&&parsedExpression.$$watchDelegate!==inputsWatchDelegate?fn.$$watchDelegate=parsedExpression.$$watchDelegate:interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,useInputs=!parsedExpression.inputs,fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression]),fn}var noUnsafeEval=csp().noUnsafeEval,$parseOptions={csp:noUnsafeEval,expensiveChecks:!1,literals:copy(literals)},$parseOptionsExpensive={csp:noUnsafeEval,expensiveChecks:!0,literals:copy(literals)},runningChecksEnabled=!1;return $parse.$$runningExpensiveChecks=function(){return runningChecksEnabled},$parse}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function $$QProvider(){this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function Promise(){this.$$state={status:0}}function simpleBind(context,fn){return function(value){fn.call(context,value)}}function processQueue(state){var fn,deferred,pending;pending=state.pending,state.processScheduled=!1,state.pending=undefined;for(var i=0,ii=pending.length;i<ii;++i){deferred=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?deferred.resolve(fn(state.value)):1===state.status?deferred.resolve(state.value):deferred.reject(state.value)}catch(e){deferred.reject(e),exceptionHandler(e)}}}function scheduleProcessQueue(state){!state.processScheduled&&state.pending&&(state.processScheduled=!0,nextTick(function(){processQueue(state)}))}function Deferred(){this.promise=new Promise}var $qMinErr=minErr("$q",TypeError);extend(Promise.prototype,{then:function(onFulfilled,onRejected,progressBack){if(isUndefined(onFulfilled)&&isUndefined(onRejected)&&isUndefined(progressBack))return this;var result=new Deferred;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result.promise},catch:function(callback){return this.then(null,callback)},finally:function(callback,progressBack){return this.then(function(value){return handleCallback(value,!0,callback)},function(error){return handleCallback(error,!1,callback)},progressBack)}}),extend(Deferred.prototype,{resolve:function(val){this.promise.$$state.status||(val===this.promise?this.$$reject($qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):this.$$resolve(val))},$$resolve:function(val){function rejectPromise(val){done||(done=!0,that.$$reject(val))}var then,that=this,done=!1;try{(isObject(val)||isFunction(val))&&(then=val&&val.then),isFunction(then)?(this.promise.$$state.status=-1,then.call(val,function(val){done||(done=!0,that.$$resolve(val))},rejectPromise,simpleBind(this,this.notify))):(this.promise.$$state.value=val,this.promise.$$state.status=1,scheduleProcessQueue(this.promise.$$state))}catch(e){rejectPromise(e),exceptionHandler(e)}},reject:function(reason){this.promise.$$state.status||this.$$reject(reason)},$$reject:function(reason){this.promise.$$state.value=reason,this.promise.$$state.status=2,scheduleProcessQueue(this.promise.$$state)},notify:function(progress){var callbacks=this.promise.$$state.pending;this.promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;i<ii;i++){result=callbacks[i][0],callback=callbacks[i][3];try{result.notify(isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}});var makePromise=function(value,resolved){var result=new Deferred;return resolved?result.resolve(value):result.reject(value),result.promise},handleCallback=function(value,isResolved,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)},when=function(value,callback,errback,progressBack){var result=new Deferred;return result.resolve(value),result.promise.then(callback,errback,progressBack)},resolve=when,$Q=function(resolver){if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);var deferred=new Deferred;return resolver(function(value){deferred.resolve(value)},function(reason){deferred.reject(reason)}),deferred.promise};return $Q.prototype=Promise.prototype,$Q.defer=function(){var d=new Deferred;return d.resolve=simpleBind(d,d.resolve),d.reject=simpleBind(d,d.reject),d.notify=simpleBind(d,d.notify),d},$Q.reject=function(reason){var result=new Deferred;return result.reject(reason),result.promise},$Q.when=when,$Q.resolve=resolve,$Q.all=function(promises){var deferred=new Deferred,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise},$Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){function createChildScopeClass(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null}return ChildScope.prototype=parent,ChildScope}var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$exceptionHandler","$parse","$browser",function($exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}function cleanUpScope($scope){9===msie&&($scope.$$childHead&&cleanUpScope($scope.$$childHead),$scope.$$nextSibling&&cleanUpScope($scope.$$nextSibling)),$scope.$parent=$scope.$$nextSibling=$scope.$$prevSibling=$scope.$$childHead=$scope.$$childTail=$scope.$root=$scope.$$watchers=null}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function incrementWatchersCount(current,count){do{current.$$watchersCount+=count}while(current=current.$parent)}function decrementListenerCount(current,count,name){do{current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name]}while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}function scheduleApplyAsync(){null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)}))}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;return parent=parent||this,isolate?(child=new Scope).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=createChildScopeClass(this)),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!=this)&&child.$on("$destroy",destroyChildScope),child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get,watchExp);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||(array=scope.$$watchers=[]),array.unshift(watcher),incrementWatchersCount(this,1),function(){arrayRemove(array,watcher)>=0&&incrementWatchersCount(scope,-1),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}return 1===watchExpressions.length?this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)}):(forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()})},$watchCollection:function(obj,listener){function $watchCollectionInterceptor(_value){var newLength,key,newItem,oldItem;if(!isUndefined(newValue=_value)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldLength=(oldValue=internalArray).length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;i<newLength;i++)oldItem=oldValue[i],newItem=newValue[i],oldItem!==oldItem&&newItem!==newItem||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)hasOwnProperty.call(newValue,key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?oldItem!==oldItem&&newItem!==newItem||oldItem===newItem||(changeDetected++,oldValue[key]=newItem):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)hasOwnProperty.call(newValue,key)||(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}$watchCollectionInterceptor.$stateful=!0;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch(changeDetector,function(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue})},$digest:function(){var watch,value,last,get,watchers,length,dirty,next,current,logIdx,asyncTask,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{for(dirty=!1,current=target;asyncQueue.length;){try{(asyncTask=asyncQueue.shift()).scope.$eval(asyncTask.expression,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if(get=watch.get,(value=get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,(0,watch.fn)(value,last===initWatchVal?value:last,current),ttl<5&&(watchLog[logIdx=4-ttl]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=current.$$watchersCount&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===$rootScope&&$browser.$$applicationDestroyed(),incrementWatchersCount(this,-this.$$watchersCount);for(var eventName in this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent&&parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent&&parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$$nextSibling=null,cleanUpScope(this)}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer(function(){asyncQueue.length&&$rootScope.$digest()}),asyncQueue.push({scope:this,expression:$parse(expr),locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{beginPhase("$apply");try{return this.$eval(expr)}finally{clearPhase()}}catch(e){$exceptionHandler(e)}finally{try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){var scope=this;expr&&applyAsyncQueue.push(function(){scope.$eval(expr)}),expr=$parse(expr),scheduleApplyAsync()},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do{current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++}while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);-1!==indexOfListener&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;i<length;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name,args){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!target.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,i=0,length=(listeners=current.$$listeners[name]||[]).length;i<length;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[];return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return""===(normalizedVal=urlResolve(uri).href)||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;i<n;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;i<n;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:function(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||isUndefined(trustedValue)||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)},getTrusted:function(type,maybeTrusted){if(null===maybeTrusted||isUndefined(maybeTrusted)||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&msie<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},hasHistoryPushState=!($window.chrome&&$window.chrome.app&&$window.chrome.app.runtime)&&$window.history&&$window.history.pushState,android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},vendorRegex=/^(Moz|webkit|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=(vendorPrefix=match[0]).substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(bodyStyle.webkitTransition),animations=isString(bodyStyle.webkitAnimation))}return{history:!(!hasHistoryPushState||android<4||boxee),hasEvent:function(event){if("input"===event&&msie<=11)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android}}]}function $TemplateRequestProvider(){var httpOptions;this.httpOptions=function(val){return val?(httpOptions=val,this):httpOptions},this.$get=["$templateCache","$http","$q","$sce",function($templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){handleRequestFn.totalPendingRequests++,isString(tpl)&&$templateCache.get(tpl)||(tpl=$sce.getTrustedResourceUrl(tpl));var transformResponse=$http.defaults&&$http.defaults.transformResponse;return isArray(transformResponse)?transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform}):transformResponse===defaultHttpResponseTransform&&(transformResponse=null),$http.get(tpl,extend({cache:$templateCache,transformResponse:transformResponse},httpOptions)).finally(function(){handleRequestFn.totalPendingRequests--}).then(function(response){return $templateCache.put(tpl,response.data),response.data},function(resp){if(!ignoreRequestError)throw $templateRequestMinErr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",tpl,resp.status,resp.statusText);return $q.reject(resp)})}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={};return testability.findBindings=function(element,expression,opt_exactMatch){var matches=[];return forEach(element.getElementsByClassName("ng-binding"),function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){opt_exactMatch?new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)").test(bindingName)&&matches.push(binding):-1!=bindingName.indexOf(expression)&&matches.push(binding)})}),matches},testability.findModels=function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?"=":"*=",selector="["+prefixes[p]+"model"+attributeEquals+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},testability.getLocation=function(){return $location.url()},testability.setLocation=function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback)},testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){function timeout(fn,delay,invokeApply){isFunction(fn)||(invokeApply=delay,delay=fn,fn=noop);var timeoutId,args=sliceArgs(arguments,3),skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return!!(promise&&promise.$$timeoutId in deferreds)&&(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId))},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $$CookieReader($document){function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}var rawDocument=$document[0]||{},lastCookies={},lastCookieString="";return function(){var cookieArray,cookie,i,index,name,currentCookieString=rawDocument.cookie||"";if(currentCookieString!==lastCookieString)for(cookieArray=(lastCookieString=currentCookieString).split("; "),lastCookies={},i=0;i<cookieArray.length;i++)(index=(cookie=cookieArray[i]).indexOf("="))>0&&(name=safeDecodeURIComponent(cookie.substring(0,index)),isUndefined(lastCookies[name])&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}}function $$CookieReaderProvider(){this.$get=$$CookieReader}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArrayLike(array)){if(null==array)return array;throw minErr("filter")("notarray","Expected array but received: {0}",array)}var predicateFn,matchAgainstAnyProp;switch(getTypeForFilter(expression)){case"function":predicateFn=expression;break;case"boolean":case"null":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=createPredicateFn(expression,comparator,matchAgainstAnyProp);break;default:return array}return Array.prototype.filter.call(array,predicateFn)}}function createPredicateFn(expression,comparator,matchAgainstAnyProp){var shouldMatchPrimitives=isObject(expression)&&"$"in expression;return!0===comparator?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return!isUndefined(actual)&&(null===actual||null===expected?actual===expected:!(isObject(expected)||isObject(actual)&&!hasCustomToString(actual))&&(actual=lowercase(""+actual),expected=lowercase(""+expected),-1!==actual.indexOf(expected)))}),function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression.$,comparator,!1):deepCompare(item,expression,comparator,matchAgainstAnyProp)}}function deepCompare(actual,expected,comparator,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual),expectedType=getTypeForFilter(expected);if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,matchAgainstAnyProp);if(isArray(actual))return actual.some(function(item){return deepCompare(item,expected,comparator,matchAgainstAnyProp)});switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if("$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,!0))return!0;return!dontMatchWholeObject&&deepCompare(actual,expected,comparator,!1)}if("object"===expectedType){for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)&&!isUndefined(expectedVal)){var matchAnyProperty="$"===key;if(!deepCompare(matchAnyProperty?actual:actual[key],expectedVal,comparator,matchAnyProperty,matchAnyProperty))return!1}}return!0}return comparator(actual,expected);case"function":return!1;default:return comparator(actual,expected)}}function getTypeForFilter(val){return null===val?"null":typeof val}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function parse(numStr){var digits,numberOfIntegerDigits,i,j,zeros,exponent=0;for((numberOfIntegerDigits=numStr.indexOf(DECIMAL_SEP))>-1&&(numStr=numStr.replace(DECIMAL_SEP,"")),(i=numStr.search(/e/i))>0?(numberOfIntegerDigits<0&&(numberOfIntegerDigits=i),numberOfIntegerDigits+=+numStr.slice(i+1),numStr=numStr.substring(0,i)):numberOfIntegerDigits<0&&(numberOfIntegerDigits=numStr.length),i=0;numStr.charAt(i)==ZERO_CHAR;i++);if(i==(zeros=numStr.length))digits=[0],numberOfIntegerDigits=1;else{for(zeros--;numStr.charAt(zeros)==ZERO_CHAR;)zeros--;for(numberOfIntegerDigits-=i,digits=[],j=0;i<=zeros;i++,j++)digits[j]=+numStr.charAt(i)}return numberOfIntegerDigits>MAX_DIGITS&&(digits=digits.splice(0,MAX_DIGITS-1),exponent=numberOfIntegerDigits-1,numberOfIntegerDigits=1),{d:digits,e:exponent,i:numberOfIntegerDigits}}function roundNumber(parsedNumber,fractionSize,minFrac,maxFrac){var digits=parsedNumber.d,fractionLen=digits.length-parsedNumber.i,roundAt=(fractionSize=isUndefined(fractionSize)?Math.min(Math.max(minFrac,fractionLen),maxFrac):+fractionSize)+parsedNumber.i,digit=digits[roundAt];if(roundAt>0){digits.splice(Math.max(parsedNumber.i,roundAt));for(var j=roundAt;j<digits.length;j++)digits[j]=0}else{fractionLen=Math.max(0,fractionLen),parsedNumber.i=1,digits.length=Math.max(1,roundAt=fractionSize+1),digits[0]=0;for(var i=1;i<roundAt;i++)digits[i]=0}if(digit>=5)if(roundAt-1<0){for(var k=0;k>roundAt;k--)digits.unshift(0),parsedNumber.i++;digits.unshift(1),parsedNumber.i++}else digits[roundAt-1]++;for(;fractionLen<Math.max(0,fractionSize);fractionLen++)digits.push(0);var carry=digits.reduceRight(function(carry,d,i,digits){return d+=carry,digits[i]=d%10,Math.floor(d/10)},0);carry&&(digits.unshift(carry),parsedNumber.i++)}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isString(number)&&!isNumber(number)||isNaN(number))return"";var parsedNumber,isInfinity=!isFinite(number),isZero=!1,numStr=Math.abs(number)+"",formattedText="";if(isInfinity)formattedText="∞";else{roundNumber(parsedNumber=parse(numStr),fractionSize,pattern.minFrac,pattern.maxFrac);var digits=parsedNumber.d,integerLen=parsedNumber.i,exponent=parsedNumber.e,decimals=[];for(isZero=digits.reduce(function(isZero,d){return isZero&&!d},!0);integerLen<0;)digits.unshift(0),integerLen++;integerLen>0?decimals=digits.splice(integerLen):(decimals=digits,digits=[0]);var groups=[];for(digits.length>=pattern.lgSize&&groups.unshift(digits.splice(-pattern.lgSize).join(""));digits.length>pattern.gSize;)groups.unshift(digits.splice(-pattern.gSize).join(""));digits.length&&groups.unshift(digits.join("")),formattedText=groups.join(groupSep),decimals.length&&(formattedText+=decimalSep+decimals.join("")),exponent&&(formattedText+="e+"+exponent)}return number<0&&!isZero?pattern.negPre+formattedText+pattern.negSuf:pattern.posPre+formattedText+pattern.posSuf}function padNumber(num,digits,trim,negWrap){var neg="";for((num<0||negWrap&&num<=0)&&(negWrap?num=1-num:(num=-num,neg="-")),num=""+num;num.length<digits;)num=ZERO_CHAR+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim,negWrap){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim,negWrap)}}function dateStrGetter(name,shortForm,standAlone){return function(date,formats){var value=date["get"+name]();return formats[uppercase((standAlone?"STANDALONE":"")+(shortForm?"SHORT":"")+name)][value]}}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(dayOfWeekOnFirst<=4?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),diff=+getThursdayThisWeek(date)-+firstThurs;return padNumber(1+Math.round(diff/6048e5),size)}}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour,m=toInt(match[5]||0)-tzMin,s=toInt(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?toInt(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date)||!isFinite(date.getTime()))return date;for(;format;)(match=DATE_FORMATS_SPLIT.exec(format))?format=(parts=concat(parts,match,1)).pop():(parts.push(format),format=null);var dateTimezoneOffset=date.getTimezoneOffset();return timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset),date=convertTimezoneToLocal(date,timezone,!0)),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):"''"===value?"'":value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}function limitToFilter(){return function(input,limit,begin){return limit=Math.abs(Number(limit))===1/0?Number(limit):toInt(limit),isNaN(limit)?input:(isNumber(input)&&(input=input.toString()),isArray(input)||isString(input)?(begin=!begin||isNaN(begin)?0:toInt(begin),begin=begin<0?Math.max(0,input.length+begin):begin,limit>=0?input.slice(begin,begin+limit):0===begin?input.slice(limit,input.length):input.slice(Math.max(0,begin+limit),begin)):input)}}function orderByFilter($parse){function processPredicates(sortPredicate,reverseOrder){return reverseOrder=reverseOrder?-1:1,sortPredicate.map(function(predicate){var descending=1,get=identity;if(isFunction(predicate))get=predicate;else if(isString(predicate)&&("+"!=predicate.charAt(0)&&"-"!=predicate.charAt(0)||(descending="-"==predicate.charAt(0)?-1:1,predicate=predicate.substring(1)),""!==predicate&&(get=$parse(predicate)).constant)){var key=get();get=function(value){return value[key]}}return{get:get,descending:descending*reverseOrder}})}function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function objectValue(value,index){return"function"==typeof value.valueOf&&(value=value.valueOf(),isPrimitive(value))?value:hasCustomToString(value)&&(value=value.toString(),isPrimitive(value))?value:index}function getPredicateValue(value,index){var type=typeof value;return null===value?(type="string",value="null"):"string"===type?value=value.toLowerCase():"object"===type&&(value=objectValue(value,index)),{value:value,type:type}}function compare(v1,v2){var result=0;return v1.type===v2.type?v1.value!==v2.value&&(result=v1.value<v2.value?-1:1):result=v1.type<v2.type?-1:1,result}return function(array,sortPredicate,reverseOrder){if(null==array)return array;if(!isArrayLike(array))throw minErr("orderBy")("notarray","Expected array but received: {0}",array);isArray(sortPredicate)||(sortPredicate=[sortPredicate]),0===sortPredicate.length&&(sortPredicate=["+"]);var predicates=processPredicates(sortPredicate,reverseOrder);predicates.push({get:function(){return{}},descending:reverseOrder?-1:1});var compareValues=Array.prototype.map.call(array,function(value,index){return{value:value,predicateValues:predicates.map(function(predicate){return getPredicateValue(predicate.get(value),index)})}});return compareValues.sort(function(v1,v2){for(var result=0,index=0,length=predicates.length;index<length&&!(result=compare(v1.predicateValues[index],v2.predicateValues[index])*predicates[index].descending);++index);return result}),array=compareValues.map(function(item){return item.value})}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function FormController(element,attrs,$scope,$animate,$interpolate){var form=this,controls=[];form.$error={},form.$$success={},form.$pending=undefined,form.$name=$interpolate(attrs.name||attrs.ngForm||"")($scope),form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,form.$submitted=!1,form.$$parentForm=nullFormCtrl,form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue()})},form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control),control.$$parentForm=form},form.$$renameControl=function(control,newName){var oldName=control.$name;form[oldName]===control&&delete form[oldName],form[newName]=control,control.$name=newName},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(form.$pending,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$error,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$$success,function(value,name){form.$setValidity(name,null,control)}),arrayRemove(controls,control),control.$$parentForm=nullFormCtrl},addSetValidityMethod({ctrl:this,$element:element,set:function(object,property,controller){var list=object[property];list?-1===list.indexOf(controller)&&list.push(controller):object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])},$animate:$animate}),form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,form.$$parentForm.$setDirty()},form.$setPristine=function(){$animate.setClass(element,PRISTINE_CLASS,DIRTY_CLASS+" "+SUBMITTED_CLASS),form.$dirty=!1,form.$pristine=!0,form.$submitted=!1,forEach(controls,function(control){control.$setPristine()})},form.$setUntouched=function(){forEach(controls,function(control){control.$setUntouched()})},form.$setSubmitted=function(){$animate.addClass(element,SUBMITTED_CLASS),form.$submitted=!0,form.$$parentForm.$setSubmitted()}}function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var timeout,listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer(function(){timeout=null,input&&input.value===origValue||listener(ev)}))};element.on("keydown",function(event){var key=event.keyCode;91===key||15<key&&key<19||37<=key&&key<=40||deferListener(event,this,this.value)}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),PARTIAL_VALIDATION_TYPES[type]&&ctrl.$$hasNativeValidators&&type===attr.type&&element.on(PARTIAL_VALIDATION_EVENTS,function(ev){if(!timeout){var validity=this[VALIDITY_STATE_PROPERTY],origBadInput=validity.badInput,origTypeMismatch=validity.typeMismatch;timeout=$browser.defer(function(){timeout=null,validity.badInput===origBadInput&&validity.typeMismatch===origTypeMismatch||listener(ev)})}}),ctrl.$render=function(){var value=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue;element.val()!==value&&element.val(value)}}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'==iso.charAt(0)&&'"'==iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)}),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0)}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter){function isValidDate(value){return value&&!(value.getTime&&value.getTime()!==value.getTime())}function parseObservedDateValue(val){return isDefined(val)&&!isDate(val)?parseDate(val)||undefined:val}badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var previousDate,timezone=ctrl&&ctrl.$options&&ctrl.$options.timezone;if(ctrl.$$parserName=type,ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);return timezone&&(parsedDate=convertTimezoneToLocal(parsedDate,timezone)),parsedDate}return undefined}),ctrl.$formatters.push(function(value){if(value&&!isDate(value))throw ngModelMinErr("datefmt","Expected `{0}` to be a date",value);return isValidDate(value)?((previousDate=value)&&timezone&&(previousDate=convertTimezoneToLocal(previousDate,timezone,!0)),$filter("date")(value,format,timezone)):(previousDate=null,"")}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",function(val){minVal=parseObservedDateValue(val),ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()})}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0];(ctrl.$$hasNativeValidators=isObject(node.validity))&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput||validity.typeMismatch?undefined:value})}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(!(parseFn=$parse(expression)).constant)throw ngModelMinErr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){var classes=[];return isArray(classVal)?(forEach(classVal,function(v){classes=classes.concat(arrayClasses(v))}),classes):isString(classVal)?classVal.split(" "):isObject(classVal)?(forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes):classVal}return{restrict:"AC",link:function(scope,element,attr){function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||createMap(),classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toAdd=digestClassCounts(toAdd,1),toRemove=digestClassCounts(toRemove,-1),toAdd&&toAdd.length&&$animate.addClass(element,toAdd),toRemove&&toRemove.length&&$animate.removeClass(element,toRemove)}function ngClassWatchAction(newVal){if(!0===selector||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);oldVal?equals(newVal,oldVal)||updateClasses(arrayClasses(oldVal),newClasses):addClasses(newClasses)}oldVal=shallowCopy(newVal)}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(value){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes)}})}}}]}function addSetValidityMethod(context){function createAndSet(name,value,controller){ctrl[name]||(ctrl[name]={}),set(ctrl[name],value,controller)}function unsetAndCleanup(name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller),isObjectEmpty(ctrl[name])&&(ctrl[name]=undefined)}function cachedToggleClass(className,switchValue){switchValue&&!classCache[className]?($animate.addClass($element,className),classCache[className]=!0):!switchValue&&classCache[className]&&($animate.removeClass($element,className),classCache[className]=!1)}function toggleValidationCss(validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(VALID_CLASS+validationErrorKey,!0===isValid),cachedToggleClass(INVALID_CLASS+validationErrorKey,!1===isValid)}var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,$animate=context.$animate;classCache[INVALID_CLASS]=!(classCache[VALID_CLASS]=$element.hasClass(VALID_CLASS)),ctrl.$setValidity=function(validationErrorKey,state,controller){isUndefined(state)?createAndSet("$pending",validationErrorKey,controller):unsetAndCleanup("$pending",validationErrorKey,controller),isBoolean(state)?state?(unset(ctrl.$error,validationErrorKey,controller),set(ctrl.$$success,validationErrorKey,controller)):(set(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)):(unset(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)),ctrl.$pending?(cachedToggleClass(PENDING_CLASS,!0),ctrl.$valid=ctrl.$invalid=undefined,toggleValidationCss("",null)):(cachedToggleClass(PENDING_CLASS,!1),ctrl.$valid=isObjectEmpty(ctrl.$error),ctrl.$invalid=!ctrl.$valid,toggleValidationCss("",ctrl.$valid));var combinedState;toggleValidationCss(validationErrorKey,combinedState=ctrl.$pending&&ctrl.$pending[validationErrorKey]?undefined:!ctrl.$error[validationErrorKey]&&(!!ctrl.$$success[validationErrorKey]||null)),ctrl.$$parentForm.$setValidity(validationErrorKey,combinedState,ctrl)}}function isObjectEmpty(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}function chromeHack(optionElement){optionElement[0].hasAttribute("selected")&&(optionElement[0].selected=!0)}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",hasOwnProperty=Object.prototype.hasOwnProperty,lowercase=function(string){return isString(string)?string.toLowerCase():string},uppercase=function(string){return isString(string)?string.toUpperCase():string};"i"!=="I".toLowerCase()&&(lowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},uppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s});var msie,jqLite,jQuery,angularModule,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;msie=document.documentMode,noop.$inject=[],identity.$inject=[];var isArray=Array.isArray,TYPED_ARRAY_REGEXP=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},csp=function(){if(!isDefined(csp.rules)){var ngCspElement=document.querySelector("[ng-csp]")||document.querySelector("[data-ng-csp]");if(ngCspElement){var ngCspAttribute=ngCspElement.getAttribute("ng-csp")||ngCspElement.getAttribute("data-ng-csp");csp.rules={noUnsafeEval:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-unsafe-eval"),noInlineStyle:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-inline-style")}}else csp.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return csp.rules},jq=function(){if(isDefined(jq.name_))return jq.name_;var el,i,prefix,name,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(prefix=ngAttrPrefixes[i],el=document.querySelector("["+prefix.replace(":","\\:")+"jq]")){name=el.getAttribute(prefix+"jq");break}return jq.name_=name},ALL_COLONS=/:/g,ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"],SNAKE_CASE_REGEXP=/[A-Z]/g,bindJQueryFired=!1,NODE_TYPE_ELEMENT=1,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11,version={full:"1.5.3",major:1,minor:5,dot:3,codeName:"diplohaplontic-meiosis"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=function(element,type,fn){element.addEventListener(type,fn,!1)},removeEventListenerFn=function(element,type,fn){element.removeEventListener(type,fn,!1)};JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:-]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var jqLiteContains=Node.prototype.contains||function(arg){return!!(16&this.compareDocumentPosition(arg))},JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:function(node){for(var key in jqCache[node.ng339])return!0;return!1},cleanData:function(nodes){for(var i=0,ii=nodes.length;i<ii;i++)jqLiteRemoveData(nodes[i])}},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=camelCase(name),!isDefined(value))return element.style[name];element.style[name]=value},attr:function(element,name,value){var nodeType=element.nodeType;if(nodeType!==NODE_TYPE_TEXT&&2!==nodeType&&nodeType!==NODE_TYPE_COMMENT){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}}},prop:function(element,name,value){if(!isDefined(value))return element[name];element[name]=value},text:function(){function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}return getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;jqLiteDealoc(element,!0),element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&isUndefined(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)){if(isObject(arg1)){for(i=0;i<nodeCount;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=isUndefined(value)?Math.min(nodeCount,1):nodeCount,j=0;j<jj;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<nodeCount;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=createEventHandler(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length,addHandler=function(type,specialHandlerWrapper,noEventListener){var eventFns=events[type];eventFns||((eventFns=events[type]=[]).specialHandlerWrapper=specialHandlerWrapper,"$destroy"===type||noEventListener||addEventListenerFn(element,type,handle)),eventFns.push(fn)};i--;)type=types[i],MOUSE_EVENT_MAP[type]?(addHandler(MOUSE_EVENT_MAP[type],specialMouseHandlerWrapper),addHandler(type,undefined,!0)):addHandler(type)}},off:jqLiteOff,one:function(element,type,fn){(element=jqLite(element)).on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){element.nodeType===NODE_TYPE_ELEMENT&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_DOCUMENT_FRAGMENT)for(var i=0,ii=(node=new JQLite(node)).length;i<ii;i++){var child=node[i];element.appendChild(child)}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){jqLiteWrapNode(element,jqLite(wrapNode).eq(0).clone()[0])},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){for(var index=element,parent=element.parentNode,i=0,ii=(newElement=new JQLite(newElement)).length;i<ii;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;i<ii;i++)isUndefined(value)?isDefined(value=fn(this[i],arg1,arg2,arg3))&&(value=jqLite(value)):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var $$HashMapProvider=[function(){this.$get=[function(){return HashMap}]}],ARROW_ARG=/^([^\(]+?)=>/,FN_ARGS=/^[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");createInjector.$$annotate=function(fn,strictDi,name){var $inject,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||anonFn(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);forEach(extractArgs(fn)[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(assertArgFn(fn[last=fn.length-1],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject};var $animateMinErr=minErr("$animate"),ELEMENT_NODE=1,$$CoreAnimateJsProvider=function(){this.$get=noop},$$CoreAnimateQueueProvider=function(){var postDigestQueue=new HashMap,postDigestElements=[];this.$get=["$$AnimateRunner","$rootScope",function($$AnimateRunner,$rootScope){function updateData(data,classes,value){var changed=!1;return classes&&forEach(classes=isString(classes)?classes.split(" "):isArray(classes)?classes:[],function(className){className&&(changed=!0,data[className]=value)}),changed}function handleCSSClassChanges(){forEach(postDigestElements,function(element){var data=postDigestQueue.get(element);if(data){var existing=splitClasses(element.attr("class")),toAdd="",toRemove="";forEach(data,function(status,className){status!==!!existing[className]&&(status?toAdd+=(toAdd.length?" ":"")+className:toRemove+=(toRemove.length?" ":"")+className)}),forEach(element,function(elm){toAdd&&jqLiteAddClass(elm,toAdd),toRemove&&jqLiteRemoveClass(elm,toRemove)}),postDigestQueue.remove(element)}}),postDigestElements.length=0}function addRemoveClassesPostDigest(element,add,remove){var data=postDigestQueue.get(element)||{},classesAdded=updateData(data,add,!0),classesRemoved=updateData(data,remove,!1);(classesAdded||classesRemoved)&&(postDigestQueue.put(element,data),postDigestElements.push(element),1===postDigestElements.length&&$rootScope.$$postDigest(handleCSSClassChanges))}return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){domOperation&&domOperation(),(options=options||{}).from&&element.css(options.from),options.to&&element.css(options.to),(options.addClass||options.removeClass)&&addRemoveClassesPostDigest(element,options.addClass,options.removeClass);var runner=new $$AnimateRunner;return runner.complete(),runner}}}]},$AnimateProvider=["$provide",function($provide){var provider=this;this.$$registeredAnimations=Object.create(null),this.register=function(name,factory){if(name&&"."!==name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);var key=name+"-animation";provider.$$registeredAnimations[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){if(1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null,this.$$classNameFilter&&new RegExp("(\\s+|\\/)ng-animate(\\s+|\\/)").test(this.$$classNameFilter.toString())))throw $animateMinErr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=extractElementNode(afterElement);!afterNode||afterNode.parentNode||afterNode.previousElementSibling||(afterElement=null)}afterElement?afterElement.after(element):parentElement.prepend(element)}return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){runner.end&&runner.end()},enter:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),parent=parent||after.parent(),domInsert(element,parent,after),$$animateQueue.push(element,"enter",prepareAnimateOptions(options))},move:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),parent=parent||after.parent(),domInsert(element,parent,after),$$animateQueue.push(element,"move",prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,"leave",prepareAnimateOptions(options),function(){element.remove()})},addClass:function(element,className,options){return options=prepareAnimateOptions(options),options.addClass=mergeClasses(options.addclass,className),$$animateQueue.push(element,"addClass",options)},removeClass:function(element,className,options){return options=prepareAnimateOptions(options),options.removeClass=mergeClasses(options.removeClass,className),$$animateQueue.push(element,"removeClass",options)},setClass:function(element,add,remove,options){return options=prepareAnimateOptions(options),options.addClass=mergeClasses(options.addClass,add),options.removeClass=mergeClasses(options.removeClass,remove),$$animateQueue.push(element,"setClass",options)},animate:function(element,from,to,className,options){return options=prepareAnimateOptions(options),options.from=options.from?extend(options.from,from):from,options.to=options.to?extend(options.to,to):to,className=className||"ng-inline-animate",options.tempClasses=mergeClasses(options.tempClasses,className),$$animateQueue.push(element,"animate",options)}}}]}],$$AnimateAsyncRunFactoryProvider=function(){this.$get=["$$rAF",function($$rAF){function waitForTick(fn){waitQueue.push(fn),waitQueue.length>1||$$rAF(function(){for(var i=0;i<waitQueue.length;i++)waitQueue[i]();waitQueue=[]})}var waitQueue=[];return function(){var passed=!1;return waitForTick(function(){passed=!0}),function(callback){passed?callback():waitForTick(callback)}}}]},$$AnimateRunnerFactoryProvider=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function($q,$sniffer,$$animateAsyncRun,$document,$timeout){function AnimateRunner(host){this.setHost(host);var rafTick=$$animateAsyncRun(),timeoutTick=function(fn){$timeout(fn,0,!1)};this._doneCallbacks=[],this._tick=function(fn){var doc=$document[0];doc&&doc.hidden?timeoutTick(fn):rafTick(fn)},this._state=0}return AnimateRunner.chain=function(chain,callback){function next(){index!==chain.length?chain[index](function(response){!1!==response?(index++,next()):callback(!1)}):callback(!0)}var index=0;next()},AnimateRunner.all=function(runners,callback){function onProgress(response){status=status&&response,++count===runners.length&&callback(status)}var count=0,status=!0;forEach(runners,function(runner){runner.done(onProgress)})},AnimateRunner.prototype={setHost:function(host){this.host=host||{}},done:function(fn){2===this._state?fn():this._doneCallbacks.push(fn)},progress:noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q(function(resolve,reject){self.done(function(status){!1===status?reject():resolve()})})}return this.promise},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler)},catch:function(handler){return this.getPromise().catch(handler)},finally:function(handler){return this.getPromise().finally(handler)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(response){var self=this;0===self._state&&(self._state=1,self._tick(function(){self._resolve(response)}))},_resolve:function(response){2!==this._state&&(forEach(this._doneCallbacks,function(fn){fn(response)}),this._doneCallbacks.length=0,this._state=2)}},AnimateRunner}]},$CoreAnimateCssProvider=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function($$rAF,$q,$$AnimateRunner){return function(element,initialOptions){function run(){return $$rAF(function(){applyAnimationContents(),closed||runner.complete(),closed=!0}),runner}function applyAnimationContents(){options.addClass&&(element.addClass(options.addClass),options.addClass=null),options.removeClass&&(element.removeClass(options.removeClass),options.removeClass=null),options.to&&(element.css(options.to),options.to=null)}var options=initialOptions||{};options.$$prepared||(options=copy(options)),options.cleanupStyles&&(options.from=options.to=null),options.from&&(element.css(options.from),options.from=null);var closed,runner=new $$AnimateRunner;return{start:run,end:run}}}]},$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^((?:x|data)[\:\-_])/i,$controllerMinErr=minErr("$controller"),CNTRL_REG=/^(\S+)(\s+as\s+([\w$]+))?$/,$$ForceReflowProvider=function(){this.$get=["$document",function($document){return function(domNode){return domNode?!domNode.nodeType&&domNode instanceof jqLite&&(domNode=domNode[0]):domNode=$document[0].body,domNode.offsetWidth+1}}]},APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)\]\}',?\n/,$httpMinErr=minErr("$http"),$httpMinErrLegacyFn=function(method){return function(){throw $httpMinErr("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",method)}},$interpolateMinErr=angular.$interpolateMinErr=minErr("$interpolate");$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text)},$interpolateMinErr.interr=function(text,err){return $interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString())};var PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location"),locationPrototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return"/"==(path=null!==path?path.toString():"").charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");forEach(search=copy(search,{}),function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this}});var $parseMinErr=minErr("$parse"),CALL=Function.prototype.call,APPLY=Function.prototype.apply,BIND=Function.prototype.bind,OPERATORS=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(operator){OPERATORS[operator]=!0});var ESCAPE={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(ch))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return-1!==chars.indexOf(ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length&&this.text.charAt(this.index+num)},isNumber:function(ch){return"0"<=ch&&ch<="9"&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"\t"===ch||"\n"===ch||"\v"===ch||" "===ch},isIdent:function(ch){return"a"<=ch&&ch<="z"||"A"<=ch&&ch<="Z"||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){for(var start=this.index;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(!this.isIdent(ch)&&!this.isNumber(ch))break;this.index++}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else string+=ESCAPE[ch]||ch;escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var AST=function(lexer,options){this.lexer=lexer,this.options=options};AST.Program="Program",AST.ExpressionStatement="ExpressionStatement",AST.AssignmentExpression="AssignmentExpression",AST.ConditionalExpression="ConditionalExpression",AST.LogicalExpression="LogicalExpression",AST.BinaryExpression="BinaryExpression",AST.UnaryExpression="UnaryExpression",AST.CallExpression="CallExpression",AST.MemberExpression="MemberExpression",AST.Identifier="Identifier",AST.Literal="Literal",AST.ArrayExpression="ArrayExpression",AST.Property="Property",AST.ObjectExpression="ObjectExpression",AST.ThisExpression="ThisExpression",AST.LocalsExpression="LocalsExpression",AST.NGValueParameter="NGValueParameter",AST.prototype={ast:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value},program:function(){for(var body=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&body.push(this.expressionStatement()),!this.expect(";"))return{type:AST.Program,body:body}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var left=this.expression();this.expect("|");)left=this.filter(left);return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();return this.expect("=")&&(result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:"="}),result},ternary:function(){var alternate,consequent,test=this.logicalOR();return this.expect("?")&&(alternate=this.expression(),this.consume(":"))?(consequent=this.expression(),{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}):test},logicalOR:function(){for(var left=this.logicalAND();this.expect("||");)left={type:AST.LogicalExpression,operator:"||",left:left,right:this.logicalAND()};return left},logicalAND:function(){for(var left=this.equality();this.expect("&&");)left={type:AST.LogicalExpression,operator:"&&",left:left,right:this.equality()};return left},equality:function(){for(var token,left=this.relational();token=this.expect("==","!=","===","!==");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()};return left},relational:function(){for(var token,left=this.additive();token=this.expect("<",">","<=",">=");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()};return left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()};return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()};return left},unary:function(){var token;return(token=this.expect("+","-","!"))?{type:AST.UnaryExpression,operator:token.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var primary;this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?primary=copy(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?primary={type:AST.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());for(var next;next=this.expect("(","[",".");)"("===next.text?(primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()},this.consume(")")):"["===next.text?(primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:!0},this.consume("]")):"."===next.text?primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return primary},filter:function(baseExpression){for(var args=[baseExpression],result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:!0};this.expect(":");)args.push(this.expression());return result},parseArguments:function(){var args=[];if(")"!==this.peekToken().text)do{args.push(this.expression())}while(this.expect(","));return args},identifier:function(){var token=this.consume();return token.identifier||this.throwError("is not a valid identifier",token),{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elements.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:AST.ArrayExpression,elements:elements}},object:function(){var property,properties=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;property={type:AST.Property,kind:"init"},this.peek().constant?property.key=this.constant():this.peek().identifier?property.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),property.value=this.expression(),properties.push(property)}while(this.expect(","));return this.consume("}"),{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return!!token&&(this.tokens.shift(),token)},selfReferential:{this:{type:AST.ThisExpression},$locals:{type:AST.LocalsExpression}}},ASTCompiler.prototype={compile:function(expression,expensiveChecks){var self=this,ast=this.astBuilder.ast(expression);this.state={nextId:0,filters:{},expensiveChecks:expensiveChecks,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},findConstantAndWatchExpressions(ast,self.$filter);var assignable,extra="";if(this.stage="assign",assignable=assignableAST(ast)){this.state.computing="assign";var result=this.nextId();this.recurse(assignable,result),this.return_(result),extra="fn.assign="+this.generateFunction("assign","s,v,l")}var toWatch=getInputs(ast.body);self.stage="inputs",forEach(toWatch,function(watch,key){var fnKey="fn"+key;self.state[fnKey]={vars:[],body:[],own:{}},self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId),self.return_(intoId),self.state.inputs.push(fnKey),watch.watchId=key}),this.state.computing="fn",this.stage="main",this.recurse(ast);var fnString='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+extra+this.watchFns()+"return fn;",fn=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",fnString)(this.$filter,ensureSafeMemberName,ensureSafeObject,ensureSafeFunction,getStringValue,ensureSafeAssignContext,ifDefined,plusFn,expression);return this.state=this.stage=undefined,fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},USE:"use",STRICT:"strict",watchFns:function(){var result=[],fns=this.state.inputs,self=this;return forEach(fns,function(name){result.push("var "+name+"="+self.generateFunction(name,"s"))}),fns.length&&result.push("fn.inputs=["+fns.join(",")+"];"),result.join("")},generateFunction:function(name,params){return"function("+params+"){"+this.varsPrefix(name)+this.body(name)+"};"},filterPrefix:function(){var parts=[],self=this;return forEach(this.state.filters,function(id,filter){parts.push(id+"=$filter("+self.escape(filter)+")")}),parts.length?"var "+parts.join(",")+";":""},varsPrefix:function(section){return this.state[section].vars.length?"var "+this.state[section].vars.join(",")+";":""},body:function(section){return this.state[section].body.join("")},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,args,expression,self=this;if(recursionFn=recursionFn||noop,!skipWatchIdCheck&&isDefined(ast.watchId))return intoId=intoId||this.nextId(),void this.if_("i",this.lazyAssign(intoId,this.computedMember("i",ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,!0));switch(ast.type){case AST.Program:forEach(ast.body,function(expression,pos){self.recurse(expression.expression,undefined,undefined,function(expr){right=expr}),pos!==ast.body.length-1?self.current().body.push(right,";"):self.return_(right)});break;case AST.Literal:expression=this.escape(ast.value),this.assign(intoId,expression),recursionFn(expression);break;case AST.UnaryExpression:this.recurse(ast.argument,undefined,undefined,function(expr){right=expr}),expression=ast.operator+"("+this.ifDefined(right,0)+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,undefined,undefined,function(expr){left=expr}),this.recurse(ast.right,undefined,undefined,function(expr){right=expr}),expression="+"===ast.operator?this.plus(left,right):"-"===ast.operator?this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0):"("+left+")"+ast.operator+"("+right+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId(),self.recurse(ast.left,intoId),self.if_("&&"===ast.operator?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId)),recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId(),self.recurse(ast.test,intoId),self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId)),recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId(),nameId&&(nameId.context="inputs"===self.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",ast.name)+"?l:s"),nameId.computed=!1,nameId.name=ast.name),ensureSafeMemberName(ast.name),self.if_("inputs"===self.stage||self.not(self.getHasOwnProperty("l",ast.name)),function(){self.if_("inputs"===self.stage||"s",function(){create&&1!==create&&self.if_(self.not(self.nonComputedMember("s",ast.name)),self.lazyAssign(self.nonComputedMember("s",ast.name),"{}")),self.assign(intoId,self.nonComputedMember("s",ast.name))})},intoId&&self.lazyAssign(intoId,self.nonComputedMember("l",ast.name))),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.name))&&self.addEnsureSafeObject(intoId),recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId(),intoId=intoId||this.nextId(),self.recurse(ast.object,left,undefined,function(){self.if_(self.notNull(left),function(){create&&1!==create&&self.addEnsureSafeAssignContext(left),ast.computed?(right=self.nextId(),self.recurse(ast.property,right),self.getStringValue(right),self.addEnsureSafeMemberName(right),create&&1!==create&&self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),"{}")),expression=self.ensureSafeObject(self.computedMember(left,right)),self.assign(intoId,expression),nameId&&(nameId.computed=!0,nameId.name=right)):(ensureSafeMemberName(ast.property.name),create&&1!==create&&self.if_(self.not(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),"{}")),expression=self.nonComputedMember(left,ast.property.name),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.property.name))&&(expression=self.ensureSafeObject(expression)),self.assign(intoId,expression),nameId&&(nameId.computed=!1,nameId.name=ast.property.name))},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)},!!create);break;case AST.CallExpression:intoId=intoId||this.nextId(),ast.filter?(right=self.filter(ast.callee.name),args=[],forEach(ast.arguments,function(expr){var argument=self.nextId();self.recurse(expr,argument),args.push(argument)}),expression=right+"("+args.join(",")+")",self.assign(intoId,expression),recursionFn(intoId)):(right=self.nextId(),left={},args=[],self.recurse(ast.callee,right,left,function(){self.if_(self.notNull(right),function(){self.addEnsureSafeFunction(right),forEach(ast.arguments,function(expr){self.recurse(expr,self.nextId(),undefined,function(argument){args.push(self.ensureSafeObject(argument))})}),left.name?(self.state.expensiveChecks||self.addEnsureSafeObject(left.context),expression=self.member(left.context,left.name,left.computed)+"("+args.join(",")+")"):expression=right+"("+args.join(",")+")",expression=self.ensureSafeObject(expression),self.assign(intoId,expression)},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)}));break;case AST.AssignmentExpression:if(right=this.nextId(),left={},!isAssignable(ast.left))throw $parseMinErr("lval","Trying to assign a value to a non l-value");this.recurse(ast.left,undefined,left,function(){self.if_(self.notNull(left.context),function(){self.recurse(ast.right,right),self.addEnsureSafeObject(self.member(left.context,left.name,left.computed)),self.addEnsureSafeAssignContext(left.context),expression=self.member(left.context,left.name,left.computed)+ast.operator+right,self.assign(intoId,expression),recursionFn(intoId||expression)})},1);break;case AST.ArrayExpression:args=[],forEach(ast.elements,function(expr){self.recurse(expr,self.nextId(),undefined,function(argument){args.push(argument)})}),expression="["+args.join(",")+"]",this.assign(intoId,expression),recursionFn(expression);break;case AST.ObjectExpression:args=[],forEach(ast.properties,function(property){self.recurse(property.value,self.nextId(),undefined,function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:""+property.key.value)+":"+expr)})}),expression="{"+args.join(",")+"}",this.assign(intoId,expression),recursionFn(expression);break;case AST.ThisExpression:this.assign(intoId,"s"),recursionFn("s");break;case AST.LocalsExpression:this.assign(intoId,"l"),recursionFn("l");break;case AST.NGValueParameter:this.assign(intoId,"v"),recursionFn("v")}},getHasOwnProperty:function(element,property){var key=element+"."+property,own=this.current().own;return own.hasOwnProperty(key)||(own[key]=this.nextId(!1,element+"&&("+this.escape(property)+" in "+element+")")),own[key]},assign:function(id,value){if(id)return this.current().body.push(id,"=",value,";"),id},filter:function(filterName){return this.state.filters.hasOwnProperty(filterName)||(this.state.filters[filterName]=this.nextId(!0)),this.state.filters[filterName]},ifDefined:function(id,defaultValue){return"ifDefined("+id+","+this.escape(defaultValue)+")"},plus:function(left,right){return"plus("+left+","+right+")"},return_:function(id){this.current().body.push("return ",id,";")},if_:function(test,alternate,consequent){if(!0===test)alternate();else{var body=this.current().body;body.push("if(",test,"){"),alternate(),body.push("}"),consequent&&(body.push("else{"),consequent(),body.push("}"))}},not:function(expression){return"!("+expression+")"},notNull:function(expression){return expression+"!=null"},nonComputedMember:function(left,right){return left+"."+right},computedMember:function(left,right){return left+"["+right+"]"},member:function(left,right,computed){return computed?this.computedMember(left,right):this.nonComputedMember(left,right)},addEnsureSafeObject:function(item){this.current().body.push(this.ensureSafeObject(item),";")},addEnsureSafeMemberName:function(item){this.current().body.push(this.ensureSafeMemberName(item),";")},addEnsureSafeFunction:function(item){this.current().body.push(this.ensureSafeFunction(item),";")},addEnsureSafeAssignContext:function(item){this.current().body.push(this.ensureSafeAssignContext(item),";")},ensureSafeObject:function(item){return"ensureSafeObject("+item+",text)"},ensureSafeMemberName:function(item){return"ensureSafeMemberName("+item+",text)"},ensureSafeFunction:function(item){return"ensureSafeFunction("+item+",text)"},getStringValue:function(item){this.assign(item,"getStringValue("+item+")")},ensureSafeAssignContext:function(item){return"ensureSafeAssignContext("+item+",text)"},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return"'"+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(value))return value.toString();if(!0===value)return"true";if(!1===value)return"false";if(null===value)return"null";if(void 0===value)return"undefined";throw $parseMinErr("esc","IMPOSSIBLE")},nextId:function(skip,init){var id="v"+this.state.nextId++;return skip||this.current().vars.push(id+(init?"="+init:"")),id},current:function(){return this.state[this.state.computing]}},ASTInterpreter.prototype={compile:function(expression,expensiveChecks){var self=this,ast=this.astBuilder.ast(expression);this.expression=expression,this.expensiveChecks=expensiveChecks,findConstantAndWatchExpressions(ast,self.$filter);var assignable,assign;(assignable=assignableAST(ast))&&(assign=this.recurse(assignable));var inputs,toWatch=getInputs(ast.body);toWatch&&(inputs=[],forEach(toWatch,function(watch,key){var input=self.recurse(watch);watch.input=input,inputs.push(input),watch.watchId=key}));var expressions=[];forEach(ast.body,function(expression){expressions.push(self.recurse(expression.expression))});var fn=0===ast.body.length?noop:1===ast.body.length?expressions[0]:function(scope,locals){var lastValue;return forEach(expressions,function(exp){lastValue=exp(scope,locals)}),lastValue};return assign&&(fn.assign=function(scope,value,locals){return assign(scope,locals,value)}),inputs&&(fn.inputs=inputs),fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},recurse:function(ast,context,create){var left,right,args,self=this;if(ast.input)return this.inputs(ast.input,ast.watchId);switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:return right=this.recurse(ast.argument),this["unary"+ast.operator](right,context);case AST.BinaryExpression:case AST.LogicalExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.ConditionalExpression:return this["ternary?:"](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return ensureSafeMemberName(ast.name,self.expression),self.identifier(ast.name,self.expensiveChecks||isPossiblyDangerousMemberName(ast.name),context,create,self.expression);case AST.MemberExpression:return left=this.recurse(ast.object,!1,!!create),ast.computed||(ensureSafeMemberName(ast.property.name,self.expression),right=ast.property.name),ast.computed&&(right=this.recurse(ast.property)),ast.computed?this.computedMember(left,right,context,create,self.expression):this.nonComputedMember(left,right,self.expensiveChecks,context,create,self.expression);case AST.CallExpression:return args=[],forEach(ast.arguments,function(expr){args.push(self.recurse(expr))}),ast.filter&&(right=this.$filter(ast.callee.name)),ast.filter||(right=this.recurse(ast.callee,!0)),ast.filter?function(scope,locals,assign,inputs){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));var value=right.apply(undefined,values,inputs);return context?{context:undefined,name:undefined,value:value}:value}:function(scope,locals,assign,inputs){var value,rhs=right(scope,locals,assign,inputs);if(null!=rhs.value){ensureSafeObject(rhs.context,self.expression),ensureSafeFunction(rhs.value,self.expression);for(var values=[],i=0;i<args.length;++i)values.push(ensureSafeObject(args[i](scope,locals,assign,inputs),self.expression));value=ensureSafeObject(rhs.value.apply(rhs.context,values),self.expression)}return context?{value:value}:value};case AST.AssignmentExpression:return left=this.recurse(ast.left,!0,1),right=this.recurse(ast.right),function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs);return ensureSafeObject(lhs.value,self.expression),ensureSafeAssignContext(lhs.context),lhs.context[lhs.name]=rhs,context?{value:rhs}:rhs};case AST.ArrayExpression:return args=[],forEach(ast.elements,function(expr){args.push(self.recurse(expr))}),function(scope,locals,assign,inputs){for(var value=[],i=0;i<args.length;++i)value.push(args[i](scope,locals,assign,inputs));return context?{value:value}:value};case AST.ObjectExpression:return args=[],forEach(ast.properties,function(property){args.push({key:property.key.type===AST.Identifier?property.key.name:""+property.key.value,value:self.recurse(property.value)})}),function(scope,locals,assign,inputs){for(var value={},i=0;i<args.length;++i)value[args[i].key]=args[i].value(scope,locals,assign,inputs);return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.LocalsExpression:return function(scope,locals){return context?{value:locals}:locals};case AST.NGValueParameter:return function(scope,locals,assign){return context?{value:assign}:assign}}},"unary+":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?+arg:0,context?{value:arg}:arg}},"unary-":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?-arg:0,context?{value:arg}:arg}},"unary!":function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary+":function(left,right,context){return function(scope,locals,assign,inputs){var arg=plusFn(left(scope,locals,assign,inputs),right(scope,locals,assign,inputs));return context?{value:arg}:arg}},"binary-":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},"binary*":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary/":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary%":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary===":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary&&":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary||":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"ternary?:":function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:undefined,name:undefined,value:value}:value}},identifier:function(name,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var base=locals&&name in locals?locals:scope;create&&1!==create&&base&&!base[name]&&(base[name]={});var value=base?base[name]:undefined;return expensiveChecks&&ensureSafeObject(value,expression),context?{context:base,name:name,value:value}:value}},computedMember:function(left,right,context,create,expression){return function(scope,locals,assign,inputs){var rhs,value,lhs=left(scope,locals,assign,inputs);return null!=lhs&&(ensureSafeMemberName(rhs=getStringValue(rhs=right(scope,locals,assign,inputs)),expression),create&&1!==create&&(ensureSafeAssignContext(lhs),lhs&&!lhs[rhs]&&(lhs[rhs]={})),ensureSafeObject(value=lhs[rhs],expression)),context?{context:lhs,name:rhs,value:value}:value}},nonComputedMember:function(left,right,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);create&&1!==create&&(ensureSafeAssignContext(lhs),lhs&&!lhs[right]&&(lhs[right]={}));var value=null!=lhs?lhs[right]:undefined;return(expensiveChecks||isPossiblyDangerousMemberName(right))&&ensureSafeObject(value,expression),context?{context:lhs,name:right,value:value}:value}},inputs:function(input,watchId){return function(scope,value,locals,inputs){return inputs?inputs[watchId]:input(scope,value,locals)}}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options,this.ast=new AST(lexer,options),this.astCompiler=options.csp?new ASTInterpreter(this.ast,$filter):new ASTCompiler(this.ast,$filter)};Parser.prototype={constructor:Parser,parse:function(text){return this.astCompiler.compile(text,this.options.expensiveChecks)}};var objectValueOf=Object.prototype.valueOf,$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$templateRequestMinErr=minErr("$compile"),urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href);$$CookieReader.$inject=["$document"],$FilterProvider.$inject=["$provide"];var MAX_DIGITS=22,DECIMAL_SEP=".",ZERO_CHAR="0";currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DATE_FORMATS={yyyy:dateGetter("FullYear",4,0,!1,!0),yy:dateGetter("FullYear",2,0,!0,!0),y:dateGetter("FullYear",1,0,!1,!0),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),LLLL:dateStrGetter("Month",!1,!0),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:function(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]},Z:function(date,formats,offset){var zone=-1*offset,paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)},ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:function(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}},DATE_FORMATS_SPLIT=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){if(!attr.href&&!attr.xlinkHref)return function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName),linkFn=defaultLinkFn;"checked"===propName&&(linkFn=function(scope,element,attr){attr.ngModel!==attr[normalized]&&defaultLinkFn(scope,0,attr)}),ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:linkFn}}}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"==attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){value?(attr.$set(name,value),msie&&propName&&element.prop(propName,attr[name])):"href"===attrName&&attr.$set(name,null)})}}}});var nullFormCtrl={$addControl:noop,$$renameControl:function(control,name){control.$name=name},$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},SUBMITTED_CLASS="ng-submitted";FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var formDirectiveFactory=function(isNgForm){return["$timeout","$parse",function($timeout,$parse){function getSetter(expression){return""===expression?$parse('this[""]').assign:$parse(expression).assign||noop}return{name:"form",restrict:isNgForm?"EAC":"E",require:["form","^^?form"],controller:FormController,compile:function(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":!(!isNgForm||!attr.ngForm)&&"ngForm";return{pre:function(scope,formElement,attr,ctrls){var controller=ctrls[0];if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault()};addEventListenerFn(formElement[0],"submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",handleFormSubmission)},0,!1)})}(ctrls[1]||controller.$$parentForm).$addControl(controller);var setter=nameAttr?getSetter(controller.$name):noop;nameAttr&&(setter(scope,controller),attr.$observe(nameAttr,function(newValue){controller.$name!==newValue&&(setter(scope,undefined),controller.$$parentForm.$$renameControl(controller,newValue),(setter=getSetter(controller.$name))(scope,controller))})),formElement.on("$destroy",function(){controller.$$parentForm.$removeControl(controller),setter(scope,undefined),extend(controller,nullFormCtrl)})}}}}}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),ISO_DATE_REGEXP=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,URL_REGEXP=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,DATE_REGEXP=/^(\d{4,})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4,})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4,})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,PARTIAL_VALIDATION_EVENTS="keydown wheel mousedown",PARTIAL_VALIDATION_TYPES=createMap();forEach("date,datetime-local,month,time,week".split(","),function(type){PARTIAL_VALIDATION_TYPES[type]=!0});var inputType={text:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)},date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,function(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN},"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:function(scope,element,attr,ctrl,$sniffer,$browser){if(badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$$parserName="number",ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):undefined}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal},attr.$observe("min",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),minVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||value<=maxVal},attr.$observe("max",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),maxVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}},url:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}},email:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}},radio:function(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid());element.on("click",function(ev){element[0].checked&&ctrl.$setViewValue(attr.value,ev&&ev.type)}),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)},checkbox:function(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1);element.on("click",function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)}),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return!1===value},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})},hidden:noop,button:noop,submit:noop,reset:noop,file:noop},inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}],CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,function(value){element.textContent=isUndefined(value)?"":value})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",function(value){element.textContent=isUndefined(value)?"":value})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(value){return(value||"").toString()});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){element.html($sce.getTrustedHtml(ngBindHtmlGetter(scope))||"")})}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName],null,!0);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate","$compile",function($animate,$compile){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=$compile.$$createComment("end ngIf",$attr.ngIf),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate",function($templateRequest,$anchorScroll,$animate){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch(srcExp,function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(!scope.$$destroyed&&thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).then(afterAnimation)});currentElement=clone,(currentScope=newScope).$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){scope.$$destroyed||thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){if(toString.call($element[0]).match(/SVG/))return $element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,document).childNodes)(scope,function(clone){$element.append(clone)},{futureParentElement:$element});$element.html(ctrl.template),$compile($element.contents())(scope)}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=element.attr(attr.$attr.ngList)||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList;ctrl.$parsers.push(function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}}),ctrl.$formatters.push(function(value){return isArray(value)?value.join(ngList):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",PENDING_CLASS="ng-pending",ngModelMinErr=minErr("ngModel"),NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$rootScope,$q,$interpolate){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=undefined,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=undefined,this.$name=$interpolate($attr.name||"",!1)($scope),this.$$parentForm=nullFormCtrl;var parserValid,parsedNgModel=$parse($attr.ngModel),parsedNgModelAssign=parsedNgModel.assign,ngModelGet=parsedNgModel,ngModelSet=parsedNgModelAssign,pendingDebounce=null,ctrl=this;this.$$setOptions=function(options){if(ctrl.$options=options,options&&options.getterSetter){var invokeModelGetter=$parse($attr.ngModel+"()"),invokeModelSetter=$parse($attr.ngModel+"($$$p)");ngModelGet=function($scope){var modelValue=parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},ngModelSet=function($scope,newValue){isFunction(parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:newValue}):parsedNgModelAssign($scope,newValue)}}else if(!parsedNgModel.assign)throw ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element))},this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value},this.$$updateEmptyClasses=function(value){ctrl.$isEmpty(value)?($animate.removeClass($element,"ng-not-empty"),$animate.addClass($element,"ng-empty")):($animate.removeClass($element,"ng-empty"),$animate.addClass($element,"ng-not-empty"))};var currentValidationRunId=0;addSetValidityMethod({ctrl:this,$element:$element,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]},$animate:$animate}),this.$setPristine=function(){ctrl.$dirty=!1,ctrl.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setDirty=function(){ctrl.$dirty=!0,ctrl.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),ctrl.$$parentForm.$setDirty()},this.$setUntouched=function(){ctrl.$touched=!1,ctrl.$untouched=!0,$animate.setClass($element,"ng-untouched","ng-touched")},this.$setTouched=function(){ctrl.$touched=!0,ctrl.$untouched=!1,$animate.setClass($element,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){$timeout.cancel(pendingDebounce),ctrl.$viewValue=ctrl.$$lastCommittedViewValue,ctrl.$render()},this.$validate=function(){if(!isNumber(ctrl.$modelValue)||!isNaN(ctrl.$modelValue)){var viewValue=ctrl.$$lastCommittedViewValue,modelValue=ctrl.$$rawModelValue,prevValid=ctrl.$valid,prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$runValidators(modelValue,viewValue,function(allValid){allowInvalid||prevValid===allValid||(ctrl.$modelValue=allValid?modelValue:undefined,ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope())})}},this.$$runValidators=function(modelValue,viewValue,doneCallback){function setValidity(name,isValid){localValidationRunId===currentValidationRunId&&ctrl.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===currentValidationRunId&&doneCallback(allValid)}var localValidationRunId=++currentValidationRunId;!function(){var errorKey=ctrl.$$parserName||"parse";return isUndefined(parserValid)?(setValidity(errorKey,null),!0):(parserValid||(forEach(ctrl.$validators,function(v,name){setValidity(name,null)}),forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)})),setValidity(errorKey,parserValid),parserValid)}()?validationDone(!1):function(){var syncValidatorsValid=!0;return forEach(ctrl.$validators,function(validator,name){var result=validator(modelValue,viewValue);syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),!!syncValidatorsValid||(forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),!1)}()?function(){var validatorPromises=[],allValid=!0;forEach(ctrl.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw ngModelMinErr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,undefined),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(){allValid=!1,setValidity(name,!1)}))}),validatorPromises.length?$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)}():validationDone(!1)},this.$commitViewValue=function(){var viewValue=ctrl.$viewValue;$timeout.cancel(pendingDebounce),(ctrl.$$lastCommittedViewValue!==viewValue||""===viewValue&&ctrl.$$hasNativeValidators)&&(ctrl.$$updateEmptyClasses(viewValue),ctrl.$$lastCommittedViewValue=viewValue,ctrl.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function writeToModelIfNeeded(){ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope()}var modelValue=ctrl.$$lastCommittedViewValue;if(parserValid=!isUndefined(modelValue)||undefined)for(var i=0;i<ctrl.$parsers.length;i++)if(modelValue=ctrl.$parsers[i](modelValue),isUndefined(modelValue)){parserValid=!1;break}isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)&&(ctrl.$modelValue=ngModelGet($scope));var prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$rawModelValue=modelValue,allowInvalid&&(ctrl.$modelValue=modelValue,writeToModelIfNeeded()),ctrl.$$runValidators(modelValue,ctrl.$$lastCommittedViewValue,function(allValid){allowInvalid||(ctrl.$modelValue=allValid?modelValue:undefined,writeToModelIfNeeded())})},this.$$writeModelToScope=function(){ngModelSet($scope,ctrl.$modelValue),forEach(ctrl.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}})},this.$setViewValue=function(value,trigger){ctrl.$viewValue=value,ctrl.$options&&!ctrl.$options.updateOnDefault||ctrl.$$debounceViewValueCommit(trigger)},this.$$debounceViewValueCommit=function(trigger){var debounce,debounceDelay=0,options=ctrl.$options;options&&isDefined(options.debounce)&&(isNumber(debounce=options.debounce)?debounceDelay=debounce:isNumber(debounce[trigger])?debounceDelay=debounce[trigger]:isNumber(debounce.default)&&(debounceDelay=debounce.default)),$timeout.cancel(pendingDebounce),debounceDelay?pendingDebounce=$timeout(function(){ctrl.$commitViewValue()},debounceDelay):$rootScope.$$phase?ctrl.$commitViewValue():$scope.$apply(function(){ctrl.$commitViewValue()})},$scope.$watch(function(){var modelValue=ngModelGet($scope);if(modelValue!==ctrl.$modelValue&&(ctrl.$modelValue===ctrl.$modelValue||modelValue===modelValue)){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue,parserValid=undefined;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$$updateEmptyClasses(viewValue),ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(modelValue,viewValue,noop))}return modelValue})}],ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(element){return element.addClass(PRISTINE_CLASS).addClass("ng-untouched").addClass(VALID_CLASS),{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||modelCtrl.$$parentForm;modelCtrl.$$setOptions(ctrls[2]&&ctrls[2].$options),formCtrl.$addControl(modelCtrl),attr.$observe("name",function(newValue){modelCtrl.$name!==newValue&&modelCtrl.$$parentForm.$$renameControl(modelCtrl,newValue)}),scope.$on("$destroy",function(){modelCtrl.$$parentForm.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0];modelCtrl.$options&&modelCtrl.$options.updateOn&&element.on(modelCtrl.$options.updateOn,function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)}),element.on("blur",function(){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(modelCtrl.$setTouched):scope.$apply(modelCtrl.$setTouched))})}}}}}],DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/,ngModelOptionsDirective=function(){return{restrict:"A",controller:["$scope","$attrs",function($scope,$attrs){var that=this;this.$options=copy($scope.$eval($attrs.ngModelOptions)),isDefined(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=trim(this.$options.updateOn.replace(DEFAULT_REGEXP,function(){return that.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngOptionsMinErr=minErr("ngOptions"),NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ngOptionsDirective=["$compile","$parse",function($compile,$parse){function parseOptionsExpression(optionsExp,selectElement,scope){function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue,this.viewValue=viewValue,this.label=label,this.group=group,this.disabled=disabled}function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues))optionValuesKeys=optionValues;else{optionValuesKeys=[];for(var itemKey in optionValues)optionValues.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&optionValuesKeys.push(itemKey)}return optionValuesKeys}var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!match)throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var valueName=match[5]||match[7],keyName=match[6],selectAs=/ as /.test(match[0])&&match[1],trackBy=match[9],valueFn=$parse(match[2]?match[1]:valueName),viewValueFn=selectAs&&$parse(selectAs)||valueFn,trackByFn=trackBy&&$parse(trackBy),getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function(value){return hashKey(value)},getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))},displayFn=$parse(match[2]||match[1]),groupByFn=$parse(match[3]||""),disableWhenFn=$parse(match[4]||""),valuesFn=$parse(match[8]),locals={},getLocals=keyName?function(value,key){return locals[keyName]=key,locals[valueName]=value,locals}:function(value){return locals[valueName]=value,locals};return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,function(optionValues){for(var watchedArray=[],optionValuesKeys=getOptionValuesKeys(optionValues=optionValues||[]),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),selectValue=getTrackByValueFn(value,locals);if(watchedArray.push(selectValue),match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}return watchedArray}),getOptions:function(){for(var optionItems=[],selectValueMap={},optionValues=valuesFn(scope)||[],optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],locals=getLocals(optionValues[key],key),viewValue=viewValueFn(scope,locals),selectValue=getTrackByValueFn(viewValue,locals),optionItem=new Option(selectValue,viewValue,displayFn(scope,locals),groupByFn(scope,locals),disableWhenFn(scope,locals));optionItems.push(optionItem),selectValueMap[selectValue]=optionItem}return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?angular.copy(option.viewValue):option.viewValue}}}}}var optionTemplate=document.createElement("option"),optGroupTemplate=document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(scope,selectElement,attr,ctrls){ctrls[0].registerOption=noop},post:function(scope,selectElement,attr,ctrls){function updateOptionElement(option,element){option.element=element,element.disabled=option.disabled,option.label!==element.label&&(element.label=option.label,element.textContent=option.label),option.value!==element.value&&(element.value=option.selectValue)}function addOrReuseElement(parent,current,type,templateElement){var element;return current&&lowercase(current.nodeName)===type?element=current:(element=templateElement.cloneNode(!1),current?parent.insertBefore(element,current):parent.appendChild(element)),element}function removeExcessElements(current){for(var next;current;)next=current.nextSibling,jqLiteRemove(current),current=next}function skipEmptyAndUnknownOptions(current){var emptyOption_=emptyOption&&emptyOption[0],unknownOption_=unknownOption&&unknownOption[0];if(emptyOption_||unknownOption_)for(;current&&(current===emptyOption_||current===unknownOption_||current.nodeType===NODE_TYPE_COMMENT||"option"===nodeName_(current)&&""===current.value);)current=current.nextSibling;return current}function updateOptions(){var previousValue=options&&selectCtrl.readValue();options=ngOptions.getOptions();var groupMap={},currentElement=selectElement[0].firstChild;if(providedEmptyOption&&selectElement.prepend(emptyOption),currentElement=skipEmptyAndUnknownOptions(currentElement),options.items.forEach(function(option){var group,groupElement,optionElement;isDefined(option.group)?((group=groupMap[option.group])||(groupElement=addOrReuseElement(selectElement[0],currentElement,"optgroup",optGroupTemplate),currentElement=groupElement.nextSibling,groupElement.label=option.group,group=groupMap[option.group]={groupElement:groupElement,currentOptionElement:groupElement.firstChild}),updateOptionElement(option,optionElement=addOrReuseElement(group.groupElement,group.currentOptionElement,"option",optionTemplate)),group.currentOptionElement=optionElement.nextSibling):(updateOptionElement(option,optionElement=addOrReuseElement(selectElement[0],currentElement,"option",optionTemplate)),currentElement=optionElement.nextSibling)}),Object.keys(groupMap).forEach(function(key){removeExcessElements(groupMap[key].currentOptionElement)}),removeExcessElements(currentElement),ngModelCtrl.$render(),!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue();(ngOptions.trackBy||multiple?equals(previousValue,nextValue):previousValue===nextValue)||(ngModelCtrl.$setViewValue(nextValue),ngModelCtrl.$render())}}for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,i=0,children=selectElement.children(),ii=children.length;i<ii;i++)if(""===children[i].value){emptyOption=children.eq(i);break}var providedEmptyOption=!!emptyOption,unknownOption=jqLite(optionTemplate.cloneNode(!1));unknownOption.val("?");var options,ngOptions=parseOptionsExpression(attr.ngOptions,selectElement,scope),renderEmptyOption=function(){providedEmptyOption||selectElement.prepend(emptyOption),selectElement.val(""),emptyOption.prop("selected",!0),emptyOption.attr("selected",!0)},removeEmptyOption=function(){providedEmptyOption||emptyOption.remove()},renderUnknownOption=function(){selectElement.prepend(unknownOption),selectElement.val("?"),unknownOption.prop("selected",!0),unknownOption.attr("selected",!0)},removeUnknownOption=function(){unknownOption.remove()};multiple?(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length},selectCtrl.writeValue=function(value){options.items.forEach(function(option){option.element.selected=!1}),value&&value.forEach(function(item){var option=options.getOptionFromViewValue(item);option&&!option.disabled&&(option.element.selected=!0)})},selectCtrl.readValue=function(){var selections=[];return forEach(selectElement.val()||[],function(value){var option=options.selectValueMap[value];option&&!option.disabled&&selections.push(options.getViewValueFromOption(option))}),selections},ngOptions.trackBy&&scope.$watchCollection(function(){if(isArray(ngModelCtrl.$viewValue))return ngModelCtrl.$viewValue.map(function(value){return ngOptions.getTrackByValue(value)})},function(){ngModelCtrl.$render()})):(selectCtrl.writeValue=function(value){var option=options.getOptionFromViewValue(value);option&&!option.disabled?(selectElement[0].value!==option.selectValue&&(removeUnknownOption(),removeEmptyOption(),selectElement[0].value=option.selectValue,option.element.selected=!0),option.element.setAttribute("selected","selected")):null===value||providedEmptyOption?(removeUnknownOption(),renderEmptyOption()):(removeEmptyOption(),renderUnknownOption())},selectCtrl.readValue=function(){var selectedOption=options.selectValueMap[selectElement.val()];return selectedOption&&!selectedOption.disabled?(removeEmptyOption(),removeUnknownOption(),options.getViewValueFromOption(selectedOption)):null},ngOptions.trackBy&&scope.$watch(function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)},function(){ngModelCtrl.$render()})),providedEmptyOption?(emptyOption.remove(),$compile(emptyOption)(scope),emptyOption.removeClass("ng-scope")):emptyOption=jqLite(optionTemplate.cloneNode(!1)),updateOptions(),scope.$watchCollection(ngOptions.getWatchables,updateOptions)}}}}],ngPluralizeDirective=["$locale","$interpolate","$log",function($locale,$interpolate,$log){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){function updateElementText(newText){element.text(newText||"")}var lastCount,numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop;forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))}),scope.$watch(numberExp,function(newVal){var count=parseFloat(newVal),countIsNaN=isNaN(count);if(countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),count!==lastCount&&!(countIsNaN&&isNumber(lastCount)&&isNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];isUndefined(whenExpFn)?(null!=newVal&&$log.debug("ngPluralize: no rule defined for '"+count+"' in "+whenExp),watchRemover=noop,updateElementText()):watchRemover=scope.$watch(whenExpFn,updateElementText),lastCount=count}})}}}],ngRepeatDirective=["$parse","$animate","$compile",function($parse,$animate,$compile){var ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0==(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=$compile.$$createComment("end ngRepeat",expression),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(!(match=lhs.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(var itemKey in collection)hasOwnProperty.call(collection,itemKey)&&"$"!==itemKey.charAt(0)&&collectionKeys.push(itemKey)}for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:undefined,clone:undefined},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(block=lastBlockMap[blockKey],elementsToRemove=getBlockNodes(block.clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;index<length;index++)elementsToRemove[index].$$NG_REMOVED=!0;block.scope.$destroy()}for(index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],(block=nextBlockOrder[index]).scope){nextNode=previousNode;do{nextNode=nextNode.nextSibling}while(nextNode&&nextNode.$$NG_REMOVED);getBlockStart(block)!=nextNode&&$animate.move(getBlockNodes(block.clone),null,previousNode),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,previousNode),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate","$compile",function($animate,$compile){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(){array.splice(index,1)}};scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousLeaveAnimations.length;i<ii;++i)$animate.cancel(previousLeaveAnimations[i]);for(previousLeaveAnimations.length=0,i=0,ii=selectedScopes.length;i<ii;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy(),(previousLeaveAnimations[i]=$animate.leave(selected)).then(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=$compile.$$createComment("end ngSwitchWhen");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeMinErr=minErr("ngTransclude"),ngTranscludeDirective=ngDirective({restrict:"EAC",link:function($scope,$element,$attrs,controller,$transclude){if($attrs.ngTransclude===$attrs.$attr.ngTransclude&&($attrs.ngTransclude=""),!$transclude)throw ngTranscludeMinErr("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude(function(clone){clone.length&&($element.empty(),$element.append(clone))},null,$attrs.ngTransclude||$attrs.ngTranscludeSlot)}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],noopNgModelController={$setViewValue:noop,$render:noop},SelectController=["$element","$scope",function($element,$scope){var self=this,optionsMap=new HashMap;self.ngModelCtrl=noopNgModelController,self.unknownOption=jqLite(document.createElement("option")),self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";self.unknownOption.val(unknownVal),$element.prepend(self.unknownOption),$element.val(unknownVal)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop}),self.removeUnknownOption=function(){self.unknownOption.parent()&&self.unknownOption.remove()},self.readValue=function(){return self.removeUnknownOption(),$element.val()},self.writeValue=function(value){self.hasOption(value)?(self.removeUnknownOption(),$element.val(value),""===value&&self.emptyOption.prop("selected",!0)):null==value&&self.emptyOption?(self.removeUnknownOption(),$element.val("")):self.renderUnknownOption(value)},self.addOption=function(value,element){if(element[0].nodeType!==NODE_TYPE_COMMENT){assertNotHasOwnProperty(value,'"option value"'),""===value&&(self.emptyOption=element);var count=optionsMap.get(value)||0;optionsMap.put(value,count+1),self.ngModelCtrl.$render(),chromeHack(element)}},self.removeOption=function(value){var count=optionsMap.get(value);count&&(1===count?(optionsMap.remove(value),""===value&&(self.emptyOption=undefined)):optionsMap.put(value,count-1))},self.hasOption=function(value){return!!optionsMap.get(value)},self.registerOption=function(optionScope,optionElement,optionAttrs,interpolateValueFn,interpolateTextFn){if(interpolateValueFn){var oldVal;optionAttrs.$observe("value",function(newVal){isDefined(oldVal)&&self.removeOption(oldVal),oldVal=newVal,self.addOption(newVal,optionElement)})}else interpolateTextFn?optionScope.$watch(interpolateTextFn,function(newVal,oldVal){optionAttrs.$set("value",newVal),oldVal!==newVal&&self.removeOption(oldVal),self.addOption(newVal,optionElement)}):self.addOption(optionAttrs.value,optionElement);optionElement.on("$destroy",function(){self.removeOption(optionAttrs.value),self.ngModelCtrl.$render()})}}],selectDirective=function(){return{restrict:"E",require:["select","?ngModel"],controller:SelectController,priority:1,link:{pre:function(scope,element,attr,ctrls){var ngModelCtrl=ctrls[1];if(ngModelCtrl){var selectCtrl=ctrls[0];if(selectCtrl.ngModelCtrl=ngModelCtrl,element.on("change",function(){scope.$apply(function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())})}),attr.multiple){selectCtrl.readValue=function(){var array=[];return forEach(element.find("option"),function(option){option.selected&&array.push(option.value)}),array},selectCtrl.writeValue=function(value){var items=new HashMap(value);forEach(element.find("option"),function(option){option.selected=isDefined(items.get(option.value))})};var lastView,lastViewRef=NaN;scope.$watch(function(){lastViewRef!==ngModelCtrl.$viewValue||equals(lastView,ngModelCtrl.$viewValue)||(lastView=shallowCopy(ngModelCtrl.$viewValue),ngModelCtrl.$render()),lastViewRef=ngModelCtrl.$viewValue}),ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}}}},post:function(scope,element,attrs,ctrls){var ngModelCtrl=ctrls[1];if(ngModelCtrl){var selectCtrl=ctrls[0];ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)}}}}}},optionDirective=["$interpolate",function($interpolate){return{restrict:"E",priority:100,compile:function(element,attr){if(isDefined(attr.value))var interpolateValueFn=$interpolate(attr.value,!0);else{var interpolateTextFn=$interpolate(element.text(),!0);interpolateTextFn||attr.$set("value",element.text())}return function(scope,element,attr){var parent=element.parent(),selectCtrl=parent.data("$selectController")||parent.parent().data("$selectController");selectCtrl&&selectCtrl.registerOption(scope,element,attr,interpolateValueFn,interpolateTextFn)}}}}],styleDirective=valueFn({restrict:"E",terminal:!1}),requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)},attr.$observe("required",function(){ctrl.$validate()}))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&regex.length>0&&(regex=new RegExp("^"+regex+"$")),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||undefined,ctrl.$validate()}),ctrl.$validators.pattern=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(regexp)||regexp.test(viewValue)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=-1;attr.$observe("maxlength",function(value){var intVal=toInt(value);maxlength=isNaN(intVal)?-1:intVal,ctrl.$validate()}),ctrl.$validators.maxlength=function(modelValue,viewValue){return maxlength<0||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",function(value){minlength=toInt(value)||0,ctrl.$validate()}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}}};window.angular.bootstrap?window.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var originalCleanData;if(!bindJQueryFired){var jqName=jq();(jQuery=isUndefined(jqName)?window.jQuery:jqName?window[jqName]:undefined)&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){for(var events,elem,i=0;null!=(elem=elems[i]);i++)(events=jQuery._data(elem,"events"))&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0}}(),function(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},getTestability:getTestability,$$minErr:minErr,$$csp:csp,reloadWithDebugInfo:reloadWithDebugInfo}),(angularModule=setupModuleLoader(window))("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$animateCss:$CoreAnimateCssProvider,$$animateJs:$$CoreAnimateJsProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$AnimateRunnerFactoryProvider,$$animateAsyncRun:$$AnimateAsyncRunFactoryProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$$forceReflow:$$ForceReflowProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$xhrFactory:$xhrFactoryProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$HashMap:$$HashMapProvider,$$cookieReader:$$CookieReaderProvider})}])}(angular),angular.module("ngLocale",[],["$provide",function($provide){function getDecimals(n){var i=(n+="").indexOf(".");return-1==i?0:n.length-i-1}function getVF(n,opt_precision){var v=opt_precision;undefined===v&&(v=Math.min(getDecimals(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(n,opt_precision){var i=0|n,vf=getVF(n,opt_precision);return 1==i&&0==vf.v?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}})}]),jqLite(document).ready(function(){angularInit(document,bootstrap)}))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(window,angular,undefined){"use strict";function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function packageStyles(options){var styles={};return options&&(options.to||options.from)&&(styles.to=options.to,styles.from=options.from),styles}function pendClasses(classes,fix,isPrefix){var className="";return classes=isArray(classes)?classes:classes&&isString(classes)&&classes.length?classes.split(/\s+/):[],forEach(classes,function(klass,i){klass&&klass.length>0&&(className+=i>0?" ":"",className+=isPrefix?fix+klass:klass+fix)}),className}function removeFromArray(arr,val){var index=arr.indexOf(val);val>=0&&arr.splice(index,1)}function stripCommentsFromElement(element){if(element instanceof jqLite)switch(element.length){case 0:return[];case 1:if(element[0].nodeType===ELEMENT_NODE)return element;break;default:return jqLite(extractElementNode(element))}if(element.nodeType===ELEMENT_NODE)return jqLite(element)}function extractElementNode(element){if(!element[0])return element;for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType==ELEMENT_NODE)return elm}}function $$addClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.addClass(elm,className)})}function $$removeClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.removeClass(elm,className)})}function applyAnimationClassesFactory($$jqLite){return function(element,options){options.addClass&&($$addClass($$jqLite,element,options.addClass),options.addClass=null),options.removeClass&&($$removeClass($$jqLite,element,options.removeClass),options.removeClass=null)}}function prepareAnimationOptions(options){if(!(options=options||{}).$$prepared){var domOperation=options.domOperation||noop;options.domOperation=function(){options.$$domOperationFired=!0,domOperation(),domOperation=noop},options.$$prepared=!0}return options}function applyAnimationStyles(element,options){applyAnimationFromStyles(element,options),applyAnimationToStyles(element,options)}function applyAnimationFromStyles(element,options){options.from&&(element.css(options.from),options.from=null)}function applyAnimationToStyles(element,options){options.to&&(element.css(options.to),options.to=null)}function mergeAnimationDetails(element,oldAnimation,newAnimation){var target=oldAnimation.options||{},newOptions=newAnimation.options||{},toAdd=(target.addClass||"")+" "+(newOptions.addClass||""),toRemove=(target.removeClass||"")+" "+(newOptions.removeClass||""),classes=resolveElementClasses(element.attr("class"),toAdd,toRemove);newOptions.preparationClasses&&(target.preparationClasses=concatWithSpace(newOptions.preparationClasses,target.preparationClasses),delete newOptions.preparationClasses);var realDomOperation=target.domOperation!==noop?target.domOperation:null;return extend(target,newOptions),realDomOperation&&(target.domOperation=realDomOperation),classes.addClass?target.addClass=classes.addClass:target.addClass=null,classes.removeClass?target.removeClass=classes.removeClass:target.removeClass=null,oldAnimation.addClass=target.addClass,oldAnimation.removeClass=target.removeClass,target}function resolveElementClasses(existing,toAdd,toRemove){function splitClassesToLookup(classes){isString(classes)&&(classes=classes.split(" "));var obj={};return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}var flags={};existing=splitClassesToLookup(existing),toAdd=splitClassesToLookup(toAdd),forEach(toAdd,function(value,key){flags[key]=1}),toRemove=splitClassesToLookup(toRemove),forEach(toRemove,function(value,key){flags[key]=1===flags[key]?null:-1});var classes={addClass:"",removeClass:""};return forEach(flags,function(val,klass){var prop,allow;1===val?(prop="addClass",allow=!existing[klass]):-1===val&&(prop="removeClass",allow=existing[klass]),allow&&(classes[prop].length&&(classes[prop]+=" "),classes[prop]+=klass)}),classes}function getDomNode(element){return element instanceof angular.element?element[0]:element}function applyGeneratedPreparationClasses(element,event,options){var classes="";event&&(classes=pendClasses(event,EVENT_CLASS_PREFIX,!0)),options.addClass&&(classes=concatWithSpace(classes,pendClasses(options.addClass,ADD_CLASS_SUFFIX))),options.removeClass&&(classes=concatWithSpace(classes,pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX))),classes.length&&(options.preparationClasses=classes,element.addClass(classes))}function clearGeneratedClasses(element,options){options.preparationClasses&&(element.removeClass(options.preparationClasses),options.preparationClasses=null),options.activeClasses&&(element.removeClass(options.activeClasses),options.activeClasses=null)}function blockTransitions(node,duration){var value=duration?"-"+duration+"s":"";return applyInlineStyle(node,[TRANSITION_DELAY_PROP,value]),[TRANSITION_DELAY_PROP,value]}function blockKeyframeAnimations(node,applyBlock){var value=applyBlock?"paused":"",key=ANIMATION_PROP+ANIMATION_PLAYSTATE_KEY;return applyInlineStyle(node,[key,value]),[key,value]}function applyInlineStyle(node,styleTuple){var prop=styleTuple[0],value=styleTuple[1];node.style[prop]=value}function concatWithSpace(a,b){return a?b?a+" "+b:a:b}function getCssKeyframeDurationStyle(duration){return[ANIMATION_DURATION_PROP,duration+"s"]}function getCssDelayStyle(delay,isKeyframeAnimation){return[isKeyframeAnimation?ANIMATION_DELAY_PROP:TRANSITION_DELAY_PROP,delay+"s"]}function computeCssStyles($window,element,properties){var styles=Object.create(null),detectedStyles=$window.getComputedStyle(element)||{};return forEach(properties,function(formalStyleName,actualStyleName){var val=detectedStyles[formalStyleName];if(val){var c=val.charAt(0);("-"===c||"+"===c||c>=0)&&(val=parseMaxTime(val)),0===val&&(val=null),styles[actualStyleName]=val}}),styles}function parseMaxTime(str){var maxValue=0,values=str.split(/\s*,\s*/);return forEach(values,function(value){"s"==value.charAt(value.length-1)&&(value=value.substring(0,value.length-1)),value=parseFloat(value)||0,maxValue=maxValue?Math.max(value,maxValue):value}),maxValue}function truthyTimingValue(val){return 0===val||null!=val}function getCssTransitionDurationStyle(duration,applyOnlyDuration){var style=TRANSITION_PROP,value=duration+"s";return applyOnlyDuration?style+=DURATION_KEY:value+=" linear all",[style,value]}function createLocalCacheLookup(){var cache=Object.create(null);return{flush:function(){cache=Object.create(null)},count:function(key){var entry=cache[key];return entry?entry.total:0},get:function(key){var entry=cache[key];return entry&&entry.value},put:function(key,value){cache[key]?cache[key].total++:cache[key]={total:1,value:value}}}}function registerRestorableStyles(backup,node,properties){forEach(properties,function(prop){backup[prop]=isDefined(backup[prop])?backup[prop]:node.style.getPropertyValue(prop)})}var TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT,noop=angular.noop,copy=angular.copy,extend=angular.extend,jqLite=angular.element,forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,isObject=angular.isObject,isUndefined=angular.isUndefined,isDefined=angular.isDefined,isFunction=angular.isFunction,isElement=angular.isElement,ELEMENT_NODE=1,ADD_CLASS_SUFFIX="-add",REMOVE_CLASS_SUFFIX="-remove",EVENT_CLASS_PREFIX="ng-",NG_ANIMATE_CLASSNAME="ng-animate",NG_ANIMATE_CHILDREN_DATA="$$ngAnimateChildren";isUndefined(window.ontransitionend)&&isDefined(window.onwebkittransitionend)?("-webkit-",TRANSITION_PROP="WebkitTransition",TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition",TRANSITIONEND_EVENT="transitionend"),isUndefined(window.onanimationend)&&isDefined(window.onwebkitanimationend)?("-webkit-",ANIMATION_PROP="WebkitAnimation",ANIMATIONEND_EVENT="webkitAnimationEnd animationend"):(ANIMATION_PROP="animation",ANIMATIONEND_EVENT="animationend");var DURATION_KEY="Duration",TIMING_KEY="TimingFunction",ANIMATION_PLAYSTATE_KEY="PlayState",ANIMATION_DELAY_PROP=ANIMATION_PROP+"Delay",ANIMATION_DURATION_PROP=ANIMATION_PROP+DURATION_KEY,TRANSITION_DELAY_PROP=TRANSITION_PROP+"Delay",TRANSITION_DURATION_PROP=TRANSITION_PROP+DURATION_KEY,ngMinErr=angular.$$minErr("ng"),$$rAFSchedulerFactory=["$$rAF",function($$rAF){function scheduler(tasks){queue=queue.concat(tasks),nextTick()}function nextTick(){if(queue.length){for(var items=queue.shift(),i=0;i<items.length;i++)items[i]();cancelFn||$$rAF(function(){cancelFn||nextTick()})}}var queue,cancelFn;return queue=scheduler.queue=[],scheduler.waitUntilQuiet=function(fn){cancelFn&&cancelFn(),cancelFn=$$rAF(function(){cancelFn=null,fn(),nextTick()})},scheduler}],$$AnimateChildrenDirective=["$interpolate",function($interpolate){return{link:function(scope,element,attrs){function setData(value){value="on"===value||"true"===value,element.data(NG_ANIMATE_CHILDREN_DATA,value)}var val=attrs.ngAnimateChildren;angular.isString(val)&&0===val.length?element.data(NG_ANIMATE_CHILDREN_DATA,!0):(setData($interpolate(val)(scope)),attrs.$observe("ngAnimateChildren",setData))}}}],ANIMATE_TIMER_KEY="$$animateCss",ONE_SECOND=1e3,ELAPSED_TIME_MAX_DECIMAL_PLACES=3,CLOSING_TIME_BUFFER=1.5,DETECT_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,transitionProperty:TRANSITION_PROP+"Property",animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP,animationIterationCount:ANIMATION_PROP+"IterationCount"},DETECT_STAGGER_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP},$AnimateCssProvider=["$animateProvider",function($animateProvider){var gcsLookup=createLocalCacheLookup(),gcsStaggerLookup=createLocalCacheLookup();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function($window,$$jqLite,$$AnimateRunner,$timeout,$$forceReflow,$sniffer,$$rAFScheduler,$$animateQueue){function gcsHashFn(node,extraClasses){var KEY="$$ngAnimateParentKey",parentNode=node.parentNode;return(parentNode[KEY]||(parentNode[KEY]=++parentCounter))+"-"+node.getAttribute("class")+"-"+extraClasses}function computeCachedCssStyles(node,className,cacheKey,properties){var timings=gcsLookup.get(cacheKey);return timings||"infinite"===(timings=computeCssStyles($window,node,properties)).animationIterationCount&&(timings.animationIterationCount=1),gcsLookup.put(cacheKey,timings),timings}function computeCachedCssStaggerStyles(node,className,cacheKey,properties){var stagger;if(gcsLookup.count(cacheKey)>0&&!(stagger=gcsStaggerLookup.get(cacheKey))){var staggerClassName=pendClasses(className,"-stagger");$$jqLite.addClass(node,staggerClassName),(stagger=computeCssStyles($window,node,properties)).animationDuration=Math.max(stagger.animationDuration,0),stagger.transitionDuration=Math.max(stagger.transitionDuration,0),$$jqLite.removeClass(node,staggerClassName),gcsStaggerLookup.put(cacheKey,stagger)}return stagger||{}}function waitUntilQuiet(callback){rafWaitQueue.push(callback),$$rAFScheduler.waitUntilQuiet(function(){gcsLookup.flush(),gcsStaggerLookup.flush();for(var pageWidth=$$forceReflow(),i=0;i<rafWaitQueue.length;i++)rafWaitQueue[i](pageWidth);rafWaitQueue.length=0})}function computeTimings(node,className,cacheKey){var timings=computeCachedCssStyles(node,className,cacheKey,DETECT_CSS_PROPERTIES),aD=timings.animationDelay,tD=timings.transitionDelay;return timings.maxDelay=aD&&tD?Math.max(aD,tD):aD||tD,timings.maxDuration=Math.max(timings.animationDuration*timings.animationIterationCount,timings.transitionDuration),timings}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite),parentCounter=0,rafWaitQueue=[];return function(element,initialOptions){function endFn(){close()}function cancelFn(){close(!0)}function close(rejected){if(!(animationClosed||animationCompleted&&animationPaused)){animationClosed=!0,animationPaused=!1,options.$$skipPreparationClasses||$$jqLite.removeClass(element,preparationClasses),$$jqLite.removeClass(element,activeClasses),blockKeyframeAnimations(node,!1),blockTransitions(node,!1),forEach(temporaryStyles,function(entry){node.style[entry[0]]=""}),applyAnimationClasses(element,options),applyAnimationStyles(element,options),Object.keys(restoreStyles).length&&forEach(restoreStyles,function(value,prop){value?node.style.setProperty(prop,value):node.style.removeProperty(prop)}),options.onDone&&options.onDone(),events&&events.length&&element.off(events.join(" "),onAnimationProgress);var animationTimerData=element.data(ANIMATE_TIMER_KEY);animationTimerData&&($timeout.cancel(animationTimerData[0].timer),element.removeData(ANIMATE_TIMER_KEY)),runner&&runner.complete(!rejected)}}function applyBlocking(duration){flags.blockTransition&&blockTransitions(node,duration),flags.blockKeyframeAnimation&&blockKeyframeAnimations(node,!!duration)}function closeAndReturnNoopAnimator(){return runner=new $$AnimateRunner({end:endFn,cancel:cancelFn}),waitUntilQuiet(noop),close(),{$$willAnimate:!1,start:function(){return runner},end:endFn}}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||Date.now(),elapsedTime=parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration&&(animationCompleted=!0,close())}function start(){function triggerAnimationStart(){if(!animationClosed){if(applyBlocking(!1),forEach(temporaryStyles,function(entry){var key=entry[0],value=entry[1];node.style[key]=value}),applyAnimationClasses(element,options),$$jqLite.addClass(element,activeClasses),flags.recalculateTimingStyles){if(fullClassName=node.className+" "+preparationClasses,cacheKey=gcsHashFn(node,fullClassName),timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay,maxDelay=Math.max(relativeDelay,0),0===(maxDuration=timings.maxDuration))return void close();flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0}if(flags.applyAnimationDelay&&(relativeDelay="boolean"!=typeof options.delay&&truthyTimingValue(options.delay)?parseFloat(options.delay):relativeDelay,maxDelay=Math.max(relativeDelay,0),timings.animationDelay=relativeDelay,delayStyle=getCssDelayStyle(relativeDelay,!0),temporaryStyles.push(delayStyle),node.style[delayStyle[0]]=delayStyle[1]),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.easing){var easeProp,easeVal=options.easing;flags.hasTransitions&&(easeProp=TRANSITION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal),flags.hasAnimations&&(easeProp=ANIMATION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal)}timings.transitionDuration&&events.push(TRANSITIONEND_EVENT),timings.animationDuration&&events.push(ANIMATIONEND_EVENT),startTime=Date.now();var timerTime=maxDelayTime+CLOSING_TIME_BUFFER*maxDurationTime,endTime=startTime+timerTime,animationsData=element.data(ANIMATE_TIMER_KEY)||[],setupFallbackTimer=!0;if(animationsData.length){var currentTimerData=animationsData[0];(setupFallbackTimer=endTime>currentTimerData.expectedEndTime)?$timeout.cancel(currentTimerData.timer):animationsData.push(close)}if(setupFallbackTimer){var timer=$timeout(onAnimationExpired,timerTime,!1);animationsData[0]={timer:timer,expectedEndTime:endTime},animationsData.push(close),element.data(ANIMATE_TIMER_KEY,animationsData)}events.length&&element.on(events.join(" "),onAnimationProgress),options.to&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.to)),applyAnimationToStyles(element,options))}}function onAnimationExpired(){var animationsData=element.data(ANIMATE_TIMER_KEY);if(animationsData){for(var i=1;i<animationsData.length;i++)animationsData[i]();element.removeData(ANIMATE_TIMER_KEY)}}if(!animationClosed)if(node.parentNode){var playPause=function(playAnimation){if(animationCompleted)animationPaused&&playAnimation&&(animationPaused=!1,close());else if(animationPaused=!playAnimation,timings.animationDuration){var value=blockKeyframeAnimations(node,animationPaused);animationPaused?temporaryStyles.push(value):removeFromArray(temporaryStyles,value)}},maxStagger=itemIndex>0&&(timings.transitionDuration&&0===stagger.transitionDuration||timings.animationDuration&&0===stagger.animationDuration)&&Math.max(stagger.animationDelay,stagger.transitionDelay);maxStagger?$timeout(triggerAnimationStart,Math.floor(maxStagger*itemIndex*ONE_SECOND),!1):triggerAnimationStart(),runnerHost.resume=function(){playPause(!0)},runnerHost.pause=function(){playPause(!1)}}else close()}var options=initialOptions||{};options.$$prepared||(options=prepareAnimationOptions(copy(options)));var restoreStyles={},node=getDomNode(element);if(!node||!node.parentNode||!$$animateQueue.enabled())return closeAndReturnNoopAnimator();var animationClosed,animationPaused,animationCompleted,runner,runnerHost,maxDelay,maxDelayTime,maxDuration,maxDurationTime,startTime,temporaryStyles=[],classes=element.attr("class"),styles=packageStyles(options),events=[];if(0===options.duration||!$sniffer.animations&&!$sniffer.transitions)return closeAndReturnNoopAnimator();var method=options.event&&isArray(options.event)?options.event.join(" "):options.event,structuralClassName="",addRemoveClassName="";method&&options.structural?structuralClassName=pendClasses(method,EVENT_CLASS_PREFIX,!0):method&&(structuralClassName=method),options.addClass&&(addRemoveClassName+=pendClasses(options.addClass,ADD_CLASS_SUFFIX)),options.removeClass&&(addRemoveClassName.length&&(addRemoveClassName+=" "),addRemoveClassName+=pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX)),options.applyClassesEarly&&addRemoveClassName.length&&applyAnimationClasses(element,options);var preparationClasses=[structuralClassName,addRemoveClassName].join(" ").trim(),fullClassName=classes+" "+preparationClasses,activeClasses=pendClasses(preparationClasses,"-active"),hasToStyles=styles.to&&Object.keys(styles.to).length>0;if(!((options.keyframeStyle||"").length>0)&&!hasToStyles&&!preparationClasses)return closeAndReturnNoopAnimator();var cacheKey,stagger;if(options.stagger>0){var staggerVal=parseFloat(options.stagger);stagger={transitionDelay:staggerVal,animationDelay:staggerVal,transitionDuration:0,animationDuration:0}}else cacheKey=gcsHashFn(node,fullClassName),stagger=computeCachedCssStaggerStyles(node,preparationClasses,cacheKey,DETECT_STAGGER_CSS_PROPERTIES);options.$$skipPreparationClasses||$$jqLite.addClass(element,preparationClasses);var applyOnlyDuration;if(options.transitionStyle){var transitionStyle=[TRANSITION_PROP,options.transitionStyle];applyInlineStyle(node,transitionStyle),temporaryStyles.push(transitionStyle)}if(options.duration>=0){applyOnlyDuration=node.style[TRANSITION_PROP].length>0;var durationStyle=getCssTransitionDurationStyle(options.duration,applyOnlyDuration);applyInlineStyle(node,durationStyle),temporaryStyles.push(durationStyle)}if(options.keyframeStyle){var keyframeStyle=[ANIMATION_PROP,options.keyframeStyle];applyInlineStyle(node,keyframeStyle),temporaryStyles.push(keyframeStyle)}var itemIndex=stagger?options.staggerIndex>=0?options.staggerIndex:gcsLookup.count(cacheKey):0,isFirst=0===itemIndex;isFirst&&!options.skipBlocking&&blockTransitions(node,9999);var timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay;maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration;var flags={};if(flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0,flags.hasTransitionAll=flags.hasTransitions&&"all"==timings.transitionProperty,flags.applyTransitionDuration=hasToStyles&&(flags.hasTransitions&&!flags.hasTransitionAll||flags.hasAnimations&&!flags.hasTransitions),flags.applyAnimationDuration=options.duration&&flags.hasAnimations,flags.applyTransitionDelay=truthyTimingValue(options.delay)&&(flags.applyTransitionDuration||flags.hasTransitions),flags.applyAnimationDelay=truthyTimingValue(options.delay)&&flags.hasAnimations,flags.recalculateTimingStyles=addRemoveClassName.length>0,(flags.applyTransitionDuration||flags.applyAnimationDuration)&&(maxDuration=options.duration?parseFloat(options.duration):maxDuration,flags.applyTransitionDuration&&(flags.hasTransitions=!0,timings.transitionDuration=maxDuration,applyOnlyDuration=node.style[TRANSITION_PROP+"Property"].length>0,temporaryStyles.push(getCssTransitionDurationStyle(maxDuration,applyOnlyDuration))),flags.applyAnimationDuration&&(flags.hasAnimations=!0,timings.animationDuration=maxDuration,temporaryStyles.push(getCssKeyframeDurationStyle(maxDuration)))),0===maxDuration&&!flags.recalculateTimingStyles)return closeAndReturnNoopAnimator();if(null!=options.delay){var delayStyle;"boolean"!=typeof options.delay&&(delayStyle=parseFloat(options.delay),maxDelay=Math.max(delayStyle,0)),flags.applyTransitionDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle)),flags.applyAnimationDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle,!0))}return null==options.duration&&timings.transitionDuration>0&&(flags.recalculateTimingStyles=flags.recalculateTimingStyles||isFirst),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.skipBlocking||(flags.blockTransition=timings.transitionDuration>0,flags.blockKeyframeAnimation=timings.animationDuration>0&&stagger.animationDelay>0&&0===stagger.animationDuration),options.from&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.from)),applyAnimationFromStyles(element,options)),flags.blockTransition||flags.blockKeyframeAnimation?applyBlocking(maxDuration):options.skipBlocking||blockTransitions(node,!1),{$$willAnimate:!0,end:endFn,start:function(){if(!animationClosed)return runnerHost={end:endFn,cancel:cancelFn,resume:null,pause:null},runner=new $$AnimateRunner(runnerHost),waitUntilQuiet(start),runner}}}}]}],$$AnimateCssDriverProvider=["$$animationProvider",function($$animationProvider){function isDocumentFragment(node){return node.parentNode&&11===node.parentNode.nodeType}$$animationProvider.drivers.push("$$animateCssDriver");var NG_ANIMATE_SHIM_CLASS_NAME="ng-animate-shim",NG_ANIMATE_ANCHOR_CLASS_NAME="ng-anchor",NG_OUT_ANCHOR_CLASS_NAME="ng-anchor-out",NG_IN_ANCHOR_CLASS_NAME="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function($animateCss,$rootScope,$$AnimateRunner,$rootElement,$sniffer,$$jqLite,$document){function filterCssClasses(classes){return classes.replace(/\bng-\S+\b/g,"")}function getUniqueValues(a,b){return isString(a)&&(a=a.split(" ")),isString(b)&&(b=b.split(" ")),a.filter(function(val){return-1===b.indexOf(val)}).join(" ")}function prepareAnchoredAnimation(classes,outAnchor,inAnchor){function calculateAnchorStyles(anchor){var styles={},coords=getDomNode(anchor).getBoundingClientRect();return forEach(["width","height","top","left"],function(key){var value=coords[key];switch(key){case"top":value+=bodyNode.scrollTop;break;case"left":value+=bodyNode.scrollLeft}styles[key]=Math.floor(value)+"px"}),styles}function getClassVal(element){return element.attr("class")||""}function prepareInAnimation(){var endingClasses=filterCssClasses(getClassVal(inAnchor)),toAdd=getUniqueValues(endingClasses,startingClasses),toRemove=getUniqueValues(startingClasses,endingClasses),animator=$animateCss(clone,{to:calculateAnchorStyles(inAnchor),addClass:NG_IN_ANCHOR_CLASS_NAME+" "+toAdd,removeClass:NG_OUT_ANCHOR_CLASS_NAME+" "+toRemove,delay:!0});return animator.$$willAnimate?animator:null}function end(){clone.remove(),outAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME)}var clone=jqLite(getDomNode(outAnchor).cloneNode(!0)),startingClasses=filterCssClasses(getClassVal(clone));outAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),clone.addClass(NG_ANIMATE_ANCHOR_CLASS_NAME),rootBodyElement.append(clone);var animatorIn,animatorOut=function(){var animator=$animateCss(clone,{addClass:NG_OUT_ANCHOR_CLASS_NAME,delay:!0,from:calculateAnchorStyles(outAnchor)});return animator.$$willAnimate?animator:null}();if(!animatorOut&&!(animatorIn=prepareInAnimation()))return end();var startingAnimator=animatorOut||animatorIn;return{start:function(){function endFn(){currentAnimation&&currentAnimation.end()}var runner,currentAnimation=startingAnimator.start();return currentAnimation.done(function(){if(currentAnimation=null,!animatorIn&&(animatorIn=prepareInAnimation()))return(currentAnimation=animatorIn.start()).done(function(){currentAnimation=null,end(),runner.complete()}),currentAnimation;end(),runner.complete()}),runner=new $$AnimateRunner({end:endFn,cancel:endFn})}}}function prepareFromToAnchorAnimation(from,to,classes,anchors){var fromAnimation=prepareRegularAnimation(from),toAnimation=prepareRegularAnimation(to),anchorAnimations=[];if(forEach(anchors,function(anchor){var outElement=anchor.out,inElement=anchor.in,animator=prepareAnchoredAnimation(classes,outElement,inElement);animator&&anchorAnimations.push(animator)}),fromAnimation||toAnimation||0!==anchorAnimations.length)return{start:function(){function endFn(){forEach(animationRunners,function(runner){runner.end()})}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),forEach(anchorAnimations,function(animation){animationRunners.push(animation.start())});var runner=new $$AnimateRunner({end:endFn,cancel:endFn});return $$AnimateRunner.all(animationRunners,function(status){runner.complete(status)}),runner}}}function prepareRegularAnimation(animationDetails){var element=animationDetails.element,options=animationDetails.options||{};animationDetails.structural&&(options.event=animationDetails.event,options.structural=!0,options.applyClassesEarly=!0,"leave"===animationDetails.event&&(options.onDone=options.domOperation)),options.preparationClasses&&(options.event=concatWithSpace(options.event,options.preparationClasses));var animator=$animateCss(element,options);return animator.$$willAnimate?animator:null}if(!$sniffer.animations&&!$sniffer.transitions)return noop;var bodyNode=$document[0].body,rootNode=getDomNode($rootElement),rootBodyElement=jqLite(isDocumentFragment(rootNode)||bodyNode.contains(rootNode)?rootNode:bodyNode);applyAnimationClassesFactory($$jqLite);return function(animationDetails){return animationDetails.from&&animationDetails.to?prepareFromToAnchorAnimation(animationDetails.from,animationDetails.to,animationDetails.classes,animationDetails.anchors):prepareRegularAnimation(animationDetails)}}]}],$$AnimateJsProvider=["$animateProvider",function($animateProvider){this.$get=["$injector","$$AnimateRunner","$$jqLite",function($injector,$$AnimateRunner,$$jqLite){function lookupAnimations(classes){classes=isArray(classes)?classes:classes.split(" ");for(var matches=[],flagMap={},i=0;i<classes.length;i++){var klass=classes[i],animationFactory=$animateProvider.$$registeredAnimations[klass];animationFactory&&!flagMap[klass]&&(matches.push($injector.get(animationFactory)),flagMap[klass]=!0)}return matches}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,classes,options){function applyOptions(){options.domOperation(),applyAnimationClasses(element,options)}function close(){animationClosed=!0,applyOptions(),applyAnimationStyles(element,options)}function executeAnimationFn(fn,element,event,options,onDone){var args;switch(event){case"animate":args=[element,options.from,options.to,onDone];break;case"setClass":args=[element,classesToAdd,classesToRemove,onDone];break;case"addClass":args=[element,classesToAdd,onDone];break;case"removeClass":args=[element,classesToRemove,onDone];break;default:args=[element,onDone]}args.push(options);var value=fn.apply(fn,args);if(value)if(isFunction(value.start)&&(value=value.start()),value instanceof $$AnimateRunner)value.done(onDone);else if(isFunction(value))return value;return noop}function groupEventedAnimations(element,event,options,animations,fnName){var operations=[];return forEach(animations,function(ani){var animation=ani[fnName];animation&&operations.push(function(){var runner,endProgressCb,resolved=!1,onAnimationComplete=function(rejected){resolved||(resolved=!0,(endProgressCb||noop)(rejected),runner.complete(!rejected))};return runner=new $$AnimateRunner({end:function(){onAnimationComplete()},cancel:function(){onAnimationComplete(!0)}}),endProgressCb=executeAnimationFn(animation,element,event,options,function(result){onAnimationComplete(!1===result)}),runner})}),operations}function packageAnimations(element,event,options,animations,fnName){var operations=groupEventedAnimations(element,event,options,animations,fnName);if(0===operations.length){var a,b;"beforeSetClass"===fnName?(a=groupEventedAnimations(element,"removeClass",options,animations,"beforeRemoveClass"),b=groupEventedAnimations(element,"addClass",options,animations,"beforeAddClass")):"setClass"===fnName&&(a=groupEventedAnimations(element,"removeClass",options,animations,"removeClass"),b=groupEventedAnimations(element,"addClass",options,animations,"addClass")),a&&(operations=operations.concat(a)),b&&(operations=operations.concat(b))}if(0!==operations.length)return function(callback){var runners=[];return operations.length&&forEach(operations,function(animateFn){runners.push(animateFn())}),runners.length?$$AnimateRunner.all(runners,callback):callback(),function(reject){forEach(runners,function(runner){reject?runner.cancel():runner.end()})}}}var animationClosed=!1;3===arguments.length&&isObject(classes)&&(options=classes,classes=null),options=prepareAnimationOptions(options),classes||(classes=element.attr("class")||"",options.addClass&&(classes+=" "+options.addClass),options.removeClass&&(classes+=" "+options.removeClass));var before,after,classesToAdd=options.addClass,classesToRemove=options.removeClass,animations=lookupAnimations(classes);if(animations.length){var afterFn,beforeFn;"leave"==event?(beforeFn="leave",afterFn="afterLeave"):(beforeFn="before"+event.charAt(0).toUpperCase()+event.substr(1),afterFn=event),"enter"!==event&&"move"!==event&&(before=packageAnimations(element,event,options,animations,beforeFn)),after=packageAnimations(element,event,options,animations,afterFn)}if(before||after){var runner;return{$$willAnimate:!0,end:function(){return runner?runner.end():(close(),(runner=new $$AnimateRunner).complete(!0)),runner},start:function(){function onComplete(success){close(success),runner.complete(success)}function endAnimations(cancelled){animationClosed||((closeActiveAnimations||noop)(cancelled),onComplete(cancelled))}if(runner)return runner;runner=new $$AnimateRunner;var closeActiveAnimations,chain=[];return before&&chain.push(function(fn){closeActiveAnimations=before(fn)}),chain.length?chain.push(function(fn){applyOptions(),fn(!0)}):applyOptions(),after&&chain.push(function(fn){closeActiveAnimations=after(fn)}),runner.setHost({end:function(){endAnimations()},cancel:function(){endAnimations(!0)}}),$$AnimateRunner.chain(chain,onComplete),runner}}}}}]}],$$AnimateJsDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function($$animateJs,$$AnimateRunner){function prepareAnimation(animationDetails){var element=animationDetails.element,event=animationDetails.event,options=animationDetails.options,classes=animationDetails.classes;return $$animateJs(element,event,classes,options)}return function(animationDetails){if(animationDetails.from&&animationDetails.to){var fromAnimation=prepareAnimation(animationDetails.from),toAnimation=prepareAnimation(animationDetails.to);if(!fromAnimation&&!toAnimation)return;return{start:function(){function endFnFactory(){return function(){forEach(animationRunners,function(runner){runner.end()})}}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),$$AnimateRunner.all(animationRunners,function(status){runner.complete(status)});var runner=new $$AnimateRunner({end:endFnFactory(),cancel:endFnFactory()});return runner}}}return prepareAnimation(animationDetails)}}]}],NG_ANIMATE_ATTR_NAME="data-ng-animate",NG_ANIMATE_PIN_DATA="$ngAnimatePin",$$AnimateQueueProvider=["$animateProvider",function($animateProvider){function makeTruthyCssClassMap(classString){if(!classString)return null;var keys=classString.split(ONE_SPACE),map=Object.create(null);return forEach(keys,function(key){map[key]=!0}),map}function hasMatchingClasses(newClassString,currentClassString){if(newClassString&&currentClassString){var currentClassMap=makeTruthyCssClassMap(currentClassString);return newClassString.split(ONE_SPACE).some(function(className){return currentClassMap[className]})}}function isAllowed(ruleType,element,currentAnimation,previousAnimation){return rules[ruleType].some(function(fn){return fn(element,currentAnimation,previousAnimation)})}function hasAnimationClasses(animation,and){var a=(animation.addClass||"").length>0,b=(animation.removeClass||"").length>0;return and?a&&b:a||b}var PRE_DIGEST_STATE=1,RUNNING_STATE=2,ONE_SPACE=" ",rules=this.rules={skip:[],cancel:[],join:[]};rules.join.push(function(element,newAnimation,currentAnimation){return!newAnimation.structural&&hasAnimationClasses(newAnimation)}),rules.skip.push(function(element,newAnimation,currentAnimation){return!newAnimation.structural&&!hasAnimationClasses(newAnimation)}),rules.skip.push(function(element,newAnimation,currentAnimation){return"leave"==currentAnimation.event&&newAnimation.structural}),rules.skip.push(function(element,newAnimation,currentAnimation){return currentAnimation.structural&&currentAnimation.state===RUNNING_STATE&&!newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){return currentAnimation.structural&&newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){return currentAnimation.state===RUNNING_STATE&&newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){if(currentAnimation.structural)return!1;var nA=newAnimation.addClass,nR=newAnimation.removeClass,cA=currentAnimation.addClass,cR=currentAnimation.removeClass;return!(isUndefined(nA)&&isUndefined(nR)||isUndefined(cA)&&isUndefined(cR))&&(hasMatchingClasses(nA,cR)||hasMatchingClasses(nR,cA))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function($$rAF,$rootScope,$rootElement,$document,$$HashMap,$$animation,$$AnimateRunner,$templateRequest,$$jqLite,$$forceReflow){function postDigestTaskFactory(){var postDigestCalled=!1;return function(fn){postDigestCalled?fn():$rootScope.$$postDigest(function(){postDigestCalled=!0,fn()})}}function normalizeAnimationDetails(element,animation){return mergeAnimationDetails(element,animation,{})}function findCallbacks(parent,element,event){var targetNode=getDomNode(element),targetParentNode=getDomNode(parent),matches=[],entries=callbackRegistry[event];return entries&&forEach(entries,function(entry){contains.call(entry.node,targetNode)?matches.push(entry.callback):"leave"===event&&contains.call(entry.node,targetParentNode)&&matches.push(entry.callback)}),matches}function queueAnimation(element,event,initialOptions){function notifyProgress(runner,event,phase,data){runInNextPostDigestOrNow(function(){var callbacks=findCallbacks(parent,element,event);callbacks.length&&$$rAF(function(){forEach(callbacks,function(callback){callback(element,phase,data)})})}),runner.progress(event,phase,data)}function close(reject){clearGeneratedClasses(element,options),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),runner.complete(!reject)}var node,parent,options=copy(initialOptions);(element=stripCommentsFromElement(element))&&(node=getDomNode(element),parent=element.parent()),options=prepareAnimationOptions(options);var runner=new $$AnimateRunner,runInNextPostDigestOrNow=postDigestTaskFactory();if(isArray(options.addClass)&&(options.addClass=options.addClass.join(" ")),options.addClass&&!isString(options.addClass)&&(options.addClass=null),isArray(options.removeClass)&&(options.removeClass=options.removeClass.join(" ")),options.removeClass&&!isString(options.removeClass)&&(options.removeClass=null),options.from&&!isObject(options.from)&&(options.from=null),options.to&&!isObject(options.to)&&(options.to=null),!node)return close(),runner;var className=[node.className,options.addClass,options.removeClass].join(" ");if(!isAnimatableClassName(className))return close(),runner;var isStructural=["enter","move","leave"].indexOf(event)>=0,skipAnimations=!animationsEnabled||$document[0].hidden||disabledElementsLookup.get(node),existingAnimation=!skipAnimations&&activeAnimationsLookup.get(node)||{},hasExistingAnimation=!!existingAnimation.state;if(skipAnimations||hasExistingAnimation&&existingAnimation.state==PRE_DIGEST_STATE||(skipAnimations=!areAnimationsAllowed(element,parent,event)),skipAnimations)return close(),runner;isStructural&&closeChildAnimations(element);var newAnimation={structural:isStructural,element:element,event:event,addClass:options.addClass,removeClass:options.removeClass,close:close,options:options,runner:runner};if(hasExistingAnimation){if(isAllowed("skip",element,newAnimation,existingAnimation))return existingAnimation.state===RUNNING_STATE?(close(),runner):(mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner);if(isAllowed("cancel",element,newAnimation,existingAnimation))if(existingAnimation.state===RUNNING_STATE)existingAnimation.runner.end();else{if(!existingAnimation.structural)return mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;existingAnimation.close()}else if(isAllowed("join",element,newAnimation,existingAnimation)){if(existingAnimation.state!==RUNNING_STATE)return applyGeneratedPreparationClasses(element,isStructural?event:null,options),event=newAnimation.event=existingAnimation.event,options=mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;normalizeAnimationDetails(element,newAnimation)}}else normalizeAnimationDetails(element,newAnimation);var isValidAnimation=newAnimation.structural;if(isValidAnimation||(isValidAnimation="animate"===newAnimation.event&&Object.keys(newAnimation.options.to||{}).length>0||hasAnimationClasses(newAnimation)),!isValidAnimation)return close(),clearElementAnimationState(element),runner;var counter=(existingAnimation.counter||0)+1;return newAnimation.counter=counter,markElementAnimationState(element,PRE_DIGEST_STATE,newAnimation),$rootScope.$$postDigest(function(){var animationDetails=activeAnimationsLookup.get(node),animationCancelled=!animationDetails;animationDetails=animationDetails||{};var isValidAnimation=(element.parent()||[]).length>0&&("animate"===animationDetails.event||animationDetails.structural||hasAnimationClasses(animationDetails));if(animationCancelled||animationDetails.counter!==counter||!isValidAnimation)return animationCancelled&&(applyAnimationClasses(element,options),applyAnimationStyles(element,options)),(animationCancelled||isStructural&&animationDetails.event!==event)&&(options.domOperation(),runner.end()),void(isValidAnimation||clearElementAnimationState(element));event=!animationDetails.structural&&hasAnimationClasses(animationDetails,!0)?"setClass":animationDetails.event,markElementAnimationState(element,RUNNING_STATE);var realRunner=$$animation(element,event,animationDetails.options);realRunner.done(function(status){close(!status);var animationDetails=activeAnimationsLookup.get(node);animationDetails&&animationDetails.counter===counter&&clearElementAnimationState(getDomNode(element)),notifyProgress(runner,event,"close",{})}),runner.setHost(realRunner),notifyProgress(runner,event,"start",{})}),runner}function closeChildAnimations(element){var children=getDomNode(element).querySelectorAll("["+NG_ANIMATE_ATTR_NAME+"]");forEach(children,function(child){var state=parseInt(child.getAttribute(NG_ANIMATE_ATTR_NAME)),animationDetails=activeAnimationsLookup.get(child);if(animationDetails)switch(state){case RUNNING_STATE:animationDetails.runner.end();case PRE_DIGEST_STATE:activeAnimationsLookup.remove(child)}})}function clearElementAnimationState(element){var node=getDomNode(element);node.removeAttribute(NG_ANIMATE_ATTR_NAME),activeAnimationsLookup.remove(node)}function isMatchingElement(nodeOrElmA,nodeOrElmB){return getDomNode(nodeOrElmA)===getDomNode(nodeOrElmB)}function areAnimationsAllowed(element,parentElement,event){var animateChildren,bodyElement=jqLite($document[0].body),bodyElementDetected=isMatchingElement(element,bodyElement)||"HTML"===element[0].nodeName,rootElementDetected=isMatchingElement(element,$rootElement),parentAnimationDetected=!1,elementDisabled=disabledElementsLookup.get(getDomNode(element)),parentHost=jqLite.data(element[0],NG_ANIMATE_PIN_DATA);for(parentHost&&(parentElement=parentHost),parentElement=getDomNode(parentElement);parentElement&&(rootElementDetected||(rootElementDetected=isMatchingElement(parentElement,$rootElement)),parentElement.nodeType===ELEMENT_NODE);){var details=activeAnimationsLookup.get(parentElement)||{};if(!parentAnimationDetected){var parentElementDisabled=disabledElementsLookup.get(parentElement);if(!0===parentElementDisabled&&!1!==elementDisabled){elementDisabled=!0;break}!1===parentElementDisabled&&(elementDisabled=!1),parentAnimationDetected=details.structural}if(isUndefined(animateChildren)||!0===animateChildren){var value=jqLite.data(parentElement,NG_ANIMATE_CHILDREN_DATA);isDefined(value)&&(animateChildren=value)}if(parentAnimationDetected&&!1===animateChildren)break;if(bodyElementDetected||(bodyElementDetected=isMatchingElement(parentElement,bodyElement)),bodyElementDetected&&rootElementDetected)break;parentElement=rootElementDetected||!(parentHost=jqLite.data(parentElement,NG_ANIMATE_PIN_DATA))?parentElement.parentNode:getDomNode(parentHost)}return(!parentAnimationDetected||animateChildren)&&!0!==elementDisabled&&rootElementDetected&&bodyElementDetected}function markElementAnimationState(element,state,details){(details=details||{}).state=state;var node=getDomNode(element);node.setAttribute(NG_ANIMATE_ATTR_NAME,state);var oldValue=activeAnimationsLookup.get(node),newValue=oldValue?extend(oldValue,details):details;activeAnimationsLookup.put(node,newValue)}var activeAnimationsLookup=new $$HashMap,disabledElementsLookup=new $$HashMap,animationsEnabled=null,deregisterWatch=$rootScope.$watch(function(){return 0===$templateRequest.totalPendingRequests},function(isEmpty){isEmpty&&(deregisterWatch(),$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){null===animationsEnabled&&(animationsEnabled=!0)})}))}),callbackRegistry={},classNameFilter=$animateProvider.classNameFilter(),isAnimatableClassName=classNameFilter?function(className){return classNameFilter.test(className)}:function(){return!0},applyAnimationClasses=applyAnimationClassesFactory($$jqLite),contains=Node.prototype.contains||function(arg){return this===arg||!!(16&this.compareDocumentPosition(arg))},$animate={on:function(event,container,callback){var node=extractElementNode(container);callbackRegistry[event]=callbackRegistry[event]||[],callbackRegistry[event].push({node:node,callback:callback}),jqLite(container).on("$destroy",function(){$animate.off(event,container,callback)})},off:function(event,container,callback){var entries=callbackRegistry[event];entries&&(callbackRegistry[event]=1===arguments.length?null:function(list,matchContainer,matchCallback){var containerNode=extractElementNode(matchContainer);return list.filter(function(entry){return!(entry.node===containerNode&&(!matchCallback||entry.callback===matchCallback))})}(entries,container,callback))},pin:function(element,parentElement){assertArg(isElement(element),"element","not an element"),assertArg(isElement(parentElement),"parentElement","not an element"),element.data(NG_ANIMATE_PIN_DATA,parentElement)},push:function(element,event,options,domOperation){return options=options||{},options.domOperation=domOperation,queueAnimation(element,event,options)},enabled:function(element,bool){var argCount=arguments.length;if(0===argCount)bool=!!animationsEnabled;else if(isElement(element)){var node=getDomNode(element),recordExists=disabledElementsLookup.get(node);1===argCount?bool=!recordExists:disabledElementsLookup.put(node,!bool)}else bool=animationsEnabled=!!element;return bool}};return $animate}]}],$$AnimationProvider=["$animateProvider",function($animateProvider){function setRunner(element,runner){element.data(RUNNER_STORAGE_KEY,runner)}function removeRunner(element){element.removeData(RUNNER_STORAGE_KEY)}function getRunner(element){return element.data(RUNNER_STORAGE_KEY)}var NG_ANIMATE_REF_ATTR="ng-animate-ref",drivers=this.drivers=[],RUNNER_STORAGE_KEY="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function($$jqLite,$rootScope,$injector,$$AnimateRunner,$$HashMap,$$rAFScheduler){function sortAnimations(animations){function processNode(entry){if(entry.processed)return entry;entry.processed=!0;var elementNode=entry.domNode,parentNode=elementNode.parentNode;lookup.put(elementNode,entry);for(var parentEntry;parentNode;){if(parentEntry=lookup.get(parentNode)){parentEntry.processed||(parentEntry=processNode(parentEntry));break}parentNode=parentNode.parentNode}return(parentEntry||tree).children.push(entry),entry}var i,tree={children:[]},lookup=new $$HashMap;for(i=0;i<animations.length;i++){var animation=animations[i];lookup.put(animation.domNode,animations[i]={domNode:animation.domNode,fn:animation.fn,children:[]})}for(i=0;i<animations.length;i++)processNode(animations[i]);return function(tree){var i,result=[],queue=[];for(i=0;i<tree.children.length;i++)queue.push(tree.children[i]);var remainingLevelEntries=queue.length,nextLevelEntries=0,row=[];for(i=0;i<queue.length;i++){var entry=queue[i];remainingLevelEntries<=0&&(remainingLevelEntries=nextLevelEntries,nextLevelEntries=0,result.push(row),row=[]),row.push(entry.fn),entry.children.forEach(function(childEntry){nextLevelEntries++,queue.push(childEntry)}),remainingLevelEntries--}return row.length&&result.push(row),result}(tree)}var animationQueue=[],applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,options){function getAnchorNodes(node){var SELECTOR="["+NG_ANIMATE_REF_ATTR+"]",items=node.hasAttribute(NG_ANIMATE_REF_ATTR)?[node]:node.querySelectorAll(SELECTOR),anchors=[];return forEach(items,function(node){var attr=node.getAttribute(NG_ANIMATE_REF_ATTR);attr&&attr.length&&anchors.push(node)}),anchors}function groupAnimations(animations){var preparedAnimations=[],refLookup={};forEach(animations,function(animation,index){var node=getDomNode(animation.element),event=animation.event,enterOrMove=["enter","move"].indexOf(event)>=0,anchorNodes=animation.structural?getAnchorNodes(node):[];if(anchorNodes.length){var direction=enterOrMove?"to":"from";forEach(anchorNodes,function(anchor){var key=anchor.getAttribute(NG_ANIMATE_REF_ATTR);refLookup[key]=refLookup[key]||{},refLookup[key][direction]={animationID:index,element:jqLite(anchor)}})}else preparedAnimations.push(animation)});var usedIndicesLookup={},anchorGroups={};return forEach(refLookup,function(operations,key){var from=operations.from,to=operations.to;if(from&&to){var fromAnimation=animations[from.animationID],toAnimation=animations[to.animationID],lookupKey=from.animationID.toString();if(!anchorGroups[lookupKey]){var group=anchorGroups[lookupKey]={structural:!0,beforeStart:function(){fromAnimation.beforeStart(),toAnimation.beforeStart()},close:function(){fromAnimation.close(),toAnimation.close()},classes:cssClassesIntersection(fromAnimation.classes,toAnimation.classes),from:fromAnimation,to:toAnimation,anchors:[]};group.classes.length?preparedAnimations.push(group):(preparedAnimations.push(fromAnimation),preparedAnimations.push(toAnimation))}anchorGroups[lookupKey].anchors.push({out:from.element,in:to.element})}else{var index=from?from.animationID:to.animationID,indexKey=index.toString();usedIndicesLookup[indexKey]||(usedIndicesLookup[indexKey]=!0,preparedAnimations.push(animations[index]))}}),preparedAnimations}function cssClassesIntersection(a,b){a=a.split(" "),b=b.split(" ");for(var matches=[],i=0;i<a.length;i++){var aa=a[i];if("ng-"!==aa.substring(0,3))for(var j=0;j<b.length;j++)if(aa===b[j]){matches.push(aa);break}}return matches.join(" ")}function invokeFirstDriver(animationDetails){for(var i=drivers.length-1;i>=0;i--){var driverName=drivers[i];if($injector.has(driverName)){var driver=$injector.get(driverName)(animationDetails);if(driver)return driver}}}function updateAnimationRunners(animation,newRunner){function update(element){getRunner(element).setHost(newRunner)}animation.from&&animation.to?(update(animation.from.element),update(animation.to.element)):update(animation.element)}function handleDestroyedElement(){var runner=getRunner(element);!runner||"leave"===event&&options.$$domOperationFired||runner.end()}function close(rejected){element.off("$destroy",handleDestroyedElement),removeRunner(element),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),tempClasses&&$$jqLite.removeClass(element,tempClasses),element.removeClass(NG_ANIMATE_CLASSNAME),runner.complete(!rejected)}options=prepareAnimationOptions(options);var isStructural=["enter","move","leave"].indexOf(event)>=0,runner=new $$AnimateRunner({end:function(){close()},cancel:function(){close(!0)}});if(!drivers.length)return close(),runner;setRunner(element,runner);var classes=mergeClasses(element.attr("class"),mergeClasses(options.addClass,options.removeClass)),tempClasses=options.tempClasses;tempClasses&&(classes+=" "+tempClasses,options.tempClasses=null);var prepareClassName;return isStructural&&(prepareClassName="ng-"+event+"-prepare",$$jqLite.addClass(element,prepareClassName)),animationQueue.push({element:element,classes:classes,event:event,structural:isStructural,options:options,beforeStart:function(){element.addClass(NG_ANIMATE_CLASSNAME),tempClasses&&$$jqLite.addClass(element,tempClasses),prepareClassName&&($$jqLite.removeClass(element,prepareClassName),prepareClassName=null)},close:close}),element.on("$destroy",handleDestroyedElement),animationQueue.length>1?runner:($rootScope.$$postDigest(function(){var animations=[];forEach(animationQueue,function(entry){getRunner(entry.element)?animations.push(entry):entry.close()}),animationQueue.length=0;var groupedAnimations=groupAnimations(animations),toBeSortedAnimations=[];forEach(groupedAnimations,function(animationEntry){toBeSortedAnimations.push({domNode:getDomNode(animationEntry.from?animationEntry.from.element:animationEntry.element),fn:function(){animationEntry.beforeStart();var startAnimationFn,closeFn=animationEntry.close;if(getRunner(animationEntry.anchors?animationEntry.from.element||animationEntry.to.element:animationEntry.element)){var operation=invokeFirstDriver(animationEntry);operation&&(startAnimationFn=operation.start)}if(startAnimationFn){var animationRunner=startAnimationFn();animationRunner.done(function(status){closeFn(!status)}),updateAnimationRunners(animationEntry,animationRunner)}else closeFn()}})}),$$rAFScheduler(sortAnimations(toBeSortedAnimations))}),runner)}}]}],ngAnimateSwapDirective=["$animate","$rootScope",function($animate,$rootScope){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(scope,$element,attrs,ctrl,$transclude){var previousElement,previousScope;scope.$watchCollection(attrs.ngAnimateSwap||attrs.for,function(value){previousElement&&$animate.leave(previousElement),previousScope&&(previousScope.$destroy(),previousScope=null),(value||0===value)&&(previousScope=scope.$new(),$transclude(previousScope,function(element){previousElement=element,$animate.enter(element,null,$element)}))})}}}];angular.module("ngAnimate",[]).directive("ngAnimateSwap",ngAnimateSwapDirective).directive("ngAnimateChildren",$$AnimateChildrenDirective).factory("$$rAFScheduler",$$rAFSchedulerFactory).provider("$$animateQueue",$$AnimateQueueProvider).provider("$$animation",$$AnimationProvider).provider("$animateCss",$AnimateCssProvider).provider("$$animateCssDriver",$$AnimateCssDriverProvider).provider("$$animateJs",$$AnimateJsProvider).provider("$$animateJsDriver",$$AnimateJsDriverProvider)}(window,window.angular),function(window,angular,undefined){"use strict";function sanitizeText(chars){var buf=[];return htmlSanitizeWriter(buf,angular.noop).chars(chars),buf.join("")}function toMap(str,lowercaseKeys){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[lowercaseKeys?angular.lowercase(items[i]):items[i]]=!0;return obj}function htmlParser(html,handler){null===html||html===undefined?html="":"string"!=typeof html&&(html=""+html),inertBodyElement.innerHTML=html;var mXSSAttempts=5;do{if(0===mXSSAttempts)throw $sanitizeMinErr("uinput","Failed to sanitize html because the input is unstable");mXSSAttempts--,document.documentMode<=11&&stripCustomNsAttrs(inertBodyElement),html=inertBodyElement.innerHTML,inertBodyElement.innerHTML=html}while(html!==inertBodyElement.innerHTML);for(var node=inertBodyElement.firstChild;node;){switch(node.nodeType){case 1:handler.start(node.nodeName.toLowerCase(),attrToMap(node.attributes));break;case 3:handler.chars(node.textContent)}var nextNode;if(!((nextNode=node.firstChild)||(1==node.nodeType&&handler.end(node.nodeName.toLowerCase()),nextNode=node.nextSibling)))for(;null==nextNode&&(node=node.parentNode)!==inertBodyElement;)nextNode=node.nextSibling,1==node.nodeType&&handler.end(node.nodeName.toLowerCase());node=nextNode}for(;node=inertBodyElement.firstChild;)inertBodyElement.removeChild(node)}function attrToMap(attrs){for(var map={},i=0,ii=attrs.length;i<ii;i++){var attr=attrs[i];map[attr.name]=attr.value}return map}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){return"&#"+(1024*(value.charCodeAt(0)-55296)+(value.charCodeAt(1)-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignoreCurrentElement=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs){tag=angular.lowercase(tag),!ignoreCurrentElement&&blockedElements[tag]&&(ignoreCurrentElement=tag),ignoreCurrentElement||!0!==validElements[tag]||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;!0!==validAttrs[lkey]||!0===uriAttrs[lkey]&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(">"))},end:function(tag){tag=angular.lowercase(tag),ignoreCurrentElement||!0!==validElements[tag]||!0===voidElements[tag]||(out("</"),out(tag),out(">")),tag==ignoreCurrentElement&&(ignoreCurrentElement=!1)},chars:function(chars){ignoreCurrentElement||out(encodeEntities(chars))}}}function stripCustomNsAttrs(node){if(node.nodeType===Node.ELEMENT_NODE)for(var attrs=node.attributes,i=0,l=attrs.length;i<l;i++){var attrNode=attrs[i],attrName=attrNode.name.toLowerCase();"xmlns:ns1"!==attrName&&0!==attrName.indexOf("ns1:")||(node.removeAttributeNode(attrNode),i--,l--)}var nextNode=node.firstChild;nextNode&&stripCustomNsAttrs(nextNode),(nextNode=node.nextSibling)&&stripCustomNsAttrs(nextNode)}var inertBodyElement,$sanitizeMinErr=angular.$$minErr("$sanitize"),SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~ |!])/g,voidElements=toMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=toMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=toMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,toMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,toMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=toMap("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),blockedElements=toMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements),uriAttrs=toMap("background,cite,href,longdesc,src,xlink:href"),htmlAttrs=toMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),svgAttrs=toMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs);!function(window){var doc;if(!window.document||!window.document.implementation)throw $sanitizeMinErr("noinert","Can't create an inert html document");var bodyElements=((doc=window.document.implementation.createHTMLDocument("inert")).documentElement||doc.getDocumentElement()).getElementsByTagName("body");if(1===bodyElements.length)inertBodyElement=bodyElements[0];else{var html=doc.createElement("html");inertBodyElement=doc.createElement("body"),html.appendChild(inertBodyElement),doc.appendChild(html)}}(window),angular.module("ngSanitize",[]).provider("$sanitize",function(){var svgEnabled=!1;this.$get=["$$sanitizeUri",function($$sanitizeUri){return svgEnabled&&angular.extend(validElements,svgElements),function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe:/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}],this.enableSvg=function(enableSvg){return angular.isDefined(enableSvg)?(svgEnabled=enableSvg,this):svgEnabled}}),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,MAILTO_REGEXP=/^mailto:/i,linkyMinErr=angular.$$minErr("linky"),isString=angular.isString;return function(text,target,attributes){function addText(text){text&&html.push(sanitizeText(text))}if(null==text||""===text)return text;if(!isString(text))throw linkyMinErr("notstring","Expected string but received: {0}",text);for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),function(url,text){var key;if(html.push("<a "),angular.isFunction(attributes)&&(attributes=attributes(url)),angular.isObject(attributes))for(key in attributes)html.push(key+'="'+attributes[key]+'" ');else attributes={};!angular.isDefined(target)||"target"in attributes||html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){"use strict";function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function objectKeys(object){if(Object.keys)return Object.keys(object);var result=[];return angular.forEach(object,function(val,key){result.push(key)}),result}function indexOf(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for((from=from<0?Math.ceil(from):Math.floor(from))<0&&(from+=len);from<len;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i].params&&(parentParams=objectKeys(parents[i].params)).length)for(var j in parentParams)indexOf(inheritList,parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]]);return extend({},inherited,newParams)}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a)keys.push(n)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}function filterByKeys(keys,values){var filtered={};return forEach(keys,function(name){filtered[name]=values[name]}),filtered}function omit(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var key in obj)-1==indexOf(keys,key)&&(copy[key]=obj[key]);return copy}function filter(collection,callback){var array=isArray(collection),result=array?[]:{};return forEach(collection,function(val,i){callback(val,i)&&(result[array?result.length:i]=val)}),result}function map(collection,callback){var result=isArray(collection)?[]:{};return forEach(collection,function(val,i){result[i]=callback(val,i)}),result}function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){function visit(value,key){if(visited[key]!==VISIT_DONE){if(cycle.push(key),visited[key]===VISIT_IN_PROGRESS)throw cycle.splice(0,indexOf(cycle,key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=VISIT_IN_PROGRESS,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)}),plan.push(key,value,params)}cycle.pop(),visited[key]=VISIT_DONE}}function isResolve(value){return isObject(value)&&value.then&&value.$$promises}if(!isObject(invocables))throw new Error("'invocables' must be an object");var invocableKeys=objectKeys(invocables||{}),plan=[],cycle=[],visited={};return forEach(invocables,visit),invocables=cycle=visited=null,function(locals,parent,self){function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=result.$$promises||!0,delete result.$$inheritedValues,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}if(isResolve(locals)&&self===undefined&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;if(isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$inheritedValues&&merge(values,omit(parent.$$inheritedValues,invocableKeys)),extend(promises,parent.$$promises),parent.$$values?(merged=merge(values,omit(parent.$$values,invocableKeys)),result.$$inheritedValues=omit(parent.$$values,invocableKeys),done()):(parent.$$inheritedValues&&(result.$$inheritedValues=omit(parent.$$inheritedValues,invocableKeys)),parent.then(done,fail));for(var i=0,ii=plan.length;i<ii;i+=3)locals.hasOwnProperty(plan[i])?done():function(key,invocable,params){function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then(function(result){values[key]=result,done()},onfailure)}catch(e){onfailure(e)}}var invocation=$q.defer(),waitParams=0;forEach(params,function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then(function(result){values[dep]=result,--waitParams||proceed()},onfailure))}),waitParams||proceed(),promises[key]=invocation.promise}(plan[i],plan[i+1],plan[i+2]);return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:$http.get(url,{cache:$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data})},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern,config,parentMatcher){function addParameter(id,type,config,location){if(paramNames.push(id),parentParams[id])return parentParams[id];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(params[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");return params[id]=new $$UMFP.Param(id,type,config,location),params[id]}function quoteRegExp(string,pattern,squash){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!pattern)return result;switch(squash){case!1:surroundPattern=["(",")"];break;case!0:surroundPattern=["?(",")?"];break;default:surroundPattern=["("+squash+"|",")?"]}return result+surroundPattern[0]+pattern+surroundPattern[1]}function matchDetails(m,isSearch){var id,regexp,segment,type,cfg;return id=m[2]||m[3],cfg=config.params[id],segment=pattern.substring(last,m.index),regexp=isSearch?m[4]:m[4]||("*"==m[1]?".*":null),type=$$UMFP.type(regexp||"string")||inherit($$UMFP.type("string"),{pattern:new RegExp(regexp)}),{id:id,regexp:regexp,segment:segment,type:type,cfg:cfg}}config=extend({params:{}},isObject(config)?config:{});var m,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,compiled="^",last=0,segments=this.segments=[],parentParams=parentMatcher?parentMatcher.params:{},params=this.params=parentMatcher?parentMatcher.params.$$new():new $$UMFP.ParamSet,paramNames=[];this.source=pattern;for(var p,param,segment;(m=placeholder.exec(pattern))&&!((p=matchDetails(m,!1)).segment.indexOf("?")>=0);)param=addParameter(p.id,p.type,p.cfg,"path"),compiled+=quoteRegExp(p.segment,param.type.pattern.source,param.squash),segments.push(p.segment),last=placeholder.lastIndex;var i=(segment=pattern.substring(last)).indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);if(segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),search.length>0)for(last=0;m=searchPlaceholder.exec(search);)param=addParameter((p=matchDetails(m,!0)).id,p.type,p.cfg,"search"),last=placeholder.lastIndex}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+(!1===config.strict?"/?":"")+"$",segments.push(segment),this.regexp=new RegExp(compiled,config.caseInsensitive?"i":undefined),this.prefix=segments[0],this.$$paramNames=paramNames}function Type(config){extend(this,config)}function $UrlMatcherFactory(){function valToString(val){return null!=val?val.toString().replace(/\//g,"%2F"):val}function getDefaultConfig(){return{strict:isStrictMode,caseInsensitive:isCaseInsensitive}}function isInjectable(value){return isFunction(value)||isArray(value)&&isFunction(value[value.length-1])}function flushTypeQueue(){for(;typeQueue.length;){var type=typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");angular.extend($types[type.name],injector.invoke(type.def))}}function ParamSet(params){extend(this,params||{})}$$UMFP=this;var injector,isCaseInsensitive=!1,isStrictMode=!0,defaultSquashPolicy=!1,$types={},enqueue=!0,typeQueue=[],defaultTypes={string:{encode:valToString,decode:function(val){return null!=val?val.toString().replace(/%2F/g,"/"):val},is:function(val){return this.pattern.test(val)},pattern:/[^/]*/},int:{encode:valToString,decode:function(val){return parseInt(val,10)},is:function(val){return isDefined(val)&&this.decode(val.toString())===val},pattern:/\d+/},bool:{encode:function(val){return val?1:0},decode:function(val){return 0!==parseInt(val,10)},is:function(val){return!0===val||!1===val},pattern:/0|1/},date:{encode:function(val){return this.is(val)?[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-"):undefined},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:angular.toJson,decode:angular.fromJson,is:angular.isObject,equals:angular.equals,pattern:/[^/]*/},any:{encode:angular.identity,decode:angular.identity,is:angular.identity,equals:angular.equals,pattern:/.*/}};$UrlMatcherFactory.$$getDefaultValue=function(config){if(!isInjectable(config.value))return config.value;if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.value)},this.caseInsensitive=function(value){return isDefined(value)&&(isCaseInsensitive=value),isCaseInsensitive},this.strictMode=function(value){return isDefined(value)&&(isStrictMode=value),isStrictMode},this.defaultSquashPolicy=function(value){if(!isDefined(value))return defaultSquashPolicy;if(!0!==value&&!1!==value&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return defaultSquashPolicy=value,value},this.compile=function(pattern,config){return new UrlMatcher(pattern,extend(getDefaultConfig(),config))},this.isMatcher=function(o){if(!isObject(o))return!1;var result=!0;return forEach(UrlMatcher.prototype,function(val,name){isFunction(val)&&(result=result&&isDefined(o[name])&&isFunction(o[name]))}),result},this.type=function(name,definition,definitionFn){if(!isDefined(definition))return $types[name];if($types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return $types[name]=new Type(extend({name:name},definition)),definitionFn&&(typeQueue.push({name:name,def:definitionFn}),enqueue||flushTypeQueue()),this},forEach(defaultTypes,function(type,name){$types[name]=new Type(extend({name:name},type))}),$types=inherit($types,{}),this.$get=["$injector",function($injector){return injector=$injector,enqueue=!1,flushTypeQueue(),forEach(defaultTypes,function(type,name){$types[name]||($types[name]=new Type(type))}),this}],this.Param=function(id,type,config,location){function $$getDefaultValue(){if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.$$fn)}var self=this;config=function(config){var keys=isObject(config)?objectKeys(config):[];return-1===indexOf(keys,"value")&&-1===indexOf(keys,"type")&&-1===indexOf(keys,"squash")&&-1===indexOf(keys,"array")&&(config={value:config}),config.$$fn=isInjectable(config.value)?config.value:function(){return config.value},config}(config),type=function(config,urlType,location){if(config.type&&urlType)throw new Error("Param '"+id+"' has two type configurations.");return urlType||(config.type?config.type instanceof Type?config.type:new Type(config.type):"config"===location?$types.any:$types.string)}(config,type,location);var arrayMode=function(){var arrayDefaults={array:"search"===location&&"auto"},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return extend(arrayDefaults,arrayParamNomenclature,config).array}();"string"!==(type=arrayMode?type.$asArray(arrayMode,"search"===location):type).name||arrayMode||"path"!==location||config.value!==undefined||(config.value="");var isOptional=config.value!==undefined,squash=function(config,isOptional){var squash=config.squash;if(!isOptional||!1===squash)return!1;if(!isDefined(squash)||null==squash)return defaultSquashPolicy;if(!0===squash||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}(config,isOptional),replace=function(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?undefined:""},{from:null,to:isOptional||arrayMode?undefined:""}];return replace=isArray(config.replace)?config.replace:[],isString(squash)&&replace.push({from:squash,to:undefined}),configuredKeys=map(replace,function(item){return item.from}),filter(defaultPolicy,function(item){return-1===indexOf(configuredKeys,item.from)}).concat(replace)}(config,arrayMode,isOptional,squash);extend(this,{id:id,type:type,location:location,array:arrayMode,squash:squash,replace:replace,isOptional:isOptional,value:function(value){function hasReplaceVal(val){return function(obj){return obj.from===val}}return value=function(value){var replacement=map(filter(self.replace,hasReplaceVal(value)),function(obj){return obj.to});return replacement.length?replacement[0]:value}(value),isDefined(value)?self.type.decode(value):$$getDefaultValue()},dynamic:undefined,config:config,toString:function(){return"{Param:"+id+" "+type+" squash: '"+squash+"' optional: "+isOptional+"}"}})},ParamSet.prototype={$$new:function(){return inherit(this,extend(new ParamSet,{$$parent:this}))},$$keys:function(){for(var keys=[],chain=[],parent=this,ignore=objectKeys(ParamSet.prototype);parent;)chain.push(parent),parent=parent.$$parent;return chain.reverse(),forEach(chain,function(paramset){forEach(objectKeys(paramset),function(key){-1===indexOf(keys,key)&&-1===indexOf(ignore,key)&&keys.push(key)})}),keys},$$values:function(paramValues){var values={},self=this;return forEach(self.$$keys(),function(key){values[key]=self[key].value(paramValues&&paramValues[key])}),values},$$equals:function(paramValues1,paramValues2){var equal=!0,self=this;return forEach(self.$$keys(),function(key){var left=paramValues1&&paramValues1[key],right=paramValues2&&paramValues2[key];self[key].type.equals(left,right)||(equal=!1)}),equal},$$validates:function(paramValues){var isOptional,val,param,result=!0,self=this;return forEach(this.$$keys(),function(key){param=self[key],val=paramValues[key],isOptional=!val&&param.isOptional,result=result&&(isOptional||!!param.type.is(val))}),result},$$parent:undefined},this.ParamSet=ParamSet}function $UrlRouterProvider($locationProvider,$urlMatcherFactory){function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})}function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return!isDefined(result)||result}function $get($location,$rootScope,$injector,$browser){function appendBasePath(url,isHtml5,absolute){return"/"===baseHref?url:isHtml5?baseHref.slice(0,-1)+url:absolute?baseHref.slice(1)+url:url}function update(evt){function check(rule){var handled=rule($injector,$location);return!!handled&&(isString(handled)&&$location.replace().url(handled),!0)}if(!evt||!evt.defaultPrevented){var ignoreUpdate=lastPushedUrl&&$location.url()===lastPushedUrl;if(lastPushedUrl=undefined,ignoreUpdate)return!0;var i,n=rules.length;for(i=0;i<n;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}}function listen(){return listener=listener||$rootScope.$on("$locationChangeSuccess",update)}var lastPushedUrl,baseHref=$browser.baseHref(),location=$location.url();return interceptDeferred||listen(),{sync:function(){update()},listen:function(){return listen()},update:function(read){read?location=$location.url():$location.url()!==location&&($location.url(location),$location.replace())},push:function(urlMatcher,params,options){$location.url(urlMatcher.format(params||{})),lastPushedUrl=options&&options.$$avoidResync?$location.url():undefined,options&&options.replace&&$location.replace()},href:function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var isHtml5=$locationProvider.html5Mode();angular.isObject(isHtml5)&&(isHtml5=isHtml5.enabled);var url=urlMatcher.format(params);if(options=options||{},isHtml5||null===url||(url="#"+$locationProvider.hashPrefix()+url),url=appendBasePath(url,isHtml5,options.absolute),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",port=$location.port();return port=80===port||443===port?"":":"+port,[$location.protocol(),"://",$location.host(),port,slash,url].join("")}}}var listener,rules=[],otherwise=null,interceptDeferred=!1;this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return interpolate(redirect,$match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:regExpPrefix(what)})}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(defer){defer===undefined&&(defer=!0),interceptDeferred=defer},this.$get=$get,$get.$inject=["$location","$rootScope","$injector","$browser"]}function $StateProvider($urlRouterProvider,$urlMatcherFactory){function isRelative(stateName){return 0===stateName.indexOf(".")||0===stateName.indexOf("^")}function findState(stateOrName,base){if(!stateOrName)return undefined;var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name;if(isRelative(name)){if(!base)throw new Error("No reference point given for path '"+name+"'");base=findState(base);for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;i<pathLength;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?undefined:state}function queueState(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}function flushQueuedChildren(parentName){for(var queued=queue[parentName]||[];queued.length;)registerState(queued.shift())}function registerState(state){var name=(state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}})).name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"'' is already defined");var parentName=-1!==name.indexOf(".")?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:isObject(state.parent)&&isString(state.parent.name)?state.parent.name:"";if(parentName&&!states[parentName])return queueState(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));return states[name]=state,!state[abstractKey]&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&equalForKeys($match,$stateParams)||$state.transitionTo(state,$match,{inherit:!0,location:!1})}]),flushQueuedChildren(name),state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){var globSegments=glob.split("."),segments=$state.$current.name.split(".");if("**"===globSegments[0]&&(segments=segments.slice(indexOf(segments,globSegments[1]))).unshift("**"),"**"===globSegments[globSegments.length-1]&&(segments.splice(indexOf(segments,globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length!=segments.length)return!1;for(var i=0,l=globSegments.length;i<l;i++)"*"===globSegments[i]&&(segments[i]="*");return segments.join("")===globSegments.join("")}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$urlRouter,$location,$urlMatcherFactory){function handleRedirect(redirect,state,params,options){var evt=$rootScope.$broadcast("$stateNotFound",redirect,state,params);if(evt.defaultPrevented)return $urlRouter.update(),TransitionAborted;if(!evt.retry)return null;if(options.$retry)return $urlRouter.update(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then(function(){return retryTransition!==$state.transition?TransitionSuperseded:(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))},function(){return TransitionAborted}),$urlRouter.update(),retryTransition}function resolveState(state,params,paramsAreFiltered,inherited,dst,options){var $stateParams=paramsAreFiltered?params:filterByKeys(state.params.$$keys(),params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];return inherited&&promises.push(inherited),forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:locals,params:$stateParams,notify:options.notify})||""}],promises.push($resolve.resolve(injectables,locals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,locals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,dst[name]=result}))}),$q.all(promises).then(function(values){return dst})}var TransitionSuperseded=$q.reject(new Error("transition superseded")),TransitionPrevented=$q.reject(new Error("transition prevented")),TransitionAborted=$q.reject(new Error("transition aborted")),TransitionFailed=$q.reject(new Error("transition failed"));return root.locals={resolve:null,globals:{$stateParams:{}}},$state={params:{},current:root.self,$current:root,transition:null},$state.reload=function(){return $state.transitionTo($state.current,$stateParams,{reload:!0,inherit:!1,notify:!0})},$state.go=function(to,params,options){return $state.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))},$state.transitionTo=function(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var evt,from=$state.$current,fromParams=$state.params,fromPath=from.path,toState=findState(to,options.relative);if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options},redirectResult=handleRedirect(redirect,from.self,fromParams,options);if(redirectResult)return redirectResult;if(to=redirect.to,toParams=redirect.toParams,options=redirect.options,toState=findState(to,options.relative),!isDefined(toState)){if(!options.relative)throw new Error("No such state '"+to+"'");throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");if(options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),!toState.params.$$validates(toParams))return TransitionFailed;toParams=toState.params.$$values(toParams);var toPath=(to=toState).path,keep=0,state=toPath[keep],locals=root.locals,toLocals=[];if(!options.reload)for(;state&&state===fromPath[keep]&&state.ownParams.$$equals(toParams,fromParams);)locals=toLocals[keep]=state.locals,state=toPath[++keep];if(shouldTriggerReload(to,from,locals,options))return!1!==to.self.reloadOnSearch&&$urlRouter.update(),$state.transition=null,$q.when($state.current);if(toParams=filterByKeys(to.params.$$keys(),toParams||{}),options.notify&&$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams).defaultPrevented)return $urlRouter.update(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;l++,state=toPath[l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals,options);var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--)(exiting=fromPath[l]).self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)(entering=toPath[l]).locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);return $state.transition!==transition?TransitionSuperseded:($state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null,options.location&&to.navigable&&$urlRouter.push(to.navigable.url,to.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===options.location}),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),$urlRouter.update(!0),$state.current)},function(error){return $state.transition!==transition?TransitionSuperseded:($state.transition=null,(evt=$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error)).defaultPrevented||$urlRouter.update(),$q.reject(error))});return transition},$state.is=function(stateOrName,params,options){var state=findState(stateOrName,(options=extend({relative:$state.$current},options||{})).relative);return isDefined(state)?$state.$current===state&&(!params||equalForKeys(state.params.$$values(params),$stateParams)):undefined},$state.includes=function(stateOrName,params,options){if(options=extend({relative:$state.$current},options||{}),isString(stateOrName)&&isGlob(stateOrName)){if(!doesStateMatchGlob(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName,options.relative);return isDefined(state)?!!isDefined($state.$current.includes[state.name])&&(!params||equalForKeys(state.params.$$values(params),$stateParams,objectKeys(params))):undefined},$state.href=function(stateOrName,params,options){var state=findState(stateOrName,(options=extend({lossy:!0,inherit:!0,absolute:!1,relative:$state.$current},options||{})).relative);if(!isDefined(state))return null;options.inherit&&(params=inheritParams($stateParams,params||{},$state.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&nav.url!==undefined&&null!==nav.url?$urlRouter.href(nav.url,filterByKeys(state.params.$$keys(),params||{}),{absolute:options.absolute}):null},$state.get=function(stateOrName,context){if(0===arguments.length)return map(objectKeys(states),function(name){return states[name].self});var state=findState(stateOrName,context||$state.$current);return state&&state.self?state.self:null},$state}function shouldTriggerReload(to,from,locals,options){if(to===from&&(locals===from.locals&&!options.reload||!1===to.self.reloadOnSearch))return!0}var root,$state,states={},queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=extend({},state.parent.data,state.data)),state.data},url:function(state){var url=state.url,config={params:state.params||{}};if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1),config):(state.parent.navigable||root).url.concat(url,config);if(!url||$urlMatcherFactory.isMatcher(url))return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},ownParams:function(state){var params=state.url&&state.url.params||new $$UMFP.ParamSet;return forEach(state.params||{},function(config,id){params[id]||(params[id]=new $$UMFP.Param(id,null,config,"config"))}),params},params:function(state){return state.parent&&state.parent.params?extend(state.parent.params.$$new(),state.ownParams):new $$UMFP.ParamSet},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),views[name]=view}),views},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};(root=registerState({name:"",url:"^",views:null,abstract:!0})).navigable=null,this.decorator=function(name,func){return isString(name)&&!isDefined(func)?stateBuilder[name]:isFunction(func)&&isString(name)?(stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]),stateBuilder[name]=func,this):this},this.state=function(name,definition){return isObject(name)?definition=name:definition.name=name,registerState(definition),this},this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function(name,options){var result;return(options=extend({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},options)).view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result&&options.notify&&$rootScope.$broadcast("$viewContentLoading",options),result}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewDirective($state,$injector,$uiViewScroll,$interpolate){function getRenderer(attrs,scope){if($animate)return{enter:function(element,target,cb){var promise=$animate.enter(element,null,target,cb);promise&&promise.then&&promise.then(cb)},leave:function(element,cb){var promise=$animate.leave(element,cb);promise&&promise.then&&promise.then(cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}}var service=$injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}},$animator=service("$animator"),$animate=service("$animate");return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){function cleanupLastView(){previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl&&(renderer.leave(currentEl,function(){previousEl=null}),previousEl=currentEl,currentEl=null)}function updateView(firstTime){var newScope,name=getUiViewName(scope,attrs,$element,$interpolate),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(firstTime||previousLocals!==latestLocals){newScope=scope.$new(),latestLocals=$state.$current.locals[name];var clone=$transclude(newScope,function(clone){renderer.enter(clone,$element,function(){currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});currentEl=clone,(currentScope=newScope).$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}}var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);scope.$on("$stateChangeSuccess",function(){updateView(!1)}),scope.$on("$viewContentLoading",function(){updateView(!1)}),updateView(!0)}}}}function $ViewDirectiveFill($compile,$controller,$state,$interpolate){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var current=$state.$current,name=getUiViewName(scope,attrs,$element,$interpolate),locals=current&&current.locals[name];if(locals){$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}}function getUiViewName(scope,attrs,element,$interpolate){var name=$interpolate(attrs.uiView||attrs.name||"")(scope),inherited=element.inheritedData("$uiView");return name.indexOf("@")>=0?name:name+"@"+(inherited?inherited.state.name:"")}function parseStateRef(ref,current){var parsed,preparsed=ref.match(/^\s*({[^}]*})\s*$/);if(preparsed&&(ref=current+"("+preparsed[1]+")"),!(parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/))||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");if(stateData&&stateData.state&&stateData.state.name)return stateData.state}function $StateRefDirective($state,$timeout){var allowedOptions=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref,$state.current.name),params=null,base=stateContext(element)||$state.$current,newHref=null,isAnchor="A"===element.prop("tagName"),isForm="FORM"===element[0].nodeName,attr=isForm?"action":"href",nav=!0,options={relative:base,inherit:!0},optionsOverride=scope.$eval(attrs.uiSrefOpts)||{};angular.forEach(allowedOptions,function(option){option in optionsOverride&&(options[option]=optionsOverride[option])});var update=function(newVal){if(newVal&&(params=angular.copy(newVal)),nav){newHref=$state.href(ref.state,params,options);var activeDirective=uiSrefActive[1]||uiSrefActive[0];if(activeDirective&&activeDirective.$$setStateInfo(ref.state,params),null===newHref)return nav=!1,!1;attrs.$set(attr,newHref)}};ref.paramExpr&&(scope.$watch(ref.paramExpr,function(newVal,oldVal){newVal!==params&&update(newVal)},!0),params=angular.copy(scope.$eval(ref.paramExpr))),update(),isForm||element.bind("click",function(e){if(!((e.which||e.button)>1||e.ctrlKey||e.metaKey||e.shiftKey||element.attr("target"))){var transition=$timeout(function(){$state.go(ref.state,params,options)});e.preventDefault();var ignorePreventDefaultCount=isAnchor&&!newHref?1:0;e.preventDefault=function(){ignorePreventDefaultCount--<=0&&$timeout.cancel(transition)}}})}}}function $StateRefActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function update(){isMatch()?$element.addClass(activeClass):$element.removeClass(activeClass)}function isMatch(){return void 0!==$attrs.uiSrefActiveEq?state&&$state.is(state.name,params):state&&$state.includes(state.name,params)}var state,params,activeClass;activeClass=$interpolate($attrs.uiSrefActiveEq||$attrs.uiSrefActive||"",!1)($scope),this.$$setStateInfo=function(newState,newParams){state=$state.get(newState,stateContext($element)),params=newParams,update()},$scope.$on("$stateChangeSuccess",update)}]}}function $IsStateFilter($state){var isFilter=function(state){return $state.is(state)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state){return $state.includes(state)};return includesFilter.$stateful=!0,includesFilter}var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy;angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),$TemplateFactory.$inject=["$http","$templateCache","$injector"],angular.module("ui.router.util").service("$templateFactory",$TemplateFactory);var $$UMFP;UrlMatcher.prototype.concat=function(pattern,config){var defaultConfig={caseInsensitive:$$UMFP.caseInsensitive(),strict:$$UMFP.strictMode(),squash:$$UMFP.defaultSquashPolicy()};return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch,extend(defaultConfig,config),this)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){var m=this.regexp.exec(path);if(!m)return null;searchParams=searchParams||{};var i,j,paramName,paramNames=this.parameters(),nTotal=paramNames.length,nPath=this.segments.length-1,values={};if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;i<nPath;i++){paramName=paramNames[i];var param=this.params[paramName],paramVal=m[i+1];for(j=0;j<param.replace;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);paramVal&&!0===param.array&&(paramVal=function(string){function reverseString(str){return str.split("").reverse().join("")}return map(map(reverseString(string).split(/-(?!\\)/),reverseString),function(str){return str.replace(/\\-/,"-")}).reverse()}(paramVal)),values[paramName]=param.value(paramVal)}for(;i<nTotal;i++)values[paramName=paramNames[i]]=this.params[paramName].value(searchParams[paramName]);return values},UrlMatcher.prototype.parameters=function(param){return isDefined(param)?this.params[param]||null:this.$$paramNames},UrlMatcher.prototype.validates=function(params){return this.params.$$validates(params)},UrlMatcher.prototype.format=function(values){values=values||{};var segments=this.segments,params=this.parameters(),paramset=this.params;if(!this.validates(values))return null;var i,search=!1,nPath=segments.length-1,nTotal=params.length,result=segments[0];for(i=0;i<nTotal;i++){var isPathParam=i<nPath,name=params[i],param=paramset[name],value=param.value(values[name]),isDefaultValue=param.isOptional&&param.type.equals(param.value(),value),squash=!!isDefaultValue&&param.squash,encoded=param.type.encode(value);if(isPathParam){var nextSegment=segments[i+1];if(!1===squash)null!=encoded&&(isArray(encoded)?result+=map(encoded,function(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})}).join("-"):result+=encodeURIComponent(encoded)),result+=nextSegment;else if(!0===squash){var capture=result.match(/\/$/)?/\/?(.*)/:/(.*)/;result+=nextSegment.match(capture)[1]}else isString(squash)&&(result+=squash+nextSegment)}else{if(null==encoded||isDefaultValue&&!1!==squash)continue;isArray(encoded)||(encoded=[encoded]),encoded=map(encoded,encodeURIComponent).join("&"+name+"="),result+=(search?"&":"?")+name+"="+encoded,search=!0}}return result},Type.prototype.is=function(val,key){return!0},Type.prototype.encode=function(val,key){return val},Type.prototype.decode=function(val,key){return val},Type.prototype.equals=function(a,b){return a==b},Type.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},Type.prototype.pattern=/.*/,Type.prototype.toString=function(){return"{Type:"+this.name+"}"},Type.prototype.$asArray=function(mode,isSearch){if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new function(type,mode){function bindTo(type,callbackName){return function(){return type[callbackName].apply(type,arguments)}}function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return undefined;case 1:return"auto"===mode?val[0]:val;default:return val}}function falsey(val){return!val}function arrayHandler(callback,allTruthyMode){return function(val){var result=map(val=arrayWrap(val),callback);return!0===allTruthyMode?0===filter(result,falsey).length:arrayUnwrap(result)}}this.encode=arrayHandler(bindTo(type,"encode")),this.decode=arrayHandler(bindTo(type,"decode")),this.is=arrayHandler(bindTo(type,"is"),!0),this.equals=function(callback){return function(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}(bindTo(type,"equals")),this.pattern=type.pattern,this.$arrayMode=mode}(this,mode)},angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),angular.module("ui.router.util").run(["$urlMatcherFactory",function($urlMatcherFactory){}]),$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").value("$stateParams",{}).provider("$state",$StateProvider),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",function(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){$timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}),$ViewDirective.$inject=["$state","$injector","$uiViewScroll","$interpolate"],$ViewDirectiveFill.$inject=["$compile","$controller","$state","$interpolate"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)}(window,window.angular),function(){function CollectionRepeatDirective($ionicCollectionManager,$parse,$window,$$rAF,$rootScope,$timeout){return{restrict:"A",priority:1e3,transclude:"element",$$tlb:!0,require:"^^$ionicScroll",link:function(scope,element,attr,scrollCtrl,transclude){function onResize(){changeValidator.resizeRequiresRefresh(scrollView.__clientWidth,scrollView.__clientHeight)&&refreshDimensions()}function getRepeatManager(){return repeatManager||(repeatManager=new $ionicCollectionManager({afterItemsNode:afterItemsContainer[0],containerNode:containerNode,heightData:heightData,widthData:widthData,forceRefreshImages:!(!isDefined(attr.forceRefreshImages)||"false"===attr.forceRefreshImages),keyExpression:keyExpr,renderBuffer:renderBuffer,scope:scope,scrollView:scrollCtrl.scrollView,transclude:transclude}))}function refreshDimensions(){var hasData=data.length>0;if(hasData&&(heightData.computed||widthData.computed)&&computeStyleDimensions(),hasData&&heightData.computed){if(heightData.value=computedStyleDimensions.height,!heightData.value)throw new Error('collection-repeat tried to compute the height of repeated elements "'+repeatExpr+'", but was unable to. Please provide the "item-height" attribute. http://ionicframework.com/docs/api/directive/collectionRepeat/')}else!heightData.dynamic&&heightData.getValue&&(heightData.value=heightData.getValue());if(hasData&&widthData.computed){if(widthData.value=computedStyleDimensions.width,!widthData.value)throw new Error('collection-repeat tried to compute the width of repeated elements "'+repeatExpr+'", but was unable to. Please provide the "item-width" attribute. http://ionicframework.com/docs/api/directive/collectionRepeat/')}else!widthData.dynamic&&widthData.getValue&&(widthData.value=widthData.getValue());getRepeatManager().refreshLayout()}function parseDimensionAttr(attrValue,dimensionData){if(attrValue){var parsedValue;try{parsedValue=$parse(attrValue)}catch(e){attrValue.trim().match(/\d+(px|%)$/)&&(attrValue='"'+attrValue+'"'),parsedValue=$parse(attrValue)}var constantAttrValue=attrValue.replace(/(\'|\"|px|%)/g,"").trim(),isConstant=constantAttrValue.length&&!/([a-zA-Z]|\$|:|\?)/.test(constantAttrValue);if(dimensionData.attrValue=attrValue,isConstant)if(attrValue.indexOf("%")>-1){var decimalValue=parseFloat(parsedValue())/100;dimensionData.getValue=dimensionData===heightData?function(){return Math.floor(decimalValue*scrollView.__clientHeight)}:function(){return Math.floor(decimalValue*scrollView.__clientWidth)}}else dimensionData.value=parseInt(parsedValue());else dimensionData.dynamic=!0,dimensionData.getValue=dimensionData===heightData?function(scope,locals){var result=parsedValue(scope,locals);return result.charAt&&"%"===result.charAt(result.length-1)?Math.floor(parseFloat(result)/100*scrollView.__clientHeight):parseInt(result)}:function(scope,locals){var result=parsedValue(scope,locals);return result.charAt&&"%"===result.charAt(result.length-1)?Math.floor(parseFloat(result)/100*scrollView.__clientWidth):parseInt(result)}}}function computeStyleDimensions(){computedStyleNode||transclude(computedStyleScope=scope.$new(),function(clone){clone[0].removeAttribute("collection-repeat"),computedStyleNode=clone[0]}),computedStyleScope[keyExpr]=(listGetter(scope)||[])[0],$rootScope.$$phase||computedStyleScope.$digest(),containerNode.appendChild(computedStyleNode);var style=$window.getComputedStyle(computedStyleNode);computedStyleDimensions.width=parseInt(style.width),computedStyleDimensions.height=parseInt(style.height),containerNode.removeChild(computedStyleNode)}var scrollView=scrollCtrl.scrollView,node=element[0],containerNode=angular.element('<div class="collection-repeat-container">')[0];if(node.parentNode.replaceChild(containerNode,node),scrollView.options.scrollingX&&scrollView.options.scrollingY)throw new Error("collection-repeat expected a parent x or y scrollView, not an xy scrollView.");var repeatExpr=attr.collectionRepeat,match=repeatExpr.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw new Error("collection-repeat expected expression in form of '_item_ in _collection_[ track by _id_]' but got '"+attr.collectionRepeat+"'.");var repeatManager,keyExpr=match[1],listExpr=match[2],listGetter=$parse(listExpr),heightData={},widthData={},computedStyleDimensions={},data=[],renderBufferExpr=attr.itemRenderBuffer||attr.collectionBufferSize,renderBuffer=angular.isDefined(renderBufferExpr)?parseInt(renderBufferExpr):DEFAULT_RENDER_BUFFER,heightExpr=attr.itemHeight||attr.collectionItemHeight,widthExpr=attr.itemWidth||attr.collectionItemWidth,afterItemsContainer=function(){var container=angular.element(scrollView.__content.querySelector(".collection-repeat-after-container"));if(!container.length){var elementIsAfterRepeater=!1,afterNodes=[].filter.call(scrollView.__content.childNodes,function(node){return ionic.DomUtil.contains(node,containerNode)?(elementIsAfterRepeater=!0,!1):elementIsAfterRepeater});container=angular.element('<span class="collection-repeat-after-container">'),scrollView.options.scrollingX&&container.addClass("horizontal"),container.append(afterNodes),scrollView.__content.appendChild(container[0])}return container}(),changeValidator=function(){var self;return self={dataLength:0,width:0,height:0,resizeRequiresRefresh:function(newWidth,newHeight){var requiresRefresh=self.dataLength&&newWidth&&newHeight&&(newWidth!==self.width||newHeight!==self.height);return self.width=newWidth,self.height=newHeight,!!requiresRefresh},dataChangeRequiresRefresh:function(newData){var requiresRefresh=newData.length>0||newData.length<self.dataLength;return self.dataLength=newData.length,!!requiresRefresh}}}();heightExpr?parseDimensionAttr(heightExpr,heightData):heightData.computed=!0,widthExpr?parseDimensionAttr(widthExpr,widthData):widthData.computed=!0,scrollCtrl.$element.on("scroll-resize",refreshDimensions),angular.element($window).on("resize",onResize);var unlistenToExposeAside=$rootScope.$on("$ionicExposeAside",ionic.animationFrameThrottle(function(){scrollCtrl.scrollView.resize(),onResize()}));$timeout(refreshDimensions,0,!1),scope.$watchCollection(listGetter,function(newValue){if(data=newValue||(newValue=[]),!angular.isArray(newValue))throw new Error("collection-repeat expected an array for '"+listExpr+"', but got a "+typeof value);scope.$$postDigest(function(){getRepeatManager().setData(data),changeValidator.dataChangeRequiresRefresh(data)&&refreshDimensions()})}),scope.$on("$destroy",function(){angular.element($window).off("resize",onResize),unlistenToExposeAside(),scrollCtrl.$element&&scrollCtrl.$element.off("scroll-resize",refreshDimensions),computedStyleNode&&computedStyleNode.parentNode&&computedStyleNode.parentNode.removeChild(computedStyleNode),computedStyleScope&&computedStyleScope.$destroy(),computedStyleScope=computedStyleNode=null,repeatManager&&repeatManager.destroy(),repeatManager=null});var computedStyleNode,computedStyleScope}}}function RepeatManagerFactory($rootScope,$window,$$rAF){var EMPTY_DIMENSION={primaryPos:0,secondaryPos:0,primarySize:0,secondarySize:0,rowPrimarySize:0};return function(options){function forceRerender(){return render(!0)}function render(forceRerender){if(!render.destroyed){var i,ii,item,dim,scope,scrollValue=view.getScrollValue(),scrollValueEnd=scrollValue+view.scrollPrimarySize;view.updateRenderRange(scrollValue,scrollValueEnd),renderStartIndex=Math.max(0,renderStartIndex-renderBuffer),renderEndIndex=Math.min(data.length-1,renderEndIndex+renderBuffer);for(i in itemsShownMap)(i<renderStartIndex||i>renderEndIndex)&&(item=itemsShownMap[i],delete itemsShownMap[i],itemsLeaving.push(item),item.isShown=!1);for(i=renderStartIndex;i<=renderEndIndex;i++)i>=data.length||itemsShownMap[i]&&!forceRerender||(item=itemsShownMap[i]||(itemsShownMap[i]=itemsLeaving.length?itemsLeaving.pop():itemsPool.length?itemsPool.shift():new RepeatItem),itemsEntering.push(item),item.isShown=!0,(scope=item.scope).$index=i,scope[keyExpression]=data[i],scope.$first=0===i,scope.$last=i===data.length-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0==(1&i)),scope.$$disconnected&&ionic.Utils.reconnectScope(item.scope),dim=view.getDimensions(i),item.secondaryPos===dim.secondaryPos&&item.primaryPos===dim.primaryPos||(item.node.style[ionic.CSS.TRANSFORM]=TRANSLATE_TEMPLATE_STR.replace(PRIMARY,item.primaryPos=dim.primaryPos).replace(SECONDARY,item.secondaryPos=dim.secondaryPos)),item.secondarySize===dim.secondarySize&&item.primarySize===dim.primarySize||(item.node.style.cssText=item.node.style.cssText.replace(WIDTH_HEIGHT_REGEX,WIDTH_HEIGHT_TEMPLATE_STR.replace(PRIMARY,(item.primarySize=dim.primarySize)+1).replace(SECONDARY,item.secondarySize=dim.secondarySize))));for(renderEndIndex===data.length-1&&(dim=view.getDimensions(data.length-1)||EMPTY_DIMENSION,afterItemsNode.style[ionic.CSS.TRANSFORM]=TRANSLATE_TEMPLATE_STR.replace(PRIMARY,dim.primaryPos+dim.primarySize).replace(SECONDARY,0));itemsLeaving.length;)(item=itemsLeaving.pop()).scope.$broadcast("$collectionRepeatLeave"),ionic.Utils.disconnectScope(item.scope),itemsPool.push(item),item.node.style[ionic.CSS.TRANSFORM]="translate3d(-9999px,-9999px,0)",item.primaryPos=item.secondaryPos=null;if(forceRefreshImages)for(i=0,ii=itemsEntering.length;i<ii&&(item=itemsEntering[i]);i++)if(item.images)for(var img,j=0,jj=item.images.length;j<jj&&(img=item.images[j]);j++){var src=img.src;img.src=ONE_PX_TRANSPARENT_IMG_SRC,img.src=src}if(forceRerender)for(var rootScopePhase=$rootScope.$$phase;itemsEntering.length;)item=itemsEntering.pop(),rootScopePhase||item.scope.$digest();else digestEnteringItems()}}function digestEnteringItems(){var item;digestEnteringItems.running||(digestEnteringItems.running=!0,$$rAF(function(){for(var rootScopePhase=$rootScope.$$phase;itemsEntering.length;)(item=itemsEntering.pop()).isShown&&(rootScopePhase||item.scope.$digest());digestEnteringItems.running=!1}))}function RepeatItem(){var self=this;this.scope=scope.$new(),this.id="item"+nextItemId++,transclude(this.scope,function(clone){self.element=clone,self.element.data("$$collectionRepeatItem",self),self.node=clone[0],self.node.style[ionic.CSS.TRANSFORM]="translate3d(-9999px,-9999px,0)",self.node.style.cssText+=" height: 0px; width: 0px;",ionic.Utils.disconnectScope(self.scope),containerNode.appendChild(self.node),self.images=clone[0].getElementsByTagName("img")})}var estimatedHeight,estimatedWidth,afterItemsNode=options.afterItemsNode,containerNode=options.containerNode,forceRefreshImages=options.forceRefreshImages,heightData=options.heightData,widthData=options.widthData,keyExpression=options.keyExpression,renderBuffer=options.renderBuffer,scope=options.scope,scrollView=options.scrollView,transclude=options.transclude,data=[],getterLocals={},heightFn=heightData.getValue||function(){return heightData.value},heightGetter=function(index,value){return getterLocals[keyExpression]=value,getterLocals.$index=index,heightFn(scope,getterLocals)},widthFn=widthData.getValue||function(){return widthData.value},widthGetter=function(index,value){return getterLocals[keyExpression]=value,getterLocals.$index=index,widthFn(scope,getterLocals)},isVertical=!!scrollView.options.scrollingY,isGridView=isVertical?widthData.dynamic||widthData.value!==scrollView.__clientWidth:heightData.dynamic||heightData.value!==scrollView.__clientHeight,isStaticView=!heightData.dynamic&&!widthData.dynamic,PRIMARY="PRIMARY",SECONDARY="SECONDARY",TRANSLATE_TEMPLATE_STR=isVertical?"translate3d(SECONDARYpx,PRIMARYpx,0)":"translate3d(PRIMARYpx,SECONDARYpx,0)",WIDTH_HEIGHT_TEMPLATE_STR=isVertical?"height: PRIMARYpx; width: SECONDARYpx;":"height: SECONDARYpx; width: PRIMARYpx;",repeaterBeforeSize=0,repeaterAfterSize=0,renderStartIndex=-1,renderEndIndex=-1,renderAfterBoundary=-1,renderBeforeBoundary=-1,itemsPool=[],itemsLeaving=[],itemsEntering=[],itemsShownMap={},nextItemId=0,scrollViewSetDimensions=isVertical?function(){scrollView.setDimensions(null,null,null,view.getContentSize(),!0)}:function(){scrollView.setDimensions(null,null,view.getContentSize(),null,!0)},view=isVertical?new function(){this.getItemPrimarySize=heightGetter,this.getItemSecondarySize=widthGetter,this.getScrollValue=function(){return Math.max(0,Math.min(scrollView.__scrollTop-repeaterBeforeSize,scrollView.__maxScrollTop-repeaterBeforeSize-repeaterAfterSize))},this.refreshDirection=function(){this.scrollPrimarySize=scrollView.__clientHeight,this.scrollSecondarySize=scrollView.__clientWidth,this.estimatedPrimarySize=estimatedHeight,this.estimatedSecondarySize=estimatedWidth,this.estimatedItemsAcross=isGridView&&Math.floor(scrollView.__clientWidth/estimatedWidth)||1}}:new function(){this.getItemPrimarySize=widthGetter,this.getItemSecondarySize=heightGetter,this.getScrollValue=function(){return Math.max(0,Math.min(scrollView.__scrollLeft-repeaterBeforeSize,scrollView.__maxScrollLeft-repeaterBeforeSize-repeaterAfterSize))},this.refreshDirection=function(){this.scrollPrimarySize=scrollView.__clientWidth,this.scrollSecondarySize=scrollView.__clientHeight,this.estimatedPrimarySize=estimatedWidth,this.estimatedSecondarySize=estimatedHeight,this.estimatedItemsAcross=isGridView&&Math.floor(scrollView.__clientHeight/estimatedHeight)||1}};(isGridView?function(){this.getEstimatedSecondaryPos=function(index){return index%this.estimatedItemsAcross*this.estimatedSecondarySize},this.getEstimatedPrimaryPos=function(index){return Math.floor(index/this.estimatedItemsAcross)*this.estimatedPrimarySize},this.getEstimatedIndex=function(scrollValue){return Math.floor(scrollValue/this.estimatedPrimarySize)*this.estimatedItemsAcross}}:function(){this.getEstimatedSecondaryPos=function(){return 0},this.getEstimatedPrimaryPos=function(index){return index*this.estimatedPrimarySize},this.getEstimatedIndex=function(scrollValue){return Math.floor(scrollValue/this.estimatedPrimarySize)}}).call(view),(isStaticView?function(){this.getContentSize=function(){return this.getEstimatedPrimaryPos(data.length-1)+this.estimatedPrimarySize+repeaterBeforeSize+repeaterAfterSize};var dim={};this.getDimensions=function(index){return dim.primaryPos=this.getEstimatedPrimaryPos(index),dim.secondaryPos=this.getEstimatedSecondaryPos(index),dim.primarySize=this.estimatedPrimarySize,dim.secondarySize=this.estimatedSecondarySize,dim},this.updateRenderRange=function(scrollValue,scrollValueEnd){renderStartIndex=Math.max(0,this.getEstimatedIndex(scrollValue)),renderEndIndex=Math.min(data.length-1,this.getEstimatedIndex(scrollValueEnd)+this.estimatedItemsAcross-1),renderBeforeBoundary=Math.max(0,this.getEstimatedPrimaryPos(renderStartIndex)),renderAfterBoundary=this.getEstimatedPrimaryPos(renderEndIndex)+this.estimatedPrimarySize}}:function(){var dimensionsIndex,self=this,debouncedScrollViewSetDimensions=ionic.debounce(scrollViewSetDimensions,25,!0),calculateDimensions=isGridView?function(toIndex){var i,prevDimension,dim;for(i=Math.max(dimensionsIndex,0);i<=toIndex&&(dim=dimensions[i]);i++)prevDimension=dimensions[i-1]||EMPTY_DIMENSION,dim.secondarySize=Math.min(self.getItemSecondarySize(i,data[i]),self.scrollSecondarySize),dim.secondaryPos=prevDimension.secondaryPos+prevDimension.secondarySize,0===i||dim.secondaryPos+dim.secondarySize>self.scrollSecondarySize?(dim.secondaryPos=0,dim.primarySize=self.getItemPrimarySize(i,data[i]),dim.primaryPos=prevDimension.primaryPos+prevDimension.rowPrimarySize,dim.rowStartIndex=i,dim.rowPrimarySize=dim.primarySize):(dim.primarySize=self.getItemPrimarySize(i,data[i]),dim.primaryPos=prevDimension.primaryPos,dim.rowStartIndex=prevDimension.rowStartIndex,dimensions[dim.rowStartIndex].rowPrimarySize=dim.rowPrimarySize=Math.max(dimensions[dim.rowStartIndex].rowPrimarySize,dim.primarySize),dim.rowPrimarySize=Math.max(dim.primarySize,dim.rowPrimarySize))}:function(toIndex){var i,prevDimension,dim;for(i=Math.max(0,dimensionsIndex);i<=toIndex&&(dim=dimensions[i]);i++)prevDimension=dimensions[i-1]||EMPTY_DIMENSION,dim.primarySize=self.getItemPrimarySize(i,data[i]),dim.secondarySize=self.scrollSecondarySize,dim.primaryPos=prevDimension.primaryPos+prevDimension.primarySize,dim.secondaryPos=0},dimensions=[];this.getContentSize=function(){var dim=dimensions[dimensionsIndex]||EMPTY_DIMENSION;return(dim.primaryPos+dim.primarySize||0)+this.getEstimatedPrimaryPos(data.length-dimensionsIndex-1)+repeaterBeforeSize+repeaterAfterSize},this.onDestroy=function(){dimensions.length=0},this.onRefreshData=function(){var i,ii;for(i=dimensions.length,ii=data.length;i<ii;i++)dimensions.push({});dimensionsIndex=-1},this.onRefreshLayout=function(){dimensionsIndex=-1},this.getDimensions=function(index){return index=Math.min(index,data.length-1),dimensionsIndex<index&&(index>.9*data.length?(calculateDimensions(data.length-1),dimensionsIndex=data.length-1,scrollViewSetDimensions()):(calculateDimensions(index),dimensionsIndex=index,debouncedScrollViewSetDimensions())),dimensions[index]};var oldRenderStartIndex=-1,oldScrollValue=-1;this.updateRenderRange=function(scrollValue,scrollValueEnd){var i,len,dim;if(this.getDimensions(2*this.getEstimatedIndex(scrollValueEnd)),-1===oldRenderStartIndex||0===scrollValue)i=0;else if(scrollValue>=oldScrollValue)for(i=oldRenderStartIndex,len=data.length;i<len&&!((dim=this.getDimensions(i))&&dim.primaryPos+dim.rowPrimarySize>=scrollValue);i++);else for(i=oldRenderStartIndex;i>=0;i--)if((dim=this.getDimensions(i))&&dim.primaryPos<=scrollValue){i=isGridView?dim.rowStartIndex:i;break}renderStartIndex=Math.min(Math.max(0,i),data.length-1),renderBeforeBoundary=-1!==renderStartIndex?this.getDimensions(renderStartIndex).primaryPos:-1;var lastRowDim;for(i=renderStartIndex+1,len=data.length;i<len;i++)if((dim=this.getDimensions(i))&&dim.primaryPos+dim.rowPrimarySize>scrollValueEnd){if(isGridView)for(lastRowDim=dim;i<len-1&&(dim=this.getDimensions(i+1)).primaryPos===lastRowDim.primaryPos;)i++;break}renderEndIndex=Math.min(i,data.length-1),renderAfterBoundary=-1!==renderEndIndex?(dim=this.getDimensions(renderEndIndex)).primaryPos+(dim.rowPrimarySize||dim.primarySize):-1,oldScrollValue=scrollValue,oldRenderStartIndex=renderStartIndex}}).call(view);var contentSizeStr=isVertical?"getContentHeight":"getContentWidth",originalGetContentSize=scrollView.options[contentSizeStr];scrollView.options[contentSizeStr]=angular.bind(view,view.getContentSize),scrollView.__$callback=scrollView.__callback,scrollView.__callback=function(transformLeft,transformTop,zoom,wasResize){var scrollValue=view.getScrollValue();(-1===renderStartIndex||scrollValue+view.scrollPrimarySize>renderAfterBoundary||scrollValue<renderBeforeBoundary)&&render(),scrollView.__$callback(transformLeft,transformTop,zoom,wasResize)};var isLayoutReady=!1,isDataReady=!1;this.refreshLayout=function(){data.length?(estimatedHeight=heightGetter(0,data[0]),estimatedWidth=widthGetter(0,data[0])):(estimatedHeight=100,estimatedWidth=100);var style=getComputedStyle(afterItemsNode)||{},firstStyle=afterItemsNode.firstElementChild&&getComputedStyle(afterItemsNode.firstElementChild)||{},lastStyle=afterItemsNode.lastElementChild&&getComputedStyle(afterItemsNode.lastElementChild)||{};repeaterAfterSize=(parseInt(style[isVertical?"height":"width"])||0)+(firstStyle&&parseInt(firstStyle[isVertical?"marginTop":"marginLeft"])||0)+(lastStyle&&parseInt(lastStyle[isVertical?"marginBottom":"marginRight"])||0),repeaterBeforeSize=0;var current=containerNode;do{repeaterBeforeSize+=current[isVertical?"offsetTop":"offsetLeft"]}while(ionic.DomUtil.contains(scrollView.__content,current=current.offsetParent));var containerPrevNode=containerNode.previousElementSibling,beforeStyle=containerPrevNode?$window.getComputedStyle(containerPrevNode):{},beforeMargin=parseInt(beforeStyle[isVertical?"marginBottom":"marginRight"]||0);if(containerNode.style[ionic.CSS.TRANSFORM]=TRANSLATE_TEMPLATE_STR.replace(PRIMARY,-beforeMargin).replace(SECONDARY,0),repeaterBeforeSize-=beforeMargin,scrollView.__clientHeight&&scrollView.__clientWidth||(scrollView.__clientWidth=scrollView.__container.clientWidth,scrollView.__clientHeight=scrollView.__container.clientHeight),(view.onRefreshLayout||angular.noop)(),view.refreshDirection(),scrollViewSetDimensions(),!isLayoutReady)for(var poolSize=Math.max(20,3*renderBuffer),i=0;i<poolSize;i++)itemsPool.push(new RepeatItem);(isLayoutReady=!0)&&isDataReady&&((scrollView.__scrollLeft>scrollView.__maxScrollLeft||scrollView.__scrollTop>scrollView.__maxScrollTop)&&scrollView.resize(),forceRerender())},this.setData=function(newData){data=newData,(view.onRefreshData||angular.noop)(),isDataReady=!0},this.destroy=function(){render.destroyed=!0,itemsPool.forEach(function(item){item.scope.$destroy(),item.scope=item.element=item.node=item.images=null}),itemsPool.length=itemsEntering.length=itemsLeaving.length=0,itemsShownMap={},scrollView.options[contentSizeStr]=originalGetContentSize,scrollView.__callback=scrollView.__$callback,scrollView.resize(),(view.onDestroy||angular.noop)()}}}function gestureDirective(directiveName){return["$ionicGesture","$parse",function($ionicGesture,$parse){var eventType=directiveName.substr(2).toLowerCase();return function(scope,element,attr){var fn=$parse(attr[directiveName]),listener=function(ev){scope.$apply(function(){fn(scope,{$event:ev})})},gesture=$ionicGesture.on(eventType,listener,element);scope.$on("$destroy",function(){$ionicGesture.off(gesture,eventType,listener)})}}]}function headerFooterBarDirective(isHeader){return["$document","$timeout",function($document,$timeout){return{restrict:"E",controller:"$ionicHeaderBar",compile:function(tElement){return tElement.addClass(isHeader?"bar bar-header":"bar bar-footer"),$timeout(function(){isHeader&&$document[0].getElementsByClassName("tabs-top").length&&tElement.addClass("has-tabs-top")}),{pre:function($scope,$element,$attr,ctrl){isHeader?($scope.$watch(function(){return $element[0].className},function(value){var isShown=-1===value.indexOf("ng-hide"),isSubheader=-1!==value.indexOf("bar-subheader");$scope.$hasHeader=isShown&&!isSubheader,$scope.$hasSubheader=isShown&&isSubheader,$scope.$emit("$ionicSubheader",$scope.$hasSubheader)}),$scope.$on("$destroy",function(){delete $scope.$hasHeader,delete $scope.$hasSubheader}),ctrl.align(),$scope.$on("$ionicHeader.align",function(){ionic.requestAnimationFrame(function(){ctrl.align()})})):($scope.$watch(function(){return $element[0].className},function(value){var isShown=-1===value.indexOf("ng-hide"),isSubfooter=-1!==value.indexOf("bar-subfooter");$scope.$hasFooter=isShown&&!isSubfooter,$scope.$hasSubfooter=isShown&&isSubfooter}),$scope.$on("$destroy",function(){delete $scope.$hasFooter,delete $scope.$hasSubfooter}),$scope.$watch("$hasTabs",function(val){$element.toggleClass("has-tabs",!!val)}),ctrl.align(),$scope.$on("$ionicFooter.align",function(){ionic.requestAnimationFrame(function(){ctrl.align()})}))}}}}}]}function keyboardAttachGetClientHeight(element){return element.clientHeight}function eventStopPropagation(e){e.stopPropagation()}var IonicModule=angular.module("ionic",["ngAnimate","ngSanitize","ui.router","ngIOS9UIWebViewPatch"]),extend=angular.extend,forEach=angular.forEach,isDefined=angular.isDefined,isNumber=angular.isNumber,isString=angular.isString,jqLite=angular.element,noop=angular.noop;IonicModule.factory("$ionicActionSheet",["$rootScope","$compile","$animate","$timeout","$ionicTemplateLoader","$ionicPlatform","$ionicBody","IONIC_BACK_PRIORITY",function($rootScope,$compile,$animate,$timeout,$ionicTemplateLoader,$ionicPlatform,$ionicBody,IONIC_BACK_PRIORITY){return{show:function(opts){function textForIcon(text){text&&/icon/.test(text)&&(scope.$actionSheetHasIcon=!0)}var scope=$rootScope.$new(!0);extend(scope,{cancel:noop,destructiveButtonClicked:noop,buttonClicked:noop,$deregisterBackButton:noop,buttons:[],cancelOnStateChange:!0},opts||{});for(var x=0;x<scope.buttons.length;x++)textForIcon(scope.buttons[x].text);textForIcon(scope.cancelText),textForIcon(scope.destructiveText);var element=scope.element=$compile('<ion-action-sheet ng-class="cssClass" buttons="buttons"></ion-action-sheet>')(scope),sheetEl=jqLite(element[0].querySelector(".action-sheet-wrapper")),stateChangeListenDone=scope.cancelOnStateChange?$rootScope.$on("$stateChangeSuccess",function(){scope.cancel()}):noop;return scope.removeSheet=function(done){scope.removed||(scope.removed=!0,sheetEl.removeClass("action-sheet-up"),$timeout(function(){$ionicBody.removeClass("action-sheet-open")},400),scope.$deregisterBackButton(),stateChangeListenDone(),$animate.removeClass(element,"active").then(function(){scope.$destroy(),element.remove(),scope.cancel.$scope=sheetEl=null,(done||noop)(opts.buttons)}))},scope.showSheet=function(done){scope.removed||($ionicBody.append(element).addClass("action-sheet-open"),$animate.addClass(element,"active").then(function(){scope.removed||(done||noop)()}),$timeout(function(){scope.removed||sheetEl.addClass("action-sheet-up")},20,!1))},scope.$deregisterBackButton=$ionicPlatform.registerBackButtonAction(function(){$timeout(scope.cancel)},IONIC_BACK_PRIORITY.actionSheet),scope.cancel=function(){scope.removeSheet(opts.cancel)},scope.buttonClicked=function(index){!0===opts.buttonClicked(index,opts.buttons[index])&&scope.removeSheet()},scope.destructiveButtonClicked=function(){!0===opts.destructiveButtonClicked()&&scope.removeSheet()},scope.showSheet(),scope.cancel.$scope=scope,scope.cancel}}}]),jqLite.prototype.addClass=function(cssClasses){var x,y,cssClass,el,splitClasses,existingClasses;if(cssClasses&&"ng-scope"!=cssClasses&&"ng-isolate-scope"!=cssClasses)for(x=0;x<this.length;x++)if((el=this[x]).setAttribute)if(cssClasses.indexOf(" ")<0&&el.classList.add)el.classList.add(cssClasses);else{for(existingClasses=(" "+(el.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),splitClasses=cssClasses.split(" "),y=0;y<splitClasses.length;y++)cssClass=splitClasses[y].trim(),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ");el.setAttribute("class",existingClasses.trim())}return this},jqLite.prototype.removeClass=function(cssClasses){var x,y,splitClasses,cssClass,el;if(cssClasses)for(x=0;x<this.length;x++)if((el=this[x]).getAttribute)if(cssClasses.indexOf(" ")<0&&el.classList.remove)el.classList.remove(cssClasses);else for(splitClasses=cssClasses.split(" "),y=0;y<splitClasses.length;y++)cssClass=splitClasses[y],el.setAttribute("class",(" "+(el.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+cssClass.trim()+" "," ").trim());return this},IonicModule.factory("$ionicBackdrop",["$document","$timeout","$$rAF","$rootScope",function($document,$timeout,$$rAF,$rootScope){var el=jqLite('<div class="backdrop">'),backdropHolds=0;return $document[0].body.appendChild(el[0]),{retain:function(){1==++backdropHolds&&(el.addClass("visible"),$rootScope.$broadcast("backdrop.shown"),$$rAF(function(){backdropHolds>=1&&el.addClass("active")}))},release:function(){1===backdropHolds&&(el.removeClass("active"),$rootScope.$broadcast("backdrop.hidden"),$timeout(function(){0===backdropHolds&&el.removeClass("visible")},400,!1)),backdropHolds=Math.max(0,backdropHolds-1)},getElement:function(){return el},_element:el}}]),IonicModule.factory("$ionicBind",["$parse","$interpolate",function($parse,$interpolate){var LOCAL_REGEXP=/^\s*([@=&])(\??)\s*(\w*)\s*$/;return function(scope,attrs,bindDefinition){forEach(bindDefinition||{},function(definition,scopeName){var parentGet,unwatch,match=definition.match(LOCAL_REGEXP)||[],attrName=match[3]||scopeName;switch(match[1]){case"@":if(!attrs[attrName])return;attrs.$observe(attrName,function(value){scope[scopeName]=value}),attrs[attrName]&&(scope[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(!attrs[attrName])return;unwatch=scope.$watch(attrs[attrName],function(value){scope[scopeName]=value}),scope.$on("$destroy",unwatch);break;case"&":if(attrs[attrName]&&attrs[attrName].match(RegExp(scopeName+"(.*?)")))throw new Error('& expression binding "'+scopeName+'" looks like it will recursively call "'+attrs[attrName]+'" and cause a stack overflow! Please choose a different scopeName.');parentGet=$parse(attrs[attrName]),scope[scopeName]=function(locals){return parentGet(scope,locals)}}})}}]),IonicModule.factory("$ionicBody",["$document",function($document){return{addClass:function(){for(var x=0;x<arguments.length;x++)$document[0].body.classList.add(arguments[x]);return this},removeClass:function(){for(var x=0;x<arguments.length;x++)$document[0].body.classList.remove(arguments[x]);return this},enableClass:function(shouldEnableClass){var args=Array.prototype.slice.call(arguments).slice(1);return shouldEnableClass?this.addClass.apply(this,args):this.removeClass.apply(this,args),this},append:function(ele){return $document[0].body.appendChild(ele.length?ele[0]:ele),this},get:function(){return $document[0].body}}}]),IonicModule.factory("$ionicClickBlock",["$document","$ionicBody","$timeout",function($document,$ionicBody,$timeout){function preventClick(ev){ev.preventDefault(),ev.stopPropagation()}function addClickBlock(){pendingShow&&(cbEle?cbEle.classList.remove(CSS_HIDE):((cbEle=$document[0].createElement("div")).className="click-block",$ionicBody.append(cbEle),cbEle.addEventListener("touchstart",preventClick),cbEle.addEventListener("mousedown",preventClick)),pendingShow=!1)}function removeClickBlock(){cbEle&&cbEle.classList.add(CSS_HIDE)}var cbEle,fallbackTimer,pendingShow,CSS_HIDE="click-block-hide";return{show:function(autoExpire){pendingShow=!0,$timeout.cancel(fallbackTimer),fallbackTimer=$timeout(this.hide,autoExpire||310,!1),addClickBlock()},hide:function(){pendingShow=!1,$timeout.cancel(fallbackTimer),removeClickBlock()}}}]),IonicModule.factory("$ionicGesture",[function(){return{on:function(eventType,cb,$element,options){return window.ionic.onGesture(eventType,cb,$element[0],options)},off:function(gesture,eventType,cb){return window.ionic.offGesture(gesture,eventType,cb)}}}]),IonicModule.factory("$ionicHistory",["$rootScope","$state","$location","$window","$timeout","$ionicViewSwitcher","$ionicNavViewDelegate",function($rootScope,$state,$location,$window,$timeout,$ionicViewSwitcher,$ionicNavViewDelegate){function getViewById(viewId){return viewId?viewHistory.views[viewId]:null}function getBackView(view){return view?getViewById(view.backViewId):null}function getForwardView(view){return view?getViewById(view.forwardViewId):null}function getHistoryById(historyId){return historyId?viewHistory.histories[historyId]:null}function getHistory(scope){var histObj=getParentHistoryObj(scope);return viewHistory.histories[histObj.historyId]||(viewHistory.histories[histObj.historyId]={historyId:histObj.historyId,parentHistoryId:getParentHistoryObj(histObj.scope.$parent).historyId,stack:[],cursor:-1}),getHistoryById(histObj.historyId)}function getParentHistoryObj(scope){for(var parentScope=scope;parentScope;){if(parentScope.hasOwnProperty("$historyId"))return{historyId:parentScope.$historyId,scope:parentScope};parentScope=parentScope.$parent}return{historyId:"root",scope:$rootScope}}function setNavViews(viewId){viewHistory.currentView=getViewById(viewId),viewHistory.backView=getBackView(viewHistory.currentView),viewHistory.forwardView=getForwardView(viewHistory.currentView)}function getCurrentStateId(){var id;if($state&&$state.current&&$state.current.name){if(id=$state.current.name,$state.params)for(var key in $state.params)$state.params.hasOwnProperty(key)&&$state.params[key]&&(id+="_"+key+"="+$state.params[key]);return id}return ionic.Utils.nextUid()}function getCurrentStateParams(){var rtn;if($state&&$state.params)for(var key in $state.params)$state.params.hasOwnProperty(key)&&((rtn=rtn||{})[key]=$state.params[key]);return rtn}function isAbstractTag(ele){return ele&&ele.length&&/ion-side-menus|ion-tabs/i.test(ele[0].tagName)}function canSwipeBack(ele,viewLocals){if(viewLocals&&viewLocals.$$state&&!1===viewLocals.$$state.self.canSwipeBack)return!1;if(ele&&"false"===ele.attr("can-swipe-back"))return!1;var eleChild=ele.find("ion-view");return!eleChild||"false"!==eleChild.attr("can-swipe-back")}var lastStateId,nextViewOptions,deregisterStateChangeListener,nextViewExpireTimer,forcedNav,stateChangeCounter=0,viewHistory={histories:{root:{historyId:"root",parentHistoryId:null,stack:[],cursor:-1}},views:{},backView:null,forwardView:null,currentView:null},View=function(){};return View.prototype.initialize=function(data){if(data){for(var name in data)this[name]=data[name];return this}return null},View.prototype.go=function(){if(this.stateName)return $state.go(this.stateName,this.stateParams);if(this.url&&this.url!==$location.url()){if(viewHistory.backView===this)return $window.history.go(-1);if(viewHistory.forwardView===this)return $window.history.go(1);$location.url(this.url)}return null},View.prototype.destroy=function(){this.scope&&(this.scope.$destroy&&this.scope.$destroy(),this.scope=null)},{register:function(parentScope,viewLocals){var tmp,x,ele,currentStateId=getCurrentStateId(),hist=getHistory(parentScope),currentView=viewHistory.currentView,backView=viewHistory.backView,forwardView=viewHistory.forwardView,viewId=null,action=null,direction="none",historyId=hist.historyId,url=$location.url();if(lastStateId!==currentStateId&&(lastStateId=currentStateId,stateChangeCounter++),forcedNav)viewId=forcedNav.viewId,action=forcedNav.action,direction=forcedNav.direction,forcedNav=null;else if(backView&&backView.stateId===currentStateId)viewId=backView.viewId,historyId=backView.historyId,action="moveBack",backView.historyId===currentView.historyId?direction="back":currentView&&(direction="exit",(tmp=getHistoryById(backView.historyId))&&tmp.parentHistoryId===currentView.historyId?direction="enter":(tmp=getHistoryById(currentView.historyId))&&tmp.parentHistoryId===hist.parentHistoryId&&(direction="swap"));else if(forwardView&&forwardView.stateId===currentStateId)viewId=forwardView.viewId,historyId=forwardView.historyId,action="moveForward",forwardView.historyId===currentView.historyId?direction="forward":currentView&&(direction="exit",currentView.historyId===hist.parentHistoryId?direction="enter":(tmp=getHistoryById(currentView.historyId))&&tmp.parentHistoryId===hist.parentHistoryId&&(direction="swap")),tmp=getParentHistoryObj(parentScope),forwardView.historyId&&tmp.scope&&(tmp.scope.$historyId=forwardView.historyId,historyId=forwardView.historyId);else if(currentView&&currentView.historyId!==historyId&&hist.cursor>-1&&hist.stack.length>0&&hist.cursor<hist.stack.length&&hist.stack[hist.cursor].stateId===currentStateId){var switchToView=hist.stack[hist.cursor];viewId=switchToView.viewId,historyId=switchToView.historyId,action="moveBack",direction="swap",(tmp=getHistoryById(currentView.historyId))&&tmp.parentHistoryId===historyId?direction="exit":(tmp=getHistoryById(historyId))&&tmp.parentHistoryId===currentView.historyId&&(direction="enter"),(tmp=getViewById(switchToView.backViewId))&&switchToView.historyId!==tmp.historyId&&(Object.keys(viewHistory.views).forEach(function(viewId){var view=viewHistory.views[viewId];view.backViewId===switchToView.viewId&&(view.backViewId=null)}),hist.stack[hist.cursor].backViewId=currentView.viewId)}else{if(ele=$ionicViewSwitcher.createViewEle(viewLocals),this.isAbstractEle(ele,viewLocals))return{action:"abstractView",direction:"none",ele:ele};if(viewId=ionic.Utils.nextUid(),currentView){if(currentView.forwardViewId=viewId,action="newView",forwardView&&currentView.stateId!==forwardView.stateId&&currentView.historyId===forwardView.historyId&&(tmp=getHistoryById(forwardView.historyId))){for(x=tmp.stack.length-1;x>=forwardView.index;x--){var stackItem=tmp.stack[x];stackItem&&stackItem.destroy&&stackItem.destroy(),tmp.stack.splice(x)}historyId=forwardView.historyId}hist.historyId===currentView.historyId?direction="forward":currentView.historyId!==hist.historyId&&(direction="enter",(tmp=getHistoryById(currentView.historyId))&&tmp.parentHistoryId===hist.parentHistoryId?direction="swap":(tmp=getHistoryById(tmp.parentHistoryId))&&tmp.historyId===hist.historyId&&(direction="exit"))}else action="initialView";stateChangeCounter<2&&(direction="none"),viewHistory.views[viewId]=this.createView({viewId:viewId,index:hist.stack.length,historyId:hist.historyId,backViewId:currentView&&currentView.viewId?currentView.viewId:null,forwardViewId:null,stateId:currentStateId,stateName:this.currentStateName(),stateParams:getCurrentStateParams(),url:url,canSwipeBack:canSwipeBack(ele,viewLocals)}),hist.stack.push(viewHistory.views[viewId])}if(deregisterStateChangeListener&&deregisterStateChangeListener(),$timeout.cancel(nextViewExpireTimer),nextViewOptions){if(nextViewOptions.disableAnimate&&(direction="none"),nextViewOptions.disableBack&&(viewHistory.views[viewId].backViewId=null),nextViewOptions.historyRoot){for(x=0;x<hist.stack.length;x++)hist.stack[x].viewId===viewId?(hist.stack[x].index=0,hist.stack[x].backViewId=hist.stack[x].forwardViewId=null):delete viewHistory.views[hist.stack[x].viewId];hist.stack=[viewHistory.views[viewId]]}nextViewOptions=null}if(setNavViews(viewId),viewHistory.backView&&historyId==viewHistory.backView.historyId&&currentStateId==viewHistory.backView.stateId&&url==viewHistory.backView.url)for(x=0;x<hist.stack.length;x++)if(hist.stack[x].viewId==viewId){action="dupNav",direction="none",x>0&&(hist.stack[x-1].forwardViewId=null),viewHistory.forwardView=null,viewHistory.currentView.index=viewHistory.backView.index,viewHistory.currentView.backViewId=viewHistory.backView.backViewId,viewHistory.backView=getBackView(viewHistory.backView),hist.stack.splice(x,1);break}return hist.cursor=viewHistory.currentView.index,{viewId:viewId,action:action,direction:direction,historyId:historyId,enableBack:this.enabledBack(viewHistory.currentView),isHistoryRoot:0===viewHistory.currentView.index,ele:ele}},registerHistory:function(scope){scope.$historyId=ionic.Utils.nextUid()},createView:function(data){return(new View).initialize(data)},getViewById:getViewById,viewHistory:function(){return viewHistory},currentView:function(view){return arguments.length&&(viewHistory.currentView=view),viewHistory.currentView},currentHistoryId:function(){return viewHistory.currentView?viewHistory.currentView.historyId:null},currentTitle:function(val){if(viewHistory.currentView)return arguments.length&&(viewHistory.currentView.title=val),viewHistory.currentView.title},backView:function(view){return arguments.length&&(viewHistory.backView=view),viewHistory.backView},backTitle:function(view){var backView=view&&getViewById(view.backViewId)||viewHistory.backView;return backView&&backView.title},forwardView:function(view){return arguments.length&&(viewHistory.forwardView=view),viewHistory.forwardView},currentStateName:function(){return $state&&$state.current?$state.current.name:null},isCurrentStateNavView:function(navView){return!!($state&&$state.current&&$state.current.views&&$state.current.views[navView])},goToHistoryRoot:function(historyId){if(historyId){var hist=getHistoryById(historyId);if(hist&&hist.stack.length){if(viewHistory.currentView&&viewHistory.currentView.viewId===hist.stack[0].viewId)return;forcedNav={viewId:hist.stack[0].viewId,action:"moveBack",direction:"back"},hist.stack[0].go()}}},goBack:function(backCount){if(isDefined(backCount)&&-1!==backCount){if(backCount>-1)return;var currentHistory=viewHistory.histories[this.currentHistoryId()],newCursor=currentHistory.cursor+backCount+1;newCursor<1&&(newCursor=1),currentHistory.cursor=newCursor,setNavViews(currentHistory.stack[newCursor].viewId);for(var cursor=newCursor-1,clearStateIds=[],fwdView=getViewById(currentHistory.stack[cursor].forwardViewId);fwdView&&(clearStateIds.push(fwdView.stateId||fwdView.viewId),!(++cursor>=currentHistory.stack.length));)fwdView=getViewById(currentHistory.stack[cursor].forwardViewId);var self=this;clearStateIds.length&&$timeout(function(){self.clearCache(clearStateIds)},300)}viewHistory.backView&&viewHistory.backView.go()},removeBackView:function(){var self=this,currentHistory=viewHistory.histories[this.currentHistoryId()],currentCursor=currentHistory.cursor,currentView=currentHistory.stack[currentCursor],backView=currentHistory.stack[currentCursor-1],replacementView=currentHistory.stack[currentCursor-2];backView&&replacementView&&(currentHistory.stack.splice(currentCursor-1,1),self.clearCache([backView.viewId]),currentView.backViewId=replacementView.viewId,currentView.index=currentView.index-1,replacementView.forwardViewId=currentView.viewId,viewHistory.backView=replacementView,currentHistory.currentCursor+=-1)},enabledBack:function(view){var backView=getBackView(view);return!(!backView||backView.historyId!==view.historyId)},clearHistory:function(){var histories=viewHistory.histories,currentView=viewHistory.currentView;if(histories)for(var historyId in histories)histories[historyId].stack&&(histories[historyId].stack=[],histories[historyId].cursor=-1),currentView&&currentView.historyId===historyId?(currentView.backViewId=currentView.forwardViewId=null,histories[historyId].stack.push(currentView)):histories[historyId].destroy&&histories[historyId].destroy();for(var viewId in viewHistory.views)viewId!==currentView.viewId&&delete viewHistory.views[viewId];currentView&&setNavViews(currentView.viewId)},clearCache:function(stateIds){return $timeout(function(){$ionicNavViewDelegate._instances.forEach(function(instance){instance.clearCache(stateIds)})})},nextViewOptions:function(opts){return deregisterStateChangeListener&&deregisterStateChangeListener(),arguments.length&&($timeout.cancel(nextViewExpireTimer),null===opts?nextViewOptions=opts:(extend(nextViewOptions=nextViewOptions||{},opts),nextViewOptions.expire&&(deregisterStateChangeListener=$rootScope.$on("$stateChangeSuccess",function(){nextViewExpireTimer=$timeout(function(){nextViewOptions=null},nextViewOptions.expire)})))),nextViewOptions},isAbstractEle:function(ele,viewLocals){return!!(viewLocals&&viewLocals.$$state&&viewLocals.$$state.self.abstract)||!(!ele||!isAbstractTag(ele)&&!isAbstractTag(ele.children()))},isActiveScope:function(scope){if(!scope)return!1;for(var foundHistoryId,climbScope=scope,currentHistoryId=this.currentHistoryId();climbScope;){if(climbScope.$$disconnected)return!1;if(!foundHistoryId&&climbScope.hasOwnProperty("$historyId")&&(foundHistoryId=!0),currentHistoryId){if(climbScope.hasOwnProperty("$historyId")&&currentHistoryId==climbScope.$historyId)return!0;if(climbScope.hasOwnProperty("$activeHistoryId")&&currentHistoryId==climbScope.$activeHistoryId){if(climbScope.hasOwnProperty("$historyId"))return!0;if(!foundHistoryId)return!0}}foundHistoryId&&climbScope.hasOwnProperty("$activeHistoryId")&&(foundHistoryId=!1),climbScope=climbScope.$parent}return!currentHistoryId||"root"==currentHistoryId}}}]).run(["$rootScope","$state","$location","$document","$ionicPlatform","$ionicHistory","IONIC_BACK_PRIORITY",function($rootScope,$state,$location,$document,$ionicPlatform,$ionicHistory,IONIC_BACK_PRIORITY){$rootScope.$on("$ionicView.beforeEnter",function(){ionic.keyboard&&ionic.keyboard.hide&&ionic.keyboard.hide()}),$rootScope.$on("$ionicHistory.change",function(e,data){if(!data)return null;var viewHistory=$ionicHistory.viewHistory(),hist=data.historyId?viewHistory.histories[data.historyId]:null;if(hist&&hist.cursor>-1&&hist.cursor<hist.stack.length)return hist.stack[hist.cursor].go(data);!data.url&&data.uiSref&&(data.url=$state.href(data.uiSref)),data.url&&(0===data.url.indexOf("#")&&(data.url=data.url.replace("#","")),data.url!==$location.url()&&$location.url(data.url))}),$rootScope.$ionicGoBack=function(backCount){$ionicHistory.goBack(backCount)},$rootScope.$on("$ionicView.afterEnter",function(ev,data){data&&data.title&&($document[0].title=data.title)}),$ionicPlatform.registerBackButtonAction(function(e){var backView=$ionicHistory.backView();return backView?backView.go():ionic.Platform.exitApp(),e.preventDefault(),!1},IONIC_BACK_PRIORITY.view)}]),IonicModule.provider("$ionicConfig",function(){function setPlatformConfig(platformName,platformConfigs){configProperties.platform[platformName]=platformConfigs,provider.platform[platformName]={},addConfig(configProperties,configProperties.platform[platformName]),createConfig(configProperties.platform[platformName],provider.platform[platformName],"")}function addConfig(configObj,platformObj){for(var n in configObj)n!=PLATFORM&&configObj.hasOwnProperty(n)&&(angular.isObject(configObj[n])?(isDefined(platformObj[n])||(platformObj[n]={}),addConfig(configObj[n],platformObj[n])):isDefined(platformObj[n])||(platformObj[n]=null))}function createConfig(configObj,providerObj,platformPath){forEach(configObj,function(value,namespace){angular.isObject(configObj[namespace])?(providerObj[namespace]={},createConfig(configObj[namespace],providerObj[namespace],platformPath+"."+namespace)):providerObj[namespace]=function(newValue){if(arguments.length)return configObj[namespace]=newValue,providerObj;if(configObj[namespace]==PLATFORM){var platformConfig=stringObj(configProperties.platform,ionic.Platform.platform()+platformPath+"."+namespace);return platformConfig||!1===platformConfig?platformConfig:stringObj(configProperties.platform,"default"+platformPath+"."+namespace)}return configObj[namespace]}})}function stringObj(obj,str){str=str.split(".");for(var i=0;i<str.length;i++){if(!obj||!isDefined(obj[str[i]]))return null;obj=obj[str[i]]}return obj}var provider=this;provider.platform={};var PLATFORM="platform",configProperties={views:{maxCache:PLATFORM,forwardCache:PLATFORM,transition:PLATFORM,swipeBackEnabled:PLATFORM,swipeBackHitWidth:PLATFORM},navBar:{alignTitle:PLATFORM,positionPrimaryButtons:PLATFORM,positionSecondaryButtons:PLATFORM,transition:PLATFORM},backButton:{icon:PLATFORM,text:PLATFORM,previousTitleText:PLATFORM},form:{checkbox:PLATFORM,toggle:PLATFORM},scrolling:{jsScrolling:PLATFORM},spinner:{icon:PLATFORM},tabs:{style:PLATFORM,position:PLATFORM},templates:{maxPrefetch:PLATFORM},platform:{}};createConfig(configProperties,provider,""),setPlatformConfig("default",{views:{maxCache:10,forwardCache:!1,transition:"ios",swipeBackEnabled:!0,swipeBackHitWidth:45},navBar:{alignTitle:"center",positionPrimaryButtons:"left",positionSecondaryButtons:"right",transition:"view"},backButton:{icon:"ion-ios-arrow-back",text:"Back",previousTitleText:!0},form:{checkbox:"circle",toggle:"large"},scrolling:{jsScrolling:!0},spinner:{icon:"ios"},tabs:{style:"standard",position:"bottom"},templates:{maxPrefetch:30}}),setPlatformConfig("ios",{}),setPlatformConfig("android",{views:{transition:"android",swipeBackEnabled:!1},navBar:{alignTitle:"left",positionPrimaryButtons:"right",positionSecondaryButtons:"right"},backButton:{icon:"ion-android-arrow-back",text:!1,previousTitleText:!1},form:{checkbox:"square",toggle:"small"},spinner:{icon:"android"},tabs:{style:"striped",position:"top"},scrolling:{jsScrolling:!1}}),setPlatformConfig("windowsphone",{spinner:{icon:"android"}}),provider.transitions={views:{},navBar:{}},provider.transitions.views.ios=function(enteringEle,leavingEle,direction,shouldAnimate){function setStyles(ele,opacity,x,boxShadowOpacity){var css={};css[ionic.CSS.TRANSITION_DURATION]=d.shouldAnimate?"":0,css.opacity=opacity,boxShadowOpacity>-1&&(css.boxShadow="0 0 10px rgba(0,0,0,"+(d.shouldAnimate?.45*boxShadowOpacity:.3)+")"),css[ionic.CSS.TRANSFORM]="translate3d("+x+"%,0,0)",ionic.DomUtil.cachedStyles(ele,css)}var d={run:function(step){"forward"==direction?(setStyles(enteringEle,1,99*(1-step),1-step),setStyles(leavingEle,1-.1*step,-33*step,-1)):"back"==direction?(setStyles(enteringEle,1-.1*(1-step),-33*(1-step),-1),setStyles(leavingEle,1,100*step,1-step)):(setStyles(enteringEle,1,0,-1),setStyles(leavingEle,0,0,-1))},shouldAnimate:shouldAnimate&&("forward"==direction||"back"==direction)};return d},provider.transitions.navBar.ios=function(enteringHeaderBar,leavingHeaderBar,direction,shouldAnimate){function setStyles(ctrl,opacity,titleX,backTextX){var css={};css[ionic.CSS.TRANSITION_DURATION]=d.shouldAnimate?"":"0ms",css.opacity=1===opacity?"":opacity,ctrl.setCss("buttons-left",css),ctrl.setCss("buttons-right",css),ctrl.setCss("back-button",css),css[ionic.CSS.TRANSFORM]="translate3d("+backTextX+"px,0,0)",ctrl.setCss("back-text",css),css[ionic.CSS.TRANSFORM]="translate3d("+titleX+"px,0,0)",ctrl.setCss("title",css)}function enter(ctrlA,ctrlB,step){ctrlA&&ctrlB&&setStyles(ctrlA,step,(ctrlA.titleTextX()+ctrlA.titleWidth())*(1-step),ctrlB&&(ctrlB.titleTextX()-ctrlA.backButtonTextLeft())*(1-step)||0)}function leave(ctrlA,ctrlB,step){ctrlA&&ctrlB&&setStyles(ctrlA,1-step,(-(ctrlA.titleTextX()-ctrlB.backButtonTextLeft())-ctrlA.titleLeftRight())*step,0)}var d={run:function(step){var enteringHeaderCtrl=enteringHeaderBar.controller(),leavingHeaderCtrl=leavingHeaderBar&&leavingHeaderBar.controller();"back"==d.direction?(leave(enteringHeaderCtrl,leavingHeaderCtrl,1-step),enter(leavingHeaderCtrl,enteringHeaderCtrl,1-step)):(enter(enteringHeaderCtrl,leavingHeaderCtrl,step),leave(leavingHeaderCtrl,enteringHeaderCtrl,step))},direction:direction,shouldAnimate:shouldAnimate&&("forward"==direction||"back"==direction)};return d},provider.transitions.views.android=function(enteringEle,leavingEle,direction,shouldAnimate){function setStyles(ele,x,opacity){var css={};css[ionic.CSS.TRANSITION_DURATION]=d.shouldAnimate?"":0,css[ionic.CSS.TRANSFORM]="translate3d("+x+"%,0,0)",css.opacity=opacity,ionic.DomUtil.cachedStyles(ele,css)}var d={run:function(step){"forward"==direction?(setStyles(enteringEle,99*(1-step),1),setStyles(leavingEle,-100*step,1)):"back"==direction?(setStyles(enteringEle,-100*(1-step),1),setStyles(leavingEle,100*step,1)):(setStyles(enteringEle,0,1),setStyles(leavingEle,0,0))},shouldAnimate:shouldAnimate=shouldAnimate&&("forward"==direction||"back"==direction)};return d},provider.transitions.navBar.android=function(enteringHeaderBar,leavingHeaderBar,direction,shouldAnimate){function setStyles(ctrl,opacity){if(ctrl){var css={};css.opacity=1===opacity?"":opacity,ctrl.setCss("buttons-left",css),ctrl.setCss("buttons-right",css),ctrl.setCss("back-button",css),ctrl.setCss("back-text",css),ctrl.setCss("title",css)}}return{run:function(step){setStyles(enteringHeaderBar.controller(),step),setStyles(leavingHeaderBar&&leavingHeaderBar.controller(),1-step)},shouldAnimate:shouldAnimate&&("forward"==direction||"back"==direction)}},provider.transitions.views.none=function(enteringEle,leavingEle){return{run:function(step){provider.transitions.views.android(enteringEle,leavingEle,!1,!1).run(step)},shouldAnimate:!1}},provider.transitions.navBar.none=function(enteringHeaderBar,leavingHeaderBar){return{run:function(step){provider.transitions.navBar.ios(enteringHeaderBar,leavingHeaderBar,!1,!1).run(step),provider.transitions.navBar.android(enteringHeaderBar,leavingHeaderBar,!1,!1).run(step)},shouldAnimate:!1}},provider.setPlatformConfig=setPlatformConfig,provider.$get=function(){return provider}}).config(["$compileProvider",function($compileProvider){$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|sms|tel|geo|ftp|mailto|file|ghttps?|ms-appx-web|ms-appx|x-wmapp0):/),$compileProvider.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|content|blob|ms-appx|ms-appx-web|x-wmapp0):|data:image\//)}]);var LOADING_TPL='<div class="loading-container"><div class="loading"></div></div>';IonicModule.constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner>"}).factory("$ionicLoading",["$ionicLoadingConfig","$ionicBody","$ionicTemplateLoader","$ionicBackdrop","$timeout","$q","$log","$compile","$ionicPlatform","$rootScope","IONIC_BACK_PRIORITY",function($ionicLoadingConfig,$ionicBody,$ionicTemplateLoader,$ionicBackdrop,$timeout,$q,$log,$compile,$ionicPlatform,$rootScope,IONIC_BACK_PRIORITY){function getLoader(){return loaderInstance||(loaderInstance=$ionicTemplateLoader.compile({template:LOADING_TPL,appendTo:$ionicBody.get()}).then(function(self){return self.show=function(options){var templatePromise=options.templateUrl?$ionicTemplateLoader.load(options.templateUrl):$q.when(options.template||options.content||"");self.scope=options.scope||self.scope,self.isShown||(self.hasBackdrop=!options.noBackdrop&&!1!==options.showBackdrop,self.hasBackdrop&&($ionicBackdrop.retain(),$ionicBackdrop.getElement().addClass("backdrop-loading"))),options.duration&&($timeout.cancel(self.durationTimeout),self.durationTimeout=$timeout(angular.bind(self,self.hide),+options.duration)),deregisterBackAction(),deregisterBackAction=$ionicPlatform.registerBackButtonAction(noop,IONIC_BACK_PRIORITY.loading),templatePromise.then(function(html){if(html){var loading=self.element.children();loading.html(html),$compile(loading.contents())(self.scope)}self.isShown&&(self.element.addClass("visible"),ionic.requestAnimationFrame(function(){self.isShown&&(self.element.addClass("active"),$ionicBody.addClass("loading-active"))}))}),self.isShown=!0},self.hide=function(){deregisterBackAction(),self.isShown&&(self.hasBackdrop&&($ionicBackdrop.release(),$ionicBackdrop.getElement().removeClass("backdrop-loading")),self.element.removeClass("active"),$ionicBody.removeClass("loading-active"),self.element.removeClass("visible"),ionic.requestAnimationFrame(function(){!self.isShown&&self.element.removeClass("visible")})),$timeout.cancel(self.durationTimeout),self.isShown=!1,self.element.children().html("")},self})),loaderInstance}function hideLoader(){return deregisterStateListener1(),deregisterStateListener2(),$timeout.cancel(loadingShowDelay),getLoader().then(function(loader){return loader.hide()})}var loaderInstance,deregisterBackAction=noop,deregisterStateListener1=noop,deregisterStateListener2=noop,loadingShowDelay=$q.when();return{show:function(options){var delay=(options=extend({},$ionicLoadingConfig||{},options||{})).delay||options.showDelay||0;return deregisterStateListener1(),deregisterStateListener2(),options.hideOnStateChange&&(deregisterStateListener1=$rootScope.$on("$stateChangeSuccess",hideLoader),deregisterStateListener2=$rootScope.$on("$stateChangeError",hideLoader)),$timeout.cancel(loadingShowDelay),(loadingShowDelay=$timeout(noop,delay)).then(getLoader).then(function(loader){return loader.show(options)})},hide:hideLoader,_getLoader:getLoader}}]),IonicModule.factory("$ionicModal",["$rootScope","$ionicBody","$compile","$timeout","$ionicPlatform","$ionicTemplateLoader","$$q","$log","$ionicClickBlock","$window","IONIC_BACK_PRIORITY",function($rootScope,$ionicBody,$compile,$timeout,$ionicPlatform,$ionicTemplateLoader,$$q,$log,$ionicClickBlock,$window,IONIC_BACK_PRIORITY){var ModalView=ionic.views.Modal.inherit({initialize:function(opts){ionic.views.Modal.prototype.initialize.call(this,opts),this.animation=opts.animation||"slide-in-up"},show:function(target){var self=this;if(self.scope.$$destroyed)return $log.error("Cannot call "+self.viewType+".show() after remove(). Please create a new "+self.viewType+" instance."),$$q.when();$ionicClickBlock.show(600),stack.add(self);var modalEl=jqLite(self.modalEl);self.el.classList.remove("hide"),$timeout(function(){self._isShown&&$ionicBody.addClass(self.viewType+"-open")},400,!1),self.el.parentElement||(modalEl.addClass(self.animation),$ionicBody.append(self.el));var scrollCtrl=modalEl.data("$$ionicScrollController");return scrollCtrl&&scrollCtrl.resize(),target&&self.positionView&&(self.positionView(target,modalEl),self._onWindowResize=function(){self._isShown&&self.positionView(target,modalEl)},ionic.on("resize",self._onWindowResize,window)),modalEl.addClass("ng-enter active").removeClass("ng-leave ng-leave-active"),self._isShown=!0,self._deregisterBackButton=$ionicPlatform.registerBackButtonAction(self.hardwareBackButtonClose?angular.bind(self,self.hide):noop,IONIC_BACK_PRIORITY.modal),ionic.views.Modal.prototype.show.call(self),$timeout(function(){self._isShown&&(modalEl.addClass("ng-enter-active"),ionic.trigger("resize"),self.scope.$parent&&self.scope.$parent.$broadcast(self.viewType+".shown",self),self.el.classList.add("active"),self.scope.$broadcast("$ionicHeader.align"),self.scope.$broadcast("$ionicFooter.align"),self.scope.$broadcast("$ionic.modalPresented"))},20),$timeout(function(){self._isShown&&(self.$el.on("touchmove",function(e){ionic.DomUtil.getParentOrSelfWithClass(e.target,"scroll")||e.preventDefault()}),self.$el.on("click",function(e){self.backdropClickToClose&&e.target===self.el&&stack.isHighest(self)&&self.hide()}))},400)},hide:function(){var self=this,modalEl=jqLite(self.modalEl);return $ionicClickBlock.show(600),stack.remove(self),self.el.classList.remove("active"),modalEl.addClass("ng-leave"),$timeout(function(){self._isShown||(modalEl.addClass("ng-leave-active").removeClass("ng-enter ng-enter-active active"),self.scope.$broadcast("$ionic.modalRemoved"))},20,!1),self.$el.off("click"),self._isShown=!1,self.scope.$parent&&self.scope.$parent.$broadcast(self.viewType+".hidden",self),self._deregisterBackButton&&self._deregisterBackButton(),ionic.views.Modal.prototype.hide.call(self),self.positionView&&ionic.off("resize",self._onWindowResize,window),$timeout(function(){$ionicBody.removeClass(self.viewType+"-open"),self.el.classList.add("hide")},self.hideDelay||320)},remove:function(){var deferred,promise,self=this;return self.scope.$parent&&self.scope.$parent.$broadcast(self.viewType+".removed",self),self._isShown?promise=self.hide():((deferred=$$q.defer()).resolve(),promise=deferred.promise),promise.then(function(){self.scope.$destroy(),self.$el.remove()})},isShown:function(){return!!this._isShown}}),createModal=function(templateString,options){var scope=options.scope&&options.scope.$new()||$rootScope.$new(!0);options.viewType=options.viewType||"modal",extend(scope,{$hasHeader:!1,$hasSubheader:!1,$hasFooter:!1,$hasSubfooter:!1,$hasTabs:!1,$hasTabsTop:!1});var element=$compile("<ion-"+options.viewType+">"+templateString+"</ion-"+options.viewType+">")(scope);options.$el=element,options.el=element[0],options.modalEl=options.el.querySelector("."+options.viewType);var modal=new ModalView(options);return modal.scope=scope,options.scope||(scope[options.viewType]=modal),modal},modalStack=[],stack={add:function(modal){modalStack.push(modal)},remove:function(modal){var index=modalStack.indexOf(modal);index>-1&&index<modalStack.length&&modalStack.splice(index,1)},isHighest:function(modal){var index=modalStack.indexOf(modal);return index>-1&&index===modalStack.length-1}};return{fromTemplate:function(templateString,options){return createModal(templateString,options||{})},fromTemplateUrl:function(url,options,_){var cb;return angular.isFunction(options)&&(cb=options,options=_),$ionicTemplateLoader.load(url).then(function(templateString){var modal=createModal(templateString,options||{});return cb&&cb(modal),modal})},stack:stack}}]),IonicModule.service("$ionicNavBarDelegate",ionic.DelegateService(["align","showBackButton","showBar","title","changeTitle","setTitle","getTitle","back","getPreviousTitle"])),IonicModule.service("$ionicNavViewDelegate",ionic.DelegateService(["clearCache"])),IonicModule.constant("IONIC_BACK_PRIORITY",{view:100,sideMenu:150,modal:200,actionSheet:300,popup:400,loading:500}).provider("$ionicPlatform",function(){return{$get:["$q","$ionicScrollDelegate",function($q,$ionicScrollDelegate){var self={onHardwareBackButton:function(cb){ionic.Platform.ready(function(){document.addEventListener("backbutton",cb,!1)})},offHardwareBackButton:function(fn){ionic.Platform.ready(function(){document.removeEventListener("backbutton",fn)})},$backButtonActions:{},registerBackButtonAction:function(fn,priority,actionId){self._hasBackButtonHandler||(self.$backButtonActions={},self.onHardwareBackButton(self.hardwareBackButtonClick),self._hasBackButtonHandler=!0);var action={id:actionId||ionic.Utils.nextUid(),priority:priority||0,fn:fn};return self.$backButtonActions[action.id]=action,function(){delete self.$backButtonActions[action.id]}},hardwareBackButtonClick:function(e){var priorityAction,actionId;for(actionId in self.$backButtonActions)(!priorityAction||self.$backButtonActions[actionId].priority>=priorityAction.priority)&&(priorityAction=self.$backButtonActions[actionId]);if(priorityAction)return priorityAction.fn(e),priorityAction},is:function(type){return ionic.Platform.is(type)},on:function(type,cb){return ionic.Platform.ready(function(){document.addEventListener(type,cb,!1)}),function(){ionic.Platform.ready(function(){document.removeEventListener(type,cb)})}},ready:function(cb){var q=$q.defer();return ionic.Platform.ready(function(){window.addEventListener("statusTap",function(){$ionicScrollDelegate.scrollTop(!0)}),q.resolve(),cb&&cb()}),q.promise}};return self}]}}),IonicModule.factory("$ionicPopover",["$ionicModal","$ionicPosition","$document","$window",function($ionicModal,$ionicPosition,$document,$window){var POPOVER_BODY_PADDING=6,POPOVER_OPTIONS={viewType:"popover",hideDelay:1,animation:"none",positionView:function(target,popoverEle){var targetEle=jqLite(target.target||target),buttonOffset=$ionicPosition.offset(targetEle),popoverWidth=popoverEle.prop("offsetWidth"),popoverHeight=popoverEle.prop("offsetHeight"),bodyWidth=$window.innerWidth,bodyHeight=$window.innerHeight,popoverCSS={left:buttonOffset.left+buttonOffset.width/2-popoverWidth/2},arrowEle=jqLite(popoverEle[0].querySelector(".popover-arrow"));popoverCSS.left<POPOVER_BODY_PADDING?popoverCSS.left=POPOVER_BODY_PADDING:popoverCSS.left+popoverWidth+POPOVER_BODY_PADDING>bodyWidth&&(popoverCSS.left=bodyWidth-popoverWidth-POPOVER_BODY_PADDING),buttonOffset.top+buttonOffset.height+popoverHeight>bodyHeight&&buttonOffset.top-popoverHeight>0?(popoverCSS.top=buttonOffset.top-popoverHeight,popoverEle.addClass("popover-bottom")):(popoverCSS.top=buttonOffset.top+buttonOffset.height,popoverEle.removeClass("popover-bottom")),arrowEle.css({left:buttonOffset.left+buttonOffset.width/2-arrowEle.prop("offsetWidth")/2-popoverCSS.left+"px"}),popoverEle.css({top:popoverCSS.top+"px",left:popoverCSS.left+"px",marginLeft:"0",opacity:"1"})}};return{fromTemplate:function(templateString,options){return $ionicModal.fromTemplate(templateString,ionic.Utils.extend({},POPOVER_OPTIONS,options))},fromTemplateUrl:function(url,options){return $ionicModal.fromTemplateUrl(url,ionic.Utils.extend({},POPOVER_OPTIONS,options))}}}]);var POPUP_TPL='<div class="popup-container" ng-class="cssClass"><div class="popup"><div class="popup-head"><h3 class="popup-title" ng-bind-html="title"></h3><h5 class="popup-sub-title" ng-bind-html="subTitle" ng-if="subTitle"></h5></div><div class="popup-body"></div><div class="popup-buttons" ng-show="buttons.length"><button ng-repeat="button in buttons" ng-click="$buttonTapped(button, $event)" class="button" ng-class="button.type || \'button-default\'" ng-bind-html="button.text"></button></div></div></div>';IonicModule.factory("$ionicPopup",["$ionicTemplateLoader","$ionicBackdrop","$q","$timeout","$rootScope","$ionicBody","$compile","$ionicPlatform","$ionicModal","IONIC_BACK_PRIORITY",function($ionicTemplateLoader,$ionicBackdrop,$q,$timeout,$rootScope,$ionicBody,$compile,$ionicPlatform,$ionicModal,IONIC_BACK_PRIORITY){function onHardwareBackButton(){var last=popupStack[popupStack.length-1];last&&last.responseDeferred.resolve()}function showPopup(options){var popup=$ionicPopup._createPopup(options),showDelay=0;return popupStack.length>0?(showDelay=config.stackPushDelay,$timeout(popupStack[popupStack.length-1].hide,showDelay,!1)):($ionicBody.addClass("popup-open"),$ionicBackdrop.retain(),$ionicPopup._backButtonActionDone=$ionicPlatform.registerBackButtonAction(onHardwareBackButton,IONIC_BACK_PRIORITY.popup)),popup.responseDeferred.promise.close=function(result){popup.removed||popup.responseDeferred.resolve(result)},popup.responseDeferred.notify({close:popup.responseDeferred.close}),popupStack.push(popup),$timeout(popup.show,showDelay,!1),popup.responseDeferred.promise.then(function(result){var index=popupStack.indexOf(popup);return-1!==index&&popupStack.splice(index,1),popup.remove(),popupStack.length>0?popupStack[popupStack.length-1].show():($ionicBackdrop.release(),$timeout(function(){popupStack.length||$ionicBody.removeClass("popup-open")},400,!1),($ionicPopup._backButtonActionDone||noop)()),result}),popup.responseDeferred.promise}function focusInput(element){var focusOn=element[0].querySelector("[autofocus]");focusOn&&focusOn.focus()}var config={stackPushDelay:75},popupStack=[],$ionicPopup={show:showPopup,alert:function(opts){return showPopup(extend({buttons:[{text:opts.okText||"OK",type:opts.okType||"button-positive",onTap:function(){return!0}}]},opts||{}))},confirm:function(opts){return showPopup(extend({buttons:[{text:opts.cancelText||"Cancel",type:opts.cancelType||"button-default",onTap:function(){return!1}},{text:opts.okText||"OK",type:opts.okType||"button-positive",onTap:function(){return!0}}]},opts||{}))},prompt:function(opts){var scope=$rootScope.$new(!0);scope.data={},scope.data.fieldtype=opts.inputType?opts.inputType:"text",scope.data.response=opts.defaultText?opts.defaultText:"",scope.data.placeholder=opts.inputPlaceholder?opts.inputPlaceholder:"",scope.data.maxlength=opts.maxLength?parseInt(opts.maxLength):"";var text="";return opts.template&&!1===/<[a-z][\s\S]*>/i.test(opts.template)&&(text="<span>"+opts.template+"</span>",delete opts.template),showPopup(extend({template:text+'<input ng-model="data.response" type="{{ data.fieldtype }}"maxlength="{{ data.maxlength }}"placeholder="{{ data.placeholder }}">',scope:scope,buttons:[{text:opts.cancelText||"Cancel",type:opts.cancelType||"button-default",onTap:function(){}},{text:opts.okText||"OK",type:opts.okType||"button-positive",onTap:function(){return scope.data.response||""}}]},opts||{}))},_createPopup:function(options){options=extend({scope:null,title:"",buttons:[]},options||{});var self={};return self.scope=(options.scope||$rootScope).$new(),self.element=jqLite(POPUP_TPL),self.responseDeferred=$q.defer(),$ionicBody.get().appendChild(self.element[0]),$compile(self.element)(self.scope),extend(self.scope,{title:options.title,buttons:options.buttons,subTitle:options.subTitle,cssClass:options.cssClass,$buttonTapped:function(button,event){var result=(button.onTap||noop).apply(self,[event]);(event=event.originalEvent||event).defaultPrevented||self.responseDeferred.resolve(result)}}),$q.when(options.templateUrl?$ionicTemplateLoader.load(options.templateUrl):options.template||options.content||"").then(function(template){var popupBody=jqLite(self.element[0].querySelector(".popup-body"));template?(popupBody.html(template),$compile(popupBody.contents())(self.scope)):popupBody.remove()}),self.show=function(){self.isShown||self.removed||($ionicModal.stack.add(self),self.isShown=!0,ionic.requestAnimationFrame(function(){self.isShown&&(self.element.removeClass("popup-hidden"),self.element.addClass("popup-showing active"),focusInput(self.element))}))},self.hide=function(callback){if(callback=callback||noop,!self.isShown)return callback();$ionicModal.stack.remove(self),self.isShown=!1,self.element.removeClass("active"),self.element.addClass("popup-hidden"),$timeout(callback,250,!1)},self.remove=function(){self.removed||(self.hide(function(){self.element.remove(),self.scope.$destroy()}),self.removed=!0)},self},_popupStack:popupStack};return $ionicPopup}]),IonicModule.factory("$ionicPosition",["$document","$window",function($document,$window){function getStyle(el,cssprop){return el.currentStyle?el.currentStyle[cssprop]:$window.getComputedStyle?$window.getComputedStyle(el)[cssprop]:el.style[cssprop]}function isStaticPositioned(element){return"static"===(getStyle(element,"position")||"static")}var parentOffsetEl=function(element){for(var docDomEl=$document[0],offsetParent=element.offsetParent||docDomEl;offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||docDomEl};return{position:function(element){var elBCR=this.offset(element),offsetParentBCR={top:0,left:0},offsetParentEl=parentOffsetEl(element[0]);offsetParentEl!=$document[0]&&((offsetParentBCR=this.offset(jqLite(offsetParentEl))).top+=offsetParentEl.clientTop-offsetParentEl.scrollTop,offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft);var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}}}}]),IonicModule.service("$ionicScrollDelegate",ionic.DelegateService(["resize","scrollTop","scrollBottom","scrollTo","scrollBy","zoomTo","zoomBy","getScrollPosition","anchorScroll","freezeScroll","freezeAllScrolls","getScrollView"])),IonicModule.service("$ionicSideMenuDelegate",ionic.DelegateService(["toggleLeft","toggleRight","getOpenRatio","isOpen","isOpenLeft","isOpenRight","canDragContent","edgeDragThreshold"])),IonicModule.service("$ionicSlideBoxDelegate",ionic.DelegateService(["update","slide","select","enableSlide","previous","next","stop","autoPlay","start","currentIndex","selected","slidesCount","count","loop"])),IonicModule.service("$ionicTabsDelegate",ionic.DelegateService(["select","selectedIndex","showBar"])),function(){var templatesToCache=[];IonicModule.factory("$ionicTemplateCache",["$http","$templateCache","$timeout",function($http,$templateCache,$timeout){function $ionicTemplateCache(templates){if(void 0===templates)return run();isString(templates)&&(templates=[templates]),forEach(templates,function(template){toCache.push(template)}),hasRun&&run()}function run(){var template;if($ionicTemplateCache._runCount++,hasRun=!0,0!==toCache.length){for(var i=0;i<4&&(template=toCache.pop());)isString(template)&&$http.get(template,{cache:$templateCache}),i++;toCache.length&&$timeout(run,1e3)}}var hasRun,toCache=templatesToCache;return $ionicTemplateCache._runCount=0,$ionicTemplateCache}]).config(["$stateProvider","$ionicConfigProvider",function($stateProvider,$ionicConfigProvider){var stateProviderState=$stateProvider.state;$stateProvider.state=function(stateName,definition){if("object"==typeof definition){var enabled=!1!==definition.prefetchTemplate&&templatesToCache.length<$ionicConfigProvider.templates.maxPrefetch();if(enabled&&isString(definition.templateUrl)&&templatesToCache.push(definition.templateUrl),angular.isObject(definition.views))for(var key in definition.views)(enabled=!1!==definition.views[key].prefetchTemplate&&templatesToCache.length<$ionicConfigProvider.templates.maxPrefetch())&&isString(definition.views[key].templateUrl)&&templatesToCache.push(definition.views[key].templateUrl)}return stateProviderState.call($stateProvider,stateName,definition)}}]).run(["$ionicTemplateCache",function($ionicTemplateCache){$ionicTemplateCache()}])}(),IonicModule.factory("$ionicTemplateLoader",["$compile","$controller","$http","$q","$rootScope","$templateCache",function($compile,$controller,$http,$q,$rootScope,$templateCache){return{load:function(url){return $http.get(url,{cache:$templateCache}).then(function(response){return response.data&&response.data.trim()})},compile:function(options){return((options=extend({template:"",templateUrl:"",scope:null,controller:null,locals:{},appendTo:null},options||{})).templateUrl?this.load(options.templateUrl):$q.when(options.template)).then(function(template){var controller,scope=options.scope||$rootScope.$new(),element=jqLite("<div>").html(template).contents();return options.controller&&(controller=$controller(options.controller,extend(options.locals,{$scope:scope})),element.children().data("$ngControllerController",controller)),options.appendTo&&jqLite(options.appendTo).append(element),$compile(element)(scope),{element:element,scope:scope}})}}}]),IonicModule.factory("$ionicViewService",["$ionicHistory","$log",function($ionicHistory,$log){function warn(oldMethod,newMethod){$log.warn("$ionicViewService"+oldMethod+" is deprecated, please use $ionicHistory"+newMethod+" instead: http://ionicframework.com/docs/nightly/api/service/$ionicHistory/")}warn("","");var methodsMap={getCurrentView:"currentView",getBackView:"backView",getForwardView:"forwardView",getCurrentStateName:"currentStateName",nextViewOptions:"nextViewOptions",clearHistory:"clearHistory"};return forEach(methodsMap,function(newMethod,oldMethod){methodsMap[oldMethod]=function(){return warn("."+oldMethod,"."+newMethod),$ionicHistory[newMethod].apply(this,arguments)}}),methodsMap}]),IonicModule.factory("$ionicViewSwitcher",["$timeout","$document","$q","$ionicClickBlock","$ionicConfig","$ionicNavBarDelegate",function($timeout,$document,$q,$ionicClickBlock,$ionicConfig,$ionicNavBarDelegate){function getViewElementIdentifier(locals,view){return viewState(locals).abstract?viewState(locals).name:view?view.stateId||view.viewId:ionic.Utils.nextUid()}function viewState(locals){return locals&&locals.$$state&&locals.$$state.self||{}}function getTransitionData(viewLocals,enteringEle,direction,view){var state=viewState(viewLocals),viewTransition=nextTransition||cachedAttr(enteringEle,"view-transition")||state.viewTransition||$ionicConfig.views.transition()||"ios",navBarTransition=$ionicConfig.navBar.transition();return direction=nextDirection||cachedAttr(enteringEle,"view-direction")||state.viewDirection||direction||"none",extend(getViewData(view),{transition:viewTransition,navBarTransition:"view"===navBarTransition?viewTransition:navBarTransition,direction:direction,shouldAnimate:"none"!==viewTransition&&"none"!==direction})}function getViewData(view){return view=view||{},{viewId:view.viewId,historyId:view.historyId,stateId:view.stateId,stateName:view.stateName,stateParams:view.stateParams}}function navViewAttr(ele,value){if(!(arguments.length>1))return cachedAttr(ele,NAV_VIEW_ATTR);cachedAttr(ele,NAV_VIEW_ATTR,value)}function destroyViewEle(ele){if(ele&&ele.length){var viewScope=ele.scope();viewScope&&(viewScope.$emit("$ionicView.unloaded",ele.data(DATA_VIEW)),viewScope.$destroy()),ele.remove()}}function compareStatePrefixes(enteringStateName,exitingStateName){var enteringStateSuffixIndex=enteringStateName.lastIndexOf("."),exitingStateSuffixIndex=exitingStateName.lastIndexOf(".");return!(enteringStateSuffixIndex<0||exitingStateSuffixIndex<0)&&enteringStateName.substring(0,enteringStateSuffixIndex)===exitingStateName.substring(0,exitingStateSuffixIndex)}function getScopeForElement(element,stateData){if(!element)return null;var attributeValue=angular.element(element).attr("abstract"),stateValue=angular.element(element).attr("state");if("true"!==attributeValue)return stateValue===stateData.stateName?angular.element(element).scope():null;for(var elements=aggregateNavViewChildren(element),i=0;i<elements.length;i++)if(angular.element(elements[i]).attr("state")===stateData.stateName)return stateData.abstractView=!0,angular.element(elements[i]).scope();return null}function aggregateNavViewChildren(element){for(var aggregate=[],navViews=angular.element(element).find("ion-nav-view"),i=0;i<navViews.length;i++){for(var children=angular.element(navViews[i]).children(),childrenAggregated=[],j=0;j<children.length;j++)childrenAggregated=childrenAggregated.concat(children[j]);aggregate=aggregate.concat(childrenAggregated)}return aggregate}var nextTransition,nextDirection,TRANSITIONEND_EVENT="webkitTransitionEnd transitionend",DATA_FALLBACK_TIMER="$fallbackTimer",DATA_VIEW="$viewData",NAV_VIEW_ATTR="nav-view",VIEW_STATUS_ACTIVE="active",VIEW_STATUS_CACHED="cached",transitionCounter=0;ionic.transition=ionic.transition||{},ionic.transition.isActive=!1;var isActiveTimer,cachedAttr=ionic.DomUtil.cachedAttr,transitionPromises=[],ionicViewSwitcher={create:function(navViewCtrl,viewLocals,enteringView,leavingView,renderStart,renderEnd){var enteringEle,leavingEle,alreadyInDom,transitionId=++transitionCounter,switcher={init:function(registerData,callback){ionicViewSwitcher.isTransitioning(!0),switcher.loadViewElements(registerData),switcher.render(registerData,function(){callback&&callback()})},loadViewElements:function(registerData){var x,l,viewEle,viewElements=navViewCtrl.getViewElements(),enteringEleIdentifier=getViewElementIdentifier(viewLocals,enteringView),navViewActiveEleId=navViewCtrl.activeEleId();for(x=0,l=viewElements.length;x<l&&((viewEle=viewElements.eq(x)).data("$eleId")===enteringEleIdentifier?viewEle.data("$noCache")?(viewEle.data("$eleId",enteringEleIdentifier+ionic.Utils.nextUid()),viewEle.data("$destroyEle",!0)):enteringEle=viewEle:isDefined(navViewActiveEleId)&&viewEle.data("$eleId")===navViewActiveEleId&&(leavingEle=viewEle),!enteringEle||!leavingEle);x++);(alreadyInDom=!!enteringEle)||(enteringEle=registerData.ele||ionicViewSwitcher.createViewEle(viewLocals)).data("$eleId",enteringEleIdentifier),renderEnd&&navViewCtrl.activeEleId(enteringEleIdentifier),registerData.ele=null},render:function(registerData,callback){if(alreadyInDom)ionic.Utils.reconnectScope(enteringEle.scope());else{navViewAttr(enteringEle,"stage");var enteringData=getTransitionData(viewLocals,enteringEle,registerData.direction,enteringView);($ionicConfig.transitions.views[enteringData.transition]||$ionicConfig.transitions.views.none)(enteringEle,null,enteringData.direction,!0).run(0),enteringEle.data(DATA_VIEW,{viewId:enteringData.viewId,historyId:enteringData.historyId,stateName:enteringData.stateName,stateParams:enteringData.stateParams}),!1!==viewState(viewLocals).cache&&"false"!==viewState(viewLocals).cache&&"false"!=enteringEle.attr("cache-view")&&0!==$ionicConfig.views.maxCache()||enteringEle.data("$noCache",!0);var viewScope=navViewCtrl.appendViewElement(enteringEle,viewLocals);delete enteringData.direction,delete enteringData.transition,viewScope.$emit("$ionicView.loaded",enteringData)}enteringEle.data("$accessed",Date.now()),callback&&callback()},transition:function(direction,enableBack,allowAnimate){function onReflow(){navViewAttr(enteringEle,viewTransition.shouldAnimate?"entering":VIEW_STATUS_ACTIVE),navViewAttr(leavingEle,viewTransition.shouldAnimate?"leaving":VIEW_STATUS_CACHED),viewTransition.run(1),$ionicNavBarDelegate._instances.forEach(function(instance){instance.triggerTransitionStart(transitionId)}),viewTransition.shouldAnimate||transitionComplete()}function completeOnTransitionEnd(ev){ev.target===this&&transitionComplete()}function transitionComplete(){transitionComplete.x||(transitionComplete.x=!0,enteringEle.off(TRANSITIONEND_EVENT,completeOnTransitionEnd),$timeout.cancel(enteringEle.data(DATA_FALLBACK_TIMER)),leavingEle&&$timeout.cancel(leavingEle.data(DATA_FALLBACK_TIMER)),deferred&&deferred.resolve(navViewCtrl),transitionId===transitionCounter&&($q.all(transitionPromises).then(ionicViewSwitcher.transitionEnd),switcher.emit("after",enteringData,leavingData),switcher.cleanup(enteringData)),$ionicNavBarDelegate._instances.forEach(function(instance){instance.triggerTransitionEnd()}),nextTransition=nextDirection=enteringView=leavingView=enteringEle=leavingEle=null)}function cancelOnTransitionEnd(ev){ev.target===this&&cancelTransition()}function cancelTransition(){navViewAttr(enteringEle,VIEW_STATUS_CACHED),navViewAttr(leavingEle,VIEW_STATUS_ACTIVE),enteringEle.off(TRANSITIONEND_EVENT,cancelOnTransitionEnd),$timeout.cancel(enteringEle.data(DATA_FALLBACK_TIMER)),ionicViewSwitcher.transitionEnd([navViewCtrl])}var deferred,enteringData=getTransitionData(viewLocals,enteringEle,direction,enteringView),leavingData=extend(extend({},enteringData),getViewData(leavingView));enteringData.transitionId=leavingData.transitionId=transitionId,enteringData.fromCache=!!alreadyInDom,enteringData.enableBack=!!enableBack,enteringData.renderStart=renderStart,enteringData.renderEnd=renderEnd,cachedAttr(enteringEle.parent(),"nav-view-transition",enteringData.transition),cachedAttr(enteringEle.parent(),"nav-view-direction",enteringData.direction),$timeout.cancel(enteringEle.data(DATA_FALLBACK_TIMER));var viewTransition=($ionicConfig.transitions.views[enteringData.transition]||$ionicConfig.transitions.views.none)(enteringEle,leavingEle,enteringData.direction,enteringData.shouldAnimate&&allowAnimate&&renderEnd);if(viewTransition.shouldAnimate&&(enteringEle.on(TRANSITIONEND_EVENT,completeOnTransitionEnd),enteringEle.data(DATA_FALLBACK_TIMER,$timeout(transitionComplete,1100)),$ionicClickBlock.show(1100)),renderStart&&(switcher.emit("before",enteringData,leavingData),navViewAttr(enteringEle,"stage"),viewTransition.run(0)),renderEnd&&(deferred=$q.defer(),transitionPromises.push(deferred.promise)),renderStart&&renderEnd)$timeout(function(){ionic.requestAnimationFrame(onReflow)});else{if(!renderEnd)return navViewAttr(enteringEle,"entering"),navViewAttr(leavingEle,"leaving"),{run:viewTransition.run,cancel:function(shouldAnimate){shouldAnimate?(enteringEle.on(TRANSITIONEND_EVENT,cancelOnTransitionEnd),enteringEle.data(DATA_FALLBACK_TIMER,$timeout(cancelTransition,1100)),$ionicClickBlock.show(1100)):cancelTransition(),viewTransition.shouldAnimate=shouldAnimate,viewTransition.run(0),viewTransition=null}};renderEnd&&onReflow()}},emit:function(step,enteringData,leavingData){var enteringScope=getScopeForElement(enteringEle,enteringData),leavingScope=getScopeForElement(leavingEle,leavingData);!enteringData.viewId||enteringData.abstractView?leavingScope&&(leavingScope.$emit("$ionicView.beforeLeave",leavingData),leavingScope.$emit("$ionicView.leave",leavingData),leavingScope.$emit("$ionicView.afterLeave",leavingData),leavingScope.$broadcast("$ionicParentView.beforeLeave",leavingData),leavingScope.$broadcast("$ionicParentView.leave",leavingData),leavingScope.$broadcast("$ionicParentView.afterLeave",leavingData)):("after"==step&&(enteringScope&&(enteringScope.$emit("$ionicView.enter",enteringData),enteringScope.$broadcast("$ionicParentView.enter",enteringData)),leavingScope?(leavingScope.$emit("$ionicView.leave",leavingData),leavingScope.$broadcast("$ionicParentView.leave",leavingData)):enteringScope&&leavingData&&leavingData.viewId&&enteringData.stateName!==leavingData.stateName&&compareStatePrefixes(enteringData.stateName,leavingData.stateName)&&enteringScope.$emit("$ionicNavView.leave",leavingData)),enteringScope&&(enteringScope.$emit("$ionicView."+step+"Enter",enteringData),enteringScope.$broadcast("$ionicParentView."+step+"Enter",enteringData)),leavingScope?(leavingScope.$emit("$ionicView."+step+"Leave",leavingData),leavingScope.$broadcast("$ionicParentView."+step+"Leave",leavingData)):enteringScope&&leavingData&&leavingData.viewId&&enteringData.stateName!==leavingData.stateName&&compareStatePrefixes(enteringData.stateName,leavingData.stateName)&&enteringScope.$emit("$ionicNavView."+step+"Leave",leavingData))},cleanup:function(transData){leavingEle&&"back"==transData.direction&&!$ionicConfig.views.forwardCache()&&destroyViewEle(leavingEle);var x,viewElement,removableEle,viewElements=navViewCtrl.getViewElements(),viewElementsLength=viewElements.length,removeOldestAccess=viewElementsLength-1>$ionicConfig.views.maxCache(),oldestAccess=Date.now();for(x=0;x<viewElementsLength;x++)viewElement=viewElements.eq(x),removeOldestAccess&&viewElement.data("$accessed")<oldestAccess?(oldestAccess=viewElement.data("$accessed"),removableEle=viewElements.eq(x)):viewElement.data("$destroyEle")&&navViewAttr(viewElement)!=VIEW_STATUS_ACTIVE&&destroyViewEle(viewElement);destroyViewEle(removableEle),enteringEle.data("$noCache")&&enteringEle.data("$destroyEle",!0)},enteringEle:function(){return enteringEle},leavingEle:function(){return leavingEle}};return switcher},transitionEnd:function(navViewCtrls){forEach(navViewCtrls,function(navViewCtrl){navViewCtrl.transitionEnd()}),ionicViewSwitcher.isTransitioning(!1),$ionicClickBlock.hide(),transitionPromises=[]},nextTransition:function(val){nextTransition=val},nextDirection:function(val){nextDirection=val},isTransitioning:function(val){return arguments.length&&(ionic.transition.isActive=!!val,$timeout.cancel(isActiveTimer),val&&(isActiveTimer=$timeout(function(){ionicViewSwitcher.isTransitioning(!1)},999))),ionic.transition.isActive},createViewEle:function(viewLocals){var containerEle=$document[0].createElement("div");return viewLocals&&viewLocals.$template&&(containerEle.innerHTML=viewLocals.$template,1===containerEle.children.length)?(containerEle.children[0].classList.add("pane"),viewLocals.$$state&&viewLocals.$$state.self&&viewLocals.$$state.self.abstract?angular.element(containerEle.children[0]).attr("abstract","true"):viewLocals.$$state&&viewLocals.$$state.self&&angular.element(containerEle.children[0]).attr("state",viewLocals.$$state.self.name),jqLite(containerEle.children[0])):(containerEle.className="pane",jqLite(containerEle))},viewEleIsActive:function(viewEle,isActiveAttr){navViewAttr(viewEle,isActiveAttr?VIEW_STATUS_ACTIVE:VIEW_STATUS_CACHED)},getTransitionData:getTransitionData,navViewAttr:navViewAttr,destroyViewEle:destroyViewEle};return ionicViewSwitcher}]),angular.module("ngIOS9UIWebViewPatch",["ng"]).config(["$provide",function($provide){"use strict";$provide.decorator("$browser",["$delegate","$window",function($delegate,$window){return function(userAgent){return/(iPhone|iPad|iPod).* OS 9_\d/.test(userAgent)&&!/Version\/9\./.test(userAgent)}($window.navigator.userAgent)?function(browser){function clearPendingLocationUrl(){pendingLocationUrl=null}var pendingLocationUrl=null,originalUrlFn=browser.url;return browser.url=function(){return arguments.length?(pendingLocationUrl=arguments[0],originalUrlFn.apply(browser,arguments)):pendingLocationUrl||originalUrlFn.apply(browser,arguments)},window.addEventListener("popstate",clearPendingLocationUrl,!1),window.addEventListener("hashchange",clearPendingLocationUrl,!1),browser}($delegate):$delegate}])}]),IonicModule.config(["$provide",function($provide){$provide.decorator("$compile",["$delegate",function($compile){return $compile.$$addScopeInfo=function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)},$compile}])}]),IonicModule.config(["$provide",function($provide){$provide.decorator("$location",["$delegate","$timeout",function($location,$timeout){return $location.__hash=$location.hash,$location.hash=function(value){return isDefined(value)&&value.length>0&&$timeout(function(){var scroll=document.querySelector(".scroll-content");scroll&&(scroll.scrollTop=0)},0,!1),$location.__hash(value)},$location}])}]),IonicModule.controller("$ionicHeaderBar",["$scope","$element","$attrs","$q","$ionicConfig","$ionicHistory",function($scope,$element,$attrs,$q,$ionicConfig,$ionicHistory){function getEle(className){return eleCache[className]||(eleCache[className]=$element[0].querySelector("."+className)),eleCache[className]}var self=this,titleText="",previousTitleText="",titleLeft=0,titleRight=0,titleCss="",isBackEnabled=!1,isBackShown=!0,isNavBackShown=!0,isBackElementShown=!1,titleTextWidth=0;self.beforeEnter=function(viewData){$scope.$broadcast("$ionicView.beforeEnter",viewData)},self.title=function(newTitleText){return arguments.length&&newTitleText!==titleText&&(getEle("title").innerHTML=newTitleText,titleText=newTitleText,titleTextWidth=0),titleText},self.enableBack=function(shouldEnable,disableReset){return arguments.length&&(isBackEnabled=shouldEnable,disableReset||self.updateBackButton()),isBackEnabled},self.showBack=function(shouldShow,disableReset){return arguments.length&&(isBackShown=shouldShow,disableReset||self.updateBackButton()),isBackShown},self.showNavBack=function(shouldShow){isNavBackShown=shouldShow,self.updateBackButton()},self.updateBackButton=function(){var ele;(isBackShown&&isNavBackShown&&isBackEnabled)!==isBackElementShown&&(isBackElementShown=isBackShown&&isNavBackShown&&isBackEnabled,(ele=getEle("back-button"))&&ele.classList[isBackElementShown?"remove":"add"]("hide")),isBackEnabled&&(ele=ele||getEle("back-button"))&&(self.backButtonIcon!==$ionicConfig.backButton.icon()&&(ele=getEle("back-button .icon"))&&(self.backButtonIcon=$ionicConfig.backButton.icon(),ele.className="icon "+self.backButtonIcon),self.backButtonText!==$ionicConfig.backButton.text()&&(ele=getEle("back-button .back-text"))&&(ele.textContent=self.backButtonText=$ionicConfig.backButton.text()))},self.titleTextWidth=function(){var element=getEle("title");if(element)for(var children=angular.element(element).children(),i=0;i<children.length;i++)if(angular.element(children[i]).hasClass("nav-bar-title")){element=children[i];break}var bounds=ionic.DomUtil.getTextBounds(element);return titleTextWidth=Math.min(bounds&&bounds.width||30)},self.titleWidth=function(){var titleWidth=self.titleTextWidth(),offsetWidth=getEle("title").offsetWidth;return offsetWidth<titleWidth&&(titleWidth=offsetWidth+(titleLeft-titleRight-5)),titleWidth},self.titleTextX=function(){return $element[0].offsetWidth/2-self.titleWidth()/2},self.titleLeftRight=function(){return titleLeft-titleRight},self.backButtonTextLeft=function(){for(var offsetLeft=0,ele=getEle("back-text");ele;)offsetLeft+=ele.offsetLeft,ele=ele.parentElement;return offsetLeft},self.resetBackButton=function(viewData){if($ionicConfig.backButton.previousTitleText()){var previousTitleEle=getEle("previous-title");if(previousTitleEle){previousTitleEle.classList.remove("hide");var view=viewData&&$ionicHistory.getViewById(viewData.viewId),newPreviousTitleText=$ionicHistory.backTitle(view);newPreviousTitleText!==previousTitleText&&(previousTitleText=previousTitleEle.innerHTML=newPreviousTitleText)}var defaultTitleEle=getEle("default-title");defaultTitleEle&&defaultTitleEle.classList.remove("hide")}},self.align=function(textAlign){var titleEle=getEle("title");textAlign=textAlign||$attrs.alignTitle||$ionicConfig.navBar.alignTitle();var widths=self.calcWidths(textAlign,!1);if(isBackShown&&previousTitleText&&$ionicConfig.backButton.previousTitleText()){var previousTitleWidths=self.calcWidths(textAlign,!0),availableTitleWidth=$element[0].offsetWidth-previousTitleWidths.titleLeft-previousTitleWidths.titleRight;self.titleTextWidth()<=availableTitleWidth&&(widths=previousTitleWidths)}return self.updatePositions(titleEle,widths.titleLeft,widths.titleRight,widths.buttonsLeft,widths.buttonsRight,widths.css,widths.showPrevTitle)},self.calcWidths=function(textAlign,isPreviousTitle){var x,y,z,b,c,d,childSize,bounds,isCountRightOfTitle,titleEle=getEle("title"),backBtnEle=getEle("back-button"),childNodes=$element[0].childNodes,buttonsLeft=0,buttonsRight=0,updateTitleLeft=0,updateTitleRight=0,updateCss="",backButtonWidth=0;for(x=0;x<childNodes.length;x++){if(c=childNodes[x],childSize=0,1==c.nodeType){if(c===titleEle){isCountRightOfTitle=!0;continue}if(c.classList.contains("hide"))continue;if(isBackShown&&c===backBtnEle){for(y=0;y<c.childNodes.length;y++)if(1==(b=c.childNodes[y]).nodeType)if(b.classList.contains("back-text"))for(z=0;z<b.children.length;z++)if(d=b.children[z],isPreviousTitle){if(d.classList.contains("default-title"))continue;backButtonWidth+=d.offsetWidth}else{if(d.classList.contains("previous-title"))continue;backButtonWidth+=d.offsetWidth}else backButtonWidth+=b.offsetWidth;else 3==b.nodeType&&b.nodeValue.trim()&&(backButtonWidth+=(bounds=ionic.DomUtil.getTextBounds(b))&&bounds.width||0);childSize=backButtonWidth||c.offsetWidth}else childSize=c.offsetWidth}else 3==c.nodeType&&c.nodeValue.trim()&&(childSize=(bounds=ionic.DomUtil.getTextBounds(c))&&bounds.width||0);isCountRightOfTitle?buttonsRight+=childSize:buttonsLeft+=childSize}if("left"==textAlign)updateCss="title-left",buttonsLeft&&(updateTitleLeft=buttonsLeft+15),buttonsRight&&(updateTitleRight=buttonsRight+15);else if("right"==textAlign)updateCss="title-right",buttonsLeft&&(updateTitleLeft=buttonsLeft+15),buttonsRight&&(updateTitleRight=buttonsRight+15);else{var margin=Math.max(buttonsLeft,buttonsRight)+10;margin>10&&(updateTitleLeft=updateTitleRight=margin)}return{backButtonWidth:backButtonWidth,buttonsLeft:buttonsLeft,buttonsRight:buttonsRight,titleLeft:updateTitleLeft,titleRight:updateTitleRight,showPrevTitle:isPreviousTitle,css:updateCss}},self.updatePositions=function(titleEle,updateTitleLeft,updateTitleRight,buttonsLeft,buttonsRight,updateCss,showPreviousTitle){var deferred=$q.defer();if(titleEle&&(updateTitleLeft!==titleLeft&&(titleEle.style.left=updateTitleLeft?updateTitleLeft+"px":"",titleLeft=updateTitleLeft),updateTitleRight!==titleRight&&(titleEle.style.right=updateTitleRight?updateTitleRight+"px":"",titleRight=updateTitleRight),updateCss!==titleCss&&(updateCss&&titleEle.classList.add(updateCss),titleCss&&titleEle.classList.remove(titleCss),titleCss=updateCss)),$ionicConfig.backButton.previousTitleText()){var prevTitle=getEle("previous-title"),defaultTitle=getEle("default-title");prevTitle&&prevTitle.classList[showPreviousTitle?"remove":"add"]("hide"),defaultTitle&&defaultTitle.classList[showPreviousTitle?"add":"remove"]("hide")}return ionic.requestAnimationFrame(function(){if(titleEle&&titleEle.offsetWidth+10<titleEle.scrollWidth){var minRight=buttonsRight+5,testRight=$element[0].offsetWidth-titleLeft-self.titleTextWidth()-20;(updateTitleRight=testRight<minRight?minRight:testRight)!==titleRight&&(titleEle.style.right=updateTitleRight+"px",titleRight=updateTitleRight)}deferred.resolve()}),deferred.promise},self.setCss=function(elementClassname,css){ionic.DomUtil.cachedStyles(getEle(elementClassname),css)};var eleCache={};$scope.$on("$destroy",function(){for(var n in eleCache)eleCache[n]=null})}]),IonicModule.controller("$ionInfiniteScroll",["$scope","$attrs","$element","$timeout",function($scope,$attrs,$element,$timeout){function onInfinite(){ionic.requestAnimationFrame(function(){$element[0].classList.add("active")}),self.isLoading=!0,$scope.$parent&&$scope.$parent.$apply($attrs.onInfinite||"")}function finishInfiniteScroll(){ionic.requestAnimationFrame(function(){$element[0].classList.remove("active")}),$timeout(function(){self.jsScrolling&&self.scrollView.resize(),(self.jsScrolling&&self.scrollView.__container&&self.scrollView.__container.offsetHeight>0||!self.jsScrolling)&&self.checkBounds()},30,!1),self.isLoading=!1}function calculateMaxValue(maximum){var distance=($attrs.distance||"2.5%").trim();return-1!==distance.indexOf("%")?maximum*(1-parseFloat(distance)/100):maximum-parseFloat(distance)}var self=this;self.isLoading=!1,$scope.icon=function(){return isDefined($attrs.icon)?$attrs.icon:"ion-load-d"},$scope.spinner=function(){return isDefined($attrs.spinner)?$attrs.spinner:""},$scope.$on("scroll.infiniteScrollComplete",function(){finishInfiniteScroll()}),$scope.$on("$destroy",function(){self.scrollCtrl&&self.scrollCtrl.$element&&self.scrollCtrl.$element.off("scroll",self.checkBounds),self.scrollEl&&self.scrollEl.removeEventListener&&self.scrollEl.removeEventListener("scroll",self.checkBounds)}),self.checkBounds=ionic.Utils.throttle(function(){if(!self.isLoading){var maxScroll={};if(self.jsScrolling){maxScroll=self.getJSMaxScroll();var scrollValues=self.scrollView.getValues();(-1!==maxScroll.left&&scrollValues.left>=maxScroll.left||-1!==maxScroll.top&&scrollValues.top>=maxScroll.top)&&onInfinite()}else(-1!==(maxScroll=self.getNativeMaxScroll()).left&&self.scrollEl.scrollLeft>=maxScroll.left-self.scrollEl.clientWidth||-1!==maxScroll.top&&self.scrollEl.scrollTop>=maxScroll.top-self.scrollEl.clientHeight)&&onInfinite()}},300),self.getJSMaxScroll=function(){var maxValues=self.scrollView.getScrollMax();return{left:self.scrollView.options.scrollingX?calculateMaxValue(maxValues.left):-1,top:self.scrollView.options.scrollingY?calculateMaxValue(maxValues.top):-1}},self.getNativeMaxScroll=function(){var maxValues={left:self.scrollEl.scrollWidth,top:self.scrollEl.scrollHeight},computedStyle=window.getComputedStyle(self.scrollEl)||{};return{left:!maxValues.left||"scroll"!==computedStyle.overflowX&&"auto"!==computedStyle.overflowX&&"scroll"!==self.scrollEl.style["overflow-x"]?-1:calculateMaxValue(maxValues.left),top:!maxValues.top||"scroll"!==computedStyle.overflowY&&"auto"!==computedStyle.overflowY&&"scroll"!==self.scrollEl.style["overflow-y"]?-1:calculateMaxValue(maxValues.top)}},self.__finishInfiniteScroll=finishInfiniteScroll}]),IonicModule.service("$ionicListDelegate",ionic.DelegateService(["showReorder","showDelete","canSwipeItems","closeOptionButtons"])).controller("$ionicList",["$scope","$attrs","$ionicListDelegate","$ionicHistory",function($scope,$attrs,$ionicListDelegate,$ionicHistory){var self=this,isSwipeable=!0,isReorderShown=!1,isDeleteShown=!1,deregisterInstance=$ionicListDelegate._registerInstance(self,$attrs.delegateHandle,function(){return $ionicHistory.isActiveScope($scope)});$scope.$on("$destroy",deregisterInstance),self.showReorder=function(show){return arguments.length&&(isReorderShown=!!show),isReorderShown},self.showDelete=function(show){return arguments.length&&(isDeleteShown=!!show),isDeleteShown},self.canSwipeItems=function(can){return arguments.length&&(isSwipeable=!!can),isSwipeable},self.closeOptionButtons=function(){self.listView&&self.listView.clearDragEffects()}}]),IonicModule.controller("$ionicNavBar",["$scope","$element","$attrs","$compile","$timeout","$ionicNavBarDelegate","$ionicConfig","$ionicHistory",function($scope,$element,$attrs,$compile,$timeout,$ionicNavBarDelegate,$ionicConfig,$ionicHistory){function deprecatedWarning(oldMethod,newMethod){var warn=console.warn||console.log;warn&&warn.call(console,"navBarController."+oldMethod+" is deprecated, please use "+newMethod+" instead")}function createNavElement(type){if(navElementHtml[type])return jqLite(navElementHtml[type])}function getOnScreenHeaderBar(){for(var x=0;x<headerBars.length;x++)if(headerBars[x].isActive)return headerBars[x]}function getOffScreenHeaderBar(){for(var x=0;x<headerBars.length;x++)if(!headerBars[x].isActive)return headerBars[x]}function navBarAttr(ctrl,val){ctrl&&ionic.DomUtil.cachedAttr(ctrl.containerEle(),"nav-bar",val)}function navSwipeAttr(val){ionic.DomUtil.cachedAttr($element,"nav-swipe",val)}var queuedTransitionStart,queuedTransitionEnd,latestTransitionId,PRIMARY_BUTTONS="primaryButtons",SECONDARY_BUTTONS="secondaryButtons",BACK_BUTTON="backButton",ITEM_TYPES="primaryButtons secondaryButtons leftButtons rightButtons title".split(" "),self=this,headerBars=[],navElementHtml={},isVisible=!0;$element.parent().data("$ionNavBarController",self);var delegateHandle=$attrs.delegateHandle||"navBar"+ionic.Utils.nextUid(),deregisterInstance=$ionicNavBarDelegate._registerInstance(self,delegateHandle);self.init=function(){$element.addClass("nav-bar-container"),ionic.DomUtil.cachedAttr($element,"nav-bar-transition",$ionicConfig.views.transition()),self.createHeaderBar(!1),self.createHeaderBar(!0),$scope.$emit("ionNavBar.init",delegateHandle)},self.createHeaderBar=function(isActive){function positionItem(ele,itemType){ele&&("title"===itemType?titleEle.append(ele):"rightButtons"==itemType||itemType==SECONDARY_BUTTONS&&"left"!=$ionicConfig.navBar.positionSecondaryButtons()||itemType==PRIMARY_BUTTONS&&"right"==$ionicConfig.navBar.positionPrimaryButtons()?(rightButtonsEle||(rightButtonsEle=jqLite('<div class="buttons buttons-right">'),headerBarEle.append(rightButtonsEle)),itemType==SECONDARY_BUTTONS?rightButtonsEle.append(ele):rightButtonsEle.prepend(ele)):(leftButtonsEle||(leftButtonsEle=jqLite('<div class="buttons buttons-left">'),navEle[BACK_BUTTON]?navEle[BACK_BUTTON].after(leftButtonsEle):headerBarEle.prepend(leftButtonsEle)),itemType==SECONDARY_BUTTONS?leftButtonsEle.append(ele):leftButtonsEle.prepend(ele)))}var containerEle=jqLite('<div class="nav-bar-block">');ionic.DomUtil.cachedAttr(containerEle,"nav-bar",isActive?"active":"cached");var alignTitle=$attrs.alignTitle||$ionicConfig.navBar.alignTitle(),headerBarEle=jqLite("<ion-header-bar>").addClass($attrs.class).attr("align-title",alignTitle);isDefined($attrs.noTapScroll)&&headerBarEle.attr("no-tap-scroll",$attrs.noTapScroll);var leftButtonsEle,rightButtonsEle,titleEle=jqLite('<div class="title title-'+alignTitle+'">'),navEle={},lastViewItemEle={};navEle[BACK_BUTTON]=createNavElement(BACK_BUTTON),navEle[BACK_BUTTON]&&headerBarEle.append(navEle[BACK_BUTTON]),headerBarEle.append(titleEle),forEach(ITEM_TYPES,function(itemType){navEle[itemType]=createNavElement(itemType),positionItem(navEle[itemType],itemType)});for(var x=0;x<headerBarEle[0].children.length;x++)headerBarEle[0].children[x].classList.add("header-item");containerEle.append(headerBarEle),$element.append($compile(containerEle)($scope.$new()));var headerBarCtrl=headerBarEle.data("$ionHeaderBarController");headerBarCtrl.backButtonIcon=$ionicConfig.backButton.icon(),headerBarCtrl.backButtonText=$ionicConfig.backButton.text();var headerBarInstance={isActive:isActive,title:function(newTitleText){headerBarCtrl.title(newTitleText)},setItem:function(navBarItemEle,itemType){headerBarInstance.removeItem(itemType),navBarItemEle?("title"===itemType&&headerBarInstance.title(""),positionItem(navBarItemEle,itemType),navEle[itemType]&&navEle[itemType].addClass("hide"),lastViewItemEle[itemType]=navBarItemEle):navEle[itemType]&&navEle[itemType].removeClass("hide")},removeItem:function(itemType){lastViewItemEle[itemType]&&(lastViewItemEle[itemType].scope().$destroy(),lastViewItemEle[itemType].remove(),lastViewItemEle[itemType]=null)},containerEle:function(){return containerEle},headerBarEle:function(){return headerBarEle},afterLeave:function(){forEach(ITEM_TYPES,function(itemType){headerBarInstance.removeItem(itemType)}),headerBarCtrl.resetBackButton()},controller:function(){return headerBarCtrl},destroy:function(){forEach(ITEM_TYPES,function(itemType){headerBarInstance.removeItem(itemType)}),containerEle.scope().$destroy();for(var n in navEle)navEle[n]&&(navEle[n].removeData(),navEle[n]=null);leftButtonsEle&&leftButtonsEle.removeData(),rightButtonsEle&&rightButtonsEle.removeData(),titleEle.removeData(),headerBarEle.removeData(),containerEle.remove(),containerEle=headerBarEle=titleEle=leftButtonsEle=rightButtonsEle=null}};return headerBars.push(headerBarInstance),headerBarInstance},self.navElement=function(type,html){return isDefined(html)&&(navElementHtml[type]=html),navElementHtml[type]},self.update=function(viewData){var showNavBar=!viewData.hasHeaderBar&&viewData.showNavBar;viewData.transition=$ionicConfig.views.transition(),showNavBar||(viewData.direction="none"),self.enable(showNavBar);var enteringHeaderBar=self.isInitialized?getOffScreenHeaderBar():getOnScreenHeaderBar(),leavingHeaderBar=self.isInitialized?getOnScreenHeaderBar():null,enteringHeaderCtrl=enteringHeaderBar.controller();enteringHeaderCtrl.enableBack(viewData.enableBack,!0),enteringHeaderCtrl.showBack(viewData.showBack,!0),enteringHeaderCtrl.updateBackButton(),self.title(viewData.title,enteringHeaderBar),self.showBar(showNavBar),viewData.navBarItems&&forEach(ITEM_TYPES,function(itemType){enteringHeaderBar.setItem(viewData.navBarItems[itemType],itemType)}),self.transition(enteringHeaderBar,leavingHeaderBar,viewData),self.isInitialized=!0,navSwipeAttr("")},self.transition=function(enteringHeaderBar,leavingHeaderBar,viewData){function transitionEnd(){for(var x=0;x<headerBars.length;x++)headerBars[x].isActive=!1;enteringHeaderBar.isActive=!0,navBarAttr(enteringHeaderBar,"active"),navBarAttr(leavingHeaderBar,"cached"),self.activeTransition=navBarTransition=queuedTransitionEnd=null}var enteringHeaderBarCtrl=enteringHeaderBar.controller(),transitionFn=$ionicConfig.transitions.navBar[viewData.navBarTransition]||$ionicConfig.transitions.navBar.none,transitionId=viewData.transitionId;enteringHeaderBarCtrl.beforeEnter(viewData);var navBarTransition=transitionFn(enteringHeaderBar,leavingHeaderBar,viewData.direction,viewData.shouldAnimate&&self.isInitialized);ionic.DomUtil.cachedAttr($element,"nav-bar-transition",viewData.navBarTransition),ionic.DomUtil.cachedAttr($element,"nav-bar-direction",viewData.direction),navBarTransition.shouldAnimate&&viewData.renderEnd?navBarAttr(enteringHeaderBar,"stage"):(navBarAttr(enteringHeaderBar,"entering"),navBarAttr(leavingHeaderBar,"leaving")),enteringHeaderBarCtrl.resetBackButton(viewData),navBarTransition.run(0),self.activeTransition={run:function(step){navBarTransition.shouldAnimate=!1,navBarTransition.direction="back",navBarTransition.run(step)},cancel:function(shouldAnimate,speed,cancelData){navSwipeAttr(speed),navBarAttr(leavingHeaderBar,"active"),navBarAttr(enteringHeaderBar,"cached"),navBarTransition.shouldAnimate=shouldAnimate,navBarTransition.run(0),self.activeTransition=navBarTransition=null;cancelData.showBar!==self.showBar()&&self.showBar(cancelData.showBar),cancelData.showBackButton!==self.showBackButton()&&self.showBackButton(cancelData.showBackButton)},complete:function(shouldAnimate,speed){navSwipeAttr(speed),navBarTransition.shouldAnimate=shouldAnimate,navBarTransition.run(1),queuedTransitionEnd=transitionEnd}},$timeout(enteringHeaderBarCtrl.align,16),(queuedTransitionStart=function(){latestTransitionId===transitionId&&(navBarAttr(enteringHeaderBar,"entering"),navBarAttr(leavingHeaderBar,"leaving"),navBarTransition.run(1),queuedTransitionEnd=function(){latestTransitionId!=transitionId&&navBarTransition.shouldAnimate||transitionEnd()},queuedTransitionStart=null)})()},self.triggerTransitionStart=function(triggerTransitionId){latestTransitionId=triggerTransitionId,queuedTransitionStart&&queuedTransitionStart()},self.triggerTransitionEnd=function(){queuedTransitionEnd&&queuedTransitionEnd()},self.showBar=function(shouldShow){return arguments.length&&(self.visibleBar(shouldShow),$scope.$parent.$hasHeader=!!shouldShow),!!$scope.$parent.$hasHeader},self.visibleBar=function(shouldShow){shouldShow&&!isVisible?($element.removeClass("hide"),self.align()):!shouldShow&&isVisible&&$element.addClass("hide"),isVisible=shouldShow},self.enable=function(val){self.visibleBar(val);for(var x=0;x<$ionicNavBarDelegate._instances.length;x++)$ionicNavBarDelegate._instances[x]!==self&&$ionicNavBarDelegate._instances[x].visibleBar(!1)},self.showBackButton=function(shouldShow){if(arguments.length){for(var x=0;x<headerBars.length;x++)headerBars[x].controller().showNavBack(!!shouldShow);$scope.$isBackButtonShown=!!shouldShow}return $scope.$isBackButtonShown},self.showActiveBackButton=function(shouldShow){var headerBar=getOnScreenHeaderBar();if(headerBar)return arguments.length?headerBar.controller().showBack(shouldShow):headerBar.controller().showBack()},self.title=function(newTitleText,headerBar){return isDefined(newTitleText)&&(newTitleText=newTitleText||"",(headerBar=headerBar||getOnScreenHeaderBar())&&headerBar.title(newTitleText),$scope.$title=newTitleText,$ionicHistory.currentTitle(newTitleText)),$scope.$title},self.align=function(val,headerBar){(headerBar=headerBar||getOnScreenHeaderBar())&&headerBar.controller().align(val)},self.hasTabsTop=function(isTabsTop){$element[isTabsTop?"addClass":"removeClass"]("nav-bar-tabs-top")},self.hasBarSubheader=function(isBarSubheader){$element[isBarSubheader?"addClass":"removeClass"]("nav-bar-has-subheader")},self.changeTitle=function(val){deprecatedWarning("changeTitle(val)","title(val)"),self.title(val)},self.setTitle=function(val){deprecatedWarning("setTitle(val)","title(val)"),self.title(val)},self.getTitle=function(){return deprecatedWarning("getTitle()","title()"),self.title()},self.back=function(){deprecatedWarning("back()","$ionicHistory.goBack()"),$ionicHistory.goBack()},self.getPreviousTitle=function(){deprecatedWarning("getPreviousTitle()","$ionicHistory.backTitle()"),$ionicHistory.goBack()},$scope.$on("$destroy",function(){$scope.$parent.$hasHeader=!1,$element.parent().removeData("$ionNavBarController");for(var x=0;x<headerBars.length;x++)headerBars[x].destroy();$element.remove(),$element=headerBars=null,deregisterInstance()})}]),IonicModule.controller("$ionicNavView",["$scope","$element","$attrs","$compile","$controller","$ionicNavBarDelegate","$ionicNavViewDelegate","$ionicHistory","$ionicViewSwitcher","$ionicConfig","$ionicScrollDelegate","$ionicSideMenuDelegate",function($scope,$element,$attrs,$compile,$controller,$ionicNavBarDelegate,$ionicNavViewDelegate,$ionicHistory,$ionicViewSwitcher,$ionicConfig,$ionicScrollDelegate,$ionicSideMenuDelegate){function onTabsLeave(ev,data){for(var viewElement,viewScope,viewElements=$element.children(),x=0,l=viewElements.length;x<l;x++)if(viewElement=viewElements.eq(x),navViewAttr(viewElement)==VIEW_STATUS_ACTIVE){(viewScope=viewElement.scope())&&viewScope.$emit(ev.name.replace("Tabs","View"),data),viewScope&&viewScope.$broadcast(ev.name.replace("Tabs","ParentView"),data);break}}function navSwipeAttr(val){ionic.DomUtil.cachedAttr($element,"nav-swipe",val)}function onTabsTop(ev,isTabsTop){var associatedNavBarCtrl=getAssociatedNavBarCtrl();associatedNavBarCtrl&&associatedNavBarCtrl.hasTabsTop(isTabsTop)}function onBarSubheader(ev,isBarSubheader){var associatedNavBarCtrl=getAssociatedNavBarCtrl();associatedNavBarCtrl&&associatedNavBarCtrl.hasBarSubheader(isBarSubheader)}function getAssociatedNavBarCtrl(){if(navBarDelegate)for(var x=0;x<$ionicNavBarDelegate._instances.length;x++)if($ionicNavBarDelegate._instances[x].$$delegateHandle==navBarDelegate)return $ionicNavBarDelegate._instances[x];return $element.inheritedData("$ionNavBarController")}var direction,navBarDelegate,activeEleId,disableRenderStartViewId,disableAnimation,VIEW_STATUS_ACTIVE="active",self=this,isPrimary=!1,navViewAttr=$ionicViewSwitcher.navViewAttr;self.scope=$scope,self.element=$element,self.init=function(){var navViewName=$attrs.name||"",parent=$element.parent().inheritedData("$uiView"),parentViewName=parent&&parent.state?parent.state.name:"";navViewName.indexOf("@")<0&&(navViewName=navViewName+"@"+parentViewName);var viewData={name:navViewName,state:null};$element.data("$uiView",viewData);var deregisterInstance=$ionicNavViewDelegate._registerInstance(self,$attrs.delegateHandle);return $scope.$on("$destroy",function(){deregisterInstance(),self.isSwipeFreeze&&$ionicScrollDelegate.freezeAllScrolls(!1)}),$scope.$on("$ionicHistory.deselect",self.cacheCleanup),$scope.$on("$ionicTabs.top",onTabsTop),$scope.$on("$ionicSubheader",onBarSubheader),$scope.$on("$ionicTabs.beforeLeave",onTabsLeave),$scope.$on("$ionicTabs.afterLeave",onTabsLeave),$scope.$on("$ionicTabs.leave",onTabsLeave),ionic.Platform.ready(function(){ionic.Platform.isWebView()&&ionic.Platform.isIOS()&&self.initSwipeBack()}),viewData},self.register=function(viewLocals){var leavingView=extend({},$ionicHistory.currentView()),registerData=$ionicHistory.register($scope,viewLocals);self.update(registerData);var enteringView=$ionicHistory.getViewById(registerData.viewId)||{},renderStart=disableRenderStartViewId!==registerData.viewId;self.render(registerData,viewLocals,enteringView,leavingView,renderStart,!0)},self.update=function(registerData){isPrimary=!0,direction=registerData.direction;var parentNavViewCtrl=$element.parent().inheritedData("$ionNavViewController");parentNavViewCtrl&&(parentNavViewCtrl.isPrimary(!1),"enter"!==direction&&"exit"!==direction||(parentNavViewCtrl.direction(direction),"enter"===direction&&(direction="none")))},self.render=function(registerData,viewLocals,enteringView,leavingView,renderStart,renderEnd){var switcher=$ionicViewSwitcher.create(self,viewLocals,enteringView,leavingView,renderStart,renderEnd);switcher.init(registerData,function(){switcher.transition(self.direction(),registerData.enableBack,!disableAnimation),disableRenderStartViewId=disableAnimation=null})},self.beforeEnter=function(transitionData){if(isPrimary){navBarDelegate=transitionData.navBarDelegate;var associatedNavBarCtrl=getAssociatedNavBarCtrl();associatedNavBarCtrl&&associatedNavBarCtrl.update(transitionData),navSwipeAttr("")}},self.activeEleId=function(eleId){return arguments.length&&(activeEleId=eleId),activeEleId},self.transitionEnd=function(){var x,l,viewElement,viewElements=$element.children();for(x=0,l=viewElements.length;x<l;x++)(viewElement=viewElements.eq(x)).data("$eleId")===activeEleId?navViewAttr(viewElement,VIEW_STATUS_ACTIVE):"leaving"!==navViewAttr(viewElement)&&navViewAttr(viewElement)!==VIEW_STATUS_ACTIVE&&"cached"!==navViewAttr(viewElement)||(viewElement.data("$destroyEle")||viewElement.data("$noCache")?$ionicViewSwitcher.destroyViewEle(viewElement):(navViewAttr(viewElement,"cached"),ionic.Utils.disconnectScope(viewElement.scope())));navSwipeAttr(""),self.isSwipeFreeze&&$ionicScrollDelegate.freezeAllScrolls(!1)},self.cacheCleanup=function(){for(var viewElements=$element.children(),x=0,l=viewElements.length;x<l;x++)viewElements.eq(x).data("$destroyEle")&&$ionicViewSwitcher.destroyViewEle(viewElements.eq(x))},self.clearCache=function(stateIds){var viewElement,viewScope,x,l,y,eleIdentifier,viewElements=$element.children();for(x=0,l=viewElements.length;x<l;x++)if(viewElement=viewElements.eq(x),stateIds)for(eleIdentifier=viewElement.data("$eleId"),y=0;y<stateIds.length;y++)eleIdentifier===stateIds[y]&&$ionicViewSwitcher.destroyViewEle(viewElement);else"cached"==navViewAttr(viewElement)?$ionicViewSwitcher.destroyViewEle(viewElement):navViewAttr(viewElement)==VIEW_STATUS_ACTIVE&&(viewScope=viewElement.scope())&&viewScope.$broadcast("$ionicView.clearCache")},self.getViewElements=function(){return $element.children()},self.appendViewElement=function(viewEle,viewLocals){var linkFn=$compile(viewEle);$element.append(viewEle);var viewScope=$scope.$new();if(viewLocals&&viewLocals.$$controller){viewLocals.$scope=viewScope;var controller=$controller(viewLocals.$$controller,viewLocals);viewLocals.$$controllerAs&&(viewScope[viewLocals.$$controllerAs]=controller),$element.children().data("$ngControllerController",controller)}return linkFn(viewScope),viewScope},self.title=function(val){var associatedNavBarCtrl=getAssociatedNavBarCtrl();associatedNavBarCtrl&&associatedNavBarCtrl.title(val)},self.enableBackButton=function(shouldEnable){var associatedNavBarCtrl=getAssociatedNavBarCtrl();associatedNavBarCtrl&&associatedNavBarCtrl.enableBackButton(shouldEnable)},self.showBackButton=function(shouldShow){var associatedNavBarCtrl=getAssociatedNavBarCtrl();return!associatedNavBarCtrl||(arguments.length?associatedNavBarCtrl.showActiveBackButton(shouldShow):associatedNavBarCtrl.showActiveBackButton())},self.showBar=function(val){var associatedNavBarCtrl=getAssociatedNavBarCtrl();return!associatedNavBarCtrl||(arguments.length?associatedNavBarCtrl.showBar(val):associatedNavBarCtrl.showBar())},self.isPrimary=function(val){return arguments.length&&(isPrimary=val),isPrimary},self.direction=function(val){return arguments.length&&(direction=val),direction},self.initSwipeBack=function(){function onDragStart(ev){if(isPrimary&&$ionicConfig.views.swipeBackEnabled()&&!$ionicSideMenuDelegate.isOpenRight()&&!((startDragX=getDragX(ev))>swipeBackHitWidth)){backView=$ionicHistory.backView();var currentView=$ionicHistory.currentView();if(backView&&backView.historyId===currentView.historyId&&!1!==currentView.canSwipeBack){windowWidth||(windowWidth=window.innerWidth),self.isSwipeFreeze=$ionicScrollDelegate.freezeAllScrolls(!0);var registerData={direction:"back"};dragPoints=[],cancelData={showBar:self.showBar(),showBackButton:self.showBackButton()};var switcher=$ionicViewSwitcher.create(self,registerData,backView,currentView,!0,!1);switcher.loadViewElements(registerData),switcher.render(registerData),viewTransition=switcher.transition("back",$ionicHistory.enabledBack(backView),!0),associatedNavBarCtrl=getAssociatedNavBarCtrl(),deregDrag=ionic.onGesture("drag",onDrag,$element[0]),deregRelease=ionic.onGesture("release",onRelease,$element[0])}}}function onDrag(ev){if(isPrimary&&viewTransition){var dragX=getDragX(ev);if(dragPoints.push({t:Date.now(),x:dragX}),dragX>=windowWidth-15)onRelease(ev);else{var step=Math.min(Math.max(getSwipeCompletion(dragX),0),1);viewTransition.run(step),associatedNavBarCtrl&&associatedNavBarCtrl.activeTransition&&associatedNavBarCtrl.activeTransition.run(step)}}}function onRelease(ev){if(isPrimary&&viewTransition&&dragPoints&&dragPoints.length>1){for(var now=Date.now(),releaseX=getDragX(ev),startDrag=dragPoints[dragPoints.length-1],x=dragPoints.length-2;x>=0&&!(now-startDrag.t>200);x--)startDrag=dragPoints[x];var isSwipingRight=releaseX>=dragPoints[dragPoints.length-2].x,releaseSwipeCompletion=getSwipeCompletion(releaseX),velocity=Math.abs(startDrag.x-releaseX)/(now-startDrag.t);if(disableRenderStartViewId=backView.viewId,disableAnimation=releaseSwipeCompletion<.03||releaseSwipeCompletion>.97,isSwipingRight&&(releaseSwipeCompletion>.5||velocity>.1)){var speed=velocity>.5||velocity<.05||releaseX>windowWidth-45?"fast":"slow";navSwipeAttr(disableAnimation?"":speed),backView.go(),associatedNavBarCtrl&&associatedNavBarCtrl.activeTransition&&associatedNavBarCtrl.activeTransition.complete(!disableAnimation,speed)}else navSwipeAttr(disableAnimation?"":"fast"),disableRenderStartViewId=null,viewTransition.cancel(!disableAnimation),associatedNavBarCtrl&&associatedNavBarCtrl.activeTransition&&associatedNavBarCtrl.activeTransition.cancel(!disableAnimation,"fast",cancelData),disableAnimation=null}ionic.offGesture(deregDrag,"drag",onDrag),ionic.offGesture(deregRelease,"release",onRelease),windowWidth=viewTransition=dragPoints=null,self.isSwipeFreeze=$ionicScrollDelegate.freezeAllScrolls(!1)}function getDragX(ev){return ionic.tap.pointerCoord(ev.gesture.srcEvent).x}function getSwipeCompletion(dragX){return(dragX-startDragX)/windowWidth}var viewTransition,associatedNavBarCtrl,backView,deregDragStart,deregDrag,deregRelease,windowWidth,startDragX,dragPoints,swipeBackHitWidth=$ionicConfig.views.swipeBackHitWidth(),cancelData={};deregDragStart=ionic.onGesture("dragstart",onDragStart,$element[0]),$scope.$on("$destroy",function(){ionic.offGesture(deregDragStart,"dragstart",onDragStart),ionic.offGesture(deregDrag,"drag",onDrag),ionic.offGesture(deregRelease,"release",onRelease),self.element=viewTransition=associatedNavBarCtrl=null})}}]),IonicModule.controller("$ionicRefresher",["$scope","$attrs","$element","$ionicBind","$timeout",function($scope,$attrs,$element,$ionicBind,$timeout){function handleMousedown(e){e.touches=e.touches||[{screenX:e.screenX,screenY:e.screenY}],startY=Math.floor(e.touches[0].screenY)}function handleTouchstart(e){e.touches=e.touches||[{screenX:e.screenX,screenY:e.screenY}],startY=e.touches[0].screenY}function handleTouchend(){startY=null,(canOverscroll||isDragging)&&(isDragging?(isDragging=!1,dragOffset=0,lastOverscroll>ptrThreshold?(start(),scrollTo(ptrThreshold,scrollTime)):(scrollTo(0,scrollTime,deactivate),isOverscrolling=!1)):(dragOffset=0,isOverscrolling=!1,setScrollLock(!1)))}function handleTouchmove(e){if(e.touches=e.touches||[{screenX:e.screenX,screenY:e.screenY}],(startY||"mousemove"!=e.type)&&canOverscroll&&!(e.touches.length>1)){if(null===startY&&(startY=e.touches[0].screenY),deltaY=e.touches[0].screenY-startY,ionic.Platform.isAndroid()&&4.4===ionic.Platform.version()&&!ionic.Platform.isCrosswalk()&&0===scrollParent.scrollTop&&deltaY>0&&(isDragging=!0,e.preventDefault()),deltaY-dragOffset<=0||0!==scrollParent.scrollTop)return isOverscrolling&&(isOverscrolling=!1,setScrollLock(!1)),isDragging&&nativescroll(scrollParent,deltaY- -1*dragOffset),void(0!==lastOverscroll&&overscroll(0));deltaY>0&&0===scrollParent.scrollTop&&!isOverscrolling&&(dragOffset=deltaY),e.preventDefault(),isOverscrolling||(isOverscrolling=!0,setScrollLock(!0)),isDragging=!0,overscroll((deltaY-dragOffset)/3),!activated&&lastOverscroll>ptrThreshold?(activated=!0,ionic.requestAnimationFrame(activate)):activated&&lastOverscroll<ptrThreshold&&(activated=!1,ionic.requestAnimationFrame(deactivate))}}function handleScroll(e){canOverscroll=0===e.target.scrollTop||isDragging}function overscroll(val){scrollChild.style[ionic.CSS.TRANSFORM]="translate3d(0px, "+val+"px, 0px)",lastOverscroll=val}function nativescroll(target,newScrollTop){target.scrollTop=newScrollTop;var e=document.createEvent("UIEvents");e.initUIEvent("scroll",!0,!0,window,1),target.dispatchEvent(e)}function setScrollLock(enabled){enabled?ionic.requestAnimationFrame(function(){scrollChild.classList.add("overscroll"),show()}):ionic.requestAnimationFrame(function(){scrollChild.classList.remove("overscroll"),hide(),deactivate()})}function scrollTo(Y,duration,callback){function easeOutCubic(t){return--t*t*t+1}function scroll(){var currentTime=Date.now(),time=Math.min(1,(currentTime-start)/duration),easedT=easeOutCubic(time);overscroll(Math.floor(easedT*(Y-from)+from)),time<1?ionic.requestAnimationFrame(scroll):(Y<5&&Y>-5&&(isOverscrolling=!1,setScrollLock(!1)),callback&&callback())}var start=Date.now(),from=lastOverscroll;from!==Y?ionic.requestAnimationFrame(scroll):callback()}function destroy(){scrollChild&&(ionic.off(touchStartEvent,handleTouchstart,scrollChild),ionic.off(touchMoveEvent,handleTouchmove,scrollChild),ionic.off(touchEndEvent,handleTouchend,scrollChild),ionic.off("mousedown",handleMousedown,scrollChild),ionic.off("mousemove",handleTouchmove,scrollChild),ionic.off("mouseup",handleTouchend,scrollChild)),scrollParent&&ionic.off("scroll",handleScroll,scrollParent),scrollParent=null,scrollChild=null}function activate(){$element[0].classList.add("active"),$scope.$onPulling()}function deactivate(){$timeout(function(){$element.removeClass("active refreshing refreshing-tail"),activated&&(activated=!1)},150)}function start(){$element[0].classList.add("refreshing");var q=$scope.$onRefresh();q&&q.then&&q.finally(function(){$scope.$broadcast("scroll.refreshComplete")})}function show(){$element[0].classList.remove("invisible")}function hide(){$element[0].classList.add("invisible")}function tail(){$element[0].classList.add("refreshing-tail")}var scrollParent,scrollChild,self=this,isDragging=!1,isOverscrolling=!1,dragOffset=0,lastOverscroll=0,ptrThreshold=60,activated=!1,scrollTime=500,startY=null,deltaY=null,canOverscroll=!0;isDefined($attrs.pullingIcon)||$attrs.$set("pullingIcon","ion-android-arrow-down"),$scope.showSpinner=!isDefined($attrs.refreshingIcon)&&"none"!=$attrs.spinner,$scope.showIcon=isDefined($attrs.refreshingIcon),$ionicBind($scope,$attrs,{pullingIcon:"@",pullingText:"@",refreshingIcon:"@",refreshingText:"@",spinner:"@",disablePullingRotation:"@",$onRefresh:"&onRefresh",$onPulling:"&onPulling"}),$scope.$on("scroll.refreshComplete",function(){$timeout(function(){ionic.requestAnimationFrame(tail),scrollTo(0,scrollTime,deactivate),$timeout(function(){isOverscrolling&&(isOverscrolling=!1,setScrollLock(!1))},scrollTime)},scrollTime)});var touchStartEvent,touchMoveEvent,touchEndEvent;window.navigator.pointerEnabled?(touchStartEvent="pointerdown",touchMoveEvent="pointermove",touchEndEvent="pointerup"):window.navigator.msPointerEnabled?(touchStartEvent="MSPointerDown",touchMoveEvent="MSPointerMove",touchEndEvent="MSPointerUp"):(touchStartEvent="touchstart",touchMoveEvent="touchmove",touchEndEvent="touchend"),self.init=function(){if(scrollParent=$element.parent().parent()[0],scrollChild=$element.parent()[0],!(scrollParent&&scrollParent.classList.contains("ionic-scroll")&&scrollChild&&scrollChild.classList.contains("scroll")))throw new Error("Refresher must be immediate child of ion-content or ion-scroll");ionic.on(touchStartEvent,handleTouchstart,scrollChild),ionic.on(touchMoveEvent,handleTouchmove,scrollChild),ionic.on(touchEndEvent,handleTouchend,scrollChild),ionic.on("mousedown",handleMousedown,scrollChild),ionic.on("mousemove",handleTouchmove,scrollChild),ionic.on("mouseup",handleTouchend,scrollChild),ionic.on("scroll",handleScroll,scrollParent),$scope.$on("$destroy",destroy)},self.getRefresherDomMethods=function(){return{activate:activate,deactivate:deactivate,start:start,show:show,hide:hide,tail:tail}},self.__handleTouchmove=handleTouchmove,self.__getScrollChild=function(){return scrollChild},self.__getScrollParent=function(){return scrollParent}}]),IonicModule.controller("$ionicScroll",["$scope","scrollViewOptions","$timeout","$window","$location","$document","$ionicScrollDelegate","$ionicHistory",function($scope,scrollViewOptions,$timeout,$window,$location,$document,$ionicScrollDelegate,$ionicHistory){var self=this;self.__timeout=$timeout,self._scrollViewOptions=scrollViewOptions,self.isNative=function(){return!!scrollViewOptions.nativeScrolling};var scrollView,element=self.element=scrollViewOptions.el,$element=self.$element=jqLite(element);scrollView=self.isNative()?self.scrollView=new ionic.views.ScrollNative(scrollViewOptions):self.scrollView=new ionic.views.Scroll(scrollViewOptions),($element.parent().length?$element.parent():$element).data("$$ionicScrollController",self);var deregisterInstance=$ionicScrollDelegate._registerInstance(self,scrollViewOptions.delegateHandle,function(){return $ionicHistory.isActiveScope($scope)});isDefined(scrollViewOptions.bouncing)||ionic.Platform.ready(function(){scrollView&&scrollView.options&&(scrollView.options.bouncing=!0,ionic.Platform.isAndroid()&&(scrollView.options.bouncing=!1,scrollView.options.deceleration=.95))});var resize=angular.bind(scrollView,scrollView.resize);angular.element($window).on("resize",resize);var scrollFunc=function(e){var detail=(e.originalEvent||e).detail||{};$scope.$onScroll&&$scope.$onScroll({event:e,scrollTop:detail.scrollTop||0,scrollLeft:detail.scrollLeft||0})};$element.on("scroll",scrollFunc),$scope.$on("$destroy",function(){deregisterInstance(),scrollView&&scrollView.__cleanup&&scrollView.__cleanup(),angular.element($window).off("resize",resize),$element&&$element.off("scroll",scrollFunc),self._scrollViewOptions&&(self._scrollViewOptions.el=null),scrollViewOptions&&(scrollViewOptions.el=null),scrollView=self.scrollView=scrollViewOptions=self._scrollViewOptions=element=self.$element=$element=null}),$timeout(function(){scrollView&&scrollView.run&&scrollView.run()}),self.getScrollView=function(){return scrollView},self.getScrollPosition=function(){return scrollView.getValues()},self.resize=function(){return $timeout(resize,0,!1).then(function(){$element&&$element.triggerHandler("scroll-resize")})},self.scrollTop=function(shouldAnimate){self.resize().then(function(){scrollView&&scrollView.scrollTo(0,0,!!shouldAnimate)})},self.scrollBottom=function(shouldAnimate){self.resize().then(function(){if(scrollView){var max=scrollView.getScrollMax();scrollView.scrollTo(max.left,max.top,!!shouldAnimate)}})},self.scrollTo=function(left,top,shouldAnimate){self.resize().then(function(){scrollView&&scrollView.scrollTo(left,top,!!shouldAnimate)})},self.zoomTo=function(zoom,shouldAnimate,originLeft,originTop){self.resize().then(function(){scrollView&&scrollView.zoomTo(zoom,!!shouldAnimate,originLeft,originTop)})},self.zoomBy=function(zoom,shouldAnimate,originLeft,originTop){self.resize().then(function(){scrollView&&scrollView.zoomBy(zoom,!!shouldAnimate,originLeft,originTop)})},self.scrollBy=function(left,top,shouldAnimate){self.resize().then(function(){scrollView&&scrollView.scrollBy(left,top,!!shouldAnimate)})},self.anchorScroll=function(shouldAnimate){self.resize().then(function(){if(scrollView){var hash=$location.hash(),elm=hash&&$document[0].getElementById(hash);if(hash&&elm){var curElm=elm,scrollLeft=0,scrollTop=0;do{null!==curElm&&(scrollLeft+=curElm.offsetLeft),null!==curElm&&(scrollTop+=curElm.offsetTop),curElm=curElm.offsetParent}while(curElm.attributes!=self.element.attributes&&curElm.offsetParent);scrollView.scrollTo(scrollLeft,scrollTop,!!shouldAnimate)}else scrollView.scrollTo(0,0,!!shouldAnimate)}})},self.freezeScroll=scrollView.freeze,self.freezeScrollShut=scrollView.freezeShut,self.freezeAllScrolls=function(shouldFreeze){for(var i=0;i<$ionicScrollDelegate._instances.length;i++)$ionicScrollDelegate._instances[i].freezeScroll(shouldFreeze)},self._setRefresher=function(refresherScope,refresherElement,refresherMethods){self.refresher=refresherElement;var refresherHeight=self.refresher.clientHeight||60;scrollView.activatePullToRefresh(refresherHeight,refresherMethods)}}]),IonicModule.controller("$ionicSideMenus",["$scope","$attrs","$ionicSideMenuDelegate","$ionicPlatform","$ionicBody","$ionicHistory","$ionicScrollDelegate","IONIC_BACK_PRIORITY","$rootScope",function($scope,$attrs,$ionicSideMenuDelegate,$ionicPlatform,$ionicBody,$ionicHistory,$ionicScrollDelegate,IONIC_BACK_PRIORITY,$rootScope){var rightShowing,leftShowing,isDragging,startX,lastX,offsetX,isAsideExposed,self=this,enableMenuWithBackViews=!0;self.$scope=$scope,self.initialize=function(options){self.left=options.left,self.right=options.right,self.setContent(options.content),self.dragThresholdX=options.dragThresholdX||10,$ionicHistory.registerHistory(self.$scope)},self.setContent=function(content){content&&(self.content=content,self.content.onDrag=function(e){self._handleDrag(e)},self.content.endDrag=function(e){self._endDrag(e)})},self.isOpenLeft=function(){return self.getOpenAmount()>0},self.isOpenRight=function(){return self.getOpenAmount()<0},self.toggleLeft=function(shouldOpen){if(!isAsideExposed&&self.left.isEnabled){var openAmount=self.getOpenAmount();0===arguments.length&&(shouldOpen=openAmount<=0),self.content.enableAnimation(),shouldOpen?(self.openPercentage(100),$rootScope.$emit("$ionicSideMenuOpen","left")):(self.openPercentage(0),$rootScope.$emit("$ionicSideMenuClose","left"))}},self.toggleRight=function(shouldOpen){if(!isAsideExposed&&self.right.isEnabled){var openAmount=self.getOpenAmount();0===arguments.length&&(shouldOpen=openAmount>=0),self.content.enableAnimation(),shouldOpen?(self.openPercentage(-100),$rootScope.$emit("$ionicSideMenuOpen","right")):(self.openPercentage(0),$rootScope.$emit("$ionicSideMenuClose","right"))}},self.toggle=function(side){"right"==side?self.toggleRight():self.toggleLeft()},self.close=function(){self.openPercentage(0),$rootScope.$emit("$ionicSideMenuClose","left"),$rootScope.$emit("$ionicSideMenuClose","right")},self.getOpenAmount=function(){return self.content&&self.content.getTranslateX()||0},self.getOpenRatio=function(){var amount=self.getOpenAmount();return amount>=0?amount/self.left.width:amount/self.right.width},self.isOpen=function(){return 0!==self.getOpenAmount()},self.getOpenPercentage=function(){return 100*self.getOpenRatio()},self.openPercentage=function(percentage){var p=percentage/100;self.left&&percentage>=0?self.openAmount(self.left.width*p):self.right&&percentage<0&&self.openAmount(self.right.width*p),$ionicBody.enableClass(0!==percentage,"menu-open"),self.content.setCanScroll(0==percentage)},self.openAmount=function(amount){var maxLeft=self.left&&self.left.width||0,maxRight=self.right&&self.right.width||0;(self.left&&self.left.isEnabled||!(amount>0))&&(self.right&&self.right.isEnabled||!(amount<0))?leftShowing&&amount>maxLeft?self.content.setTranslateX(maxLeft):rightShowing&&amount<-maxRight?self.content.setTranslateX(-maxRight):(self.content.setTranslateX(amount),amount>=0?(leftShowing=!0,rightShowing=!1,amount>0&&(self.right&&self.right.pushDown&&self.right.pushDown(),self.left&&self.left.bringUp&&self.left.bringUp())):(rightShowing=!0,leftShowing=!1,self.right&&self.right.bringUp&&self.right.bringUp(),self.left&&self.left.pushDown&&self.left.pushDown())):self.content.setTranslateX(0)},self.snapToRest=function(e){self.content.enableAnimation(),isDragging=!1;var ratio=self.getOpenRatio();if(0!==ratio){var velocityX=e.gesture.velocityX,direction=e.gesture.direction;ratio>0&&ratio<.5&&"right"==direction&&velocityX<.3?self.openPercentage(0):ratio>.5&&"left"==direction&&velocityX<.3?self.openPercentage(100):ratio<0&&ratio>-.5&&"left"==direction&&velocityX<.3?self.openPercentage(0):ratio<.5&&"right"==direction&&velocityX<.3?self.openPercentage(-100):"right"==direction&&ratio>=0&&(ratio>=.5||velocityX>.3)?self.openPercentage(100):"left"==direction&&ratio<=0&&(ratio<=-.5||velocityX>.3)?self.openPercentage(-100):self.openPercentage(0)}else self.openPercentage(0)},self.enableMenuWithBackViews=function(val){return arguments.length&&(enableMenuWithBackViews=!!val),enableMenuWithBackViews},self.isAsideExposed=function(){return!!isAsideExposed},self.exposeAside=function(shouldExposeAside){(self.left&&self.left.isEnabled||self.right&&self.right.isEnabled)&&(self.close(),isAsideExposed=shouldExposeAside,self.left&&self.left.isEnabled&&self.right&&self.right.isEnabled?self.content.setMarginLeftAndRight(isAsideExposed?self.left.width:0,isAsideExposed?self.right.width:0):self.left&&self.left.isEnabled?self.content.setMarginLeft(isAsideExposed?self.left.width:0):self.right&&self.right.isEnabled&&self.content.setMarginRight(isAsideExposed?self.right.width:0),self.$scope.$emit("$ionicExposeAside",isAsideExposed))},self.activeAsideResizing=function(isResizing){$ionicBody.enableClass(isResizing,"aside-resizing")},self._endDrag=function(e){isAsideExposed||(isDragging&&self.snapToRest(e),startX=null,lastX=null,offsetX=null)},self._handleDrag=function(e){!isAsideExposed&&$scope.dragContent&&(startX?lastX=e.gesture.touches[0].pageX:(startX=e.gesture.touches[0].pageX,lastX=startX),!isDragging&&Math.abs(lastX-startX)>self.dragThresholdX&&(startX=lastX,isDragging=!0,self.content.disableAnimation(),offsetX=self.getOpenAmount()),isDragging&&self.openAmount(offsetX+(lastX-startX)))},self.canDragContent=function(canDrag){return arguments.length&&($scope.dragContent=!!canDrag),$scope.dragContent},self.edgeThreshold=25,self.edgeThresholdEnabled=!1,self.edgeDragThreshold=function(value){return arguments.length&&(isNumber(value)&&value>0?(self.edgeThreshold=value,self.edgeThresholdEnabled=!0):self.edgeThresholdEnabled=!!value),self.edgeThresholdEnabled},self.isDraggableTarget=function(e){var shouldOnlyAllowEdgeDrag=self.edgeThresholdEnabled&&!self.isOpen(),startX=e.gesture.startEvent&&e.gesture.startEvent.center&&e.gesture.startEvent.center.pageX,dragIsWithinBounds=!shouldOnlyAllowEdgeDrag||startX<=self.edgeThreshold||startX>=self.content.element.offsetWidth-self.edgeThreshold,backView=$ionicHistory.backView(),menuEnabled=!!enableMenuWithBackViews||!backView;if(!menuEnabled){var currentView=$ionicHistory.currentView()||{};return dragIsWithinBounds&&backView.historyId!==currentView.historyId}return($scope.dragContent||self.isOpen())&&dragIsWithinBounds&&!e.gesture.srcEvent.defaultPrevented&&menuEnabled&&!e.target.tagName.match(/input|textarea|select|object|embed/i)&&!e.target.isContentEditable&&!(e.target.dataset?e.target.dataset.preventScroll:"true"==e.target.getAttribute("data-prevent-scroll"))},$scope.sideMenuContentTranslateX=0;var deregisterBackButtonAction=noop,closeSideMenu=angular.bind(self,self.close);$scope.$watch(function(){return 0!==self.getOpenAmount()},function(isOpen){deregisterBackButtonAction(),isOpen&&(deregisterBackButtonAction=$ionicPlatform.registerBackButtonAction(closeSideMenu,IONIC_BACK_PRIORITY.sideMenu))});var deregisterInstance=$ionicSideMenuDelegate._registerInstance(self,$attrs.delegateHandle,function(){return $ionicHistory.isActiveScope($scope)});$scope.$on("$destroy",function(){deregisterInstance(),deregisterBackButtonAction(),self.$scope=null,self.content&&(self.content.setCanScroll(!0),self.content.element=null,self.content=null)}),self.initialize({left:{width:275},right:{width:275}})}]),function(ionic){function createSvgElement(tagName,data,parent,spinnerName){var k,x,y,ele=document.createElement(SHORTCUTS[tagName]||tagName);for(k in data)if(angular.isArray(data[k]))for(x=0;x<data[k].length;x++)if(data[k][x].fn)for(y=0;y<data[k][x].t;y++)createSvgElement(k,data[k][x].fn(y,spinnerName),ele,spinnerName);else createSvgElement(k,data[k][x],ele,spinnerName);else setSvgAttribute(ele,k,data[k]);parent.appendChild(ele)}function setSvgAttribute(ele,k,v){ele.setAttribute(SHORTCUTS[k]||k,v)}function animationValues(strValues,i){var values=strValues.split(";"),back=values.slice(i),front=values.slice(0,values.length-back.length);return(values=back.concat(front).reverse()).join(";")+";"+values[0]}function easeInOutCubic(t,c){return(t/=c/2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}var SHORTCUTS={a:"animate",an:"attributeName",at:"animateTransform",c:"circle",da:"stroke-dasharray",os:"stroke-dashoffset",f:"fill",lc:"stroke-linecap",rc:"repeatCount",sw:"stroke-width",t:"transform",v:"values"},SPIN_ANIMATION={v:"0,32,32;360,32,32",an:"transform",type:"rotate",rc:"indefinite",dur:"750ms"},IOS_SPINNER={sw:4,lc:"round",line:[{fn:function(i,spinnerName){return{y1:"ios"==spinnerName?17:12,y2:"ios"==spinnerName?29:20,t:"translate(32,32) rotate("+(30*i+(i<6?180:-180))+")",a:[{fn:function(){return{an:"stroke-opacity",dur:"750ms",v:animationValues("0;.1;.15;.25;.35;.45;.55;.65;.7;.85;1",i),rc:"indefinite"}},t:1}]}},t:12}]},spinners={android:{c:[{sw:6,da:128,os:82,r:26,cx:32,cy:32,f:"none"}]},ios:IOS_SPINNER,"ios-small":IOS_SPINNER,bubbles:{sw:0,c:[{fn:function(i){return{cx:24*Math.cos(2*Math.PI*i/8),cy:24*Math.sin(2*Math.PI*i/8),t:"translate(32,32)",a:[{fn:function(){return{an:"r",dur:"750ms",v:animationValues("1;2;3;4;5;6;7;8",i),rc:"indefinite"}},t:1}]}},t:8}]},circles:{c:[{fn:function(i){return{r:5,cx:24*Math.cos(2*Math.PI*i/8),cy:24*Math.sin(2*Math.PI*i/8),t:"translate(32,32)",sw:0,a:[{fn:function(){return{an:"fill-opacity",dur:"750ms",v:animationValues(".3;.3;.3;.4;.7;.85;.9;1",i),rc:"indefinite"}},t:1}]}},t:8}]},crescent:{c:[{sw:4,da:128,os:82,r:26,cx:32,cy:32,f:"none",at:[SPIN_ANIMATION]}]},dots:{c:[{fn:function(i){return{cx:16+16*i,cy:32,sw:0,a:[{fn:function(){return{an:"fill-opacity",dur:"750ms",v:animationValues(".5;.6;.8;1;.8;.6;.5",i),rc:"indefinite"}},t:1},{fn:function(){return{an:"r",dur:"750ms",v:animationValues("4;5;6;5;4;3;3",i),rc:"indefinite"}},t:1}]}},t:3}]},lines:{sw:7,lc:"round",line:[{fn:function(i){return{x1:10+14*i,x2:10+14*i,a:[{fn:function(){return{an:"y1",dur:"750ms",v:animationValues("16;18;28;18;16",i),rc:"indefinite"}},t:1},{fn:function(){return{an:"y2",dur:"750ms",v:animationValues("48;44;36;46;48",i),rc:"indefinite"}},t:1},{fn:function(){return{an:"stroke-opacity",dur:"750ms",v:animationValues("1;.8;.5;.4;1",i),rc:"indefinite"}},t:1}]}},t:4}]},ripple:{f:"none","fill-rule":"evenodd",sw:3,circle:[{fn:function(i){return{cx:32,cy:32,a:[{fn:function(){return{an:"r",begin:-1*i+"s",dur:"2s",v:"0;24",keyTimes:"0;1",keySplines:"0.1,0.2,0.3,1",calcMode:"spline",rc:"indefinite"}},t:1},{fn:function(){return{an:"stroke-opacity",begin:-1*i+"s",dur:"2s",v:".2;1;.2;0",rc:"indefinite"}},t:1}]}},t:2}]},spiral:{defs:[{linearGradient:[{id:"sGD",gradientUnits:"userSpaceOnUse",x1:55,y1:46,x2:2,y2:46,stop:[{offset:.1,class:"stop1"},{offset:1,class:"stop2"}]}]}],g:[{sw:4,lc:"round",f:"none",path:[{stroke:"url(#sGD)",d:"M4,32 c0,15,12,28,28,28c8,0,16-4,21-9"},{d:"M60,32 C60,16,47.464,4,32,4S4,16,4,32"}],at:[SPIN_ANIMATION]}]}},animations={android:function(ele){function run(){if(!self.stop){var v=easeInOutCubic(Date.now()-startTime,650),scaleX=1,translateX=0,dasharray=188-58*v,dashoffset=182-182*v;rIndex%2&&(scaleX=-1,translateX=-64,dasharray=128- -58*v,dashoffset=182*v);var rotateLine=[0,-101,-90,-11,-180,79,-270,-191][rIndex];setSvgAttribute(circleEle,"da",Math.max(Math.min(dasharray,188),128)),setSvgAttribute(circleEle,"os",Math.max(Math.min(dashoffset,182),0)),setSvgAttribute(circleEle,"t","scale("+scaleX+",1) translate("+translateX+",0) rotate("+rotateLine+",32,32)"),(rotateCircle+=4.1)>359&&(rotateCircle=0),setSvgAttribute(svgEle,"t","rotate("+rotateCircle+",32,32)"),v>=1&&(++rIndex>7&&(rIndex=0),startTime=Date.now()),ionic.requestAnimationFrame(run)}}var self={};this.stop=!1;var startTime,rIndex=0,rotateCircle=0,svgEle=ele.querySelector("g"),circleEle=ele.querySelector("circle");return function(){return startTime=Date.now(),run(),self}}};IonicModule.controller("$ionicSpinner",["$element","$attrs","$ionicConfig",function($element,$attrs,$ionicConfig){var spinnerName,anim;this.init=function(){spinnerName=$attrs.icon||$ionicConfig.spinner.icon();var container=document.createElement("div");return createSvgElement("svg",{viewBox:"0 0 64 64",g:[spinners[spinnerName]]},container,spinnerName),$element.html(container.innerHTML),this.start(),spinnerName},this.start=function(){animations[spinnerName]&&(anim=animations[spinnerName]($element[0])())},this.stop=function(){animations[spinnerName]&&(anim.stop=!0)}}])}(ionic),IonicModule.controller("$ionicTab",["$scope","$ionicHistory","$attrs","$location","$state",function($scope,$ionicHistory,$attrs,$location,$state){this.$scope=$scope,this.hrefMatchesState=function(){return $attrs.href&&0===$location.path().indexOf($attrs.href.replace(/^#/,"").replace(/\/$/,""))},this.srefMatchesState=function(){return $attrs.uiSref&&$state.includes($attrs.uiSref.split("(")[0])},this.navNameMatchesState=function(){return this.navViewName&&$ionicHistory.isCurrentStateNavView(this.navViewName)},this.tabMatchesState=function(){return this.hrefMatchesState()||this.srefMatchesState()||this.navNameMatchesState()}}]),IonicModule.controller("$ionicTabs",["$scope","$element","$ionicHistory",function($scope,$element,$ionicHistory){var selectedTabIndex,self=this,selectedTab=null,previousSelectedTab=null,isVisible=!0;self.tabs=[],self.selectedIndex=function(){return self.tabs.indexOf(selectedTab)},self.selectedTab=function(){return selectedTab},self.previousSelectedTab=function(){return previousSelectedTab},self.add=function(tab){$ionicHistory.registerHistory(tab),self.tabs.push(tab)},self.remove=function(tab){var tabIndex=self.tabs.indexOf(tab);if(-1!==tabIndex){if(tab.$tabSelected)if(self.deselect(tab),1===self.tabs.length);else{var newTabIndex=tabIndex===self.tabs.length-1?tabIndex-1:tabIndex+1;self.select(self.tabs[newTabIndex])}self.tabs.splice(tabIndex,1)}},self.deselect=function(tab){tab.$tabSelected&&(previousSelectedTab=selectedTab,selectedTab=selectedTabIndex=null,tab.$tabSelected=!1,(tab.onDeselect||noop)(),tab.$broadcast&&tab.$broadcast("$ionicHistory.deselect"))},self.select=function(tab,shouldEmitEvent){var tabIndex;if(isNumber(tab)){if((tabIndex=tab)>=self.tabs.length)return;tab=self.tabs[tabIndex]}else tabIndex=self.tabs.indexOf(tab);1===arguments.length&&(shouldEmitEvent=!(!tab.navViewName&&!tab.uiSref)),selectedTab&&selectedTab.$historyId==tab.$historyId?shouldEmitEvent&&$ionicHistory.goToHistoryRoot(tab.$historyId):selectedTabIndex!==tabIndex&&(forEach(self.tabs,function(tab){self.deselect(tab)}),selectedTab=tab,selectedTabIndex=tabIndex,self.$scope&&self.$scope.$parent&&(self.$scope.$parent.$activeHistoryId=tab.$historyId),tab.$tabSelected=!0,(tab.onSelect||noop)(),shouldEmitEvent&&$scope.$emit("$ionicHistory.change",{type:"tab",tabIndex:tabIndex,historyId:tab.$historyId,navViewName:tab.navViewName,hasNavView:!!tab.navViewName,title:tab.title,url:tab.href,uiSref:tab.uiSref}),$scope.$broadcast("tabSelected",{selectedTab:tab,selectedTabIndex:tabIndex}))},self.hasActiveScope=function(){for(var x=0;x<self.tabs.length;x++)if($ionicHistory.isActiveScope(self.tabs[x]))return!0;return!1},self.showBar=function(show){return arguments.length&&(show?$element.removeClass("tabs-item-hide"):$element.addClass("tabs-item-hide"),isVisible=!!show),isVisible}}]),IonicModule.controller("$ionicView",["$scope","$element","$attrs","$compile","$rootScope",function($scope,$element,$attrs,$compile,$rootScope){function afterEnter(){var viewTitleAttr=isDefined($attrs.viewTitle)&&"viewTitle"||isDefined($attrs.title)&&"title";viewTitleAttr&&(titleUpdate($attrs[viewTitleAttr]),deregisters.push($attrs.$observe(viewTitleAttr,titleUpdate))),isDefined($attrs.hideBackButton)&&deregisters.push($scope.$watch($attrs.hideBackButton,function(val){navViewCtrl.showBackButton(!val)})),isDefined($attrs.hideNavBar)&&deregisters.push($scope.$watch($attrs.hideNavBar,function(val){navViewCtrl.showBar(!val)}))}function titleUpdate(newTitle){isDefined(newTitle)&&newTitle!==viewTitle&&(viewTitle=newTitle,navViewCtrl.title(viewTitle))}function deregisterFns(){for(var x=0;x<deregisters.length;x++)deregisters[x]();deregisters=[]}function generateNavBarItem(html){if(html)return $compile(html)($scope.$new())}function attrTrue(key){return!!$scope.$eval($attrs[key])}var navViewCtrl,navBarDelegateHandle,viewTitle,self=this,navElementHtml={},deregisters=[],deregIonNavBarInit=$scope.$on("ionNavBar.init",function(ev,delegateHandle){ev.stopPropagation(),navBarDelegateHandle=delegateHandle});self.init=function(){deregIonNavBarInit();var modalCtrl=$element.inheritedData("$ionModalController");(navViewCtrl=$element.inheritedData("$ionNavViewController"))&&!modalCtrl&&($scope.$on("$ionicView.beforeEnter",self.beforeEnter),$scope.$on("$ionicView.afterEnter",afterEnter),$scope.$on("$ionicView.beforeLeave",deregisterFns))},self.beforeEnter=function(ev,transData){if(transData&&!transData.viewNotified){transData.viewNotified=!0,$rootScope.$$phase||$scope.$digest(),viewTitle=isDefined($attrs.viewTitle)?$attrs.viewTitle:$attrs.title;var navBarItems={};for(var n in navElementHtml)navBarItems[n]=generateNavBarItem(navElementHtml[n]);navViewCtrl.beforeEnter(extend(transData,{title:viewTitle,showBack:!attrTrue("hideBackButton"),navBarItems:navBarItems,navBarDelegate:navBarDelegateHandle||null,showNavBar:!attrTrue("hideNavBar"),hasHeaderBar:!1})),deregisterFns()}},self.navElement=function(type,html){navElementHtml[type]=html}}]),IonicModule.directive("ionActionSheet",["$document",function($document){return{restrict:"E",scope:!0,replace:!0,link:function($scope,$element){var keyUp=function(e){27==e.which&&($scope.cancel(),$scope.$apply())};$scope.$on("$destroy",function(){$element.remove(),$document.unbind("keyup",keyUp)}),$document.bind("keyup",keyUp),$element.bind("click",function(e){e.target==$element[0]&&($scope.cancel(),$scope.$apply())})},template:'<div class="action-sheet-backdrop"><div class="action-sheet-wrapper"><div class="action-sheet" ng-class="{\'action-sheet-has-icons\': $actionSheetHasIcon}"><div class="action-sheet-group action-sheet-options"><div class="action-sheet-title" ng-if="titleText" ng-bind-html="titleText"></div><button class="button action-sheet-option" ng-click="buttonClicked($index)" ng-class="b.className" ng-repeat="b in buttons" ng-bind-html="b.text"></button><button class="button destructive action-sheet-destructive" ng-if="destructiveText" ng-click="destructiveButtonClicked()" ng-bind-html="destructiveText"></button></div><div class="action-sheet-group action-sheet-cancel" ng-if="cancelText"><button class="button" ng-click="cancel()" ng-bind-html="cancelText"></button></div></div></div></div>'}}]),IonicModule.directive("ionCheckbox",["$ionicConfig",function($ionicConfig){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<label class="item item-checkbox"><div class="checkbox checkbox-input-hidden disable-pointer-events"><input type="checkbox"><i class="checkbox-icon"></i></div><div class="item-content disable-pointer-events" ng-transclude></div></label>',compile:function(element,attr){var input=element.find("input");forEach({name:attr.name,"ng-value":attr.ngValue,"ng-model":attr.ngModel,"ng-checked":attr.ngChecked,"ng-disabled":attr.ngDisabled,"ng-true-value":attr.ngTrueValue,"ng-false-value":attr.ngFalseValue,"ng-change":attr.ngChange,"ng-required":attr.ngRequired,required:attr.required},function(value,name){isDefined(value)&&input.attr(name,value)}),element[0].querySelector(".checkbox").classList.add("checkbox-"+$ionicConfig.form.checkbox())}}}]),IonicModule.directive("collectionRepeat",CollectionRepeatDirective).factory("$ionicCollectionManager",RepeatManagerFactory);var ONE_PX_TRANSPARENT_IMG_SRC="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",WIDTH_HEIGHT_REGEX=/height:.*?px;\s*width:.*?px/,DEFAULT_RENDER_BUFFER=3;CollectionRepeatDirective.$inject=["$ionicCollectionManager","$parse","$window","$$rAF","$rootScope","$timeout"],RepeatManagerFactory.$inject=["$rootScope","$window","$$rAF"],IonicModule.directive("ionContent",["$timeout","$controller","$ionicBind","$ionicConfig",function($timeout,$controller,$ionicBind,$ionicConfig){return{restrict:"E",require:"^?ionNavView",scope:!0,priority:800,compile:function(element,attr){var innerElement,scrollCtrl;element.addClass("scroll-content ionic-scroll"),"false"!=attr.scroll?((innerElement=jqLite('<div class="scroll"></div>')).append(element.contents()),element.append(innerElement)):element.addClass("scroll-content-false");var nativeScrolling="false"!==attr.overflowScroll&&("true"===attr.overflowScroll||!$ionicConfig.scrolling.jsScrolling());return nativeScrolling&&(nativeScrolling=!element[0].querySelector("[collection-repeat]")),{pre:function($scope,$element,$attr){var parentScope=$scope.$parent;if($scope.$watch(function(){return(parentScope.$hasHeader?" has-header":"")+(parentScope.$hasSubheader?" has-subheader":"")+(parentScope.$hasFooter?" has-footer":"")+(parentScope.$hasSubfooter?" has-subfooter":"")+(parentScope.$hasTabs?" has-tabs":"")+(parentScope.$hasTabsTop?" has-tabs-top":"")},function(className,oldClassName){$element.removeClass(oldClassName),$element.addClass(className)}),$scope.$hasHeader=$scope.$hasSubheader=$scope.$hasFooter=$scope.$hasSubfooter=$scope.$hasTabs=$scope.$hasTabsTop=!1,$ionicBind($scope,$attr,{$onScroll:"&onScroll",$onScrollComplete:"&onScrollComplete",hasBouncing:"@",padding:"@",direction:"@",scrollbarX:"@",scrollbarY:"@",startX:"@",startY:"@",scrollEventInterval:"@"}),$scope.direction=$scope.direction||"y",isDefined($attr.padding)&&$scope.$watch($attr.padding,function(newVal){(innerElement||$element).toggleClass("padding",!!newVal)}),"false"===$attr.scroll);else{var scrollViewOptions={};nativeScrolling?($element.addClass("overflow-scroll"),scrollViewOptions={el:$element[0],delegateHandle:attr.delegateHandle,startX:$scope.$eval($scope.startX)||0,startY:$scope.$eval($scope.startY)||0,nativeScrolling:!0}):scrollViewOptions={el:$element[0],delegateHandle:attr.delegateHandle,locking:"true"===(attr.locking||"true"),bouncing:$scope.$eval($scope.hasBouncing),startX:$scope.$eval($scope.startX)||0,startY:$scope.$eval($scope.startY)||0,scrollbarX:!1!==$scope.$eval($scope.scrollbarX),scrollbarY:!1!==$scope.$eval($scope.scrollbarY),scrollingX:$scope.direction.indexOf("x")>=0,scrollingY:$scope.direction.indexOf("y")>=0,scrollEventInterval:parseInt($scope.scrollEventInterval,10)||10,scrollingComplete:function(){$scope.$onScrollComplete({scrollTop:scrollCtrl.scrollView.__scrollTop,scrollLeft:scrollCtrl.scrollView.__scrollLeft})}},scrollCtrl=$controller("$ionicScroll",{$scope:$scope,scrollViewOptions:scrollViewOptions}),$scope.scrollCtrl=scrollCtrl,$scope.$on("$destroy",function(){scrollViewOptions&&(scrollViewOptions.scrollingComplete=noop,delete scrollViewOptions.el),innerElement=null,$element=null,attr.$$element=null})}}}}}}]),IonicModule.directive("exposeAsideWhen",["$window",function($window){return{restrict:"A",require:"^ionSideMenus",link:function($scope,$element,$attr,sideMenuCtrl){function checkAsideExpose(){var mq="large"==$attr.exposeAsideWhen?"(min-width:768px)":$attr.exposeAsideWhen;sideMenuCtrl.exposeAside($window.matchMedia(mq).matches),sideMenuCtrl.activeAsideResizing(!1)}function onResize(){sideMenuCtrl.activeAsideResizing(!0),debouncedCheck()}var prevInnerWidth=$window.innerWidth,prevInnerHeight=$window.innerHeight;ionic.on("resize",function(){prevInnerWidth===$window.innerWidth&&prevInnerHeight===$window.innerHeight||(prevInnerWidth=$window.innerWidth,prevInnerHeight=$window.innerHeight,onResize())},$window);var debouncedCheck=ionic.debounce(function(){$scope.$apply(checkAsideExpose)},300,!1);$scope.$evalAsync(checkAsideExpose)}}}]),"onHold onTap onDoubleTap onTouch onRelease onDragStart onDrag onDragEnd onDragUp onDragRight onDragDown onDragLeft onSwipe onSwipeUp onSwipeRight onSwipeDown onSwipeLeft".split(" ").forEach(function(name){IonicModule.directive(name,gestureDirective(name))}),IonicModule.directive("ionHeaderBar",headerFooterBarDirective(!0)).directive("ionFooterBar",headerFooterBarDirective(!1)),IonicModule.directive("ionInfiniteScroll",["$timeout",function($timeout){return{restrict:"E",require:["?^$ionicScroll","ionInfiniteScroll"],template:function($element,$attrs){return $attrs.icon?'<i class="icon {{icon()}} icon-refreshing {{scrollingType}}"></i>':'<ion-spinner icon="{{spinner()}}"></ion-spinner>'},scope:!0,controller:"$ionInfiniteScroll",link:function($scope,$element,$attrs,ctrls){var infiniteScrollCtrl=ctrls[1],scrollCtrl=infiniteScrollCtrl.scrollCtrl=ctrls[0];if(infiniteScrollCtrl.jsScrolling=!scrollCtrl.isNative())infiniteScrollCtrl.scrollView=scrollCtrl.scrollView,$scope.scrollingType="js-scrolling",scrollCtrl.$element.on("scroll",infiniteScrollCtrl.checkBounds);else{var scrollEl=ionic.DomUtil.getParentOrSelfWithClass($element[0].parentNode,"overflow-scroll");if(infiniteScrollCtrl.scrollEl=scrollEl,!scrollEl)throw"Infinite scroll must be used inside a scrollable div";infiniteScrollCtrl.scrollEl.addEventListener("scroll",infiniteScrollCtrl.checkBounds)}(!isDefined($attrs.immediateCheck)||$scope.$eval($attrs.immediateCheck))&&$timeout(function(){infiniteScrollCtrl.checkBounds()})}}}]);var labelIds=-1;IonicModule.directive("ionInput",[function(){return{restrict:"E",controller:["$scope","$element",function($scope,$element){this.$scope=$scope,this.$element=$element,this.setInputAriaLabeledBy=function(id){var inputs=$element[0].querySelectorAll("input,textarea");inputs.length&&inputs[0].setAttribute("aria-labelledby",id)},this.focus=function(){var inputs=$element[0].querySelectorAll("input,textarea");inputs.length&&inputs[0].focus()}}]}}]),IonicModule.directive("ionLabel",[function(){return{restrict:"E",require:"?^ionInput",compile:function(){return function($scope,$element,$attrs,ionInputCtrl){var element=$element[0];$element.addClass("input-label"),$element.attr("aria-label",$element.text());var id=element.id||"_label-"+ ++labelIds;element.id||$element.attr("id",id),ionInputCtrl&&(ionInputCtrl.setInputAriaLabeledBy(id),$element.on("click",function(){ionInputCtrl.focus()}))}}}}]),IonicModule.directive("inputLabel",[function(){return{restrict:"C",require:"?^ionInput",compile:function(){return function($scope,$element,$attrs,ionInputCtrl){var element=$element[0];$element.attr("aria-label",$element.text());var id=element.id||"_label-"+ ++labelIds;element.id||$element.attr("id",id),ionInputCtrl&&ionInputCtrl.setInputAriaLabeledBy(id)}}}}]),IonicModule.directive("ionItem",["$$rAF",function($$rAF){return{restrict:"E",controller:["$scope","$element",function($scope,$element){this.$scope=$scope,this.$element=$element}],scope:!0,compile:function($element,$attrs){var isAnchor=isDefined($attrs.href)||isDefined($attrs.ngHref)||isDefined($attrs.uiSref);if(isAnchor||/ion-(delete|option|reorder)-button/i.test($element.html())){var innerElement=jqLite(isAnchor?"<a></a>":"<div></div>");innerElement.addClass("item-content"),(isDefined($attrs.href)||isDefined($attrs.ngHref))&&(innerElement.attr("ng-href","{{$href()}}"),isDefined($attrs.target)&&innerElement.attr("target","{{$target()}}")),innerElement.append($element.contents()),$element.addClass("item item-complex").append(innerElement)}else $element.addClass("item");return function($scope,$element,$attrs){$scope.$href=function(){return $attrs.href||$attrs.ngHref},$scope.$target=function(){return $attrs.target};var content=$element[0].querySelector(".item-content");content&&$scope.$on("$collectionRepeatLeave",function(){content&&content.$$ionicOptionsOpen&&(content.style[ionic.CSS.TRANSFORM]="",content.style[ionic.CSS.TRANSITION]="none",$$rAF(function(){content.style[ionic.CSS.TRANSITION]=""}),content.$$ionicOptionsOpen=!1)})}}}}]);IonicModule.directive("ionDeleteButton",function(){function stopPropagation(ev){ev.stopPropagation()}return{restrict:"E",require:["^^ionItem","^?ionList"],priority:Number.MAX_VALUE,compile:function($element,$attr){return $attr.$set("class",($attr.class||"")+" button icon button-icon",!0),function($scope,$element,$attr,ctrls){function init(){(listCtrl=listCtrl||$element.controller("ionList"))&&listCtrl.showDelete()&&container.addClass("visible active")}var itemCtrl=ctrls[0],listCtrl=ctrls[1],container=jqLite('<div class="item-left-edit item-delete enable-pointer-events"></div>');container.append($element),itemCtrl.$element.append(container).addClass("item-left-editable"),$element.on("click",stopPropagation),init(),$scope.$on("$ionic.reconnectScope",init)}}}}),IonicModule.directive("itemFloatingLabel",function(){return{restrict:"C",link:function(scope,element){var el=element[0],input=el.querySelector("input, textarea"),inputLabel=el.querySelector(".input-label");if(input&&inputLabel){var onInput=function(){input.value?inputLabel.classList.add("has-input"):inputLabel.classList.remove("has-input")};input.addEventListener("input",onInput);var ngModelCtrl=jqLite(input).controller("ngModel");ngModelCtrl&&(ngModelCtrl.$render=function(){input.value=ngModelCtrl.$viewValue||"",onInput()}),scope.$on("$destroy",function(){input.removeEventListener("input",onInput)})}}}});IonicModule.directive("ionOptionButton",[function(){function stopPropagation(e){e.stopPropagation()}return{restrict:"E",require:"^ionItem",priority:Number.MAX_VALUE,compile:function($element,$attr){return $attr.$set("class",($attr.class||"")+" button",!0),function($scope,$element,$attr,itemCtrl){itemCtrl.optionsContainer||(itemCtrl.optionsContainer=jqLite('<div class="item-options invisible"></div>'),itemCtrl.$element.append(itemCtrl.optionsContainer)),itemCtrl.optionsContainer.append($element),itemCtrl.$element.addClass("item-right-editable"),$element.on("click",stopPropagation)}}}}]);IonicModule.directive("ionReorderButton",["$parse",function($parse){return{restrict:"E",require:["^ionItem","^?ionList"],priority:Number.MAX_VALUE,compile:function($element,$attr){return $attr.$set("class",($attr.class||"")+" button icon button-icon",!0),$element[0].setAttribute("data-prevent-scroll",!0),function($scope,$element,$attr,ctrls){var itemCtrl=ctrls[0],listCtrl=ctrls[1],onReorderFn=$parse($attr.onReorder);$scope.$onReorder=function(oldIndex,newIndex){onReorderFn($scope,{$fromIndex:oldIndex,$toIndex:newIndex})},$attr.ngClick||$attr.onClick||$attr.onclick||($element[0].onclick=function(e){return e.stopPropagation(),!1});var container=jqLite('<div data-prevent-scroll="true" class="item-right-edit item-reorder enable-pointer-events"></div>');container.append($element),itemCtrl.$element.append(container).addClass("item-right-editable"),listCtrl&&listCtrl.showReorder()&&container.addClass("visible active")}}}}]),IonicModule.directive("keyboardAttach",function(){return function(scope,element){function onShow(e){if(!ionic.Platform.isAndroid()||ionic.Platform.isFullScreen){var keyboardHeight=e.keyboardHeight||e.detail&&e.detail.keyboardHeight;element.css("bottom",keyboardHeight+"px"),(scrollCtrl=element.controller("$ionicScroll"))&&(scrollCtrl.scrollView.__container.style.bottom=keyboardHeight+keyboardAttachGetClientHeight(element[0])+"px")}}function onHide(){ionic.Platform.isAndroid()&&!ionic.Platform.isFullScreen||(element.css("bottom",""),scrollCtrl&&(scrollCtrl.scrollView.__container.style.bottom=""))}ionic.on("native.keyboardshow",onShow,window),ionic.on("native.keyboardhide",onHide,window),ionic.on("native.showkeyboard",onShow,window),ionic.on("native.hidekeyboard",onHide,window);var scrollCtrl;scope.$on("$destroy",function(){ionic.off("native.keyboardshow",onShow,window),ionic.off("native.keyboardhide",onHide,window),ionic.off("native.showkeyboard",onShow,window),ionic.off("native.hidekeyboard",onHide,window)})}}),IonicModule.directive("ionList",["$timeout",function($timeout){return{restrict:"E",require:["ionList","^?$ionicScroll"],controller:"$ionicList",compile:function($element,$attr){var listEl=jqLite('<div class="list">').append($element.contents()).addClass($attr.type);return $element.append(listEl),function($scope,$element,$attrs,ctrls){var listCtrl=ctrls[0],scrollCtrl=ctrls[1];$timeout(function(){function setButtonShown(el,shown){shown()&&el.addClass("visible")||el.removeClass("active"),ionic.requestAnimationFrame(function(){shown()&&el.addClass("active")||el.removeClass("visible")})}var listView=listCtrl.listView=new ionic.views.ListView({el:$element[0],listEl:$element.children()[0],scrollEl:scrollCtrl&&scrollCtrl.element,scrollView:scrollCtrl&&scrollCtrl.scrollView,onReorder:function(el,oldIndex,newIndex){var itemScope=jqLite(el).scope();itemScope&&itemScope.$onReorder&&$timeout(function(){itemScope.$onReorder(oldIndex,newIndex)})},canSwipe:function(){return listCtrl.canSwipeItems()}});$scope.$on("$destroy",function(){listView&&(listView.deregister&&listView.deregister(),listView=null)}),isDefined($attr.canSwipe)&&$scope.$watch("!!("+$attr.canSwipe+")",function(value){listCtrl.canSwipeItems(value)}),isDefined($attr.showDelete)&&$scope.$watch("!!("+$attr.showDelete+")",function(value){listCtrl.showDelete(value)}),isDefined($attr.showReorder)&&$scope.$watch("!!("+$attr.showReorder+")",function(value){listCtrl.showReorder(value)}),$scope.$watch(function(){return listCtrl.showDelete()},function(isShown,wasShown){(isShown||wasShown)&&(isShown&&listCtrl.closeOptionButtons(),listCtrl.canSwipeItems(!isShown),$element.children().toggleClass("list-left-editing",isShown),$element.toggleClass("disable-pointer-events",isShown),setButtonShown(jqLite($element[0].getElementsByClassName("item-delete")),listCtrl.showDelete))}),$scope.$watch(function(){return listCtrl.showReorder()},function(isShown,wasShown){(isShown||wasShown)&&(isShown&&listCtrl.closeOptionButtons(),listCtrl.canSwipeItems(!isShown),$element.children().toggleClass("list-right-editing",isShown),$element.toggleClass("disable-pointer-events",isShown),setButtonShown(jqLite($element[0].getElementsByClassName("item-reorder")),listCtrl.showReorder))})})}}}}]),IonicModule.directive("menuClose",["$ionicHistory","$timeout",function($ionicHistory,$timeout){return{restrict:"AC",link:function($scope,$element){$element.bind("click",function(){var sideMenuCtrl=$element.inheritedData("$ionSideMenusController");sideMenuCtrl&&($ionicHistory.nextViewOptions({historyRoot:!0,disableAnimate:!0,expire:300}),$timeout(function(){$ionicHistory.nextViewOptions({historyRoot:!1,disableAnimate:!1})},300),sideMenuCtrl.close())})}}}]),IonicModule.directive("menuToggle",function(){return{restrict:"AC",link:function($scope,$element,$attr){$scope.$on("$ionicView.beforeEnter",function(ev,viewData){viewData.enableBack?$element.inheritedData("$ionSideMenusController").enableMenuWithBackViews()||$element.addClass("hide"):$element.removeClass("hide")}),$element.bind("click",function(){var sideMenuCtrl=$element.inheritedData("$ionSideMenusController");sideMenuCtrl&&sideMenuCtrl.toggle($attr.menuToggle)})}}}),IonicModule.directive("ionModal",[function(){return{restrict:"E",transclude:!0,replace:!0,controller:[function(){}],template:'<div class="modal-backdrop"><div class="modal-backdrop-bg"></div><div class="modal-wrapper" ng-transclude></div></div>'}}]),IonicModule.directive("ionModalView",function(){return{restrict:"E",compile:function(element){element.addClass("modal")}}}),IonicModule.directive("ionNavBackButton",["$ionicConfig","$document",function($ionicConfig,$document){return{restrict:"E",require:"^ionNavBar",compile:function(tElement,tAttrs){function hasIconClass(ele){return/ion-|icon/.test(ele.className)}var buttonEle=$document[0].createElement("button");for(var n in tAttrs.$attr)buttonEle.setAttribute(tAttrs.$attr[n],tAttrs[n]);tAttrs.ngClick||buttonEle.setAttribute("ng-click","$ionicGoBack()"),buttonEle.className="button back-button hide buttons "+(tElement.attr("class")||""),buttonEle.innerHTML=tElement.html()||"";for(var childNode,hasInnerText,hasButtonText,hasPreviousTitle,hasIcon=hasIconClass(tElement[0]),x=0;x<tElement[0].childNodes.length;x++)1===(childNode=tElement[0].childNodes[x]).nodeType?hasIconClass(childNode)?hasIcon=!0:childNode.classList.contains("default-title")?hasButtonText=!0:childNode.classList.contains("previous-title")&&(hasPreviousTitle=!0):hasInnerText||3!==childNode.nodeType||(hasInnerText=!!childNode.nodeValue.trim());var defaultIcon=$ionicConfig.backButton.icon();if(!hasIcon&&defaultIcon&&"none"!==defaultIcon&&(buttonEle.innerHTML='<i class="icon '+defaultIcon+'"></i> '+buttonEle.innerHTML,buttonEle.className+=" button-clear"),!hasInnerText){var buttonTextEle=$document[0].createElement("span");buttonTextEle.className="back-text",!hasButtonText&&$ionicConfig.backButton.text()&&(buttonTextEle.innerHTML+='<span class="default-title">'+$ionicConfig.backButton.text()+"</span>"),!hasPreviousTitle&&$ionicConfig.backButton.previousTitleText()&&(buttonTextEle.innerHTML+='<span class="previous-title"></span>'),buttonEle.appendChild(buttonTextEle)}return tElement.attr("class","hide"),tElement.empty(),{pre:function($scope,$element,$attr,navBarCtrl){navBarCtrl.navElement("backButton",buttonEle.outerHTML),buttonEle=null}}}}}]),IonicModule.directive("ionNavBar",function(){return{restrict:"E",controller:"$ionicNavBar",scope:!0,link:function($scope,$element,$attr,ctrl){ctrl.init()}}}),IonicModule.directive("ionNavButtons",["$document",function($document){return{require:"^ionNavBar",restrict:"E",compile:function(tElement,tAttrs){var side="left";/^primary|secondary|right$/i.test(tAttrs.side||"")&&(side=tAttrs.side.toLowerCase());var spanEle=$document[0].createElement("span");spanEle.className=side+"-buttons",spanEle.innerHTML=tElement.html();var navElementType=side+"Buttons";return tElement.attr("class","hide"),tElement.empty(),{pre:function($scope,$element,$attrs,navBarCtrl){var parentViewCtrl=$element.parent().data("$ionViewController");parentViewCtrl?parentViewCtrl.navElement(navElementType,spanEle.outerHTML):navBarCtrl.navElement(navElementType,spanEle.outerHTML),spanEle=null}}}}}]),IonicModule.directive("navDirection",["$ionicViewSwitcher",function($ionicViewSwitcher){return{restrict:"A",priority:1e3,link:function($scope,$element,$attr){$element.bind("click",function(){$ionicViewSwitcher.nextDirection($attr.navDirection)})}}}]),IonicModule.directive("ionNavTitle",["$document",function($document){return{require:"^ionNavBar",restrict:"E",compile:function(tElement,tAttrs){var spanEle=$document[0].createElement("span");for(var n in tAttrs.$attr)spanEle.setAttribute(tAttrs.$attr[n],tAttrs[n]);return spanEle.classList.add("nav-bar-title"),spanEle.innerHTML=tElement.html(),tElement.attr("class","hide"),tElement.empty(),{pre:function($scope,$element,$attrs,navBarCtrl){var parentViewCtrl=$element.parent().data("$ionViewController");parentViewCtrl?parentViewCtrl.navElement("title",spanEle.outerHTML):navBarCtrl.navElement("title",spanEle.outerHTML),spanEle=null}}}}}]),IonicModule.directive("navTransition",["$ionicViewSwitcher",function($ionicViewSwitcher){return{restrict:"A",priority:1e3,link:function($scope,$element,$attr){$element.bind("click",function(){$ionicViewSwitcher.nextTransition($attr.navTransition)})}}}]),IonicModule.directive("ionNavView",["$state","$ionicConfig",function($state,$ionicConfig){return{restrict:"E",terminal:!0,priority:2e3,transclude:!0,controller:"$ionicNavView",compile:function(tElement,tAttrs,transclude){return tElement.addClass("view-container"),ionic.DomUtil.cachedAttr(tElement,"nav-view-transition",$ionicConfig.views.transition()),function($scope,$element,$attr,navViewCtrl){function updateView(firstTime){var viewLocals=$state.$current&&$state.$current.locals[viewData.name];viewLocals&&(firstTime||viewLocals!==latestLocals)&&(latestLocals=viewLocals,viewData.state=viewLocals.$$state,navViewCtrl.register(viewLocals))}var latestLocals;transclude($scope,function(clone){$element.append(clone)});var viewData=navViewCtrl.init();$scope.$on("$stateChangeSuccess",function(){updateView(!1)}),$scope.$on("$viewContentLoading",function(){updateView(!1)}),updateView(!0)}}}}]),IonicModule.config(["$provide",function($provide){$provide.decorator("ngClickDirective",["$delegate",function($delegate){return $delegate.shift(),$delegate}])}]).factory("$ionicNgClick",["$parse",function($parse){return function(scope,element,clickExpr){var clickHandler=angular.isFunction(clickExpr)?clickExpr:$parse(clickExpr);element.on("click",function(event){scope.$apply(function(){clickHandler(scope,{$event:event})})}),element.onclick=noop}}]).directive("ngClick",["$ionicNgClick",function($ionicNgClick){return function(scope,element,attr){$ionicNgClick(scope,element,attr.ngClick)}}]).directive("ionStopEvent",function(){return{restrict:"A",link:function(scope,element,attr){element.bind(attr.ionStopEvent,eventStopPropagation)}}}),IonicModule.directive("ionPane",function(){return{restrict:"E",link:function(scope,element){element.addClass("pane")}}}),IonicModule.directive("ionPopover",[function(){return{restrict:"E",transclude:!0,replace:!0,controller:[function(){}],template:'<div class="popover-backdrop"><div class="popover-wrapper" ng-transclude></div></div>'}}]),IonicModule.directive("ionPopoverView",function(){return{restrict:"E",compile:function(element){element.append(jqLite('<div class="popover-arrow">')),element.addClass("popover")}}}),IonicModule.directive("ionRadio",function(){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<label class="item item-radio"><input type="radio" name="radio-group"><div class="radio-content"><div class="item-content disable-pointer-events" ng-transclude></div><i class="radio-icon disable-pointer-events icon ion-checkmark"></i></div></label>',compile:function(element,attr){attr.icon&&element.find("i").removeClass("ion-checkmark").addClass(attr.icon);var input=element.find("input");return forEach({name:attr.name,value:attr.value,disabled:attr.disabled,"ng-value":attr.ngValue,"ng-model":attr.ngModel,"ng-disabled":attr.ngDisabled,"ng-change":attr.ngChange,"ng-required":attr.ngRequired,required:attr.required},function(value,name){isDefined(value)&&input.attr(name,value)}),function(scope,element,attr){scope.getValue=function(){return scope.ngValue||attr.value}}}}}),IonicModule.directive("ionRefresher",[function(){return{restrict:"E",replace:!0,require:["?^$ionicScroll","ionRefresher"],controller:"$ionicRefresher",template:'<div class="scroll-refresher invisible" collection-repeat-ignore><div class="ionic-refresher-content" ng-class="{\'ionic-refresher-with-text\': pullingText || refreshingText}"><div class="icon-pulling" ng-class="{\'pulling-rotation-disabled\':disablePullingRotation}"><i class="icon {{pullingIcon}}"></i></div><div class="text-pulling" ng-bind-html="pullingText"></div><div class="icon-refreshing"><ion-spinner ng-if="showSpinner" icon="{{spinner}}"></ion-spinner><i ng-if="showIcon" class="icon {{refreshingIcon}}"></i></div><div class="text-refreshing" ng-bind-html="refreshingText"></div></div></div>',link:function($scope,$element,$attrs,ctrls){var scrollCtrl=ctrls[0],refresherCtrl=ctrls[1];!scrollCtrl||scrollCtrl.isNative()?refresherCtrl.init():($element[0].classList.add("js-scrolling"),scrollCtrl._setRefresher($scope,$element[0],refresherCtrl.getRefresherDomMethods()),$scope.$on("scroll.refreshComplete",function(){$scope.$evalAsync(function(){scrollCtrl.scrollView.finishPullToRefresh()})}))}}}]),IonicModule.directive("ionScroll",["$timeout","$controller","$ionicBind","$ionicConfig",function($timeout,$controller,$ionicBind,$ionicConfig){return{restrict:"E",scope:!0,controller:function(){},compile:function(element,attr){element.addClass("scroll-view ionic-scroll");var innerElement=jqLite('<div class="scroll"></div>');innerElement.append(element.contents()),element.append(innerElement);var nativeScrolling="false"!==attr.overflowScroll&&("true"===attr.overflowScroll||!$ionicConfig.scrolling.jsScrolling());return{pre:function($scope,$element,$attr){$ionicBind($scope,$attr,{direction:"@",paging:"@",$onScroll:"&onScroll",scroll:"@",scrollbarX:"@",scrollbarY:"@",zooming:"@",minZoom:"@",maxZoom:"@"}),$scope.direction=$scope.direction||"y",isDefined($attr.padding)&&$scope.$watch($attr.padding,function(newVal){innerElement.toggleClass("padding",!!newVal)}),!0===$scope.$eval($scope.paging)&&innerElement.addClass("scroll-paging"),$scope.direction||($scope.direction="y");var isPaging=!0===$scope.$eval($scope.paging);nativeScrolling&&$element.addClass("overflow-scroll"),$element.addClass("scroll-"+$scope.direction);var scrollViewOptions={el:$element[0],delegateHandle:$attr.delegateHandle,locking:"true"===($attr.locking||"true"),bouncing:$scope.$eval($attr.hasBouncing),paging:isPaging,scrollbarX:!1!==$scope.$eval($scope.scrollbarX),scrollbarY:!1!==$scope.$eval($scope.scrollbarY),scrollingX:$scope.direction.indexOf("x")>=0,scrollingY:$scope.direction.indexOf("y")>=0,zooming:!0===$scope.$eval($scope.zooming),maxZoom:$scope.$eval($scope.maxZoom)||3,minZoom:$scope.$eval($scope.minZoom)||.5,preventDefault:!0,nativeScrolling:nativeScrolling};isPaging&&(scrollViewOptions.speedMultiplier=.8,scrollViewOptions.bouncing=!1),$controller("$ionicScroll",{$scope:$scope,scrollViewOptions:scrollViewOptions})}}}}}]),IonicModule.directive("ionSideMenu",function(){return{restrict:"E",require:"^ionSideMenus",scope:!0,compile:function(element,attr){return angular.isUndefined(attr.isEnabled)&&attr.$set("isEnabled","true"),angular.isUndefined(attr.width)&&attr.$set("width","275"),element.addClass("menu menu-"+attr.side),function($scope,$element,$attr,sideMenuCtrl){$scope.side=$attr.side||"left";var sideMenu=sideMenuCtrl[$scope.side]=new ionic.views.SideMenu({width:attr.width,el:$element[0],isEnabled:!0});$scope.$watch($attr.width,function(val){var numberVal=+val;numberVal&&numberVal==val&&sideMenu.setWidth(+val)}),$scope.$watch($attr.isEnabled,function(val){sideMenu.setIsEnabled(!!val)})}}}}),IonicModule.directive("ionSideMenuContent",["$timeout","$ionicGesture","$window",function($timeout,$ionicGesture,$window){return{restrict:"EA",require:"^ionSideMenus",scope:!0,compile:function(element,attr){return element.addClass("menu-content pane"),{pre:function($scope,$element,$attr,sideMenuCtrl){function onContentTap(gestureEvt){0!==sideMenuCtrl.getOpenAmount()?(sideMenuCtrl.close(),gestureEvt.gesture.srcEvent.preventDefault(),startCoord=null,primaryScrollAxis=null):startCoord||(startCoord=ionic.tap.pointerCoord(gestureEvt.gesture.srcEvent))}function onDragX(e){sideMenuCtrl.isDraggableTarget(e)&&"x"==getPrimaryScrollAxis(e)&&(sideMenuCtrl._handleDrag(e),e.gesture.srcEvent.preventDefault())}function onDragY(e){"x"==getPrimaryScrollAxis(e)&&e.gesture.srcEvent.preventDefault()}function onDragRelease(e){sideMenuCtrl._endDrag(e),startCoord=null,primaryScrollAxis=null}function getPrimaryScrollAxis(gestureEvt){if(primaryScrollAxis)return primaryScrollAxis;if(gestureEvt&&gestureEvt.gesture){if(startCoord){var endCoord=ionic.tap.pointerCoord(gestureEvt.gesture.srcEvent),xDistance=Math.abs(endCoord.x-startCoord.x),yDistance=Math.abs(endCoord.y-startCoord.y),scrollAxis=xDistance<yDistance?"y":"x";return Math.max(xDistance,yDistance)>30&&(primaryScrollAxis=scrollAxis),scrollAxis}startCoord=ionic.tap.pointerCoord(gestureEvt.gesture.srcEvent)}return"y"}var startCoord=null,primaryScrollAxis=null;isDefined(attr.dragContent)?$scope.$watch(attr.dragContent,function(value){sideMenuCtrl.canDragContent(value)}):sideMenuCtrl.canDragContent(!0),isDefined(attr.edgeDragThreshold)&&$scope.$watch(attr.edgeDragThreshold,function(value){sideMenuCtrl.edgeDragThreshold(value)});var content={element:element[0],onDrag:function(){},endDrag:function(){},setCanScroll:function(canScroll){var c=$element[0].querySelector(".scroll");if(c){var content=angular.element(c.parentElement);if(content){var scrollScope=content.scope();scrollScope.scrollCtrl&&scrollScope.scrollCtrl.freezeScrollShut(!canScroll)}}},getTranslateX:function(){return $scope.sideMenuContentTranslateX||0},setTranslateX:ionic.animationFrameThrottle(function(amount){var xTransform=content.offsetX+amount;$element[0].style[ionic.CSS.TRANSFORM]="translate3d("+xTransform+"px,0,0)",$timeout(function(){$scope.sideMenuContentTranslateX=amount})}),setMarginLeft:ionic.animationFrameThrottle(function(amount){amount?(amount=parseInt(amount,10),$element[0].style[ionic.CSS.TRANSFORM]="translate3d("+amount+"px,0,0)",$element[0].style.width=$window.innerWidth-amount+"px",content.offsetX=amount):($element[0].style[ionic.CSS.TRANSFORM]="translate3d(0,0,0)",$element[0].style.width="",content.offsetX=0)}),setMarginRight:ionic.animationFrameThrottle(function(amount){amount?(amount=parseInt(amount,10),$element[0].style.width=$window.innerWidth-amount+"px",content.offsetX=amount):($element[0].style.width="",content.offsetX=0),$element[0].style[ionic.CSS.TRANSFORM]="translate3d(0,0,0)"}),setMarginLeftAndRight:ionic.animationFrameThrottle(function(amountLeft,amountRight){var amount=(amountLeft=amountLeft&&parseInt(amountLeft,10)||0)+(amountRight=amountRight&&parseInt(amountRight,10)||0);amount>0?($element[0].style[ionic.CSS.TRANSFORM]="translate3d("+amountLeft+"px,0,0)",$element[0].style.width=$window.innerWidth-amount+"px",content.offsetX=amountLeft):($element[0].style[ionic.CSS.TRANSFORM]="translate3d(0,0,0)",$element[0].style.width="",content.offsetX=0)}),enableAnimation:function(){$scope.animationEnabled=!0,$element[0].classList.add("menu-animated")},disableAnimation:function(){$scope.animationEnabled=!1,$element[0].classList.remove("menu-animated")},offsetX:0};sideMenuCtrl.setContent(content);var gestureOpts={stop_browser_behavior:!1};gestureOpts.prevent_default_directions=["left","right"];var contentTapGesture=$ionicGesture.on("tap",onContentTap,$element,gestureOpts),dragRightGesture=$ionicGesture.on("dragright",onDragX,$element,gestureOpts),dragLeftGesture=$ionicGesture.on("dragleft",onDragX,$element,gestureOpts),dragUpGesture=$ionicGesture.on("dragup",onDragY,$element,gestureOpts),dragDownGesture=$ionicGesture.on("dragdown",onDragY,$element,gestureOpts),releaseGesture=$ionicGesture.on("release",onDragRelease,$element,gestureOpts);$scope.$on("$destroy",function(){content&&(content.element=null,content=null),$ionicGesture.off(dragLeftGesture,"dragleft",onDragX),$ionicGesture.off(dragRightGesture,"dragright",onDragX),$ionicGesture.off(dragUpGesture,"dragup",onDragY),$ionicGesture.off(dragDownGesture,"dragdown",onDragY),$ionicGesture.off(releaseGesture,"release",onDragRelease),$ionicGesture.off(contentTapGesture,"tap",onContentTap)})}}}}}]),IonicModule.directive("ionSideMenus",["$ionicBody",function($ionicBody){return{restrict:"ECA",controller:"$ionicSideMenus",compile:function(element,attr){return attr.$set("class",(attr.class||"")+" view"),{pre:function($scope,$element,$attrs,ctrl){ctrl.enableMenuWithBackViews($scope.$eval($attrs.enableMenuWithBackViews)),$scope.$on("$ionicExposeAside",function(evt,isAsideExposed){$scope.$exposeAside||($scope.$exposeAside={}),$scope.$exposeAside.active=isAsideExposed,$ionicBody.enableClass(isAsideExposed,"aside-open")}),$scope.$on("$ionicView.beforeEnter",function(ev,d){d.historyId&&($scope.$activeHistoryId=d.historyId)}),$scope.$on("$destroy",function(){$ionicBody.removeClass("menu-open","aside-open")})}}}}}]),IonicModule.directive("ionSlideBox",["$animate","$timeout","$compile","$ionicSlideBoxDelegate","$ionicHistory","$ionicScrollDelegate",function($animate,$timeout,$compile,$ionicSlideBoxDelegate,$ionicHistory,$ionicScrollDelegate){return{restrict:"E",replace:!0,transclude:!0,scope:{autoPlay:"=",doesContinue:"@",slideInterval:"@",showPager:"@",pagerClick:"&",disableScroll:"@",onSlideChanged:"&",activeSlide:"=?",bounce:"@"},controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function freezeAllScrolls(shouldFreeze){shouldFreeze&&!_this.isScrollFreeze?$ionicScrollDelegate.freezeAllScrolls(shouldFreeze):!shouldFreeze&&_this.isScrollFreeze&&$ionicScrollDelegate.freezeAllScrolls(!1),_this.isScrollFreeze=shouldFreeze}var _this=this,continuous=!0===$scope.$eval($scope.doesContinue),bouncing=!1!==$scope.$eval($scope.bounce),slideInterval=!!isDefined($attrs.autoPlay)&&!!$scope.autoPlay?$scope.$eval($scope.slideInterval)||4e3:0,slider=new ionic.views.Slider({el:$element[0],auto:slideInterval,continuous:continuous,startSlide:$scope.activeSlide,bouncing:bouncing,slidesChanged:function(){$scope.currentSlide=slider.currentIndex(),$timeout(function(){})},callback:function(slideIndex){$scope.currentSlide=slideIndex,$scope.onSlideChanged({index:$scope.currentSlide,$index:$scope.currentSlide}),$scope.$parent.$broadcast("slideBox.slideChanged",slideIndex),$scope.activeSlide=slideIndex,$timeout(function(){})},onDrag:function(){freezeAllScrolls(!0)},onDragEnd:function(){freezeAllScrolls(!1)}});slider.enableSlide(!0!==$scope.$eval($attrs.disableScroll)),$scope.$watch("activeSlide",function(nv){isDefined(nv)&&slider.slide(nv)}),$scope.$on("slideBox.nextSlide",function(){slider.next()}),$scope.$on("slideBox.prevSlide",function(){slider.prev()}),$scope.$on("slideBox.setSlide",function(e,index){slider.slide(index)}),this.__slider=slider;var deregisterInstance=$ionicSlideBoxDelegate._registerInstance(slider,$attrs.delegateHandle,function(){return $ionicHistory.isActiveScope($scope)});$scope.$on("$destroy",function(){deregisterInstance(),slider.kill()}),this.slidesCount=function(){return slider.slidesCount()},this.onPagerClick=function(index){$scope.pagerClick({index:index})},$timeout(function(){slider.load()})}],template:'<div class="slider"><div class="slider-slides" ng-transclude></div></div>',link:function($scope,$element,$attr){function getPager(){if(!pager){var childScope=$scope.$new();pager=jqLite("<ion-pager></ion-pager>"),$element.append(pager),pager=$compile(pager)(childScope)}return pager}$animate.enabled($element,!1),isDefined($attr.showPager)||($scope.showPager=!0,getPager().toggleClass("hide",!1)),$attr.$observe("showPager",function(show){void 0!==show&&(show=$scope.$eval(show),getPager().toggleClass("hide",!show))});var pager}}}]).directive("ionSlide",function(){return{restrict:"E",require:"?^ionSlideBox",compile:function(element){element.addClass("slider-slide")}}}).directive("ionPager",function(){return{restrict:"E",replace:!0,require:"^ionSlideBox",template:'<div class="slider-pager"><span class="slider-pager-page" ng-repeat="slide in numSlides() track by $index" ng-class="{active: $index == currentSlide}" ng-click="pagerClick($index)"><i class="icon ion-record"></i></span></div>',link:function($scope,$element,$attr,slideBox){var selectPage=function(index){for(var children=$element[0].children,length=children.length,i=0;i<length;i++)i==index?children[i].classList.add("active"):children[i].classList.remove("active")};$scope.pagerClick=function(index){slideBox.onPagerClick(index)},$scope.numSlides=function(){return new Array(slideBox.slidesCount())},$scope.$watch("currentSlide",function(v){selectPage(v)})}}}),IonicModule.directive("ionSlides",["$animate","$timeout","$compile",function($animate,$timeout,$compile){return{restrict:"E",transclude:!0,scope:{options:"=",slider:"="},template:'<div class="swiper-container"><div class="swiper-wrapper" ng-transclude></div><div ng-hide="!showPager" class="swiper-pagination"></div></div>',controller:["$scope","$element",function($scope,$element){var _this=this;this.update=function(){$timeout(function(){if(_this.__slider){_this.__slider.update(),_this._options.loop&&_this.__slider.createLoop();var slidesLength=_this.__slider.slides.length;slidesLength>10&&($scope.showPager=!1),_this.__slider.activeIndex>slidesLength-1&&_this.__slider.slideTo(slidesLength-1)}})},this.rapidUpdate=ionic.debounce(function(){_this.update()},50),this.getSlider=function(){return _this.__slider};var options=$scope.options||{},newOptions=angular.extend({pagination:$element.children().children()[1],paginationClickable:!0,lazyLoading:!0,preloadImages:!1},options);this._options=newOptions,$timeout(function(){var slider=new ionic.views.Swiper($element.children()[0],newOptions,$scope,$compile);$scope.$emit("$ionicSlides.sliderInitialized",{slider:slider}),_this.__slider=slider,$scope.slider=_this.__slider,$scope.$on("$destroy",function(){slider.destroy(),_this.__slider=null})}),$timeout(function(){_this.rapidUpdate()},200)}],link:function($scope){$scope.showPager=!0}}}]).directive("ionSlidePage",[function(){return{restrict:"E",require:"?^ionSlides",transclude:!0,replace:!0,template:'<div class="swiper-slide" ng-transclude></div>',link:function($scope,$element,$attr,ionSlidesCtrl){ionSlidesCtrl.rapidUpdate(),$scope.$on("$destroy",function(){ionSlidesCtrl.rapidUpdate()})}}}]),IonicModule.directive("ionSpinner",function(){return{restrict:"E",controller:"$ionicSpinner",link:function($scope,$element,$attrs,ctrl){var spinnerName=ctrl.init();$element.addClass("spinner spinner-"+spinnerName),$element.on("$destroy",function(){ctrl.stop()})}}}),IonicModule.directive("ionTab",["$compile","$ionicConfig","$ionicBind","$ionicViewSwitcher",function($compile,$ionicConfig,$ionicBind,$ionicViewSwitcher){function attrStr(k,v){return isDefined(v)?" "+k+'="'+v+'"':""}return{restrict:"E",require:["^ionTabs","ionTab"],controller:"$ionicTab",scope:!0,compile:function(element,attr){for(var tabNavTemplate="<ion-tab-nav"+attrStr("ng-click",attr.ngClick)+attrStr("title",attr.title)+attrStr("icon",attr.icon)+attrStr("icon-on",attr.iconOn)+attrStr("icon-off",attr.iconOff)+attrStr("badge",attr.badge)+attrStr("badge-style",attr.badgeStyle)+attrStr("hidden",attr.hidden)+attrStr("disabled",attr.disabled)+attrStr("class",attr.class)+"></ion-tab-nav>",tabContentEle=document.createElement("div"),x=0;x<element[0].children.length;x++)tabContentEle.appendChild(element[0].children[x].cloneNode(!0));var childElementCount=tabContentEle.childElementCount;element.empty();var navViewName,isNavView;return childElementCount&&("ION-NAV-VIEW"===tabContentEle.children[0].tagName&&(navViewName=tabContentEle.children[0].getAttribute("name"),tabContentEle.children[0].classList.add("view-container"),isNavView=!0),1===childElementCount&&(tabContentEle=tabContentEle.children[0]),isNavView||tabContentEle.classList.add("pane"),tabContentEle.classList.add("tab-content")),function($scope,$element,$attr,ctrls){function selectIfMatchesState(){tabCtrl.tabMatchesState()&&tabsCtrl.select($scope,!1)}function destroyTab(){childScope&&childScope.$destroy(),isTabContentAttached&&childElement&&childElement.remove(),tabContentEle.innerHTML="",isTabContentAttached=childScope=childElement=null}var childScope,childElement,tabsCtrl=ctrls[0],tabCtrl=ctrls[1],isTabContentAttached=!1;$scope.$tabSelected=!1,$ionicBind($scope,$attr,{onSelect:"&",onDeselect:"&",title:"@",uiSref:"@",href:"@"}),tabsCtrl.add($scope),$scope.$on("$destroy",function(){$scope.$tabsDestroy||tabsCtrl.remove($scope),tabNavElement.isolateScope().$destroy(),tabNavElement.remove(),tabNavElement=tabContentEle=childElement=null}),$element[0].removeAttribute("title"),navViewName&&(tabCtrl.navViewName=$scope.navViewName=navViewName),$scope.$on("$stateChangeSuccess",selectIfMatchesState),selectIfMatchesState();var tabNavElement=jqLite(tabNavTemplate);tabNavElement.data("$ionTabsController",tabsCtrl),tabNavElement.data("$ionTabController",tabCtrl),tabsCtrl.$tabsElement.append($compile(tabNavElement)($scope)),$scope.$watch("$tabSelected",function(isSelected){isSelected&&childElementCount?(isTabContentAttached||(childScope=$scope.$new(),childElement=jqLite(tabContentEle),$ionicViewSwitcher.viewEleIsActive(childElement,!0),tabsCtrl.$element.append(childElement),$compile(childElement)(childScope),isTabContentAttached=!0),$ionicViewSwitcher.viewEleIsActive(childElement,!0)):isTabContentAttached&&childElement&&($ionicConfig.views.maxCache()>0?$ionicViewSwitcher.viewEleIsActive(childElement,!1):destroyTab())}),$scope.$on("$ionicView.afterEnter",function(){$ionicViewSwitcher.viewEleIsActive(childElement,$scope.$tabSelected)}),$scope.$on("$ionicView.clearCache",function(){$scope.$tabSelected||destroyTab()})}}}}]),IonicModule.directive("ionTabNav",[function(){return{restrict:"E",replace:!0,require:["^ionTabs","^ionTab"],template:"<a ng-class=\"{'has-badge':badge, 'tab-hidden':isHidden(), 'tab-item-active': isTabActive()}\" "+' ng-disabled="disabled()" class="tab-item"><span class="badge {{badgeStyle}}" ng-if="badge">{{badge}}</span><i class="icon {{getIcon()}}" ng-if="getIcon()"></i><span class="tab-title" ng-bind-html="title"></span></a>',scope:{title:"@",icon:"@",iconOn:"@",iconOff:"@",badge:"=",hidden:"@",disabled:"&",badgeStyle:"@",class:"@"},link:function($scope,$element,$attrs,ctrls){var tabsCtrl=ctrls[0],tabCtrl=ctrls[1];$element[0].removeAttribute("title"),$scope.selectTab=function(e){e.preventDefault(),tabsCtrl.select(tabCtrl.$scope,!0)},$attrs.ngClick||$element.on("click",function(event){$scope.$apply(function(){$scope.selectTab(event)})}),$scope.isHidden=function(){return"true"===$attrs.hidden||!0===$attrs.hidden},$scope.getIconOn=function(){return $scope.iconOn||$scope.icon},$scope.getIconOff=function(){return $scope.iconOff||$scope.icon},$scope.isTabActive=function(){return tabsCtrl.selectedTab()===tabCtrl.$scope},$scope.getIcon=function(){return tabsCtrl.selectedTab()===tabCtrl.$scope?$scope.iconOn||$scope.icon:$scope.iconOff||$scope.icon}}}}]),IonicModule.directive("ionTabs",["$ionicTabsDelegate","$ionicConfig",function($ionicTabsDelegate,$ionicConfig){return{restrict:"E",scope:!0,controller:"$ionicTabs",compile:function(tElement){var innerElement=jqLite('<div class="tab-nav tabs">');return innerElement.append(tElement.contents()),tElement.append(innerElement).addClass("tabs-"+$ionicConfig.tabs.position()+" tabs-"+$ionicConfig.tabs.style()),{pre:function($scope,$element,$attr,tabsCtrl){function emitLifecycleEvent(ev,data){ev.stopPropagation();var previousSelectedTab=tabsCtrl.previousSelectedTab();previousSelectedTab&&previousSelectedTab.$broadcast(ev.name.replace("NavView","Tabs"),data)}var deregisterInstance=$ionicTabsDelegate._registerInstance(tabsCtrl,$attr.delegateHandle,tabsCtrl.hasActiveScope);tabsCtrl.$scope=$scope,tabsCtrl.$element=$element,tabsCtrl.$tabsElement=jqLite($element[0].querySelector(".tabs")),$scope.$watch(function(){return $element[0].className},function(value){var isTabsTop=-1!==value.indexOf("tabs-top"),isHidden=-1!==value.indexOf("tabs-item-hide");$scope.$hasTabs=!isTabsTop&&!isHidden,$scope.$hasTabsTop=isTabsTop&&!isHidden,$scope.$emit("$ionicTabs.top",$scope.$hasTabsTop)}),$scope.$on("$ionicNavView.beforeLeave",emitLifecycleEvent),$scope.$on("$ionicNavView.afterLeave",emitLifecycleEvent),$scope.$on("$ionicNavView.leave",emitLifecycleEvent),$scope.$on("$destroy",function(){$scope.$tabsDestroy=!0,deregisterInstance(),tabsCtrl.$tabsElement=tabsCtrl.$element=tabsCtrl.$scope=innerElement=null,delete $scope.$hasTabs,delete $scope.$hasTabsTop})},post:function($scope,$element,$attr,tabsCtrl){tabsCtrl.selectedTab()||tabsCtrl.select(0)}}}}}]),IonicModule.directive("ionTitle",[function(){return{restrict:"E",compile:function(element){element.addClass("title")}}}]),IonicModule.directive("ionToggle",["$timeout","$ionicConfig",function($timeout,$ionicConfig){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<div class="item item-toggle"><div ng-transclude></div><label class="toggle"><input type="checkbox"><div class="track"><div class="handle"></div></div></label></div>',compile:function(element,attr){var input=element.find("input");return forEach({name:attr.name,"ng-value":attr.ngValue,"ng-model":attr.ngModel,"ng-checked":attr.ngChecked,"ng-disabled":attr.ngDisabled,"ng-true-value":attr.ngTrueValue,"ng-false-value":attr.ngFalseValue,"ng-change":attr.ngChange,"ng-required":attr.ngRequired,required:attr.required},function(value,name){isDefined(value)&&input.attr(name,value)}),attr.toggleClass&&element[0].getElementsByTagName("label")[0].classList.add(attr.toggleClass),element.addClass("toggle-"+$ionicConfig.form.toggle()),function($scope,$element){var el=$element[0].getElementsByTagName("label")[0],checkbox=el.children[0],track=el.children[1],handle=track.children[0],ngModelController=jqLite(checkbox).controller("ngModel");$scope.toggle=new ionic.views.Toggle({el:el,track:track,checkbox:checkbox,handle:handle,onChange:function(){ngModelController&&(ngModelController.$setViewValue(checkbox.checked),$scope.$apply())}}),$scope.$on("$destroy",function(){$scope.toggle.destroy()})}}}}]),IonicModule.directive("ionView",function(){return{restrict:"EA",priority:1e3,controller:"$ionicView",compile:function(tElement){return tElement.addClass("pane"),tElement[0].removeAttribute("title"),function($scope,$element,$attrs,viewCtrl){viewCtrl.init()}}}})}(),angular.module("ngCordova",["ngCordova.plugins"]),angular.module("ngCordova.plugins.actionSheet",[]).factory("$cordovaActionSheet",["$q","$window",function(e,n){return{show:function(t){var o=e.defer();return n.plugins.actionsheet.show(t,function(e){o.resolve(e)}),o.promise},hide:function(){return n.plugins.actionsheet.hide()}}}]),angular.module("ngCordova.plugins.adMob",[]).factory("$cordovaAdMob",["$q","$window",function(e,n){return{createBannerView:function(t){var o=e.defer();return n.plugins.AdMob.createBannerView(t,function(){o.resolve()},function(){o.reject()}),o.promise},createInterstitialView:function(t){var o=e.defer();return n.plugins.AdMob.createInterstitialView(t,function(){o.resolve()},function(){o.reject()}),o.promise},requestAd:function(t){var o=e.defer();return n.plugins.AdMob.requestAd(t,function(){o.resolve()},function(){o.reject()}),o.promise},showAd:function(t){var o=e.defer();return n.plugins.AdMob.showAd(t,function(){o.resolve()},function(){o.reject()}),o.promise},requestInterstitialAd:function(t){var o=e.defer();return n.plugins.AdMob.requestInterstitialAd(t,function(){o.resolve()},function(){o.reject()}),o.promise}}}]),angular.module("ngCordova.plugins.appAvailability",[]).factory("$cordovaAppAvailability",["$q",function(e){return{check:function(n){var t=e.defer();return appAvailability.check(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.appRate",[]).provider("$cordovaAppRate",[function(){this.setPreferences=function(e){e&&angular.isObject(e)&&(AppRate.preferences.useLanguage=e.language||null,AppRate.preferences.displayAppName=e.appName||"",AppRate.preferences.promptAgainForEachNewVersion=e.promptForNewVersion||!0,AppRate.preferences.openStoreInApp=e.openStoreInApp||!1,AppRate.preferences.usesUntilPrompt=e.usesUntilPrompt||3,AppRate.preferences.useCustomRateDialog=e.useCustomRateDialog||!1,AppRate.preferences.storeAppURL.ios=e.iosURL||null,AppRate.preferences.storeAppURL.android=e.androidURL||null,AppRate.preferences.storeAppURL.blackberry=e.blackberryURL||null,AppRate.preferences.storeAppURL.windows8=e.windowsURL||null)},this.setCustomLocale=function(e){var n={title:"Rate %@",message:"If you enjoy using %@, would you mind taking a moment to rate it? It won’t take more than a minute. Thanks for your support!",cancelButtonLabel:"No, Thanks",laterButtonLabel:"Remind Me Later",rateButtonLabel:"Rate It Now"};n=angular.extend(n,e),AppRate.preferences.customLocale=n},this.$get=["$q",function(e){return{promptForRating:function(n){var t=e.defer(),o=AppRate.promptForRating(n);return t.resolve(o),t.promise},navigateToAppStore:function(){var n=e.defer(),t=AppRate.navigateToAppStore();return n.resolve(t),n.promise},onButtonClicked:function(e){AppRate.onButtonClicked=function(n){e.call(this,n)}},onRateDialogShow:function(e){AppRate.onRateDialogShow=e()}}}]}]),angular.module("ngCordova.plugins.appVersion",[]).factory("$cordovaAppVersion",["$q",function(e){return{getAppVersion:function(){var n=e.defer();return cordova.getAppVersion(function(e){n.resolve(e)}),n.promise}}}]),angular.module("ngCordova.plugins.backgroundGeolocation",[]).factory("$cordovaBackgroundGeolocation",["$q","$window",function(e,n){return{init:function(){n.navigator.geolocation.getCurrentPosition(function(e){return e})},configure:function(t){this.init();var o=e.defer();return n.plugins.backgroundGeoLocation.configure(function(e){o.notify(e),n.plugins.backgroundGeoLocation.finish()},function(e){o.reject(e)},t),this.start(),o.promise},start:function(){var t=e.defer();return n.plugins.backgroundGeoLocation.start(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},stop:function(){var t=e.defer();return n.plugins.backgroundGeoLocation.stop(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.badge",[]).factory("$cordovaBadge",["$q",function(e){return{hasPermission:function(){var n=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?n.resolve(!0):n.reject("You do not have permission")}),n.promise},promptForPermission:function(){return cordova.plugins.notification.badge.promptForPermission()},set:function(n){var t=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?t.resolve(cordova.plugins.notification.badge.set(n)):t.reject("You do not have permission to set Badge")}),t.promise},get:function(){var n=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?cordova.plugins.notification.badge.get(function(e){n.resolve(e)}):n.reject("You do not have permission to get Badge")}),n.promise},clear:function(){var n=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?n.resolve(cordova.plugins.notification.badge.clear()):n.reject("You do not have permission to clear Badge")}),n.promise},configure:function(e){return cordova.plugins.notification.badge.configure(e)}}}]),angular.module("ngCordova.plugins.barcodeScanner",[]).factory("$cordovaBarcodeScanner",["$q",function(e){return{scan:function(n){var t=e.defer();return cordova.plugins.barcodeScanner.scan(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},encode:function(n,t){var o=e.defer();return n=n||"TEXT_TYPE",cordova.plugins.barcodeScanner.encode(n,t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]),angular.module("ngCordova.plugins.batteryStatus",[]).factory("$cordovaBatteryStatus",["$rootScope","$window","$timeout",function(e,n,t){var o=function(n){t(function(){e.$broadcast("$cordovaBatteryStatus:status",n)})},r=function(n){t(function(){e.$broadcast("$cordovaBatteryStatus:critical",n)})},i=function(n){t(function(){e.$broadcast("$cordovaBatteryStatus:low",n)})};return document.addEventListener("deviceready",function(){navigator.battery&&(n.addEventListener("batterystatus",o,!1),n.addEventListener("batterycritical",r,!1),n.addEventListener("batterylow",i,!1))},!1),!0}]).run(["$cordovaBatteryStatus",function(){}]),angular.module("ngCordova.plugins.ble",[]).factory("$cordovaBLE",["$q",function(e){return{scan:function(n,t){var o=e.defer();return ble.scan(n,t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},connect:function(n){var t=e.defer();return ble.connect(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},disconnect:function(n){var t=e.defer();return ble.disconnect(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},read:function(n,t,o){var r=e.defer();return ble.read(n,t,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},write:function(n,t,o,r){var i=e.defer();return ble.write(n,t,o,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},writeCommand:function(n,t,o,r){var i=e.defer();return ble.writeCommand(n,t,o,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},startNotification:function(n,t,o){var r=e.defer();return ble.startNotification(n,t,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},stopNotification:function(n,t,o){var r=e.defer();return ble.stopNotification(n,t,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},isConnected:function(n){var t=e.defer();return ble.isConnected(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},isEnabled:function(){var n=e.defer();return ble.isEnabled(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.bluetoothSerial",[]).factory("$cordovaBluetoothSerial",["$q","$window",function(e,n){return{connect:function(t){var o=e.defer();return n.bluetoothSerial.connect(t,function(){o.resolve()},function(e){o.reject(e)}),o.promise},connectInsecure:function(t){var o=e.defer();return n.bluetoothSerial.connectInsecure(t,function(){o.resolve()},function(e){o.reject(e)}),o.promise},disconnect:function(){var t=e.defer();return n.bluetoothSerial.disconnect(function(){t.resolve()},function(e){t.reject(e)}),t.promise},list:function(){var t=e.defer();return n.bluetoothSerial.list(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},discoverUnpaired:function(){var t=e.defer();return n.bluetoothSerial.discoverUnpaired(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},setDeviceDiscoveredListener:function(){var t=e.defer();return n.bluetoothSerial.setDeviceDiscoveredListener(function(e){t.notify(e)}),t.promise},clearDeviceDiscoveredListener:function(){n.bluetoothSerial.clearDeviceDiscoveredListener()},showBluetoothSettings:function(){var t=e.defer();return n.bluetoothSerial.showBluetoothSettings(function(){t.resolve()},function(e){t.reject(e)}),t.promise},isEnabled:function(){var t=e.defer();return n.bluetoothSerial.isEnabled(function(){t.resolve()},function(){t.reject()}),t.promise},enable:function(){var t=e.defer();return n.bluetoothSerial.enable(function(){t.resolve()},function(){t.reject()}),t.promise},isConnected:function(){var t=e.defer();return n.bluetoothSerial.isConnected(function(){t.resolve()},function(){t.reject()}),t.promise},available:function(){var t=e.defer();return n.bluetoothSerial.available(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},read:function(){var t=e.defer();return n.bluetoothSerial.read(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},readUntil:function(t){var o=e.defer();return n.bluetoothSerial.readUntil(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},write:function(t){var o=e.defer();return n.bluetoothSerial.write(t,function(){o.resolve()},function(e){o.reject(e)}),o.promise},subscribe:function(t){var o=e.defer();return n.bluetoothSerial.subscribe(t,function(e){o.notify(e)},function(e){o.reject(e)}),o.promise},subscribeRawData:function(){var t=e.defer();return n.bluetoothSerial.subscribeRawData(function(e){t.notify(e)},function(e){t.reject(e)}),t.promise},unsubscribe:function(){var t=e.defer();return n.bluetoothSerial.unsubscribe(function(){t.resolve()},function(e){t.reject(e)}),t.promise},unsubscribeRawData:function(){var t=e.defer();return n.bluetoothSerial.unsubscribeRawData(function(){t.resolve()},function(e){t.reject(e)}),t.promise},clear:function(){var t=e.defer();return n.bluetoothSerial.clear(function(){t.resolve()},function(e){t.reject(e)}),t.promise},readRSSI:function(){var t=e.defer();return n.bluetoothSerial.readRSSI(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.brightness",[]).factory("$cordovaBrightness",["$q","$window",function(e,n){return{get:function(){var t=e.defer();return n.cordova.plugins.brightness.getBrightness(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},set:function(t){var o=e.defer();return n.cordova.plugins.brightness.setBrightness(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},setKeepScreenOn:function(t){var o=e.defer();return n.cordova.plugins.brightness.setKeepScreenOn(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]),angular.module("ngCordova.plugins.calendar",[]).factory("$cordovaCalendar",["$q","$window",function(e,n){return{createCalendar:function(t){var o=e.defer(),r=n.plugins.calendar.getCreateCalendarOptions();return"string"==typeof t?r.calendarName=t:r=angular.extend(r,t),n.plugins.calendar.createCalendar(r,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},deleteCalendar:function(t){var o=e.defer();return n.plugins.calendar.deleteCalendar(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},createEvent:function(t){var o=e.defer(),r={title:null,location:null,notes:null,startDate:null,endDate:null};return r=angular.extend(r,t),n.plugins.calendar.createEvent(r.title,r.location,r.notes,new Date(r.startDate),new Date(r.endDate),function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},createEventWithOptions:function(t){var o=e.defer(),r=[],i=window.plugins.calendar.getCalendarOptions(),a={title:null,location:null,notes:null,startDate:null,endDate:null};r=Object.keys(a);for(var c in t)-1===r.indexOf(c)?i[c]=t[c]:a[c]=t[c];return n.plugins.calendar.createEventWithOptions(a.title,a.location,a.notes,new Date(a.startDate),new Date(a.endDate),i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},createEventInteractively:function(t){var o=e.defer(),r={title:null,location:null,notes:null,startDate:null,endDate:null};return r=angular.extend(r,t),n.plugins.calendar.createEventInteractively(r.title,r.location,r.notes,new Date(r.startDate),new Date(r.endDate),function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},createEventInNamedCalendar:function(t){var o=e.defer(),r={title:null,location:null,notes:null,startDate:null,endDate:null,calendarName:null};return r=angular.extend(r,t),n.plugins.calendar.createEventInNamedCalendar(r.title,r.location,r.notes,new Date(r.startDate),new Date(r.endDate),r.calendarName,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},findEvent:function(t){var o=e.defer(),r={title:null,location:null,notes:null,startDate:null,endDate:null};return r=angular.extend(r,t),n.plugins.calendar.findEvent(r.title,r.location,r.notes,new Date(r.startDate),new Date(r.endDate),function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},listEventsInRange:function(t,o){var r=e.defer();return n.plugins.calendar.listEventsInRange(t,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},listCalendars:function(){var t=e.defer();return n.plugins.calendar.listCalendars(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},findAllEventsInNamedCalendar:function(t){var o=e.defer();return n.plugins.calendar.findAllEventsInNamedCalendar(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},modifyEvent:function(t){var o=e.defer(),r={title:null,location:null,notes:null,startDate:null,endDate:null,newTitle:null,newLocation:null,newNotes:null,newStartDate:null,newEndDate:null};return r=angular.extend(r,t),n.plugins.calendar.modifyEvent(r.title,r.location,r.notes,new Date(r.startDate),new Date(r.endDate),r.newTitle,r.newLocation,r.newNotes,new Date(r.newStartDate),new Date(r.newEndDate),function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},deleteEvent:function(t){var o=e.defer(),r={newTitle:null,location:null,notes:null,startDate:null,endDate:null};return r=angular.extend(r,t),n.plugins.calendar.deleteEvent(r.newTitle,r.location,r.notes,new Date(r.startDate),new Date(r.endDate),function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]),angular.module("ngCordova.plugins.camera",[]).factory("$cordovaCamera",["$q",function(e){return{getPicture:function(n){var t=e.defer();return navigator.camera?(navigator.camera.getPicture(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise):(t.resolve(null),t.promise)},cleanup:function(){var n=e.defer();return navigator.camera.cleanup(function(){n.resolve()},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.capture",[]).factory("$cordovaCapture",["$q",function(e){return{captureAudio:function(n){var t=e.defer();return navigator.device.capture?(navigator.device.capture.captureAudio(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise):(t.resolve(null),t.promise)},captureImage:function(n){var t=e.defer();return navigator.device.capture?(navigator.device.capture.captureImage(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise):(t.resolve(null),t.promise)},captureVideo:function(n){var t=e.defer();return navigator.device.capture?(navigator.device.capture.captureVideo(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise):(t.resolve(null),t.promise)}}}]),angular.module("ngCordova.plugins.clipboard",[]).factory("$cordovaClipboard",["$q","$window",function(e,n){return{copy:function(t){var o=e.defer();return n.cordova.plugins.clipboard.copy(t,function(){o.resolve()},function(){o.reject()}),o.promise},paste:function(){var t=e.defer();return n.cordova.plugins.clipboard.paste(function(e){t.resolve(e)},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.contacts",[]).factory("$cordovaContacts",["$q",function(e){return{save:function(n){var t=e.defer();return navigator.contacts.create(n).save(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},remove:function(n){var t=e.defer();return navigator.contacts.create(n).remove(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},clone:function(e){return navigator.contacts.create(e).clone(e)},find:function(n){var t=e.defer(),o=n.fields||["id","displayName"];return delete n.fields,navigator.contacts.find(o,function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},pickContact:function(){var n=e.defer();return navigator.contacts.pickContact(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.datePicker",[]).factory("$cordovaDatePicker",["$window","$q",function(e,n){return{show:function(t){var o=n.defer();return t=t||{date:new Date,mode:"date"},e.datePicker.show(t,function(e){o.resolve(e)}),o.promise}}}]),angular.module("ngCordova.plugins.device",[]).factory("$cordovaDevice",[function(){return{getDevice:function(){return device},getCordova:function(){return device.cordova},getModel:function(){return device.model},getName:function(){return device.name},getPlatform:function(){return device.platform},getUUID:function(){return device.uuid},getVersion:function(){return device.version}}}]),angular.module("ngCordova.plugins.deviceMotion",[]).factory("$cordovaDeviceMotion",["$q",function(e){return{getCurrentAcceleration:function(){var n=e.defer();return navigator.accelerometer.getCurrentAcceleration(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},watchAcceleration:function(n){var t=e.defer(),o=navigator.accelerometer.watchAcceleration(function(e){t.notify(e)},function(e){t.reject(e)},n);return t.promise.cancel=function(){navigator.accelerometer.clearWatch(o)},t.promise.clearWatch=function(e){navigator.accelerometer.clearWatch(e||o)},t.promise.watchID=o,t.promise},clearWatch:function(e){return navigator.accelerometer.clearWatch(e)}}}]),angular.module("ngCordova.plugins.deviceOrientation",[]).factory("$cordovaDeviceOrientation",["$q",function(e){var n={frequency:3e3};return{getCurrentHeading:function(){var n=e.defer();return navigator.compass.getCurrentHeading(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},watchHeading:function(t){var o=e.defer(),r=angular.extend(n,t),i=navigator.compass.watchHeading(function(e){o.notify(e)},function(e){o.reject(e)},r);return o.promise.cancel=function(){navigator.compass.clearWatch(i)},o.promise.clearWatch=function(e){navigator.compass.clearWatch(e||i)},o.promise.watchID=i,o.promise},clearWatch:function(e){return navigator.compass.clearWatch(e)}}}]),angular.module("ngCordova.plugins.dialogs",[]).factory("$cordovaDialogs",["$q","$window",function(e,n){return{alert:function(t,o,r){var i=e.defer();return n.navigator.notification?navigator.notification.alert(t,function(){i.resolve()},o,r):(n.alert(t),i.resolve()),i.promise},confirm:function(t,o,r){var i=e.defer();return n.navigator.notification?navigator.notification.confirm(t,function(e){i.resolve(e)},o,r):i.resolve(n.confirm(t)?1:2),i.promise},prompt:function(t,o,r,i){var a=e.defer();if(n.navigator.notification)navigator.notification.prompt(t,function(e){a.resolve(e)},o,r,i);else{var c=n.prompt(t,i);a.resolve(null!==c?{input1:c,buttonIndex:1}:{input1:c,buttonIndex:2})}return a.promise},beep:function(e){return navigator.notification.beep(e)}}}]),angular.module("ngCordova.plugins.emailComposer",[]).factory("$cordovaEmailComposer",["$q",function(e){return{isAvailable:function(){var n=e.defer();return cordova.plugins.email.isAvailable(function(e){e?n.resolve():n.reject()}),n.promise},open:function(n){var t=e.defer();return cordova.plugins.email.open(n,function(){t.reject()}),t.promise},addAlias:function(e,n){cordova.plugins.email.addAlias(e,n)}}}]),angular.module("ngCordova.plugins.facebook",[]).provider("$cordovaFacebook",[function(){this.browserInit=function(e,n){this.appID=e,this.appVersion=n||"v2.0",facebookConnectPlugin.browserInit(this.appID,this.appVersion)},this.$get=["$q",function(e){return{login:function(n){var t=e.defer();return facebookConnectPlugin.login(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},showDialog:function(n){var t=e.defer();return facebookConnectPlugin.showDialog(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},api:function(n,t){var o=e.defer();return facebookConnectPlugin.api(n,t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},getAccessToken:function(){var n=e.defer();return facebookConnectPlugin.getAccessToken(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},getLoginStatus:function(){var n=e.defer();return facebookConnectPlugin.getLoginStatus(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},logout:function(){var n=e.defer();return facebookConnectPlugin.logout(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]}]),angular.module("ngCordova.plugins.facebookAds",[]).factory("$cordovaFacebookAds",["$q","$window",function(e,n){return{setOptions:function(t){var o=e.defer();return n.FacebookAds.setOptions(t,function(){o.resolve()},function(){o.reject()}),o.promise},createBanner:function(t){var o=e.defer();return n.FacebookAds.createBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},removeBanner:function(){var t=e.defer();return n.FacebookAds.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var o=e.defer();return n.FacebookAds.showBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},showBannerAtXY:function(t,o){var r=e.defer();return n.FacebookAds.showBannerAtXY(t,o,function(){r.resolve()},function(){r.reject()}),r.promise},hideBanner:function(){var t=e.defer();return n.FacebookAds.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var o=e.defer();return n.FacebookAds.prepareInterstitial(t,function(){o.resolve()},function(){o.reject()}),o.promise},showInterstitial:function(){var t=e.defer();return n.FacebookAds.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.file",[]).constant("$cordovaFileError",{1:"NOT_FOUND_ERR",2:"SECURITY_ERR",3:"ABORT_ERR",4:"NOT_READABLE_ERR",5:"ENCODING_ERR",6:"NO_MODIFICATION_ALLOWED_ERR",7:"INVALID_STATE_ERR",8:"SYNTAX_ERR",9:"INVALID_MODIFICATION_ERR",10:"QUOTA_EXCEEDED_ERR",11:"TYPE_MISMATCH_ERR",12:"PATH_EXISTS_ERR"}).provider("$cordovaFile",[function(){this.$get=["$q","$window","$cordovaFileError",function(e,n,t){return{getFreeDiskSpace:function(){var n=e.defer();return cordova.exec(function(e){n.resolve(e)},function(e){n.reject(e)},"File","getFreeDiskSpace",[]),n.promise},checkDir:function(o,r){var i=e.defer();/^\//.test(r)&&i.reject("directory cannot start with /");try{var a=o+r;n.resolveLocalFileSystemURL(a,function(e){!0===e.isDirectory?i.resolve(e):i.reject({code:13,message:"input is not a directory"})},function(e){e.message=t[e.code],i.reject(e)})}catch(c){c.message=t[c.code],i.reject(c)}return i.promise},checkFile:function(o,r){var i=e.defer();/^\//.test(r)&&i.reject("directory cannot start with /");try{var a=o+r;n.resolveLocalFileSystemURL(a,function(e){!0===e.isFile?i.resolve(e):i.reject({code:13,message:"input is not a file"})},function(e){e.message=t[e.code],i.reject(e)})}catch(c){c.message=t[c.code],i.reject(c)}return i.promise},createDir:function(o,r,i){var a=e.defer();/^\//.test(r)&&a.reject("directory cannot start with /");var c={create:!0,exclusive:i=!i};try{n.resolveLocalFileSystemURL(o,function(e){e.getDirectory(r,c,function(e){a.resolve(e)},function(e){e.message=t[e.code],a.reject(e)})},function(e){e.message=t[e.code],a.reject(e)})}catch(u){u.message=t[u.code],a.reject(u)}return a.promise},createFile:function(o,r,i){var a=e.defer();/^\//.test(r)&&a.reject("file-name cannot start with /");var c={create:!0,exclusive:i=!i};try{n.resolveLocalFileSystemURL(o,function(e){e.getFile(r,c,function(e){a.resolve(e)},function(e){e.message=t[e.code],a.reject(e)})},function(e){e.message=t[e.code],a.reject(e)})}catch(u){u.message=t[u.code],a.reject(u)}return a.promise},removeDir:function(o,r){var i=e.defer();/^\//.test(r)&&i.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(o,function(e){e.getDirectory(r,{create:!1},function(e){e.remove(function(){i.resolve({success:!0,fileRemoved:e})},function(e){e.message=t[e.code],i.reject(e)})},function(e){e.message=t[e.code],i.reject(e)})},function(e){e.message=t[e.code],i.reject(e)})}catch(a){a.message=t[a.code],i.reject(a)}return i.promise},removeFile:function(o,r){var i=e.defer();/^\//.test(r)&&i.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(o,function(e){e.getFile(r,{create:!1},function(e){e.remove(function(){i.resolve({success:!0,fileRemoved:e})},function(e){e.message=t[e.code],i.reject(e)})},function(e){e.message=t[e.code],i.reject(e)})},function(e){e.message=t[e.code],i.reject(e)})}catch(a){a.message=t[a.code],i.reject(a)}return i.promise},removeRecursively:function(o,r){var i=e.defer();/^\//.test(r)&&i.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(o,function(e){e.getDirectory(r,{create:!1},function(e){e.removeRecursively(function(){i.resolve({success:!0,fileRemoved:e})},function(e){e.message=t[e.code],i.reject(e)})},function(e){e.message=t[e.code],i.reject(e)})},function(e){e.message=t[e.code],i.reject(e)})}catch(a){a.message=t[a.code],i.reject(a)}return i.promise},writeFile:function(o,r,i,a){var c=e.defer();/^\//.test(r)&&c.reject("file-name cannot start with /");var u={create:!0,exclusive:a=!a};try{n.resolveLocalFileSystemURL(o,function(e){e.getFile(r,u,function(e){e.createWriter(function(e){!0===u.append&&e.seek(e.length),u.truncate&&e.truncate(u.truncate),e.onwriteend=function(e){this.error?c.reject(this.error):c.resolve(e)},e.write(i),c.promise.abort=function(){e.abort()}})},function(e){e.message=t[e.code],c.reject(e)})},function(e){e.message=t[e.code],c.reject(e)})}catch(s){s.message=t[s.code],c.reject(s)}return c.promise},writeExistingFile:function(o,r,i){var a=e.defer();/^\//.test(r)&&a.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(o,function(e){e.getFile(r,{create:!1},function(e){e.createWriter(function(e){e.seek(e.length),e.onwriteend=function(e){this.error?a.reject(this.error):a.resolve(e)},e.write(i),a.promise.abort=function(){e.abort()}})},function(e){e.message=t[e.code],a.reject(e)})},function(e){e.message=t[e.code],a.reject(e)})}catch(c){c.message=t[c.code],a.reject(c)}return a.promise},readAsText:function(o,r){var i=e.defer();/^\//.test(r)&&i.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(o,function(e){e.getFile(r,{create:!1},function(e){e.file(function(e){var n=new FileReader;n.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?i.resolve(e.target.result):i.reject(void 0!==e.target.error||null!==e.target.error?e.target.error:{code:null,message:"READER_ONLOADEND_ERR"})},n.readAsText(e)})},function(e){e.message=t[e.code],i.reject(e)})},function(e){e.message=t[e.code],i.reject(e)})}catch(a){a.message=t[a.code],i.reject(a)}return i.promise},readAsDataURL:function(o,r){var i=e.defer();/^\//.test(r)&&i.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(o,function(e){e.getFile(r,{create:!1},function(e){e.file(function(e){var n=new FileReader;n.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?i.resolve(e.target.result):i.reject(void 0!==e.target.error||null!==e.target.error?e.target.error:{code:null,message:"READER_ONLOADEND_ERR"})},n.readAsDataURL(e)})},function(e){e.message=t[e.code],i.reject(e)})},function(e){e.message=t[e.code],i.reject(e)})}catch(a){a.message=t[a.code],i.reject(a)}return i.promise},readAsBinaryString:function(o,r){var i=e.defer();/^\//.test(r)&&i.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(o,function(e){e.getFile(r,{create:!1},function(e){e.file(function(e){var n=new FileReader;n.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?i.resolve(e.target.result):i.reject(void 0!==e.target.error||null!==e.target.error?e.target.error:{code:null,message:"READER_ONLOADEND_ERR"})},n.readAsBinaryString(e)})},function(e){e.message=t[e.code],i.reject(e)})},function(e){e.message=t[e.code],i.reject(e)})}catch(a){a.message=t[a.code],i.reject(a)}return i.promise},readAsArrayBuffer:function(o,r){var i=e.defer();/^\//.test(r)&&i.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(o,function(e){e.getFile(r,{create:!1},function(e){e.file(function(e){var n=new FileReader;n.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?i.resolve(e.target.result):i.reject(void 0!==e.target.error||null!==e.target.error?e.target.error:{code:null,message:"READER_ONLOADEND_ERR"})},n.readAsArrayBuffer(e)})},function(e){e.message=t[e.code],i.reject(e)})},function(e){e.message=t[e.code],i.reject(e)})}catch(a){a.message=t[a.code],i.reject(a)}return i.promise},moveFile:function(t,o,r,i){var a=e.defer();i=i||o,(/^\//.test(o)||/^\//.test(i))&&a.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(t,function(e){e.getFile(o,{create:!1},function(e){n.resolveLocalFileSystemURL(r,function(n){e.moveTo(n,i,function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})}catch(c){a.reject(c)}return a.promise},moveDir:function(t,o,r,i){var a=e.defer();i=i||o,(/^\//.test(o)||/^\//.test(i))&&a.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(t,function(e){e.getDirectory(o,{create:!1},function(e){n.resolveLocalFileSystemURL(r,function(n){e.moveTo(n,i,function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})}catch(c){a.reject(c)}return a.promise},copyDir:function(o,r,i,a){var c=e.defer();a=a||r,(/^\//.test(r)||/^\//.test(a))&&c.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(o,function(e){e.getDirectory(r,{create:!1,exclusive:!1},function(e){n.resolveLocalFileSystemURL(i,function(n){e.copyTo(n,a,function(e){c.resolve(e)},function(e){e.message=t[e.code],c.reject(e)})},function(e){e.message=t[e.code],c.reject(e)})},function(e){e.message=t[e.code],c.reject(e)})},function(e){e.message=t[e.code],c.reject(e)})}catch(u){u.message=t[u.code],c.reject(u)}return c.promise},copyFile:function(o,r,i,a){var c=e.defer();a=a||r,/^\//.test(r)&&c.reject("file-name cannot start with /");try{n.resolveLocalFileSystemURL(o,function(e){e.getFile(r,{create:!1,exclusive:!1},function(e){n.resolveLocalFileSystemURL(i,function(n){e.copyTo(n,a,function(e){c.resolve(e)},function(e){e.message=t[e.code],c.reject(e)})},function(e){e.message=t[e.code],c.reject(e)})},function(e){e.message=t[e.code],c.reject(e)})},function(e){e.message=t[e.code],c.reject(e)})}catch(u){u.message=t[u.code],c.reject(u)}return c.promise}}}]}]),angular.module("ngCordova.plugins.fileOpener2",[]).factory("$cordovaFileOpener2",["$q",function(e){return{open:function(n,t){var o=e.defer();return cordova.plugins.fileOpener2.open(n,t,{error:function(e){o.reject(e)},success:function(){o.resolve()}}),o.promise},uninstall:function(n){var t=e.defer();return cordova.plugins.fileOpener2.uninstall(n,{error:function(e){t.reject(e)},success:function(){t.resolve()}}),t.promise},appIsInstalled:function(n){var t=e.defer();return cordova.plugins.fileOpener2.appIsInstalled(n,{success:function(e){t.resolve(e)}}),t.promise}}}]),angular.module("ngCordova.plugins.fileTransfer",[]).factory("$cordovaFileTransfer",["$q","$timeout",function(e,n){return{download:function(t,o,r,i){var a=e.defer(),c=new FileTransfer,u=r&&!1===r.encodeURI?t:encodeURI(t);return r&&void 0!==r.timeout&&null!==r.timeout&&(n(function(){c.abort()},r.timeout),r.timeout=null),c.onprogress=function(e){a.notify(e)},a.promise.abort=function(){c.abort()},c.download(u,o,a.resolve,a.reject,i,r),a.promise},upload:function(t,o,r,i){var a=e.defer(),c=new FileTransfer,u=r&&!1===r.encodeURI?t:encodeURI(t);return r&&void 0!==r.timeout&&null!==r.timeout&&(n(function(){c.abort()},r.timeout),r.timeout=null),c.onprogress=function(e){a.notify(e)},a.promise.abort=function(){c.abort()},c.upload(o,u,a.resolve,a.reject,r,i),a.promise}}}]),angular.module("ngCordova.plugins.flashlight",[]).factory("$cordovaFlashlight",["$q","$window",function(e,n){return{available:function(){var t=e.defer();return n.plugins.flashlight.available(function(e){t.resolve(e)}),t.promise},switchOn:function(){var t=e.defer();return n.plugins.flashlight.switchOn(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},switchOff:function(){var t=e.defer();return n.plugins.flashlight.switchOff(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},toggle:function(){var t=e.defer();return n.plugins.flashlight.toggle(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.flurryAds",[]).factory("$cordovaFlurryAds",["$q","$window",function(e,n){return{setOptions:function(t){var o=e.defer();return n.FlurryAds.setOptions(t,function(){o.resolve()},function(){o.reject()}),o.promise},createBanner:function(t){var o=e.defer();return n.FlurryAds.createBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},removeBanner:function(){var t=e.defer();return n.FlurryAds.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var o=e.defer();return n.FlurryAds.showBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},showBannerAtXY:function(t,o){var r=e.defer();return n.FlurryAds.showBannerAtXY(t,o,function(){r.resolve()},function(){r.reject()}),r.promise},hideBanner:function(){var t=e.defer();return n.FlurryAds.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var o=e.defer();return n.FlurryAds.prepareInterstitial(t,function(){o.resolve()},function(){o.reject()}),o.promise},showInterstitial:function(){var t=e.defer();return n.FlurryAds.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.ga",[]).factory("$cordovaGA",["$q","$window",function(e,n){return{init:function(t,o){var r=e.defer();return o=o>=0?o:10,n.plugins.gaPlugin.init(function(e){r.resolve(e)},function(e){r.reject(e)},t,o),r.promise},trackEvent:function(t,o,r,i,a,c){var u=e.defer();return n.plugins.gaPlugin.trackEvent(function(e){u.resolve(e)},function(e){u.reject(e)},r,i,a,c),u.promise},trackPage:function(t,o,r){var i=e.defer();return n.plugins.gaPlugin.trackPage(function(e){i.resolve(e)},function(e){i.reject(e)},r),i.promise},setVariable:function(t,o,r,i){var a=e.defer();return n.plugins.gaPlugin.setVariable(function(e){a.resolve(e)},function(e){a.reject(e)},r,i),a.promise},exit:function(){var t=e.defer();return n.plugins.gaPlugin.exit(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.geolocation",[]).factory("$cordovaGeolocation",["$q",function(e){return{getCurrentPosition:function(n){var t=e.defer();return navigator.geolocation.getCurrentPosition(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},watchPosition:function(n){var t=e.defer(),o=navigator.geolocation.watchPosition(function(e){t.notify(e)},function(e){t.reject(e)},n);return t.promise.cancel=function(){navigator.geolocation.clearWatch(o)},t.promise.clearWatch=function(e){navigator.geolocation.clearWatch(e||o)},t.promise.watchID=o,t.promise},clearWatch:function(e){return navigator.geolocation.clearWatch(e)}}}]),angular.module("ngCordova.plugins.globalization",[]).factory("$cordovaGlobalization",["$q",function(e){return{getPreferredLanguage:function(){var n=e.defer();return navigator.globalization.getPreferredLanguage(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},getLocaleName:function(){var n=e.defer();return navigator.globalization.getLocaleName(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},getFirstDayOfWeek:function(){var n=e.defer();return navigator.globalization.getFirstDayOfWeek(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},dateToString:function(n,t){var o=e.defer();return navigator.globalization.dateToString(n,function(e){o.resolve(e)},function(e){o.reject(e)},t),o.promise},stringToDate:function(n,t){var o=e.defer();return navigator.globalization.stringToDate(n,function(e){o.resolve(e)},function(e){o.reject(e)},t),o.promise},getDatePattern:function(n){var t=e.defer();return navigator.globalization.getDatePattern(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},getDateNames:function(n){var t=e.defer();return navigator.globalization.getDateNames(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},isDayLightSavingsTime:function(n){var t=e.defer();return navigator.globalization.isDayLightSavingsTime(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},numberToString:function(n,t){var o=e.defer();return navigator.globalization.numberToString(n,function(e){o.resolve(e)},function(e){o.reject(e)},t),o.promise},stringToNumber:function(n,t){var o=e.defer();return navigator.globalization.stringToNumber(n,function(e){o.resolve(e)},function(e){o.reject(e)},t),o.promise},getNumberPattern:function(n){var t=e.defer();return navigator.globalization.getNumberPattern(function(e){t.resolve(e)},function(e){t.reject(e)},n),t.promise},getCurrencyPattern:function(n){var t=e.defer();return navigator.globalization.getCurrencyPattern(n,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.googleAds",[]).factory("$cordovaGoogleAds",["$q","$window",function(e,n){return{setOptions:function(t){var o=e.defer();return n.AdMob.setOptions(t,function(){o.resolve()},function(){o.reject()}),o.promise},createBanner:function(t){var o=e.defer();return n.AdMob.createBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},removeBanner:function(){var t=e.defer();return n.AdMob.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var o=e.defer();return n.AdMob.showBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},showBannerAtXY:function(t,o){var r=e.defer();return n.AdMob.showBannerAtXY(t,o,function(){r.resolve()},function(){r.reject()}),r.promise},hideBanner:function(){var t=e.defer();return n.AdMob.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var o=e.defer();return n.AdMob.prepareInterstitial(t,function(){o.resolve()},function(){o.reject()}),o.promise},showInterstitial:function(){var t=e.defer();return n.AdMob.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.googleAnalytics",[]).factory("$cordovaGoogleAnalytics",["$q","$window",function(e,n){return{startTrackerWithId:function(t){var o=e.defer();return n.analytics.startTrackerWithId(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},setUserId:function(t){var o=e.defer();return n.analytics.setUserId(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},debugMode:function(){var t=e.defer();return n.analytics.debugMode(function(e){t.resolve(e)},function(){t.reject()}),t.promise},trackView:function(t){var o=e.defer();return n.analytics.trackView(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},addCustomDimension:function(t,o){var r=e.defer();return n.analytics.addCustomDimension(t,o,function(){r.resolve()},function(e){r.reject(e)}),r.promise},trackEvent:function(t,o,r,i){var a=e.defer();return n.analytics.trackEvent(t,o,r,i,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},trackException:function(t,o){var r=e.defer();return n.analytics.trackException(t,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},trackTiming:function(t,o,r,i){var a=e.defer();return n.analytics.trackTiming(t,o,r,i,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},addTransaction:function(t,o,r,i,a,c){var u=e.defer();return n.analytics.addTransaction(t,o,r,i,a,c,function(e){u.resolve(e)},function(e){u.reject(e)}),u.promise},addTransactionItem:function(t,o,r,i,a,c,u){var s=e.defer();return n.analytics.addTransactionItem(t,o,r,i,a,c,u,function(e){s.resolve(e)},function(e){s.reject(e)}),s.promise}}}]),angular.module("ngCordova.plugins.googleMap",[]).factory("$cordovaGoogleMap",["$q","$window",function(e,n){var t=null;return{getMap:function(o){var r=e.defer();if(n.plugin.google.maps){var i=document.getElementById("map_canvas");(t=n.plugin.google.maps.Map.getMap(o)).setDiv(i),r.resolve(t)}else r.reject(null);return r.promise},isMapLoaded:function(){return!!t},addMarker:function(n){var o=e.defer();return t.addMarker(n,function(e){o.resolve(e)}),o.promise},getMapTypeIds:function(){return n.plugin.google.maps.mapTypeId},setVisible:function(n){var o=e.defer();return t.setVisible(n),o.promise},cleanup:function(){t=null}}}]),angular.module("ngCordova.plugins.googlePlayGame",[]).factory("$cordovaGooglePlayGame",["$q",function(e){return{auth:function(){var n=e.defer();return googleplaygame.auth(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},signout:function(){var n=e.defer();return googleplaygame.signout(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},isSignedIn:function(){var n=e.defer();return googleplaygame.isSignedIn(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},showPlayer:function(){var n=e.defer();return googleplaygame.showPlayer(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},submitScore:function(n){var t=e.defer();return googleplaygame.submitScore(n,function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},showAllLeaderboards:function(){var n=e.defer();return googleplaygame.showAllLeaderboards(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},showLeaderboard:function(n){var t=e.defer();return googleplaygame.showLeaderboard(n,function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},unlockAchievement:function(n){var t=e.defer();return googleplaygame.unlockAchievement(n,function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},incrementAchievement:function(n){var t=e.defer();return googleplaygame.incrementAchievement(n,function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},showAchievements:function(){var n=e.defer();return googleplaygame.showAchievements(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.googleplus",[]).factory("$cordovaGooglePlus",["$q","$window",function(e,n){return{login:function(t){var o=e.defer();return void 0===t&&(t={}),n.plugins.googleplus.login({iOSApiKey:t},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},silentLogin:function(t){var o=e.defer();return void 0===t&&(t={}),n.plugins.googleplus.trySilentLogin({iOSApiKey:t},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},logout:function(){var t=e.defer();n.plugins.googleplus.logout(function(e){t.resolve(e)})},disconnect:function(){var t=e.defer();n.plugins.googleplus.disconnect(function(e){t.resolve(e)})}}}]),angular.module("ngCordova.plugins.healthKit",[]).factory("$cordovaHealthKit",["$q","$window",function(e,n){return{isAvailable:function(){var t=e.defer();return n.plugins.healthkit.available(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},checkAuthStatus:function(t){var o=e.defer();return t=t||"HKQuantityTypeIdentifierHeight",n.plugins.healthkit.checkAuthStatus({type:t},function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},requestAuthorization:function(t,o){var r=e.defer();return t=t||["HKCharacteristicTypeIdentifierDateOfBirth","HKQuantityTypeIdentifierActiveEnergyBurned","HKQuantityTypeIdentifierHeight"],o=o||["HKQuantityTypeIdentifierActiveEnergyBurned","HKQuantityTypeIdentifierHeight","HKQuantityTypeIdentifierDistanceCycling"],n.plugins.healthkit.requestAuthorization({readTypes:t,writeTypes:o},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},readDateOfBirth:function(){var t=e.defer();return n.plugins.healthkit.readDateOfBirth(function(e){t.resolve(e)},function(e){t.resolve(e)}),t.promise},readGender:function(){var t=e.defer();return n.plugins.healthkit.readGender(function(e){t.resolve(e)},function(e){t.resolve(e)}),t.promise},saveWeight:function(t,o,r){var i=e.defer();return n.plugins.healthkit.saveWeight({unit:o||"lb",amount:t,date:r||new Date},function(e){i.resolve(e)},function(e){i.resolve(e)}),i.promise},readWeight:function(t){var o=e.defer();return n.plugins.healthkit.readWeight({unit:t||"lb"},function(e){o.resolve(e)},function(e){o.resolve(e)}),o.promise},saveHeight:function(t,o,r){var i=e.defer();return n.plugins.healthkit.saveHeight({unit:o||"in",amount:t,date:r||new Date},function(e){i.resolve(e)},function(e){i.resolve(e)}),i.promise},readHeight:function(t){var o=e.defer();return n.plugins.healthkit.readHeight({unit:t||"in"},function(e){o.resolve(e)},function(e){o.resolve(e)}),o.promise},findWorkouts:function(){var t=e.defer();return n.plugins.healthkit.findWorkouts({},function(e){t.resolve(e)},function(e){t.resolve(e)}),t.promise},saveWorkout:function(t){var o=e.defer();return n.plugins.healthkit.saveWorkout(t,function(e){o.resolve(e)},function(e){o.resolve(e)}),o.promise},querySampleType:function(t){var o=e.defer();return n.plugins.healthkit.querySampleType(t,function(e){o.resolve(e)},function(e){o.resolve(e)}),o.promise}}}]),angular.module("ngCordova.plugins.httpd",[]).factory("$cordovaHttpd",["$q",function(e){return{startServer:function(n){var t=e.defer();return cordova.plugins.CorHttpd.startServer(n,function(){t.resolve()},function(){t.reject()}),t.promise},stopServer:function(){var n=e.defer();return cordova.plugins.CorHttpd.stopServer(function(){n.resolve()},function(){n.reject()}),n.promise},getURL:function(){var n=e.defer();return cordova.plugins.CorHttpd.getURL(function(e){n.resolve(e)},function(){n.reject()}),n.promise},getLocalPath:function(){var n=e.defer();return cordova.plugins.CorHttpd.getLocalPath(function(e){n.resolve(e)},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.iAd",[]).factory("$cordovaiAd",["$q","$window",function(e,n){return{setOptions:function(t){var o=e.defer();return n.iAd.setOptions(t,function(){o.resolve()},function(){o.reject()}),o.promise},createBanner:function(t){var o=e.defer();return n.iAd.createBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},removeBanner:function(){var t=e.defer();return n.iAd.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var o=e.defer();return n.iAd.showBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},showBannerAtXY:function(t,o){var r=e.defer();return n.iAd.showBannerAtXY(t,o,function(){r.resolve()},function(){r.reject()}),r.promise},hideBanner:function(){var t=e.defer();return n.iAd.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var o=e.defer();return n.iAd.prepareInterstitial(t,function(){o.resolve()},function(){o.reject()}),o.promise},showInterstitial:function(){var t=e.defer();return n.iAd.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.imagePicker",[]).factory("$cordovaImagePicker",["$q","$window",function(e,n){return{getPictures:function(t){var o=e.defer();return n.imagePicker.getPictures(function(e){o.resolve(e)},function(e){o.reject(e)},t),o.promise}}}]),angular.module("ngCordova.plugins.inAppBrowser",[]).provider("$cordovaInAppBrowser",[function(){var e,n=this.defaultOptions={};this.setDefaultOptions=function(e){n=angular.extend(n,e)},this.$get=["$rootScope","$q","$window","$timeout",function(t,o,r,i){return{open:function(a,c,u){var s=o.defer();if(u&&!angular.isObject(u))return s.reject("options must be an object"),s.promise;var l=angular.extend({},n,u),f=[];angular.forEach(l,function(e,n){f.push(n+"="+e)});var d=f.join();return(e=r.open(a,c,d)).addEventListener("loadstart",function(e){i(function(){t.$broadcast("$cordovaInAppBrowser:loadstart",e)})},!1),e.addEventListener("loadstop",function(e){s.resolve(e),i(function(){t.$broadcast("$cordovaInAppBrowser:loadstop",e)})},!1),e.addEventListener("loaderror",function(e){s.reject(e),i(function(){t.$broadcast("$cordovaInAppBrowser:loaderror",e)})},!1),e.addEventListener("exit",function(e){i(function(){t.$broadcast("$cordovaInAppBrowser:exit",e)})},!1),s.promise},close:function(){e.close(),e=null},show:function(){e.show()},executeScript:function(n){var t=o.defer();return e.executeScript(n,function(e){t.resolve(e)}),t.promise},insertCSS:function(n){var t=o.defer();return e.insertCSS(n,function(e){t.resolve(e)}),t.promise}}}]}]),angular.module("ngCordova.plugins.insomnia",[]).factory("$cordovaInsomnia",["$window",function(e){return{keepAwake:function(){return e.plugins.insomnia.keepAwake()},allowSleepAgain:function(){return e.plugins.insomnia.allowSleepAgain()}}}]),angular.module("ngCordova.plugins.instagram",[]).factory("$cordovaInstagram",["$q",function(e){return{share:function(n){var t=e.defer();return window.Instagram?(Instagram.share(n.image,n.caption,function(e){e?t.reject(e):t.resolve(!0)}),t.promise):(console.error("Tried to call Instagram.share but the Instagram plugin isn't installed!"),t.resolve(null),t.promise)},isInstalled:function(){var n=e.defer();return window.Instagram?(Instagram.isInstalled(function(e,t){e?n.reject(e):n.resolve(t||!0)}),n.promise):(console.error("Tried to call Instagram.isInstalled but the Instagram plugin isn't installed!"),n.resolve(null),n.promise)}}}]),angular.module("ngCordova.plugins.keyboard",[]).factory("$cordovaKeyboard",["$rootScope","$timeout",function(e){var n=function(){e.$evalAsync(function(){e.$broadcast("$cordovaKeyboard:show")})},t=function(){e.$evalAsync(function(){e.$broadcast("$cordovaKeyboard:hide")})};return document.addEventListener("deviceready",function(){cordova.plugins.Keyboard&&(window.addEventListener("native.keyboardshow",n,!1),window.addEventListener("native.keyboardhide",t,!1))}),{hideAccessoryBar:function(e){return cordova.plugins.Keyboard.hideKeyboardAccessoryBar(e)},close:function(){return cordova.plugins.Keyboard.close()},show:function(){return cordova.plugins.Keyboard.show()},disableScroll:function(e){return cordova.plugins.Keyboard.disableScroll(e)},isVisible:function(){return cordova.plugins.Keyboard.isVisible},clearShowWatch:function(){document.removeEventListener("native.keyboardshow",n),e.$$listeners["$cordovaKeyboard:show"]=[]},clearHideWatch:function(){document.removeEventListener("native.keyboardhide",t),e.$$listeners["$cordovaKeyboard:hide"]=[]}}}]),angular.module("ngCordova.plugins.keychain",[]).factory("$cordovaKeychain",["$q",function(e){return{getForKey:function(n,t){var o=e.defer();return(new Keychain).getForKey(o.resolve,o.reject,n,t),o.promise},setForKey:function(n,t,o){var r=e.defer();return(new Keychain).setForKey(r.resolve,r.reject,n,t,o),r.promise},removeForKey:function(n,t){var o=e.defer();return(new Keychain).removeForKey(o.resolve,o.reject,n,t),o.promise}}}]),angular.module("ngCordova.plugins.localNotification",[]).factory("$cordovaLocalNotification",["$q","$window","$rootScope","$timeout",function(e,n,t,o){return document.addEventListener("deviceready",function(){n.cordova&&n.cordova.plugins&&n.cordova.plugins.notification&&n.cordova.plugins.notification.local&&(n.cordova.plugins.notification.local.on("schedule",function(e,n){o(function(){t.$broadcast("$cordovaLocalNotification:schedule",e,n)})}),n.cordova.plugins.notification.local.on("trigger",function(e,n){o(function(){t.$broadcast("$cordovaLocalNotification:trigger",e,n)})}),n.cordova.plugins.notification.local.on("update",function(e,n){o(function(){t.$broadcast("$cordovaLocalNotification:update",e,n)})}),n.cordova.plugins.notification.local.on("clear",function(e,n){o(function(){t.$broadcast("$cordovaLocalNotification:clear",e,n)})}),n.cordova.plugins.notification.local.on("clearall",function(e){o(function(){t.$broadcast("$cordovaLocalNotification:clearall",e)})}),n.cordova.plugins.notification.local.on("cancel",function(e,n){o(function(){t.$broadcast("$cordovaLocalNotification:cancel",e,n)})}),n.cordova.plugins.notification.local.on("cancelall",function(e){o(function(){t.$broadcast("$cordovaLocalNotification:cancelall",e)})}),n.cordova.plugins.notification.local.on("click",function(e,n){o(function(){t.$broadcast("$cordovaLocalNotification:click",e,n)})}))},!1),{schedule:function(t,o){var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.schedule(t,function(e){r.resolve(e)},o),r.promise},add:function(t,o){console.warn('Deprecated: use "schedule" instead.');var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.schedule(t,function(e){r.resolve(e)},o),r.promise},update:function(t,o){var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.update(t,function(e){r.resolve(e)},o),r.promise},clear:function(t,o){var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.clear(t,function(e){r.resolve(e)},o),r.promise},clearAll:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.clearAll(function(e){o.resolve(e)},t),o.promise},cancel:function(t,o){var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.cancel(t,function(e){r.resolve(e)},o),r.promise},cancelAll:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.cancelAll(function(e){o.resolve(e)},t),o.promise},isPresent:function(t,o){var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.isPresent(t,function(e){r.resolve(e)},o),r.promise},isScheduled:function(t,o){var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.isScheduled(t,function(e){r.resolve(e)},o),r.promise},isTriggered:function(t,o){var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.isTriggered(t,function(e){r.resolve(e)},o),r.promise},hasPermission:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.hasPermission(function(e){e?o.resolve(e):o.reject(e)},t),o.promise},registerPermission:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.registerPermission(function(e){e?o.resolve(e):o.reject(e)},t),o.promise},promptForPermission:function(t){console.warn('Deprecated: use "registerPermission" instead.');var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.registerPermission(function(e){e?o.resolve(e):o.reject(e)},t),o.promise},getAllIds:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.getAllIds(function(e){o.resolve(e)},t),o.promise},getIds:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.getIds(function(e){o.resolve(e)},t),o.promise},getScheduledIds:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.getScheduledIds(function(e){o.resolve(e)},t),o.promise},getTriggeredIds:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.getTriggeredIds(function(e){o.resolve(e)},t),o.promise},get:function(t,o){var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.get(t,function(e){r.resolve(e)},o),r.promise},getAll:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.getAll(function(e){o.resolve(e)},t),o.promise},getScheduled:function(t,o){var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.getScheduled(t,function(e){r.resolve(e)},o),r.promise},getAllScheduled:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.getAllScheduled(function(e){o.resolve(e)},t),o.promise},getTriggered:function(t,o){var r=e.defer();return o=o||null,n.cordova.plugins.notification.local.getTriggered(t,function(e){r.resolve(e)},o),r.promise},getAllTriggered:function(t){var o=e.defer();return t=t||null,n.cordova.plugins.notification.local.getAllTriggered(function(e){o.resolve(e)},t),o.promise},getDefaults:function(){return n.cordova.plugins.notification.local.getDefaults()},setDefaults:function(e){n.cordova.plugins.notification.local.setDefaults(e)}}}]),angular.module("ngCordova.plugins.mMediaAds",[]).factory("$cordovaMMediaAds",["$q","$window",function(e,n){return{setOptions:function(t){var o=e.defer();return n.mMedia.setOptions(t,function(){o.resolve()},function(){o.reject()}),o.promise},createBanner:function(t){var o=e.defer();return n.mMedia.createBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},removeBanner:function(){var t=e.defer();return n.mMedia.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var o=e.defer();return n.mMedia.showBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},showBannerAtXY:function(t,o){var r=e.defer();return n.mMedia.showBannerAtXY(t,o,function(){r.resolve()},function(){r.reject()}),r.promise},hideBanner:function(){var t=e.defer();return n.mMedia.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var o=e.defer();return n.mMedia.prepareInterstitial(t,function(){o.resolve()},function(){o.reject()}),o.promise},showInterstitial:function(){var t=e.defer();return n.mMedia.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.media",[]).factory("$cordovaMedia",["$q",function(e){return{newMedia:function(n){var t,o=e.defer(),r=null;return t=new Media(n,function(e){o.resolve(e)},function(e){o.reject(e)},function(e){r=e}),o.promise.getCurrentPosition=function(){t.getCurrentPosition(function(){},function(){})},o.promise.getDuration=function(){t.getDuration()},o.promise.play=function(e){"object"!=typeof e&&(e={}),t.play(e)},o.promise.pause=function(){t.pause()},o.promise.stop=function(){t.stop()},o.promise.release=function(){t.release()},o.promise.seekTo=function(e){t.seekTo(e)},o.promise.setVolume=function(e){t.setVolume(e)},o.promise.startRecord=function(){t.startRecord()},o.promise.stopRecord=function(){t.stopRecord()},o.promise.media=t,o.promise}}}]),angular.module("ngCordova.plugins.mobfoxAds",[]).factory("$cordovaMobFoxAds",["$q","$window",function(e,n){return{setOptions:function(t){var o=e.defer();return n.MobFox.setOptions(t,function(){o.resolve()},function(){o.reject()}),o.promise},createBanner:function(t){var o=e.defer();return n.MobFox.createBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},removeBanner:function(){var t=e.defer();return n.MobFox.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var o=e.defer();return n.MobFox.showBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},showBannerAtXY:function(t,o){var r=e.defer();return n.MobFox.showBannerAtXY(t,o,function(){r.resolve()},function(){r.reject()}),r.promise},hideBanner:function(){var t=e.defer();return n.MobFox.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var o=e.defer();return n.MobFox.prepareInterstitial(t,function(){o.resolve()},function(){o.reject()}),o.promise},showInterstitial:function(){var t=e.defer();return n.MobFox.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins",["ngCordova.plugins.actionSheet","ngCordova.plugins.adMob","ngCordova.plugins.appAvailability","ngCordova.plugins.appRate","ngCordova.plugins.appVersion","ngCordova.plugins.backgroundGeolocation","ngCordova.plugins.badge","ngCordova.plugins.barcodeScanner","ngCordova.plugins.batteryStatus","ngCordova.plugins.ble","ngCordova.plugins.bluetoothSerial","ngCordova.plugins.brightness","ngCordova.plugins.calendar","ngCordova.plugins.camera","ngCordova.plugins.capture","ngCordova.plugins.clipboard","ngCordova.plugins.contacts","ngCordova.plugins.datePicker","ngCordova.plugins.device","ngCordova.plugins.deviceMotion","ngCordova.plugins.deviceOrientation","ngCordova.plugins.dialogs","ngCordova.plugins.emailComposer","ngCordova.plugins.facebook","ngCordova.plugins.facebookAds","ngCordova.plugins.file","ngCordova.plugins.fileTransfer","ngCordova.plugins.fileOpener2","ngCordova.plugins.flashlight","ngCordova.plugins.flurryAds","ngCordova.plugins.ga","ngCordova.plugins.geolocation","ngCordova.plugins.globalization","ngCordova.plugins.googleAds","ngCordova.plugins.googleAnalytics","ngCordova.plugins.googleMap","ngCordova.plugins.googlePlayGame","ngCordova.plugins.healthKit","ngCordova.plugins.httpd","ngCordova.plugins.iAd","ngCordova.plugins.imagePicker","ngCordova.plugins.inAppBrowser","ngCordova.plugins.keyboard","ngCordova.plugins.keychain","ngCordova.plugins.localNotification","ngCordova.plugins.media","ngCordova.plugins.mMediaAds","ngCordova.plugins.mobfoxAds","ngCordova.plugins.mopubAds","ngCordova.plugins.nativeAudio","ngCordova.plugins.network","ngCordova.plugins.oauth","ngCordova.plugins.oauthUtility","ngCordova.plugins.pinDialog","ngCordova.plugins.prefs","ngCordova.plugins.printer","ngCordova.plugins.progressIndicator","ngCordova.plugins.push","ngCordova.plugins.sms","ngCordova.plugins.socialSharing","ngCordova.plugins.spinnerDialog","ngCordova.plugins.splashscreen","ngCordova.plugins.sqlite","ngCordova.plugins.statusbar","ngCordova.plugins.toast","ngCordova.plugins.touchid","ngCordova.plugins.vibration","ngCordova.plugins.videoCapturePlus","ngCordova.plugins.zip","ngCordova.plugins.insomnia"]),angular.module("ngCordova.plugins.mopubAds",[]).factory("$cordovaMoPubAds",["$q","$window",function(e,n){return{setOptions:function(t){var o=e.defer();return n.MoPub.setOptions(t,function(){o.resolve()},function(){o.reject()}),o.promise},createBanner:function(t){var o=e.defer();return n.MoPub.createBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},removeBanner:function(){var t=e.defer();return n.MoPub.removeBanner(function(){t.resolve()},function(){t.reject()}),t.promise},showBanner:function(t){var o=e.defer();return n.MoPub.showBanner(t,function(){o.resolve()},function(){o.reject()}),o.promise},showBannerAtXY:function(t,o){var r=e.defer();return n.MoPub.showBannerAtXY(t,o,function(){r.resolve()},function(){r.reject()}),r.promise},hideBanner:function(){var t=e.defer();return n.MoPub.hideBanner(function(){t.resolve()},function(){t.reject()}),t.promise},prepareInterstitial:function(t){var o=e.defer();return n.MoPub.prepareInterstitial(t,function(){o.resolve()},function(){o.reject()}),o.promise},showInterstitial:function(){var t=e.defer();return n.MoPub.showInterstitial(function(){t.resolve()},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.nativeAudio",[]).factory("$cordovaNativeAudio",["$q","$window",function(e,n){return{preloadSimple:function(t,o){var r=e.defer();return n.plugins.NativeAudio.preloadSimple(t,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},preloadComplex:function(t,o,r,i){var a=e.defer();return n.plugins.NativeAudio.preloadComplex(t,o,r,i,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},play:function(t,o){var r=e.defer();return n.plugins.NativeAudio.play(t,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},stop:function(t){var o=e.defer();return n.plugins.NativeAudio.stop(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},loop:function(t){var o=e.defer();return n.plugins.NativeAudio.loop(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},unload:function(t){var o=e.defer();return n.plugins.NativeAudio.unload(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},setVolumeForComplexAsset:function(t,o){var r=e.defer();return n.plugins.NativeAudio.setVolumeForComplexAsset(t,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.network",[]).factory("$cordovaNetwork",["$rootScope","$timeout",function(e,n){var t=function(){var t=navigator.connection.type;n(function(){e.$broadcast("$cordovaNetwork:offline",t)})},o=function(){var t=navigator.connection.type;n(function(){e.$broadcast("$cordovaNetwork:online",t)})};return document.addEventListener("deviceready",function(){navigator.connection&&(document.addEventListener("offline",t,!1),document.addEventListener("online",o,!1))}),{getNetwork:function(){return navigator.connection.type},isOnline:function(){var e=navigator.connection.type;return e!==Connection.UNKNOWN&&e!==Connection.NONE},isOffline:function(){var e=navigator.connection.type;return e===Connection.UNKNOWN||e===Connection.NONE},clearOfflineWatch:function(){document.removeEventListener("offline",t),e.$$listeners["$cordovaNetwork:offline"]=[]},clearOnlineWatch:function(){document.removeEventListener("online",t),e.$$listeners["$cordovaNetwork:online"]=[]}}}]).run(["$cordovaNetwork",function(){}]),angular.module("ngCordova.plugins.oauth",["ngCordova.plugins.oauthUtility"]).factory("$cordovaOauth",["$q","$http","$cordovaOauthUtility",function(e,n,t){return{adfs:function(t,o,r){var i=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var c=window.open(o+"/adfs/oauth2/authorize?response_type=code&client_id="+t+"&redirect_uri=http://localhost/callback&resource="+r,"_blank","location=no");c.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){var r=e.url.split("code=")[1];n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:o+"/adfs/oauth2/token",data:"client_id="+t+"&code="+r+"&redirect_uri=http://localhost/callback&grant_type=authorization_code"}).success(function(e){i.resolve(e)}).error(function(){i.reject("Problem authenticating")}).finally(function(){setTimeout(function(){c.close()},10)})}}),c.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin");else i.reject("Cannot authenticate via a web browser");return i.promise},dropbox:function(n){var t=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var r=window.open("https://www.dropbox.com/1/oauth2/authorize?client_id="+n+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");r.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var o=e.url.split("#")[1].split("&"),i=[],a=0;a<o.length;a++)i[o[a].split("=")[0]]=o[a].split("=")[1];void 0!==i.access_token&&null!==i.access_token?t.resolve({access_token:i.access_token,token_type:i.token_type,uid:i.uid}):t.reject("Problem authenticating"),setTimeout(function(){r.close()},10)}}),r.addEventListener("exit",function(){t.reject("The sign in flow was canceled")})}else t.reject("Could not find InAppBrowser plugin");else t.reject("Cannot authenticate via a web browser");return t.promise},digitalOcean:function(t,o){var r=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var a=window.open("https://cloud.digitalocean.com/v1/oauth/authorize?client_id="+t+"&redirect_uri=http://localhost/callback&response_type=code&scope=read%20write","_blank","location=no,clearsessioncache=yes,clearcache=yes");a.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){var i=e.url.split("code=")[1];n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:"https://cloud.digitalocean.com/v1/oauth/token",data:"client_id="+t+"&client_secret="+o+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+i}).success(function(e){r.resolve(e)}).error(function(){r.reject("Problem authenticating")}).finally(function(){setTimeout(function(){a.close()},10)})}}),a.addEventListener("exit",function(){r.reject("The sign in flow was canceled")})}else r.reject("Could not find InAppBrowser plugin");else r.reject("Cannot authenticate via a web browser");return r.promise},google:function(n,t){var o=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var i=window.open("https://accounts.google.com/o/oauth2/auth?client_id="+n+"&redirect_uri=http://localhost/callback&scope="+t.join(" ")+"&approval_prompt=force&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1].split("&"),r=[],a=0;a<t.length;a++)r[t[a].split("=")[0]]=t[a].split("=")[1];void 0!==r.access_token&&null!==r.access_token?o.resolve({access_token:r.access_token,token_type:r.token_type,expires_in:r.expires_in}):o.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin");else o.reject("Cannot authenticate via a web browser");return o.promise},github:function(t,o,r){var i=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var c=window.open("https://github.com/login/oauth/authorize?client_id="+t+"&redirect_uri=http://localhost/callback&scope="+r.join(","),"_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n.defaults.headers.post.accept="application/json",n({method:"post",url:"https://github.com/login/oauth/access_token",data:"client_id="+t+"&client_secret="+o+"&redirect_uri=http://localhost/callback&code="+requestToken}).success(function(e){i.resolve(e)}).error(function(){i.reject("Problem authenticating")}).finally(function(){setTimeout(function(){c.close()},10)}))}),c.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin");else i.reject("Cannot authenticate via a web browser");return i.promise},facebook:function(n,t){var o=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var i=window.open("https://www.facebook.com/dialog/oauth?client_id="+n+"&redirect_uri=http://localhost/callback&response_type=token&scope="+t.join(","),"_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1].split("&"),r=[],a=0;a<t.length;a++)r[t[a].split("=")[0]]=t[a].split("=")[1];void 0!==r.access_token&&null!==r.access_token?o.resolve({access_token:r.access_token,expires_in:r.expires_in}):o.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin");else o.reject("Cannot authenticate via a web browser");return o.promise},linkedin:function(t,o,r,i){var a=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var u=window.open("https://www.linkedin.com/uas/oauth2/authorization?client_id="+t+"&redirect_uri=http://localhost/callback&scope="+r.join(" ")+"&response_type=code&state="+i,"_blank","location=no,clearsessioncache=yes,clearcache=yes");u.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:"https://www.linkedin.com/uas/oauth2/accessToken",data:"client_id="+t+"&client_secret="+o+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){a.resolve(e)}).error(function(){a.reject("Problem authenticating")}).finally(function(){setTimeout(function(){u.close()},10)}))}),u.addEventListener("exit",function(){a.reject("The sign in flow was canceled")})}else a.reject("Could not find InAppBrowser plugin");else a.reject("Cannot authenticate via a web browser");return a.promise},instagram:function(n,t){var o=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var i=window.open("https://api.instagram.com/oauth/authorize/?client_id="+n+"&redirect_uri=http://localhost/callback&scope="+t.join(" ")+"&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var t=e.url.split("#")[1].split("&"),r=[],a=0;a<t.length;a++)r[t[a].split("=")[0]]=t[a].split("=")[1];void 0!==r.access_token&&null!==r.access_token?o.resolve({access_token:r.access_token}):o.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin");else o.reject("Cannot authenticate via a web browser");return o.promise},box:function(t,o,r){var i=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var c=window.open("https://app.box.com/api/oauth2/authorize/?client_id="+t+"&redirect_uri=http://localhost/callback&state="+r+"&response_type=code","_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:"https://app.box.com/api/oauth2/token",data:"client_id="+t+"&client_secret="+o+"&redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){i.resolve(e)}).error(function(){i.reject("Problem authenticating")}).finally(function(){setTimeout(function(){c.close()},10)}))}),c.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin");else i.reject("Cannot authenticate via a web browser");return i.promise},reddit:function(t,o,r){var i=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var c=window.open("https://ssl.reddit.com/api/v1/authorize?client_id="+t+"&redirect_uri=http://localhost/callback&duration=permanent&state=ngcordovaoauth&scope="+r.join(",")+"&response_type=code","_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n.defaults.headers.post.Authorization="Basic "+btoa(t+":"+o),n({method:"post",url:"https://ssl.reddit.com/api/v1/access_token",data:"redirect_uri=http://localhost/callback&grant_type=authorization_code&code="+requestToken}).success(function(e){i.resolve(e)}).error(function(){i.reject("Problem authenticating")}).finally(function(){setTimeout(function(){c.close()},10)}))}),c.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin");else i.reject("Cannot authenticate via a web browser");return i.promise},twitter:function(o,r){var i=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser"))if("undefined"!=typeof jsSHA){var c={oauth_consumer_key:o,oauth_nonce:t.createNonce(10),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"},u=t.createSignature("POST","https://api.twitter.com/oauth/request_token",c,{oauth_callback:"http://localhost/callback"},r);n({method:"post",url:"https://api.twitter.com/oauth/request_token",headers:{Authorization:u.authorization_header,"Content-Type":"application/x-www-form-urlencoded"},data:"oauth_callback="+encodeURIComponent("http://localhost/callback")}).success(function(e){for(var o=e.split("&"),a={},u=0;u<o.length;u++)a[o[u].split("=")[0]]=o[u].split("=")[1];!1===a.hasOwnProperty("oauth_token")&&i.reject("Oauth request token was not received");var s=window.open("https://api.twitter.com/oauth/authenticate?oauth_token="+a.oauth_token,"_blank","location=no,clearsessioncache=yes,clearcache=yes");s.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var a=e.url.split("?")[1].split("&"),u={},l=0;l<a.length;l++)u[a[l].split("=")[0]]=a[l].split("=")[1];!1===u.hasOwnProperty("oauth_verifier")&&i.reject("Browser authentication failed to complete.  No oauth_verifier was returned"),delete c.oauth_signature,c.oauth_token=u.oauth_token;var f=t.createSignature("POST","https://api.twitter.com/oauth/access_token",c,{oauth_verifier:u.oauth_verifier},r);n({method:"post",url:"https://api.twitter.com/oauth/access_token",headers:{Authorization:f.authorization_header},params:{oauth_verifier:u.oauth_verifier}}).success(function(e){for(var n=e.split("&"),t={},o=0;o<n.length;o++)t[n[o].split("=")[0]]=n[o].split("=")[1];!1===t.hasOwnProperty("oauth_token_secret")&&i.reject("Oauth access token was not received"),i.resolve(t)}).error(function(e){i.reject(e)}).finally(function(){setTimeout(function(){s.close()},10)})}}),s.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}).error(function(e){i.reject(e)})}else i.reject("Missing jsSHA JavaScript library");else i.reject("Could not find InAppBrowser plugin");else i.reject("Cannot authenticate via a web browser");return i.promise},meetup:function(n){var t=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var r=window.open("https://secure.meetup.com/oauth2/authorize/?client_id="+n+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");r.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var o=e.url.split("#")[1].split("&"),i={},a=0;a<o.length;a++)i[o[a].split("=")[0]]=o[a].split("=")[1];void 0!==i.access_token&&null!==i.access_token?t.resolve(i):t.reject("Problem authenticating"),setTimeout(function(){r.close()},10)}}),r.addEventListener("exit",function(){t.reject("The sign in flow was canceled")})}else t.reject("Could not find InAppBrowser plugin");else t.reject("Cannot authenticate via a web browser");return t.promise},salesforce:function(n,t){var o="http://localhost/callback",i=function(e,n){return e.substr(0,n.length)===n},a=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var u=window.open(function(e,n,t){return e+"services/oauth2/authorize?display=touch&response_type=token&client_id="+escape(n)+"&redirect_uri="+escape(t)}(n,t,o),"_blank","location=no,clearsessioncache=yes,clearcache=yes");u.addEventListener("loadstart",function(e){if(i(e.url,o)){var n={},t=e.url.split("#")[1];if(t){var r=t.split("&");for(var c in r){var s=r[c].split("=");n[s[0]]=unescape(s[1])}}void 0===n||void 0===n.access_token?a.reject("Problem authenticating"):a.resolve(n),setTimeout(function(){u.close()},10)}}),u.addEventListener("exit",function(){a.reject("The sign in flow was canceled")})}else a.reject("Could not find InAppBrowser plugin");else a.reject("Cannot authenticate via a web browser");return a.promise},strava:function(t,o,r){var i=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var c=window.open("https://www.strava.com/oauth/authorize?client_id="+t+"&redirect_uri=http://localhost/callback&scope="+r.join(",")+"&response_type=code&approval_prompt=force","_blank","location=no,clearsessioncache=yes,clearcache=yes");c.addEventListener("loadstart",function(e){0===e.url.indexOf("http://localhost/callback")&&(requestToken=e.url.split("code=")[1],n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:"https://www.strava.com/oauth/token",data:"client_id="+t+"&client_secret="+o+"&code="+requestToken}).success(function(e){i.resolve(e)}).error(function(){i.reject("Problem authenticating")}).finally(function(){setTimeout(function(){c.close()},10)}))}),c.addEventListener("exit",function(){i.reject("The sign in flow was canceled")})}else i.reject("Could not find InAppBrowser plugin");else i.reject("Cannot authenticate via a web browser");return i.promise},foursquare:function(n){var t=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var r=window.open("https://foursquare.com/oauth2/authenticate?client_id="+n+"&redirect_uri=http://localhost/callback&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");r.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var o=e.url.split("#")[1].split("&"),i=[],a=0;a<o.length;a++)i[o[a].split("=")[0]]=o[a].split("=")[1];if(void 0!==i.access_token&&null!==i.access_token){var c={access_token:i.access_token,expires_in:i.expires_in};t.resolve(c)}else t.reject("Problem authenticating");setTimeout(function(){r.close()},10)}}),r.addEventListener("exit",function(){t.reject("The sign in flow was canceled")})}else t.reject("Could not find InAppBrowser plugin");else t.reject("Cannot authenticate via a web browser");return t.promise},magento:function(o,r,i){var a=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser"))if("undefined"!=typeof jsSHA){var u={oauth_callback:"http://localhost/callback",oauth_consumer_key:r,oauth_nonce:t.createNonce(5),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"},s=t.createSignature("POST",o+"/oauth/initiate",u,{oauth_callback:"http://localhost/callback"},i);n.defaults.headers.post.Authorization=s.authorization_header,n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:o+"/oauth/initiate",data:"oauth_callback=http://localhost/callback"}).success(function(e){for(var r=e.split("&"),c={},s=0;s<r.length;s++)c[r[s].split("=")[0]]=r[s].split("=")[1];!1===c.hasOwnProperty("oauth_token")&&a.reject("Oauth request token was not received");var l=c.oauth_token_secret,f=window.open(o+"/oauth/authorize?oauth_token="+c.oauth_token,"_blank","location=no,clearsessioncache=yes,clearcache=yes");f.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){for(var c=e.url.split("?")[1].split("&"),s={},d=0;d<c.length;d++)s[c[d].split("=")[0]]=c[d].split("=")[1];!1===s.hasOwnProperty("oauth_verifier")&&a.reject("Browser authentication failed to complete.  No oauth_verifier was returned"),delete u.oauth_signature,delete u.oauth_callback,u.oauth_token=s.oauth_token,u.oauth_nonce=t.createNonce(5),u.oauth_verifier=s.oauth_verifier;var p=t.createSignature("POST",o+"/oauth/token",u,{},i,l);n.defaults.headers.post.Authorization=p.authorization_header,n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n({method:"post",url:o+"/oauth/token"}).success(function(e){for(var n=e.split("&"),t={},o=0;o<n.length;o++)t[n[o].split("=")[0]]=n[o].split("=")[1];!1===t.hasOwnProperty("oauth_token_secret")&&a.reject("Oauth access token was not received"),a.resolve(t)}).error(function(e){a.reject(e)}).finally(function(){setTimeout(function(){f.close()},10)})}}),f.addEventListener("exit",function(){a.reject("The sign in flow was canceled")})}).error(function(e){a.reject(e)})}else a.reject("Missing jsSHA JavaScript library");else a.reject("Could not find InAppBrowser plugin");else a.reject("Cannot authenticate via a web browser");return a.promise},vkontakte:function(n,t){var o=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var i=window.open("https://oauth.vk.com/authorize?client_id="+n+"&redirect_uri=http://oauth.vk.com/blank.html&response_type=token&scope="+t.join(",")+"&display=touch&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");i.addEventListener("loadstart",function(e){var n=e.url.split("#");if("https://oauth.vk.com/blank.html"==n[0]||"http://oauth.vk.com/blank.html"==n[0]){for(var r=e.url.split("#")[1].split("&"),a=[],c=0;c<r.length;c++)a[r[c].split("=")[0]]=r[c].split("=")[1];void 0!==a.access_token&&null!==a.access_token?o.resolve({access_token:a.access_token,expires_in:a.expires_in,user_id:a.user_id}):o.reject("Problem authenticating"),setTimeout(function(){i.close()},10)}}),i.addEventListener("exit",function(){o.reject("The sign in flow was canceled")})}else o.reject("Could not find InAppBrowser plugin");else o.reject("Cannot authenticate via a web browser");return o.promise},imgur:function(n){var t=e.defer();if(window.cordova)if(!0===cordova.require("cordova/plugin_list").metadata.hasOwnProperty("org.apache.cordova.inappbrowser")){var r=window.open("https://api.imgur.com/oauth2/authorize?client_id="+n+"&response_type=token","_blank","location=no,clearsessioncache=yes,clearcache=yes");r.addEventListener("loadstart",function(e){if(0===e.url.indexOf("http://localhost/callback")){r.removeEventListener("exit",function(){}),r.close();for(var o=e.url.split("#")[1].split("&"),i=[],a=0;a<o.length;a++)i[o[a].split("=")[0]]=o[a].split("=")[1];void 0!==i.access_token&&null!==i.access_token?t.resolve({access_token:i.access_token,expires_in:i.expires_in,account_username:i.account_username}):t.reject("Problem authenticating")}}),r.addEventListener("exit",function(){t.reject("The sign in flow was canceled")})}else t.reject("Could not find InAppBrowser plugin");else t.reject("Cannot authenticate via a web browser");return t.promise}}}]),angular.module("ngCordova.plugins.oauthUtility",[]).factory("$cordovaOauthUtility",["$q",function(){return{createSignature:function(e,n,t,o,r,i){if("undefined"!=typeof jsSHA){for(var a=angular.copy(t),c=Object.keys(o),u=0;u<c.length;u++)a[c[u]]=encodeURIComponent(o[c[u]]);var s=e+"&"+encodeURIComponent(n)+"&",l=Object.keys(a).sort();for(u=0;u<l.length;u++)s+=encodeURIComponent(u==l.length-1?l[u]+"="+a[l[u]]:l[u]+"="+a[l[u]]+"&");var f=new jsSHA(s,"TEXT"),d="";i&&(d=encodeURIComponent(i)),t.oauth_signature=encodeURIComponent(f.getHMAC(encodeURIComponent(r)+"&"+d,"TEXT","SHA-1","B64"));var p=Object.keys(t),v="OAuth ";for(u=0;u<p.length;u++)v+=u==p.length-1?p[u]+'="'+t[p[u]]+'"':p[u]+'="'+t[p[u]]+'",';return{signature_base_string:s,authorization_header:v,signature:t.oauth_signature}}return"Missing jsSHA JavaScript library"},createNonce:function(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;e>o;o++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}}}]),angular.module("ngCordova.plugins.pinDialog",[]).factory("$cordovaPinDialog",["$q","$window",function(e,n){return{prompt:function(t,o,r){var i=e.defer();return n.plugins.pinDialog.prompt(t,function(e){i.resolve(e)},o,r),i.promise}}}]),angular.module("ngCordova.plugins.prefs",[]).factory("$cordovaPreferences",["$window","$q",function(e,n){return{set:function(t,o){var r=n.defer();return e.appgiraffe.plugins.applicationPreferences.set(t,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},get:function(t){var o=n.defer();return e.appgiraffe.plugins.applicationPreferences.get(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]),angular.module("ngCordova.plugins.printer",[]).factory("$cordovaPrinter",["$q","$window",function(e,n){return{isAvailable:function(){var t=e.defer();return n.plugin.printer.isAvailable(function(e){t.resolve(e)}),t.promise},print:function(t,o){var r=e.defer();return n.plugin.printer.print(t,o,function(){r.resolve()}),r.promise}}}]),angular.module("ngCordova.plugins.progressIndicator",[]).factory("$cordovaProgress",["$q",function(){return{show:function(e){var n=e||"Please wait...";return ProgressIndicator.show(n)},showSimple:function(e){var n=e||!1;return ProgressIndicator.showSimple(n)},showSimpleWithLabel:function(e,n){var t=e||!1,o=n||"Loading...";return ProgressIndicator.showSimpleWithLabel(t,o)},showSimpleWithLabelDetail:function(e,n,t){var o=e||!1,r=n||"Loading...",i=t||"Please wait";return ProgressIndicator.showSimpleWithLabelDetail(o,r,i)},showDeterminate:function(e,n){var t=e||!1,o=n||5e4;return ProgressIndicator.showDeterminate(t,o)},showDeterminateWithLabel:function(e,n,t){var o=e||!1,r=n||5e4,i=t||"Loading...";return ProgressIndicator.showDeterminateWithLabel(o,r,i)},showAnnular:function(e,n){var t=e||!1,o=n||5e4;return ProgressIndicator.showAnnular(t,o)},showAnnularWithLabel:function(e,n,t){var o=e||!1,r=n||5e4,i=t||"Loading...";return ProgressIndicator.showAnnularWithLabel(o,r,i)},showBar:function(e,n){var t=e||!1,o=n||5e4;return ProgressIndicator.showBar(t,o)},showBarWithLabel:function(e,n,t){var o=e||!1,r=n||5e4,i=t||"Loading...";return ProgressIndicator.showBarWithLabel(o,r,i)},showSuccess:function(e,n){var t=e||!1,o=n||"Success";return ProgressIndicator.showSuccess(t,o)},showText:function(e,n,t){var o=e||!1,r=n||"Warning",i=t||"center";return ProgressIndicator.showText(o,r,i)},hide:function(){return ProgressIndicator.hide()}}}]),angular.module("ngCordova.plugins.push",[]).factory("$cordovaPush",["$q","$window","$rootScope","$timeout",function(e,n,t,o){return{onNotification:function(e){o(function(){t.$broadcast("$cordovaPush:notificationReceived",e)})},register:function(t){var o,r=e.defer();return void 0!==t&&void 0===t.ecb&&(o=null===document.querySelector("[ng-app]")?"document.body":"document.querySelector('[ng-app]')",t.ecb="angular.element("+o+").injector().get('$cordovaPush').onNotification"),n.plugins.pushNotification.register(function(e){r.resolve(e)},function(e){r.reject(e)},t),r.promise},unregister:function(t){var o=e.defer();return n.plugins.pushNotification.unregister(function(e){o.resolve(e)},function(e){o.reject(e)},t),o.promise},setBadgeNumber:function(t){var o=e.defer();return n.plugins.pushNotification.setApplicationIconBadgeNumber(function(e){o.resolve(e)},function(e){o.reject(e)},t),o.promise}}}]),angular.module("ngCordova.plugins.sms",[]).factory("$cordovaSms",["$q",function(e){return{send:function(n,t,o){var r=e.defer();return sms.send(n,t,o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.socialSharing",[]).factory("$cordovaSocialSharing",["$q","$window",function(e,n){return{share:function(t,o,r,i){var a=e.defer();return o=o||null,r=r||null,i=i||null,n.plugins.socialsharing.share(t,o,r,i,function(){a.resolve(!0)},function(){a.reject(!1)}),a.promise},shareViaTwitter:function(t,o,r){var i=e.defer();return o=o||null,r=r||null,n.plugins.socialsharing.shareViaTwitter(t,o,r,function(){i.resolve(!0)},function(){i.reject(!1)}),i.promise},shareViaWhatsApp:function(t,o,r){var i=e.defer();return o=o||null,r=r||null,n.plugins.socialsharing.shareViaWhatsApp(t,o,r,function(){i.resolve(!0)},function(){i.reject(!1)}),i.promise},shareViaFacebook:function(t,o,r){var i=e.defer();return t=t||null,o=o||null,r=r||null,n.plugins.socialsharing.shareViaFacebook(t,o,r,function(){i.resolve(!0)},function(){i.reject(!1)}),i.promise},shareViaFacebookWithPasteMessageHint:function(t,o,r,i){var a=e.defer();return o=o||null,r=r||null,n.plugins.socialsharing.shareViaFacebookWithPasteMessageHint(t,o,r,i,function(){a.resolve(!0)},function(){a.reject(!1)}),a.promise},shareViaSMS:function(t,o){var r=e.defer();return n.plugins.socialsharing.shareViaSMS(t,o,function(){r.resolve(!0)},function(){r.reject(!1)}),r.promise},shareViaEmail:function(t,o,r,i,a,c){var u=e.defer();return r=r||null,i=i||null,a=a||null,c=c||null,n.plugins.socialsharing.shareViaEmail(t,o,r,i,a,c,function(){u.resolve(!0)},function(){u.reject(!1)}),u.promise},shareVia:function(t,o,r,i,a){var c=e.defer();return o=o||null,r=r||null,i=i||null,a=a||null,n.plugins.socialsharing.shareVia(t,o,r,i,a,function(){c.resolve(!0)},function(){c.reject(!1)}),c.promise},canShareViaEmail:function(){var t=e.defer();return n.plugins.socialsharing.canShareViaEmail(function(){t.resolve(!0)},function(){t.reject(!1)}),t.promise},canShareVia:function(t,o,r,i,a){var c=e.defer();return n.plugins.socialsharing.canShareVia(t,o,r,i,a,function(e){c.resolve(e)},function(e){c.reject(e)}),c.promise},available:function(){var n=e.defer();window.plugins.socialsharing.available(function(e){e?n.resolve():n.reject()})}}}]),angular.module("ngCordova.plugins.spinnerDialog",[]).factory("$cordovaSpinnerDialog",["$window",function(e){return{show:function(n,t,o){return o=o||!1,e.plugins.spinnerDialog.show(n,t,o)},hide:function(){return e.plugins.spinnerDialog.hide()}}}]),angular.module("ngCordova.plugins.splashscreen",[]).factory("$cordovaSplashscreen",[function(){return{hide:function(){return navigator.splashscreen.hide()},show:function(){return navigator.splashscreen.show()}}}]),angular.module("ngCordova.plugins.sqlite",[]).factory("$cordovaSQLite",["$q","$window",function(e,n){return{openDB:function(e,t){return void 0===t&&(t=0),n.sqlitePlugin.openDatabase({name:e,bgType:t})},execute:function(n,t,o){var r=e.defer();return n.transaction(function(e){e.executeSql(t,o,function(e,n){r.resolve(n)},function(e,n){r.reject(n)})}),r.promise},insertCollection:function(n,t,o){var r=e.defer(),i=o.slice(0);return n.transaction(function(e){!function n(){var o=i.splice(0,1)[0];try{e.executeSql(t,o,function(e,t){0===i.length?r.resolve(t):n()},function(e,n){r.reject(n)})}catch(a){r.reject(a)}}()}),r.promise},nestedExecute:function(n,t,o,r,i){var a=e.defer();return n.transaction(function(e){e.executeSql(t,r,function(e,n){a.resolve(n),e.executeSql(o,i,function(e,n){a.resolve(n)})})},function(e,n){a.reject(n)}),a.promise},deleteDB:function(t){var o=e.defer();return n.sqlitePlugin.deleteDatabase(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}}}]),angular.module("ngCordova.plugins.statusbar",[]).factory("$cordovaStatusbar",[function(){return{overlaysWebView:function(e){return StatusBar.overlaysWebView(!!e)},STYLES:{DEFAULT:0,LIGHT_CONTENT:1,BLACK_TRANSLUCENT:2,BLACK_OPAQUE:3},style:function(e){switch(e){case 0:return StatusBar.styleDefault();case 1:return StatusBar.styleLightContent();case 2:return StatusBar.styleBlackTranslucent();case 3:return StatusBar.styleBlackOpaque();default:return StatusBar.styleDefault()}},styleColor:function(e){return StatusBar.backgroundColorByName(e)},styleHex:function(e){return StatusBar.backgroundColorByHexString(e)},hide:function(){return StatusBar.hide()},show:function(){return StatusBar.show()},isVisible:function(){return StatusBar.isVisible}}}]),angular.module("ngCordova.plugins.toast",[]).factory("$cordovaToast",["$q","$window",function(e,n){return{showShortTop:function(t){var o=e.defer();return n.plugins.toast.showShortTop(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},showShortCenter:function(t){var o=e.defer();return n.plugins.toast.showShortCenter(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},showShortBottom:function(t){var o=e.defer();return n.plugins.toast.showShortBottom(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},showLongTop:function(t){var o=e.defer();return n.plugins.toast.showLongTop(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},showLongCenter:function(t){var o=e.defer();return n.plugins.toast.showLongCenter(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},showLongBottom:function(t){var o=e.defer();return n.plugins.toast.showLongBottom(t,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},show:function(t,o,r){var i=e.defer();return n.plugins.toast.show(t,o,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.touchid",[]).factory("$cordovaTouchID",["$q",function(e){return{checkSupport:function(){var n=e.defer();return window.cordova?touchid.checkSupport(function(e){n.resolve(e)},function(e){n.reject(e)}):n.reject("Not supported without cordova.js"),n.promise},authenticate:function(n){var t=e.defer();return window.cordova?touchid.authenticate(function(e){t.resolve(e)},function(e){t.reject(e)},n):t.reject("Not supported without cordova.js"),t.promise}}}]),angular.module("ngCordova.plugins.vibration",[]).factory("$cordovaVibration",[function(){return{vibrate:function(e){return navigator.notification.vibrate(e)},vibrateWithPattern:function(e,n){return navigator.notification.vibrateWithPattern(e,n)},cancelVibration:function(){return navigator.notification.cancelVibration()}}}]),angular.module("ngCordova.plugins.videoCapturePlus",[]).provider("$cordovaVideoCapturePlus",[function(){var e={};this.setLimit=function(n){e.limit=n},this.setMaxDuration=function(n){e.duration=n},this.setHighQuality=function(n){e.highquality=n},this.useFrontCamera=function(n){e.frontcamera=n},this.setPortraitOverlay=function(n){e.portraitOverlay=n},this.setLandscapeOverlay=function(n){e.landscapeOverlay=n},this.setOverlayText=function(n){e.overlayText=n},this.$get=["$q","$window",function(n,t){return{captureVideo:function(o){var r=n.defer();return t.plugins.videocaptureplus?(t.plugins.videocaptureplus.captureVideo(r.resolve,r.reject,angular.extend({},e,o)),r.promise):(r.resolve(null),r.promise)}}}]}]),angular.module("ngCordova.plugins.zip",[]).factory("$cordovaZip",["$q","$window",function(e,n){return{unzip:function(t,o){var r=e.defer();return n.zip.unzip(t,o,function(e){0===e?r.resolve():r.reject()},function(e){r.notify(e)}),r.promise}}}]),function(e,n){"use strict";var r=["ng","oc.lazyLoad"],o={},t=[],i=[],a=[],s=[],u=e.noop,c={},l=[];e.module("oc.lazyLoad",["ng"]).provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(d,f,p,m,v,y){function L(n,o,t){if(o){var i,s,d,f=[];for(i=o.length-1;i>=0;i--)if(s=o[i],e.isString(s)||(s=E(s)),s&&-1===l.indexOf(s)&&(!w[s]||-1!==a.indexOf(s))){var h=-1===r.indexOf(s);if(d=g(s),h&&(r.push(s),L(n,d.requires,t)),d._runBlocks.length>0)for(c[s]=[];d._runBlocks.length>0;)c[s].push(d._runBlocks.shift());e.isDefined(c[s])&&(h||t.rerun)&&(f=f.concat(c[s])),j(n,d._invokeQueue,s,t.reconfig),j(n,d._configBlocks,s,t.reconfig),u(h?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",s),o.pop(),l.push(s)}var p=n.getInstanceInjector();e.forEach(f,function(e){p.invoke(e)})}}function $(n,r){function t(n,r){var o,t=!0;return r.length&&(o=i(n),e.forEach(r,function(e){t=t&&i(e)!==o})),t}function i(n){return e.isArray(n)?M(n.toString()):e.isObject(n)?M(S(n)):e.isDefined(n)&&null!==n?M(n.toString()):n}var a=n[2][0],s=n[1],c=!1;e.isUndefined(o[r])&&(o[r]={}),e.isUndefined(o[r][s])&&(o[r][s]={});var l=function(e,n){o[r][s].hasOwnProperty(e)||(o[r][s][e]=[]),t(n,o[r][s][e])&&(c=!0,o[r][s][e].push(n),u("ocLazyLoad.componentLoaded",[r,s,e]))};if(e.isString(a))l(a,n[2][1]);else{if(!e.isObject(a))return!1;e.forEach(a,function(n,r){e.isString(n)?l(n,a[1]):l(r,n)})}return c}function j(n,r,o,i){if(r){var a,s,u,c;for(a=0,s=r.length;s>a;a++)if(u=r[a],e.isArray(u)){if(null!==n){if(!n.hasOwnProperty(u[0]))throw new Error("unsupported provider "+u[0]);c=n[u[0]]}var l=$(u,o);if("invoke"!==u[1])l&&e.isDefined(c)&&c[u[1]].apply(c,u[2]);else{var d=function(n){var r=t.indexOf(o+"-"+n);(-1===r||i)&&(-1===r&&t.push(o+"-"+n),e.isDefined(c)&&c[u[1]].apply(c,u[2]))};if(e.isFunction(u[2][0]))d(u[2][0]);else if(e.isArray(u[2][0]))for(var f=0,h=u[2][0].length;h>f;f++)e.isFunction(u[2][0][f])&&d(u[2][0][f])}}}}function E(n){var r=null;return e.isString(n)?r=n:e.isObject(n)&&n.hasOwnProperty("name")&&e.isString(n.name)&&(r=n.name),r}function _(n){if(!e.isString(n))return!1;try{return g(n)}catch(r){if(/No module/.test(r)||r.message.indexOf("$injector:nomod")>-1)return!1}}var w={},O={$controllerProvider:d,$compileProvider:p,$filterProvider:m,$provide:f,$injector:v,$animateProvider:y},x=!1,b=!1,z=[],D={};z.push=function(e){-1===this.indexOf(e)&&Array.prototype.push.apply(this,arguments)},this.config=function(n){e.isDefined(n.modules)&&(e.isArray(n.modules)?e.forEach(n.modules,function(e){w[e.name]=e}):w[n.modules.name]=n.modules),e.isDefined(n.debug)&&(x=n.debug),e.isDefined(n.events)&&(b=n.events)},this._init=function(o){if(0===i.length){var t=[o],a=["ng:app","ng-app","x-ng-app","data-ng-app"],u=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,c=function(e){return e&&t.push(e)};e.forEach(a,function(n){a[n]=!0,c(document.getElementById(n)),n=n.replace(":","\\:"),void 0!==o[0]&&o[0].querySelectorAll&&(e.forEach(o[0].querySelectorAll("."+n),c),e.forEach(o[0].querySelectorAll("."+n+"\\:"),c),e.forEach(o[0].querySelectorAll("["+n+"]"),c))}),e.forEach(t,function(n){if(0===i.length){var r=" "+o.className+" ",t=u.exec(r);t?i.push((t[2]||"").replace(/\s+/g,",")):e.forEach(n.attributes,function(e){0===i.length&&a[e.name]&&i.push(e.value)})}})}0!==i.length||(n.jasmine||n.mocha)&&e.isDefined(e.mock)||console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.");var l=function d(n){if(-1===r.indexOf(n)){r.push(n);var o=e.module(n);j(null,o._invokeQueue,n),j(null,o._configBlocks,n),e.forEach(o.requires,d)}};e.forEach(i,function(e){l(e)}),i=[],s.pop()};var S=function(n){try{return JSON.stringify(n)}catch(r){var o=[];return JSON.stringify(n,function(n,r){if(e.isObject(r)&&null!==r){if(-1!==o.indexOf(r))return;o.push(r)}return r})}},M=function(e){var n,r,o,t=0;if(0==e.length)return t;for(n=0,o=e.length;o>n;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return t};this.$get=["$log","$rootElement","$rootScope","$cacheFactory","$q",function(n,t,a,c,d){function f(e){var r=d.defer();return n.error(e.message),r.reject(e),r.promise}var p,m=c("ocLazyLoad");return x||(n={},n.error=e.noop,n.warn=e.noop,n.info=e.noop),O.getInstanceInjector=function(){return p||(p=t.data("$injector")||e.injector())},u=function(e,r){b&&a.$broadcast(e,r),x&&n.info(e,r)},{_broadcast:u,_$log:n,_getFilesCache:function(){return m},toggleWatch:function(e){e?s.push(!0):s.pop()},getModuleConfig:function(n){if(!e.isString(n))throw new Error("You need to give the name of the module to get");return w[n]?e.copy(w[n]):null},setModuleConfig:function(n){if(!e.isObject(n))throw new Error("You need to give the module config object to set");return w[n.name]=n,n},getModules:function(){return r},isLoaded:function(n){if(e.isString(n)&&(n=[n]),e.isArray(n)){var t,i;for(t=0,i=n.length;i>t;t++)if(!function(e){var n=r.indexOf(e)>-1;return n||(n=!!_(e)),n}(n[t]))return!1;return!0}throw new Error("You need to define the module(s) name(s)")},_getModuleName:E,_getModule:function(e){try{return g(e)}catch(n){throw(/No module/.test(n)||n.message.indexOf("$injector:nomod")>-1)&&(n.message='The module "'+S(e)+'" that you are trying to load does not exist. '+n.message),n}},moduleExists:_,_loadDependencies:function(n,r){var o,t,i,a=[],s=this;if(null===(n=s._getModuleName(n)))return d.when();try{o=s._getModule(n)}catch(u){return f(u)}return t=s.getRequires(o),e.forEach(t,function(o){if(e.isString(o)){var t=s.getModuleConfig(o);if(null===t)return void z.push(o);o=t,t.name=void 0}if(s.moduleExists(o.name))return 0!==(i=o.files.filter(function(e){return s.getModuleConfig(o.name).files.indexOf(e)<0})).length&&s._$log.warn('Module "',n,'" attempted to redefine configuration for dependency. "',o.name,'"\n Additional Files Loaded:',i),e.isDefined(s.filesLoader)?void a.push(s.filesLoader(o,r).then(function(){return s._loadDependencies(o)})):f(new Error("Error: New dependencies need to be loaded from external files ("+o.files+"), but no loader has been defined."));if(e.isArray(o)){var u=[];e.forEach(o,function(e){var n=s.getModuleConfig(e);null===n?u.push(e):n.files&&(u=u.concat(n.files))}),u.length>0&&(o={files:u})}else e.isObject(o)&&o.hasOwnProperty("name")&&o.name&&(s.setModuleConfig(o),z.push(o.name));if(e.isDefined(o.files)&&0!==o.files.length){if(!e.isDefined(s.filesLoader))return f(new Error('Error: the module "'+o.name+'" is defined in external files ('+o.files+"), but no loader has been defined."));a.push(s.filesLoader(o,r).then(function(){return s._loadDependencies(o)}))}}),d.all(a)},inject:function(n){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],t=this,a=d.defer();if(e.isDefined(n)&&null!==n){if(e.isArray(n)){var s=[];return e.forEach(n,function(e){s.push(t.inject(e,r,o))}),d.all(s)}t._addToLoadList(t._getModuleName(n),!0,o)}if(i.length>0){var u=i.slice();!function f(e){z.push(e),D[e]=a.promise,t._loadDependencies(e,r).then(function(){try{l=[],L(O,z,r)}catch(e){return t._$log.error(e.message),void a.reject(e)}i.length>0?f(i.shift()):a.resolve(u)},function(e){a.reject(e)})}(i.shift())}else{if(r&&r.name&&D[r.name])return D[r.name];a.resolve()}return a.promise},getRequires:function(n){var o=[];return e.forEach(n.requires,function(e){-1===r.indexOf(e)&&o.push(e)}),o},_invokeQueue:j,_registerInvokeList:$,_register:L,_addToLoadList:h,_unregister:function(n){e.isDefined(n)&&e.isArray(n)&&e.forEach(n,function(e){o[e]=void 0})}}}],this._init(e.element(n.document))}]);var f=e.bootstrap;e.bootstrap=function(n,r,o){return e.forEach(r.slice(),function(e){h(e,!0,!0)}),f(n,r,o)};var h=function(n,r,o){(s.length>0||r)&&e.isString(n)&&-1===i.indexOf(n)&&(i.push(n),o&&a.push(n))},g=e.module;e.module=function(e,n,r){return h(e,!1,!0),g(e,n,r)},"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="oc.lazyLoad")}(angular,window),function(e){"use strict";e.module("oc.lazyLoad").directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse","$timeout",function(n,r,o,t,i){return{restrict:"A",terminal:!0,priority:1e3,compile:function(i,a){var s=i[0].innerHTML;return i.html(""),function(i,a,u){var c=t(u.ocLazyLoad);i.$watch(function(){return c(i)||u.ocLazyLoad},function(t){e.isDefined(t)&&n.load(t).then(function(){o.enter(s,a),r(a.contents())(i)})},!0)}}}}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q","$window","$interval",function(n,r,o,t){var a=!1,s=o.document.getElementsByTagName("head")[0]||o.document.getElementsByTagName("body")[0];return n.buildElement=function(u,c,l){var d,f,h=r.defer(),g=n._getFilesCache(),p=function(e){var n=(new Date).getTime();return e.indexOf("?")>=0?"&"===e.substring(0,e.length-1)?e+"_dc="+n:e+"&_dc="+n:e+"?_dc="+n};switch(e.isUndefined(g.get(c))&&g.put(c,h.promise),u){case"css":(d=o.document.createElement("link")).type="text/css",d.rel="stylesheet",d.href=!1===l.cache?p(c):c;break;case"js":(d=o.document.createElement("script")).src=!1===l.cache?p(c):c;break;default:g.remove(c),h.reject(new Error('Requested type "'+u+'" is not known. Could not inject "'+c+'"'))}d.onload=d.onreadystatechange=function(e){d.readyState&&!/^c|loade/.test(d.readyState)||f||(d.onload=d.onreadystatechange=null,f=1,n._broadcast("ocLazyLoad.fileLoaded",c),h.resolve())},d.onerror=function(){g.remove(c),h.reject(new Error("Unable to load "+c))},d.async=l.serie?0:1;var m=s.lastChild;if(l.insertBefore){var v=e.element(e.isDefined(window.jQuery)?l.insertBefore:document.querySelector(l.insertBefore));v&&v.length>0&&(m=v[0])}if(m.parentNode.insertBefore(d,m),"css"==u){var y=o.navigator.userAgent.toLowerCase();if(/iP(hone|od|ad)/.test(o.navigator.platform)){var L=o.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),$=parseFloat([parseInt(L[1],10),parseInt(L[2],10),parseInt(L[3]||0,10)].join("."));a=6>$}else if(y.indexOf("android")>-1){var j=parseFloat(y.slice(y.indexOf("android")+8));a=4.4>j}else if(y.indexOf("safari")>-1){var E=y.match(/version\/([\.\d]+)/i);a=E&&E[1]&&parseFloat(E[1])<6}if(a)var _=1e3,w=t(function(){try{d.sheet.cssRules,t.cancel(w),d.onload()}catch(e){--_<=0&&d.onerror()}},20)}return h.promise},n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q",function(n,r){return n.filesLoader=function(o){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=[],a=[],s=[],u=[],c=null,l=n._getFilesCache();n.toggleWatch(!0),e.extend(t,o);var d=function(r){var o,d=null;if(e.isObject(r)&&(d=r.type,r=r.path),c=l.get(r),e.isUndefined(c)||!1===t.cache){if(null!==(o=/^(css|less|html|htm|js)?(?=!)/.exec(r))&&(d=o[1],r=r.substr(o[1].length+1,r.length)),!d)if(null!==(o=/[.](css|less|html|htm|js)?((\?|#).*)?$/.exec(r)))d=o[1];else{if(n.jsLoader.hasOwnProperty("ocLazyLoadLoader")||!n.jsLoader.hasOwnProperty("requirejs"))return void n._$log.error("File type could not be determined. "+r);d="js"}"css"!==d&&"less"!==d||-1!==i.indexOf(r)?"html"!==d&&"htm"!==d||-1!==a.indexOf(r)?"js"===d||-1===s.indexOf(r)?s.push(r):n._$log.error("File type is not valid. "+r):a.push(r):i.push(r)}else c&&u.push(c)};if(t.serie?d(t.files.shift()):e.forEach(t.files,function(e){d(e)}),i.length>0){var f=r.defer();n.cssLoader(i,function(r){e.isDefined(r)&&n.cssLoader.hasOwnProperty("ocLazyLoadLoader")?(n._$log.error(r),f.reject(r)):f.resolve()},t),u.push(f.promise)}if(a.length>0){var h=r.defer();n.templatesLoader(a,function(r){e.isDefined(r)&&n.templatesLoader.hasOwnProperty("ocLazyLoadLoader")?(n._$log.error(r),h.reject(r)):h.resolve()},t),u.push(h.promise)}if(s.length>0){var g=r.defer();n.jsLoader(s,function(r){e.isDefined(r)&&(n.jsLoader.hasOwnProperty("ocLazyLoadLoader")||n.jsLoader.hasOwnProperty("requirejs"))?(n._$log.error(r),g.reject(r)):g.resolve()},t),u.push(g.promise)}if(0===u.length){var p=r.defer(),m="Error: no file to load has been found, if you're trying to load an existing module you should use the 'inject' method instead of 'load'.";return n._$log.error(m),p.reject(m),p.promise}return t.serie&&t.files.length>0?r.all(u).then(function(){return n.filesLoader(o,t)}):r.all(u).finally(function(e){return n.toggleWatch(!1),e})},n.load=function(o){var t,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=this,s=null,u=[],c=r.defer(),l=e.copy(o),d=e.copy(i);if(e.isArray(l))return e.forEach(l,function(e){u.push(a.load(e,d))}),r.all(u).then(function(e){c.resolve(e)},function(e){c.reject(e)}),c.promise;if(e.isString(l)?(s=a.getModuleConfig(l))||(s={files:[l]}):e.isObject(l)&&(s=e.isDefined(l.path)&&e.isDefined(l.type)?{files:[l]}:a.setModuleConfig(l)),null===s)return t='Module "'+(a._getModuleName(l)||"unknown")+'" is not configured, cannot load.',n._$log.error(t),c.reject(new Error(t)),c.promise;e.isDefined(s.template)&&(e.isUndefined(s.files)&&(s.files=[]),e.isString(s.template)?s.files.push(s.template):e.isArray(s.template)&&s.files.concat(s.template));var h=e.extend({},d,s);return e.isUndefined(s.files)&&e.isDefined(s.name)&&n.moduleExists(s.name)?n.inject(s.name,h,!0):(n.filesLoader(s,h).then(function(){n.inject(null,h).then(function(e){c.resolve(e)},function(e){c.reject(e)})},function(e){c.reject(e)}),c.promise)},n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q",function(n,r){return n.cssLoader=function(o,t,i){var a=[];e.forEach(o,function(e){a.push(n.buildElement("css",e,i))}),r.all(a).then(function(){t()},function(e){t(e)})},n.cssLoader.ocLazyLoadLoader=!0,n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q",function(n,r){return n.jsLoader=function(o,t,i){var a=[];e.forEach(o,function(e){a.push(n.buildElement("js",e,i))}),r.all(a).then(function(){t()},function(e){t(e)})},n.jsLoader.ocLazyLoadLoader=!0,n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$templateCache","$q","$http",function(n,r,o,t){return n.templatesLoader=function(i,a,s){var u=[],c=n._getFilesCache();return e.forEach(i,function(n){var i=o.defer();u.push(i.promise),t.get(n,s).success(function(o){e.isString(o)&&o.length>0&&e.forEach(e.element(o),function(e){"SCRIPT"===e.nodeName&&"text/ng-template"===e.type&&r.put(e.id,e.innerHTML)}),e.isUndefined(c.get(n))&&c.put(n,!0),i.resolve()}).error(function(e){i.reject(new Error('Unable to load template file "'+n+'": '+e))})}),o.all(u).then(function(){a()},function(e){a(e)})},n.templatesLoader.ocLazyLoadLoader=!0,n}])}])}(angular),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,n){var r;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),t=o.length>>>0;if(0===t)return-1;var i=+n||0;if(Math.abs(i)===1/0&&(i=0),i>=t)return-1;for(r=Math.max(i>=0?i:t-Math.abs(i),0);t>r;){if(r in o&&o[r]===e)return r;r++}return-1}),function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return o(n||e)},p,p.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(r){!function(o,i){"use strict";"function"==typeof r&&r.amd?r("error-stack-parser",["stackframe"],i):"object"==typeof n?t.exports=i(e("stackframe")):o.ErrorStackParser=i(o.StackFrame)}(this,function(e){"use strict";function t(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=t.call(n,e[o]);return r}function n(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var r=[],o=0;o<e.length;o++)t.call(n,e[o])&&r.push(e[o]);return r}function r(e,t){if("function"==typeof Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var o=/(^|@)\S+\:\d+/,i=/^\s*at .*(\S+\:\d+|\(native\))/m,a=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(i))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var n=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(o){return t(n(o.stack.split("\n"),function(e){return!!e.match(i)},this),function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),o=this.extractLocation(n.pop()),i=n.join(" ")||void 0,a=r(["eval","<anonymous>"],o[0])>-1?void 0:o[0];return new e(i,void 0,a,o[1],o[2],t)},this)},parseFFOrSafari:function(r){return t(n(r.stack.split("\n"),function(e){return!e.match(a)},this),function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var n=t.split("@"),r=this.extractLocation(n.pop()),o=n.join("@")||void 0;return new e(o,void 0,r[0],r[1],r[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),o=[],i=2,a=r.length;i<a;i+=2){var s=n.exec(r[i]);s&&o.push(new e(void 0,void 0,s[2],s[1],void 0,r[i]))}return o},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),o=[],i=0,a=r.length;i<a;i+=2){var s=n.exec(r[i]);s&&o.push(new e(s[3]||void 0,void 0,s[2],s[1],void 0,r[i]))}return o},parseOpera11:function(r){return t(n(r.stack.split("\n"),function(e){return!!e.match(o)&&!e.match(/^Error created at/)},this),function(t){var n,r=t.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(n=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e(a,s,o[0],o[1],o[2],t)},this)}}})}).call(this,void 0)},{stackframe:26}],2:[function(e,t,n){(function(e){!function(n,r){"use strict";"function"==typeof e&&e.amd?e(r):"object"==typeof t&&t.exports?t.exports=r():n.log=r()}(this,function(){"use strict";function e(e){return typeof console!==s&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):a)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==s&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=0;n<c.length;n++){var r=c[n];this[r]=n<e?a:this.methodFactory(r,e,t)}}function o(t,r,o){return e(t)||n.apply(this,arguments)}function i(e,t,n){function i(e){var t=(c[e]||"silent").toUpperCase();try{return void(window.localStorage[l]=t)}catch(n){}try{window.document.cookie=encodeURIComponent(l)+"="+t+";"}catch(n){}}function a(){var e;try{e=window.localStorage[l]}catch(t){}if(typeof e===s)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(l)+"=");r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===p.levels[e]&&(e=void 0),e}var u,p=this,l="loglevel";e&&(l+=":"+e),p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=n||o,p.getLevel=function(){return u},p.setLevel=function(t,n){if("string"==typeof t&&void 0!==p.levels[t.toUpperCase()]&&(t=p.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=p.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(u=t,!1!==n&&i(t),r.call(p,t,e),typeof console===s&&t<p.levels.SILENT)return"No console available for logging"},p.setDefaultLevel=function(e){a()||p.setLevel(e,!1)},p.enableAll=function(e){p.setLevel(p.levels.TRACE,e)},p.disableAll=function(e){p.setLevel(p.levels.SILENT,e)};var f=a();null==f&&(f=null==t?"WARN":t),p.setLevel(f,!1)}var a=function(){},s="undefined",c=["trace","debug","info","warn","error"],u=new i,p={};u.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new i(e,u.getLevel(),u.methodFactory)),t};var l=typeof window!==s?window.log:void 0;return u.noConflict=function(){return typeof window!==s&&window.log===u&&(window.log=l),u},u})}).call(this,void 0)},{}],3:[function(e,t,n){t.exports={createValidFrames:function(e){var t=[];return Array.isArray(e)&&(t=e.filter(function(e){return void 0!==e.filename&&void 0!==e.lineno})),t}}},{}],4:[function(e,t,n){function r(e,t,n){this._logger=t,this._transport=e,this._config=n}function o(e){var t=i(e,c);return Object.keys(t).map(function(e){var n=t[e][0];n._start;n.transaction&&n.transaction._start;var o={},i=u.createValidFrames(n.frames);return i.length>0&&(o._frames=i),{transaction:n.transaction.name,transaction_kind:n.transaction.type,signature:n.signature,kind:n.type,timestamp:n.transaction._startStamp.toISOString(),parents:n.ancestors(),extra:o,_group:e}}).sort(function(e,t){return e.start_time-t.start_time})}function i(e,t){var n={};return e.forEach(function(e){var r=t(e);r in n?n[r].push(e):n[r]=[e],e._traceGroup=r}),n}function a(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())}function s(e){return[a(e._startStamp).getTime(),e.name,e.result,e.type].join("-")}function c(e){var t=e.ancestors().map(function(e){return e.signature}).join(",");return[a(e.transaction._startStamp).getTime(),e.transaction.name,t,e.signature,e.type].join("-")}var u=e("./backend_utils"),p=e("../lib/utils");t.exports=r,r.prototype.sendError=function(e){if(this._config.isValid()){e.stacktrace.frames=u.createValidFrames(e.stacktrace.frames);var t={};e.stacktrace.frames.forEach(function(e){e.debug&&e.debug.length>0&&(t[e.abs_path]=e.debug.join(" - "),delete e.debug)}),Object.keys(t).length>0&&(e.extra.debug||(e.extra.debug={}),e.extra.debug.file_errors=t);var n=this.getHeaders();if(e=this._config.applyFilters(e))return this._transport.sendError(e,n);this._logger.debug("opbeat.transport.sendToOpbeat.cancelled")}else this._logger.debug("Config is not valid")},r.prototype.getHeaders=function(){var e=this._config.get("platform"),t={"X-Opbeat-Client":this._config.getAgentName()};if(e){var n=[];e.platform&&n.push("platform="+e.platform),e.framework&&n.push("framework="+e.framework),n.length>0&&(t["X-Opbeat-Platform"]=n.join(" "))}return t},r.prototype.groupSmallContinuouslySimilarTraces=function(e,t){var n=e.duration(),r=[],o=1;return e.traces.forEach(function(i,a){if(0===r.length)r.push(i);else{var s=r[r.length-1],c=s.type===i.type&&s.signature===i.signature&&i.duration()/n<t&&(i._start-s._end)/n<t,u=e.traces.length===a+1;c&&(o++,s._end=i._end,s.calcDiff()),o>1&&(!c||u)&&(s.signature=o+"x "+s.signature,o=1),c||r.push(i)}}),r},r.prototype.checkBrowserResponsiveness=function(e,t,n){var r=e.browserResponsivenessCounter;if(void 0===t||void 0===r)return!0;var o=e._rootTrace.duration();return r+n>=Math.floor(o/t)},r.prototype.setTransactionContextInfo=function(e){var t=this,n=t._config.get("performance.browserResponsivenessInterval"),r=t._config.get("performance.checkBrowserResponsiveness"),o=t._config.get("context");o&&e.addContextInfo(o);var a=e.contextInfo.url;if(a&&a.location){a.location=a.location.substring(0,511);var s=p.parseUrl(a.location),c=s.protocol;["http:","https:","file:"].indexOf(c)<0?delete a.location:(a.base=s.path,Object.keys(s.queryStringParsed).length>0&&(a.query=s.queryStringParsed),s.hash&&(a.hash=s.hash))}e.addContextInfo({system:{agent:t._config.getAgentName()}}),r&&(e.setDebugData("browserResponsivenessCounter",e.browserResponsivenessCounter),e.setDebugData("browserResponsivenessInterval",n))},r.prototype.sendTransactions=function(e){var t=this;if(this._config.isValid()){var n=t._config.get("performance.browserResponsivenessInterval"),r=t._config.get("performance.checkBrowserResponsiveness");e.forEach(function(e){if(e.traces.sort(function(e,t){return e._start-t._start}),t._config.get("performance.groupSimilarTraces")){var n=t._config.get("performance.similarTraceThreshold");e.traces=t.groupSmallContinuouslySimilarTraces(e,n)}t.setTransactionContextInfo(e)});var o=e.filter(function(e){if(r&&!e.isHardNavigation){var o=t._config.get("performance.browserResponsivenessBuffer"),i=e._rootTrace.duration();if(!t.checkBrowserResponsiveness(e,n,o))return t._logger.debug("Transaction was discarded! browser was not responsive enough during the transaction."," duration:",i," browserResponsivenessCounter:",e.browserResponsivenessCounter,"interval:",n),!1}return!0});if(o.length>0){var i=this._formatTransactions(o),a=this.getHeaders();return this._transport.sendTransaction(i,a).then(void 0,function(e){return t._logger.warn("Failed sending transactions!",e),Promise.reject(e)})}}else this._logger.debug("Config is not valid")},r.prototype._formatTransactions=function(e){var t=this.groupTransactions(e),n=[].concat.apply([],e.map(function(e){return e.traces})),r=o(n),i=this.getRawGroupedTracesTimings(n,r);return r.forEach(function(e){delete e._group,"string"==typeof e.signature&&(e.signature=e.signature.substring(0,511))}),{transactions:t,traces:{groups:r,raw:i}}},r.prototype.groupTransactions=function(e){var t=i(e,s);return Object.keys(t).map(function(e){var n=t[e][0],r=t[e].map(function(e){return e.duration()});return{transaction:n.name,result:n.result,kind:n.type,timestamp:a(n._startStamp).toISOString(),durations:r}})},r.prototype.getRawGroupedTracesTimings=function(e,t){var n=function(e,t){var n=0,r=c(t);return e.forEach(function(e,t){e._group===r&&(n=t)}),n},r=this,o=i(e,function(e){return e.transaction.name+"|"+e.transaction._start});return Object.keys(o).map(function(e){var i=o[e],a=i[0].transaction,s=[a.duration()];return i.forEach(function(e){var o=n(t,e),i=e._start-a._start;i>a.duration()?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.relativeTraceStartLargerThanTransactionDuration","color: #ff0000",i,a._start,a.duration(),{trace:e,transaction:a}):i<0?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.negativeRelativeTraceStart!","color: #ff0000",i,e._start,a._start,e):e.duration()>a.duration()?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.traceDurationLargerThanTranscationDuration","color: #ff0000",e.duration(),a.duration(),{trace:e,transaction:a}):s.push([o,i,e.duration()])}),a.contextInfo&&Object.keys(a.contextInfo).length>0&&s.push(a.contextInfo),s})}},{"../lib/utils":16,"./backend_utils":3}],5:[function(e,t,n){var o=e("./patches/xhrPatch");t.exports=function(e){o(e)}},{"./patches/xhrPatch":7}],6:[function(e,t,n){function r(e){return"__opbeat_symbol__"+e}function i(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(n){return function(){return t(this,arguments)}}}t.exports={patchFunction:function(e,t){},_copyProperties:function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},wrapAfter:function(e,t){return function(){var n=e.apply(this,arguments);return t.apply(this,arguments),n}},wrapBefore:function(e,t){return function(){return t.apply(this,arguments),e.apply(this,arguments)}},wrap:function(e,t,n){return function(){t.apply(this,arguments);var r=e.apply(this,arguments);return n.apply(this,arguments),r}},argumentsToArray:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},opbeatSymbol:r,patchMethod:function(e,t,n){for(var o=e;o&&!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);!o&&e[t]&&(o=e);var a,s=r(t);return o&&!(a=o[s])&&(a=o[s]=o[t],o[t]=i(t,n(a,s,t))),a}}},{}],7:[function(e,t,n){var r=e("../patchUtils"),o=r.opbeatSymbol("url"),i=r.opbeatSymbol("method"),a=r.opbeatSymbol("isAsync");t.exports=function(){r.patchMethod(window.XMLHttpRequest.prototype,"open",function(e){return function(t,n){t[i]=n[0],t[o]=n[1],t[a]=n[2],e.apply(t,n)}})}},{"../patchUtils":6}],8:[function(e,t,n){function r(){this.services={}}var o=e("../backend/opbeat_backend"),i=e("loglevel"),a=e("../lib/config"),s=e("../lib/utils"),c=e("../lib/transport"),u=e("../exceptions/exceptionHandler"),p=e("../exceptions/stackFrameService"),l=e("../performance/serviceContainer");r.prototype.getOpbeatBackend=function(){if(s.isUndefined(this.services.OpbeatBackend)){var e=this.getLogger(),t=this.getConfigService(),n=this.getTransport();this.services.OpbeatBackend=new o(n,e,t)}return this.services.OpbeatBackend},r.prototype.getTransport=function(){if(s.isUndefined(this.services.Transport)){var e=this.getConfigService(),t=this.getLogger();this.services.Transport=new c(e,t)}return this.services.Transport},r.prototype.setLogLevel=function(e,t){!0===t.get("debug")&&"trace"!==t.config.logLevel?e.setLevel("debug",!1):e.setLevel(t.get("logLevel"),!1)},r.prototype.getLogger=function(){if(s.isUndefined(this.services.Logger)){var e=this.getConfigService(),t=this;t.setLogLevel(i,e),e.subscribeToChange(function(n){t.setLogLevel(i,e)}),this.services.Logger=i}return this.services.Logger},r.prototype.getConfigService=function(){if(s.isUndefined(this.services.ConfigService)){var e=new a;e.init(),this.services.ConfigService=e}return this.services.ConfigService},r.prototype.getExceptionHandler=function(){if(s.isUndefined(this.services.ExceptionHandler)){var e=this.getLogger(),t=this.getConfigService(),n=new u(this.getOpbeatBackend(),t,e,this.getStackFrameService());this.services.ExceptionHandler=n}return this.services.ExceptionHandler},r.prototype.getStackFrameService=function(){if(s.isUndefined(this.services.StackFrameService)){var e=this.getLogger(),t=this.getConfigService(),n=new p(t,e);this.services.StackFrameService=n}return this.services.StackFrameService},r.prototype.getPerformanceServiceContainer=function(){return s.isUndefined(this.services.PerformanceServiceContainer)&&(this.services.PerformanceServiceContainer=new l(this)),this.services.PerformanceServiceContainer},t.exports=r},{"../backend/opbeat_backend":4,"../exceptions/exceptionHandler":10,"../exceptions/stackFrameService":11,"../lib/config":14,"../lib/transport":15,"../lib/utils":16,"../performance/serviceContainer":18,loglevel:2}],9:[function(e,t,n){function r(){this.subscriptions=[]}r.prototype.subscribe=function(e){var t=this;return this.subscriptions.push(e),function(){var n=t.subscriptions.indexOf(e);n>-1&&t.subscriptions.splice(n,1)}},r.prototype.applyAll=function(e,t){this.subscriptions.forEach(function(n){try{n.apply(e,t)}catch(r){console.log(r,r.stack)}},this)},t.exports=r},{}],10:[function(e,t,n){function r(e){var t={};return Object.keys(e).forEach(function(n){if("stack"!==n){var r=e[n];if(null!==r){switch(typeof r){case"function":return;case"object":if("function"!=typeof r.toISOString)return;r=r.toISOString()}t[n]=r}}}),t}var o=e("./stacktrace"),i=e("../lib/utils"),a=function(e,t,n,r){this._opbeatBackend=e,this._config=t,this._logger=n,this._stackFrameService=r};a.prototype.install=function(){window.onerror=function(e,t,n,r,o){var i={eventObject:{msg:e,file:t,line:n,col:r}};this._processError(o,i)}.bind(this)},a.prototype.uninstall=function(){window.onerror=null},a.prototype.processError=function(e,t){return this._processError(e,t)},a.prototype.getExceptionData=function(e,t){var n=t&&t.eventObject||{},a=n.msg,s=n.file,c=n.line,u=n.col,p=e;if(n.msg&&"string"!=typeof n.msg){var l=n.msg;a=l.message,s=s||l.filename,c=c||l.lineno,u=u||l.colno,p=e||l.error}if("Script error."!==a||s){var f=p?r(p):void 0;t&&t.extra&&(f=i.merge({},f,t.extra));var d={message:p?p.message:a,type:p?p.name:null,fileurl:s||null,lineno:c||null,colno:u||null,extra:f};d.type||(d.message&&d.message.indexOf(":")>-1?d.type=d.message.split(":")[0]:d.type="");var g=this;return(p?o.fromError(p):new Promise(function(e,t){e([{fileName:d.fileurl,lineNumber:d.lineno,columnNumber:d.colno}])})).then(function(e){return d.stack=e||[],g._stackFrameService.stackInfoToOpbeatException(d).then(function(e){return g._stackFrameService.processOpbeatException(e,g._config.get("context.user"),g._config.get("context.extra"))})})}},a.prototype._processError=function(e,t){var n=this,r=n.getExceptionData(e,t);if(r)return r.then(function(e){return n._opbeatBackend.sendError(e)}).catch(function(e){n._logger.warn(e)})},t.exports=a},{"../lib/utils":16,"./stacktrace":12}],11:[function(e,t,n){function r(e,t){this._logger=t,this._config=e}var o=e("../lib/utils"),i=e("./stacktrace"),a=function(e){for(var t=Promise.resolve(),n=[],r=0;r<e.length;++r)n.push(t=t.then(e[r]));return Promise.all(n)};r.prototype.getFramesForCurrent=function(){return i.get().then(function(e){var t=e.map(function(e){return this.buildOpbeatFrame.bind(this,e)}.bind(this));return a(t).then(function(e){return e})}.bind(this))},r.prototype.buildOpbeatFrame=function(e){return new Promise(function(t,n){if(!e.fileName&&!e.lineNumber)return t({});if(!e.columnNumber&&!e.lineNumber)return t({});var r=this.cleanFilePath(e.fileName),o=this.filePathToFileName(r);this.isFileInline(r)&&(o="(inline script)"),t({filename:o,lineno:e.lineNumber,colno:e.columnNumber,function:e.functionName||"<anonymous>",abs_path:e.fileName,in_app:this.isFileInApp(r),debug:[]})}.bind(this))},r.prototype.stackInfoToOpbeatException=function(e){return new Promise(function(t,n){if(e.stack&&e.stack.length){var r=e.stack.map(function(e){return this.buildOpbeatFrame.bind(this,e)}.bind(this));a(r).then(function(n){e.frames=n,e.stack=null,t(e)})}else t(e)}.bind(this))},r.prototype.processOpbeatException=function(e,t,n){var r,i=e.type,a=String(e.message)||"Script error",s=this.cleanFilePath(e.fileurl),c=this.filePathToFileName(s),u=e.frames||[];u&&u.length?u.reverse():c&&u.push({filename:c,lineno:e.lineno});var p={frames:u};if(!c&&u.length){var l=u[u.length-1];c=l.filename?l.filename:"(inline script)"}r=this.isFileInline(s)?"(inline script)":c;var f="";i&&"string"==typeof a&&0!==a.indexOf("Error:")&&(f=i+": ");var d={message:f+a,culprit:r,exception:{type:i,value:a},http:{url:window.location.href},stacktrace:p,user:t||{},level:null,logger:null,machine:null},h=this.getBrowserSpecificMetadata();return d.extra=o.merge({},h,n,e.extra),this._logger.debug("opbeat.exceptions.processOpbeatException",d),d},r.prototype.cleanFilePath=function(e){return e||(e=""),"<anonymous>"===e&&(e=""),e},r.prototype.filePathToFileName=function(e){var t=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return e.indexOf(t)>-1&&(e=e.replace(t+"/","")),e},r.prototype.isFileInline=function(e){return!!e&&0===window.location.href.indexOf(e)},r.prototype.isFileInApp=function(e){var t=this._config.get("libraryPathPattern");return!RegExp(t).test(e)},r.prototype.getBrowserSpecificMetadata=function(){var e=o.getViewPortInfo();return{environment:{utcOffset:(new Date).getTimezoneOffset()/-60,browserWidth:e.width,browserHeight:e.height,screenWidth:window.screen.width,screenHeight:window.screen.height,language:navigator.language,userAgent:navigator.userAgent,platform:navigator.platform},page:{referer:document.referrer,host:document.domain,location:window.location.href}}},t.exports=r},{"../lib/utils":16,"./stacktrace":12}],12:[function(e,t,n){function r(e){return e.stack||e["opera#sourceloc"]}function o(e){return e.map(function(e){return e.functionName&&(e.functionName=i(e.functionName)),e})}function i(e){var t=e.split("/");return e=t.length>1?["Object",t[t.length-1]].join("."):t[0],e=e.replace(/.<$/gi,".<anonymous>"),e=e.replace(/^Anonymous function$/,"<anonymous>"),t=e.split("."),e=t.length>1?t[t.length-1]:t[0]}var a=e("error-stack-parser"),s=e("stack-generator"),c=e("../lib/utils"),u={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")&&-1===(e.functionName||"").indexOf("opbeatFunctionWrapper")&&-1===(e.fileName||"").indexOf("opbeat-angular.js")&&-1===(e.fileName||"").indexOf("opbeat-angular.min.js")&&-1===(e.fileName||"").indexOf("opbeat.js")&&-1===(e.fileName||"").indexOf("opbeat.min.js")}};t.exports={get:function(e){try{throw new Error}catch(t){return r(t)?this.fromError(t,e):this.generateArtificially(e)}},generateArtificially:function(e){e=c.mergeObject(u,e);var t=s.backtrace(e);return"function"==typeof e.filter&&(t=t.filter(e.filter)),t=o(t),Promise.resolve(t)},fromError:function(e,t){return t=c.mergeObject(u,t),new Promise(function(n){var r=a.parse(e);"function"==typeof t.filter&&(r=r.filter(t.filter)),r=o(r),n(Promise.all(r.map(function(e){return new Promise(function(t){t(e)})})))})}}},{"../lib/utils":16,"error-stack-parser":1,"stack-generator":25}],13:[function(e,t,n){t.exports.ServiceFactory=e("./common/serviceFactory"),t.exports.ServiceContainer=e("./performance/serviceContainer"),t.exports.ConfigService=e("./lib/config"),t.exports.TransactionService=e("./performance/transactionService"),t.exports.Subscription=e("./common/subscription"),t.exports.patchUtils=e("./common/patchUtils"),t.exports.patchCommon=e("./common/patchCommon"),t.exports.utils=e("./lib/utils")},{"./common/patchCommon":5,"./common/patchUtils":6,"./common/serviceFactory":8,"./common/subscription":9,"./lib/config":14,"./lib/utils":16,"./performance/serviceContainer":18,"./performance/transactionService":21}],14:[function(e,t,n){function r(){this.config={},this.defaults={opbeatAgentName:"opbeat-js",VERSION:"v3.15.1",apiOrigin:"https://intake.opbeat.com",apiUrlPrefix:"/api/v1",isInstalled:!1,debug:!1,logLevel:"warn",orgId:null,appId:null,angularAppName:null,performance:{browserResponsivenessInterval:500,browserResponsivenessBuffer:3,checkBrowserResponsiveness:!0,enable:!0,enableStackFrames:!1,groupSimilarTraces:!0,similarTraceThreshold:.05,captureInteractions:!1,sendVerboseDebugInfo:!1,includeXHRQueryString:!1,capturePageLoad:!0},ignoreTransactions:[],libraryPathPattern:"(node_modules|bower_components|webpack)",context:{},platform:{}},this._changeSubscription=new a,this.filters=[]}function o(e){var t={},n=/^data\-([\w\-]+)$/;if(e)for(var r=e.attributes,o=0;o<r.length;o++){var a=r[o];if(n.test(a.nodeName)){var s=a.nodeName.match(n)[1];t[s=i.arrayMap(s.split("-"),function(e,t){return t>0?e.charAt(0).toUpperCase()+e.substring(1):e}).join("")]=a.value||a.nodeValue}}return t}var i=e("./utils"),a=e("../common/subscription");r.prototype.addFilter=function(e){if("function"!=typeof e)throw new Error("Argument to must be function");this.filters.push(e)},r.prototype.applyFilters=function(e){for(var t=0;t<this.filters.length;t++)if(!(e=this.filters[t](e)))return;return e},r.prototype.init=function(){var e=s();this.setConfig(e)},r.prototype.get=function(e){return i.arrayReduce(e.split("."),function(e,t){return e&&e[t]},this.config)},r.prototype.getEndpointUrl=function(e){return this.get("apiOrigin")+this.get("apiUrlPrefix")+"/organizations/"+this.get("orgId")+"/apps/"+this.get("appId")+"/client-side/"+e+"/"},r.prototype.set=function(e,t){var n=e.split("."),r=n.length-1,o=this.config;i.arraySome(n,function(e,n){if(void 0===e)return!0;if(n===r)o[e]=t;else{var i=o[e]||{};o[e]=i,o=i}})},r.prototype.getAgentName=function(){var e=this.config.VERSION;return(!e||e.indexOf("%%VERSION")>=0)&&(e="dev"),this.get("opbeatAgentName")+"/"+e},r.prototype.setConfig=function(e){e=e||{},this.config=i.merge({},this.defaults,this.config,e),this._changeSubscription.applyAll(this,[this.config])},r.prototype.subscribeToChange=function(e){return this._changeSubscription.subscribe(e)},r.prototype.isValid=function(){var e=["appId","orgId"],t=i.arrayMap(e,i.functionBind(function(e){return null===this.config[e]||void 0===this.config[e]},this));return-1===i.arrayIndexOf(t,!0)};var s=function(){return o(i.getCurrentScript())};r.prototype.VERSION="v3.15.1",r.prototype.isPlatformSupported=function(){return"function"==typeof Array.prototype.forEach&&"function"==typeof JSON.stringify&&"function"==typeof Function.bind&&window.performance&&"function"==typeof window.performance.now&&i.isCORSSupported()},t.exports=r},{"../common/subscription":9,"./utils":16}],15:[function(e,t,n){function r(e,t){this.configService=e,this.logger=t}function o(e,t,n,r,o){return new Promise(function(i,a){var s=new window.XMLHttpRequest;if(s.open(t,e,!0),s.timeout=1e4,"JSON"===n&&s.setRequestHeader("Content-Type","application/json"),o)for(var c in o)o.hasOwnProperty(c)&&s.setRequestHeader(c.toLowerCase(),o[c]);s.onreadystatechange=function(t){if(4===s.readyState){var n=s.status;if(0===n||n>399&&n<600){var r=new Error(e+" HTTP status: "+n);r.xhr=s,a(r)}else i(s.responseText)}},s.onerror=function(e){a(e)},"JSON"===n&&(r=JSON.stringify(r)),s.send(r)})}r.prototype.sendError=function(e,t){return this._sendToOpbeat("errors",e,t)},r.prototype.sendTransaction=function(e,t){return this._sendToOpbeat("transactions",e,t)},r.prototype._sendToOpbeat=function(e,t,n){var r=this;return this.logger.debug("opbeat.transport.sendToOpbeat",t),o(this.configService.getEndpointUrl(e),"POST","JSON",t,n).then(function(e){return r.logger.debug("opbeat.transport.makeRequest.success"),e},function(e){return r.logger.debug("opbeat.transport.makeRequest.error",e),Promise.reject(e)})},t.exports=r},{}],16:[function(e,t,n){function r(e){return null!==e&&"object"==typeof e}function o(e){return"function"==typeof e}var i=[].slice;t.exports={getViewPortInfo:function(){var e=document.documentElement,t=document.getElementsByTagName("body")[0];return{width:window.innerWidth||e.clientWidth||t.clientWidth,height:window.innerHeight||e.clientHeight||t.clientHeight}},mergeObject:function(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r},extend:function(e){return this.baseExtend(e,i.call(arguments,1),!1)},merge:function(e){return this.baseExtend(e,i.call(arguments,1),!0)},baseExtend:function a(e,t,n){for(var i=0,s=t.length;i<s;++i){var c=t[i];if(r(c)||o(c))for(var u=Object.keys(c),p=0,l=u.length;p<l;p++){var f=u[p],d=c[f];n&&r(d)?(r(e[f])||(e[f]=Array.isArray(d)?[]:{}),a(e[f],[d],!1)):e[f]=d}}return e},isObject:r,isFunction:o,arrayReduce:function(e,t,n){if(null==e)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var r=Object(e),o=r.length>>>0,i=0;if(!n){for(;i<o&&!(i in r);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");n=r[i++]}for(;i<o;i++)i in r&&(n=t(n,r[i],i,r));return n},arraySome:function(e,t,n){if(null==e)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof t)throw new TypeError;var r=Object(e),o=r.length>>>0;n||(n=void 0);for(var i=0;i<o;i++)if(i in r&&t.call(n,r[i],i,r))return!0;return!1},arrayMap:function(e,t,n){var r,o,i;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(e),s=a.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=n),o=new Array(s),i=0;i<s;){var c,u;i in a&&(c=a[i],u=t.call(r,c,i,a),o[i]=u),i++}return o},arrayIndexOf:function(e,t,n){var r;if(null==e)throw new TypeError('"arrayVal" is null or not defined');var o=Object(e),i=o.length>>>0;if(0===i)return-1;var a=+n||0;if(Math.abs(a)===1/0&&(a=0),a>=i)return-1;for(r=Math.max(a>=0?a:i-Math.abs(a),0);r<i;){if(r in o&&o[r]===t)return r;r++}return-1},functionBind:function(e,t){var n=Array.prototype.slice.call(arguments,2),r=function(){},o=function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))};return r.prototype=e.prototype,o.prototype=new r,o},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},isUndefined:function(e){return void 0===e},isCORSSupported:function(){return"withCredentials"in new window.XMLHttpRequest},getOpbeatScript:function(){if("undefined"!=typeof document)for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;t++){var r=e[t];if(r.src.indexOf("opbeat")>0)return r}},getCurrentScript:function(){if("undefined"!=typeof document){var e=document.currentScript;return e||this.getOpbeatScript()}},generateUuid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()},parseUrl:function(e){var n=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/.exec(e),r=n[1]||"",o=n[3]||"",i=n[5]?"#"+n[5]:"",a="";e.indexOf("://")>-1&&(a=e.split("://")[0]+":");for(var s={},c=o.split("&"),u=0,p=c.length;u<p;u++){var l=c[u];if(""!==l&&void 0!==l&&null!==l){var f=c[u].split("=");s[f.shift()]=f.join("=")}}return{protocol:a,path:r,queryString:o,queryStringParsed:s,hash:i}}}},{}],17:[function(e,t,n){function r(e,t){var n=t.duration();return n<s&&n>0&&t._start<=e._rootTrace._end&&t._end<=e._rootTrace._end}var o=e("./trace"),i=[["domainLookupStart","domainLookupEnd","DNS lookup"],["connectStart","connectEnd","Connect"],["requestStart","responseStart","Sending and waiting for first byte"],["responseStart","responseEnd","Downloading"],["domLoading","domInteractive","Fetching, parsing and sync. execution"],["domContentLoadedEventStart","domContentLoadedEventEnd",'"DOMContentLoaded" event handling'],["loadEventStart","loadEventEnd",'"load" event handling']],a=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],s=3e5;t.exports=function(e){if(e.isHardNavigation&&window.performance&&window.performance.timing){var t=window.performance.timing.fetchStart,n=window.performance.timing;e._rootTrace._start=e._start=0,e.type="page-load";for(var s=0;s<i.length;s++){var c=n[i[s][0]],u=n[i[s][1]];if(c&&u&&u-c!=0){var p=new o(e,i[s][2],"hard-navigation.browser-timing");p._start=n[i[s][0]]-t,p.ended=!0,p.setParent(e._rootTrace),p.end(),p._end=n[i[s][1]]-t,p.calcDiff(),r(e,p)||e.traces.splice(e.traces.indexOf(p),1)}}if(window.performance.getEntriesByType){var l=window.performance.getEntriesByType("resource"),f=e.traces.filter(function(e){return e.type.indexOf("ext.HttpRequest")>-1}).map(function(e){return e.signature.split(" ")[1]});for(s=0;s<l.length;s++){var d=l[s];if(!d.initiatorType||"xmlhttprequest"!==d.initiatorType)if("css"!==d.initiatorType&&"img"!==d.initiatorType&&"script"!==d.initiatorType&&"link"!==d.initiatorType){for(var h=!1,g=0;g<f.length;g++){var v=d.name.lastIndexOf(f[g]);if(v>-1&&v===d.name.length-f[g].length){h=!0;break}}if(h)continue}else{var m="resource";d.initiatorType&&(m+="."+d.initiatorType),(p=new o(e,d.name,m))._start=d.startTime,p.ended=!0,p.setParent(e._rootTrace),p.end(),p._end=d.responseEnd,p.calcDiff(),r(e,p)||e.traces.splice(e.traces.indexOf(p),1)}}}e._adjustStartToEarliestTrace(),e._adjustEndToLatestTrace();var y={timeToComplete:e._rootTrace._end};a.forEach(function(e){var r=n[e];r&&(y[e]=r-t)}),e.addMetrics(y)}return 0}},{"./trace":19}],18:[function(e,t,n){function r(e){this.serviceFactory=e,this.services={},this.services.configService=this.serviceFactory.getConfigService(),this.services.logger=this.serviceFactory.getLogger(),this.services.zoneService=this.createZoneService()}var o=e("./transactionService"),i=e("./zoneService"),a=e("../lib/utils");r.prototype.initialize=function(){var e=this.services.configService,t=this.services.logger;this.services.zoneService.initialize(window.Zone.current);var n=this.services.opbeatBackend=this.serviceFactory.getOpbeatBackend(),r=this.services.transactionService=new o(this.services.zoneService,this.services.logger,e,n);r.scheduleTransactionSend(),a.isUndefined(window.opbeatApi)&&(window.opbeatApi={}),window.opbeatApi.subscribeToTransactions=r.subscribe.bind(r),a.isUndefined(window.opbeatApi.onload)||window.opbeatApi.onload.forEach(function(e){try{e()}catch(n){t.error(n)}})},r.prototype.createZoneService=function(){var e=this.services.logger;return new i(e,this.services.configService)},t.exports=r},{"../lib/utils":16,"./transactionService":21,"./zoneService":22}],19:[function(e,t,n){function r(e,t,n,r){this.transaction=e,this.signature=t,this.type=n,this.ended=!1,this._parent=null,this._diff=null,this._end=null,this._start=window.performance.now(),(o.isUndefined(r)||null==r)&&(r={})}var o=e("../lib/utils");r.prototype.calcDiff=function(){this._end&&this._start&&(this._diff=this._end-this._start)},r.prototype.end=function(){this._end=window.performance.now(),this.calcDiff(),this.ended=!0,o.isUndefined(this.transaction)||"function"!=typeof this.transaction._onTraceEnd||this.transaction._onTraceEnd(this)},r.prototype.duration=function(){return o.isUndefined(this.ended)||o.isUndefined(this._start)?null:(this._diff=this._end-this._start,parseFloat(this._diff))},r.prototype.startTime=function(){return this.ended&&this.transaction.ended?this._start:null},r.prototype.ancestors=function(){var e=this.parent();return e?[e.signature]:[]},r.prototype.parent=function(){return this._parent},r.prototype.setParent=function(e){this._parent=e},r.prototype.getFingerprint=function(){for(var e=[this.transaction.name,this.signature,this.type],t=this._parent;t;)e.push(t.signature),t=t._parent;return e.join("-")},r.prototype.getTraceStackFrames=function(e){e()},t.exports=r},{"../lib/utils":16}],20:[function(e,t,n){function r(e){for(var t=null,n=0;n<e.length;n++){var r=e[n];r.type&&-1===r.type.indexOf("ext")&&"transaction"!==r.type&&(!t||t._end<r._end)&&(t=r)}return t}function o(e){var t=null;return e.forEach(function(e){t||(t=e),t&&t._start>e._start&&(t=e)}),t}var i=e("./trace"),a=e("../lib/utils"),s=function(e,t,n,r){this.metadata={},this.name=e,this.type=t,this.ended=!1,this._markDoneAfterLastTrace=!1,this._isDone=!1,this._options=n,this._logger=r,void 0===n&&(this._options={}),this.contextInfo={_debug:{},_metrics:{}},this._options.sendVerboseDebugInfo&&(this.contextInfo._debug.log=[],this.debugLog("Transaction",e,t)),this.traces=[],this._activeTraces={},this._scheduledTasks={},this.events={},this.doneCallback=function(){},this._rootTrace=this.startTrace("transaction","transaction",{enableStackFrames:!1}),this._startStamp=new Date,this._start=this._rootTrace._start,this.duration=this._rootTrace.duration.bind(this._rootTrace),this.nextId=0,this.isHardNavigation=!1};s.prototype.debugLog=function(){if(this._options.sendVerboseDebugInfo){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.unshift(Date.now().toString());var t=e.join(" - ");this.contextInfo._debug.log.push(t),this._logger&&this._logger.debug(t)}},s.prototype.addContextInfo=function(e){a.merge(this.contextInfo,e)},s.prototype.setDebugData=function(e,t){this.contextInfo._debug[e]=t},s.prototype.addMetrics=function(e){this.contextInfo._metrics=a.merge(this.contextInfo._metrics,e)},s.prototype.redefine=function(e,t,n){this.debugLog("redefine",e,t),this.name=e,this.type=t,this._options=n},s.prototype.startTrace=function(e,t,n){this.debugLog("startTrace",e,t);var r=void 0===n?{}:n;r.enableStackFrames=!0===this._options.enableStackFrames&&!1!==r.enableStackFrames;var o=new i(this,e,t,r);return o.traceId=this.nextId,this.nextId++,this._rootTrace&&(o.setParent(this._rootTrace),this._activeTraces[o.traceId]=o),o},s.prototype.recordEvent=function(e){var t=this.events[e.name];a.isUndefined(t)?(t={name:e.name,start:e.start,end:e.end,time:e.end-e.start,count:0},this.events[t.name]=t):(t.time+=e.end-e.start,t.count++,t.end=e.end)},s.prototype.isFinished=function(){var e=Object.keys(this._scheduledTasks);return this.debugLog("isFinished scheduledTasks",e),0===e.length},s.prototype.detectFinish=function(){this.isFinished()&&this.end()},s.prototype.end=function(){this.ended||(this.debugLog("end"),this.ended=!0,this.addContextInfo({url:{location:window.location.href}}),this._rootTrace.end(),!0===this.isFinished()&&this._finish())},s.prototype.addTask=function(e){this.debugLog("addTask",e),this._scheduledTasks[e]=e},s.prototype.removeTask=function(e){this.debugLog("removeTask",e),this.setDebugData("lastRemovedTask",e),delete this._scheduledTasks[e]},s.prototype.addEndedTraces=function(e){this.traces=this.traces.concat(e)},s.prototype._onTraceEnd=function(e){this.traces.push(e),e._scheduledTasks=Object.keys(this._scheduledTasks),delete this._activeTraces[e.traceId]},s.prototype._finish=function(){if(!0!==this._alreadFinished){this._alreadFinished=!0;for(var e in this.events){var t=this.events[e],n=new i(this,e,e,this._options);n.ended=!0,n._start=t.start,n._diff=t.time,n._end=t.end,n.setParent(this._rootTrace),this.traces.push(n)}this._adjustStartToEarliestTrace(),this._adjustEndToLatestTrace(),this.doneCallback(this)}},s.prototype._adjustEndToLatestTrace=function(){var e=r(this.traces);if(e){this._rootTrace._end=e._end,this._rootTrace.calcDiff();for(var t=0;t<this.traces.length;t++){var n=this.traces[t];n._end>this._rootTrace._end&&(n._end=this._rootTrace._end,n.calcDiff(),n.type=n.type+".truncated")}}},s.prototype._adjustStartToEarliestTrace=function(){var e=o(this.traces);e&&(this._rootTrace._start=e._start,this._rootTrace.calcDiff(),this._start=this._rootTrace._start)},t.exports=s},{"../lib/utils":16,"./trace":19}],21:[function(e,t,n){function r(e,t,n,r){this._config=n,void 0===n&&t.debug("TransactionService: config is not provided"),this._queue=[],this._logger=t,this._opbeatBackend=r,this._zoneService=e,this.nextAutoTaskId=1,this.taskMap={},this.metrics={},this._queue=[],this.initialPageLoadName=void 0,this._subscription=new a;var f=this;this._alreadyCapturedPageLoad=!1,e.spec.onBeforeInvokeTask=function(e){"XMLHttpRequest.send"===e.source&&e.trace&&!e.trace.ended&&e.trace.end(),f.logInTransaction("Executing",e.taskId)};var d=this;e.spec.onScheduleTask=function(e){if("XMLHttpRequest.send"===e.source){var t=e.XHR.url,n=e.XHR.method+" ";f._config.get("performance.includeXHRQueryString")?n+=t:n+=i.parseUrl(t).path;var o=f.startTrace(n,"ext.HttpRequest",{enableStackFrames:!1});e.trace=o}else"interaction"===e.type&&"function"==typeof d.interactionStarted&&d.interactionStarted(e);f.addTask(e.taskId)},e.spec.onInvokeTask=function(e){"XMLHttpRequest.send"===e.source&&e.trace&&!e.trace.ended&&(e.trace.end(),f.logInTransaction("xhr late ending"),f.setDebugDataOnTransaction("xhrLateEnding",!0)),f.removeTask(e.taskId),f.detectFinish()},e.spec.onCancelTask=function(e){f.removeTask(e.taskId),f.detectFinish()},e.spec.onInvokeEnd=function(e){t.trace("onInvokeEnd","source:",e.source,"type:",e.type),f.detectFinish()},e.spec.onInvokeStart=function(e){t.trace("onInvokeStart","source:",e.source,"type:",e.type)}}var o=e("./transaction"),i=e("../lib/utils"),a=e("../common/subscription"),s=e("./captureHardNavigation");r.prototype.createTransaction=function(e,t,n){var r=n;if(i.isUndefined(r)&&(r=this._config.get("performance")),r.enable&&this._zoneService.isOpbeatZone()){var a=new o(e,t,r,this._logger);return a.setDebugData("zone",this._zoneService.getCurrentZone().name),this._zoneService.set("transaction",a),r.checkBrowserResponsiveness&&this.startCounter(a),a}},r.prototype.createZoneTransaction=function(){return this.createTransaction("ZoneTransaction","transaction")},r.prototype.getCurrentTransaction=function(){if(this._config.get("performance").enable&&this._zoneService.isOpbeatZone()){var t=this._zoneService.get("transaction");return i.isUndefined(t)||t.ended?this.createZoneTransaction():t}},r.prototype.startCounter=function(e){e.browserResponsivenessCounter=0;var t=this._config.get("performance.browserResponsivenessInterval");return void 0===t?void this._logger.debug("browserResponsivenessInterval is undefined!"):void this._zoneService.runOuter(function(){var n=setInterval(function(){e.ended?window.clearInterval(n):e.browserResponsivenessCounter++},t)})},r.prototype.sendPageLoadMetrics=function(e){var t,n=this,r=this._config.get("performance");t=this._zoneService.getFromOpbeatZone("transaction");var i=e||this.initialPageLoadName||window.location.pathname;return t&&"ZoneTransaction"===t.name?t.redefine(i,"page-load",r):t=new o(i,"page-load",r,this._logger),t.isHardNavigation=!0,t.doneCallback=function(){n.applyAsync(function(){n.capturePageLoadMetrics(t)&&(n.add(t),n._subscription.applyAll(n,[t]))})},t.detectFinish(),t},r.prototype.capturePageLoadMetrics=function(e){var t=this;if(t._config.get("performance.capturePageLoad")&&!t._alreadyCapturedPageLoad&&e.isHardNavigation)return e.addMetrics(t.metrics),s(e),t._alreadyCapturedPageLoad=!0,!0},r.prototype.startTransaction=function(e,t){var n=this,r=this._config.get("performance");if("interaction"!==t||r.captureInteractions){var o=this.getCurrentTransaction();if(o)return"ZoneTransaction"!==o.name?(this.logInTransaction("Ending early to start a new transaction:",e,t),this._logger.debug("Ending old transaction",o),o.end(),o=this.createTransaction(e,t)):o.redefine(e,t,r),this._logger.debug("TransactionService.startTransaction",o),o.doneCallback=function(){n.applyAsync(function(){n._logger.debug("TransactionService transaction finished",o),o.traces.length>1&&!n.shouldIgnoreTransaction(o.name)&&(n.capturePageLoadMetrics(o),n.add(o),n._subscription.applyAll(n,[o]))})},o}},r.prototype.applyAsync=function(e,t,n){return this._zoneService.runOuter(function(){return Promise.resolve().then(function(){return e.apply(t,n)})})},r.prototype.shouldIgnoreTransaction=function(e){for(var t=this._config.get("ignoreTransactions"),n=0;n<t.length;n++){var r=t[n];if("function"==typeof r.test){if(r.test(e))return!0}else if(r===e)return!0}return!1},r.prototype.startTrace=function(e,t,n){var r=this.getCurrentTransaction();if(r)return this._logger.debug("TransactionService.startTrace",e,t),r.startTrace(e,t,n)},r.prototype.add=function(e){this._config.get("performance").enable&&(this._queue.push(e),this._logger.debug("TransactionService.add",e))},r.prototype.getTransactions=function(){return this._queue},r.prototype.clearTransactions=function(){this._queue=[]},r.prototype.subscribe=function(e){return this._subscription.subscribe(e)},r.prototype.addTask=function(e){var t=this.getCurrentTransaction();return t&&(void 0===e&&(e="autoId"+this.nextAutoTaskId++),t.addTask(e),this._logger.debug("TransactionService.addTask",e)),e},r.prototype.removeTask=function(e){var t=this._zoneService.get("transaction");i.isUndefined(t)||t.ended||(t.removeTask(e),this._logger.debug("TransactionService.removeTask",e))},r.prototype.logInTransaction=function(){var e=this._zoneService.get("transaction");i.isUndefined(e)||e.ended||e.debugLog.apply(e,arguments)},r.prototype.setDebugDataOnTransaction=function(e,t){var n=this._zoneService.get("transaction");i.isUndefined(n)||n.ended||n.setDebugData(e,t)},r.prototype.detectFinish=function(){var e=this._zoneService.get("transaction");i.isUndefined(e)||e.ended||(e.detectFinish(),this._logger.debug("TransactionService.detectFinish"))},r.prototype.scheduleTransactionSend=function(){var e=this._logger,t=this._opbeatBackend,n=this;setInterval(function(){var r=n.getTransactions();if(0!==r.length){e.debug("Sending Transactions to opbeat.",r.length);var o=t.sendTransactions(r);o&&o.then(void 0,function(){e.debug("Failed sending transactions!")}),n.clearTransactions()}},5e3)},t.exports=r},{"../common/subscription":9,"../lib/utils":16,"./captureHardNavigation":17,"./transaction":20}],22:[function(e,t,n){function r(e,t){function n(){}this.events=new o;var r=0,i=this.spec={onScheduleTask:n,onBeforeInvokeTask:n,onInvokeTask:n,onCancelTask:n,onHandleError:n,onInvokeStart:n,onInvokeEnd:n};this.zoneConfig={name:"opbeatRootZone",onScheduleTask:function(t,n,o,l){if("eventTask"===l.type&&"opbeatImmediatelyFiringEvent"===l.data.eventName)return l.data.handler(l.data),l;var f=l.data&&l.data.target;if(f&&void 0===l.data.target[p]&&(l.data.target[p]={registeredEventListeners:{}}),e.trace("zoneservice.onScheduleTask",l.source," type:",l.type),"macroTask"===l.type){e.trace("Zone: ",o.name);var d=r++,h={taskId:l.source+d,source:l.source,type:l.type};"setTimeout"===l.source?0!==l.data.args[1]&&void 0!==l.data.args[1]||(l[a]=h,i.onScheduleTask(h)):l.source===u&&(h.XHR={resolved:!1,send:!1,url:l.data.target[s],method:l.data.target[c]},l.data.target.addEventListener("opbeatImmediatelyFiringEvent",function(e){void 0!==e.target[p]?l.data.target[p]=e.target[p]:l.data.target[p]=e.target[p]={registeredEventListeners:{}}}),l.data.target[p].task=h,l.data.target[p].typeName="XMLHttpRequest",i.onScheduleTask(h))}else"eventTask"!==l.type||!f||"readystatechange"!==l.data.eventName&&"load"!==l.data.eventName?"microTask"===l.type&&"Promise.then"===l.source&&(d=r++,h={taskId:l.source+d,source:l.source,type:l.type},l[a]=h,i.onScheduleTask(h)):l.data.target[p].registeredEventListeners[l.data.eventName]={resolved:!1};return t.scheduleTask(o,l)},onInvoke:function(e,t,n,o,a,s,c){var p={taskId:c+r++,source:c,type:"invoke"};i.onInvokeStart(p);var l=o.apply(a,s);return i.onInvokeEnd(p),l},onInvokeTask:function(t,n,o,s,c,l){i.onInvokeStart({source:s.source,type:s.type}),e.trace("zoneservice.onInvokeTask",s.source," type:",s.type);var d,h=s.data&&s.data.target;if(h&&"XMLHttpRequest"===s.data.target[p].typeName){var g=s.data.target[p];e.trace("opbeatData",g);var v=g.task;v&&"readystatechange"===s.data.eventName&&s.data.target.readyState===s.data.target.DONE?(g.registeredEventListeners.readystatechange.resolved=!0,i.onBeforeInvokeTask(v)):v&&"load"===s.data.eventName&&"load"in g.registeredEventListeners?g.registeredEventListeners.load.resolved=!0:v&&s.source===u&&(v.XHR.resolved=!0),d=t.invokeTask(o,s,c,l),!v||g.registeredEventListeners.load&&!g.registeredEventListeners.load.resolved||g.registeredEventListeners.readystatechange&&!g.registeredEventListeners.readystatechange.resolved||!v.XHR.resolved||i.onInvokeTask(v)}else if(!s[a]||"setTimeout"!==s.source&&"Promise.then"!==s.source)if("eventTask"===s.type&&h&&s.data.eventName in f){var m=r++;v={taskId:s.source+m,source:s.source,type:"interaction",applyArgs:l},i.onScheduleTask(v),d=t.invokeTask(o,s,c,l),i.onInvokeTask(v)}else d=t.invokeTask(o,s,c,l);else i.onBeforeInvokeTask(s[a]),d=t.invokeTask(o,s,c,l),i.onInvokeTask(s[a]);return i.onInvokeEnd({source:s.source,type:s.type}),d},onCancelTask:function(e,t,n,r){var o;return"macroTask"===r.type&&(r.source===u?(o=r.data.target[p].task,i.onCancelTask(o)):r[a]&&"setTimeout"===r.source&&(o=r[a],i.onCancelTask(o))),e.cancelTask(n,r)}}}var o=e("../common/subscription"),i=e("../common/patchUtils"),a=i.opbeatSymbol("taskData"),s=i.opbeatSymbol("url"),c=i.opbeatSymbol("method"),u="XMLHttpRequest.send",p=i.opbeatSymbol("opbeatData"),f={};["click","contextmenu","dblclick","mousedown","keydown","keypress","keyup"].forEach(function(e){f[e]=1}),r.prototype.initialize=function(e){this.outer=e,this.zone=e.fork(this.zoneConfig)},r.prototype.set=function(e,t){window.Zone.current._properties[e]=t},r.prototype.get=function(e){return window.Zone.current.get(e)},r.prototype.getFromOpbeatZone=function(e){return this.zone.get(e)},r.prototype.setOnOpbeatZone=function(e,t){this.zone._properties[e]=t},r.prototype.getCurrentZone=function(){return window.Zone.current},r.prototype.isOpbeatZone=function(){return this.zone.name===window.Zone.current.name},r.prototype.runOuter=function(e,t,n){return this.outer?this.outer.run(e,t,n):e.apply(t,n)},r.prototype.runInOpbeatZone=function(e,t,n,r){return this.zone.run(e,t,n,r||"runInOpbeatZone:"+e.name)},t.exports=r},{"../common/patchUtils":6,"../common/subscription":9}],23:[function(e,t,n){(function(e,r){!function(e,o){"object"==typeof n&&void 0!==t?o():"function"==typeof r&&r.amd?r(o):o()}(0,function(){"use strict";function t(e,t){for(var n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=Zone.current.wrap(e[n],t+"_"+n));return e}function n(e,n){for(var r=e.constructor.name,i=0;i<n.length;i++)!function(o){var i=n[o],a=e[i];a&&(e[i]=function(e){var n=function(){return e.apply(this,t(arguments,r+"."+i))};return g(n,e),n}(a))}(i)}function r(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r&&n&&Object.getOwnPropertyDescriptor(n,t)&&(r={enumerable:!0,configurable:!0}),r&&r.configurable){delete r.writable,delete r.value;var i=r.get,a=t.substr(2),s=C("_"+t);r.set=function(t){var n=this;if(n||e!==I||(n=I),n){var r=n[s];if(r&&n.removeEventListener(a,r),"function"==typeof t){var o=function(e){var n=t.apply(this,arguments);return void 0==n||n||e.preventDefault(),n};n[s]=o,n.addEventListener(a,o,!1)}else n[s]=null}},r.get=function(){var n=this;if(n||e!==I||(n=I),!n)return null;if(n.hasOwnProperty(s))return n[s];if(i){var o=i&&i.apply(this);if(o)return r.set.apply(this,[o]),"function"==typeof n.removeAttribute&&n.removeAttribute(t),o}return null},Object.defineProperty(e,t,r)}}function o(e,t,n){if(t)for(var o=0;o<t.length;o++)r(e,"on"+t[o],n);else{var i=[];for(var a in e)"on"==a.substr(0,2)&&i.push(a);for(var s=0;s<i.length;s++)r(e,i[s],n)}}function i(e,t){return!!("boolean"==typeof e?e:"object"==typeof e&&e&&e.capture)==!!("boolean"==typeof t?t:"object"==typeof t&&t&&t.capture)}function a(e,t,n,r,o){var a=e[N];if(a)for(var s=0;s<a.length;s++){var c=a[s],u=c.data,p=u.handler;if((u.handler===t||p.listener===t)&&i(u.options,r)&&u.eventName===n)return o&&a.splice(s,1),c}return null}function s(e,t,n){var r=e[N];r||(r=e[N]=[]),n?r.unshift(t):r.push(t)}function c(e,t,n,r,o,i){function c(e){var t=e.data;return s(t.target,e,o),t.invokeAddFunc(p,e)}function u(e){var t=e.data;return a(t.target,e.invoke,t.eventName,t.options,!0),t.invokeRemoveFunc(l,e)}void 0===n&&(n=!0),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i=R);var p=C(e),l=C(t),f=!n&&void 0;return function(t,n){var o=i(t,n);o.options=o.options||f;var s=null;"function"==typeof o.handler?s=o.handler:o.handler&&o.handler.handleEvent&&(s=function(e){return o.handler.handleEvent(e)});var l=!1;try{l=o.handler&&"[object FunctionWrapper]"===o.handler.toString()}catch(d){return o.crossContext=!0,o.invokeAddFunc(p,o.handler)}if(!s||l)return o.invokeAddFunc(p,o.handler);if(!r){var h=a(o.target,o.handler,o.eventName,o.options,!1);if(h)return o.invokeAddFunc(p,h)}var g=Zone.current,v=o.target.constructor.name+"."+e+":"+o.eventName;g.scheduleEventTask(v,s,o,c,u)}}function u(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=R);var r=C(e),o=!t&&void 0;return function(e,t){var i=n(e,t);i.options=i.options||o;var s=null;"function"==typeof i.handler?s=i.handler:i.handler&&i.handler.handleEvent&&(s=function(e){return i.handler.handleEvent(e)});var c=!1;try{c=i.handler&&"[object FunctionWrapper]"===i.handler.toString()}catch(u){return i.crossContext=!0,i.invokeRemoveFunc(r,i.handler)}if(!s||c)return i.invokeRemoveFunc(r,i.handler);var p=a(i.target,i.handler,i.eventName,i.options,!0);p?p.zone.cancelTask(p):i.invokeRemoveFunc(r,i.handler)}}function p(e,t,n,r){return void 0===t&&(t=D),void 0===n&&(n=z),void 0===r&&(r=R),!(!e||!e[t]||(f(e,t,function(){return c(t,n,!0,!1,!1,r)}),f(e,n,function(){return u(n,!0,r)}),0))}function l(e){var n=I[e];if(n){I[C(e)]=n,I[e]=function(){var r=t(arguments,e);switch(r.length){case 0:this[Z]=new n;break;case 1:this[Z]=new n(r[0]);break;case 2:this[Z]=new n(r[0],r[1]);break;case 3:this[Z]=new n(r[0],r[1],r[2]);break;case 4:this[Z]=new n(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}},g(I[e],n);var r,o=new n(function(){});for(r in o)"XMLHttpRequest"===e&&"responseBlob"===r||function(t){"function"==typeof o[t]?I[e].prototype[t]=function(){return this[Z][t].apply(this[Z],arguments)}:Object.defineProperty(I[e].prototype,t,{set:function(n){"function"==typeof n?(this[Z][t]=Zone.current.wrap(n,e+"."+t),g(this[Z][t],n)):this[Z][t]=n},get:function(){return this[Z][t]}})}(r);for(r in n)"prototype"!==r&&n.hasOwnProperty(r)&&(I[e][r]=n[r])}}function f(e,t,n){for(var r=e;r&&!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);!r&&e[t]&&(r=e);var o,i=C(t);if(r&&!(o=r[i])){var a=n(o=r[i]=r[t],i,t);r[t]=function(){return a(this,arguments)},g(r[t],o)}return o}function d(e,t,n){function r(e){var t=e.data;return t.args[t.callbackIndex]=function(){e.invoke.apply(this,arguments)},o.apply(t.target,t.args),e}var o=null;o=f(e,t,function(e){return function(t,o){var i=n(t,o);return i.callbackIndex>=0&&"function"==typeof o[i.callbackIndex]?Zone.current.scheduleMacroTask(i.name,o[i.callbackIndex],i,r,null):e.apply(t,o)}})}function h(e,t){var n=e[C("eventTasks")],r=[];if(n)for(var o=0;o<n.length;o++){var i=n[o],a=i.data;(a&&a.eventName)===t&&r.push(i)}return r}function g(e,t){e[C("OriginalDelegate")]=t}function v(e,t,n,r){function o(t){var r=t.data;return r.args[0]=function(){try{t.invoke.apply(this,arguments)}finally{"number"==typeof r.handleId&&delete c[r.handleId]}},r.handleId=a.apply(e,r.args),"number"==typeof r.handleId&&(c[r.handleId]=t),t}function i(e){return"number"==typeof e.data.handleId&&delete c[e.data.handleId],s(e.data.handleId)}var a=null,s=null;n+=r;var c={};a=f(e,t+=r,function(n){return function(a,s){if("function"==typeof s[0]){var c=Zone.current,u={handleId:null,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?s[1]||0:null,args:s},p=c.scheduleMacroTask(t,s[0],u,o,i);if(!p)return p;var l=p.data.handleId;return l&&l.ref&&l.unref&&"function"==typeof l.ref&&"function"==typeof l.unref&&(p.ref=l.ref.bind(l),p.unref=l.unref.bind(l)),p}return n.apply(e,s)}}),s=f(e,n,function(t){return function(n,r){var o="number"==typeof r[0]?c[r[0]]:r[0];o&&"string"==typeof o.type?"notScheduled"!==o.state&&(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&o.zone.cancelTask(o):t.apply(e,r)}})}function m(){Object.defineProperty=function(e,t,n){if(b(e,t))throw new TypeError("Cannot assign to read only property '"+t+"' of "+e);var r=n.configurable;return"prototype"!==t&&(n=k(e,t,n)),w(e,t,n,r)},Object.defineProperties=function(e,t){return Object.keys(t).forEach(function(n){Object.defineProperty(e,n,t[n])}),e},Object.create=function(e,t){return"object"!=typeof t||Object.isFrozen(t)||Object.keys(t).forEach(function(n){t[n]=k(e,n,t[n])}),M(e,t)},Object.getOwnPropertyDescriptor=function(e,t){var n=H(e,t);return b(e,t)&&(n.configurable=!1),n}}function y(e,t,n){var r=n.configurable;return n=k(e,t,n),w(e,t,n,r)}function b(e,t){return e&&e[B]&&e[B][t]}function k(e,t,n){return n.configurable=!0,n.configurable||(e[B]||A(e,B,{writable:!0,value:{}}),e[B][t]=!0),n}function w(e,t,n,r){try{return A(e,t,n)}catch(o){if(!n.configurable)throw o;void 0===r?delete n.configurable:n.configurable=r;try{return A(e,t,n)}catch(o){var i=null;try{i=JSON.stringify(n)}catch(o){i=i.toString()}console.log("Attempting to configure '"+t+"' with descriptor '"+i+"' on object '"+e+"' and got error, giving up: "+o)}}}function _(e){var t=[];e.wtf?t=$.split(",").map(function(e){return"HTML"+e+"Element"}).concat(q):e[U]?t.push(U):t=q;for(var r=0;r<t.length;r++){var o=e[t[r]];p(o&&o.prototype)}}function T(e){var t=e.WebSocket;e.EventTarget||p(t.prototype),e.WebSocket=function(e,n){var r,i=arguments.length>1?new t(e,n):new t(e),a=Object.getOwnPropertyDescriptor(i,"onmessage");return a&&!1===a.configurable?(r=Object.create(i),["addEventListener","removeEventListener","send","close"].forEach(function(e){r[e]=function(){return i[e].apply(i,arguments)}})):r=i,o(r,["close","error","message","open"]),r};for(var n in t)e.WebSocket[n]=t[n]}function S(e){if(!j||L){var t="undefined"!=typeof WebSocket;if(E()){if(F){o(window,se,Object.getPrototypeOf(window)),o(Document.prototype,se),void 0!==window.SVGElement&&o(window.SVGElement.prototype,se),o(Element.prototype,se),o(HTMLElement.prototype,se),o(HTMLMediaElement.prototype,J),o(HTMLFrameSetElement.prototype,V.concat(ne)),o(HTMLBodyElement.prototype,V.concat(ne)),o(HTMLFrameElement.prototype,te),o(HTMLIFrameElement.prototype,te);var n=window.HTMLMarqueeElement;n&&o(n.prototype,re)}o(XMLHttpRequest.prototype,oe);var r=e.XMLHttpRequestEventTarget;r&&o(r&&r.prototype,oe),"undefined"!=typeof IDBIndex&&(o(IDBIndex.prototype,ie),o(IDBRequest.prototype,ie),o(IDBOpenDBRequest.prototype,ie),o(IDBDatabase.prototype,ie),o(IDBTransaction.prototype,ie),o(IDBCursor.prototype,ie)),t&&o(WebSocket.prototype,ae)}else O(),l("XMLHttpRequest"),t&&T(e)}}function E(){if((F||L)&&!Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var e=Object.getOwnPropertyDescriptor(Element.prototype,"onclick");if(e&&!e.configurable)return!1}var t=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"onreadystatechange");if(t){Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return!0}});r=!!(n=new XMLHttpRequest).onreadystatechange;return Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",t||{}),r}Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return this[C("fakeonreadystatechange")]},set:function(e){this[C("fakeonreadystatechange")]=e}});var n=new XMLHttpRequest,o=function(){};n.onreadystatechange=o;var r=n[C("fakeonreadystatechange")]===o;return n.onreadystatechange=null,r}function O(){for(var t=0;t<se.length;t++)!function(e){var t=se[e],n="on"+t;self.addEventListener(t,function(e){var t,r,o=e.target;for(r=o?o.constructor.name+"."+n:"unknown."+n;o;)o[n]&&!o[n][ce]&&(t=Zone.current.wrap(o[n],r),t[ce]=o[n],o[n]=t),o=o.parentElement},!0)}(t)}function x(e){if((F||L)&&"registerElement"in e.document){var t=document.registerElement,n=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"];document.registerElement=function(e,r){return r&&r.prototype&&n.forEach(function(e){var t="Document.registerElement::"+e;if(r.prototype.hasOwnProperty(e)){var n=Object.getOwnPropertyDescriptor(r.prototype,e);n&&n.value?(n.value=Zone.current.wrap(n.value,t),y(r.prototype,e,n)):r.prototype[e]=Zone.current.wrap(r.prototype[e],t)}else r.prototype[e]&&(r.prototype[e]=Zone.current.wrap(r.prototype[e],t))}),t.apply(document,[e,r])},g(document.registerElement,t)}}!function(e){function t(e){s&&s.mark&&s.mark(e)}function n(e,t){s&&s.measure&&s.measure(e,t)}function r(t){0===L&&0===g.length&&(e[d]?e[d].resolve(0)[h](o):e[f](o,0)),t&&g.push(t)}function o(){if(!v){for(v=!0;g.length;){var e=g;g=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.zone.runTask(n,null,null)}catch(r){C.onUnhandledError(r)}}}c[a("ignoreConsoleErrorUncaughtError")],C.microtaskDrainDone(),v=!1}}function i(){}function a(e){return"__zone_symbol__"+e}var s=e.performance;if(t("Zone"),e.Zone)throw new Error("Zone already loaded.");var c=function(){function r(e,t){this._properties=null,this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new p(this,this._parent&&this._parent._zoneDelegate,t)}return r.assertZonePatched=function(){if(e.Promise!==x.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(r,"root",{get:function(){for(var e=r.current;e.parent;)e=e.parent;return e},enumerable:!0,configurable:!0}),Object.defineProperty(r,"current",{get:function(){return j.zone},enumerable:!0,configurable:!0}),Object.defineProperty(r,"currentTask",{get:function(){return F},enumerable:!0,configurable:!0}),r.__load_patch=function(o,i){if(x.hasOwnProperty(o))throw Error("Already loaded patch: "+o);if(!e["__Zone_disable_"+o]){var a="Zone:"+o;t(a),x[o]=i(e,r,C),n(a,a)}},Object.defineProperty(r.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),r.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]},r.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},r.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},r.prototype.wrap=function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}},r.prototype.run=function(e,t,n,r){void 0===t&&(t=void 0),void 0===n&&(n=null),void 0===r&&(r=null),j={parent:j,zone:this};try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{j=j.parent}},r.prototype.runGuarded=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),j={parent:j,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(o){if(this._zoneDelegate.handleError(this,o))throw o}}finally{j=j.parent}},r.prototype.runTask=function(e,t,n){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||m).name+"; Execution: "+this.name+")");if(!(e.state===y)||e.type!==O){var o=e.state!=w;o&&e._transitionTo(w,k),e.runCount++;var i=F;F=e,j={parent:j,zone:this};try{e.type==E&&e.data&&!e.data.isPeriodic&&(e.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(a){if(this._zoneDelegate.handleError(this,a))throw a}}finally{e.state!==y&&e.state!==T&&(e.type==O||e.data&&e.data.isPeriodic?o&&e._transitionTo(k,w):(e.runCount=0,this._updateTaskCount(e,-1),o&&e._transitionTo(y,w,y))),j=j.parent,F=i}}},r.prototype.scheduleTask=function(e){if(e.zone&&e.zone!==this)for(var t=this;t;){if(t===e.zone)throw Error("can not reschedule task to "+this.name+" which is descendants of the original zone "+e.zone.name);t=t.parent}e._transitionTo(b,y);var n=[];e._zoneDelegates=n,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(r){throw e._transitionTo(T,b,y),this._zoneDelegate.handleError(this,r),r}return e._zoneDelegates===n&&this._updateTaskCount(e,1),e.state==b&&e._transitionTo(k,b),e},r.prototype.scheduleMicroTask=function(e,t,n,r){return this.scheduleTask(new l(S,e,t,n,r,null))},r.prototype.scheduleMacroTask=function(e,t,n,r,o){return this.scheduleTask(new l(E,e,t,n,r,o))},r.prototype.scheduleEventTask=function(e,t,n,r,o){return this.scheduleTask(new l(O,e,t,n,r,o))},r.prototype.cancelTask=function(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||m).name+"; Execution: "+this.name+")");e._transitionTo(_,k,w);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(T,_),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(y,_),e.runCount=0,e},r.prototype._updateTaskCount=function(e,t){var n=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(var r=0;r<n.length;r++)n[r]._updateTaskCount(e.type,t)},r}();c.__symbol__=a;var u={name:"",onHasTask:function(e,t,n,r){return e.hasTask(n,r)},onScheduleTask:function(e,t,n,r){return e.scheduleTask(n,r)},onInvokeTask:function(e,t,n,r,o,i){return e.invokeTask(n,r,o,i)},onCancelTask:function(e,t,n,r){return e.cancelTask(n,r)}},p=function(){function e(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:t.zone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:t.zone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:t.zone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:t.zone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:t.zone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:t.zone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:t.zone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var r=n&&n.onHasTask,o=t&&t._hasTaskZS;(r||o)&&(this._hasTaskZS=r?n:u,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,n.onScheduleTask||(this._scheduleTaskZS=u,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),n.onInvokeTask||(this._invokeTaskZS=u,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),n.onCancelTask||(this._cancelTaskZS=u,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}return e.prototype.fork=function(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new c(e,t)},e.prototype.intercept=function(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t},e.prototype.invoke=function(e,t,n,r,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,r,o):t.apply(n,r)},e.prototype.handleError=function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)},e.prototype.scheduleTask=function(e,t){var n=t;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),(n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t))||(n=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=S)throw new Error("Task is missing scheduleFn.");r(t)}return n},e.prototype.invokeTask=function(e,t,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,r):t.callback.apply(n,r)},e.prototype.cancelTask=function(e,t){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");n=t.cancelFn(t)}return n},e.prototype.hasTask=function(e,t){try{return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(n){this.handleError(e,n)}},e.prototype._updateTaskCount=function(e,t){var n=this._taskCounts,r=n[e],o=n[e]=r+t;if(!(o<0||0!=r&&0!=o)){var i={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};this.hasTask(this.zone,i)}},e}(),l=function(){function e(e,t,n,r,i,a){this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=e,this.source=t,this.data=r,this.scheduleFn=i,this.cancelFn=a,this.callback=n;var s=this;this.invoke=function(){L++;try{return s.runCount++,s.zone.runTask(s,this,arguments)}finally{1==L&&o(),L--}}}return Object.defineProperty(e.prototype,"zone",{get:function(){return this._zone},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.cancelScheduleRequest=function(){this._transitionTo(y,b)},e.prototype._transitionTo=function(e,t,n){if(this._state!==t&&this._state!==n)throw new Error(this.type+" '"+this.source+"': can not transition to '"+e+"', expecting state '"+t+"'"+(n?" or '"+n+"'":"")+", was '"+this._state+"'.");this._state=e,e==y&&(this._zoneDelegates=null)},e.prototype.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId:Object.prototype.toString.call(this)},e.prototype.toJSON=function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,invoke:this.invoke,scheduleFn:this.scheduleFn,cancelFn:this.cancelFn,runCount:this.runCount,callback:this.callback}},e}(),f=a("setTimeout"),d=a("Promise"),h=a("then"),g=[],v=!1,m={name:"NO ZONE"},y="notScheduled",b="scheduling",k="scheduled",w="running",_="canceling",T="unknown",S="microTask",E="macroTask",O="eventTask",x={},C={symbol:a,currentZoneFrame:function(){return j},onUnhandledError:i,microtaskDrainDone:i,scheduleMicroTask:r,showUncaughtError:function(){return!c[a("ignoreConsoleErrorUncaughtError")]},patchEventTargetMethods:function(){return!1},patchOnProperties:i,patchMethod:function(){return i}},I="__rootZoneSpec__",P=new c(null,null);e[I]&&(P=P.fork(e[I]),delete e[I]);var j={parent:null,zone:P},F=null,L=0;n("Zone","Zone"),e.Zone=c}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||e),Zone.__load_patch("ZoneAwarePromise",function(e,t,n){function r(e){n.onUnhandledError(e);try{var r=t[d("unhandledPromiseRejectionHandler")];r&&"function"==typeof r&&r.apply(this,[e])}catch(o){}}function o(e){return e&&e.then}function i(e){return e}function a(e){return E.reject(e)}function s(e,t){return function(n){try{c(e,t,n)}catch(r){c(e,!1,r)}}}function c(e,r,o){var i=S();if(e===o)throw new TypeError("Promise resolved with itself");if(e[m]===k){var a=null;try{"object"!=typeof o&&"function"!=typeof o||(a=o&&o.then)}catch(l){return i(function(){c(e,!1,l)})(),e}if(r!==_&&o instanceof E&&o.hasOwnProperty(m)&&o.hasOwnProperty(y)&&o[m]!==k)u(o),c(e,o[m],o[y]);else if(r!==_&&"function"==typeof a)try{a.apply(o,[i(s(e,r)),i(s(e,!1))])}catch(l){i(function(){c(e,!1,l)})()}else{e[m]=r;var f=e[y];e[y]=o,r===_&&o instanceof Error&&(o[d("currentTask")]=t.currentTask);for(var g=0;g<f.length;)p(e,f[g++],f[g++],f[g++],f[g++]);if(0==f.length&&r==_){e[m]=T;try{throw new Error("Uncaught (in promise): "+o+(o&&o.stack?"\n"+o.stack:""))}catch(l){var v=l;v.rejection=o,v.promise=e,v.zone=t.current,v.task=t.currentTask,h.push(v),n.scheduleMicroTask()}}}}return e}function u(e){if(e[m]===T){try{var n=t[d("rejectionHandledHandler")];n&&"function"==typeof n&&n.apply(this,[{rejection:e[y],promise:e}])}catch(r){}e[m]=_;for(var o=0;o<h.length;o++)e===h[o].promise&&h.splice(o,1)}}function p(e,t,n,r,o){u(e);var s=e[m]?"function"==typeof r?r:i:"function"==typeof o?o:a;t.scheduleMicroTask(b,function(){try{c(n,!0,t.run(s,void 0,[e[y]]))}catch(r){c(n,!1,r)}})}function l(e){var t=e.prototype,n=t.then;t[v]=n,e.prototype.then=function(e,t){var r=this;return new E(function(e,t){n.call(r,e,t)}).then(e,t)},e[x]=!0}var d=n.symbol,h=[],g=d("Promise"),v=d("then");n.onUnhandledError=function(e){if(n.showUncaughtError()){var t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},n.microtaskDrainDone=function(){for(;h.length;)for(;h.length;)!function(){var e=h.shift();try{e.zone.runGuarded(function(){throw e})}catch(t){r(t)}}()};var m=d("state"),y=d("value"),b="Promise.then",k=null,w=!0,_=!1,T=0,S=function(){var e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},E=function(){function e(t){var n=this;if(!(n instanceof e))throw new Error("Must be an instanceof Promise.");n[m]=k,n[y]=[];try{t&&t(s(n,w),s(n,_))}catch(r){c(n,!1,r)}}return e.toString=function(){return"function ZoneAwarePromise() { [native code] }"},e.resolve=function(e){return c(new this(null),w,e)},e.reject=function(e){return c(new this(null),_,e)},e.race=function(e){for(var r,i,a=new this(function(e,t){r=(n=[e,t])[0],i=n[1];var n}),s=0,c=e;s<c.length;s++){var u=c[s];o(u)||(u=this.resolve(u)),u.then(function(e){a&&(a=r(e))},function(e){a&&(a=i(e))})}return a},e.all=function(e){for(var t,n,r=new this(function(e,r){t=e,n=r}),i=0,a=[],s=0,c=e;s<c.length;s++){var u=c[s];o(u)||(u=this.resolve(u)),u.then(function(e){return function(n){a[e]=n,--i||t(a)}}(i),n),i++}return i||t(a),r},e.prototype.then=function(e,n){var r=new this.constructor(null),o=t.current;return this[m]==k?this[y].push(o,r,e,n):p(this,o,r,e,n),r},e.prototype.catch=function(e){return this.then(null,e)},e}();E.resolve=E.resolve,E.reject=E.reject,E.race=E.race,E.all=E.all;var O=e[g]=e.Promise;e.Promise=E;var x=d("thenPatched");if(O){l(O);var C=e.fetch;"function"==typeof C&&(e.fetch=function(e){return function(){var t=e.apply(this,arguments);if(t instanceof E)return t;var n=t.constructor;return n[x]||l(n),t}}(C))}return Promise[t.__symbol__("uncaughtPromiseErrors")]=h,E});var C=function(e){return"__zone_symbol__"+e},I="object"==typeof window&&window||"object"==typeof self&&self||e,P="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,j=!("nw"in I)&&void 0!==I.process&&"[object process]"==={}.toString.call(I.process),F=!j&&!P&&!("undefined"==typeof window||!window.HTMLElement),L=void 0!==I.process&&"[object process]"==={}.toString.call(I.process)&&!P&&!("undefined"==typeof window||!window.HTMLElement),N=C("eventTasks"),D="addEventListener",z="removeEventListener",R=function(e,t){return{options:t[2],eventName:t[0],handler:t[1],target:e||I,name:t[0],crossContext:!1,invokeAddFunc:function(e,t){if(!this.crossContext)return t&&t.invoke?this.target[e](this.eventName,t.invoke,this.options):this.target[e](this.eventName,t,this.options);try{return this.target[e](this.eventName,t,this.options)}catch(n){}},invokeRemoveFunc:function(e,t){if(!this.crossContext)return t&&t.invoke?this.target[e](this.eventName,t.invoke,this.options):this.target[e](this.eventName,t,this.options);try{return this.target[e](this.eventName,t,this.options)}catch(n){}}}},Z=C("originalInstance");Zone.__load_patch("toString",function(e,t,n){var r=Function.prototype.toString;Function.prototype.toString=function(){if("function"==typeof this){var t=this[C("OriginalDelegate")];if(t)return"function"==typeof t?r.apply(this[C("OriginalDelegate")],arguments):Object.prototype.toString.call(t);if(this===Promise){var n=e[C("Promise")];if(n)return r.apply(n,arguments)}if(this===Error){var o=e[C("Error")];if(o)return r.apply(o,arguments)}}return r.apply(this,arguments)};var o=Object.prototype.toString;Object.prototype.toString=function(){return this instanceof Promise?"[object Promise]":o.apply(this,arguments)}});var A=Object[C("defineProperty")]=Object.defineProperty,H=Object[C("getOwnPropertyDescriptor")]=Object.getOwnPropertyDescriptor,M=Object.create,B=C("unconfigurables"),$="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",q="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket".split(","),U="EventTarget",W=["afterscriptexecute","beforescriptexecute","DOMContentLoaded","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange"],V=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplyconnected","vrdisplaydisconnected","vrdisplaypresentchange"],G=["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],J=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],K=["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"],Q=["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],Y=["autocomplete","autocompleteerror"],ee=["toggle"],te=["load"],ne=["blur","error","focus","load","resize","scroll"],re=["bounce","finish","start"],oe=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],ie=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],ae=["close","error","open","message"],se=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","transitioncancel","transitionend","waiting","wheel"].concat(Q,Y,ee,W,V,G,K),ce=C("unbound");Zone.__load_patch("timers",function(e,t,n){var r="set",o="clear";v(e,r,o,"Timeout"),v(e,r,o,"Interval"),v(e,r,o,"Immediate"),v(e,"request","cancel","AnimationFrame"),v(e,"mozRequest","mozCancel","AnimationFrame"),v(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",function(e,t,n){for(var r=["alert","prompt","confirm"],o=0;o<r.length;o++)f(e,r[o],function(n,r,o){return function(r,i){return t.current.run(n,e,i,o)}})}),Zone.__load_patch("EventTarget",function(e,t,n){_(e);var r=e.XMLHttpRequestEventTarget;r&&r.prototype&&p(r.prototype),l("MutationObserver"),l("WebKitMutationObserver"),l("FileReader")}),Zone.__load_patch("on_property",function(e,t,n){S(e),m(),x(e)}),Zone.__load_patch("canvas",function(e,t,n){var r=e.HTMLCanvasElement;void 0!==r&&r.prototype&&r.prototype.toBlob&&d(r.prototype,"toBlob",function(e,t){return{name:"HTMLCanvasElement.toBlob",target:e,callbackIndex:0,args:t}})}),Zone.__load_patch("XHR",function(e,t,n){!function(e){function n(e){return e[o]}function r(e){XMLHttpRequest[s]=!1;var t=e.data,n=t.target[a],r=t.target[C("addEventListener")],i=t.target[C("removeEventListener")];n&&i.apply(t.target,["readystatechange",n]);var c=t.target[a]=function(){t.target.readyState===t.target.DONE&&!t.aborted&&XMLHttpRequest[s]&&"scheduled"===e.state&&e.invoke()};return r.apply(t.target,["readystatechange",c]),t.target[o]||(t.target[o]=e),l.apply(t.target,t.args),XMLHttpRequest[s]=!0,e}function c(){}function u(e){var t=e.data;return t.aborted=!0,d.apply(t.target,t.args)}var p=f(e.XMLHttpRequest.prototype,"open",function(){return function(e,t){return e[i]=0==t[2],p.apply(e,t)}}),l=f(e.XMLHttpRequest.prototype,"send",function(){return function(e,n){var o=t.current;if(e[i])return l.apply(e,n);var a={target:e,isPeriodic:!1,delay:null,args:n,aborted:!1};return o.scheduleMacroTask("XMLHttpRequest.send",c,a,r,u)}}),d=f(e.XMLHttpRequest.prototype,"abort",function(e){return function(e,t){var r=n(e);if(r&&"string"==typeof r.type){if(null==r.cancelFn||r.data&&r.data.aborted)return;r.zone.cancelTask(r)}}})}(e);var o=C("xhrTask"),i=C("xhrSync"),a=C("xhrListener"),s=C("xhrScheduled")}),Zone.__load_patch("geolocation",function(e,t,r){e.navigator&&e.navigator.geolocation&&n(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",function(e,t,n){function r(t){return function(n){h(e,t).forEach(function(r){var o=e.PromiseRejectionEvent;if(o){var i=new o(t,{promise:n.promise,reason:n.rejection});r.invoke(i)}})}}e.PromiseRejectionEvent&&(t[C("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),t[C("rejectionHandledHandler")]=r("rejectionhandled"))}),Zone.__load_patch("util",function(e,t,n){n.patchEventTargetMethods=p,n.patchOnProperties=o,n.patchMethod=f})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},void 0)},{}],24:[function(e,t,n){(function(e){!function(r,o){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],o):"object"==typeof n?t.exports=o():r.StackFrame=o()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e[0].toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}function r(e){if(e instanceof Object)for(var n=0;n<c.length;n++)e.hasOwnProperty(c[n])&&void 0!==e[c[n]]&&this["set"+t(c[n])](e[c[n]])}var o=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],a=["fileName","functionName","source"],s=["args"],c=o.concat(i,a,s);r.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof r)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new r(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var u=0;u<o.length;u++)r.prototype["get"+t(o[u])]=n(o[u]),r.prototype["set"+t(o[u])]=function(e){return function(t){this[e]=Boolean(t)}}(o[u]);for(var p=0;p<i.length;p++)r.prototype["get"+t(i[p])]=n(i[p]),r.prototype["set"+t(i[p])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(i[p]);for(var l=0;l<a.length;l++)r.prototype["get"+t(a[l])]=n(a[l]),r.prototype["set"+t(a[l])]=function(e){return function(t){this[e]=String(t)}}(a[l]);return r})}).call(this,void 0)},{}],25:[function(e,t,n){(function(r){!function(o,i){"use strict";"function"==typeof r&&r.amd?r("stack-generator",["stackframe"],i):"object"==typeof n?t.exports=i(e("stackframe")):o.StackGenerator=i(o.StackFrame)}(this,function(e){return{backtrace:function(t){var n=[],r=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(r=t.maxStackSize);for(var o=arguments.callee;o&&n.length<r;){for(var i=new Array(o.arguments.length),a=0;a<i.length;++a)i[a]=o.arguments[a];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?n.push(new e({functionName:RegExp.$1||void 0,args:i})):n.push(new e({args:i}));try{o=o.caller}catch(s){break}}return n}}})}).call(this,void 0)},{stackframe:24}],26:[function(e,t,n){(function(e){!function(r,o){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],o):"object"==typeof n?t.exports=o():r.StackFrame=o()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,n,r,o,i){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})}).call(this,void 0)},{}],27:[function(e,t,n){function o(e){return i(e)}var i=e("./ngOpbeat"),a=e("./patches/bootstrapPatch"),s=e("opbeat-js-core").patchCommon;t.exports=function(e){function t(){}function n(e){u.angularInitializer.beforeBootstrap()}function r(){u.angularInitializer.afterBootstrap()}var c=e.getPerformanceServiceContainer(),u=c.services;u.configService.isPlatformSupported()?c.initialize():u.logger.warn("Platform is not supported.");var p=!1;s(c),u.angularInitializer={afterBootstrap:t,beforeBootstrap:t},u.exceptionHandler=e.getExceptionHandler(),u.exceptionHandler.install(),p=o(u),a(function(e,t,i){p||(p=o(u));var a;return u.configService.isPlatformSupported()?(n(),a=u.zoneService.runInOpbeatZone(e,t,i,"angular:bootstrap"),r()):a=e.apply(t,i),a})}},{"./ngOpbeat":28,"./patches/bootstrapPatch":30,"opbeat-js-core":13}],28:[function(e,t,n){function r(e,t,n){this.config=function(e){e&&t.setConfig(e)},this.version=t.get("VERSION"),this.install=function(){e.warn("$opbeatProvider.install is deprecated!")},this.$get=[function(){return{getConfig:function(){return t},captureException:function(t,r){return t instanceof Error?void n.processError(t,r):void e.warn("Can't capture exception. Passed exception needs to be an instanceof Error")},setUserContext:function(e){t.set("context.user",e)},setExtraContext:function(e){t.set("context.extra",e)}}}]}function o(e,t){f(e),c(e,t),u(e,t),p(e,t),l(e,t),d(e,t)}function i(e){var t=window.opbeat||(window.opbeat={});h.extend(t,e)}function a(){}var c=e("./patches/controllerPatch"),u=e("./patches/compilePatch"),p=e("./patches/rootScopePatch"),l=e("./patches/directivesPatch"),f=e("./patches/exceptionHandlerPatch"),d=e("./patches/interactionsPatch"),h=e("opbeat-js-core").utils;t.exports=function(e){function s(){return void 0!==window.cordova?"cordova":"browser"}var c=e.transactionService,u=e.logger,p=e.configService,l=e.exceptionHandler,f=e.angularInitializer,d=!1,h=!0;if(i({setInitialPageLoadName:function(e){c.initialPageLoadName=e}}),window.angular&&"function"==typeof window.angular.module)return p.isPlatformSupported()?(window.angular.module("ngOpbeat",[]).provider("$opbeat",new r(u,p,l)).config(["$provide",function(e){o(e,c)}]).run(["$rootScope","$injector",function(e,t){function n(e){if(d=!0,p.get("performance.enable")){u.debug("Route change started");var t=e;""!==t&&void 0!==t||(t="/");var n=c.startTransaction(t,"route-change");n&&h&&(h=!1,n.isHardNavigation=!0)}else u.debug("Performance monitoring is disable")}function r(e,t){var r;if(t&&t.$$route){if(void 0!==t.$$route.redirectTo)return;r=t.$$route.originalPath}else t&&t.name&&(r=t.name);n(r)}p.set("isInstalled",!0),p.set("opbeatAgentName","opbeat-angular"),p.set("platform.framework","angular/"+window.angular.version.full);var o=s();o&&p.set("platform.platform",o),u.debug("Agent:",p.getAgentName()),t.has("$transitions")?t.get("$transitions").onStart({},function(e){n(e.to().name)}):(e.$on("$routeChangeStart",r),e.$on("$stateChangeStart",r))}]),f.beforeBootstrap=function(){c.metrics.appBeforeBootstrap=performance.now()},f.afterBootstrap=function(){c.metrics.appAfterBootstrap=performance.now(),d||c.sendPageLoadMetrics()}):window.angular.module("ngOpbeat",[]).provider("$opbeat",new r(u,p,l)).config(["$provide",a]).run(["$rootScope",a]),window.angular.module("opbeat-angular",["ngOpbeat"]),!0}},{"./patches/compilePatch":31,"./patches/controllerPatch":32,"./patches/directivesPatch":33,"./patches/exceptionHandlerPatch":34,"./patches/interactionsPatch":35,"./patches/rootScopePatch":36,"opbeat-js-core":13}],29:[function(e,t,n){var i=e("opbeat-js-core").ServiceFactory,a=e("./angularInitializer");e("opbeat-zone"),function(){var e=new i;window.opbeatApi&&window.opbeatApi.serviceFactory&&(e=window.opbeatApi.serviceFactory),a(e)}()},{"./angularInitializer":27,"opbeat-js-core":13,"opbeat-zone":23}],30:[function(e,t,n){function r(e,t){function n(n,o){return t&&u.test(window.name)&&(window.name=window.name.substring(c.length)),e(r,window.angular,arguments)}if(void 0!==window.angular){var r=window.angular.bootstrap;Object.defineProperty(window.angular,"bootstrap",{get:function(){return"function"==typeof r?n:r},set:function(e){r=e}})}}function o(e){if(void 0!==window.angular){if(u.test(window.name)){var t=window.angular.resumeBootstrap;return Object.defineProperty(window.angular,"resumeBootstrap",{get:function(){return"function"==typeof t?function(n){return e(t,window.angular,arguments)}:t},set:function(e){t=e}}),!1}return window.name=c+window.name,window.angular.resumeDeferredBootstrap=function(){var t=[];return e(window.angular.resumeBootstrap,window.angular,[t])},window.addEventListener("beforeunload",function(){u.test(window.name)&&(window.name=window.name.substring(c.length))}),!0}}function i(e){var t=!1,n=window.angular;Object.defineProperty(window,"angular",{get:function(){return n},set:function(r){n=r,t||"object"!=typeof n||(t=!0,a(e))},enumerable:!0,configurable:!0})}function a(e){r(e,o(e))}var c="NG_DEFER_BOOTSTRAP!",u=new RegExp("^"+c+".*");t.exports=function(e){window.angular?a(e):i(e)}},{}],31:[function(e,t,n){var r=e("opbeat-js-core"),o=r.patchUtils,i=r.utils;t.exports=function(e,t){e.decorator("$compile",["$delegate","$injector",function(e,n){function r(){var n=t.startTrace(c,s,{enableStackFrames:!1});try{var r=e.apply(this,arguments)}finally{i.isUndefined(n)||n.end()}return r}var s="template.$compile",c=["$compile","compile"].join(".");return o._copyProperties(e,r),r}])}},{"opbeat-js-core":13}],32:[function(e,t,n){function r(e){var t,n;return"string"==typeof e[0]?n=e[0]:"function"==typeof e[0]&&(n=e[0].name),"object"==typeof e[1]&&(t=e[1].$scope),{scope:t,name:n}}var o=e("opbeat-js-core").utils;t.exports=function(e,t){e.decorator("$controller",["$delegate","$injector",function(e,n){return function(){var i=r(Array.prototype.slice.call(arguments));if(i.name){var a,s="$controller."+i.name,u=t.startTrace(s,"app.$controller",{enableStackFrames:!1});try{a=e.apply(this,arguments)}finally{o.isUndefined(u)||u.end()}}else a=e.apply(this,arguments);return a}}])}},{"opbeat-js-core":13}],33:[function(e,t,n){function r(e){return null==e?null:(e.exp?e=e.exp:e.name&&(e=e.name),e.toString())}var o=e("opbeat-js-core").utils;t.exports=function(e,t){"use strict";e.decorator("ngRepeatDirective",["$delegate","$injector",function(e,n){var i=e[0],a=i.compile;return i.compile=function(){var e=a.apply(this,arguments);return function(){var n=arguments[0],i=n.$watchCollection;n.$watchCollection=function(e,n){var a=r(e);"function"==typeof n&&(arguments[1]=function(e){var r="";if(null!=a){var i=Array.isArray(e)?"["+e.length+"]":"";r=a+i}var s="ngRepeat "+r,u=t.startTrace(s,"template.ngRepeat",{enableStackFrames:!1}),p=n.apply(this,arguments);return o.isUndefined(u)||u.end(),p}),i.apply(this,arguments)};var a=e.apply(this,arguments);return n.$watchCollection=i,a}},e}])}},{"opbeat-js-core":13}],34:[function(e,t,n){t.exports=function(e){e.decorator("$exceptionHandler",["$delegate","$opbeat",function(e,t){return function(n,r){return t.captureException(n),e(n,r)}}])}},{}],35:[function(e,t,n){t.exports=function(e,t){"use strict";function n(e,n){var r=e.compile;e.compile=function(){var e=r.apply(this,arguments);return function(r,o,i){var a=i.$normalize("ng-"+n),s=i[a];return o.on(n,function(e){t.startTransaction(a+": "+s,"interaction")}),e.apply(this,arguments)}}}e.decorator("ngSubmitDirective",["$delegate","$injector",function(e,t){return n(e[0],"submit"),e}]),e.decorator("ngClickDirective",["$delegate","$injector",function(e,t){return n(e[0],"click"),e}])}},{}],36:[function(e,t,n){function r(e,t){var n="getPrototypeOf"in Object?Object.getPrototypeOf(e):e.__proto__,r=n.$digest;return n.$digest=function(){var e=t.startTrace("$scope.$digest","app.$digest",{enableStackFrames:!1}),n=r.apply(this,arguments);return e&&e.end(),n},e}t.exports=function(e,t){e.decorator("$rootScope",["$delegate","$injector",function(e,n){return r(e,t)}])}},{}]},{},[29]),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Quantimodo=f()}}(function(){return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}void 0!==module&&(module.exports=Emitter),Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks["$"+event],this;for(var cb,i=0;i<callbacks.length;i++)if((cb=callbacks[i])===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks)for(var i=0,len=(callbacks=callbacks.slice(0)).length;i<len;++i)callbacks[i].apply(this,args);return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks["$"+event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],2:[function(require,module,exports){function noop(){}function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj)pushEncodedKeyValuePair(pairs,key,obj[key]);return pairs.join("&")}function pushEncodedKeyValuePair(pairs,key,val){if(null!=val)if(Array.isArray(val))val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)});else if(isObject(val))for(var subkey in val)pushEncodedKeyValuePair(pairs,key+"["+subkey+"]",val[subkey]);else pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(val));else null===val&&pairs.push(encodeURIComponent(key))}function parseString(str){for(var pair,pos,obj={},pairs=str.split("&"),i=0,len=pairs.length;i<len;++i)-1==(pos=(pair=pairs[i]).indexOf("="))?obj[decodeURIComponent(pair)]="":obj[decodeURIComponent(pair.slice(0,pos))]=decodeURIComponent(pair.slice(pos+1));return obj}function parseHeader(str){var index,line,field,val,lines=str.split(/\r?\n/),fields={};lines.pop();for(var i=0,len=lines.length;i<len;++i)index=(line=lines[i]).indexOf(":"),field=line.slice(0,index).toLowerCase(),val=trim(line.slice(index+1)),fields[field]=val;return fields}function isJSON(mime){return/[\/+]json\b/.test(mime)}function Response(req){this.req=req,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var status=this.xhr.status;1223===status&&(status=204),this._setStatusProperties(status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&req._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function Request(method,url){var self=this;this._query=this._query||[],this.method=method,this.url=url,this.header={},this._header={},this.on("end",function(){var err=null,res=null;try{res=new Response(self)}catch(e){return err=new Error("Parser is unable to parse the response"),err.parse=!0,err.original=e,self.xhr?(err.rawResponse=void 0===self.xhr.responseType?self.xhr.responseText:self.xhr.response,err.status=self.xhr.status?self.xhr.status:null,err.statusCode=err.status):(err.rawResponse=null,err.status=null),self.callback(err)}self.emit("response",res);var new_err;try{self._isResponseOK(res)||((new_err=new Error(res.statusText||"Unsuccessful HTTP response")).original=err,new_err.response=res,new_err.status=res.status)}catch(e){new_err=e}new_err?self.callback(new_err,res):self.callback(null,res)})}function del(url,data,fn){var req=request("DELETE",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}var root;"undefined"!=typeof window?root=window:"undefined"!=typeof self?root=self:(console.warn("Using browser-only version of superagent in non-browser environment"),root=this);var Emitter=require("component-emitter"),RequestBase=require("./request-base"),isObject=require("./is-object"),isFunction=require("./is-function"),ResponseBase=require("./response-base"),shouldRetry=require("./should-retry"),request=exports=module.exports=function(method,url){return"function"==typeof url?new exports.Request("GET",method).end(url):1==arguments.length?new exports.Request("GET",method):new exports.Request(method,url)};exports.Request=Request,request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only verison of superagent could not find XHR")};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},ResponseBase(Response.prototype),Response.prototype._parseBody=function(str){var parse=request.parse[this.type];return this.req._parser?this.req._parser(this,str):(!parse&&isJSON(this.type)&&(parse=request.parse["application/json"]),parse&&str&&(str.length||str instanceof Object)?parse(str):null)},Response.prototype.toError=function(){var req=this.req,method=req.method,url=req.url,msg="cannot "+method+" "+url+" ("+this.status+")",err=new Error(msg);return err.status=this.status,err.method=method,err.url=url,err},request.Response=Response,Emitter(Request.prototype),RequestBase(Request.prototype),Request.prototype.type=function(type){return this.set("Content-Type",request.types[type]||type),this},Request.prototype.accept=function(type){return this.set("Accept",request.types[type]||type),this},Request.prototype.auth=function(user,pass,options){switch("object"==typeof pass&&null!==pass&&(options=pass),options||(options={type:"function"==typeof btoa?"basic":"auto"}),options.type){case"basic":this.set("Authorization","Basic "+btoa(user+":"+pass));break;case"auto":this.username=user,this.password=pass;break;case"bearer":this.set("Authorization","Bearer "+user)}return this},Request.prototype.query=function(val){return"string"!=typeof val&&(val=serialize(val)),val&&this._query.push(val),this},Request.prototype.attach=function(field,file,options){if(file){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(field,file,options||file.name)}return this},Request.prototype._getFormData=function(){return this._formData||(this._formData=new root.FormData),this._formData},Request.prototype.callback=function(err,res){if(this._maxRetries&&this._retries++<this._maxRetries&&shouldRetry(err,res))return this._retry();var fn=this._callback;this.clearTimeout(),err&&(this._maxRetries&&(err.retries=this._retries-1),this.emit("error",err)),fn(err,res)},Request.prototype.crossDomainError=function(){var err=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");err.crossDomain=!0,err.status=this.status,err.method=this.method,err.url=this.url,this.callback(err)},Request.prototype.buffer=Request.prototype.ca=Request.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},Request.prototype.pipe=Request.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},Request.prototype._appendQueryString=function(){var query=this._query.join("&");if(query&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+query),this._sort){var index=this.url.indexOf("?");if(index>=0){var queryArr=this.url.substring(index+1).split("&");isFunction(this._sort)?queryArr.sort(this._sort):queryArr.sort(),this.url=this.url.substring(0,index)+"?"+queryArr.join("&")}}},Request.prototype._isHost=function(obj){return obj&&"object"==typeof obj&&!Array.isArray(obj)&&"[object Object]"!==Object.prototype.toString.call(obj)},Request.prototype.end=function(fn){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=fn||noop,this._appendQueryString(),this._end()},Request.prototype._end=function(){var self=this,xhr=this.xhr=request.getXHR(),data=this._formData||this._data;this._setTimeouts(),xhr.onreadystatechange=function(){var readyState=xhr.readyState;if(readyState>=2&&self._responseTimeoutTimer&&clearTimeout(self._responseTimeoutTimer),4==readyState){var status;try{status=xhr.status}catch(e){status=0}if(!status){if(self.timedout||self._aborted)return;return self.crossDomainError()}self.emit("end")}};var handleProgress=function(direction,e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction=direction,self.emit("progress",e)};if(this.hasListeners("progress"))try{xhr.onprogress=handleProgress.bind(null,"download"),xhr.upload&&(xhr.upload.onprogress=handleProgress.bind(null,"upload"))}catch(e){}try{this.username&&this.password?xhr.open(this.method,this.url,!0,this.username,this.password):xhr.open(this.method,this.url,!0)}catch(err){return this.callback(err)}if(this._withCredentials&&(xhr.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!this._isHost(data)){var contentType=this._header["content-type"],serialize=this._serializer||request.serialize[contentType?contentType.split(";")[0]:""];!serialize&&isJSON(contentType)&&(serialize=request.serialize["application/json"]),serialize&&(data=serialize(data))}for(var field in this.header)null!=this.header[field]&&this.header.hasOwnProperty(field)&&xhr.setRequestHeader(field,this.header[field]);return this._responseType&&(xhr.responseType=this._responseType),this.emit("request",this),xhr.send(void 0!==data?data:null),this},request.get=function(url,data,fn){var req=request("GET",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.head=function(url,data,fn){var req=request("HEAD",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.options=function(url,data,fn){var req=request("OPTIONS",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.del=del,request.delete=del,request.patch=function(url,data,fn){var req=request("PATCH",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.post=function(url,data,fn){var req=request("POST",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.put=function(url,data,fn){var req=request("PUT",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}},{"./is-function":3,"./is-object":4,"./request-base":5,"./response-base":6,"./should-retry":7,"component-emitter":1}],3:[function(require,module,exports){var isObject=require("./is-object");module.exports=function(fn){return"[object Function]"===(isObject(fn)?Object.prototype.toString.call(fn):"")}},{"./is-object":4}],4:[function(require,module,exports){module.exports=function(obj){return null!==obj&&"object"==typeof obj}},{}],5:[function(require,module,exports){function RequestBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in RequestBase.prototype)obj[key]=RequestBase.prototype[key];return obj}var isObject=require("./is-object");module.exports=RequestBase,RequestBase.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},RequestBase.prototype.parse=function(fn){return this._parser=fn,this},RequestBase.prototype.responseType=function(val){return this._responseType=val,this},RequestBase.prototype.serialize=function(fn){return this._serializer=fn,this},RequestBase.prototype.timeout=function(options){if(!options||"object"!=typeof options)return this._timeout=options,this._responseTimeout=0,this;for(var option in options)switch(option){case"deadline":this._timeout=options.deadline;break;case"response":this._responseTimeout=options.response;break;default:console.warn("Unknown timeout option",option)}return this},RequestBase.prototype.retry=function(count){return 0!==arguments.length&&!0!==count||(count=1),count<=0&&(count=0),this._maxRetries=count,this._retries=0,this},RequestBase.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},RequestBase.prototype.then=function(resolve,reject){if(!this._fullfilledPromise){var self=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(innerResolve,innerReject){self.end(function(err,res){err?innerReject(err):innerResolve(res)})})}return this._fullfilledPromise.then(resolve,reject)},RequestBase.prototype.catch=function(cb){return this.then(void 0,cb)},RequestBase.prototype.use=function(fn){return fn(this),this},RequestBase.prototype.ok=function(cb){if("function"!=typeof cb)throw Error("Callback required");return this._okCallback=cb,this},RequestBase.prototype._isResponseOK=function(res){return!!res&&(this._okCallback?this._okCallback(res):res.status>=200&&res.status<300)},RequestBase.prototype.get=function(field){return this._header[field.toLowerCase()]},RequestBase.prototype.getHeader=RequestBase.prototype.get,RequestBase.prototype.set=function(field,val){if(isObject(field)){for(var key in field)this.set(key,field[key]);return this}return this._header[field.toLowerCase()]=val,this.header[field]=val,this},RequestBase.prototype.unset=function(field){return delete this._header[field.toLowerCase()],delete this.header[field],this},RequestBase.prototype.field=function(name,val){if(null===name||void 0===name)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),isObject(name)){for(var key in name)this.field(key,name[key]);return this}if(Array.isArray(val)){for(var i in val)this.field(name,val[i]);return this}if(null===val||void 0===val)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof val&&(val=""+val),this._getFormData().append(name,val),this},RequestBase.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},RequestBase.prototype.withCredentials=function(on){return void 0==on&&(on=!0),this._withCredentials=on,this},RequestBase.prototype.redirects=function(n){return this._maxRedirects=n,this},RequestBase.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},RequestBase.prototype.send=function(data){var isObj=isObject(data),type=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),isObj&&!this._data)Array.isArray(data)?this._data=[]:this._isHost(data)||(this._data={});else if(data&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(isObj&&isObject(this._data))for(var key in data)this._data[key]=data[key];else"string"==typeof data?(type||this.type("form"),type=this._header["content-type"],this._data="application/x-www-form-urlencoded"==type?this._data?this._data+"&"+data:data:(this._data||"")+data):this._data=data;return!isObj||this._isHost(data)?this:(type||this.type("json"),this)},RequestBase.prototype.sortQuery=function(sort){return this._sort=void 0===sort||sort,this},RequestBase.prototype._timeoutError=function(reason,timeout,errno){if(!this._aborted){var err=new Error(reason+timeout+"ms exceeded");err.timeout=timeout,err.code="ECONNABORTED",err.errno=errno,this.timedout=!0,this.abort(),this.callback(err)}},RequestBase.prototype._setTimeouts=function(){var self=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){self._timeoutError("Timeout of ",self._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){self._timeoutError("Response timeout of ",self._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},{"./is-object":4}],6:[function(require,module,exports){function ResponseBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in ResponseBase.prototype)obj[key]=ResponseBase.prototype[key];return obj}var utils=require("./utils");module.exports=ResponseBase,ResponseBase.prototype.get=function(field){return this.header[field.toLowerCase()]},ResponseBase.prototype._setHeaderProperties=function(header){var ct=header["content-type"]||"";this.type=utils.type(ct);var params=utils.params(ct);for(var key in params)this[key]=params[key];this.links={};try{header.link&&(this.links=utils.parseLinks(header.link))}catch(err){}},ResponseBase.prototype._setStatusProperties=function(status){var type=status/100|0;this.status=this.statusCode=status,this.statusType=type,this.info=1==type,this.ok=2==type,this.redirect=3==type,this.clientError=4==type,this.serverError=5==type,this.error=(4==type||5==type)&&this.toError(),this.accepted=202==status,this.noContent=204==status,this.badRequest=400==status,this.unauthorized=401==status,this.notAcceptable=406==status,this.forbidden=403==status,this.notFound=404==status}},{"./utils":8}],7:[function(require,module,exports){var ERROR_CODES=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];module.exports=function(err,res){return!!(err&&err.code&&~ERROR_CODES.indexOf(err.code))||(!!(res&&res.status&&res.status>=500)||(!!(err&&"timeout"in err&&"ECONNABORTED"==err.code)||!!(err&&"crossDomain"in err)))}},{}],8:[function(require,module,exports){exports.type=function(str){return str.split(/ *; */).shift()},exports.params=function(str){return str.split(/ *; */).reduce(function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();return key&&val&&(obj[key]=val),obj},{})},exports.parseLinks=function(str){return str.split(/ *, */).reduce(function(obj,str){var parts=str.split(/ *; */),url=parts[0].slice(1,-1);return obj[parts[1].split(/ *= */)[1].slice(1,-1)]=url,obj},{})},exports.cleanHeader=function(header,shouldStripCookie){return delete header["content-type"],delete header["content-length"],delete header["transfer-encoding"],delete header.host,shouldStripCookie&&delete header.cookie,header}},{}],9:[function(require,module,exports){(function(Buffer){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("superagent"),require("querystring")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.ApiClient=factory(root.superagent,root.querystring))}(this,function(superagent,querystring){"use strict";var exports=function(){this.basePath="https://app.quantimo.do/api".replace(/\/+$/,""),this.authentications={access_token:{type:"apiKey",in:"query",name:"access_token"},client_id:{type:"apiKey",in:"query",name:"clientId"},quantimodo_oauth2:{type:"oauth2"}},this.defaultHeaders={},this.timeout=6e4,this.cache=!0,this.enableCookies=!1,"undefined"==typeof window&&(this.agent=new superagent.agent),this.requestAgent=null};return exports.prototype.paramToString=function(param){return void 0==param||null==param?"":param instanceof Date?param.toJSON():param.toString()},exports.prototype.buildUrl=function(path,pathParams){path.match(/^\//)||(path="/"+path);var url=this.basePath+path,_this=this;return url=url.replace(/\{([\w-]+)\}/g,function(fullMatch,key){var value;return value=pathParams.hasOwnProperty(key)?_this.paramToString(pathParams[key]):fullMatch,encodeURIComponent(value)})},exports.prototype.isJsonMime=function(contentType){return Boolean(null!=contentType&&contentType.match(/^application\/json(;.*)?$/i))},exports.prototype.jsonPreferredMime=function(contentTypes){for(var i=0;i<contentTypes.length;i++)if(this.isJsonMime(contentTypes[i]))return contentTypes[i];return contentTypes[0]},exports.prototype.isFileParam=function(param){if("function"==typeof require){var fs;try{fs=require("fs")}catch(err){}if(fs&&fs.ReadStream&&param instanceof fs.ReadStream)return!0}return"function"==typeof Buffer&&param instanceof Buffer||("function"==typeof Blob&&param instanceof Blob||"function"==typeof File&&param instanceof File)},exports.prototype.normalizeParams=function(params){var newParams={};for(var key in params)if(params.hasOwnProperty(key)&&void 0!=params[key]&&null!=params[key]){var value=params[key];this.isFileParam(value)||Array.isArray(value)?newParams[key]=value:newParams[key]=this.paramToString(value)}return newParams},exports.CollectionFormatEnum={CSV:",",SSV:" ",TSV:"\t",PIPES:"|",MULTI:"multi"},exports.prototype.buildCollectionParam=function(param,collectionFormat){if(null==param)return null;switch(collectionFormat){case"csv":return param.map(this.paramToString).join(",");case"ssv":return param.map(this.paramToString).join(" ");case"tsv":return param.map(this.paramToString).join("\t");case"pipes":return param.map(this.paramToString).join("|");case"multi":return param.map(this.paramToString);default:throw new Error("Unknown collection format: "+collectionFormat)}},exports.prototype.applyAuthToRequest=function(request,authNames){var _this=this;authNames.forEach(function(authName){var auth=_this.authentications[authName];switch(auth.type){case"basic":(auth.username||auth.password)&&request.auth(auth.username||"",auth.password||"");break;case"apiKey":if(auth.apiKey){var data={};auth.apiKeyPrefix?data[auth.name]=auth.apiKeyPrefix+" "+auth.apiKey:data[auth.name]=auth.apiKey,"header"===auth.in?request.set(data):request.query(data)}break;case"oauth2":auth.accessToken&&request.set({Authorization:"Bearer "+auth.accessToken});break;default:throw new Error("Unknown authentication type: "+auth.type)}})},exports.prototype.deserialize=function(response,returnType){if(null==response||null==returnType||204==response.status)return null;var data=response.body;return(null==data||"object"==typeof data&&void 0===data.length&&!Object.keys(data).length)&&(data=response.text),exports.convertToType(data,returnType)},exports.prototype.callApi=function(path,httpMethod,pathParams,queryParams,collectionQueryParams,headerParams,formParams,bodyParam,authNames,contentTypes,accepts,returnType,callback){var _this=this,url=this.buildUrl(path,pathParams),request=superagent(httpMethod,url);this.applyAuthToRequest(request,authNames);for(var key in collectionQueryParams)if(collectionQueryParams.hasOwnProperty(key)){var param=collectionQueryParams[key];if("csv"===param.collectionFormat){if(null!=param.value){var value=param.value.map(this.paramToString).map(encodeURIComponent).join(",");request.query(encodeURIComponent(key)+"="+value)}}else queryParams[key]=this.buildCollectionParam(param.value,param.collectionFormat)}"GET"===httpMethod.toUpperCase()&&!1===this.cache&&(queryParams._=(new Date).getTime()),request.query(this.normalizeParams(queryParams)),request.set(this.defaultHeaders).set(this.normalizeParams(headerParams)),this.requestAgent&&request.agent(this.requestAgent),request.timeout(this.timeout);var contentType=this.jsonPreferredMime(contentTypes);if(contentType?"multipart/form-data"!=contentType&&request.type(contentType):request.header["Content-Type"]||request.type("application/json"),"application/x-www-form-urlencoded"===contentType)request.send(querystring.stringify(this.normalizeParams(formParams)));else if("multipart/form-data"==contentType){var _formParams=this.normalizeParams(formParams);for(var key in _formParams)_formParams.hasOwnProperty(key)&&(this.isFileParam(_formParams[key])?request.attach(key,_formParams[key]):request.field(key,_formParams[key]))}else bodyParam&&request.send(bodyParam);var accept=this.jsonPreferredMime(accepts);return accept&&request.accept(accept),"Blob"===returnType?request.responseType("blob"):"String"===returnType&&request.responseType("string"),this.enableCookies&&("undefined"==typeof window?this.agent.attachCookies(request):request.withCredentials()),request.end(function(error,response){if(callback){var data=null;if(!error)try{data=_this.deserialize(response,returnType),_this.enableCookies&&"undefined"==typeof window&&_this.agent.saveCookies(response)}catch(err){error=err}callback(error,data,response)}}),request},exports.parseDate=function(str){return new Date(str.replace(/T/i," "))},exports.convertToType=function(data,type){if(null===data||void 0===data)return data;switch(type){case"Boolean":return Boolean(data);case"Integer":return parseInt(data,10);case"Number":return parseFloat(data);case"String":return String(data);case"Date":return this.parseDate(String(data));case"Blob":return data;default:if(type===Object)return data;if("function"==typeof type)return type.constructFromObject(data);if(Array.isArray(type)){var itemType=type[0];return data.map(function(item){return exports.convertToType(item,itemType)})}if("object"==typeof type){var keyType,valueType;for(var k in type)if(type.hasOwnProperty(k)){keyType=k,valueType=type[k];break}var result={};for(var k in data)if(data.hasOwnProperty(k)){var key=exports.convertToType(k,keyType),value=exports.convertToType(data[k],valueType);result[key]=value}return result}return data}},exports.constructFromObject=function(data,obj,itemType){if(Array.isArray(data))for(var i=0;i<data.length;i++)data.hasOwnProperty(i)&&(obj[i]=exports.convertToType(data[i],itemType));else for(var k in data)data.hasOwnProperty(k)&&(obj[k]=exports.convertToType(data[k],itemType))},exports.instance=new exports,exports})}).call(this,require("buffer").Buffer)},{buffer:78,fs:77,querystring:82,superagent:2}],10:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("../model/CommonResponse"),require("../model/Correlation"),require("../model/GetCorrelationsResponse"),require("../model/JsonErrorResponse"),require("../model/Study"),require("../model/Vote"),require("../model/VoteDelete")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.AnalyticsApi=factory(root.Quantimodo.ApiClient,root.Quantimodo.CommonResponse,root.Quantimodo.Correlation,root.Quantimodo.GetCorrelationsResponse,root.Quantimodo.JsonErrorResponse,root.Quantimodo.Study,root.Quantimodo.Vote,root.Quantimodo.VoteDelete))}(this,function(ApiClient,CommonResponse,Correlation,GetCorrelationsResponse,JsonErrorResponse,Study,Vote,VoteDelete){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.deleteVote=function(body,opts,callback){opts=opts||{};var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling deleteVote");var pathParams={},queryParams={userId:opts.userId},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=CommonResponse;return this.apiClient.callApi("/v3/votes/delete","DELETE",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)},this.getCorrelationExplanations=function(opts,callback){var pathParams={},queryParams={causeVariableName:(opts=opts||{}).causeVariableName,effectVariableName:opts.effectVariableName},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=[Correlation];return this.apiClient.callApi("/v3/correlations/explanations","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.getCorrelations=function(opts,callback){var pathParams={},queryParams={causeVariableName:(opts=opts||{}).causeVariableName,effectVariableName:opts.effectVariableName,sort:opts.sort,limit:opts.limit,offset:opts.offset,userId:opts.userId,correlationCoefficient:opts.correlationCoefficient,updatedAt:opts.updatedAt,outcomesOfInterest:opts.outcomesOfInterest,clientId:opts.clientId,commonOnly:opts.commonOnly,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=GetCorrelationsResponse;return this.apiClient.callApi("/v3/correlations","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.getStudy=function(opts,callback){var pathParams={},queryParams={causeVariableName:(opts=opts||{}).causeVariableName,effectVariableName:opts.effectVariableName,userId:opts.userId,appName:opts.appName,clientId:opts.clientId,includeCharts:opts.includeCharts,platform:opts.platform,recalculate:opts.recalculate},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=Study;return this.apiClient.callApi("/v4/study","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.postVote=function(body,opts,callback){opts=opts||{};var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling postVote");var pathParams={},queryParams={userId:opts.userId},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=CommonResponse;return this.apiClient.callApi("/v3/votes","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)}}})},{"../ApiClient":9,"../model/CommonResponse":25,"../model/Correlation":29,"../model/GetCorrelationsResponse":36,"../model/JsonErrorResponse":39,"../model/Study":56,"../model/Vote":74,"../model/VoteDelete":75}],11:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("../model/AppSettingsResponse"),require("../model/JsonErrorResponse")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.AppSettingsApi=factory(root.Quantimodo.ApiClient,root.Quantimodo.AppSettingsResponse,root.Quantimodo.JsonErrorResponse))}(this,function(ApiClient,AppSettingsResponse,JsonErrorResponse){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.getAppSettings=function(opts,callback){var pathParams={},queryParams={clientId:(opts=opts||{}).clientId,client_secret:opts.clientSecret,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=[],contentTypes=["application/json"],accepts=["application/json"],returnType=AppSettingsResponse;return this.apiClient.callApi("/v3/appSettings","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)}}})},{"../ApiClient":9,"../model/AppSettingsResponse":22,"../model/JsonErrorResponse":39}],12:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.AuthenticationApi=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.getAccessToken=function(grantType,code,responseType,scope,opts,callback){if(opts=opts||{},void 0===grantType||null===grantType)throw new Error("Missing the required parameter 'grantType' when calling getAccessToken");if(void 0===code||null===code)throw new Error("Missing the required parameter 'code' when calling getAccessToken");if(void 0===responseType||null===responseType)throw new Error("Missing the required parameter 'responseType' when calling getAccessToken");if(void 0===scope||null===scope)throw new Error("Missing the required parameter 'scope' when calling getAccessToken");var pathParams={},queryParams={clientId:opts.clientId,client_secret:opts.clientSecret,grant_type:grantType,code:code,response_type:responseType,scope:scope,redirect_uri:opts.redirectUri,state:opts.state,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v3/oauth2/token","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,null,callback)},this.getOauthAuthorizationCode=function(responseType,scope,opts,callback){if(opts=opts||{},void 0===responseType||null===responseType)throw new Error("Missing the required parameter 'responseType' when calling getOauthAuthorizationCode");if(void 0===scope||null===scope)throw new Error("Missing the required parameter 'scope' when calling getOauthAuthorizationCode");var pathParams={},queryParams={clientId:opts.clientId,client_secret:opts.clientSecret,response_type:responseType,scope:scope,redirect_uri:opts.redirectUri,state:opts.state,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v3/oauth2/authorize","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,null,callback)},this.postGoogleIdToken=function(callback){var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=[],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v3/googleIdToken","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,null,callback)}}})},{"../ApiClient":9}],13:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("../model/GetConnectorsResponse")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.ConnectorsApi=factory(root.Quantimodo.ApiClient,root.Quantimodo.GetConnectorsResponse))}(this,function(ApiClient,GetConnectorsResponse){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.connectConnector=function(connectorName,opts,callback){if(opts=opts||{},void 0===connectorName||null===connectorName)throw new Error("Missing the required parameter 'connectorName' when calling connectConnector");var pathParams={connectorName:connectorName},queryParams={userId:opts.userId},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v3/connectors/{connectorName}/connect","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,null,callback)},this.disconnectConnector=function(connectorName,callback){if(void 0===connectorName||null===connectorName)throw new Error("Missing the required parameter 'connectorName' when calling disconnectConnector");var pathParams={connectorName:connectorName},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v3/connectors/{connectorName}/disconnect","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,null,callback)},this.getConnectors=function(opts,callback){var pathParams={},queryParams={appName:(opts=opts||{}).appName,clientId:opts.clientId,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=GetConnectorsResponse;return this.apiClient.callApi("/v3/connectors/list","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.getIntegrationJs=function(opts,callback){var pathParams={},queryParams={clientId:(opts=opts||{}).clientId,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=[],contentTypes=["application/json"],accepts=["application/x-javascript"];return this.apiClient.callApi("/v3/integration.js","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,null,callback)},this.getMobileConnectPage=function(opts,callback){var pathParams={},queryParams={userId:(opts=opts||{}).userId},collectionQueryParams={},headerParams={},formParams={},authNames=[],contentTypes=["application/json"],accepts=["text/html"];return this.apiClient.callApi("/v3/connect/mobile","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,null,callback)},this.updateConnector=function(connectorName,opts,callback){if(opts=opts||{},void 0===connectorName||null===connectorName)throw new Error("Missing the required parameter 'connectorName' when calling updateConnector");var pathParams={connectorName:connectorName},queryParams={userId:opts.userId},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v3/connectors/{connectorName}/update","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,null,callback)}}})},{"../ApiClient":9,"../model/GetConnectorsResponse":34}],14:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("../model/CommonResponse"),require("../model/Measurement"),require("../model/MeasurementDelete"),require("../model/MeasurementSet"),require("../model/MeasurementUpdate"),require("../model/Pair"),require("../model/PostMeasurementsResponse")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.MeasurementsApi=factory(root.Quantimodo.ApiClient,root.Quantimodo.CommonResponse,root.Quantimodo.Measurement,root.Quantimodo.MeasurementDelete,root.Quantimodo.MeasurementSet,root.Quantimodo.MeasurementUpdate,root.Quantimodo.Pair,root.Quantimodo.PostMeasurementsResponse))}(this,function(ApiClient,CommonResponse,Measurement,MeasurementDelete,MeasurementSet,MeasurementUpdate,Pair,PostMeasurementsResponse){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.deleteMeasurement=function(body,callback){var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling deleteMeasurement");var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=CommonResponse;return this.apiClient.callApi("/v3/measurements/delete","DELETE",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)},this.getMeasurements=function(opts,callback){var pathParams={},queryParams={variableName:(opts=opts||{}).variableName,sort:opts.sort,limit:opts.limit,offset:opts.offset,variableCategoryName:opts.variableCategoryName,updatedAt:opts.updatedAt,userId:opts.userId,sourceName:opts.sourceName,connectorName:opts.connectorName,value:opts.value,unitName:opts.unitName,earliestMeasurementTime:opts.earliestMeasurementTime,latestMeasurementTime:opts.latestMeasurementTime,createdAt:opts.createdAt,id:opts.id,groupingWidth:opts.groupingWidth,groupingTimezone:opts.groupingTimezone,doNotProcess:opts.doNotProcess,appName:opts.appName,clientId:opts.clientId,doNotConvert:opts.doNotConvert,minMaxFilter:opts.minMaxFilter,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=[Measurement];return this.apiClient.callApi("/v3/measurements","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.getPairs=function(opts,callback){var pathParams={},queryParams={causeVariableName:(opts=opts||{}).causeVariableName,effectVariableName:opts.effectVariableName,effectUnitName:opts.effectUnitName,userId:opts.userId,causeUnitName:opts.causeUnitName,onsetDelay:opts.onsetDelay,durationOfAction:opts.durationOfAction,earliestMeasurementTime:opts.earliestMeasurementTime,latestMeasurementTime:opts.latestMeasurementTime,limit:opts.limit,offset:opts.offset,sort:opts.sort},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=[Pair];return this.apiClient.callApi("/v3/pairs","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.measurementExportRequest=function(opts,callback){var pathParams={},queryParams={userId:(opts=opts||{}).userId},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v2/measurements/exportRequest","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,"Number",callback)},this.postMeasurements=function(body,opts,callback){opts=opts||{};var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling postMeasurements");var pathParams={},queryParams={userId:opts.userId},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=PostMeasurementsResponse;return this.apiClient.callApi("/v3/measurements/post","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)},this.updateMeasurement=function(body,callback){var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling updateMeasurement");var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=CommonResponse;return this.apiClient.callApi("/v3/measurements/update","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)}}})},{"../ApiClient":9,"../model/CommonResponse":25,"../model/Measurement":40,"../model/MeasurementDelete":41,"../model/MeasurementSet":43,"../model/MeasurementUpdate":44,"../model/Pair":45,"../model/PostMeasurementsResponse":49}],15:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("../model/DeviceToken")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.NotificationsApi=factory(root.Quantimodo.ApiClient,root.Quantimodo.DeviceToken))}(this,function(ApiClient,DeviceToken){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.getNotificationPreferences=function(callback){var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=[],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v3/notificationPreferences","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,null,callback)},this.postDeviceToken=function(body,callback){var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling postDeviceToken");var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=[],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v3/deviceTokens","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,null,callback)}}})},{"../ApiClient":9,"../model/DeviceToken":31}],16:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("../model/CommonResponse"),require("../model/GetTrackingReminderNotificationsResponse"),require("../model/PostTrackingRemindersResponse"),require("../model/TrackingReminder"),require("../model/TrackingReminderDelete"),require("../model/TrackingReminderNotificationPost")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.RemindersApi=factory(root.Quantimodo.ApiClient,root.Quantimodo.CommonResponse,root.Quantimodo.GetTrackingReminderNotificationsResponse,root.Quantimodo.PostTrackingRemindersResponse,root.Quantimodo.TrackingReminder,root.Quantimodo.TrackingReminderDelete,root.Quantimodo.TrackingReminderNotificationPost))}(this,function(ApiClient,CommonResponse,GetTrackingReminderNotificationsResponse,PostTrackingRemindersResponse,TrackingReminder,TrackingReminderDelete,TrackingReminderNotificationPost){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.deleteTrackingReminder=function(body,opts,callback){opts=opts||{};var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling deleteTrackingReminder");var pathParams={},queryParams={userId:opts.userId},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=CommonResponse;return this.apiClient.callApi("/v3/trackingReminders/delete","DELETE",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)},this.getTrackingReminderNotifications=function(opts,callback){var pathParams={},queryParams={sort:(opts=opts||{}).sort,userId:opts.userId,createdAt:opts.createdAt,updatedAt:opts.updatedAt,limit:opts.limit,offset:opts.offset,variableCategoryName:opts.variableCategoryName,reminderTime:opts.reminderTime,appName:opts.appName,clientId:opts.clientId,onlyPast:opts.onlyPast,includeDeleted:opts.includeDeleted,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=GetTrackingReminderNotificationsResponse;return this.apiClient.callApi("/v3/trackingReminderNotifications","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.getTrackingReminders=function(opts,callback){var pathParams={},queryParams={userId:(opts=opts||{}).userId,variableCategoryName:opts.variableCategoryName,createdAt:opts.createdAt,updatedAt:opts.updatedAt,limit:opts.limit,offset:opts.offset,sort:opts.sort,appName:opts.appName,clientId:opts.clientId,appVersion:opts.appVersion,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=[TrackingReminder];return this.apiClient.callApi("/v3/trackingReminders","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.postTrackingReminderNotifications=function(body,opts,callback){opts=opts||{};var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling postTrackingReminderNotifications");var pathParams={},queryParams={userId:opts.userId,appName:opts.appName,clientId:opts.clientId,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=CommonResponse;return this.apiClient.callApi("/v3/trackingReminderNotifications","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)},this.postTrackingReminders=function(body,callback){var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling postTrackingReminders");var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=PostTrackingRemindersResponse;return this.apiClient.callApi("/v3/trackingReminders","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)}}})},{"../ApiClient":9,"../model/CommonResponse":25,"../model/GetTrackingReminderNotificationsResponse":37,"../model/PostTrackingRemindersResponse":52,"../model/TrackingReminder":61,"../model/TrackingReminderDelete":62,"../model/TrackingReminderNotificationPost":65}],17:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("../model/PostStudyPublishResponse")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.StudyApi=factory(root.Quantimodo.ApiClient,root.Quantimodo.PostStudyPublishResponse))}(this,function(ApiClient,PostStudyPublishResponse){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.postStudyPublish=function(callback){var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=[],contentTypes=["application/json"],accepts=["application/json"],returnType=PostStudyPublishResponse;return this.apiClient.callApi("/v3/study/publish","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)}}})},{"../ApiClient":9,"../model/PostStudyPublishResponse":50}],18:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("../model/Unit"),require("../model/UnitCategory")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.UnitsApi=factory(root.Quantimodo.ApiClient,root.Quantimodo.Unit,root.Quantimodo.UnitCategory))}(this,function(ApiClient,Unit,UnitCategory){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.getUnitCategories=function(callback){var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=[UnitCategory];return this.apiClient.callApi("/v3/unitCategories","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.getUnits=function(callback){var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=[Unit];return this.apiClient.callApi("/v3/units","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)}}})},{"../ApiClient":9,"../model/Unit":67,"../model/UnitCategory":68}],19:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("../model/CommonResponse"),require("../model/PostUserSettingsResponse"),require("../model/User")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.UserApi=factory(root.Quantimodo.ApiClient,root.Quantimodo.CommonResponse,root.Quantimodo.PostUserSettingsResponse,root.Quantimodo.User))}(this,function(ApiClient,CommonResponse,PostUserSettingsResponse,User){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.deleteUser=function(reason,opts,callback){if(opts=opts||{},void 0===reason||null===reason)throw new Error("Missing the required parameter 'reason' when calling deleteUser");var pathParams={},queryParams={clientId:opts.clientId,reason:reason,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=CommonResponse;return this.apiClient.callApi("/v3/user/delete","DELETE",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.getUser=function(opts,callback){var pathParams={},queryParams={userId:(opts=opts||{}).userId,createdAt:opts.createdAt,updatedAt:opts.updatedAt,limit:opts.limit,offset:opts.offset,sort:opts.sort,clientId:opts.clientId,appName:opts.appName,appVersion:opts.appVersion,clientUserId:opts.clientUserId,platform:opts.platform,log:opts.log,pwd:opts.pwd},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=User;return this.apiClient.callApi("/v3/user","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.postUserSettings=function(body,opts,callback){opts=opts||{};var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling postUserSettings");var pathParams={},queryParams={appName:opts.appName,clientId:opts.clientId,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=[],contentTypes=["application/json"],accepts=["application/json"],returnType=PostUserSettingsResponse;return this.apiClient.callApi("/v3/userSettings","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)}}})},{"../ApiClient":9,"../model/CommonResponse":25,"../model/PostUserSettingsResponse":54,"../model/User":69}],20:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("../model/CommonResponse"),require("../model/UserTag"),require("../model/UserVariableDelete"),require("../model/Variable"),require("../model/VariableCategory")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.VariablesApi=factory(root.Quantimodo.ApiClient,root.Quantimodo.CommonResponse,root.Quantimodo.UserTag,root.Quantimodo.UserVariableDelete,root.Quantimodo.Variable,root.Quantimodo.VariableCategory))}(this,function(ApiClient,CommonResponse,UserTag,UserVariableDelete,Variable,VariableCategory){"use strict";return function(apiClient){this.apiClient=apiClient||ApiClient.instance,this.deleteUserTag=function(opts,callback){var pathParams={},queryParams={taggedVariableId:(opts=opts||{}).taggedVariableId,tagVariableId:opts.tagVariableId},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=CommonResponse;return this.apiClient.callApi("/v3/userTags/delete","DELETE",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.deleteUserVariable=function(variableId,callback){var postBody=variableId;if(void 0===variableId||null===variableId)throw new Error("Missing the required parameter 'variableId' when calling deleteUserVariable");var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v3/userVariables/delete","DELETE",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,null,callback)},this.getVariableCategories=function(callback){var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=[VariableCategory];return this.apiClient.callApi("/v3/variableCategories","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.getVariables=function(opts,callback){var pathParams={},queryParams={includeCharts:(opts=opts||{}).includeCharts,numberOfRawMeasurements:opts.numberOfRawMeasurements,userId:opts.userId,variableCategoryName:opts.variableCategoryName,name:opts.name,updatedAt:opts.updatedAt,sourceName:opts.sourceName,earliestMeasurementTime:opts.earliestMeasurementTime,latestMeasurementTime:opts.latestMeasurementTime,id:opts.id,lastSourceName:opts.lastSourceName,limit:opts.limit,offset:opts.offset,sort:opts.sort,includePublic:opts.includePublic,manualTracking:opts.manualTracking,appName:opts.appName,clientId:opts.clientId,upc:opts.upc,effectOrCause:opts.effectOrCause,publicEffectOrCause:opts.publicEffectOrCause,exactMatch:opts.exactMatch,variableCategoryId:opts.variableCategoryId,includePrivate:opts.includePrivate,searchPhrase:opts.searchPhrase,synonyms:opts.synonyms,taggedVariableId:opts.taggedVariableId,tagVariableId:opts.tagVariableId,joinVariableId:opts.joinVariableId,parentUserTagVariableId:opts.parentUserTagVariableId,childUserTagVariableId:opts.childUserTagVariableId,ingredientUserTagVariableId:opts.ingredientUserTagVariableId,ingredientOfUserTagVariableId:opts.ingredientOfUserTagVariableId,commonOnly:opts.commonOnly,userOnly:opts.userOnly,platform:opts.platform,includeTags:opts.includeTags,recalculate:opts.recalculate,variableId:opts.variableId},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=[Variable];return this.apiClient.callApi("/v3/variables","GET",pathParams,queryParams,collectionQueryParams,headerParams,formParams,null,authNames,contentTypes,accepts,returnType,callback)},this.postUserTags=function(body,opts,callback){opts=opts||{};var postBody=body;if(void 0===body||null===body)throw new Error("Missing the required parameter 'body' when calling postUserTags");var pathParams={},queryParams={userId:opts.userId},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=CommonResponse;return this.apiClient.callApi("/v3/userTags","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)},this.postUserVariables=function(userVariables,opts,callback){opts=opts||{};var postBody=userVariables;if(void 0===userVariables||null===userVariables)throw new Error("Missing the required parameter 'userVariables' when calling postUserVariables");var pathParams={},queryParams={includePrivate:opts.includePrivate,clientId:opts.clientId,includePublic:opts.includePublic,searchPhrase:opts.searchPhrase,appName:opts.appName,exactMatch:opts.exactMatch,manualTracking:opts.manualTracking,variableCategoryName:opts.variableCategoryName,variableCategoryId:opts.variableCategoryId,synonyms:opts.synonyms,platform:opts.platform},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"],returnType=CommonResponse;return this.apiClient.callApi("/v3/variables","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,returnType,callback)},this.resetUserVariableSettings=function(variableId,callback){var postBody=variableId;if(void 0===variableId||null===variableId)throw new Error("Missing the required parameter 'variableId' when calling resetUserVariableSettings");var pathParams={},queryParams={},collectionQueryParams={},headerParams={},formParams={},authNames=["access_token","quantimodo_oauth2"],contentTypes=["application/json"],accepts=["application/json"];return this.apiClient.callApi("/v3/userVariables/reset","POST",pathParams,queryParams,collectionQueryParams,headerParams,formParams,postBody,authNames,contentTypes,accepts,null,callback)}}})},{"../ApiClient":9,"../model/CommonResponse":25,"../model/UserTag":70,"../model/UserVariableDelete":71,"../model/Variable":72,"../model/VariableCategory":73}],21:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./User")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.AppSettings=factory(root.Quantimodo.ApiClient,root.Quantimodo.User))}(this,function(ApiClient,User){"use strict";var exports=function(clientId){this.clientId=clientId};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("additionalSettings")&&(obj.additionalSettings=ApiClient.convertToType(data.additionalSettings,Object)),data.hasOwnProperty("appDescription")&&(obj.appDescription=ApiClient.convertToType(data.appDescription,"String")),data.hasOwnProperty("appDesign")&&(obj.appDesign=ApiClient.convertToType(data.appDesign,Object)),data.hasOwnProperty("appDisplayName")&&(obj.appDisplayName=ApiClient.convertToType(data.appDisplayName,"String")),data.hasOwnProperty("appStatus")&&(obj.appStatus=ApiClient.convertToType(data.appStatus,Object)),data.hasOwnProperty("appType")&&(obj.appType=ApiClient.convertToType(data.appType,"String")),data.hasOwnProperty("buildEnabled")&&(obj.buildEnabled=ApiClient.convertToType(data.buildEnabled,"String")),data.hasOwnProperty("clientId")&&(obj.clientId=ApiClient.convertToType(data.clientId,"String")),data.hasOwnProperty("clientSecret")&&(obj.clientSecret=ApiClient.convertToType(data.clientSecret,"String")),data.hasOwnProperty("collaborators")&&(obj.collaborators=ApiClient.convertToType(data.collaborators,[User])),data.hasOwnProperty("createdAt")&&(obj.createdAt=ApiClient.convertToType(data.createdAt,"String")),data.hasOwnProperty("userId")&&(obj.userId=ApiClient.convertToType(data.userId,"String")),data.hasOwnProperty("users")&&(obj.users=ApiClient.convertToType(data.users,[User])),data.hasOwnProperty("redirectUri")&&(obj.redirectUri=ApiClient.convertToType(data.redirectUri,"String")),data.hasOwnProperty("companyName")&&(obj.companyName=ApiClient.convertToType(data.companyName,"String")),data.hasOwnProperty("homepageUrl")&&(obj.homepageUrl=ApiClient.convertToType(data.homepageUrl,"String")),data.hasOwnProperty("iconUrl")&&(obj.iconUrl=ApiClient.convertToType(data.iconUrl,"String")),data.hasOwnProperty("longDescription")&&(obj.longDescription=ApiClient.convertToType(data.longDescription,"String")),data.hasOwnProperty("splashScreen")&&(obj.splashScreen=ApiClient.convertToType(data.splashScreen,"String")),data.hasOwnProperty("textLogo")&&(obj.textLogo=ApiClient.convertToType(data.textLogo,"String"))),obj},exports.prototype.additionalSettings=void 0,exports.prototype.appDescription=void 0,exports.prototype.appDesign=void 0,exports.prototype.appDisplayName=void 0,exports.prototype.appStatus=void 0,exports.prototype.appType=void 0,exports.prototype.buildEnabled=void 0,exports.prototype.clientId=void 0,exports.prototype.clientSecret=void 0,exports.prototype.collaborators=void 0,exports.prototype.createdAt=void 0,exports.prototype.userId=void 0,exports.prototype.users=void 0,exports.prototype.redirectUri=void 0,exports.prototype.companyName=void 0,exports.prototype.homepageUrl=void 0,exports.prototype.iconUrl=void 0,exports.prototype.longDescription=void 0,exports.prototype.splashScreen=void 0,exports.prototype.textLogo=void 0,exports})},{"../ApiClient":9,"./User":69}],22:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./AppSettings")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.AppSettingsResponse=factory(root.Quantimodo.ApiClient,root.Quantimodo.AppSettings))}(this,function(ApiClient,AppSettings){"use strict";var exports=function(status){this.status=status};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("appSettings")&&(obj.appSettings=AppSettings.constructFromObject(data.appSettings)),data.hasOwnProperty("message")&&(obj.message=ApiClient.convertToType(data.message,"String")),data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"Number")),data.hasOwnProperty("success")&&(obj.success=ApiClient.convertToType(data.success,"Boolean"))),obj},exports.prototype.appSettings=void 0,exports.prototype.message=void 0,exports.prototype.status=void 0,exports.prototype.success=void 0,exports})},{"../ApiClient":9,"./AppSettings":21}],23:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Button=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(link,text){var _this=this;_this.link=link,_this.text=text};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("link")&&(obj.link=ApiClient.convertToType(data.link,"String")),data.hasOwnProperty("text")&&(obj.text=ApiClient.convertToType(data.text,"String")),data.hasOwnProperty("ionIcon")&&(obj.ionIcon=ApiClient.convertToType(data.ionIcon,"String")),data.hasOwnProperty("color")&&(obj.color=ApiClient.convertToType(data.color,"String")),data.hasOwnProperty("additionalInformation")&&(obj.additionalInformation=ApiClient.convertToType(data.additionalInformation,"String"))),obj},exports.prototype.link=void 0,exports.prototype.text=void 0,exports.prototype.ionIcon=void 0,exports.prototype.color=void 0,exports.prototype.additionalInformation=void 0,exports})},{"../ApiClient":9}],24:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Chart=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(){};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("highchartConfig")&&(obj.highchartConfig=ApiClient.convertToType(data.highchartConfig,Object)),data.hasOwnProperty("chartId")&&(obj.chartId=ApiClient.convertToType(data.chartId,"String")),data.hasOwnProperty("chartTitle")&&(obj.chartTitle=ApiClient.convertToType(data.chartTitle,"String")),data.hasOwnProperty("explanation")&&(obj.explanation=ApiClient.convertToType(data.explanation,"String")),data.hasOwnProperty("svgUrl")&&(obj.svgUrl=ApiClient.convertToType(data.svgUrl,"String")),data.hasOwnProperty("svg")&&(obj.svg=ApiClient.convertToType(data.svg,"String"))),obj},exports.prototype.highchartConfig=void 0,exports.prototype.chartId=void 0,exports.prototype.chartTitle=void 0,exports.prototype.explanation=void 0,exports.prototype.svgUrl=void 0,exports.prototype.svg=void 0,exports})},{"../ApiClient":9}],25:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.CommonResponse=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(status,success){var _this=this;_this.status=status,_this.success=success};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("message")&&(obj.message=ApiClient.convertToType(data.message,"String")),data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"Number")),data.hasOwnProperty("success")&&(obj.success=ApiClient.convertToType(data.success,"Boolean"))),obj},exports.prototype.message=void 0,exports.prototype.status=void 0,exports.prototype.success=void 0,exports})},{"../ApiClient":9}],26:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.ConnectInstructions=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(url){this.url=url};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("parameters")&&(obj.parameters=ApiClient.convertToType(data.parameters,[Object])),data.hasOwnProperty("url")&&(obj.url=ApiClient.convertToType(data.url,"String")),data.hasOwnProperty("usePopup")&&(obj.usePopup=ApiClient.convertToType(data.usePopup,"Boolean"))),obj},exports.prototype.parameters=void 0,exports.prototype.url=void 0,exports.prototype.usePopup=void 0,exports})},{"../ApiClient":9}],27:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./Button"),require("./ConnectInstructions")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Connector=factory(root.Quantimodo.ApiClient,root.Quantimodo.Button,root.Quantimodo.ConnectInstructions))}(this,function(ApiClient,Button,ConnectInstructions){"use strict";var exports=function(connected,connectInstructions,displayName,getItUrl,id,image,lastUpdate,name,totalMeasurementsInLastUpdate){var _this=this;_this.connected=connected,_this.connectInstructions=connectInstructions,_this.displayName=displayName,_this.getItUrl=getItUrl,_this.id=id,_this.image=image,_this.lastUpdate=lastUpdate,_this.name=name,_this.totalMeasurementsInLastUpdate=totalMeasurementsInLastUpdate};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("affiliate")&&(obj.affiliate=ApiClient.convertToType(data.affiliate,"Boolean")),data.hasOwnProperty("backgroundColor")&&(obj.backgroundColor=ApiClient.convertToType(data.backgroundColor,"String")),data.hasOwnProperty("buttons")&&(obj.buttons=ApiClient.convertToType(data.buttons,[Button])),data.hasOwnProperty("clientId")&&(obj.clientId=ApiClient.convertToType(data.clientId,"String")),data.hasOwnProperty("connected")&&(obj.connected=ApiClient.convertToType(data.connected,"Boolean")),data.hasOwnProperty("connectError")&&(obj.connectError=ApiClient.convertToType(data.connectError,"String")),data.hasOwnProperty("connectInstructions")&&(obj.connectInstructions=ConnectInstructions.constructFromObject(data.connectInstructions)),data.hasOwnProperty("connectorClientId")&&(obj.connectorClientId=ApiClient.convertToType(data.connectorClientId,"String")),data.hasOwnProperty("connectorId")&&(obj.connectorId=ApiClient.convertToType(data.connectorId,"Number")),data.hasOwnProperty("connectStatus")&&(obj.connectStatus=ApiClient.convertToType(data.connectStatus,"String")),data.hasOwnProperty("createdAt")&&(obj.createdAt=ApiClient.convertToType(data.createdAt,"String")),data.hasOwnProperty("defaultVariableCategoryName")&&(obj.defaultVariableCategoryName=ApiClient.convertToType(data.defaultVariableCategoryName,"String")),data.hasOwnProperty("displayName")&&(obj.displayName=ApiClient.convertToType(data.displayName,"String")),data.hasOwnProperty("enabled")&&(obj.enabled=ApiClient.convertToType(data.enabled,"Number")),data.hasOwnProperty("getItUrl")&&(obj.getItUrl=ApiClient.convertToType(data.getItUrl,"String")),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("image")&&(obj.image=ApiClient.convertToType(data.image,"String")),data.hasOwnProperty("imageHtml")&&(obj.imageHtml=ApiClient.convertToType(data.imageHtml,"String")),data.hasOwnProperty("lastSuccessfulUpdatedAt")&&(obj.lastSuccessfulUpdatedAt=ApiClient.convertToType(data.lastSuccessfulUpdatedAt,"String")),data.hasOwnProperty("lastUpdate")&&(obj.lastUpdate=ApiClient.convertToType(data.lastUpdate,"Number")),data.hasOwnProperty("linkedDisplayNameHtml")&&(obj.linkedDisplayNameHtml=ApiClient.convertToType(data.linkedDisplayNameHtml,"String")),data.hasOwnProperty("longDescription")&&(obj.longDescription=ApiClient.convertToType(data.longDescription,"String")),data.hasOwnProperty("message")&&(obj.message=ApiClient.convertToType(data.message,"String")),data.hasOwnProperty("name")&&(obj.name=ApiClient.convertToType(data.name,"String")),data.hasOwnProperty("platforms")&&(obj.platforms=ApiClient.convertToType(data.platforms,["String"])),data.hasOwnProperty("scopes")&&(obj.scopes=ApiClient.convertToType(data.scopes,["String"])),data.hasOwnProperty("shortDescription")&&(obj.shortDescription=ApiClient.convertToType(data.shortDescription,"String")),data.hasOwnProperty("spreadsheetUpload")&&(obj.spreadsheetUpload=ApiClient.convertToType(data.spreadsheetUpload,"Boolean")),data.hasOwnProperty("totalMeasurementsInLastUpdate")&&(obj.totalMeasurementsInLastUpdate=ApiClient.convertToType(data.totalMeasurementsInLastUpdate,"Number")),data.hasOwnProperty("updatedAt")&&(obj.updatedAt=ApiClient.convertToType(data.updatedAt,"String")),data.hasOwnProperty("updateRequestedAt")&&(obj.updateRequestedAt=ApiClient.convertToType(data.updateRequestedAt,"String")),data.hasOwnProperty("updateStatus")&&(obj.updateStatus=ApiClient.convertToType(data.updateStatus,"String")),data.hasOwnProperty("userId")&&(obj.userId=ApiClient.convertToType(data.userId,"Number"))),obj},exports.prototype.affiliate=void 0,exports.prototype.backgroundColor=void 0,exports.prototype.buttons=void 0,exports.prototype.clientId=void 0,exports.prototype.connected=void 0,exports.prototype.connectError=void 0,exports.prototype.connectInstructions=void 0,exports.prototype.connectorClientId=void 0,exports.prototype.connectorId=void 0,exports.prototype.connectStatus=void 0,exports.prototype.createdAt=void 0,exports.prototype.defaultVariableCategoryName=void 0,exports.prototype.displayName=void 0,exports.prototype.enabled=void 0,exports.prototype.getItUrl=void 0,exports.prototype.id=void 0,exports.prototype.image=void 0,exports.prototype.imageHtml=void 0,exports.prototype.lastSuccessfulUpdatedAt=void 0,exports.prototype.lastUpdate=void 0,exports.prototype.linkedDisplayNameHtml=void 0,exports.prototype.longDescription=void 0,exports.prototype.message=void 0,exports.prototype.name=void 0,exports.prototype.platforms=void 0,exports.prototype.scopes=void 0,exports.prototype.shortDescription=void 0,exports.prototype.spreadsheetUpload=void 0,exports.prototype.totalMeasurementsInLastUpdate=void 0,exports.prototype.updatedAt=void 0,exports.prototype.updateRequestedAt=void 0,exports.prototype.updateStatus=void 0,exports.prototype.userId=void 0,exports})},{"../ApiClient":9,"./Button":23,"./ConnectInstructions":26}],28:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.ConversionStep=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(operation,value){var _this=this;_this.operation=operation,_this.value=value};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("operation")&&(obj.operation=ApiClient.convertToType(data.operation,"String")),data.hasOwnProperty("value")&&(obj.value=ApiClient.convertToType(data.value,"Number"))),obj},exports.prototype.operation=void 0,exports.prototype.value=void 0,exports.OperationEnum={ADD:"ADD",MULTIPLY:"MULTIPLY"},exports})},{"../ApiClient":9}],29:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./DataSource"),require("./StudyHtml"),require("./StudyImages"),require("./StudyLinks"),require("./StudyText")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Correlation=factory(root.Quantimodo.ApiClient,root.Quantimodo.DataSource,root.Quantimodo.StudyHtml,root.Quantimodo.StudyImages,root.Quantimodo.StudyLinks,root.Quantimodo.StudyText))}(this,function(ApiClient,DataSource,StudyHtml,StudyImages,StudyLinks,StudyText){"use strict";var exports=function(averageDailyHighCause,averageDailyLowCause,averageEffect,averageEffectFollowingHighCause,averageEffectFollowingLowCause,averageForwardPearsonCorrelationOverOnsetDelays,averageReversePearsonCorrelationOverOnsetDelays,averageVote,causeChanges,causeUserVariableShareUserMeasurements,causeVariableName,confidenceInterval,confidenceLevel,correlationCoefficient,createdAt,criticalTValue,direction,durationOfAction,durationOfActionInHours,effectChanges,effectSize,effectUnit,effectVariableName,experimentEndTime,experimentStartTime,forwardSpearmanCorrelationCoefficient,numberOfPairs,onsetDelay,onsetDelayInHours,onsetDelayWithStrongestPearsonCorrelation,onsetDelayWithStrongestPearsonCorrelationInHours,optimalPearsonProduct,outcomeFillingValue,pearsonCorrelationWithNoOnsetDelay,predictivePearsonCorrelation,predictivePearsonCorrelationCoefficient,predictorDataSources,predictorFillingValue,predictorMaximumAllowedValue,predictorMinimumAllowedValue,predictsHighEffectChange,predictsLowEffectChange,qmScore,reversePearsonCorrelationCoefficient,shareUserMeasurements,significantDifference,statisticalSignificance,strengthLevel,strongestPearsonCorrelationCoefficient,tValue,updatedAt,userId,userVote,valuePredictingHighOutcome,valuePredictingLowOutcome){var _this=this;_this.averageDailyHighCause=averageDailyHighCause,_this.averageDailyLowCause=averageDailyLowCause,_this.averageEffect=averageEffect,_this.averageEffectFollowingHighCause=averageEffectFollowingHighCause,_this.averageEffectFollowingLowCause=averageEffectFollowingLowCause,_this.averageForwardPearsonCorrelationOverOnsetDelays=averageForwardPearsonCorrelationOverOnsetDelays,_this.averageReversePearsonCorrelationOverOnsetDelays=averageReversePearsonCorrelationOverOnsetDelays,_this.averageVote=averageVote,_this.causeChanges=causeChanges,_this.causeUserVariableShareUserMeasurements=causeUserVariableShareUserMeasurements,_this.causeVariableName=causeVariableName,_this.confidenceInterval=confidenceInterval,_this.confidenceLevel=confidenceLevel,_this.correlationCoefficient=correlationCoefficient,_this.createdAt=createdAt,_this.criticalTValue=criticalTValue,_this.direction=direction,_this.durationOfAction=durationOfAction,_this.durationOfActionInHours=durationOfActionInHours,_this.effectChanges=effectChanges,_this.effectSize=effectSize,_this.effectUnit=effectUnit,_this.effectVariableName=effectVariableName,_this.experimentEndTime=experimentEndTime,_this.experimentStartTime=experimentStartTime,_this.forwardSpearmanCorrelationCoefficient=forwardSpearmanCorrelationCoefficient,_this.numberOfPairs=numberOfPairs,_this.onsetDelay=onsetDelay,_this.onsetDelayInHours=onsetDelayInHours,_this.onsetDelayWithStrongestPearsonCorrelation=onsetDelayWithStrongestPearsonCorrelation,_this.onsetDelayWithStrongestPearsonCorrelationInHours=onsetDelayWithStrongestPearsonCorrelationInHours,_this.optimalPearsonProduct=optimalPearsonProduct,_this.outcomeFillingValue=outcomeFillingValue,_this.pearsonCorrelationWithNoOnsetDelay=pearsonCorrelationWithNoOnsetDelay,_this.predictivePearsonCorrelation=predictivePearsonCorrelation,_this.predictivePearsonCorrelationCoefficient=predictivePearsonCorrelationCoefficient,_this.predictorDataSources=predictorDataSources,_this.predictorFillingValue=predictorFillingValue,_this.predictorMaximumAllowedValue=predictorMaximumAllowedValue,_this.predictorMinimumAllowedValue=predictorMinimumAllowedValue,_this.predictsHighEffectChange=predictsHighEffectChange,_this.predictsLowEffectChange=predictsLowEffectChange,_this.qmScore=qmScore,_this.reversePearsonCorrelationCoefficient=reversePearsonCorrelationCoefficient,_this.shareUserMeasurements=shareUserMeasurements,_this.significantDifference=significantDifference,_this.statisticalSignificance=statisticalSignificance,_this.strengthLevel=strengthLevel,_this.strongestPearsonCorrelationCoefficient=strongestPearsonCorrelationCoefficient,_this.tValue=tValue,_this.updatedAt=updatedAt,_this.userId=userId,_this.userVote=userVote,_this.valuePredictingHighOutcome=valuePredictingHighOutcome,_this.valuePredictingLowOutcome=valuePredictingLowOutcome};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("averageDailyHighCause")&&(obj.averageDailyHighCause=ApiClient.convertToType(data.averageDailyHighCause,"Number")),data.hasOwnProperty("averageDailyLowCause")&&(obj.averageDailyLowCause=ApiClient.convertToType(data.averageDailyLowCause,"Number")),data.hasOwnProperty("averageEffect")&&(obj.averageEffect=ApiClient.convertToType(data.averageEffect,"Number")),data.hasOwnProperty("averageEffectFollowingHighCause")&&(obj.averageEffectFollowingHighCause=ApiClient.convertToType(data.averageEffectFollowingHighCause,"Number")),data.hasOwnProperty("averageEffectFollowingLowCause")&&(obj.averageEffectFollowingLowCause=ApiClient.convertToType(data.averageEffectFollowingLowCause,"Number")),data.hasOwnProperty("averageForwardPearsonCorrelationOverOnsetDelays")&&(obj.averageForwardPearsonCorrelationOverOnsetDelays=ApiClient.convertToType(data.averageForwardPearsonCorrelationOverOnsetDelays,"Number")),data.hasOwnProperty("averageReversePearsonCorrelationOverOnsetDelays")&&(obj.averageReversePearsonCorrelationOverOnsetDelays=ApiClient.convertToType(data.averageReversePearsonCorrelationOverOnsetDelays,"Number")),data.hasOwnProperty("averageVote")&&(obj.averageVote=ApiClient.convertToType(data.averageVote,"Number")),data.hasOwnProperty("causeChanges")&&(obj.causeChanges=ApiClient.convertToType(data.causeChanges,"Number")),data.hasOwnProperty("causeDataSource")&&(obj.causeDataSource=DataSource.constructFromObject(data.causeDataSource)),data.hasOwnProperty("causeUserVariableShareUserMeasurements")&&(obj.causeUserVariableShareUserMeasurements=ApiClient.convertToType(data.causeUserVariableShareUserMeasurements,"Number")),data.hasOwnProperty("causeVariableCategoryId")&&(obj.causeVariableCategoryId=ApiClient.convertToType(data.causeVariableCategoryId,"Number")),data.hasOwnProperty("causeVariableCategoryName")&&(obj.causeVariableCategoryName=ApiClient.convertToType(data.causeVariableCategoryName,"String")),data.hasOwnProperty("causeVariableCombinationOperation")&&(obj.causeVariableCombinationOperation=ApiClient.convertToType(data.causeVariableCombinationOperation,"String")),data.hasOwnProperty("causeVariableUnitAbbreviatedName")&&(obj.causeVariableUnitAbbreviatedName=ApiClient.convertToType(data.causeVariableUnitAbbreviatedName,"String")),data.hasOwnProperty("causeVariableId")&&(obj.causeVariableId=ApiClient.convertToType(data.causeVariableId,"Number")),data.hasOwnProperty("causeVariableMostCommonConnectorId")&&(obj.causeVariableMostCommonConnectorId=ApiClient.convertToType(data.causeVariableMostCommonConnectorId,"Number")),data.hasOwnProperty("causeVariableName")&&(obj.causeVariableName=ApiClient.convertToType(data.causeVariableName,"String")),data.hasOwnProperty("confidenceInterval")&&(obj.confidenceInterval=ApiClient.convertToType(data.confidenceInterval,"Number")),data.hasOwnProperty("confidenceLevel")&&(obj.confidenceLevel=ApiClient.convertToType(data.confidenceLevel,"String")),data.hasOwnProperty("correlationCoefficient")&&(obj.correlationCoefficient=ApiClient.convertToType(data.correlationCoefficient,"Number")),data.hasOwnProperty("correlationIsContradictoryToOptimalValues")&&(obj.correlationIsContradictoryToOptimalValues=ApiClient.convertToType(data.correlationIsContradictoryToOptimalValues,"Boolean")),data.hasOwnProperty("createdAt")&&(obj.createdAt=ApiClient.convertToType(data.createdAt,"String")),data.hasOwnProperty("criticalTValue")&&(obj.criticalTValue=ApiClient.convertToType(data.criticalTValue,"Number")),data.hasOwnProperty("direction")&&(obj.direction=ApiClient.convertToType(data.direction,"String")),data.hasOwnProperty("durationOfAction")&&(obj.durationOfAction=ApiClient.convertToType(data.durationOfAction,"Number")),data.hasOwnProperty("durationOfActionInHours")&&(obj.durationOfActionInHours=ApiClient.convertToType(data.durationOfActionInHours,"Number")),data.hasOwnProperty("degreesOfFreedom")&&(obj.degreesOfFreedom=ApiClient.convertToType(data.degreesOfFreedom,"Number")),data.hasOwnProperty("effectNumberOfProcessedDailyMeasurements")&&(obj.effectNumberOfProcessedDailyMeasurements=ApiClient.convertToType(data.effectNumberOfProcessedDailyMeasurements,"Number")),data.hasOwnProperty("error")&&(obj.error=ApiClient.convertToType(data.error,"String")),data.hasOwnProperty("effectChanges")&&(obj.effectChanges=ApiClient.convertToType(data.effectChanges,"Number")),data.hasOwnProperty("effectDataSource")&&(obj.effectDataSource=DataSource.constructFromObject(data.effectDataSource)),data.hasOwnProperty("effectSize")&&(obj.effectSize=ApiClient.convertToType(data.effectSize,"String")),data.hasOwnProperty("effectUnit")&&(obj.effectUnit=ApiClient.convertToType(data.effectUnit,"String")),data.hasOwnProperty("effectUserVariableShareUserMeasurements")&&(obj.effectUserVariableShareUserMeasurements=ApiClient.convertToType(data.effectUserVariableShareUserMeasurements,"Number")),data.hasOwnProperty("effectVariableCategoryId")&&(obj.effectVariableCategoryId=ApiClient.convertToType(data.effectVariableCategoryId,"Number")),data.hasOwnProperty("effectVariableCategoryName")&&(obj.effectVariableCategoryName=ApiClient.convertToType(data.effectVariableCategoryName,"String")),data.hasOwnProperty("effectVariableCombinationOperation")&&(obj.effectVariableCombinationOperation=ApiClient.convertToType(data.effectVariableCombinationOperation,"String")),data.hasOwnProperty("effectVariableCommonAlias")&&(obj.effectVariableCommonAlias=ApiClient.convertToType(data.effectVariableCommonAlias,"String")),data.hasOwnProperty("effectVariableUnitAbbreviatedName")&&(obj.effectVariableUnitAbbreviatedName=ApiClient.convertToType(data.effectVariableUnitAbbreviatedName,"String")),data.hasOwnProperty("effectVariableUnitId")&&(obj.effectVariableUnitId=ApiClient.convertToType(data.effectVariableUnitId,"Number")),data.hasOwnProperty("effectVariableUnitName")&&(obj.effectVariableUnitName=ApiClient.convertToType(data.effectVariableUnitName,"String")),data.hasOwnProperty("effectVariableId")&&(obj.effectVariableId=ApiClient.convertToType(data.effectVariableId,"Number")),data.hasOwnProperty("effectVariableMostCommonConnectorId")&&(obj.effectVariableMostCommonConnectorId=ApiClient.convertToType(data.effectVariableMostCommonConnectorId,"Number")),data.hasOwnProperty("effectVariableName")&&(obj.effectVariableName=ApiClient.convertToType(data.effectVariableName,"String")),data.hasOwnProperty("experimentEndTime")&&(obj.experimentEndTime=ApiClient.convertToType(data.experimentEndTime,"String")),data.hasOwnProperty("experimentStartTime")&&(obj.experimentStartTime=ApiClient.convertToType(data.experimentStartTime,"String")),data.hasOwnProperty("forwardSpearmanCorrelationCoefficient")&&(obj.forwardSpearmanCorrelationCoefficient=ApiClient.convertToType(data.forwardSpearmanCorrelationCoefficient,"Number")),data.hasOwnProperty("numberOfPairs")&&(obj.numberOfPairs=ApiClient.convertToType(data.numberOfPairs,"Number")),data.hasOwnProperty("onsetDelay")&&(obj.onsetDelay=ApiClient.convertToType(data.onsetDelay,"Number")),data.hasOwnProperty("onsetDelayInHours")&&(obj.onsetDelayInHours=ApiClient.convertToType(data.onsetDelayInHours,"Number")),data.hasOwnProperty("onsetDelayWithStrongestPearsonCorrelation")&&(obj.onsetDelayWithStrongestPearsonCorrelation=ApiClient.convertToType(data.onsetDelayWithStrongestPearsonCorrelation,"Number")),data.hasOwnProperty("onsetDelayWithStrongestPearsonCorrelationInHours")&&(obj.onsetDelayWithStrongestPearsonCorrelationInHours=ApiClient.convertToType(data.onsetDelayWithStrongestPearsonCorrelationInHours,"Number")),data.hasOwnProperty("optimalPearsonProduct")&&(obj.optimalPearsonProduct=ApiClient.convertToType(data.optimalPearsonProduct,"Number")),data.hasOwnProperty("outcomeFillingValue")&&(obj.outcomeFillingValue=ApiClient.convertToType(data.outcomeFillingValue,"Number")),data.hasOwnProperty("outcomeMaximumAllowedValue")&&(obj.outcomeMaximumAllowedValue=ApiClient.convertToType(data.outcomeMaximumAllowedValue,"Number")),data.hasOwnProperty("outcomeMinimumAllowedValue")&&(obj.outcomeMinimumAllowedValue=ApiClient.convertToType(data.outcomeMinimumAllowedValue,"Number")),data.hasOwnProperty("pearsonCorrelationWithNoOnsetDelay")&&(obj.pearsonCorrelationWithNoOnsetDelay=ApiClient.convertToType(data.pearsonCorrelationWithNoOnsetDelay,"Number")),data.hasOwnProperty("predictivePearsonCorrelation")&&(obj.predictivePearsonCorrelation=ApiClient.convertToType(data.predictivePearsonCorrelation,"Number")),data.hasOwnProperty("predictivePearsonCorrelationCoefficient")&&(obj.predictivePearsonCorrelationCoefficient=ApiClient.convertToType(data.predictivePearsonCorrelationCoefficient,"Number")),data.hasOwnProperty("predictorDataSources")&&(obj.predictorDataSources=ApiClient.convertToType(data.predictorDataSources,"String")),data.hasOwnProperty("predictorFillingValue")&&(obj.predictorFillingValue=ApiClient.convertToType(data.predictorFillingValue,"Number")),data.hasOwnProperty("predictorMaximumAllowedValue")&&(obj.predictorMaximumAllowedValue=ApiClient.convertToType(data.predictorMaximumAllowedValue,"Number")),data.hasOwnProperty("predictorMinimumAllowedValue")&&(obj.predictorMinimumAllowedValue=ApiClient.convertToType(data.predictorMinimumAllowedValue,"Number")),data.hasOwnProperty("predictsHighEffectChange")&&(obj.predictsHighEffectChange=ApiClient.convertToType(data.predictsHighEffectChange,"Number")),data.hasOwnProperty("predictsLowEffectChange")&&(obj.predictsLowEffectChange=ApiClient.convertToType(data.predictsLowEffectChange,"Number")),data.hasOwnProperty("pValue")&&(obj.pValue=ApiClient.convertToType(data.pValue,"Number")),data.hasOwnProperty("qmScore")&&(obj.qmScore=ApiClient.convertToType(data.qmScore,"Number")),data.hasOwnProperty("reversePearsonCorrelationCoefficient")&&(obj.reversePearsonCorrelationCoefficient=ApiClient.convertToType(data.reversePearsonCorrelationCoefficient,"Number")),data.hasOwnProperty("shareUserMeasurements")&&(obj.shareUserMeasurements=ApiClient.convertToType(data.shareUserMeasurements,"Boolean")),data.hasOwnProperty("sharingDescription")&&(obj.sharingDescription=ApiClient.convertToType(data.sharingDescription,"String")),data.hasOwnProperty("sharingTitle")&&(obj.sharingTitle=ApiClient.convertToType(data.sharingTitle,"String")),data.hasOwnProperty("significantDifference")&&(obj.significantDifference=ApiClient.convertToType(data.significantDifference,"Boolean")),data.hasOwnProperty("statisticalSignificance")&&(obj.statisticalSignificance=ApiClient.convertToType(data.statisticalSignificance,"Number")),data.hasOwnProperty("strengthLevel")&&(obj.strengthLevel=ApiClient.convertToType(data.strengthLevel,"String")),data.hasOwnProperty("strongestPearsonCorrelationCoefficient")&&(obj.strongestPearsonCorrelationCoefficient=ApiClient.convertToType(data.strongestPearsonCorrelationCoefficient,"Number")),data.hasOwnProperty("studyHtml")&&(obj.studyHtml=StudyHtml.constructFromObject(data.studyHtml)),data.hasOwnProperty("studyImages")&&(obj.studyImages=StudyImages.constructFromObject(data.studyImages)),data.hasOwnProperty("studyLinks")&&(obj.studyLinks=StudyLinks.constructFromObject(data.studyLinks)),data.hasOwnProperty("studyText")&&(obj.studyText=StudyText.constructFromObject(data.studyText)),data.hasOwnProperty("tValue")&&(obj.tValue=ApiClient.convertToType(data.tValue,"Number")),data.hasOwnProperty("updatedAt")&&(obj.updatedAt=ApiClient.convertToType(data.updatedAt,"String")),data.hasOwnProperty("userId")&&(obj.userId=ApiClient.convertToType(data.userId,"Number")),data.hasOwnProperty("userVote")&&(obj.userVote=ApiClient.convertToType(data.userVote,"Number")),data.hasOwnProperty("valuePredictingHighOutcome")&&(obj.valuePredictingHighOutcome=ApiClient.convertToType(data.valuePredictingHighOutcome,"Number")),data.hasOwnProperty("valuePredictingLowOutcome")&&(obj.valuePredictingLowOutcome=ApiClient.convertToType(data.valuePredictingLowOutcome,"Number")),data.hasOwnProperty("outcomeDataSources")&&(obj.outcomeDataSources=ApiClient.convertToType(data.outcomeDataSources,"String")),data.hasOwnProperty("principalInvestigator")&&(obj.principalInvestigator=ApiClient.convertToType(data.principalInvestigator,"String")),data.hasOwnProperty("reverseCorrelation")&&(obj.reverseCorrelation=ApiClient.convertToType(data.reverseCorrelation,"Number")),data.hasOwnProperty("averagePearsonCorrelationCoefficientOverOnsetDelays")&&(obj.averagePearsonCorrelationCoefficientOverOnsetDelays=ApiClient.convertToType(data.averagePearsonCorrelationCoefficientOverOnsetDelays,"String")),data.hasOwnProperty("causeNumberOfRawMeasurements")&&(obj.causeNumberOfRawMeasurements=ApiClient.convertToType(data.causeNumberOfRawMeasurements,"Number")),data.hasOwnProperty("correlationsOverDurationsOfAction")&&(obj.correlationsOverDurationsOfAction=ApiClient.convertToType(data.correlationsOverDurationsOfAction,"String")),data.hasOwnProperty("correlationsOverDurationsOfActionChartConfig")&&(obj.correlationsOverDurationsOfActionChartConfig=ApiClient.convertToType(data.correlationsOverDurationsOfActionChartConfig,"String")),data.hasOwnProperty("correlationsOverOnsetDelaysChartConfig")&&(obj.correlationsOverOnsetDelaysChartConfig=ApiClient.convertToType(data.correlationsOverOnsetDelaysChartConfig,"String")),data.hasOwnProperty("numberOfUsers")&&(obj.numberOfUsers=ApiClient.convertToType(data.numberOfUsers,"Number")),data.hasOwnProperty("rawCauseMeasurementSignificance")&&(obj.rawCauseMeasurementSignificance=ApiClient.convertToType(data.rawCauseMeasurementSignificance,"Number")),data.hasOwnProperty("rawEffectMeasurementSignificance")&&(obj.rawEffectMeasurementSignificance=ApiClient.convertToType(data.rawEffectMeasurementSignificance,"Number")),data.hasOwnProperty("reversePairsCount")&&(obj.reversePairsCount=ApiClient.convertToType(data.reversePairsCount,"String")),data.hasOwnProperty("voteStatisticalSignificance")&&(obj.voteStatisticalSignificance=ApiClient.convertToType(data.voteStatisticalSignificance,"Number")),data.hasOwnProperty("aggregateQMScore")&&(obj.aggregateQMScore=ApiClient.convertToType(data.aggregateQMScore,"Number")),data.hasOwnProperty("forwardPearsonCorrelationCoefficient")&&(obj.forwardPearsonCorrelationCoefficient=ApiClient.convertToType(data.forwardPearsonCorrelationCoefficient,"Number")),data.hasOwnProperty("numberOfCorrelations")&&(obj.numberOfCorrelations=ApiClient.convertToType(data.numberOfCorrelations,"Number")),data.hasOwnProperty("vote")&&(obj.vote=ApiClient.convertToType(data.vote,"Number"))),obj},exports.prototype.averageDailyHighCause=void 0,exports.prototype.averageDailyLowCause=void 0,exports.prototype.averageEffect=void 0,exports.prototype.averageEffectFollowingHighCause=void 0,exports.prototype.averageEffectFollowingLowCause=void 0,exports.prototype.averageForwardPearsonCorrelationOverOnsetDelays=void 0,exports.prototype.averageReversePearsonCorrelationOverOnsetDelays=void 0,exports.prototype.averageVote=void 0,exports.prototype.causeChanges=void 0,exports.prototype.causeDataSource=void 0,exports.prototype.causeUserVariableShareUserMeasurements=void 0,exports.prototype.causeVariableCategoryId=void 0,exports.prototype.causeVariableCategoryName=void 0,exports.prototype.causeVariableCombinationOperation=void 0,exports.prototype.causeVariableUnitAbbreviatedName=void 0,exports.prototype.causeVariableId=void 0,exports.prototype.causeVariableMostCommonConnectorId=void 0,exports.prototype.causeVariableName=void 0,exports.prototype.confidenceInterval=void 0,exports.prototype.confidenceLevel=void 0,exports.prototype.correlationCoefficient=void 0,exports.prototype.correlationIsContradictoryToOptimalValues=void 0,exports.prototype.createdAt=void 0,exports.prototype.criticalTValue=void 0,exports.prototype.direction=void 0,exports.prototype.durationOfAction=void 0,exports.prototype.durationOfActionInHours=void 0,exports.prototype.degreesOfFreedom=void 0,exports.prototype.effectNumberOfProcessedDailyMeasurements=void 0,exports.prototype.error=void 0,exports.prototype.effectChanges=void 0,exports.prototype.effectDataSource=void 0,exports.prototype.effectSize=void 0,exports.prototype.effectUnit=void 0,exports.prototype.effectUserVariableShareUserMeasurements=void 0,exports.prototype.effectVariableCategoryId=void 0,exports.prototype.effectVariableCategoryName=void 0,exports.prototype.effectVariableCombinationOperation=void 0,exports.prototype.effectVariableCommonAlias=void 0,exports.prototype.effectVariableUnitAbbreviatedName=void 0,exports.prototype.effectVariableUnitId=void 0,exports.prototype.effectVariableUnitName=void 0,exports.prototype.effectVariableId=void 0,exports.prototype.effectVariableMostCommonConnectorId=void 0,exports.prototype.effectVariableName=void 0,exports.prototype.experimentEndTime=void 0,exports.prototype.experimentStartTime=void 0,exports.prototype.forwardSpearmanCorrelationCoefficient=void 0,exports.prototype.numberOfPairs=void 0,exports.prototype.onsetDelay=void 0,exports.prototype.onsetDelayInHours=void 0,exports.prototype.onsetDelayWithStrongestPearsonCorrelation=void 0,exports.prototype.onsetDelayWithStrongestPearsonCorrelationInHours=void 0,exports.prototype.optimalPearsonProduct=void 0,exports.prototype.outcomeFillingValue=void 0,exports.prototype.outcomeMaximumAllowedValue=void 0,exports.prototype.outcomeMinimumAllowedValue=void 0,exports.prototype.pearsonCorrelationWithNoOnsetDelay=void 0,exports.prototype.predictivePearsonCorrelation=void 0,exports.prototype.predictivePearsonCorrelationCoefficient=void 0,exports.prototype.predictorDataSources=void 0,exports.prototype.predictorFillingValue=void 0,exports.prototype.predictorMaximumAllowedValue=void 0,exports.prototype.predictorMinimumAllowedValue=void 0,exports.prototype.predictsHighEffectChange=void 0,exports.prototype.predictsLowEffectChange=void 0,exports.prototype.pValue=void 0,exports.prototype.qmScore=void 0,exports.prototype.reversePearsonCorrelationCoefficient=void 0,exports.prototype.shareUserMeasurements=void 0,exports.prototype.sharingDescription=void 0,exports.prototype.sharingTitle=void 0,exports.prototype.significantDifference=void 0,exports.prototype.statisticalSignificance=void 0,exports.prototype.strengthLevel=void 0,exports.prototype.strongestPearsonCorrelationCoefficient=void 0,exports.prototype.studyHtml=void 0,exports.prototype.studyImages=void 0,exports.prototype.studyLinks=void 0,exports.prototype.studyText=void 0,exports.prototype.tValue=void 0,exports.prototype.updatedAt=void 0,exports.prototype.userId=void 0,exports.prototype.userVote=void 0,exports.prototype.valuePredictingHighOutcome=void 0,exports.prototype.valuePredictingLowOutcome=void 0,exports.prototype.outcomeDataSources=void 0,exports.prototype.principalInvestigator=void 0,exports.prototype.reverseCorrelation=void 0,exports.prototype.averagePearsonCorrelationCoefficientOverOnsetDelays=void 0,exports.prototype.causeNumberOfRawMeasurements=void 0,exports.prototype.correlationsOverDurationsOfAction=void 0,exports.prototype.correlationsOverDurationsOfActionChartConfig=void 0,exports.prototype.correlationsOverOnsetDelaysChartConfig=void 0,exports.prototype.numberOfUsers=void 0,exports.prototype.rawCauseMeasurementSignificance=void 0,exports.prototype.rawEffectMeasurementSignificance=void 0,exports.prototype.reversePairsCount=void 0,exports.prototype.voteStatisticalSignificance=void 0,exports.prototype.aggregateQMScore=void 0,exports.prototype.forwardPearsonCorrelationCoefficient=void 0,exports.prototype.numberOfCorrelations=void 0,exports.prototype.vote=void 0,exports})},{"../ApiClient":9,"./DataSource":30,"./StudyHtml":57,"./StudyImages":58,"./StudyLinks":59,"./StudyText":60}],30:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.DataSource=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(affiliate,connectorClientId,defaultVariableCategoryName,displayName,enabled,getItUrl,id,image,imageHtml,linkedDisplayNameHtml,longDescription,name,shortDescription){var _this=this;_this.affiliate=affiliate,_this.connectorClientId=connectorClientId,_this.defaultVariableCategoryName=defaultVariableCategoryName,_this.displayName=displayName,_this.enabled=enabled,_this.getItUrl=getItUrl,_this.id=id,_this.image=image,_this.imageHtml=imageHtml,_this.linkedDisplayNameHtml=linkedDisplayNameHtml,_this.longDescription=longDescription,_this.name=name,_this.shortDescription=shortDescription};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("affiliate")&&(obj.affiliate=ApiClient.convertToType(data.affiliate,"Boolean")),data.hasOwnProperty("connectorClientId")&&(obj.connectorClientId=ApiClient.convertToType(data.connectorClientId,"String")),data.hasOwnProperty("defaultVariableCategoryName")&&(obj.defaultVariableCategoryName=ApiClient.convertToType(data.defaultVariableCategoryName,"String")),data.hasOwnProperty("displayName")&&(obj.displayName=ApiClient.convertToType(data.displayName,"String")),data.hasOwnProperty("enabled")&&(obj.enabled=ApiClient.convertToType(data.enabled,"Number")),data.hasOwnProperty("getItUrl")&&(obj.getItUrl=ApiClient.convertToType(data.getItUrl,"String")),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("image")&&(obj.image=ApiClient.convertToType(data.image,"String")),data.hasOwnProperty("imageHtml")&&(obj.imageHtml=ApiClient.convertToType(data.imageHtml,"String")),data.hasOwnProperty("linkedDisplayNameHtml")&&(obj.linkedDisplayNameHtml=ApiClient.convertToType(data.linkedDisplayNameHtml,"String")),data.hasOwnProperty("longDescription")&&(obj.longDescription=ApiClient.convertToType(data.longDescription,"String")),data.hasOwnProperty("name")&&(obj.name=ApiClient.convertToType(data.name,"String")),data.hasOwnProperty("shortDescription")&&(obj.shortDescription=ApiClient.convertToType(data.shortDescription,"String"))),obj},exports.prototype.affiliate=void 0,exports.prototype.connectorClientId=void 0,exports.prototype.defaultVariableCategoryName=void 0,exports.prototype.displayName=void 0,exports.prototype.enabled=void 0,exports.prototype.getItUrl=void 0,exports.prototype.id=void 0,exports.prototype.image=void 0,exports.prototype.imageHtml=void 0,exports.prototype.linkedDisplayNameHtml=void 0,exports.prototype.longDescription=void 0,exports.prototype.name=void 0,exports.prototype.shortDescription=void 0,exports})},{"../ApiClient":9}],31:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.DeviceToken=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(platform,deviceToken){var _this=this;_this.platform=platform,_this.deviceToken=deviceToken};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("clientId")&&(obj.clientId=ApiClient.convertToType(data.clientId,"String")),data.hasOwnProperty("platform")&&(obj.platform=ApiClient.convertToType(data.platform,"String")),data.hasOwnProperty("deviceToken")&&(obj.deviceToken=ApiClient.convertToType(data.deviceToken,"String"))),obj},exports.prototype.clientId=void 0,exports.prototype.platform=void 0,exports.prototype.deviceToken=void 0,exports})},{"../ApiClient":9}],32:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./ExplanationStartTracking"),require("./Image")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Explanation=factory(root.Quantimodo.ApiClient,root.Quantimodo.ExplanationStartTracking,root.Quantimodo.Image))}(this,function(ApiClient,ExplanationStartTracking,Image){"use strict";var exports=function(description,image,ionIcon,startTracking,title){var _this=this;_this.description=description,_this.image=image,_this.ionIcon=ionIcon,_this.startTracking=startTracking,_this.title=title};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("description")&&(obj.description=ApiClient.convertToType(data.description,"String")),data.hasOwnProperty("image")&&(obj.image=Image.constructFromObject(data.image)),data.hasOwnProperty("ionIcon")&&(obj.ionIcon=ApiClient.convertToType(data.ionIcon,"String")),data.hasOwnProperty("startTracking")&&(obj.startTracking=ExplanationStartTracking.constructFromObject(data.startTracking)),data.hasOwnProperty("title")&&(obj.title=ApiClient.convertToType(data.title,"String")),data.hasOwnProperty("html")&&(obj.html=ApiClient.convertToType(data.html,"String"))),obj},exports.prototype.description=void 0,exports.prototype.image=void 0,exports.prototype.ionIcon=void 0,exports.prototype.startTracking=void 0,exports.prototype.title=void 0,exports.prototype.html=void 0,exports})},{"../ApiClient":9,"./ExplanationStartTracking":33,"./Image":38}],33:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./Button")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.ExplanationStartTracking=factory(root.Quantimodo.ApiClient,root.Quantimodo.Button))}(this,function(ApiClient,Button){"use strict";var exports=function(button,description,title){var _this=this;_this.button=button,_this.description=description,_this.title=title};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("button")&&(obj.button=Button.constructFromObject(data.button)),data.hasOwnProperty("description")&&(obj.description=ApiClient.convertToType(data.description,"String")),data.hasOwnProperty("title")&&(obj.title=ApiClient.convertToType(data.title,"String"))),obj},exports.prototype.button=void 0,exports.prototype.description=void 0,exports.prototype.title=void 0,exports})},{"../ApiClient":9,"./Button":23}],34:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./Connector")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.GetConnectorsResponse=factory(root.Quantimodo.ApiClient,root.Quantimodo.Connector))}(this,function(ApiClient,Connector){"use strict";var exports=function(status,success){var _this=this;_this.status=status,_this.success=success};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("connectors")&&(obj.connectors=ApiClient.convertToType(data.connectors,[Connector])),data.hasOwnProperty("message")&&(obj.message=ApiClient.convertToType(data.message,"String")),data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"Number")),data.hasOwnProperty("success")&&(obj.success=ApiClient.convertToType(data.success,"Boolean"))),obj},exports.prototype.connectors=void 0,exports.prototype.message=void 0,exports.prototype.status=void 0,exports.prototype.success=void 0,exports})},{"../ApiClient":9,"./Connector":27}],35:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./Correlation"),require("./Explanation")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.GetCorrelationsDataResponse=factory(root.Quantimodo.ApiClient,root.Quantimodo.Correlation,root.Quantimodo.Explanation))}(this,function(ApiClient,Correlation,Explanation){"use strict";var exports=function(correlations,explanation){var _this=this;_this.correlations=correlations,_this.explanation=explanation};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("correlations")&&(obj.correlations=ApiClient.convertToType(data.correlations,[Correlation])),data.hasOwnProperty("explanation")&&(obj.explanation=Explanation.constructFromObject(data.explanation))),obj},exports.prototype.correlations=void 0,exports.prototype.explanation=void 0,exports})},{"../ApiClient":9,"./Correlation":29,"./Explanation":32}],36:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./GetCorrelationsDataResponse")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.GetCorrelationsResponse=factory(root.Quantimodo.ApiClient,root.Quantimodo.GetCorrelationsDataResponse))}(this,function(ApiClient,GetCorrelationsDataResponse){"use strict";var exports=function(status,success){var _this=this;_this.status=status,_this.success=success};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("data")&&(obj.data=GetCorrelationsDataResponse.constructFromObject(data.data)),data.hasOwnProperty("message")&&(obj.message=ApiClient.convertToType(data.message,"String")),data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"Number")),data.hasOwnProperty("success")&&(obj.success=ApiClient.convertToType(data.success,"Boolean"))),obj},exports.prototype.data=void 0,exports.prototype.message=void 0,exports.prototype.status=void 0,exports.prototype.success=void 0,exports})},{"../ApiClient":9,"./GetCorrelationsDataResponse":35}],37:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./TrackingReminderNotification")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.GetTrackingReminderNotificationsResponse=factory(root.Quantimodo.ApiClient,root.Quantimodo.TrackingReminderNotification))}(this,function(ApiClient,TrackingReminderNotification){"use strict";var exports=function(status,success){var _this=this;_this.status=status,_this.success=success};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("data")&&(obj.data=ApiClient.convertToType(data.data,[TrackingReminderNotification])),data.hasOwnProperty("message")&&(obj.message=ApiClient.convertToType(data.message,"String")),data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"Number")),data.hasOwnProperty("success")&&(obj.success=ApiClient.convertToType(data.success,"Boolean"))),obj},exports.prototype.data=void 0,exports.prototype.message=void 0,exports.prototype.status=void 0,exports.prototype.success=void 0,exports})},{"../ApiClient":9,"./TrackingReminderNotification":63}],38:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Image=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(height,imageUrl,width){var _this=this;_this.height=height,_this.imageUrl=imageUrl,_this.width=width};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("height")&&(obj.height=ApiClient.convertToType(data.height,"String")),data.hasOwnProperty("imageUrl")&&(obj.imageUrl=ApiClient.convertToType(data.imageUrl,"String")),data.hasOwnProperty("width")&&(obj.width=ApiClient.convertToType(data.width,"String"))),obj},exports.prototype.height=void 0,exports.prototype.imageUrl=void 0,exports.prototype.width=void 0,exports})},{"../ApiClient":9}],39:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.JsonErrorResponse=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(status){this.status=status};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("message")&&(obj.message=ApiClient.convertToType(data.message,"String")),data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"String"))),obj},exports.prototype.message=void 0,exports.prototype.status=void 0,exports})},{"../ApiClient":9}],40:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Measurement=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(sourceName,startTimeString,unitAbbreviatedName,value,variableName){var _this=this;_this.sourceName=sourceName,_this.startTimeString=startTimeString,_this.unitAbbreviatedName=unitAbbreviatedName,_this.value=value,_this.variableName=variableName};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("clientId")&&(obj.clientId=ApiClient.convertToType(data.clientId,"String")),data.hasOwnProperty("connectorId")&&(obj.connectorId=ApiClient.convertToType(data.connectorId,"Number")),data.hasOwnProperty("createdAt")&&(obj.createdAt=ApiClient.convertToType(data.createdAt,"String")),data.hasOwnProperty("displayValueAndUnitString")&&(obj.displayValueAndUnitString=ApiClient.convertToType(data.displayValueAndUnitString,"String")),data.hasOwnProperty("iconIcon")&&(obj.iconIcon=ApiClient.convertToType(data.iconIcon,"String")),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("inputType")&&(obj.inputType=ApiClient.convertToType(data.inputType,"String")),data.hasOwnProperty("ionIcon")&&(obj.ionIcon=ApiClient.convertToType(data.ionIcon,"String")),data.hasOwnProperty("manualTracking")&&(obj.manualTracking=ApiClient.convertToType(data.manualTracking,"Boolean")),data.hasOwnProperty("maximumAllowedValue")&&(obj.maximumAllowedValue=ApiClient.convertToType(data.maximumAllowedValue,"Number")),data.hasOwnProperty("minimumAllowedValue")&&(obj.minimumAllowedValue=ApiClient.convertToType(data.minimumAllowedValue,"Number")),data.hasOwnProperty("note")&&(obj.note=ApiClient.convertToType(data.note,"String")),data.hasOwnProperty("noteObject")&&(obj.noteObject=ApiClient.convertToType(data.noteObject,Object)),data.hasOwnProperty("noteHtml")&&(obj.noteHtml=ApiClient.convertToType(data.noteHtml,Object)),data.hasOwnProperty("originalUnitId")&&(obj.originalUnitId=ApiClient.convertToType(data.originalUnitId,"Number")),data.hasOwnProperty("originalValue")&&(obj.originalValue=ApiClient.convertToType(data.originalValue,"Number")),data.hasOwnProperty("pngPath")&&(obj.pngPath=ApiClient.convertToType(data.pngPath,"String")),data.hasOwnProperty("pngUrl")&&(obj.pngUrl=ApiClient.convertToType(data.pngUrl,"String")),data.hasOwnProperty("productUrl")&&(obj.productUrl=ApiClient.convertToType(data.productUrl,"String")),data.hasOwnProperty("sourceName")&&(obj.sourceName=ApiClient.convertToType(data.sourceName,"String")),data.hasOwnProperty("startDate")&&(obj.startDate=ApiClient.convertToType(data.startDate,"String")),data.hasOwnProperty("startTimeEpoch")&&(obj.startTimeEpoch=ApiClient.convertToType(data.startTimeEpoch,"Number")),data.hasOwnProperty("startTimeString")&&(obj.startTimeString=ApiClient.convertToType(data.startTimeString,"String")),data.hasOwnProperty("svgUrl")&&(obj.svgUrl=ApiClient.convertToType(data.svgUrl,"String")),data.hasOwnProperty("unitAbbreviatedName")&&(obj.unitAbbreviatedName=ApiClient.convertToType(data.unitAbbreviatedName,"String")),data.hasOwnProperty("unitCategoryId")&&(obj.unitCategoryId=ApiClient.convertToType(data.unitCategoryId,"Number")),data.hasOwnProperty("unitCategoryName")&&(obj.unitCategoryName=ApiClient.convertToType(data.unitCategoryName,"String")),data.hasOwnProperty("unitId")&&(obj.unitId=ApiClient.convertToType(data.unitId,"Number")),data.hasOwnProperty("unitName")&&(obj.unitName=ApiClient.convertToType(data.unitName,"String")),data.hasOwnProperty("updatedAt")&&(obj.updatedAt=ApiClient.convertToType(data.updatedAt,"String")),data.hasOwnProperty("url")&&(obj.url=ApiClient.convertToType(data.url,"String")),data.hasOwnProperty("userVariableUnitAbbreviatedName")&&(obj.userVariableUnitAbbreviatedName=ApiClient.convertToType(data.userVariableUnitAbbreviatedName,"String")),data.hasOwnProperty("userVariableUnitCategoryId")&&(obj.userVariableUnitCategoryId=ApiClient.convertToType(data.userVariableUnitCategoryId,"Number")),data.hasOwnProperty("userVariableUnitCategoryName")&&(obj.userVariableUnitCategoryName=ApiClient.convertToType(data.userVariableUnitCategoryName,"String")),data.hasOwnProperty("userVariableUnitId")&&(obj.userVariableUnitId=ApiClient.convertToType(data.userVariableUnitId,"Number")),data.hasOwnProperty("userVariableUnitName")&&(obj.userVariableUnitName=ApiClient.convertToType(data.userVariableUnitName,"String")),data.hasOwnProperty("userVariableVariableCategoryId")&&(obj.userVariableVariableCategoryId=ApiClient.convertToType(data.userVariableVariableCategoryId,"Number")),data.hasOwnProperty("userVariableVariableCategoryName")&&(obj.userVariableVariableCategoryName=ApiClient.convertToType(data.userVariableVariableCategoryName,"String")),data.hasOwnProperty("valence")&&(obj.valence=ApiClient.convertToType(data.valence,"String")),data.hasOwnProperty("value")&&(obj.value=ApiClient.convertToType(data.value,"Number")),data.hasOwnProperty("variableCategoryId")&&(obj.variableCategoryId=ApiClient.convertToType(data.variableCategoryId,"Number")),data.hasOwnProperty("variableCategoryImageUrl")&&(obj.variableCategoryImageUrl=ApiClient.convertToType(data.variableCategoryImageUrl,"String")),data.hasOwnProperty("variableCategoryName")&&(obj.variableCategoryName=ApiClient.convertToType(data.variableCategoryName,"String")),data.hasOwnProperty("variableDescription")&&(obj.variableDescription=ApiClient.convertToType(data.variableDescription,"String")),data.hasOwnProperty("variableId")&&(obj.variableId=ApiClient.convertToType(data.variableId,"Number")),data.hasOwnProperty("variableName")&&(obj.variableName=ApiClient.convertToType(data.variableName,"String")),data.hasOwnProperty("displayName")&&(obj.displayName=ApiClient.convertToType(data.displayName,"String"))),obj},exports.prototype.clientId=void 0,exports.prototype.connectorId=void 0,exports.prototype.createdAt=void 0,exports.prototype.displayValueAndUnitString=void 0,exports.prototype.iconIcon=void 0,exports.prototype.id=void 0,exports.prototype.inputType=void 0,exports.prototype.ionIcon=void 0,exports.prototype.manualTracking=void 0,exports.prototype.maximumAllowedValue=void 0,exports.prototype.minimumAllowedValue=void 0,exports.prototype.note=void 0,exports.prototype.noteObject=void 0,exports.prototype.noteHtml=void 0,exports.prototype.originalUnitId=void 0,exports.prototype.originalValue=void 0,exports.prototype.pngPath=void 0,exports.prototype.pngUrl=void 0,exports.prototype.productUrl=void 0,exports.prototype.sourceName=void 0,exports.prototype.startDate=void 0,exports.prototype.startTimeEpoch=void 0,exports.prototype.startTimeString=void 0,exports.prototype.svgUrl=void 0,exports.prototype.unitAbbreviatedName=void 0,exports.prototype.unitCategoryId=void 0,exports.prototype.unitCategoryName=void 0,exports.prototype.unitId=void 0,exports.prototype.unitName=void 0,exports.prototype.updatedAt=void 0,exports.prototype.url=void 0,exports.prototype.userVariableUnitAbbreviatedName=void 0,exports.prototype.userVariableUnitCategoryId=void 0,exports.prototype.userVariableUnitCategoryName=void 0,exports.prototype.userVariableUnitId=void 0,exports.prototype.userVariableUnitName=void 0,exports.prototype.userVariableVariableCategoryId=void 0,exports.prototype.userVariableVariableCategoryName=void 0,exports.prototype.valence=void 0,exports.prototype.value=void 0,exports.prototype.variableCategoryId=void 0,exports.prototype.variableCategoryImageUrl=void 0,exports.prototype.variableCategoryName=void 0,exports.prototype.variableDescription=void 0,exports.prototype.variableId=void 0,exports.prototype.variableName=void 0,exports.prototype.displayName=void 0,exports})},{"../ApiClient":9}],41:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.MeasurementDelete=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(clientId){this.clientId=clientId};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("startTime")&&(obj.startTime=ApiClient.convertToType(data.startTime,"Number")),data.hasOwnProperty("variableId")&&(obj.variableId=ApiClient.convertToType(data.variableId,"Number")),data.hasOwnProperty("connectorName")&&(obj.connectorName=ApiClient.convertToType(data.connectorName,"String")),data.hasOwnProperty("clientId")&&(obj.clientId=ApiClient.convertToType(data.clientId,"String"))),obj},exports.prototype.startTime=void 0,exports.prototype.variableId=void 0,exports.prototype.connectorName=void 0,exports.prototype.clientId=void 0,exports})},{"../ApiClient":9}],42:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.MeasurementItem=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(timestamp,value){var _this=this;_this.timestamp=timestamp,_this.value=value};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("note")&&(obj.note=ApiClient.convertToType(data.note,"String")),data.hasOwnProperty("timestamp")&&(obj.timestamp=ApiClient.convertToType(data.timestamp,"Number")),data.hasOwnProperty("value")&&(obj.value=ApiClient.convertToType(data.value,"Number"))),obj},exports.prototype.note=void 0,exports.prototype.timestamp=void 0,exports.prototype.value=void 0,exports})},{"../ApiClient":9}],43:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./MeasurementItem")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.MeasurementSet=factory(root.Quantimodo.ApiClient,root.Quantimodo.MeasurementItem))}(this,function(ApiClient,MeasurementItem){"use strict";var exports=function(measurementItems,sourceName,unitAbbreviatedName,variableName){var _this=this;_this.measurementItems=measurementItems,_this.sourceName=sourceName,_this.unitAbbreviatedName=unitAbbreviatedName,_this.variableName=variableName};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("combinationOperation")&&(obj.combinationOperation=ApiClient.convertToType(data.combinationOperation,"String")),data.hasOwnProperty("measurementItems")&&(obj.measurementItems=ApiClient.convertToType(data.measurementItems,[MeasurementItem])),data.hasOwnProperty("sourceName")&&(obj.sourceName=ApiClient.convertToType(data.sourceName,"String")),data.hasOwnProperty("unitAbbreviatedName")&&(obj.unitAbbreviatedName=ApiClient.convertToType(data.unitAbbreviatedName,"String")),data.hasOwnProperty("variableCategoryName")&&(obj.variableCategoryName=ApiClient.convertToType(data.variableCategoryName,"String")),data.hasOwnProperty("variableName")&&(obj.variableName=ApiClient.convertToType(data.variableName,"String")),data.hasOwnProperty("upc")&&(obj.upc=ApiClient.convertToType(data.upc,"String"))),obj},exports.prototype.combinationOperation=void 0,exports.prototype.measurementItems=void 0,exports.prototype.sourceName=void 0,exports.prototype.unitAbbreviatedName=void 0,exports.prototype.variableCategoryName=void 0,exports.prototype.variableName=void 0,exports.prototype.upc=void 0,exports.CombinationOperationEnum={MEAN:"MEAN",SUM:"SUM"},exports})},{"../ApiClient":9,"./MeasurementItem":42}],44:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.MeasurementUpdate=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(id){this.id=id};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("note")&&(obj.note=ApiClient.convertToType(data.note,"String")),data.hasOwnProperty("startTime")&&(obj.startTime=ApiClient.convertToType(data.startTime,"Number")),data.hasOwnProperty("value")&&(obj.value=ApiClient.convertToType(data.value,"Number"))),obj},exports.prototype.id=void 0,exports.prototype.note=void 0,exports.prototype.startTime=void 0,exports.prototype.value=void 0,exports})},{"../ApiClient":9}],45:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Pair=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(causeMeasurement,causeMeasurementValue,causeVariableUnitAbbreviatedName,effectMeasurement,effectMeasurementValue,effectVariableUnitAbbreviatedName,timestamp){var _this=this;_this.causeMeasurement=causeMeasurement,_this.causeMeasurementValue=causeMeasurementValue,_this.causeVariableUnitAbbreviatedName=causeVariableUnitAbbreviatedName,_this.effectMeasurement=effectMeasurement,_this.effectMeasurementValue=effectMeasurementValue,_this.effectVariableUnitAbbreviatedName=effectVariableUnitAbbreviatedName,_this.timestamp=timestamp};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("causeMeasurement")&&(obj.causeMeasurement=ApiClient.convertToType(data.causeMeasurement,"Number")),data.hasOwnProperty("causeMeasurementValue")&&(obj.causeMeasurementValue=ApiClient.convertToType(data.causeMeasurementValue,"Number")),data.hasOwnProperty("causeVariableUnitAbbreviatedName")&&(obj.causeVariableUnitAbbreviatedName=ApiClient.convertToType(data.causeVariableUnitAbbreviatedName,"String")),data.hasOwnProperty("effectMeasurement")&&(obj.effectMeasurement=ApiClient.convertToType(data.effectMeasurement,"Number")),data.hasOwnProperty("effectMeasurementValue")&&(obj.effectMeasurementValue=ApiClient.convertToType(data.effectMeasurementValue,"Number")),data.hasOwnProperty("effectVariableUnitAbbreviatedName")&&(obj.effectVariableUnitAbbreviatedName=ApiClient.convertToType(data.effectVariableUnitAbbreviatedName,"String")),data.hasOwnProperty("eventAt")&&(obj.eventAt=ApiClient.convertToType(data.eventAt,"String")),data.hasOwnProperty("eventAtUnixTime")&&(obj.eventAtUnixTime=ApiClient.convertToType(data.eventAtUnixTime,"Number")),data.hasOwnProperty("startTimeString")&&(obj.startTimeString=ApiClient.convertToType(data.startTimeString,"String")),data.hasOwnProperty("timestamp")&&(obj.timestamp=ApiClient.convertToType(data.timestamp,"Number"))),obj},exports.prototype.causeMeasurement=void 0,exports.prototype.causeMeasurementValue=void 0,exports.prototype.causeVariableUnitAbbreviatedName=void 0,exports.prototype.effectMeasurement=void 0,exports.prototype.effectMeasurementValue=void 0,exports.prototype.effectVariableUnitAbbreviatedName=void 0,exports.prototype.eventAt=void 0,exports.prototype.eventAtUnixTime=void 0,exports.prototype.startTimeString=void 0,exports.prototype.timestamp=void 0,exports})},{"../ApiClient":9}],46:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.ParticipantInstruction=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(){};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("instructionsForCauseVariable")&&(obj.instructionsForCauseVariable=ApiClient.convertToType(data.instructionsForCauseVariable,"String")),data.hasOwnProperty("instructionsForEffectVariable")&&(obj.instructionsForEffectVariable=ApiClient.convertToType(data.instructionsForEffectVariable,"String"))),obj},exports.prototype.instructionsForCauseVariable=void 0,exports.prototype.instructionsForEffectVariable=void 0,exports})},{"../ApiClient":9}],47:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.PostCorrelation=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(causeVariableName,correlation,effectVariableName){var _this=this;_this.causeVariableName=causeVariableName,_this.correlation=correlation,_this.effectVariableName=effectVariableName};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("causeVariableName")&&(obj.causeVariableName=ApiClient.convertToType(data.causeVariableName,"String")),data.hasOwnProperty("correlation")&&(obj.correlation=ApiClient.convertToType(data.correlation,"Number")),data.hasOwnProperty("effectVariableName")&&(obj.effectVariableName=ApiClient.convertToType(data.effectVariableName,"String")),data.hasOwnProperty("vote")&&(obj.vote=ApiClient.convertToType(data.vote,"Number"))),obj},exports.prototype.causeVariableName=void 0,exports.prototype.correlation=void 0,exports.prototype.effectVariableName=void 0,exports.prototype.vote=void 0,exports})},{"../ApiClient":9}],48:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./Variable")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.PostMeasurementsDataResponse=factory(root.Quantimodo.ApiClient,root.Quantimodo.Variable))}(this,function(ApiClient,Variable){"use strict";var exports=function(){};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("userVariables")&&(obj.userVariables=ApiClient.convertToType(data.userVariables,[Variable]))),obj},exports.prototype.userVariables=void 0,exports})},{"../ApiClient":9,"./Variable":72}],49:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./PostMeasurementsDataResponse")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.PostMeasurementsResponse=factory(root.Quantimodo.ApiClient,root.Quantimodo.PostMeasurementsDataResponse))}(this,function(ApiClient,PostMeasurementsDataResponse){"use strict";var exports=function(status,success){var _this=this;_this.status=status,_this.success=success};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("data")&&(obj.data=PostMeasurementsDataResponse.constructFromObject(data.data)),data.hasOwnProperty("message")&&(obj.message=ApiClient.convertToType(data.message,"String")),data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"Number")),data.hasOwnProperty("success")&&(obj.success=ApiClient.convertToType(data.success,"Boolean"))),obj},exports.prototype.data=void 0,exports.prototype.message=void 0,exports.prototype.status=void 0,exports.prototype.success=void 0,exports})},{"../ApiClient":9,"./PostMeasurementsDataResponse":48}],50:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.PostStudyPublishResponse=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(){};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"String")),data.hasOwnProperty("success")&&(obj.success=ApiClient.convertToType(data.success,"Boolean"))),obj},exports.prototype.status=void 0,exports.prototype.success=void 0,exports})},{"../ApiClient":9}],51:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./TrackingReminder"),require("./TrackingReminderNotification"),require("./Variable")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.PostTrackingRemindersDataResponse=factory(root.Quantimodo.ApiClient,root.Quantimodo.TrackingReminder,root.Quantimodo.TrackingReminderNotification,root.Quantimodo.Variable))}(this,function(ApiClient,TrackingReminder,TrackingReminderNotification,Variable){"use strict";var exports=function(){};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("trackingReminderNotifications")&&(obj.trackingReminderNotifications=ApiClient.convertToType(data.trackingReminderNotifications,[TrackingReminderNotification])),data.hasOwnProperty("trackingReminders")&&(obj.trackingReminders=ApiClient.convertToType(data.trackingReminders,[TrackingReminder])),data.hasOwnProperty("userVariables")&&(obj.userVariables=ApiClient.convertToType(data.userVariables,[Variable]))),obj},exports.prototype.trackingReminderNotifications=void 0,exports.prototype.trackingReminders=void 0,exports.prototype.userVariables=void 0,exports})},{"../ApiClient":9,"./TrackingReminder":61,"./TrackingReminderNotification":63,"./Variable":72}],52:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./PostTrackingRemindersDataResponse")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.PostTrackingRemindersResponse=factory(root.Quantimodo.ApiClient,root.Quantimodo.PostTrackingRemindersDataResponse))}(this,function(ApiClient,PostTrackingRemindersDataResponse){"use strict";var exports=function(status,success){var _this=this;_this.status=status,_this.success=success};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("data")&&(obj.data=PostTrackingRemindersDataResponse.constructFromObject(data.data)),data.hasOwnProperty("message")&&(obj.message=ApiClient.convertToType(data.message,"String")),data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"Number")),data.hasOwnProperty("success")&&(obj.success=ApiClient.convertToType(data.success,"Boolean"))),obj},exports.prototype.data=void 0,exports.prototype.message=void 0,exports.prototype.status=void 0,exports.prototype.success=void 0,exports})},{"../ApiClient":9,"./PostTrackingRemindersDataResponse":51}],53:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.PostUserSettingsDataResponse=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(){};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("purchaseId")&&(obj.purchaseId=ApiClient.convertToType(data.purchaseId,"Number"))),obj},exports.prototype.purchaseId=void 0,exports})},{"../ApiClient":9}],54:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./PostUserSettingsDataResponse")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.PostUserSettingsResponse=factory(root.Quantimodo.ApiClient,root.Quantimodo.PostUserSettingsDataResponse))}(this,function(ApiClient,PostUserSettingsDataResponse){"use strict";var exports=function(status,success){var _this=this;_this.status=status,_this.success=success};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("data")&&(obj.data=PostUserSettingsDataResponse.constructFromObject(data.data)),data.hasOwnProperty("message")&&(obj.message=ApiClient.convertToType(data.message,"String")),data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"Number")),data.hasOwnProperty("success")&&(obj.success=ApiClient.convertToType(data.success,"Boolean"))),obj},exports.prototype.data=void 0,exports.prototype.message=void 0,exports.prototype.status=void 0,exports.prototype.success=void 0,exports})},{"../ApiClient":9,"./PostUserSettingsDataResponse":53}],55:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Scope=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(){};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("scalar")&&(obj.scalar=ApiClient.convertToType(data.scalar,"String"))),obj},exports.prototype.scalar=void 0,exports})},{"../ApiClient":9}],56:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./Chart"),require("./Correlation"),require("./ParticipantInstruction"),require("./StudyHtml"),require("./StudyImages"),require("./StudyLinks"),require("./StudyText"),require("./Variable")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Study=factory(root.Quantimodo.ApiClient,root.Quantimodo.Chart,root.Quantimodo.Correlation,root.Quantimodo.ParticipantInstruction,root.Quantimodo.StudyHtml,root.Quantimodo.StudyImages,root.Quantimodo.StudyLinks,root.Quantimodo.StudyText,root.Quantimodo.Variable))}(this,function(ApiClient,Chart,Correlation,ParticipantInstruction,StudyHtml,StudyImages,StudyLinks,StudyText,Variable){"use strict";var exports=function(type){this.type=type};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("causeVariable")&&(obj.causeVariable=Variable.constructFromObject(data.causeVariable)),data.hasOwnProperty("charts")&&(obj.charts=ApiClient.convertToType(data.charts,[Chart])),data.hasOwnProperty("effectVariable")&&(obj.effectVariable=Variable.constructFromObject(data.effectVariable)),data.hasOwnProperty("participantInstructions")&&(obj.participantInstructions=ParticipantInstruction.constructFromObject(data.participantInstructions)),data.hasOwnProperty("statistics")&&(obj.statistics=Correlation.constructFromObject(data.statistics)),data.hasOwnProperty("studyHtml")&&(obj.studyHtml=StudyHtml.constructFromObject(data.studyHtml)),data.hasOwnProperty("studyImages")&&(obj.studyImages=StudyImages.constructFromObject(data.studyImages)),data.hasOwnProperty("studyLinks")&&(obj.studyLinks=StudyLinks.constructFromObject(data.studyLinks)),data.hasOwnProperty("studyText")&&(obj.studyText=StudyText.constructFromObject(data.studyText)),data.hasOwnProperty("type")&&(obj.type=ApiClient.convertToType(data.type,"String")),data.hasOwnProperty("userId")&&(obj.userId=ApiClient.convertToType(data.userId,"String"))),obj},exports.prototype.causeVariable=void 0,exports.prototype.charts=void 0,exports.prototype.effectVariable=void 0,exports.prototype.participantInstructions=void 0,exports.prototype.statistics=void 0,exports.prototype.studyHtml=void 0,exports.prototype.studyImages=void 0,exports.prototype.studyLinks=void 0,exports.prototype.studyText=void 0,exports.prototype.type=void 0,exports.prototype.userId=void 0,exports})},{"../ApiClient":9,"./Chart":24,"./Correlation":29,"./ParticipantInstruction":46,"./StudyHtml":57,"./StudyImages":58,"./StudyLinks":59,"./StudyText":60,"./Variable":72}],57:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.StudyHtml=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(chartHtml,fullStudyHtml){var _this=this;_this.chartHtml=chartHtml,_this.fullStudyHtml=fullStudyHtml};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("chartHtml")&&(obj.chartHtml=ApiClient.convertToType(data.chartHtml,"String")),data.hasOwnProperty("downloadButtonsHtml")&&(obj.downloadButtonsHtml=ApiClient.convertToType(data.downloadButtonsHtml,"String")),data.hasOwnProperty("fullPageWithHead")&&(obj.fullPageWithHead=ApiClient.convertToType(data.fullPageWithHead,"String")),data.hasOwnProperty("fullStudyHtml")&&(obj.fullStudyHtml=ApiClient.convertToType(data.fullStudyHtml,"String")),data.hasOwnProperty("fullStudyHtmlWithCssStyles")&&(obj.fullStudyHtmlWithCssStyles=ApiClient.convertToType(data.fullStudyHtmlWithCssStyles,"String")),data.hasOwnProperty("statisticsTableHtml")&&(obj.statisticsTableHtml=ApiClient.convertToType(data.statisticsTableHtml,"String")),data.hasOwnProperty("studyAbstractHtml")&&(obj.studyAbstractHtml=ApiClient.convertToType(data.studyAbstractHtml,"String")),data.hasOwnProperty("studyHeaderHtml")&&(obj.studyHeaderHtml=ApiClient.convertToType(data.studyHeaderHtml,"String")),data.hasOwnProperty("studyImageHtml")&&(obj.studyImageHtml=ApiClient.convertToType(data.studyImageHtml,"String")),data.hasOwnProperty("studyMetaHtml")&&(obj.studyMetaHtml=ApiClient.convertToType(data.studyMetaHtml,"String")),data.hasOwnProperty("studyTextHtml")&&(obj.studyTextHtml=ApiClient.convertToType(data.studyTextHtml,"String")),data.hasOwnProperty("socialSharingButtonHtml")&&(obj.socialSharingButtonHtml=ApiClient.convertToType(data.socialSharingButtonHtml,"String")),data.hasOwnProperty("studySummaryBoxHtml")&&(obj.studySummaryBoxHtml=ApiClient.convertToType(data.studySummaryBoxHtml,"String"))),obj},exports.prototype.chartHtml=void 0,exports.prototype.downloadButtonsHtml=void 0,exports.prototype.fullPageWithHead=void 0,exports.prototype.fullStudyHtml=void 0,exports.prototype.fullStudyHtmlWithCssStyles=void 0,exports.prototype.statisticsTableHtml=void 0,exports.prototype.studyAbstractHtml=void 0,exports.prototype.studyHeaderHtml=void 0,exports.prototype.studyImageHtml=void 0,exports.prototype.studyMetaHtml=void 0,exports.prototype.studyTextHtml=void 0,exports.prototype.socialSharingButtonHtml=void 0,exports.prototype.studySummaryBoxHtml=void 0,exports})},{"../ApiClient":9}],58:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.StudyImages=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(gaugeImage,gaugeImageSquare,imageUrl){var _this=this;_this.gaugeImage=gaugeImage,_this.gaugeImageSquare=gaugeImageSquare,_this.imageUrl=imageUrl};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("causeVariableImageUrl")&&(obj.causeVariableImageUrl=ApiClient.convertToType(data.causeVariableImageUrl,"String")),data.hasOwnProperty("causeVariableIonIcon")&&(obj.causeVariableIonIcon=ApiClient.convertToType(data.causeVariableIonIcon,"String")),data.hasOwnProperty("effectVariableImageUrl")&&(obj.effectVariableImageUrl=ApiClient.convertToType(data.effectVariableImageUrl,"String")),data.hasOwnProperty("effectVariableIonIcon")&&(obj.effectVariableIonIcon=ApiClient.convertToType(data.effectVariableIonIcon,"String")),data.hasOwnProperty("gaugeImage")&&(obj.gaugeImage=ApiClient.convertToType(data.gaugeImage,"String")),data.hasOwnProperty("gaugeImageSquare")&&(obj.gaugeImageSquare=ApiClient.convertToType(data.gaugeImageSquare,"String")),data.hasOwnProperty("gaugeSharingImageUrl")&&(obj.gaugeSharingImageUrl=ApiClient.convertToType(data.gaugeSharingImageUrl,"String")),data.hasOwnProperty("imageUrl")&&(obj.imageUrl=ApiClient.convertToType(data.imageUrl,"String")),data.hasOwnProperty("robotSharingImageUrl")&&(obj.robotSharingImageUrl=ApiClient.convertToType(data.robotSharingImageUrl,"String"))),obj},exports.prototype.causeVariableImageUrl=void 0,exports.prototype.causeVariableIonIcon=void 0,exports.prototype.effectVariableImageUrl=void 0,exports.prototype.effectVariableIonIcon=void 0,exports.prototype.gaugeImage=void 0,exports.prototype.gaugeImageSquare=void 0,exports.prototype.gaugeSharingImageUrl=void 0,exports.prototype.imageUrl=void 0,exports.prototype.robotSharingImageUrl=void 0,exports})},{"../ApiClient":9}],59:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.StudyLinks=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(studyLinkEmail,studyLinkFacebook,studyLinkGoogle,studyLinkStatic,studyLinkDynamic,studyLinkTwitter){var _this=this;_this.studyLinkEmail=studyLinkEmail,_this.studyLinkFacebook=studyLinkFacebook,_this.studyLinkGoogle=studyLinkGoogle,_this.studyLinkStatic=studyLinkStatic,_this.studyLinkDynamic=studyLinkDynamic,_this.studyLinkTwitter=studyLinkTwitter};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("studyLinkEmail")&&(obj.studyLinkEmail=ApiClient.convertToType(data.studyLinkEmail,"String")),data.hasOwnProperty("studyLinkFacebook")&&(obj.studyLinkFacebook=ApiClient.convertToType(data.studyLinkFacebook,"String")),data.hasOwnProperty("studyLinkGoogle")&&(obj.studyLinkGoogle=ApiClient.convertToType(data.studyLinkGoogle,"String")),data.hasOwnProperty("studyLinkStatic")&&(obj.studyLinkStatic=ApiClient.convertToType(data.studyLinkStatic,"String")),data.hasOwnProperty("studyLinkDynamic")&&(obj.studyLinkDynamic=ApiClient.convertToType(data.studyLinkDynamic,"String")),data.hasOwnProperty("studyLinkTwitter")&&(obj.studyLinkTwitter=ApiClient.convertToType(data.studyLinkTwitter,"String"))),obj},exports.prototype.studyLinkEmail=void 0,exports.prototype.studyLinkFacebook=void 0,exports.prototype.studyLinkGoogle=void 0,exports.prototype.studyLinkStatic=void 0,exports.prototype.studyLinkDynamic=void 0,exports.prototype.studyLinkTwitter=void 0,exports})},{"../ApiClient":9}],60:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.StudyText=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(studyAbstract,studyDesign,studyLimitations,studyObjective,studyResults,studyTitle){var _this=this;_this.studyAbstract=studyAbstract,_this.studyDesign=studyDesign,_this.studyLimitations=studyLimitations,_this.studyObjective=studyObjective,_this.studyResults=studyResults,_this.studyTitle=studyTitle};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("averageEffectFollowingHighCauseExplanation")&&(obj.averageEffectFollowingHighCauseExplanation=ApiClient.convertToType(data.averageEffectFollowingHighCauseExplanation,"String")),data.hasOwnProperty("averageEffectFollowingLowCauseExplanation")&&(obj.averageEffectFollowingLowCauseExplanation=ApiClient.convertToType(data.averageEffectFollowingLowCauseExplanation,"String")),data.hasOwnProperty("valuePredictingHighOutcomeExplanation")&&(obj.valuePredictingHighOutcomeExplanation=ApiClient.convertToType(data.valuePredictingHighOutcomeExplanation,"String")),data.hasOwnProperty("valuePredictingLowOutcomeExplanation")&&(obj.valuePredictingLowOutcomeExplanation=ApiClient.convertToType(data.valuePredictingLowOutcomeExplanation,"String")),data.hasOwnProperty("dataAnalysis")&&(obj.dataAnalysis=ApiClient.convertToType(data.dataAnalysis,"String")),data.hasOwnProperty("dataSources")&&(obj.dataSources=ApiClient.convertToType(data.dataSources,"String")),data.hasOwnProperty("dataSourcesParagraphForCause")&&(obj.dataSourcesParagraphForCause=ApiClient.convertToType(data.dataSourcesParagraphForCause,"String")),data.hasOwnProperty("dataSourcesParagraphForEffect")&&(obj.dataSourcesParagraphForEffect=ApiClient.convertToType(data.dataSourcesParagraphForEffect,"String")),data.hasOwnProperty("lastCauseDailyValueSentenceExtended")&&(obj.lastCauseDailyValueSentenceExtended=ApiClient.convertToType(data.lastCauseDailyValueSentenceExtended,"String")),data.hasOwnProperty("lastCauseAndOptimalValueSentence")&&(obj.lastCauseAndOptimalValueSentence=ApiClient.convertToType(data.lastCauseAndOptimalValueSentence,"String")),data.hasOwnProperty("lastCauseDailyValueSentence")&&(obj.lastCauseDailyValueSentence=ApiClient.convertToType(data.lastCauseDailyValueSentence,"String")),data.hasOwnProperty("optimalDailyValueSentence")&&(obj.optimalDailyValueSentence=ApiClient.convertToType(data.optimalDailyValueSentence,"String")),data.hasOwnProperty("predictorExplanation")&&(obj.predictorExplanation=ApiClient.convertToType(data.predictorExplanation,"String")),data.hasOwnProperty("significanceExplanation")&&(obj.significanceExplanation=ApiClient.convertToType(data.significanceExplanation,"String")),data.hasOwnProperty("studyAbstract")&&(obj.studyAbstract=ApiClient.convertToType(data.studyAbstract,"String")),data.hasOwnProperty("studyDesign")&&(obj.studyDesign=ApiClient.convertToType(data.studyDesign,"String")),data.hasOwnProperty("studyLimitations")&&(obj.studyLimitations=ApiClient.convertToType(data.studyLimitations,"String")),data.hasOwnProperty("studyObjective")&&(obj.studyObjective=ApiClient.convertToType(data.studyObjective,"String")),data.hasOwnProperty("studyResults")&&(obj.studyResults=ApiClient.convertToType(data.studyResults,"String")),data.hasOwnProperty("studyTitle")&&(obj.studyTitle=ApiClient.convertToType(data.studyTitle,"String")),data.hasOwnProperty("studyInvitation")&&(obj.studyInvitation=ApiClient.convertToType(data.studyInvitation,"String")),data.hasOwnProperty("studyQuestion")&&(obj.studyQuestion=ApiClient.convertToType(data.studyQuestion,"String")),data.hasOwnProperty("studyBackground")&&(obj.studyBackground=ApiClient.convertToType(data.studyBackground,"String"))),obj},exports.prototype.averageEffectFollowingHighCauseExplanation=void 0,exports.prototype.averageEffectFollowingLowCauseExplanation=void 0,exports.prototype.valuePredictingHighOutcomeExplanation=void 0,exports.prototype.valuePredictingLowOutcomeExplanation=void 0,exports.prototype.dataAnalysis=void 0,exports.prototype.dataSources=void 0,exports.prototype.dataSourcesParagraphForCause=void 0,exports.prototype.dataSourcesParagraphForEffect=void 0,exports.prototype.lastCauseDailyValueSentenceExtended=void 0,exports.prototype.lastCauseAndOptimalValueSentence=void 0,exports.prototype.lastCauseDailyValueSentence=void 0,exports.prototype.optimalDailyValueSentence=void 0,exports.prototype.predictorExplanation=void 0,exports.prototype.significanceExplanation=void 0,exports.prototype.studyAbstract=void 0,exports.prototype.studyDesign=void 0,exports.prototype.studyLimitations=void 0,exports.prototype.studyObjective=void 0,exports.prototype.studyResults=void 0,exports.prototype.studyTitle=void 0,exports.prototype.studyInvitation=void 0,exports.prototype.studyQuestion=void 0,exports.prototype.studyBackground=void 0,exports})},{"../ApiClient":9}],61:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./TrackingReminderNotificationAction"),require("./Unit")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.TrackingReminder=factory(root.Quantimodo.ApiClient,root.Quantimodo.TrackingReminderNotificationAction,root.Quantimodo.Unit))}(this,function(ApiClient,TrackingReminderNotificationAction,Unit){"use strict";var exports=function(unitAbbreviatedName,reminderFrequency,variableCategoryName,variableName){var _this=this;_this.unitAbbreviatedName=unitAbbreviatedName,_this.reminderFrequency=reminderFrequency,_this.variableCategoryName=variableCategoryName,_this.variableName=variableName};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("actionArray")&&(obj.actionArray=ApiClient.convertToType(data.actionArray,[TrackingReminderNotificationAction])),data.hasOwnProperty("availableUnits")&&(obj.availableUnits=ApiClient.convertToType(data.availableUnits,[Unit])),data.hasOwnProperty("clientId")&&(obj.clientId=ApiClient.convertToType(data.clientId,"String")),data.hasOwnProperty("combinationOperation")&&(obj.combinationOperation=ApiClient.convertToType(data.combinationOperation,"String")),data.hasOwnProperty("createdAt")&&(obj.createdAt=ApiClient.convertToType(data.createdAt,"String")),data.hasOwnProperty("displayName")&&(obj.displayName=ApiClient.convertToType(data.displayName,"String")),data.hasOwnProperty("unitAbbreviatedName")&&(obj.unitAbbreviatedName=ApiClient.convertToType(data.unitAbbreviatedName,"String")),data.hasOwnProperty("unitCategoryId")&&(obj.unitCategoryId=ApiClient.convertToType(data.unitCategoryId,"Number")),data.hasOwnProperty("unitCategoryName")&&(obj.unitCategoryName=ApiClient.convertToType(data.unitCategoryName,"String")),data.hasOwnProperty("unitId")&&(obj.unitId=ApiClient.convertToType(data.unitId,"Number")),data.hasOwnProperty("unitName")&&(obj.unitName=ApiClient.convertToType(data.unitName,"String")),data.hasOwnProperty("defaultValue")&&(obj.defaultValue=ApiClient.convertToType(data.defaultValue,"Number")),data.hasOwnProperty("email")&&(obj.email=ApiClient.convertToType(data.email,"Boolean")),data.hasOwnProperty("errorMessage")&&(obj.errorMessage=ApiClient.convertToType(data.errorMessage,"String")),data.hasOwnProperty("fillingValue")&&(obj.fillingValue=ApiClient.convertToType(data.fillingValue,"Number")),data.hasOwnProperty("firstDailyReminderTime")&&(obj.firstDailyReminderTime=ApiClient.convertToType(data.firstDailyReminderTime,"String")),data.hasOwnProperty("frequencyTextDescription")&&(obj.frequencyTextDescription=ApiClient.convertToType(data.frequencyTextDescription,"String")),data.hasOwnProperty("frequencyTextDescriptionWithTime")&&(obj.frequencyTextDescriptionWithTime=ApiClient.convertToType(data.frequencyTextDescriptionWithTime,"String")),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("inputType")&&(obj.inputType=ApiClient.convertToType(data.inputType,"String")),data.hasOwnProperty("instructions")&&(obj.instructions=ApiClient.convertToType(data.instructions,"String")),data.hasOwnProperty("ionIcon")&&(obj.ionIcon=ApiClient.convertToType(data.ionIcon,"String")),data.hasOwnProperty("lastTracked")&&(obj.lastTracked=ApiClient.convertToType(data.lastTracked,"String")),data.hasOwnProperty("lastValue")&&(obj.lastValue=ApiClient.convertToType(data.lastValue,"Number")),data.hasOwnProperty("latestTrackingReminderNotificationReminderTime")&&(obj.latestTrackingReminderNotificationReminderTime=ApiClient.convertToType(data.latestTrackingReminderNotificationReminderTime,"String")),data.hasOwnProperty("localDailyReminderNotificationTimes")&&(obj.localDailyReminderNotificationTimes=ApiClient.convertToType(data.localDailyReminderNotificationTimes,["String"])),data.hasOwnProperty("localDailyReminderNotificationTimesForAllReminders")&&(obj.localDailyReminderNotificationTimesForAllReminders=ApiClient.convertToType(data.localDailyReminderNotificationTimesForAllReminders,["String"])),data.hasOwnProperty("manualTracking")&&(obj.manualTracking=ApiClient.convertToType(data.manualTracking,"Boolean")),data.hasOwnProperty("maximumAllowedValue")&&(obj.maximumAllowedValue=ApiClient.convertToType(data.maximumAllowedValue,"Number")),data.hasOwnProperty("minimumAllowedValue")&&(obj.minimumAllowedValue=ApiClient.convertToType(data.minimumAllowedValue,"Number")),data.hasOwnProperty("nextReminderTimeEpochSeconds")&&(obj.nextReminderTimeEpochSeconds=ApiClient.convertToType(data.nextReminderTimeEpochSeconds,"Number")),data.hasOwnProperty("notificationBar")&&(obj.notificationBar=ApiClient.convertToType(data.notificationBar,"Boolean")),data.hasOwnProperty("numberOfRawMeasurements")&&(obj.numberOfRawMeasurements=ApiClient.convertToType(data.numberOfRawMeasurements,"Number")),data.hasOwnProperty("numberOfUniqueValues")&&(obj.numberOfUniqueValues=ApiClient.convertToType(data.numberOfUniqueValues,"Number")),data.hasOwnProperty("outcome")&&(obj.outcome=ApiClient.convertToType(data.outcome,"Boolean")),data.hasOwnProperty("pngPath")&&(obj.pngPath=ApiClient.convertToType(data.pngPath,"String")),data.hasOwnProperty("pngUrl")&&(obj.pngUrl=ApiClient.convertToType(data.pngUrl,"String")),data.hasOwnProperty("productUrl")&&(obj.productUrl=ApiClient.convertToType(data.productUrl,"String")),data.hasOwnProperty("popUp")&&(obj.popUp=ApiClient.convertToType(data.popUp,"Boolean")),data.hasOwnProperty("question")&&(obj.question=ApiClient.convertToType(data.question,"String")),data.hasOwnProperty("reminderEndTime")&&(obj.reminderEndTime=ApiClient.convertToType(data.reminderEndTime,"String")),data.hasOwnProperty("reminderFrequency")&&(obj.reminderFrequency=ApiClient.convertToType(data.reminderFrequency,"Number")),data.hasOwnProperty("reminderSound")&&(obj.reminderSound=ApiClient.convertToType(data.reminderSound,"String")),data.hasOwnProperty("reminderStartEpochSeconds")&&(obj.reminderStartEpochSeconds=ApiClient.convertToType(data.reminderStartEpochSeconds,"Number")),data.hasOwnProperty("reminderStartTime")&&(obj.reminderStartTime=ApiClient.convertToType(data.reminderStartTime,"String")),data.hasOwnProperty("reminderStartTimeLocal")&&(obj.reminderStartTimeLocal=ApiClient.convertToType(data.reminderStartTimeLocal,"String")),data.hasOwnProperty("reminderStartTimeLocalHumanFormatted")&&(obj.reminderStartTimeLocalHumanFormatted=ApiClient.convertToType(data.reminderStartTimeLocalHumanFormatted,"String")),data.hasOwnProperty("repeating")&&(obj.repeating=ApiClient.convertToType(data.repeating,"Boolean")),data.hasOwnProperty("secondDailyReminderTime")&&(obj.secondDailyReminderTime=ApiClient.convertToType(data.secondDailyReminderTime,"String")),data.hasOwnProperty("secondToLastValue")&&(obj.secondToLastValue=ApiClient.convertToType(data.secondToLastValue,"Number")),data.hasOwnProperty("sms")&&(obj.sms=ApiClient.convertToType(data.sms,"Boolean")),data.hasOwnProperty("startTrackingDate")&&(obj.startTrackingDate=ApiClient.convertToType(data.startTrackingDate,"String")),data.hasOwnProperty("stopTrackingDate")&&(obj.stopTrackingDate=ApiClient.convertToType(data.stopTrackingDate,"String")),data.hasOwnProperty("svgUrl")&&(obj.svgUrl=ApiClient.convertToType(data.svgUrl,"String")),data.hasOwnProperty("thirdDailyReminderTime")&&(obj.thirdDailyReminderTime=ApiClient.convertToType(data.thirdDailyReminderTime,"String")),data.hasOwnProperty("thirdToLastValue")&&(obj.thirdToLastValue=ApiClient.convertToType(data.thirdToLastValue,"Number")),data.hasOwnProperty("trackingReminderId")&&(obj.trackingReminderId=ApiClient.convertToType(data.trackingReminderId,"Number")),data.hasOwnProperty("trackingReminderImageUrl")&&(obj.trackingReminderImageUrl=ApiClient.convertToType(data.trackingReminderImageUrl,"String")),data.hasOwnProperty("upc")&&(obj.upc=ApiClient.convertToType(data.upc,"String")),data.hasOwnProperty("updatedAt")&&(obj.updatedAt=ApiClient.convertToType(data.updatedAt,"String")),data.hasOwnProperty("userId")&&(obj.userId=ApiClient.convertToType(data.userId,"Number")),data.hasOwnProperty("userVariableUnitAbbreviatedName")&&(obj.userVariableUnitAbbreviatedName=ApiClient.convertToType(data.userVariableUnitAbbreviatedName,"String")),data.hasOwnProperty("userVariableUnitCategoryId")&&(obj.userVariableUnitCategoryId=ApiClient.convertToType(data.userVariableUnitCategoryId,"Number")),data.hasOwnProperty("userVariableUnitCategoryName")&&(obj.userVariableUnitCategoryName=ApiClient.convertToType(data.userVariableUnitCategoryName,"String")),data.hasOwnProperty("userVariableUnitId")&&(obj.userVariableUnitId=ApiClient.convertToType(data.userVariableUnitId,"Number")),data.hasOwnProperty("userVariableUnitName")&&(obj.userVariableUnitName=ApiClient.convertToType(data.userVariableUnitName,"String")),data.hasOwnProperty("userVariableVariableCategoryId")&&(obj.userVariableVariableCategoryId=ApiClient.convertToType(data.userVariableVariableCategoryId,"Number")),data.hasOwnProperty("userVariableVariableCategoryName")&&(obj.userVariableVariableCategoryName=ApiClient.convertToType(data.userVariableVariableCategoryName,"String")),data.hasOwnProperty("valence")&&(obj.valence=ApiClient.convertToType(data.valence,"String")),data.hasOwnProperty("valueAndFrequencyTextDescription")&&(obj.valueAndFrequencyTextDescription=ApiClient.convertToType(data.valueAndFrequencyTextDescription,"String")),data.hasOwnProperty("valueAndFrequencyTextDescriptionWithTime")&&(obj.valueAndFrequencyTextDescriptionWithTime=ApiClient.convertToType(data.valueAndFrequencyTextDescriptionWithTime,"String")),data.hasOwnProperty("variableCategoryId")&&(obj.variableCategoryId=ApiClient.convertToType(data.variableCategoryId,"Number")),data.hasOwnProperty("variableCategoryImageUrl")&&(obj.variableCategoryImageUrl=ApiClient.convertToType(data.variableCategoryImageUrl,"String")),data.hasOwnProperty("variableCategoryName")&&(obj.variableCategoryName=ApiClient.convertToType(data.variableCategoryName,"String")),data.hasOwnProperty("variableDescription")&&(obj.variableDescription=ApiClient.convertToType(data.variableDescription,"String")),data.hasOwnProperty("variableId")&&(obj.variableId=ApiClient.convertToType(data.variableId,"Number")),data.hasOwnProperty("variableName")&&(obj.variableName=ApiClient.convertToType(data.variableName,"String"))),obj},exports.prototype.actionArray=void 0,exports.prototype.availableUnits=void 0,exports.prototype.clientId=void 0,exports.prototype.combinationOperation=void 0,exports.prototype.createdAt=void 0,exports.prototype.displayName=void 0,exports.prototype.unitAbbreviatedName=void 0,exports.prototype.unitCategoryId=void 0,exports.prototype.unitCategoryName=void 0,exports.prototype.unitId=void 0,exports.prototype.unitName=void 0,exports.prototype.defaultValue=void 0,exports.prototype.email=void 0,exports.prototype.errorMessage=void 0,exports.prototype.fillingValue=void 0,exports.prototype.firstDailyReminderTime=void 0,exports.prototype.frequencyTextDescription=void 0,exports.prototype.frequencyTextDescriptionWithTime=void 0,exports.prototype.id=void 0,exports.prototype.inputType=void 0,exports.prototype.instructions=void 0,exports.prototype.ionIcon=void 0,exports.prototype.lastTracked=void 0,exports.prototype.lastValue=void 0,exports.prototype.latestTrackingReminderNotificationReminderTime=void 0,exports.prototype.localDailyReminderNotificationTimes=void 0,exports.prototype.localDailyReminderNotificationTimesForAllReminders=void 0,exports.prototype.manualTracking=void 0,exports.prototype.maximumAllowedValue=void 0,exports.prototype.minimumAllowedValue=void 0,exports.prototype.nextReminderTimeEpochSeconds=void 0,exports.prototype.notificationBar=void 0,exports.prototype.numberOfRawMeasurements=void 0,exports.prototype.numberOfUniqueValues=void 0,exports.prototype.outcome=void 0,exports.prototype.pngPath=void 0,exports.prototype.pngUrl=void 0,exports.prototype.productUrl=void 0,exports.prototype.popUp=void 0,exports.prototype.question=void 0,exports.prototype.reminderEndTime=void 0,exports.prototype.reminderFrequency=void 0,exports.prototype.reminderSound=void 0,exports.prototype.reminderStartEpochSeconds=void 0,exports.prototype.reminderStartTime=void 0,exports.prototype.reminderStartTimeLocal=void 0,exports.prototype.reminderStartTimeLocalHumanFormatted=void 0,exports.prototype.repeating=void 0,exports.prototype.secondDailyReminderTime=void 0,exports.prototype.secondToLastValue=void 0,exports.prototype.sms=void 0,exports.prototype.startTrackingDate=void 0,exports.prototype.stopTrackingDate=void 0,exports.prototype.svgUrl=void 0,exports.prototype.thirdDailyReminderTime=void 0,exports.prototype.thirdToLastValue=void 0,exports.prototype.trackingReminderId=void 0,exports.prototype.trackingReminderImageUrl=void 0,exports.prototype.upc=void 0,exports.prototype.updatedAt=void 0,exports.prototype.userId=void 0,exports.prototype.userVariableUnitAbbreviatedName=void 0,exports.prototype.userVariableUnitCategoryId=void 0,exports.prototype.userVariableUnitCategoryName=void 0,exports.prototype.userVariableUnitId=void 0,exports.prototype.userVariableUnitName=void 0,exports.prototype.userVariableVariableCategoryId=void 0,exports.prototype.userVariableVariableCategoryName=void 0,exports.prototype.valence=void 0,exports.prototype.valueAndFrequencyTextDescription=void 0,exports.prototype.valueAndFrequencyTextDescriptionWithTime=void 0,exports.prototype.variableCategoryId=void 0,exports.prototype.variableCategoryImageUrl=void 0,exports.prototype.variableCategoryName=void 0,exports.prototype.variableDescription=void 0,exports.prototype.variableId=void 0,exports.prototype.variableName=void 0,exports.CombinationOperationEnum={MEAN:"MEAN",SUM:"SUM"},exports})},{"../ApiClient":9,"./TrackingReminderNotificationAction":64,"./Unit":67}],62:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.TrackingReminderDelete=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(id){this.id=id};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number"))),obj},exports.prototype.id=void 0,exports})},{"../ApiClient":9}],63:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./TrackingReminderNotificationAction"),require("./TrackingReminderNotificationTrackAllAction"),require("./Unit")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.TrackingReminderNotification=factory(root.Quantimodo.ApiClient,root.Quantimodo.TrackingReminderNotificationAction,root.Quantimodo.TrackingReminderNotificationTrackAllAction,root.Quantimodo.Unit))}(this,function(ApiClient,TrackingReminderNotificationAction,TrackingReminderNotificationTrackAllAction,Unit){"use strict";var exports=function(actionArray,availableUnits,fillingValue,id,trackAllActions){var _this=this;_this.actionArray=actionArray,_this.availableUnits=availableUnits,_this.fillingValue=fillingValue,_this.id=id,_this.trackAllActions=trackAllActions};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("actionArray")&&(obj.actionArray=ApiClient.convertToType(data.actionArray,[TrackingReminderNotificationAction])),data.hasOwnProperty("availableUnits")&&(obj.availableUnits=ApiClient.convertToType(data.availableUnits,[Unit])),data.hasOwnProperty("clientId")&&(obj.clientId=ApiClient.convertToType(data.clientId,"String")),data.hasOwnProperty("combinationOperation")&&(obj.combinationOperation=ApiClient.convertToType(data.combinationOperation,"String")),data.hasOwnProperty("createdAt")&&(obj.createdAt=ApiClient.convertToType(data.createdAt,"String")),data.hasOwnProperty("displayName")&&(obj.displayName=ApiClient.convertToType(data.displayName,"String")),data.hasOwnProperty("modifiedValue")&&(obj.modifiedValue=ApiClient.convertToType(data.modifiedValue,"Number")),data.hasOwnProperty("unitAbbreviatedName")&&(obj.unitAbbreviatedName=ApiClient.convertToType(data.unitAbbreviatedName,"String")),data.hasOwnProperty("unitCategoryId")&&(obj.unitCategoryId=ApiClient.convertToType(data.unitCategoryId,"Number")),data.hasOwnProperty("unitCategoryName")&&(obj.unitCategoryName=ApiClient.convertToType(data.unitCategoryName,"String")),data.hasOwnProperty("unitId")&&(obj.unitId=ApiClient.convertToType(data.unitId,"Number")),data.hasOwnProperty("unitName")&&(obj.unitName=ApiClient.convertToType(data.unitName,"String")),data.hasOwnProperty("defaultValue")&&(obj.defaultValue=ApiClient.convertToType(data.defaultValue,"Number")),data.hasOwnProperty("description")&&(obj.description=ApiClient.convertToType(data.description,"String")),data.hasOwnProperty("email")&&(obj.email=ApiClient.convertToType(data.email,"Boolean")),data.hasOwnProperty("fillingValue")&&(obj.fillingValue=ApiClient.convertToType(data.fillingValue,"Number")),data.hasOwnProperty("iconIcon")&&(obj.iconIcon=ApiClient.convertToType(data.iconIcon,"String")),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("imageUrl")&&(obj.imageUrl=ApiClient.convertToType(data.imageUrl,"String")),data.hasOwnProperty("inputType")&&(obj.inputType=ApiClient.convertToType(data.inputType,"String")),data.hasOwnProperty("ionIcon")&&(obj.ionIcon=ApiClient.convertToType(data.ionIcon,"String")),data.hasOwnProperty("lastValue")&&(obj.lastValue=ApiClient.convertToType(data.lastValue,"Number")),data.hasOwnProperty("manualTracking")&&(obj.manualTracking=ApiClient.convertToType(data.manualTracking,"Boolean")),data.hasOwnProperty("maximumAllowedValue")&&(obj.maximumAllowedValue=ApiClient.convertToType(data.maximumAllowedValue,"Number")),data.hasOwnProperty("minimumAllowedValue")&&(obj.minimumAllowedValue=ApiClient.convertToType(data.minimumAllowedValue,"Number")),data.hasOwnProperty("mostCommonValue")&&(obj.mostCommonValue=ApiClient.convertToType(data.mostCommonValue,"Number")),data.hasOwnProperty("notificationBar")&&(obj.notificationBar=ApiClient.convertToType(data.notificationBar,"Boolean")),data.hasOwnProperty("notifiedAt")&&(obj.notifiedAt=ApiClient.convertToType(data.notifiedAt,"String")),data.hasOwnProperty("numberOfUniqueValues")&&(obj.numberOfUniqueValues=ApiClient.convertToType(data.numberOfUniqueValues,"Number")),data.hasOwnProperty("outcome")&&(obj.outcome=ApiClient.convertToType(data.outcome,"Boolean")),data.hasOwnProperty("pngPath")&&(obj.pngPath=ApiClient.convertToType(data.pngPath,"String")),data.hasOwnProperty("pngUrl")&&(obj.pngUrl=ApiClient.convertToType(data.pngUrl,"String")),data.hasOwnProperty("popUp")&&(obj.popUp=ApiClient.convertToType(data.popUp,"Boolean")),data.hasOwnProperty("productUrl")&&(obj.productUrl=ApiClient.convertToType(data.productUrl,"String")),data.hasOwnProperty("question")&&(obj.question=ApiClient.convertToType(data.question,"String")),data.hasOwnProperty("reminderEndTime")&&(obj.reminderEndTime=ApiClient.convertToType(data.reminderEndTime,"String")),data.hasOwnProperty("reminderFrequency")&&(obj.reminderFrequency=ApiClient.convertToType(data.reminderFrequency,"Number")),data.hasOwnProperty("reminderSound")&&(obj.reminderSound=ApiClient.convertToType(data.reminderSound,"String")),data.hasOwnProperty("reminderStartTime")&&(obj.reminderStartTime=ApiClient.convertToType(data.reminderStartTime,"String")),data.hasOwnProperty("reminderTime")&&(obj.reminderTime=ApiClient.convertToType(data.reminderTime,"String")),data.hasOwnProperty("secondMostCommonValue")&&(obj.secondMostCommonValue=ApiClient.convertToType(data.secondMostCommonValue,"Number")),data.hasOwnProperty("secondToLastValue")&&(obj.secondToLastValue=ApiClient.convertToType(data.secondToLastValue,"Number")),data.hasOwnProperty("sms")&&(obj.sms=ApiClient.convertToType(data.sms,"Boolean")),data.hasOwnProperty("svgUrl")&&(obj.svgUrl=ApiClient.convertToType(data.svgUrl,"String")),data.hasOwnProperty("thirdMostCommonValue")&&(obj.thirdMostCommonValue=ApiClient.convertToType(data.thirdMostCommonValue,"Number")),data.hasOwnProperty("thirdToLastValue")&&(obj.thirdToLastValue=ApiClient.convertToType(data.thirdToLastValue,"Number")),data.hasOwnProperty("title")&&(obj.title=ApiClient.convertToType(data.title,"String")),data.hasOwnProperty("total")&&(obj.total=ApiClient.convertToType(data.total,"Number")),data.hasOwnProperty("trackAllActions")&&(obj.trackAllActions=ApiClient.convertToType(data.trackAllActions,[TrackingReminderNotificationTrackAllAction])),data.hasOwnProperty("trackingReminderId")&&(obj.trackingReminderId=ApiClient.convertToType(data.trackingReminderId,"Number")),data.hasOwnProperty("trackingReminderImageUrl")&&(obj.trackingReminderImageUrl=ApiClient.convertToType(data.trackingReminderImageUrl,"String")),data.hasOwnProperty("trackingReminderNotificationId")&&(obj.trackingReminderNotificationId=ApiClient.convertToType(data.trackingReminderNotificationId,"Number")),data.hasOwnProperty("trackingReminderNotificationTime")&&(obj.trackingReminderNotificationTime=ApiClient.convertToType(data.trackingReminderNotificationTime,"String")),data.hasOwnProperty("trackingReminderNotificationTimeEpoch")&&(obj.trackingReminderNotificationTimeEpoch=ApiClient.convertToType(data.trackingReminderNotificationTimeEpoch,"Number")),data.hasOwnProperty("trackingReminderNotificationTimeLocal")&&(obj.trackingReminderNotificationTimeLocal=ApiClient.convertToType(data.trackingReminderNotificationTimeLocal,"String")),data.hasOwnProperty("trackingReminderNotificationTimeLocalHumanString")&&(obj.trackingReminderNotificationTimeLocalHumanString=ApiClient.convertToType(data.trackingReminderNotificationTimeLocalHumanString,"String")),data.hasOwnProperty("updatedAt")&&(obj.updatedAt=ApiClient.convertToType(data.updatedAt,"String")),data.hasOwnProperty("userId")&&(obj.userId=ApiClient.convertToType(data.userId,"Number")),data.hasOwnProperty("userVariableUnitAbbreviatedName")&&(obj.userVariableUnitAbbreviatedName=ApiClient.convertToType(data.userVariableUnitAbbreviatedName,"String")),data.hasOwnProperty("userVariableUnitCategoryId")&&(obj.userVariableUnitCategoryId=ApiClient.convertToType(data.userVariableUnitCategoryId,"Number")),data.hasOwnProperty("userVariableUnitCategoryName")&&(obj.userVariableUnitCategoryName=ApiClient.convertToType(data.userVariableUnitCategoryName,"String")),data.hasOwnProperty("userVariableUnitId")&&(obj.userVariableUnitId=ApiClient.convertToType(data.userVariableUnitId,"Number")),data.hasOwnProperty("userVariableUnitName")&&(obj.userVariableUnitName=ApiClient.convertToType(data.userVariableUnitName,"String")),data.hasOwnProperty("userVariableVariableCategoryId")&&(obj.userVariableVariableCategoryId=ApiClient.convertToType(data.userVariableVariableCategoryId,"Number")),data.hasOwnProperty("userVariableVariableCategoryName")&&(obj.userVariableVariableCategoryName=ApiClient.convertToType(data.userVariableVariableCategoryName,"String")),data.hasOwnProperty("valence")&&(obj.valence=ApiClient.convertToType(data.valence,"String")),data.hasOwnProperty("variableCategoryId")&&(obj.variableCategoryId=ApiClient.convertToType(data.variableCategoryId,"Number")),data.hasOwnProperty("variableCategoryImageUrl")&&(obj.variableCategoryImageUrl=ApiClient.convertToType(data.variableCategoryImageUrl,"String")),data.hasOwnProperty("variableCategoryName")&&(obj.variableCategoryName=ApiClient.convertToType(data.variableCategoryName,"String")),data.hasOwnProperty("variableId")&&(obj.variableId=ApiClient.convertToType(data.variableId,"Number")),data.hasOwnProperty("variableImageUrl")&&(obj.variableImageUrl=ApiClient.convertToType(data.variableImageUrl,"String")),data.hasOwnProperty("variableName")&&(obj.variableName=ApiClient.convertToType(data.variableName,"String"))),obj},exports.prototype.actionArray=void 0,exports.prototype.availableUnits=void 0,exports.prototype.clientId=void 0,exports.prototype.combinationOperation=void 0,exports.prototype.createdAt=void 0,exports.prototype.displayName=void 0,exports.prototype.modifiedValue=void 0,exports.prototype.unitAbbreviatedName=void 0,exports.prototype.unitCategoryId=void 0,exports.prototype.unitCategoryName=void 0,exports.prototype.unitId=void 0,exports.prototype.unitName=void 0,exports.prototype.defaultValue=void 0,exports.prototype.description=void 0,exports.prototype.email=void 0,exports.prototype.fillingValue=void 0,exports.prototype.iconIcon=void 0,exports.prototype.id=void 0,exports.prototype.imageUrl=void 0,exports.prototype.inputType=void 0,exports.prototype.ionIcon=void 0,exports.prototype.lastValue=void 0,exports.prototype.manualTracking=void 0,exports.prototype.maximumAllowedValue=void 0,exports.prototype.minimumAllowedValue=void 0,exports.prototype.mostCommonValue=void 0,exports.prototype.notificationBar=void 0,exports.prototype.notifiedAt=void 0,exports.prototype.numberOfUniqueValues=void 0,exports.prototype.outcome=void 0,exports.prototype.pngPath=void 0,exports.prototype.pngUrl=void 0,exports.prototype.popUp=void 0,exports.prototype.productUrl=void 0,exports.prototype.question=void 0,exports.prototype.reminderEndTime=void 0,exports.prototype.reminderFrequency=void 0,exports.prototype.reminderSound=void 0,exports.prototype.reminderStartTime=void 0,exports.prototype.reminderTime=void 0,exports.prototype.secondMostCommonValue=void 0,exports.prototype.secondToLastValue=void 0,exports.prototype.sms=void 0,exports.prototype.svgUrl=void 0,exports.prototype.thirdMostCommonValue=void 0,exports.prototype.thirdToLastValue=void 0,exports.prototype.title=void 0,exports.prototype.total=void 0,exports.prototype.trackAllActions=void 0,exports.prototype.trackingReminderId=void 0,exports.prototype.trackingReminderImageUrl=void 0,exports.prototype.trackingReminderNotificationId=void 0,exports.prototype.trackingReminderNotificationTime=void 0,exports.prototype.trackingReminderNotificationTimeEpoch=void 0,exports.prototype.trackingReminderNotificationTimeLocal=void 0,exports.prototype.trackingReminderNotificationTimeLocalHumanString=void 0,exports.prototype.updatedAt=void 0,exports.prototype.userId=void 0,exports.prototype.userVariableUnitAbbreviatedName=void 0,exports.prototype.userVariableUnitCategoryId=void 0,exports.prototype.userVariableUnitCategoryName=void 0,exports.prototype.userVariableUnitId=void 0,exports.prototype.userVariableUnitName=void 0,exports.prototype.userVariableVariableCategoryId=void 0,exports.prototype.userVariableVariableCategoryName=void 0,exports.prototype.valence=void 0,exports.prototype.variableCategoryId=void 0,exports.prototype.variableCategoryImageUrl=void 0,exports.prototype.variableCategoryName=void 0,exports.prototype.variableId=void 0,exports.prototype.variableImageUrl=void 0,exports.prototype.variableName=void 0,exports.CombinationOperationEnum={MEAN:"MEAN",SUM:"SUM"},exports})},{"../ApiClient":9,"./TrackingReminderNotificationAction":64,"./TrackingReminderNotificationTrackAllAction":66,"./Unit":67}],64:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.TrackingReminderNotificationAction=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(action,callback,modifiedValue,title){var _this=this;_this.action=action,_this.callback=callback,_this.modifiedValue=modifiedValue,_this.title=title};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("action")&&(obj.action=ApiClient.convertToType(data.action,"String")),data.hasOwnProperty("callback")&&(obj.callback=ApiClient.convertToType(data.callback,"String")),data.hasOwnProperty("modifiedValue")&&(obj.modifiedValue=ApiClient.convertToType(data.modifiedValue,"Number")),data.hasOwnProperty("title")&&(obj.title=ApiClient.convertToType(data.title,"String")),data.hasOwnProperty("longTitle")&&(obj.longTitle=ApiClient.convertToType(data.longTitle,"String")),data.hasOwnProperty("shortTitle")&&(obj.shortTitle=ApiClient.convertToType(data.shortTitle,"String"))),obj},exports.prototype.action=void 0,exports.prototype.callback=void 0,exports.prototype.modifiedValue=void 0,exports.prototype.title=void 0,exports.prototype.longTitle=void 0,exports.prototype.shortTitle=void 0,exports})},{"../ApiClient":9}],65:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.TrackingReminderNotificationPost=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(action,id){var _this=this;_this.action=action,_this.id=id};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("action")&&(obj.action=ApiClient.convertToType(data.action,"String")),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("modifiedValue")&&(obj.modifiedValue=ApiClient.convertToType(data.modifiedValue,"Number"))),obj},exports.prototype.action=void 0,exports.prototype.id=void 0,exports.prototype.modifiedValue=void 0,exports.ActionEnum={skip:"skip",snooze:"snooze",track:"track"},exports})},{"../ApiClient":9}],66:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.TrackingReminderNotificationTrackAllAction=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(action,callback,modifiedValue,title){var _this=this;_this.action=action,_this.callback=callback,_this.modifiedValue=modifiedValue,_this.title=title};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("action")&&(obj.action=ApiClient.convertToType(data.action,"String")),data.hasOwnProperty("callback")&&(obj.callback=ApiClient.convertToType(data.callback,"String")),data.hasOwnProperty("modifiedValue")&&(obj.modifiedValue=ApiClient.convertToType(data.modifiedValue,"Number")),data.hasOwnProperty("title")&&(obj.title=ApiClient.convertToType(data.title,"String"))),obj},exports.prototype.action=void 0,exports.prototype.callback=void 0,exports.prototype.modifiedValue=void 0,exports.prototype.title=void 0,exports})},{"../ApiClient":9}],67:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./ConversionStep"),require("./UnitCategory")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Unit=factory(root.Quantimodo.ApiClient,root.Quantimodo.ConversionStep,root.Quantimodo.UnitCategory))}(this,function(ApiClient,ConversionStep,UnitCategory){"use strict";var exports=function(abbreviatedName,category,conversionSteps,maximumValue,name,unitCategory){var _this=this;_this.abbreviatedName=abbreviatedName,_this.category=category,_this.conversionSteps=conversionSteps,_this.maximumValue=maximumValue,_this.name=name,_this.unitCategory=unitCategory};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("abbreviatedName")&&(obj.abbreviatedName=ApiClient.convertToType(data.abbreviatedName,"String")),data.hasOwnProperty("advanced")&&(obj.advanced=ApiClient.convertToType(data.advanced,"Number")),data.hasOwnProperty("category")&&(obj.category=ApiClient.convertToType(data.category,"String")),data.hasOwnProperty("categoryId")&&(obj.categoryId=ApiClient.convertToType(data.categoryId,"Number")),data.hasOwnProperty("categoryName")&&(obj.categoryName=ApiClient.convertToType(data.categoryName,"String")),data.hasOwnProperty("conversionSteps")&&(obj.conversionSteps=ApiClient.convertToType(data.conversionSteps,[ConversionStep])),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("manualTracking")&&(obj.manualTracking=ApiClient.convertToType(data.manualTracking,"Number")),data.hasOwnProperty("maximumAllowedValue")&&(obj.maximumAllowedValue=ApiClient.convertToType(data.maximumAllowedValue,"Number")),data.hasOwnProperty("maximumValue")&&(obj.maximumValue=ApiClient.convertToType(data.maximumValue,"Number")),data.hasOwnProperty("minimumAllowedValue")&&(obj.minimumAllowedValue=ApiClient.convertToType(data.minimumAllowedValue,"Number")),data.hasOwnProperty("minimumValue")&&(obj.minimumValue=ApiClient.convertToType(data.minimumValue,"Number")),data.hasOwnProperty("name")&&(obj.name=ApiClient.convertToType(data.name,"String")),data.hasOwnProperty("unitCategory")&&(obj.unitCategory=UnitCategory.constructFromObject(data.unitCategory))),obj},exports.prototype.abbreviatedName=void 0,exports.prototype.advanced=void 0,exports.prototype.category=void 0,exports.prototype.categoryId=void 0,exports.prototype.categoryName=void 0,exports.prototype.conversionSteps=void 0,exports.prototype.id=void 0,exports.prototype.manualTracking=void 0,exports.prototype.maximumAllowedValue=void 0,exports.prototype.maximumValue=void 0,exports.prototype.minimumAllowedValue=void 0,exports.prototype.minimumValue=void 0,exports.prototype.name=void 0,exports.prototype.unitCategory=void 0,exports.CategoryEnum={Distance:"Distance",Duration:"Duration",Energy:"Energy",Frequency:"Frequency",Miscellany:"Miscellany",Pressure:"Pressure",Proportion:"Proportion",Rating:"Rating",Temperature:"Temperature",Volume:"Volume",Weight:"Weight",Count:"Count"},exports})},{"../ApiClient":9,"./ConversionStep":28,"./UnitCategory":68}],68:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.UnitCategory=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(name){this.name=name};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("name")&&(obj.name=ApiClient.convertToType(data.name,"String")),data.hasOwnProperty("standardUnitAbbreviatedName")&&(obj.standardUnitAbbreviatedName=ApiClient.convertToType(data.standardUnitAbbreviatedName,"String"))),obj},exports.prototype.id=void 0,exports.prototype.name=void 0,exports.prototype.standardUnitAbbreviatedName=void 0,exports})},{"../ApiClient":9}],69:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.User=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(accessToken,administrator,displayName,email,id,loginName){var _this=this;_this.accessToken=accessToken,_this.administrator=administrator,_this.displayName=displayName,_this.email=email,_this.id=id,_this.loginName=loginName};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("accessToken")&&(obj.accessToken=ApiClient.convertToType(data.accessToken,"String")),data.hasOwnProperty("accessTokenExpires")&&(obj.accessTokenExpires=ApiClient.convertToType(data.accessTokenExpires,"String")),data.hasOwnProperty("accessTokenExpiresAtMilliseconds")&&(obj.accessTokenExpiresAtMilliseconds=ApiClient.convertToType(data.accessTokenExpiresAtMilliseconds,"Number")),data.hasOwnProperty("administrator")&&(obj.administrator=ApiClient.convertToType(data.administrator,"Boolean")),data.hasOwnProperty("avatar")&&(obj.avatar=ApiClient.convertToType(data.avatar,"String")),data.hasOwnProperty("avatarImage")&&(obj.avatarImage=ApiClient.convertToType(data.avatarImage,"String")),data.hasOwnProperty("capabilities")&&(obj.capabilities=ApiClient.convertToType(data.capabilities,"String")),data.hasOwnProperty("clientId")&&(obj.clientId=ApiClient.convertToType(data.clientId,"String")),data.hasOwnProperty("clientUserId")&&(obj.clientUserId=ApiClient.convertToType(data.clientUserId,"String")),data.hasOwnProperty("combineNotifications")&&(obj.combineNotifications=ApiClient.convertToType(data.combineNotifications,"Boolean")),data.hasOwnProperty("displayName")&&(obj.displayName=ApiClient.convertToType(data.displayName,"String")),data.hasOwnProperty("earliestReminderTime")&&(obj.earliestReminderTime=ApiClient.convertToType(data.earliestReminderTime,"String")),data.hasOwnProperty("email")&&(obj.email=ApiClient.convertToType(data.email,"String")),data.hasOwnProperty("firstName")&&(obj.firstName=ApiClient.convertToType(data.firstName,"String")),data.hasOwnProperty("getPreviewBuilds")&&(obj.getPreviewBuilds=ApiClient.convertToType(data.getPreviewBuilds,"Boolean")),data.hasOwnProperty("hasAndroidApp")&&(obj.hasAndroidApp=ApiClient.convertToType(data.hasAndroidApp,"Boolean")),data.hasOwnProperty("hasChromeExtension")&&(obj.hasChromeExtension=ApiClient.convertToType(data.hasChromeExtension,"Boolean")),data.hasOwnProperty("hasIosApp")&&(obj.hasIosApp=ApiClient.convertToType(data.hasIosApp,"Boolean")),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("lastFour")&&(obj.lastFour=ApiClient.convertToType(data.lastFour,"String")),data.hasOwnProperty("lastName")&&(obj.lastName=ApiClient.convertToType(data.lastName,"String")),data.hasOwnProperty("lastSmsTrackingReminderNotificationId")&&(obj.lastSmsTrackingReminderNotificationId=ApiClient.convertToType(data.lastSmsTrackingReminderNotificationId,"String")),data.hasOwnProperty("latestReminderTime")&&(obj.latestReminderTime=ApiClient.convertToType(data.latestReminderTime,"String")),data.hasOwnProperty("loginName")&&(obj.loginName=ApiClient.convertToType(data.loginName,"String")),data.hasOwnProperty("password")&&(obj.password=ApiClient.convertToType(data.password,"String")),data.hasOwnProperty("phoneNumber")&&(obj.phoneNumber=ApiClient.convertToType(data.phoneNumber,"String")),data.hasOwnProperty("phoneVerificationCode")&&(obj.phoneVerificationCode=ApiClient.convertToType(data.phoneVerificationCode,"String")),data.hasOwnProperty("pushNotificationsEnabled")&&(obj.pushNotificationsEnabled=ApiClient.convertToType(data.pushNotificationsEnabled,"Boolean")),data.hasOwnProperty("refreshToken")&&(obj.refreshToken=ApiClient.convertToType(data.refreshToken,"String")),data.hasOwnProperty("roles")&&(obj.roles=ApiClient.convertToType(data.roles,"String")),data.hasOwnProperty("sendPredictorEmails")&&(obj.sendPredictorEmails=ApiClient.convertToType(data.sendPredictorEmails,"Boolean")),data.hasOwnProperty("sendReminderNotificationEmails")&&(obj.sendReminderNotificationEmails=ApiClient.convertToType(data.sendReminderNotificationEmails,"Boolean")),data.hasOwnProperty("shareAllData")&&(obj.shareAllData=ApiClient.convertToType(data.shareAllData,"Boolean")),data.hasOwnProperty("smsNotificationsEnabled")&&(obj.smsNotificationsEnabled=ApiClient.convertToType(data.smsNotificationsEnabled,"Boolean")),data.hasOwnProperty("stripeActive")&&(obj.stripeActive=ApiClient.convertToType(data.stripeActive,"Boolean")),data.hasOwnProperty("stripeId")&&(obj.stripeId=ApiClient.convertToType(data.stripeId,"String")),data.hasOwnProperty("stripePlan")&&(obj.stripePlan=ApiClient.convertToType(data.stripePlan,"String")),data.hasOwnProperty("stripeSubscription")&&(obj.stripeSubscription=ApiClient.convertToType(data.stripeSubscription,"String")),data.hasOwnProperty("subscriptionEndsAt")&&(obj.subscriptionEndsAt=ApiClient.convertToType(data.subscriptionEndsAt,"String")),data.hasOwnProperty("subscriptionProvider")&&(obj.subscriptionProvider=ApiClient.convertToType(data.subscriptionProvider,"String")),data.hasOwnProperty("timeZoneOffset")&&(obj.timeZoneOffset=ApiClient.convertToType(data.timeZoneOffset,"Number")),data.hasOwnProperty("trackLocation")&&(obj.trackLocation=ApiClient.convertToType(data.trackLocation,"Boolean")),data.hasOwnProperty("userRegistered")&&(obj.userRegistered=ApiClient.convertToType(data.userRegistered,"String")),data.hasOwnProperty("userUrl")&&(obj.userUrl=ApiClient.convertToType(data.userUrl,"String"))),obj},exports.prototype.accessToken=void 0,exports.prototype.accessTokenExpires=void 0,exports.prototype.accessTokenExpiresAtMilliseconds=void 0,exports.prototype.administrator=void 0,exports.prototype.avatar=void 0,exports.prototype.avatarImage=void 0,exports.prototype.capabilities=void 0,exports.prototype.clientId=void 0,exports.prototype.clientUserId=void 0,exports.prototype.combineNotifications=void 0,exports.prototype.displayName=void 0,exports.prototype.earliestReminderTime=void 0,exports.prototype.email=void 0,exports.prototype.firstName=void 0,exports.prototype.getPreviewBuilds=void 0,exports.prototype.hasAndroidApp=void 0,exports.prototype.hasChromeExtension=void 0,exports.prototype.hasIosApp=void 0,exports.prototype.id=void 0,exports.prototype.lastFour=void 0,exports.prototype.lastName=void 0,exports.prototype.lastSmsTrackingReminderNotificationId=void 0,exports.prototype.latestReminderTime=void 0,exports.prototype.loginName=void 0,exports.prototype.password=void 0,exports.prototype.phoneNumber=void 0,exports.prototype.phoneVerificationCode=void 0,exports.prototype.pushNotificationsEnabled=void 0,exports.prototype.refreshToken=void 0,exports.prototype.roles=void 0,exports.prototype.sendPredictorEmails=void 0,exports.prototype.sendReminderNotificationEmails=void 0,exports.prototype.shareAllData=void 0,exports.prototype.smsNotificationsEnabled=void 0,exports.prototype.stripeActive=void 0,exports.prototype.stripeId=void 0,exports.prototype.stripePlan=void 0,exports.prototype.stripeSubscription=void 0,exports.prototype.subscriptionEndsAt=void 0,exports.prototype.subscriptionProvider=void 0,exports.prototype.timeZoneOffset=void 0,exports.prototype.trackLocation=void 0,exports.prototype.userRegistered=void 0,exports.prototype.userUrl=void 0,exports})},{"../ApiClient":9}],70:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.UserTag=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(conversionFactor,taggedVariableId,tagVariableId){var _this=this;_this.conversionFactor=conversionFactor,_this.taggedVariableId=taggedVariableId,_this.tagVariableId=tagVariableId};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("conversionFactor")&&(obj.conversionFactor=ApiClient.convertToType(data.conversionFactor,"Number")),data.hasOwnProperty("taggedVariableId")&&(obj.taggedVariableId=ApiClient.convertToType(data.taggedVariableId,"Number")),data.hasOwnProperty("tagVariableId")&&(obj.tagVariableId=ApiClient.convertToType(data.tagVariableId,"Number"))),obj},exports.prototype.conversionFactor=void 0,exports.prototype.taggedVariableId=void 0,exports.prototype.tagVariableId=void 0,exports})},{"../ApiClient":9}],71:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.UserVariableDelete=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(variableId){this.variableId=variableId};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("variableId")&&(obj.variableId=ApiClient.convertToType(data.variableId,"Number"))),obj},exports.prototype.variableId=void 0,exports})},{"../ApiClient":9}],72:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient"),require("./DataSource"),require("./TrackingReminderNotificationAction"),require("./Unit"),require("./Variable"),require("./VariableCategory")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Variable=factory(root.Quantimodo.ApiClient,root.Quantimodo.DataSource,root.Quantimodo.TrackingReminderNotificationAction,root.Quantimodo.Unit,root.Quantimodo.Variable,root.Quantimodo.VariableCategory))}(this,function(ApiClient,DataSource,TrackingReminderNotificationAction,Unit,Variable,VariableCategory){"use strict";var exports=function(id,name,userId,variableId){var _this=this;_this.id=id,_this.name=name,_this.userId=userId,_this.variableId=variableId};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("actionArray")&&(obj.actionArray=ApiClient.convertToType(data.actionArray,[TrackingReminderNotificationAction])),data.hasOwnProperty("alias")&&(obj.alias=ApiClient.convertToType(data.alias,"String")),data.hasOwnProperty("availableUnits")&&(obj.availableUnits=ApiClient.convertToType(data.availableUnits,[Unit])),data.hasOwnProperty("causeOnly")&&(obj.causeOnly=ApiClient.convertToType(data.causeOnly,"Boolean")),data.hasOwnProperty("charts")&&(obj.charts=ApiClient.convertToType(data.charts,Object)),data.hasOwnProperty("chartsLinkDynamic")&&(obj.chartsLinkDynamic=ApiClient.convertToType(data.chartsLinkDynamic,"String")),data.hasOwnProperty("chartsLinkEmail")&&(obj.chartsLinkEmail=ApiClient.convertToType(data.chartsLinkEmail,"String")),data.hasOwnProperty("chartsLinkFacebook")&&(obj.chartsLinkFacebook=ApiClient.convertToType(data.chartsLinkFacebook,"String")),data.hasOwnProperty("chartsLinkGoogle")&&(obj.chartsLinkGoogle=ApiClient.convertToType(data.chartsLinkGoogle,"String")),data.hasOwnProperty("chartsLinkStatic")&&(obj.chartsLinkStatic=ApiClient.convertToType(data.chartsLinkStatic,"String")),data.hasOwnProperty("chartsLinkTwitter")&&(obj.chartsLinkTwitter=ApiClient.convertToType(data.chartsLinkTwitter,"String")),data.hasOwnProperty("childCommonTagVariables")&&(obj.childCommonTagVariables=ApiClient.convertToType(data.childCommonTagVariables,[Variable])),data.hasOwnProperty("childUserTagVariables")&&(obj.childUserTagVariables=ApiClient.convertToType(data.childUserTagVariables,[Variable])),data.hasOwnProperty("clientId")&&(obj.clientId=ApiClient.convertToType(data.clientId,"String")),data.hasOwnProperty("combinationOperation")&&(obj.combinationOperation=ApiClient.convertToType(data.combinationOperation,"String")),data.hasOwnProperty("commonAlias")&&(obj.commonAlias=ApiClient.convertToType(data.commonAlias,"String")),data.hasOwnProperty("commonTaggedVariables")&&(obj.commonTaggedVariables=ApiClient.convertToType(data.commonTaggedVariables,[Variable])),data.hasOwnProperty("commonTagVariables")&&(obj.commonTagVariables=ApiClient.convertToType(data.commonTagVariables,[Variable])),data.hasOwnProperty("commonVariableMostCommonConnectorId")&&(obj.commonVariableMostCommonConnectorId=ApiClient.convertToType(data.commonVariableMostCommonConnectorId,"Number")),data.hasOwnProperty("commonVariableUpdatedAt")&&(obj.commonVariableUpdatedAt=ApiClient.convertToType(data.commonVariableUpdatedAt,"String")),data.hasOwnProperty("createdAt")&&(obj.createdAt=ApiClient.convertToType(data.createdAt,"String")),data.hasOwnProperty("unitAbbreviatedName")&&(obj.unitAbbreviatedName=ApiClient.convertToType(data.unitAbbreviatedName,"String")),data.hasOwnProperty("unitCategoryId")&&(obj.unitCategoryId=ApiClient.convertToType(data.unitCategoryId,"Number")),data.hasOwnProperty("unitCategoryName")&&(obj.unitCategoryName=ApiClient.convertToType(data.unitCategoryName,"String")),data.hasOwnProperty("unitId")&&(obj.unitId=ApiClient.convertToType(data.unitId,"Number")),data.hasOwnProperty("unitName")&&(obj.unitName=ApiClient.convertToType(data.unitName,"String")),data.hasOwnProperty("description")&&(obj.description=ApiClient.convertToType(data.description,"String")),data.hasOwnProperty("displayName")&&(obj.displayName=ApiClient.convertToType(data.displayName,"String")),data.hasOwnProperty("durationOfAction")&&(obj.durationOfAction=ApiClient.convertToType(data.durationOfAction,"Number")),data.hasOwnProperty("durationOfActionInHours")&&(obj.durationOfActionInHours=ApiClient.convertToType(data.durationOfActionInHours,"Number")),data.hasOwnProperty("earliestFillingTime")&&(obj.earliestFillingTime=ApiClient.convertToType(data.earliestFillingTime,"Number")),data.hasOwnProperty("earliestMeasurementTime")&&(obj.earliestMeasurementTime=ApiClient.convertToType(data.earliestMeasurementTime,"Number")),data.hasOwnProperty("earliestSourceTime")&&(obj.earliestSourceTime=ApiClient.convertToType(data.earliestSourceTime,"Number")),data.hasOwnProperty("errorMessage")&&(obj.errorMessage=ApiClient.convertToType(data.errorMessage,"String")),data.hasOwnProperty("experimentEndTime")&&(obj.experimentEndTime=ApiClient.convertToType(data.experimentEndTime,"String")),data.hasOwnProperty("experimentEndTimeSeconds")&&(obj.experimentEndTimeSeconds=ApiClient.convertToType(data.experimentEndTimeSeconds,"Number")),data.hasOwnProperty("experimentEndTimeString")&&(obj.experimentEndTimeString=ApiClient.convertToType(data.experimentEndTimeString,"String")),data.hasOwnProperty("experimentStartTime")&&(obj.experimentStartTime=ApiClient.convertToType(data.experimentStartTime,"String")),data.hasOwnProperty("experimentStartTimeSeconds")&&(obj.experimentStartTimeSeconds=ApiClient.convertToType(data.experimentStartTimeSeconds,"Number")),data.hasOwnProperty("experimentStartTimeString")&&(obj.experimentStartTimeString=ApiClient.convertToType(data.experimentStartTimeString,"String")),data.hasOwnProperty("fillingType")&&(obj.fillingType=ApiClient.convertToType(data.fillingType,"String")),data.hasOwnProperty("fillingValue")&&(obj.fillingValue=ApiClient.convertToType(data.fillingValue,"Number")),data.hasOwnProperty("iconIcon")&&(obj.iconIcon=ApiClient.convertToType(data.iconIcon,"String")),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("imageUrl")&&(obj.imageUrl=ApiClient.convertToType(data.imageUrl,"String")),data.hasOwnProperty("informationalUrl")&&(obj.informationalUrl=ApiClient.convertToType(data.informationalUrl,"String")),data.hasOwnProperty("ingredientOfCommonTagVariables")&&(obj.ingredientOfCommonTagVariables=ApiClient.convertToType(data.ingredientOfCommonTagVariables,[Variable])),data.hasOwnProperty("ingredientCommonTagVariables")&&(obj.ingredientCommonTagVariables=ApiClient.convertToType(data.ingredientCommonTagVariables,[Variable])),data.hasOwnProperty("ingredientOfUserTagVariables")&&(obj.ingredientOfUserTagVariables=ApiClient.convertToType(data.ingredientOfUserTagVariables,[Variable])),data.hasOwnProperty("ingredientUserTagVariables")&&(obj.ingredientUserTagVariables=ApiClient.convertToType(data.ingredientUserTagVariables,[Variable])),data.hasOwnProperty("inputType")&&(obj.inputType=ApiClient.convertToType(data.inputType,"String")),data.hasOwnProperty("ionIcon")&&(obj.ionIcon=ApiClient.convertToType(data.ionIcon,"String")),data.hasOwnProperty("joinedCommonTagVariables")&&(obj.joinedCommonTagVariables=ApiClient.convertToType(data.joinedCommonTagVariables,[Variable])),data.hasOwnProperty("joinedUserTagVariables")&&(obj.joinedUserTagVariables=ApiClient.convertToType(data.joinedUserTagVariables,[Variable])),data.hasOwnProperty("joinWith")&&(obj.joinWith=ApiClient.convertToType(data.joinWith,"Number")),data.hasOwnProperty("kurtosis")&&(obj.kurtosis=ApiClient.convertToType(data.kurtosis,"Number")),data.hasOwnProperty("lastOriginalUnitId")&&(obj.lastOriginalUnitId=ApiClient.convertToType(data.lastOriginalUnitId,"Number")),data.hasOwnProperty("lastOriginalValue")&&(obj.lastOriginalValue=ApiClient.convertToType(data.lastOriginalValue,"Number")),data.hasOwnProperty("lastProcessedDailyValue")&&(obj.lastProcessedDailyValue=ApiClient.convertToType(data.lastProcessedDailyValue,"Number")),data.hasOwnProperty("lastSuccessfulUpdateTime")&&(obj.lastSuccessfulUpdateTime=ApiClient.convertToType(data.lastSuccessfulUpdateTime,"String")),data.hasOwnProperty("lastUnitId")&&(obj.lastUnitId=ApiClient.convertToType(data.lastUnitId,"Number")),data.hasOwnProperty("lastValue")&&(obj.lastValue=ApiClient.convertToType(data.lastValue,"Number")),data.hasOwnProperty("latestFillingTime")&&(obj.latestFillingTime=ApiClient.convertToType(data.latestFillingTime,"Number")),data.hasOwnProperty("latestMeasurementTime")&&(obj.latestMeasurementTime=ApiClient.convertToType(data.latestMeasurementTime,"Number")),data.hasOwnProperty("latestSourceTime")&&(obj.latestSourceTime=ApiClient.convertToType(data.latestSourceTime,"Number")),data.hasOwnProperty("latestUserMeasurementTime")&&(obj.latestUserMeasurementTime=ApiClient.convertToType(data.latestUserMeasurementTime,"Number")),data.hasOwnProperty("latitude")&&(obj.latitude=ApiClient.convertToType(data.latitude,"Number")),data.hasOwnProperty("location")&&(obj.location=ApiClient.convertToType(data.location,"String")),data.hasOwnProperty("longitude")&&(obj.longitude=ApiClient.convertToType(data.longitude,"Number")),data.hasOwnProperty("manualTracking")&&(obj.manualTracking=ApiClient.convertToType(data.manualTracking,"Boolean")),data.hasOwnProperty("maximumAllowedValue")&&(obj.maximumAllowedValue=ApiClient.convertToType(data.maximumAllowedValue,"Number")),data.hasOwnProperty("maximumRecordedDailyValue")&&(obj.maximumRecordedDailyValue=ApiClient.convertToType(data.maximumRecordedDailyValue,"Number")),data.hasOwnProperty("maximumRecordedValue")&&(obj.maximumRecordedValue=ApiClient.convertToType(data.maximumRecordedValue,"Number")),data.hasOwnProperty("mean")&&(obj.mean=ApiClient.convertToType(data.mean,"Number")),data.hasOwnProperty("measurementsAtLastAnalysis")&&(obj.measurementsAtLastAnalysis=ApiClient.convertToType(data.measurementsAtLastAnalysis,"Number")),data.hasOwnProperty("median")&&(obj.median=ApiClient.convertToType(data.median,"Number")),data.hasOwnProperty("minimumAllowedValue")&&(obj.minimumAllowedValue=ApiClient.convertToType(data.minimumAllowedValue,"Number")),data.hasOwnProperty("minimumRecordedValue")&&(obj.minimumRecordedValue=ApiClient.convertToType(data.minimumRecordedValue,"Number")),data.hasOwnProperty("mostCommonConnectorId")&&(obj.mostCommonConnectorId=ApiClient.convertToType(data.mostCommonConnectorId,"Number")),data.hasOwnProperty("mostCommonOriginalUnitId")&&(obj.mostCommonOriginalUnitId=ApiClient.convertToType(data.mostCommonOriginalUnitId,"Number")),data.hasOwnProperty("mostCommonUnitId")&&(obj.mostCommonUnitId=ApiClient.convertToType(data.mostCommonUnitId,"Number")),data.hasOwnProperty("mostCommonValue")&&(obj.mostCommonValue=ApiClient.convertToType(data.mostCommonValue,"Number")),data.hasOwnProperty("name")&&(obj.name=ApiClient.convertToType(data.name,"String")),data.hasOwnProperty("numberOfAggregateCorrelationsAsCause")&&(obj.numberOfAggregateCorrelationsAsCause=ApiClient.convertToType(data.numberOfAggregateCorrelationsAsCause,"Number")),data.hasOwnProperty("numberOfAggregateCorrelationsAsEffect")&&(obj.numberOfAggregateCorrelationsAsEffect=ApiClient.convertToType(data.numberOfAggregateCorrelationsAsEffect,"Number")),data.hasOwnProperty("numberOfChanges")&&(obj.numberOfChanges=ApiClient.convertToType(data.numberOfChanges,"Number")),data.hasOwnProperty("numberOfCorrelations")&&(obj.numberOfCorrelations=ApiClient.convertToType(data.numberOfCorrelations,"Number")),data.hasOwnProperty("numberOfProcessedDailyMeasurements")&&(obj.numberOfProcessedDailyMeasurements=ApiClient.convertToType(data.numberOfProcessedDailyMeasurements,"Number")),data.hasOwnProperty("numberOfRawMeasurements")&&(obj.numberOfRawMeasurements=ApiClient.convertToType(data.numberOfRawMeasurements,"Number")),data.hasOwnProperty("numberOfTrackingReminders")&&(obj.numberOfTrackingReminders=ApiClient.convertToType(data.numberOfTrackingReminders,"Number")),data.hasOwnProperty("numberOfUniqueDailyValues")&&(obj.numberOfUniqueDailyValues=ApiClient.convertToType(data.numberOfUniqueDailyValues,"Number")),data.hasOwnProperty("numberOfUniqueValues")&&(obj.numberOfUniqueValues=ApiClient.convertToType(data.numberOfUniqueValues,"Number")),data.hasOwnProperty("numberOfUserCorrelationsAsCause")&&(obj.numberOfUserCorrelationsAsCause=ApiClient.convertToType(data.numberOfUserCorrelationsAsCause,"Number")),data.hasOwnProperty("numberOfUserCorrelationsAsEffect")&&(obj.numberOfUserCorrelationsAsEffect=ApiClient.convertToType(data.numberOfUserCorrelationsAsEffect,"Number")),data.hasOwnProperty("numberOfUserVariables")&&(obj.numberOfUserVariables=ApiClient.convertToType(data.numberOfUserVariables,"Number")),data.hasOwnProperty("onsetDelay")&&(obj.onsetDelay=ApiClient.convertToType(data.onsetDelay,"Number")),data.hasOwnProperty("onsetDelayInHours")&&(obj.onsetDelayInHours=ApiClient.convertToType(data.onsetDelayInHours,"Number")),data.hasOwnProperty("outcome")&&(obj.outcome=ApiClient.convertToType(data.outcome,"Boolean")),data.hasOwnProperty("outcomeOfInterest")&&(obj.outcomeOfInterest=ApiClient.convertToType(data.outcomeOfInterest,"Number")),data.hasOwnProperty("parentCommonTagVariables")&&(obj.parentCommonTagVariables=ApiClient.convertToType(data.parentCommonTagVariables,[Variable])),data.hasOwnProperty("parentUserTagVariables")&&(obj.parentUserTagVariables=ApiClient.convertToType(data.parentUserTagVariables,[Variable])),data.hasOwnProperty("pngPath")&&(obj.pngPath=ApiClient.convertToType(data.pngPath,"String")),data.hasOwnProperty("pngUrl")&&(obj.pngUrl=ApiClient.convertToType(data.pngUrl,"String")),data.hasOwnProperty("predictorOfInterest")&&(obj.predictorOfInterest=ApiClient.convertToType(data.predictorOfInterest,"Number")),data.hasOwnProperty("price")&&(obj.price=ApiClient.convertToType(data.price,"Number")),data.hasOwnProperty("productUrl")&&(obj.productUrl=ApiClient.convertToType(data.productUrl,"String")),data.hasOwnProperty("public")&&(obj.public=ApiClient.convertToType(data.public,"Number")),data.hasOwnProperty("rawMeasurementsAtLastAnalysis")&&(obj.rawMeasurementsAtLastAnalysis=ApiClient.convertToType(data.rawMeasurementsAtLastAnalysis,"Number")),data.hasOwnProperty("secondMostCommonValue")&&(obj.secondMostCommonValue=ApiClient.convertToType(data.secondMostCommonValue,"Number")),data.hasOwnProperty("secondToLastValue")&&(obj.secondToLastValue=ApiClient.convertToType(data.secondToLastValue,"Number")),data.hasOwnProperty("shareUserMeasurements")&&(obj.shareUserMeasurements=ApiClient.convertToType(data.shareUserMeasurements,"Boolean")),data.hasOwnProperty("skewness")&&(obj.skewness=ApiClient.convertToType(data.skewness,"Number")),data.hasOwnProperty("sources")&&(obj.sources=ApiClient.convertToType(data.sources,"String")),data.hasOwnProperty("standardDeviation")&&(obj.standardDeviation=ApiClient.convertToType(data.standardDeviation,"Number")),data.hasOwnProperty("status")&&(obj.status=ApiClient.convertToType(data.status,"String")),data.hasOwnProperty("subtitle")&&(obj.subtitle=ApiClient.convertToType(data.subtitle,"String")),data.hasOwnProperty("svgUrl")&&(obj.svgUrl=ApiClient.convertToType(data.svgUrl,"String")),data.hasOwnProperty("thirdMostCommonValue")&&(obj.thirdMostCommonValue=ApiClient.convertToType(data.thirdMostCommonValue,"Number")),data.hasOwnProperty("thirdToLastValue")&&(obj.thirdToLastValue=ApiClient.convertToType(data.thirdToLastValue,"Number")),data.hasOwnProperty("unit")&&(obj.unit=Unit.constructFromObject(data.unit)),data.hasOwnProperty("upc")&&(obj.upc=ApiClient.convertToType(data.upc,"String")),data.hasOwnProperty("updated")&&(obj.updated=ApiClient.convertToType(data.updated,"Number")),data.hasOwnProperty("updatedAt")&&(obj.updatedAt=ApiClient.convertToType(data.updatedAt,"String")),data.hasOwnProperty("updatedTime")&&(obj.updatedTime=ApiClient.convertToType(data.updatedTime,"String")),data.hasOwnProperty("userId")&&(obj.userId=ApiClient.convertToType(data.userId,"Number")),data.hasOwnProperty("userTaggedVariables")&&(obj.userTaggedVariables=ApiClient.convertToType(data.userTaggedVariables,[Variable])),data.hasOwnProperty("userTagVariables")&&(obj.userTagVariables=ApiClient.convertToType(data.userTagVariables,[Variable])),data.hasOwnProperty("userVariableUnitAbbreviatedName")&&(obj.userVariableUnitAbbreviatedName=ApiClient.convertToType(data.userVariableUnitAbbreviatedName,"String")),data.hasOwnProperty("userVariableUnitCategoryId")&&(obj.userVariableUnitCategoryId=ApiClient.convertToType(data.userVariableUnitCategoryId,"Number")),data.hasOwnProperty("userVariableUnitCategoryName")&&(obj.userVariableUnitCategoryName=ApiClient.convertToType(data.userVariableUnitCategoryName,"String")),data.hasOwnProperty("userVariableUnitId")&&(obj.userVariableUnitId=ApiClient.convertToType(data.userVariableUnitId,"Number")),data.hasOwnProperty("userVariableUnitName")&&(obj.userVariableUnitName=ApiClient.convertToType(data.userVariableUnitName,"String")),data.hasOwnProperty("userVariableFillingValue")&&(obj.userVariableFillingValue=ApiClient.convertToType(data.userVariableFillingValue,"Number")),data.hasOwnProperty("userVariableMostCommonConnectorId")&&(obj.userVariableMostCommonConnectorId=ApiClient.convertToType(data.userVariableMostCommonConnectorId,"Number")),data.hasOwnProperty("userVariableUpdatedAt")&&(obj.userVariableUpdatedAt=ApiClient.convertToType(data.userVariableUpdatedAt,"String")),data.hasOwnProperty("userVariableValence")&&(obj.userVariableValence=ApiClient.convertToType(data.userVariableValence,"String")),data.hasOwnProperty("userVariableVariableCategoryId")&&(obj.userVariableVariableCategoryId=ApiClient.convertToType(data.userVariableVariableCategoryId,"Number")),data.hasOwnProperty("userVariableVariableCategoryName")&&(obj.userVariableVariableCategoryName=ApiClient.convertToType(data.userVariableVariableCategoryName,"String")),data.hasOwnProperty("userVariableWikipediaTitle")&&(obj.userVariableWikipediaTitle=ApiClient.convertToType(data.userVariableWikipediaTitle,"String")),data.hasOwnProperty("variableCategory")&&(obj.variableCategory=VariableCategory.constructFromObject(data.variableCategory)),data.hasOwnProperty("dataSource")&&(obj.dataSource=DataSource.constructFromObject(data.dataSource)),data.hasOwnProperty("joinedVariables")&&(obj.joinedVariables=ApiClient.convertToType(data.joinedVariables,[Variable])),data.hasOwnProperty("lastSource")&&(obj.lastSource=ApiClient.convertToType(data.lastSource,"Number")),data.hasOwnProperty("lastUnit")&&(obj.lastUnit=ApiClient.convertToType(data.lastUnit,"String")),data.hasOwnProperty("mostCommonUnit")&&(obj.mostCommonUnit=ApiClient.convertToType(data.mostCommonUnit,"String")),data.hasOwnProperty("valence")&&(obj.valence=ApiClient.convertToType(data.valence,"String")),data.hasOwnProperty("variableCategoryId")&&(obj.variableCategoryId=ApiClient.convertToType(data.variableCategoryId,"Number")),data.hasOwnProperty("variableCategoryImageUrl")&&(obj.variableCategoryImageUrl=ApiClient.convertToType(data.variableCategoryImageUrl,"String")),data.hasOwnProperty("variableCategoryName")&&(obj.variableCategoryName=ApiClient.convertToType(data.variableCategoryName,"String")),data.hasOwnProperty("variableFillingValue")&&(obj.variableFillingValue=ApiClient.convertToType(data.variableFillingValue,"Number")),data.hasOwnProperty("variableId")&&(obj.variableId=ApiClient.convertToType(data.variableId,"Number")),data.hasOwnProperty("variableName")&&(obj.variableName=ApiClient.convertToType(data.variableName,"String")),data.hasOwnProperty("variance")&&(obj.variance=ApiClient.convertToType(data.variance,"Number")),data.hasOwnProperty("wikipediaTitle")&&(obj.wikipediaTitle=ApiClient.convertToType(data.wikipediaTitle,"String"))),obj},exports.prototype.actionArray=void 0,exports.prototype.alias=void 0,exports.prototype.availableUnits=void 0,exports.prototype.causeOnly=void 0,exports.prototype.charts=void 0,exports.prototype.chartsLinkDynamic=void 0,exports.prototype.chartsLinkEmail=void 0,exports.prototype.chartsLinkFacebook=void 0,exports.prototype.chartsLinkGoogle=void 0,exports.prototype.chartsLinkStatic=void 0,exports.prototype.chartsLinkTwitter=void 0,exports.prototype.childCommonTagVariables=void 0,exports.prototype.childUserTagVariables=void 0,exports.prototype.clientId=void 0,exports.prototype.combinationOperation=void 0,exports.prototype.commonAlias=void 0,exports.prototype.commonTaggedVariables=void 0,exports.prototype.commonTagVariables=void 0,exports.prototype.commonVariableMostCommonConnectorId=void 0,exports.prototype.commonVariableUpdatedAt=void 0,exports.prototype.createdAt=void 0,exports.prototype.unitAbbreviatedName=void 0,exports.prototype.unitCategoryId=void 0,exports.prototype.unitCategoryName=void 0,exports.prototype.unitId=void 0,exports.prototype.unitName=void 0,exports.prototype.description=void 0,exports.prototype.displayName=void 0,exports.prototype.durationOfAction=void 0,exports.prototype.durationOfActionInHours=void 0,exports.prototype.earliestFillingTime=void 0,exports.prototype.earliestMeasurementTime=void 0,exports.prototype.earliestSourceTime=void 0,exports.prototype.errorMessage=void 0,exports.prototype.experimentEndTime=void 0,exports.prototype.experimentEndTimeSeconds=void 0,exports.prototype.experimentEndTimeString=void 0,exports.prototype.experimentStartTime=void 0,exports.prototype.experimentStartTimeSeconds=void 0,exports.prototype.experimentStartTimeString=void 0,exports.prototype.fillingType=void 0,exports.prototype.fillingValue=void 0,exports.prototype.iconIcon=void 0,exports.prototype.id=void 0,exports.prototype.imageUrl=void 0,exports.prototype.informationalUrl=void 0,exports.prototype.ingredientOfCommonTagVariables=void 0,exports.prototype.ingredientCommonTagVariables=void 0,exports.prototype.ingredientOfUserTagVariables=void 0,exports.prototype.ingredientUserTagVariables=void 0,exports.prototype.inputType=void 0,exports.prototype.ionIcon=void 0,exports.prototype.joinedCommonTagVariables=void 0,exports.prototype.joinedUserTagVariables=void 0,exports.prototype.joinWith=void 0,exports.prototype.kurtosis=void 0,exports.prototype.lastOriginalUnitId=void 0,exports.prototype.lastOriginalValue=void 0,exports.prototype.lastProcessedDailyValue=void 0,exports.prototype.lastSuccessfulUpdateTime=void 0,exports.prototype.lastUnitId=void 0,exports.prototype.lastValue=void 0,exports.prototype.latestFillingTime=void 0,exports.prototype.latestMeasurementTime=void 0,exports.prototype.latestSourceTime=void 0,exports.prototype.latestUserMeasurementTime=void 0,exports.prototype.latitude=void 0,exports.prototype.location=void 0,exports.prototype.longitude=void 0,exports.prototype.manualTracking=void 0,exports.prototype.maximumAllowedValue=void 0,exports.prototype.maximumRecordedDailyValue=void 0,exports.prototype.maximumRecordedValue=void 0,exports.prototype.mean=void 0,exports.prototype.measurementsAtLastAnalysis=void 0,exports.prototype.median=void 0,exports.prototype.minimumAllowedValue=void 0,exports.prototype.minimumRecordedValue=void 0,exports.prototype.mostCommonConnectorId=void 0,exports.prototype.mostCommonOriginalUnitId=void 0,exports.prototype.mostCommonUnitId=void 0,exports.prototype.mostCommonValue=void 0,exports.prototype.name=void 0,exports.prototype.numberOfAggregateCorrelationsAsCause=void 0,exports.prototype.numberOfAggregateCorrelationsAsEffect=void 0,exports.prototype.numberOfChanges=void 0,exports.prototype.numberOfCorrelations=void 0,exports.prototype.numberOfProcessedDailyMeasurements=void 0,exports.prototype.numberOfRawMeasurements=void 0,exports.prototype.numberOfTrackingReminders=void 0,exports.prototype.numberOfUniqueDailyValues=void 0,exports.prototype.numberOfUniqueValues=void 0,exports.prototype.numberOfUserCorrelationsAsCause=void 0,exports.prototype.numberOfUserCorrelationsAsEffect=void 0,exports.prototype.numberOfUserVariables=void 0,exports.prototype.onsetDelay=void 0,exports.prototype.onsetDelayInHours=void 0,exports.prototype.outcome=void 0,exports.prototype.outcomeOfInterest=void 0,exports.prototype.parentCommonTagVariables=void 0,exports.prototype.parentUserTagVariables=void 0,exports.prototype.pngPath=void 0,exports.prototype.pngUrl=void 0,exports.prototype.predictorOfInterest=void 0,exports.prototype.price=void 0,exports.prototype.productUrl=void 0,exports.prototype.public=void 0,exports.prototype.rawMeasurementsAtLastAnalysis=void 0,exports.prototype.secondMostCommonValue=void 0,exports.prototype.secondToLastValue=void 0,exports.prototype.shareUserMeasurements=void 0,exports.prototype.skewness=void 0,exports.prototype.sources=void 0,exports.prototype.standardDeviation=void 0,exports.prototype.status=void 0,exports.prototype.subtitle=void 0,exports.prototype.svgUrl=void 0,exports.prototype.thirdMostCommonValue=void 0,exports.prototype.thirdToLastValue=void 0,exports.prototype.unit=void 0,exports.prototype.upc=void 0,exports.prototype.updated=void 0,exports.prototype.updatedAt=void 0,exports.prototype.updatedTime=void 0,exports.prototype.userId=void 0,exports.prototype.userTaggedVariables=void 0,exports.prototype.userTagVariables=void 0,exports.prototype.userVariableUnitAbbreviatedName=void 0,exports.prototype.userVariableUnitCategoryId=void 0,exports.prototype.userVariableUnitCategoryName=void 0,exports.prototype.userVariableUnitId=void 0,exports.prototype.userVariableUnitName=void 0,exports.prototype.userVariableFillingValue=void 0,exports.prototype.userVariableMostCommonConnectorId=void 0,exports.prototype.userVariableUpdatedAt=void 0,exports.prototype.userVariableValence=void 0,exports.prototype.userVariableVariableCategoryId=void 0,exports.prototype.userVariableVariableCategoryName=void 0,exports.prototype.userVariableWikipediaTitle=void 0,exports.prototype.variableCategory=void 0,exports.prototype.dataSource=void 0,exports.prototype.joinedVariables=void 0,exports.prototype.lastSource=void 0,exports.prototype.lastUnit=void 0,exports.prototype.mostCommonUnit=void 0,exports.prototype.valence=void 0,exports.prototype.variableCategoryId=void 0,exports.prototype.variableCategoryImageUrl=void 0,exports.prototype.variableCategoryName=void 0,exports.prototype.variableFillingValue=void 0,exports.prototype.variableId=void 0,exports.prototype.variableName=void 0,exports.prototype.variance=void 0,exports.prototype.wikipediaTitle=void 0,exports})},{"../ApiClient":9,"./DataSource":30,"./TrackingReminderNotificationAction":64,"./Unit":67,"./Variable":72,"./VariableCategory":73}],73:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.VariableCategory=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(name){this.name=name};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("appType")&&(obj.appType=ApiClient.convertToType(data.appType,"String")),data.hasOwnProperty("causeOnly")&&(obj.causeOnly=ApiClient.convertToType(data.causeOnly,"Boolean")),data.hasOwnProperty("combinationOperation")&&(obj.combinationOperation=ApiClient.convertToType(data.combinationOperation,"String")),data.hasOwnProperty("createdTime")&&(obj.createdTime=ApiClient.convertToType(data.createdTime,"String")),data.hasOwnProperty("unitAbbreviatedName")&&(obj.unitAbbreviatedName=ApiClient.convertToType(data.unitAbbreviatedName,"String")),data.hasOwnProperty("unitId")&&(obj.unitId=ApiClient.convertToType(data.unitId,"Number")),data.hasOwnProperty("durationOfAction")&&(obj.durationOfAction=ApiClient.convertToType(data.durationOfAction,"Number")),data.hasOwnProperty("fillingValue")&&(obj.fillingValue=ApiClient.convertToType(data.fillingValue,"Number")),data.hasOwnProperty("helpText")&&(obj.helpText=ApiClient.convertToType(data.helpText,"String")),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("imageUrl")&&(obj.imageUrl=ApiClient.convertToType(data.imageUrl,"String")),data.hasOwnProperty("ionIcon")&&(obj.ionIcon=ApiClient.convertToType(data.ionIcon,"String")),data.hasOwnProperty("manualTracking")&&(obj.manualTracking=ApiClient.convertToType(data.manualTracking,"Boolean")),data.hasOwnProperty("maximumAllowedValue")&&(obj.maximumAllowedValue=ApiClient.convertToType(data.maximumAllowedValue,"String")),data.hasOwnProperty("measurementSynonymSingularLowercase")&&(obj.measurementSynonymSingularLowercase=ApiClient.convertToType(data.measurementSynonymSingularLowercase,"String")),data.hasOwnProperty("minimumAllowedValue")&&(obj.minimumAllowedValue=ApiClient.convertToType(data.minimumAllowedValue,"String")),data.hasOwnProperty("moreInfo")&&(obj.moreInfo=ApiClient.convertToType(data.moreInfo,"String")),data.hasOwnProperty("name")&&(obj.name=ApiClient.convertToType(data.name,"String")),data.hasOwnProperty("onsetDelay")&&(obj.onsetDelay=ApiClient.convertToType(data.onsetDelay,"Number")),data.hasOwnProperty("outcome")&&(obj.outcome=ApiClient.convertToType(data.outcome,"Boolean")),data.hasOwnProperty("pngPath")&&(obj.pngPath=ApiClient.convertToType(data.pngPath,"String")),data.hasOwnProperty("pngUrl")&&(obj.pngUrl=ApiClient.convertToType(data.pngUrl,"String")),data.hasOwnProperty("public")&&(obj.public=ApiClient.convertToType(data.public,"Boolean")),data.hasOwnProperty("svgPath")&&(obj.svgPath=ApiClient.convertToType(data.svgPath,"String")),data.hasOwnProperty("svgUrl")&&(obj.svgUrl=ApiClient.convertToType(data.svgUrl,"String")),data.hasOwnProperty("updated")&&(obj.updated=ApiClient.convertToType(data.updated,"Number")),data.hasOwnProperty("updatedTime")&&(obj.updatedTime=ApiClient.convertToType(data.updatedTime,"String")),data.hasOwnProperty("variableCategoryName")&&(obj.variableCategoryName=ApiClient.convertToType(data.variableCategoryName,"String")),data.hasOwnProperty("variableCategoryNameSingular")&&(obj.variableCategoryNameSingular=ApiClient.convertToType(data.variableCategoryNameSingular,"String"))),obj},exports.prototype.appType=void 0,exports.prototype.causeOnly=void 0,exports.prototype.combinationOperation=void 0,exports.prototype.createdTime=void 0,exports.prototype.unitAbbreviatedName=void 0,exports.prototype.unitId=void 0,exports.prototype.durationOfAction=void 0,exports.prototype.fillingValue=void 0,exports.prototype.helpText=void 0,exports.prototype.id=void 0,exports.prototype.imageUrl=void 0,exports.prototype.ionIcon=void 0,exports.prototype.manualTracking=void 0,exports.prototype.maximumAllowedValue=void 0,exports.prototype.measurementSynonymSingularLowercase=void 0,exports.prototype.minimumAllowedValue=void 0,exports.prototype.moreInfo=void 0,exports.prototype.name=void 0,exports.prototype.onsetDelay=void 0,exports.prototype.outcome=void 0,exports.prototype.pngPath=void 0,exports.prototype.pngUrl=void 0,exports.prototype.public=void 0,exports.prototype.svgPath=void 0,exports.prototype.svgUrl=void 0,exports.prototype.updated=void 0,exports.prototype.updatedTime=void 0,exports.prototype.variableCategoryName=void 0,exports.prototype.variableCategoryNameSingular=void 0,exports})},{"../ApiClient":9}],74:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.Vote=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(causeVariableId,clientId,effectVariableId,userId,value){var _this=this;_this.causeVariableId=causeVariableId,_this.clientId=clientId,_this.effectVariableId=effectVariableId,_this.userId=userId,_this.value=value};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("causeVariableId")&&(obj.causeVariableId=ApiClient.convertToType(data.causeVariableId,"Number")),data.hasOwnProperty("clientId")&&(obj.clientId=ApiClient.convertToType(data.clientId,"String")),data.hasOwnProperty("createdAt")&&(obj.createdAt=ApiClient.convertToType(data.createdAt,"String")),data.hasOwnProperty("effectVariableId")&&(obj.effectVariableId=ApiClient.convertToType(data.effectVariableId,"Number")),data.hasOwnProperty("id")&&(obj.id=ApiClient.convertToType(data.id,"Number")),data.hasOwnProperty("updatedAt")&&(obj.updatedAt=ApiClient.convertToType(data.updatedAt,"String")),data.hasOwnProperty("userId")&&(obj.userId=ApiClient.convertToType(data.userId,"Number")),data.hasOwnProperty("value")&&(obj.value=ApiClient.convertToType(data.value,"Boolean"))),obj},exports.prototype.causeVariableId=void 0,exports.prototype.clientId=void 0,exports.prototype.createdAt=void 0,exports.prototype.effectVariableId=void 0,exports.prototype.id=void 0,exports.prototype.updatedAt=void 0,exports.prototype.userId=void 0,exports.prototype.value=void 0,exports})},{"../ApiClient":9}],75:[function(require,module,exports){!function(root,factory){"object"==typeof module&&module.exports?module.exports=factory(require("../ApiClient")):(root.Quantimodo||(root.Quantimodo={}),root.Quantimodo.VoteDelete=factory(root.Quantimodo.ApiClient))}(this,function(ApiClient){"use strict";var exports=function(cause,effect){var _this=this;_this.cause=cause,_this.effect=effect};return exports.constructFromObject=function(data,obj){return data&&(obj=obj||new exports,data.hasOwnProperty("cause")&&(obj.cause=ApiClient.convertToType(data.cause,"String")),data.hasOwnProperty("effect")&&(obj.effect=ApiClient.convertToType(data.effect,"String"))),obj},exports.prototype.cause=void 0,exports.prototype.effect=void 0,exports})},{"../ApiClient":9}],76:[function(require,module,exports){"use strict";function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function _byteLength(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]}function encodeChunk(uint8,start,end){for(var tmp,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(tripletToBase64(tmp));return output.join("")}exports.byteLength=function(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function(b64){for(var tmp,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(_byteLength(b64,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen,i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;return 2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp),1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp),arr},exports.fromByteArray=function(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));return 1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")),parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},{}],77:[function(require,module,exports){},{}],78:[function(require,module,exports){"use strict";function createBuffer(length){if(length>K_MAX_LENGTH)throw new RangeError("Invalid typed array length");var buf=new Uint8Array(length);return buf.__proto__=Buffer.prototype,buf}function Buffer(arg,encodingOrOffset,length){if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}function from(value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return isArrayBuffer(value)||value&&isArrayBuffer(value.buffer)?fromArrayBuffer(value,encodingOrOffset,length):"string"==typeof value?fromString(value,encodingOrOffset):fromObject(value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be of type number');if(size<0)throw new RangeError('"size" argument must not be negative')}function alloc(size,fill,encoding){return assertSize(size),size<=0?createBuffer(size):void 0!==fill?"string"==typeof encoding?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill):createBuffer(size)}function allocUnsafe(size){return assertSize(size),createBuffer(size<0?0:0|checked(size))}function fromString(string,encoding){if("string"==typeof encoding&&""!==encoding||(encoding="utf8"),!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);var length=0|byteLength(string,encoding),buf=createBuffer(length),actual=buf.write(string,encoding);return actual!==length&&(buf=buf.slice(0,actual)),buf}function fromArrayLike(array){for(var length=array.length<0?0:0|checked(array.length),buf=createBuffer(length),i=0;i<length;i+=1)buf[i]=255&array[i];return buf}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset)throw new RangeError('"offset" is outside of buffer bounds');if(array.byteLength<byteOffset+(length||0))throw new RangeError('"length" is outside of buffer bounds');var buf;return buf=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length),buf.__proto__=Buffer.prototype,buf}function fromObject(obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length),buf=createBuffer(len);return 0===buf.length?buf:(obj.copy(buf,0,0,len),buf)}if(obj){if(ArrayBuffer.isView(obj)||"length"in obj)return"number"!=typeof obj.length||numberIsNaN(obj.length)?createBuffer(0):fromArrayLike(obj);if("Buffer"===obj.type&&Array.isArray(obj.data))return fromArrayLike(obj.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}function checked(length){if(length>=K_MAX_LENGTH)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if(ArrayBuffer.isView(string)||isArrayBuffer(string))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if(end>>>=0,start>>>=0,end<=start)return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,numberIsNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}var indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);for(var res="",i=0;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}function base64clean(str){if(str=str.split("=")[0],(str=str.trim().replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){units=units||1/0;for(var codePoint,length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)hi=(c=str.charCodeAt(i))>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isArrayBuffer(obj){return obj instanceof ArrayBuffer||null!=obj&&null!=obj.constructor&&"ArrayBuffer"===obj.constructor.name&&"number"==typeof obj.byteLength}function numberIsNaN(obj){return obj!==obj}var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=function(length){return+length!=length&&(length=0),Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;exports.kMaxLength=K_MAX_LENGTH,Buffer.TYPED_ARRAY_SUPPORT=function(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{get:function(){if(this instanceof Buffer)return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{get:function(){if(this instanceof Buffer)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)},Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)},Buffer.isBuffer=function(b){return null!=b&&!0===b._isBuffer},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!Array.isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(ArrayBuffer.isView(buf)&&(buf=Buffer.from(buf)),!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var length=this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(start>>>=0,end>>>=0,thisStart>>>=0,thisEnd>>>=0,this===target)return 0;for(var x=thisEnd-thisStart,y=end-start,len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset>>>=0,isFinite(length)?(length>>>=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(start,end){var len=this.length;start=~~start,end=void 0===end?len:~~end,start<0?(start+=len)<0&&(start=0):start>len&&(start=len),end<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start);var newBuf=this.subarray(start,end);return newBuf.__proto__=Buffer.prototype,newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){value=+value,offset>>>=0,byteLength>>>=0,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){value=+value,offset>>>=0,byteLength>>>=0,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,255,0),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value,offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,127,-128),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24,offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var len=end-start;if(this===target&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(targetStart,start,end);else if(this===target&&start<targetStart&&targetStart<end)for(var i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);if(1===val.length){var code=val.charCodeAt(0);("utf8"===encoding&&code<128||"latin1"===encoding)&&(val=code)}}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0);var i;if("number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:new Buffer(val,encoding),len=bytes.length;if(0===len)throw new TypeError('The value "'+val+'" is invalid for argument "value"');for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g},{"base64-js":76,ieee754:79}],79:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},{}],80:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;i<len;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},{}],81:[function(require,module,exports){"use strict";function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)},objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},{}],82:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode")},{"./decode":80,"./encode":81}],83:[function(require,module,exports){!function(factory){"object"==typeof module&&module.exports&&(module.exports=factory(require("./ApiClient"),require("./model/AppSettings"),require("./model/AppSettingsResponse"),require("./model/Button"),require("./model/Chart"),require("./model/CommonResponse"),require("./model/ConnectInstructions"),require("./model/Connector"),require("./model/ConversionStep"),require("./model/Correlation"),require("./model/DataSource"),require("./model/DeviceToken"),require("./model/Explanation"),require("./model/ExplanationStartTracking"),require("./model/GetConnectorsResponse"),require("./model/GetCorrelationsDataResponse"),require("./model/GetCorrelationsResponse"),require("./model/GetTrackingReminderNotificationsResponse"),require("./model/Image"),require("./model/JsonErrorResponse"),require("./model/Measurement"),require("./model/MeasurementDelete"),require("./model/MeasurementItem"),require("./model/MeasurementSet"),require("./model/MeasurementUpdate"),require("./model/Pair"),require("./model/ParticipantInstruction"),require("./model/PostCorrelation"),require("./model/PostMeasurementsDataResponse"),require("./model/PostMeasurementsResponse"),require("./model/PostStudyPublishResponse"),require("./model/PostTrackingRemindersDataResponse"),require("./model/PostTrackingRemindersResponse"),require("./model/PostUserSettingsDataResponse"),require("./model/PostUserSettingsResponse"),require("./model/Scope"),require("./model/Study"),require("./model/StudyHtml"),require("./model/StudyImages"),require("./model/StudyLinks"),require("./model/StudyText"),require("./model/TrackingReminder"),require("./model/TrackingReminderDelete"),require("./model/TrackingReminderNotification"),require("./model/TrackingReminderNotificationAction"),require("./model/TrackingReminderNotificationPost"),require("./model/TrackingReminderNotificationTrackAllAction"),require("./model/Unit"),require("./model/UnitCategory"),require("./model/User"),require("./model/UserTag"),require("./model/UserVariableDelete"),require("./model/Variable"),require("./model/VariableCategory"),require("./model/Vote"),require("./model/VoteDelete"),require("./api/AnalyticsApi"),require("./api/AppSettingsApi"),require("./api/AuthenticationApi"),require("./api/ConnectorsApi"),require("./api/MeasurementsApi"),require("./api/NotificationsApi"),require("./api/RemindersApi"),require("./api/StudyApi"),require("./api/UnitsApi"),require("./api/UserApi"),require("./api/VariablesApi")))}(function(ApiClient,AppSettings,AppSettingsResponse,Button,Chart,CommonResponse,ConnectInstructions,Connector,ConversionStep,Correlation,DataSource,DeviceToken,Explanation,ExplanationStartTracking,GetConnectorsResponse,GetCorrelationsDataResponse,GetCorrelationsResponse,GetTrackingReminderNotificationsResponse,Image,JsonErrorResponse,Measurement,MeasurementDelete,MeasurementItem,MeasurementSet,MeasurementUpdate,Pair,ParticipantInstruction,PostCorrelation,PostMeasurementsDataResponse,PostMeasurementsResponse,PostStudyPublishResponse,PostTrackingRemindersDataResponse,PostTrackingRemindersResponse,PostUserSettingsDataResponse,PostUserSettingsResponse,Scope,Study,StudyHtml,StudyImages,StudyLinks,StudyText,TrackingReminder,TrackingReminderDelete,TrackingReminderNotification,TrackingReminderNotificationAction,TrackingReminderNotificationPost,TrackingReminderNotificationTrackAllAction,Unit,UnitCategory,User,UserTag,UserVariableDelete,Variable,VariableCategory,Vote,VoteDelete,AnalyticsApi,AppSettingsApi,AuthenticationApi,ConnectorsApi,MeasurementsApi,NotificationsApi,RemindersApi,StudyApi,UnitsApi,UserApi,VariablesApi){"use strict";return{ApiClient:ApiClient,AppSettings:AppSettings,AppSettingsResponse:AppSettingsResponse,Button:Button,Chart:Chart,CommonResponse:CommonResponse,ConnectInstructions:ConnectInstructions,Connector:Connector,ConversionStep:ConversionStep,Correlation:Correlation,DataSource:DataSource,DeviceToken:DeviceToken,Explanation:Explanation,ExplanationStartTracking:ExplanationStartTracking,GetConnectorsResponse:GetConnectorsResponse,GetCorrelationsDataResponse:GetCorrelationsDataResponse,GetCorrelationsResponse:GetCorrelationsResponse,GetTrackingReminderNotificationsResponse:GetTrackingReminderNotificationsResponse,Image:Image,JsonErrorResponse:JsonErrorResponse,Measurement:Measurement,MeasurementDelete:MeasurementDelete,MeasurementItem:MeasurementItem,MeasurementSet:MeasurementSet,MeasurementUpdate:MeasurementUpdate,Pair:Pair,ParticipantInstruction:ParticipantInstruction,PostCorrelation:PostCorrelation,PostMeasurementsDataResponse:PostMeasurementsDataResponse,PostMeasurementsResponse:PostMeasurementsResponse,PostStudyPublishResponse:PostStudyPublishResponse,PostTrackingRemindersDataResponse:PostTrackingRemindersDataResponse,PostTrackingRemindersResponse:PostTrackingRemindersResponse,PostUserSettingsDataResponse:PostUserSettingsDataResponse,PostUserSettingsResponse:PostUserSettingsResponse,Scope:Scope,Study:Study,StudyHtml:StudyHtml,StudyImages:StudyImages,StudyLinks:StudyLinks,StudyText:StudyText,TrackingReminder:TrackingReminder,TrackingReminderDelete:TrackingReminderDelete,TrackingReminderNotification:TrackingReminderNotification,TrackingReminderNotificationAction:TrackingReminderNotificationAction,TrackingReminderNotificationPost:TrackingReminderNotificationPost,TrackingReminderNotificationTrackAllAction:TrackingReminderNotificationTrackAllAction,Unit:Unit,UnitCategory:UnitCategory,User:User,UserTag:UserTag,UserVariableDelete:UserVariableDelete,Variable:Variable,VariableCategory:VariableCategory,Vote:Vote,VoteDelete:VoteDelete,AnalyticsApi:AnalyticsApi,AppSettingsApi:AppSettingsApi,AuthenticationApi:AuthenticationApi,ConnectorsApi:ConnectorsApi,MeasurementsApi:MeasurementsApi,NotificationsApi:NotificationsApi,RemindersApi:RemindersApi,StudyApi:StudyApi,UnitsApi:UnitsApi,UserApi:UserApi,VariablesApi:VariablesApi}})},{"./ApiClient":9,"./api/AnalyticsApi":10,"./api/AppSettingsApi":11,"./api/AuthenticationApi":12,"./api/ConnectorsApi":13,"./api/MeasurementsApi":14,"./api/NotificationsApi":15,"./api/RemindersApi":16,"./api/StudyApi":17,"./api/UnitsApi":18,"./api/UserApi":19,"./api/VariablesApi":20,"./model/AppSettings":21,"./model/AppSettingsResponse":22,"./model/Button":23,"./model/Chart":24,"./model/CommonResponse":25,"./model/ConnectInstructions":26,"./model/Connector":27,"./model/ConversionStep":28,"./model/Correlation":29,"./model/DataSource":30,"./model/DeviceToken":31,"./model/Explanation":32,"./model/ExplanationStartTracking":33,"./model/GetConnectorsResponse":34,"./model/GetCorrelationsDataResponse":35,"./model/GetCorrelationsResponse":36,"./model/GetTrackingReminderNotificationsResponse":37,"./model/Image":38,"./model/JsonErrorResponse":39,"./model/Measurement":40,"./model/MeasurementDelete":41,"./model/MeasurementItem":42,"./model/MeasurementSet":43,"./model/MeasurementUpdate":44,"./model/Pair":45,"./model/ParticipantInstruction":46,"./model/PostCorrelation":47,"./model/PostMeasurementsDataResponse":48,"./model/PostMeasurementsResponse":49,"./model/PostStudyPublishResponse":50,"./model/PostTrackingRemindersDataResponse":51,"./model/PostTrackingRemindersResponse":52,"./model/PostUserSettingsDataResponse":53,"./model/PostUserSettingsResponse":54,"./model/Scope":55,"./model/Study":56,"./model/StudyHtml":57,"./model/StudyImages":58,"./model/StudyLinks":59,"./model/StudyText":60,"./model/TrackingReminder":61,"./model/TrackingReminderDelete":62,"./model/TrackingReminderNotification":63,"./model/TrackingReminderNotificationAction":64,"./model/TrackingReminderNotificationPost":65,"./model/TrackingReminderNotificationTrackAllAction":66,"./model/Unit":67,"./model/UnitCategory":68,"./model/User":69,"./model/UserTag":70,"./model/UserVariableDelete":71,"./model/Variable":72,"./model/VariableCategory":73,"./model/Vote":74,"./model/VoteDelete":75}]},{},[83])(83)}),window.qmLog={debugMode:!1,mobileDebug:!1,logLevel:"info",setAuthDebug:function(value){qmLog.authDebugEnabled=value},setMobileDebug:function(value){qmLog.mobileDebug=value},obfuscateSecrets:function(object){if("object"!=typeof object)return object;try{object=JSON.parse(JSON.stringify(object))}catch(error){return"undefined"!=typeof Bugsnag&&bugsnagClient.notify("Could not decouple object to obfuscate secrets: "+error,"object = JSON.parse(JSON.stringify(object))",{problem_object:object},"error"),object}for(var propertyName in object)if(object.hasOwnProperty(propertyName)){var lowerCaseProperty=propertyName.toLowerCase();-1!==lowerCaseProperty.indexOf("secret")||-1!==lowerCaseProperty.indexOf("password")||-1!==lowerCaseProperty.indexOf("token")?object[propertyName]="HIDDEN":object[propertyName]=qmLog.obfuscateSecrets(object[propertyName])}return object},metaData:{},context:null},"undefined"!=typeof bugsnag&&(window.bugsnagClient=bugsnag("ae7bc49d1285848342342bb5c321a2cf"));var logMetaData=!1;window.qmUser||("undefined"!=typeof localStorage&&(window.qmUser=localStorage.getItem("user")),window.qmUser&&(window.qmUser=JSON.parse(window.qmUser))),window.isTruthy=function(value){return value&&"false"!==value},window.stringifyIfNecessary=function(variable){if(!variable||"string"==typeof message)return variable;try{return JSON.stringify(variable)}catch(error){return console.error("Could not stringify",variable),"Could not stringify"}},window.qmLog.getLogLevelName=function(){return window.location.href.indexOf("utopia.quantimo.do")>-1?"debug":qmLog.debugMode?"debug":qmLog.logLevel?qmLog.logLevel:qm.urlHelper.getParam("logLevel")?(qmLog.logLevel=qm.urlHelper.getParam("logLevel"),qmLog.logLevel):"error"},window.qmLog.checkUrlAndStorageForDebugMode=function(){return qm.storage.getItem(qm.items.debugMode)?(console.log("Got debugMode from local storage"),!0):!(!qm.urlHelper.getParam("debug")&&!qm.urlHelper.getParam("debugMode"))&&(qmLog.logLevel="debug",qmLog.debugMode=!0,qm.storage.setItem(qm.items.debugMode,!0),console.log("Set debugMode in local storage"),!0)},window.qmLog.isDebugMode=function(){return"debug"===qmLog.getLogLevelName()},window.qmLog.getStackTrace=function(){var stackTrace=(new Error).stack;return stackTrace?(stackTrace=stackTrace.substring(stackTrace.indexOf("getStackTrace")).replace("getStackTrace",""),stackTrace=stackTrace.substring(stackTrace.indexOf("window.qmLog.debug")).replace("window.qmLog.debug",""),stackTrace=stackTrace.substring(stackTrace.indexOf("window.qmLog.info")).replace("window.qmLog.info",""),stackTrace=stackTrace.substring(stackTrace.indexOf("window.qmLog.error")).replace("window.qmLog.error",""),stackTrace=stackTrace.substring(stackTrace.indexOf("window.qmLog.debug")).replace("window.qmLog.debug",""),stackTrace=stackTrace.substring(stackTrace.indexOf("window.qmLog.info")).replace("window.qmLog.info",""),stackTrace=stackTrace.substring(stackTrace.indexOf("window.qmLog.error")).replace("window.qmLog.error","")):(console.log("Could not get stack trace"),null)},qmLog.addGlobalMetaDataAndLog=function(name,message,metaData,stacktrace){var i=0;if(metaData=qmLog.addGlobalMetaData(name,message,metaData,stacktrace),!logMetaData)return metaData;for(var propertyName in metaData)if(metaData.hasOwnProperty(propertyName)&&metaData[propertyName]&&(i++,console.log(propertyName+": "+window.stringifyIfNecessary(metaData[propertyName])),i>10))break;return metaData},qmLog.errorOrInfoIfTesting=function(name,message,metaData,stackTrace){message=message||name,name=name||message,metaData=metaData||null,qm.appMode.isTesting()?qmLog.info(name,message,metaData,stackTrace):qmLog.error(name,message,metaData,stackTrace)},window.qmLog.addGlobalMetaData=function(name,message,metaData,logLevel,stackTrace){function cordovaPluginsAvailable(){return"undefined"!=typeof cordova&&void 0!==cordova.plugins}if(metaData=metaData||{},metaData.context=qmLog.context,metaData.installed_plugins={Analytics:"undefined"!=typeof Analytics?"installed":"not installed",backgroundGeoLocation:"undefined"!=typeof backgroundGeoLocation?"installed":"not installed","cordova.plugins.notification":cordovaPluginsAvailable()&&void 0!==cordova.plugins.notification?"installed":"not installed",facebookConnectPlugin:"undefined"!=typeof facebookConnectPlugin,"window.plugins.googleplus":window&&window.plugins&&window.plugins.googleplus?"installed":"not installed","window.overApps":cordovaPluginsAvailable()&&void 0!==window.overApps?"installed":"not installed",inAppPurchase:void 0!==window.inAppPurchase?"installed":"not installed",ionic:"undefined"!=typeof ionic?"installed":"not installed",ionicDeploy:"undefined"!=typeof $ionicDeploy?"installed":"not installed",PushNotification:"undefined"!=typeof PushNotification?"installed":"not installed",SplashScreen:"undefined"!=typeof navigator&&void 0!==navigator.splashscreen?"installed":"not installed",UserVoice:"undefined"!=typeof UserVoice?"installed":"not installed"},metaData.push_data={deviceTokenOnServer:qm.storage.getItem(qm.items.deviceTokenOnServer),deviceTokenToSync:qm.storage.getItem(qm.items.deviceTokenToSync),last_push:window.qm.push.getTimeSinceLastPushString(),"push enabled":qm.push.enabled(),"draw over apps enabled":qm.storage.getItem(qm.items.drawOverAppsPopupEnabled),"last popup":qm.notifications.getTimeSinceLastPopupString()},qmLog.isDebugMode()&&(metaData.local_storage=window.qm.storage.getLocalStorageList()),qm.getAppSettings()&&(metaData.build_server=qm.getAppSettings().buildServer,metaData.build_link=qm.getAppSettings().buildLink),metaData.test_app_url=function(){var url="https://local.quantimo.do/ionic/Modo/www/index.html#/app"+window.location.href.split("#/app")[1];return qm.getUser()&&(url=qm.urlHelper.addUrlQueryParamsToUrl({userEmail:qm.getUser().email},url)),url}(),metaData.window_location_href=window.location.href,metaData.window_location_origin=window.location.origin,metaData.groupingHash||(metaData.groupingHash=name),metaData.callerFunctionName||(metaData.callerFunctionName=getCallerFunctionName()),metaData.calleeFunctionName||(metaData.calleeFunctionName=getCalleeFunctionName()),metaData.stackTrace=stackTrace||qmLog.getStackTrace(),metaData.apiResponse){var request=metaData.apiResponse.req;metaData.test_api_url=request.method+" "+request.url,request.header.Authorization&&(metaData.test_api_url=function(url,name,value){return-1===url.indexOf("?")?url+"?"+name+"="+value:url+"&"+name+"="+value}(metaData.test_api_url,"access_token",request.header.Authorization.replace("Bearer ",""))),console.error("API ERROR URL "+metaData.test_api_url,metaData),delete metaData.apiResponse}return metaData.local_notifications=qm.storage.getItem(qm.items.scheduledLocalNotifications),metaData=qmLog.obfuscateSecrets(metaData)},window.qmLog.setupBugsnag=function(){if("undefined"!=typeof bugsnag){var options={apiKey:"ae7bc49d1285848342342bb5c321a2cf",releaseStage:qm.appMode.getAppMode(),metaData:qmLog.addGlobalMetaData(null,null,{},null,null),user:qm.userHelper.getUserFromLocalStorage(),beforeSend:function(report){}};qm.getUser()&&(options.user=qmLog.obfuscateSecrets(qm.getUser())),qm.getAppSettings()&&(options.appVersion=qm.getAppSettings().androidVersionCode,options.metaData.appDisplayName=qm.getAppSettings().appDisplayName),window.bugsnagClient=bugsnag(options)}else qm.appMode.isDevelopment()&&qmLog.error("Bugsnag is not defined")},window.qmLog.setupUserVoice=function(){"undefined"!=typeof UserVoice&&UserVoice.push(["identify",{email:qm.getUser().email,name:qm.getUser().displayName,created_at:window.qm.timeHelper.getUnixTimestampInSeconds(qm.userHelper.getUserFromLocalStorage().userRegistered),id:qm.userHelper.getUserFromLocalStorage().id,type:qm.getSourceName()+" User (Subscribed: "+qm.userHelper.getUserFromLocalStorage().subscribed+")",account:{name:qm.getSourceName()+" v"+qm.getAppSettings().versionNumber}}])},window.qmLog.setupIntercom=function(){window.intercomSettings={app_id:"uwtx2m33",name:qm.userHelper.getUserFromLocalStorage().displayName,email:qm.userHelper.getUserFromLocalStorage().email,user_id:qm.userHelper.getUserFromLocalStorage().id,app_name:qm.getAppSettings().appDisplayName,app_version:qm.getAppSettings().versionNumber,platform:qm.platform.getCurrentPlatform()}},window.qmLog.shouldWeLog=function(providedLogLevelName){return logLevels[qmLog.getLogLevelName()]>=logLevels[providedLogLevelName]};var logLevels={error:1,warn:2,info:3,debug:4};window.qmLog.debug=function(name,message,metaData,stackTrace){message=message||name,name=name||message,metaData=metaData||null,qmLog.shouldWeLog("debug")&&(message=addCallerFunctionToMessage(message||""),console.debug("DEBUG: "+getConsoleLogString(name,message,metaData,stackTrace),metaData))},window.qmLog.info=function(name,message,metaData,stackTrace){name=name||message,metaData=metaData||null,qmLog.shouldWeLog("info")&&(message=addCallerFunctionToMessage(message||""),console.info("INFO: "+getConsoleLogString(name,message,metaData,stackTrace),metaData))},window.qmLog.warn=function(name,message,metaData,stackTrace){name=name||message,metaData=metaData||null,qmLog.shouldWeLog("warn")&&(message=addCallerFunctionToMessage(message||""),console.warn("WARNING: "+getConsoleLogString(name,message,metaData,stackTrace),metaData))},window.qmLog.error=function(name,message,metaData,stackTrace){qmLog.shouldWeLog("error")&&(message=message||name,name=name||message,message&&message.message&&(message=message.message),console.error("ERROR: "+getConsoleLogString(name,message,metaData,stackTrace),metaData),bugsnagNotify(name,message,metaData=qmLog.addGlobalMetaDataAndLog(name,message,metaData,stackTrace),"error",stackTrace))},window.qmLog.authDebug=function(message){qmLog.authDebugEnabled||(qmLog.authDebugEnabled=-1!==window.location.href.indexOf("authDebug"),qmLog.authDebugEnabled&&window.localStorage&&localStorage.setItem("authDebugEnabled","true")),!qmLog.authDebugEnabled&&window.localStorage&&(qmLog.authDebugEnabled=localStorage.getItem("authDebugEnabled")),qmLog.authDebugEnabled||qmLog.debugMode?qm.platform.isMobile()?qmLog.error(message,message,null):qmLog.info(message,message,null):qmLog.debug(message,message,null)},window.qmLog.pushDebug=function(name,message,metaData,stackTrace){qmLog.pushDebugEnabled||(qmLog.pushDebugEnabled=-1!==window.location.href.indexOf("pushDebugEnabled"),qmLog.pushDebugEnabled&&window.localStorage&&localStorage.setItem("pushDebugEnabled","true")),!qmLog.pushDebugEnabled&&window.localStorage&&(qmLog.pushDebugEnabled=localStorage.getItem("pushDebugEnabled")),qmLog.pushDebugEnabled||qmLog.debugMode?qmLog.error("PushNotification Debug: "+name,message,metaData,stackTrace):qmLog.info("PushNotification Debug: "+name,message,metaData,stackTrace)},String.prototype.toCamelCase=function(){return this.replace(/(\_[a-z])/g,function($1){return $1.toUpperCase().replace("_","")})},window.qm={analytics:{eventCategories:{pushNotifications:"pushNotifications",inbox:"inbox"}},appMode:{isTesting:function(){if(qm.getUser()){if(qm.getUser().email&&-1!==qm.getUser().email.toLowerCase().indexOf("test"))return!0;if(qm.getUser().displayName&&-1!==qm.getUser().displayName.toLowerCase().indexOf("test"))return!0}return-1!==window.location.href.indexOf("medimodo.heroku")},isDevelopment:function(){return-1!==window.location.origin.indexOf("http://localhost:")||-1!==window.location.origin.indexOf("local.quantimo.do")},isStaging:function(){return-1!==window.location.origin.indexOf("staging.")},isBuilder:function(){return-1!==window.location.href.indexOf("configuration-index.html")},getAppMode:function(){var env="production";return qm.appMode.isStaging()&&(env="staging"),qm.appMode.isDevelopment()&&(env="development"),qm.appMode.isTesting()&&(env="testing"),env}},apiPaths:{trackingReminderNotificationsPast:"v1/trackingReminderNotifications/past"},api:{configureClient:function(){var qmApiClient=Quantimodo.ApiClient.instance,quantimodo_oauth2=qmApiClient.authentications.quantimodo_oauth2;return qmApiClient.basePath=qm.api.getBaseUrl()+"/api",quantimodo_oauth2.accessToken=qm.auth.getAccessTokenFromUrlUserOrStorage(),qmApiClient},cacheSet:function(params,data,functionName){qm.api.cache[functionName]||(qm.api.cache[functionName]={});var key=qm.api.getCacheName(params);qm.api.cache[functionName][key]=data},cacheGet:function(params,functionName){if(params&&params.refresh)return null;qm.api.cache[functionName]||(qm.api.cache[functionName]={});var key=qm.api.getCacheName(params);return qm.api.cache[functionName][key]?qm.api.cache[functionName][key]:null},cacheRemove:function(functionName){return qm.api.cache[functionName]=null},getCacheName:function(params){return qm.stringHelper.removeSpecialCharacters(JSON.stringify(params))},cache:{},generalResponseHandler:function(error,data,response,successHandler,errorHandler,params,functionName){response?(qmLog.debug(response.status+" response from "+response.req.url),error?(qm.api.generalErrorHandler(error,data,response),errorHandler&&errorHandler(error)):(data&&params&&qm.api.cacheSet(params,data,functionName),successHandler&&successHandler(data,response))):qmLog.info("No response provided to "+functionName+" qmSdkApiResponseHandler with params "+JSON.stringify(params))},generalErrorHandler:function(error,data,response,options){if(!response)return qmLog.error("No API response provided to qmApiGeneralErrorHandler",{errorMessage:error,responseData:data,apiResponse:response,requestOptions:options});401===response.status?options&&options.doNotSendToLogin||qmLog.info("Not authenticated!"):qmLog.error(response.error.message,null,{apiResponse:response})},addGlobalParams:function(urlParams){var url;urlParams||(urlParams={}),delete urlParams.force,delete urlParams.excludeLocal,"string"==typeof urlParams&&(url=urlParams,urlParams={}),qm.appsManager.getAppSettingsFromMemory()&&(urlParams.appName=encodeURIComponent(qm.appsManager.getAppSettingsFromMemory().appDisplayName),qm.getAppSettings().versionNumber?urlParams.appVersion=encodeURIComponent(qm.appsManager.getAppSettingsFromMemory().versionNumber):qmLog.debug("Version number not specified!",null,"Version number not specified on qm.getAppSettings()")),!urlParams.accessToken&&qm.auth.getAccessTokenFromUrlUserOrStorage()&&(urlParams.accessToken=qm.auth.getAccessTokenFromUrlUserOrStorage()),!urlParams.clientId&&qm.api.getClientId()&&(urlParams.clientId=qm.api.getClientId()),urlParams.platform=qm.platform.getCurrentPlatform(),window.devCredentials?(window.devCredentials.username&&(urlParams.log=encodeURIComponent(window.devCredentials.username)),window.devCredentials.password&&(urlParams.pwd=encodeURIComponent(window.devCredentials.password))):qmLog.debug("No dev credentials",null);for(var passableUrlParameters=["userId","log","pwd","userEmail"],i=0;i<passableUrlParameters.length;i++)qm.urlHelper.getParam(passableUrlParameters[i])&&(urlParams[passableUrlParameters[i]]=qm.urlHelper.getParam(passableUrlParameters[i]));for(var property in urlParams)urlParams.hasOwnProperty(property)&&(void 0===urlParams[property]&&(qmLog.error(property+" is undefined!"),delete urlParams[property]),""==typeof urlParams[property]&&(qmLog.error(property+" is empty string!"),delete urlParams[property]));return url?url=qm.urlHelper.addUrlQueryParamsToUrl(urlParams,url):urlParams},getClientId:function(successHandler){if(qm.api.getClientIdFromQueryParameters()&&"default"!==qm.api.getClientIdFromQueryParameters()&&(qm.clientId=qm.api.getClientIdFromQueryParameters()),qm.clientId||(qm.clientId=qm.api.getClientIdFromSubDomain()),!qm.clientId&&qm.appSettings&&(qm.clientId=qm.appSettings.clientId),!qm.clientId&&qm.appsManager.getAppSettingsFromMemory()&&qm.appsManager.getAppSettingsFromMemory().clientId&&(qm.clientId=qm.appsManager.getAppSettingsFromMemory().clientId),qm.clientId,qm.clientId||(qm.clientId=qm.api.getClientIdFromAwsPath()),qm.clientId||qmLog.info("Could not get client id!"),!successHandler)return qm.clientId;qm.clientId&&successHandler(qm.clientId),qm.api.getClientIdWithCallback(successHandler)},getClientIdWithCallback:function(successHandler){qm.api.getClientId()?successHandler(qm.api.getClientId()):("undefined"!=typeof AppSettings&&AppSettings.get(function(preferences){qm.clientId=preferences.QuantiModoClientId,qm.clientSecret=preferences.QuantiModoClientSecret,successHandler(qm.clientId,preferences.QuantiModoClientSecret)},function(error){qmLog.error("Error! "+JSON.stringify(error))},["QuantiModoClientId","QuantiModoClientSecret"]),qm.appsManager.getAppSettingsFromDefaultConfigJson(function(appSettings){appSettings&&(qm.clientId=appSettings.clientId,successHandler(qm.clientId))}))},getClientIdFromQueryParameters:function(){var clientId=window.qm.urlHelper.getParam("clientId");return clientId||(clientId=window.qm.urlHelper.getParam("appName")),clientId||(clientId=window.qm.urlHelper.getParam("lowerCaseAppName")),clientId||(clientId=window.qm.urlHelper.getParam("quantimodoClientId")),clientId&&qm.storage.setItem("clientId",clientId),clientId},getClientIdFromAwsPath:function(){return qm.stringHelper.getStringBetween(window.location.href,"s3.amazonaws.com/","/dev")},getClientIdFromSubDomain:function(){function getSubDomain(){return window.location.host.split(".")[0].toLowerCase()}if(-1===window.location.href.indexOf(".quantimo.do"))return null;if(qm.appMode.isBuilder())return null;var subDomain=getSubDomain(),clientIdFromAppConfigName=qm.appsManager.appConfigFileNames[getSubDomain()];return clientIdFromAppConfigName?(window.qmLog.debug("Using client id "+clientIdFromAppConfigName+" derived from appConfigFileNames using subDomain: "+subDomain,null),clientIdFromAppConfigName):(window.qmLog.debug("Using subDomain as client id: "+subDomain),subDomain)},canWeMakeRequestYet:function(type,route,options){function getSecondsSinceLastRequest(type,route){var secondsSinceLastRequest=99999999;return window.qm.storage.getLastRequestTime(type,route)&&(secondsSinceLastRequest=qm.timeHelper.secondsAgo(window.qm.storage.getLastRequestTime(type,route))),secondsSinceLastRequest}if(!route||""===route)return qmLog.error("No route provided to canWeMakeRequestYet!"),!0;var blockRequests=!1;options&&options.blockRequests&&(blockRequests=options.blockRequests);var minimumSecondsBetweenRequests;if(minimumSecondsBetweenRequests=options&&options.minimumSecondsBetweenRequests?options.minimumSecondsBetweenRequests:1,getSecondsSinceLastRequest(type,route)<minimumSecondsBetweenRequests){var name="Just made a "+type+" request to "+route,message=name+". We made the same request within the last "+minimumSecondsBetweenRequests+" seconds ("+getSecondsSinceLastRequest(type,route)+" ago). stackTrace: "+options.stackTrace;if(blockRequests)return qmLog.info("BLOCKING REQUEST: "+name,"BLOCKING REQUEST because "+message,options),!1;qmLog.info(name,message,options)}return window.qm.storage.setItem(getLocalStorageNameForRequest(type,route),qm.timeHelper.getUnixTimestampInSeconds()),!0},responseHandler:function(error,data,response,successHandler,errorHandler){response?(qmLog.debug(response.status+" response from "+response.req.url,null),error?(qm.api.generalErrorHandler(error,data,response),errorHandler&&errorHandler(error)):successHandler&&successHandler(data,response)):qmLog.error("No response provided to qm.api.responseHandler")},getBaseUrl:function(){return qm.appsManager.getAppSettingsFromMemory()&&qm.appsManager.getAppSettingsFromMemory().apiUrl?(-1===qm.appsManager.getAppSettingsFromMemory().apiUrl.indexOf("https://")&&(qm.appsManager.getAppSettingsFromMemory().apiUrl="https://"+qm.appsManager.getAppSettingsFromMemory().apiUrl),qm.appsManager.getAppSettingsFromMemory().apiUrl):qm.appsManager.getQuantiModoApiUrl()},postToQuantiModo:function(body,path,successHandler,errorHandler){qm.api.getRequestUrl(path,function(url){qmLog.info("Making POST request to "+url),"undefined"!=typeof XMLHttpRequest?qm.api.postViaXhr(body,url,successHandler):qm.api.postViaFetch(body,url,successHandler,errorHandler)})},getViaXhrOrFetch:function(url,successHandler,errorHandler){qmLog.info("Making GET request to "+url),"undefined"!=typeof XMLHttpRequest?qm.api.getViaXhr(url,successHandler,errorHandler):qm.api.getViaFetch(url,successHandler,errorHandler)},getAppSettingsUrl:function(callback){qm.api.getClientIdWithCallback(function(clientId,clientSecret){var settingsUrl=qm.appsManager.getQuantiModoApiUrl()+"/api/v1/appSettings?clientId="+clientId;clientSecret&&(settingsUrl+="&clientSecret="+clientSecret),window.designMode&&(settingsUrl+="&designMode=true"),window.qmLog.debug("Getting app settings from "+settingsUrl),callback(settingsUrl)})},getViaFetch:function(url,successHandler,errorHandler){qmLog.pushDebug("Making get request to "+url),fetch(url,{method:"get"}).then(function(response){return response.json()}).then(function(data){successHandler&&successHandler(data)}).catch(function(err){url.indexOf(".config.json")?qmLog.error("qm.api.get error from "+url+" request: "+err+".  If we couldn't parse json, "+url+" probably doesn't exist",err):qmLog.error("qm.api.get error from "+url+" request: "+err,null,err),errorHandler&&errorHandler(err)})},getViaXhr:function(url,successHandler){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(xhr.readyState===XMLHttpRequest.DONE){var responseObject=qm.stringHelper.parseIfJsonString(xhr.responseText,null);successHandler(responseObject)}},xhr.open("GET",url,!0),xhr.send(null)},postViaFetch:function(body,url,successHandler){fetch(url,{method:"post",body:JSON.stringify(body)}).then(function(response){qmLog.info("Got "+response.status+" response from POST to "+url),successHandler&&successHandler(response)}).catch(function(err){qmLog.error("Error from POST to "+url+": "+err)})},postViaXhr:function(body,url,successHandler){var xhr=new XMLHttpRequest;xhr.open("POST",url),xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8"),xhr.onreadystatechange=function(){if(xhr.readyState===XMLHttpRequest.DONE){var fallback=xhr.responseText,responseObject=qm.stringHelper.parseIfJsonString(xhr.responseText,fallback);successHandler(responseObject)}},xhr.send(JSON.stringify(body))},postMeasurements:function(measurements,onDoneListener){qm.api.postToQuantiModo(measurements,"v1/measurements",onDoneListener)},getRequestUrl:function(path,successHandler){qm.userHelper.getUserFromLocalStorageOrApi(function(user){var url=function(url){function addQueryParameter(url,name,value){return-1===url.indexOf("?")?url+"?"+name+"="+value:url+"&"+name+"="+value}function getAppName(){return qm.chrome.getChromeManifest()?qm.chrome.getChromeManifest().name:window.qm.urlHelper.getParam("appName")}function getAppVersion(){return qm.chrome.getChromeManifest()?qm.chrome.getChromeManifest().version:qm.appSettings?qm.appSettings.versionNumber:window.qm.urlHelper.getParam("appVersion")}return qm.auth.getAccessTokenFromUrlUserOrStorage(user)?url=addQueryParameter(url,"access_token",qm.auth.getAccessTokenFromUrlUserOrStorage()):(window.qmLog.error("No access token!"),qm.serviceWorker||qm.chrome.showSignInNotification()),getAppName()&&(url=addQueryParameter(url,"appName",getAppName())),getAppVersion()&&(url=addQueryParameter(url,"appVersion",getAppVersion())),qm.api.getClientId()&&(url=addQueryParameter(url,"clientId",qm.api.getClientId())),url=addQueryParameter(url,"platform",qm.platform.getCurrentPlatform())}((qm.appSettings&&qm.appSettings.apiUrl?"https://"+qm.appSettings.apiUrl:"https://app.quantimo.do")+"/api/"+path);qmLog.debug("Making API request to "+url),successHandler(url)})}},appsManager:{getQuantiModoApiUrl:function(){var apiUrl=window.qm.urlHelper.getParam(qm.items.apiUrl);return apiUrl||(apiUrl=qm.storage.getItem(qm.items.apiUrl)),apiUrl||-1===window.location.origin.indexOf("staging.quantimo.do")||(apiUrl="https://staging.quantimo.do"),apiUrl||-1===window.location.origin.indexOf("local.quantimo.do")||(apiUrl="https://local.quantimo.do"),apiUrl||-1===window.location.origin.indexOf("utopia.quantimo.do")||(apiUrl="https://utopia.quantimo.do"),apiUrl||-1===window.location.origin.indexOf("localhost:8100")?(apiUrl||(apiUrl="https://app.quantimo.do"),-1===apiUrl.indexOf("https://")&&(apiUrl="https://"+apiUrl),apiUrl=apiUrl.replace("https://https","https"),window.location.port&&"443"!==window.location.port&&(apiUrl+=":"+window.location.port),apiUrl):"https://app.quantimo.do"},getClientSecret:function(){return qm.clientSecret?qm.clientSecret:qm.appSettings.clientSecret?qm.appSettings.clientSecret:qm.privateConfig?qm.platform.isIOS()?qm.privateConfig.client_secrets.iOS:qm.platform.isAndroid?qm.privateConfig.client_secrets.Android:qm.platform.isChromeExtension?qm.privateConfig.client_secrets.Chrome:qm.platform.isWindows?qm.privateConfig.client_secrets.Windows:qm.privateConfig.client_secrets.Web:(qmLog.error("No client secret or private config!"),null)},getAppSettingsLocallyOrFromApi:function(successHandler){qm.appSettings&&qm.appSettings.clientId?successHandler(qm.appSettings):qm.localForage.getItem(qm.items.appSettings,function(appSettings){qm.platform.isWeb()&&-1!==window.location.href.indexOf(".quantimo.do")?qm.appsManager.getAppSettingsFromApi(successHandler):qm.appsManager.getAppSettingsFromDefaultConfigJson(function(appSettings){appSettings?qm.appsManager.setAppSettings(appSettings,successHandler):qm.appsManager.getAppSettingsFromApi(successHandler)})})},getAppSettingsFromMemory:function(){return void 0!==qm.appSettings&&qm.appSettings},getAppSettingsFromApi:function(successHandler){qm.api.getAppSettingsUrl(function(appSettingsUrl){qm.api.getViaXhrOrFetch(appSettingsUrl,function(response){if(response){if(response.privateConfig&&(qm.privateConfig=response.privateConfig,qm.localForage.setItem(qm.items.privateConfig,response.privateConfig)),!response.appSettings)return qmLog.error("No appSettings response from "+appSettingsUrl),!1;qm.appsManager.setAppSettings(response.appSettings,successHandler)}else qmLog.error("No response from "+appSettingsUrl)})})},getAppSettingsFromDefaultConfigJson:function(callback){qm.api.getViaXhrOrFetch(qm.urlHelper.getAbsoluteUrlFromRelativePath("default.config.json"),function(parsedResponse){parsedResponse&&(window.qmLog.debug("Got appSettings from default.config.json",null,parsedResponse),qm.appSettings=parsedResponse,qm.localForage.setItem(qm.items.appSettings,qm.appSettings)),callback(parsedResponse)},function(){qmLog.error("Could not get appSettings from default.config.json")})},loadBuildInfoFromDefaultConfigJson:function(callback){qm.buildInfo&&callback(qm.buildInfo),qm.api.getViaXhrOrFetch(qm.urlHelper.getAbsoluteUrlFromRelativePath("build-info.json"),function(parsedResponse){parsedResponse&&(qm.buildInfo=parsedResponse),callback(parsedResponse)},function(){qmLog.error("Could not get appSettings from build-info.json")})},loadPrivateConfigFromJsonFile:function(){qm.privateConfig||qm.api.getViaXhrOrFetch(qm.urlHelper.getPrivateConfigJsonUrl(),function(parsedResponse){window.qmLog.debug("Got private config from json file",null,parsedResponse),qm.privateConfig=parsedResponse},function(){qmLog.error("Could not get private config from json file")})},setAppSettings:function(appSettings,callback){if(!appSettings)return qmLog.error("Nothing given to setAppSettings!"),!1;qm.appsManager.loadBuildInfoFromDefaultConfigJson(function(buildInfo){for(var propertyName in buildInfo)buildInfo.hasOwnProperty(propertyName)&&(appSettings[propertyName]=buildInfo[propertyName]);appSettings.gottenAt||(appSettings.gottenAt=qm.timeHelper.getUnixTimestampInSeconds()),qm.appSettings=appSettings,qm.localForage.setItem(qm.items.appSettings,qm.appSettings),appSettings.gottenAt<qm.timeHelper.getUnixTimestampInSeconds()-86400&&qm.appsManager.getAppSettingsFromApi(),callback&&callback(appSettings)})},appConfigFileNames:{app:"quantimodo",energymodo:"energymodo",default:"default",ionic:"quantimodo",local:"quantimodo",medimodo:"medimodo",mindfirst:"mindfirst",moodimodo:"moodimodo",oauth:"quantimodo",quantimodo:"quantimodo",staging:"quantimodo",your_quantimodo_client_id_here:"your_quantimodo_client_id_here"}},apiHelper:{getApiDocs:function(callback){qm.apiHelper.docs&&callback(qm.apiHelper.docs);var path="data/swagger.json";qm.api.getViaXhrOrFetch(qm.urlHelper.getAbsoluteUrlFromRelativePath(path),function(parsedResponse){parsedResponse&&(qmLog.debug("Got "+path,null,parsedResponse),qm.apiHelper.docs=parsedResponse),callback(parsedResponse)},function(){qmLog.error("Could not get "+path)})},docs:null,getParameterDescription:function(parameterName,callback){qm.apiHelper.getApiDocs(function(apiDocs){var explanation={title:qm.stringHelper.camelToTitleCase(parameterName)};explanation.textContent=apiDocs.parameters[parameterName].description,callback(explanation)})},getPropertyDescription:function(modelName,propertyName,callback){qm.apiHelper.getApiDocs(function(apiDocs){var explanation={title:qm.stringHelper.camelToTitleCase(propertyName)};explanation.textContent=apiDocs.definitions[modelName].properties[propertyName].description,callback(explanation)})}},arrayHelper:{arrayHasItemWithSpecificPropertyValue:function(propertyName,propertyValue,array){if(!array)return qmLog.error("No array provided to arrayHasItemWithSpecificPropertyValue"),!1;for(var i=0;i<array.length;i++){var obj=array[i];if(obj[propertyName]&&obj[propertyName]===propertyValue)return!0}return!1},arrayHasItemWithNameProperty:function(arrayOfObjects){return arrayOfObjects&&arrayOfObjects.length&&arrayOfObjects[0]&&arrayOfObjects[0].name},removeItemsWithDifferentName:function(arrayOfObjects,queryTerm){return arrayOfObjects.filter(function(obj){return-1!==obj.name.toLowerCase().indexOf(queryTerm.toLowerCase())})},concatenateUniqueId:function(preferred,secondary){for(var a=preferred.concat(secondary),i=0;i<a.length;++i)for(var j=i+1;j<a.length;++j)a[i].id===a[j].id&&a.splice(j--,1)},convertToArrayIfNecessary:function(variable){return qm.arrayHelper.variableIsArray(variable)||(variable=[variable]),variable},convertObjectToArray:function(object){return object?qm.arrayHelper.variableIsArray(object)?object:Object.keys(object).map(function(key){return object[key]}):(qmLog.info(object+" provided to convertObjectToArray"),object)},deleteById:function(id,array){return array=array.filter(function(obj){return obj.id!==id})},deleteByProperty:function(propertyName,value,array){return array=array.filter(function(obj){return obj[propertyName]!==value})},filterByProperty:function(filterPropertyName,filterPropertyValue,unfilteredElementArray){return unfilteredElementArray.filter(function(obj){return"string"==typeof obj[filterPropertyName]&&"string"==typeof filterPropertyValue?filterPropertyValue.toLowerCase()===obj[filterPropertyName].toLowerCase():filterPropertyValue===obj[filterPropertyName]})},filterByPropertyOrSize:function(matchingElements,filterPropertyName,filterPropertyValue,lessThanPropertyName,lessThanPropertyValue,greaterThanPropertyName,greaterThanPropertyValue){return matchingElements?(matchingElements.length&&(greaterThanPropertyName&&void 0===matchingElements[0][greaterThanPropertyName]&&window.qmLog.error(greaterThanPropertyName+" greaterThanPropertyName does not exist"),filterPropertyName&&void 0===matchingElements[0][filterPropertyName]&&window.qmLog.error(filterPropertyName+" filterPropertyName does not exist"),lessThanPropertyName&&void 0===matchingElements[0][lessThanPropertyName]&&window.qmLog.error(lessThanPropertyName+" lessThanPropertyName does not exist")),filterPropertyName&&void 0!==filterPropertyValue&&null!==filterPropertyValue&&(matchingElements=qm.arrayHelper.filterByProperty(filterPropertyName,filterPropertyValue,matchingElements)),lessThanPropertyName&&void 0!==lessThanPropertyValue&&(matchingElements=matchingElements.filter(function(obj){return obj[lessThanPropertyName]<lessThanPropertyValue})),greaterThanPropertyName&&void 0!==greaterThanPropertyValue&&(matchingElements=matchingElements.filter(function(obj){return obj[greaterThanPropertyName]>greaterThanPropertyValue})),matchingElements):null},getByProperty:function(propertyName,value,array){return array=array.filter(function(obj){return obj[propertyName]===value})},getContaining:function(searchTerm,array){if(!array)return qmLog.error("No array provided to getContaining"),array;searchTerm=searchTerm.toLowerCase();for(var matches=[],i=0;i<array.length;i++)JSON.stringify(array[i]).toLowerCase().indexOf(searchTerm)>-1&&matches.push(array[i]);return matches},getWithNameContaining:function(searchTerm,array){return array?(searchTerm=searchTerm.toLowerCase(),array.filter(function(item){var name=item.name||item.variableName;return-1!==(name=name.toLowerCase()).indexOf(searchTerm)})):(qmLog.error("No array provided to getContaining"),array)},getWithNameContainingEveryWord:function(searchTerm,array){if(!array)return qmLog.error("No array provided to getContaining"),array;qmLog.info("Called getWithNameContainingEveryWord...");var filterBy=(searchTerm=searchTerm.toLowerCase()).split(/\s+/);return array.filter(function(item){var name=item.name||item.variableName;return name=name.toLowerCase(),filterBy.every(function(word){return-1!==name.indexOf(word)||(!(!item.synonyms||!item.synonyms.length||-1===JSON.stringify(item.synonyms).toLowerCase().indexOf(word))||(!(!item.alias||-1===item.alias.toLowerCase().indexOf(word))||void 0))})})},inArray:function(needle,haystack){for(var length=haystack.length,i=0;i<length;i++)if(haystack[i]===needle)return!0;return!1},replaceElementInArrayById:function(array,replacementElement){return qm.arrayHelper.concatenateUniqueId([replacementElement],array)},removeLastItem:function(array){return array?qm.arrayHelper.variableIsArray(array)?void array.pop():(qmLog.error("Non-array provided to removeLastItem"),array):(qmLog.error("No array provided to removeLastItem"),array)},removeLastItemsUntilSizeLessThan:function(maxKb,array){if(!array)return qmLog.error("No array provided to removeLastItem"),array;if(!qm.arrayHelper.variableIsArray(array))return qmLog.error("Non-array provided to removeLastItemsUntilSizeLessThan"),array;if(array.length<2)return qmLog.error("Removing only element from single item array!"),[];for(;getSizeInKiloBytes(array)>maxKb;)qm.arrayHelper.removeLastItem(array);return array},sortByProperty:function(arrayToSort,propertyName){return qmLog.info("Sorting by "+propertyName+"..."),qm.arrayHelper.variableIsArray(arrayToSort)?arrayToSort.length<2?arrayToSort:(propertyName.indexOf("-")>-1?arrayToSort.sort(function(a,b){return b[propertyName.replace("-","")]-a[propertyName.replace("-","")]}):arrayToSort.sort(function(a,b){return a[propertyName]-b[propertyName]}),arrayToSort):(qmLog.info("Cannot sort by "+propertyName+" because it's not an array!"),arrayToSort)},unsetNullProperties:function(array){if(!array)return qmLog.error("Nothing provided to unsetNullProperties"),null;for(var i=0;i<array.length;i++)array[i]=qm.objectHelper.unsetNullProperties(array[i]);return array},variableIsArray:function(variable){return variable?!!Array.isArray(variable)||(variable.constructor===Array||(!!(variable instanceof Array)||"[object Array]"===Object.prototype.toString.call(variable))):(qmLog.info(variable+" provided to variableIsArray"),!1)},removeArrayElementsWithDuplicateIds:function(array){if(!array)return array;for(var a=array.concat(),i=0;i<a.length;i++)for(var j=i+1;j<a.length;j++){if(a[i]||qmLog.error("a[i] not defined!"),!a[j])return qmLog.error("a[j] not defined!"),a;a[i].id===a[j].id&&a.splice(j--,1)}return a},filterByRequestParams:function(array,requestParams){if(!requestParams)return qmLog.info("No requestParams provided to filterByRequestParams"),array;var allowedFilterParams=["variableCategoryName","id","name","manualTracking","outcome","upc"],excludedFilterParams=["includePublic","excludeLocal","minimumNumberOfResultsRequiredToAvoidAPIRequest","sort","limit","appName","appVersion","accessToken","clientId","barcodeFormat","searchPhrase","platform"],greaterThanPropertyName=null,greaterThanPropertyValue=null,lessThanPropertyName=null,lessThanPropertyValue=null,log=[],filterPropertyValues=[],filterPropertyNames=[];angular.forEach(requestParams,function(value,key){if("string"==typeof value&&-1!==value.indexOf("(lt)"))lessThanPropertyValue=value.replace("(lt)",""),lessThanPropertyValue=Number(lessThanPropertyValue),lessThanPropertyName=key;else if("string"==typeof value&&-1!==value.indexOf("(gt)"))greaterThanPropertyValue=value.replace("(gt)",""),greaterThanPropertyValue=Number(greaterThanPropertyValue),greaterThanPropertyName=key;else{if(!1===value&&"manualTracking"===key)return;if(null===value||""===value||"Anything"===value)return;if(-1!==excludedFilterParams.indexOf(key))return;-1===allowedFilterParams.indexOf(key)?qmLog.error(key+" is not in allowed filter params"):qmLog.info("filtering by "+key),filterPropertyValues.push(value),filterPropertyNames.push(key)}},log);var results=qm.arrayHelper.filterByPropertyOrSize(array,null,null,lessThanPropertyName,lessThanPropertyValue,greaterThanPropertyName,greaterThanPropertyValue);if(results)for(var i=0;i<filterPropertyNames.length;i++)results=qm.arrayHelper.filterByProperty(filterPropertyNames[i],filterPropertyValues[i],results);return results?(requestParams.searchPhrase&&""!==requestParams.searchPhrase&&(results=qm.arrayHelper.getWithNameContainingEveryWord(requestParams.searchPhrase,results)),requestParams&&requestParams.sort&&(results=qm.arrayHelper.sortByProperty(results,requestParams.sort)),results=qm.arrayHelper.removeArrayElementsWithDuplicateIds(results)):null},getUnique:function(array,propertyName){var i,flags=[],output=[],l=array.length;for(i=0;i<l;i++)flags[array[i][propertyName]]||(flags[array[i][propertyName]]=!0,output.push(array[i]));return output},deleteFromArrayByProperty:function(localStorageItemArray,propertyName,propertyValue){for(var elementsToKeep=[],i=0;i<localStorageItemArray.length;i++)localStorageItemArray[i][propertyName]!==propertyValue&&elementsToKeep.push(localStorageItemArray[i]);return elementsToKeep},addToOrReplaceByIdAndMoveToFront:function(localStorageItemArray,replacementElementArray){replacementElementArray instanceof Array||(replacementElementArray=[replacementElementArray]);var elementsToKeep=JSON.parse(JSON.stringify(replacementElementArray)),found=!1;if(localStorageItemArray)for(var i=0;i<localStorageItemArray.length;i++){found=!1;for(var j=0;j<replacementElementArray.length;j++)replacementElementArray[j].id&&localStorageItemArray[i].id===replacementElementArray[j].id&&(found=!0);found||elementsToKeep.push(localStorageItemArray[i])}return elementsToKeep}},auth:{getAndSaveAccessTokenFromCurrentUrl:function(){qmLog.authDebug("getAndSaveAccessTokenFromCurrentUrl "+window.location.href);var accessTokenFromUrl=qm.auth.getAccessTokenFromCurrentUrl();if(accessTokenFromUrl){if(accessTokenFromUrl.length<10)return qmLog.error("accessTokenFromUrl is "+accessTokenFromUrl),null;qmLog.authDebug("getAndSaveAccessTokenFromCurrentUrl saving "+accessTokenFromUrl),qm.auth.saveAccessToken(accessTokenFromUrl)}return accessTokenFromUrl},saveAccessToken:function(accessToken){qm.urlHelper.getParam("doNotRemember")||(qmLog.authDebug("saveAccessToken: Saving access token in local storage because doNotRemember is not set"),qm.storage.setItem(qm.items.accessToken,accessToken))},getAccessTokenFromUrlUserOrStorage:function(user){if(user&&(window.qmUser=user),qm.auth.getAndSaveAccessTokenFromCurrentUrl())return qm.auth.getAndSaveAccessTokenFromCurrentUrl();if(qm.userHelper.getUserFromLocalStorage()&&qm.userHelper.getUserFromLocalStorage().accessToken){if(!(qm.userHelper.getUserFromLocalStorage().accessToken.length<10))return qm.userHelper.getUserFromLocalStorage().accessToken;qmLog.error("qm.userHelper.getUserFromLocalStorage().accessToken is "+qm.userHelper.getUserFromLocalStorage().accessToken)}if(qm.storage.getItem(qm.items.accessToken)){if(!(qm.storage.getItem(qm.items.accessToken).length<10))return qm.storage.getItem(qm.items.accessToken);qmLog.error("accessTokenFromUrl is "+qm.storage.getItem(qm.items.accessToken))}return qmLog.checkUrlAndStorageForDebugMode(),qmLog.info("No access token or user!"),null},saveAccessTokenResponse:function(accessResponse){var accessToken;if(accessToken="string"==typeof accessResponse?accessResponse:accessResponse.accessToken||accessResponse.access_token){window.qm.storage.setItem("accessToken",accessToken);var refreshToken=accessResponse.refreshToken||accessResponse.refresh_token;refreshToken&&qm.storage.setItem(qm.items.refreshToken,refreshToken);var expiresAtMilliseconds,expiresAt=accessResponse.expires||accessResponse.expiresAt||accessResponse.accessTokenExpires;if(accessResponse.accessTokenExpiresAtMilliseconds)expiresAtMilliseconds=accessResponse.accessTokenExpiresAtMilliseconds;else if("string"==typeof expiresAt||expiresAt instanceof String)expiresAtMilliseconds=window.qm.timeHelper.getUnixTimestampInMilliseconds(expiresAt);else if(expiresAt===parseInt(expiresAt,10)&&expiresAt<window.qm.timeHelper.getUnixTimestampInMilliseconds())expiresAtMilliseconds=1e3*expiresAt;else if(expiresAt===parseInt(expiresAt,10)&&expiresAt>window.qm.timeHelper.getUnixTimestampInMilliseconds())expiresAtMilliseconds=expiresAt;else{var expiresInSeconds=accessResponse.expiresIn||accessResponse.expires_in;expiresAtMilliseconds=window.qm.timeHelper.getUnixTimestampInMilliseconds()+1e3*expiresInSeconds,qmLog.authDebug("Expires in is "+expiresInSeconds+" seconds. This results in expiresAtMilliseconds being: "+expiresAtMilliseconds)}if(expiresAtMilliseconds)return qm.storage.setItem(qm.items.expiresAtMilliseconds,expiresAtMilliseconds-864e5),accessToken;qmLog.error("No expiresAtMilliseconds!"),qmLog.error("No expiresAtMilliseconds!","expiresAt is "+expiresAt+" || accessResponse is "+JSON.stringify(accessResponse)+" and user is "+qm.storage.getAsString("user"),{groupingHash:"No expiresAtMilliseconds!"},"error");var groupingHash="Access token expiresAt not provided in recognizable form!";qmLog.error(groupingHash),qmLog.error(groupingHash,"expiresAt is "+expiresAt+" || accessResponse is "+JSON.stringify(accessResponse)+" and user is "+qm.storage.getAsString("user"),{groupingHash:groupingHash},"error")}else qmLog.error("No access token provided to qm.auth.saveAccessTokenResponse")},getAccessTokenFromCurrentUrl:function(){qmLog.authDebug("getAndSaveAccessTokenFromCurrentUrl "+window.location.href);var accessTokenFromUrl=qm.urlHelper.getParam("accessToken")?qm.urlHelper.getParam("accessToken"):qm.urlHelper.getParam("quantimodoAccessToken");return accessTokenFromUrl?qmLog.authDebug("Got access token from url"):qmLog.authDebug("No access token from url"),accessTokenFromUrl},deleteAllAccessTokens:function(){qmLog.info("deleteAllAccessTokens..."),qm.userHelper.getUserFromLocalStorage()&&(qm.userHelper.getUserFromLocalStorage().accessToken=null),qm.auth.deleteAllCookies()},deleteAllCookies:function(){qmLog.info("Deleting all cookies...");for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=cookies[i],eqPos=cookie.indexOf("="),name=eqPos>-1?cookie.substr(0,eqPos):cookie;document.cookie=name+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}},buildInfo:{},client:{getClientWebsiteUrl:function(successHandler,partialPath){partialPath||(partialPath=""),qm.api.getClientIdWithCallback(function(clientId){successHandler("https://"+clientId+".quantimo.do/ionic/Modo/www/"+partialPath)})}},connectorHelper:{getConnectorsFromApi:function(params,successCallback,errorHandler){function successHandler(connectors){connectors?(qmLog.info("Got connectors from API..."),successCallback&&successCallback(connectors)):qmLog.error("Could not get connectors from API...")}qmLog.info("Getting connectors from API..."),qm.api.configureClient();var apiInstance=new Quantimodo.ConnectorsApi;params=qm.api.addGlobalParams(params),apiInstance.getConnectors(params,function(error,data,response){qm.api.generalResponseHandler(error,data,response,successHandler,errorHandler,params,"getUserFromApi")})},getConnectorsFromLocalStorage:function(){var connectors=qm.storage.getItem(qm.items.connectors);return connectors&&connectors.connectors?(qm.storage.setItem(qm.items.connectors,connectors.connectors),connectors.connectors):connectors},getConnectorsFromLocalStorageOrApi:function(successHandler,errorHandler){var connectors=qm.connectorHelper.getConnectorsFromLocalStorage();connectors?successHandler(connectors):qm.connectorHelper.getConnectorsFromApi({},successHandler,errorHandler)},getConnectorByName:function(connectorName,successHandler){if(!successHandler)return qm.connectorHelper.getConnectorsFromLocalStorage().find(function(connector){return connector.name===connectorName.toLowerCase()});qm.connectorHelper.getConnectorsFromLocalStorageOrApi(function(connectors){var match=connectors.find(function(connector){return connector.name===connectorName.toLowerCase()});successHandler(match)})}},correlations:{getAggregatedCorrelationsFromApi:function(params,successHandler,errorHandler){(params=qm.api.addGlobalParams(params)).commonOnly=!0;var cachedData=qm.api.cacheGet(params,qm.items.aggregatedCorrelations);cachedData&&successHandler?successHandler(cachedData):(qm.api.configureClient(),(new Quantimodo.AnalyticsApi).getCorrelations(params,function(error,data,response){qm.api.generalResponseHandler(error,data,response,successHandler,errorHandler,params,"getAggregatedCorrelationsFromApi")}))},getUserCorrelationsFromApi:function(params,successHandler,errorHandler){params=qm.api.addGlobalParams(params);var cachedData=qm.api.cacheGet(params,qm.items.userCorrelations);cachedData&&successHandler?successHandler(cachedData):(qm.api.configureClient(),(new Quantimodo.AnalyticsApi).getCorrelations(params,function(error,data,response){qm.api.generalResponseHandler(error,data,response,successHandler,errorHandler,params,qm.items.userCorrelations)}))}},functionHelper:{getCurrentFunctionNameDoesNotWork:function(){var functionName=arguments.callee.toString();return functionName=functionName.substr("function ".length),functionName=functionName.substr(0,functionName.indexOf("("))}},geoLocation:{getFoursqureClientId:function(){if(qm.privateConfig.FOURSQUARE_CLIENT_ID)return qm.privateConfig.FOURSQUARE_CLIENT_ID;if(qm.getAppSettings().privateConfig&&qm.getAppSettings().privateConfig.FOURSQUARE_CLIENT_ID)return qm.getAppSettings().privateConfig.FOURSQUARE_CLIENT_ID;var connector=qm.connectorHelper.getConnectorByName("foursquare");return connector?connector.connectorClientId:void 0},getFoursquareClientSecret:function(){if(qm.privateConfig.FOURSQUARE_CLIENT_SECRET)return qm.privateConfig.FOURSQUARE_CLIENT_SECRET;if(qm.getAppSettings().privateConfig&&qm.getAppSettings().privateConfig.FOURSQUARE_CLIENT_SECRET)return qm.getAppSettings().privateConfig.FOURSQUARE_CLIENT_SECRET;var connector=qm.connectorHelper.getConnectorByName("foursquare");return connector?connector.connectorClientSecret:void 0},getGoogleMapsApiKey:function(){return qm.privateConfig.GOOGLE_MAPS_API_KEY?qm.privateConfig.GOOGLE_MAPS_API_KEY:qm.getAppSettings().privateConfig&&qm.getAppSettings().privateConfig.GOOGLE_MAPS_API_KEY?qm.getAppSettings().privateConfig.GOOGLE_MAPS_API_KEY:void 0}},getAppSettings:function(successHandler){if(!successHandler)return qm.appsManager.getAppSettingsFromMemory()?qm.appsManager.getAppSettingsFromMemory():null;qm.appsManager.getAppSettingsLocallyOrFromApi(successHandler)},getClientId:function(successHandler){if(!successHandler)return qm.api.getClientId();qm.api.getClientIdWithCallback(successHandler)},getPrimaryOutcomeVariable:function(){if(qm.getAppSettings()&&qm.getAppSettings().primaryOutcomeVariableDetails)return qm.getAppSettings().primaryOutcomeVariableDetails;var variables={"Overall Mood":{id:1398,name:"Overall Mood",variableName:"Overall Mood",variableCategoryName:"Mood",userUnitAbbreviatedName:"/5",unitAbbreviatedName:"/5",combinationOperation:"MEAN",valence:"positive",unitName:"1 to 5 Rating",ratingOptionLabels:["Depressed","Sad","OK","Happy","Ecstatic"],ratingValueToTextConversionDataSet:{1:"depressed",2:"sad",3:"ok",4:"happy",5:"ecstatic"},ratingTextToValueConversionDataSet:{depressed:1,sad:2,ok:3,happy:4,ecstatic:5},trackingQuestion:"How are you?",averageText:"Your average mood is "},"Energy Rating":{id:108092,name:"Energy Rating",variableName:"Energy Rating",variableCategoryName:"Emotions",unitAbbreviatedName:"/5",combinationOperation:"MEAN",positiveOrNegative:"positive",unitName:"1 to 5 Rating",ratingOptionLabels:["1","2","3","4","5"],ratingValueToTextConversionDataSet:{1:"1",2:"2",3:"3",4:"4",5:"5"},ratingTextToValueConversionDataSet:{1:1,2:2,3:3,4:4,5:5},trackingQuestion:"How is your energy level right now?",averageText:"Your average energy level is "}};return qm.getAppSettings()&&qm.getAppSettings().primaryOutcomeVariableName?variables[qm.getAppSettings().primaryOutcomeVariableName]:variables["Overall Mood"]},getPrimaryOutcomeVariableByNumber:function(num){return!!qm.getPrimaryOutcomeVariable().ratingValueToTextConversionDataSet[num]&&qm.getPrimaryOutcomeVariable().ratingValueToTextConversionDataSet[num]},getSourceName:function(){return qm.appsManager.getAppSettingsFromMemory().appDisplayName+" for "+qm.platform.getCurrentPlatform()},getUser:function(successHandler,errorHandler){if(!successHandler)return qm.userHelper.getUserFromLocalStorage();qm.userHelper.getUserFromLocalStorageOrApi(successHandler,errorHandler)},globalHelper:{setStudy:function(study){qm.storage.setGlobal(qm.stringHelper.removeSpecialCharacters(study.causeVariable.name+"_"+study.effectVariable.name),study)},getStudy:function(causeVariableName,effectVariableName){qm.storage.getGlobal(qm.stringHelper.removeSpecialCharacters(causeVariableName+"_"+effectVariableName))},setItem:function(key,value){qm.storage.setGlobal(key,value)},getItem:function(key){return qm.storage.getGlobal(key)},removeItem:function(key){qmLog.debug("Removing "+key+" from globals"),delete qm.globals[key]}},globals:{},help:{getExplanations:function(){return{predictorSearch:{title:"Select Predictor",textContent:"Search for a predictor like a food or treatment that you want to know the effects of..."},outcomeSearch:{title:"Select Outcome",textContent:"Select an outcome variable to be optimized like overall mood or sleep quality..."},locationAndWeatherTracking:{title:"Location and Weather Tracking",textContent:qm.variableCategoryHelper.getVariableCategory("Location").moreInfo},minimumAllowedValue:{title:"Minimum Allowed Value",textContent:"The minimum allowed value for measurements. While you can record a value below this minimum, it will be excluded from the correlation analysis."},maximumAllowedValue:{title:"Maximum Allowed Value",textContent:"The maximum allowed value for measurements.  While you can record a value above this maximum, it will be excluded from the correlation analysis."},onsetDelayInHours:{title:"Onset Delay",unitName:"Hours",textContent:"An outcome is always preceded by the predictor or stimulus. The amount of time that elapses after the predictor/stimulus event before the outcome as perceived by a self-tracker is known as the “onset delay”.  For example, the “onset delay” between the time a person takes an aspirin (predictor/stimulus event) and the time a person perceives a change in their headache severity (outcome) is approximately 30 minutes."},onsetDelay:{title:"Onset Delay",unitName:"Seconds",textContent:"An outcome is always preceded by the predictor or stimulus. The amount of time that elapses after the predictor/stimulus event before the outcome as perceived by a self-tracker is known as the “onset delay”.  For example, the “onset delay” between the time a person takes an aspirin (predictor/stimulus event) and the time a person perceives a change in their headache severity (outcome) is approximately 30 minutes."},durationOfActionInHours:{title:"Duration of Action",unitName:"Hours",textContent:"The amount of time over which a predictor/stimulus event can exert an observable influence on an outcome variable’s value. For instance, aspirin typically decreases headache severity for approximately four hours (duration of action) following the onset delay."},durationOfAction:{title:"Duration of Action",unitName:"Seconds",textContent:"The amount of time over which a predictor/stimulus event can exert an observable influence on an outcome variable’s value. For instance, aspirin typically decreases headache severity for approximately four hours (duration of action) following the onset delay."},fillingValue:{title:"Filling Value",textContent:"When it comes to analysis to determine the effects of this variable, knowing when it did not occur is as important as knowing when it did occur. For example, if you are tracking a medication, it is important to know when you did not take it, but you do not have to log zero values for all the days when you haven't taken it. Hence, you can specify a filling value (typically 0) to insert whenever data is missing."},combinationOperation:{title:"Combination Method",textContent:"How multiple measurements are combined over time.  We use the average (or mean) for things like your weight.  Summing is used for things like number of apples eaten."},defaultValue:{title:"Default Value",textContent:"If specified, there will be a button that allows you to quickly record this value."},experimentStartTime:{title:"Analysis Start Date",textContent:"Data prior to this date will not be used in analysis."},experimentEndTime:{title:"Analysis End Date",textContent:"Data after this date will not be used in analysis."},thumbs:{title:"Help Me Learn",textContent:"I'm really good at finding correlations and even compensating for various onset delays and durations of action. However, you're much better than me at knowing if there's a way that a given factor could plausibly influence an outcome. You can help me learn and get better at my predictions by pressing the thumbs down button for relationships that you don't think could possibly be causal."}}},getExplanation:function(parameterOrPropertyName,modelName,callback){var explanations=qm.help.getExplanations();if(explanations[parameterOrPropertyName])return callback(explanations[parameterOrPropertyName]);modelName?qm.apiHelper.getPropertyDescription(modelName,parameterOrPropertyName,callback):qm.apiHelper.getParameterDescription(parameterOrPropertyName,callback)}},integration:{getIntegrationJsWithoutClientId:function(clientId,callback){qm.api.configureClient(),(new Quantimodo.ConnectorsApi).getIntegrationJs({clientId:"CLIENT_ID"},function(error,data,response){data&&(qm.integration.integrationJs=data,clientId&&callback&&callback(qm.integration.integrationJs.replace("CLIENT_ID",clientId))),qm.api.responseHandler(error,data,response)})},getIntegrationJsEmbedCodeForClient:function(clientId,callback){if(qm.integration.integrationJs)return callback(qm.integration.integrationJs.replace("CLIENT_ID",clientId));qm.integration.getIntegrationJsWithoutClientId(clientId,callback)}},items:{accessToken:"accessToken",aggregatedCorrelations:"aggregatedCorrelations",apiUrl:"apiUrl",appSettings:"appSettings",appSettingsRevisions:"appSettingsRevisions",chromeWindowId:"chromeWindowId",clientId:"clientId",commonVariables:"commonVariables",connectors:"connectors",debugMode:"debugMode",defaultHelpCards:"defaultHelpCards",deviceTokenOnServer:"deviceTokenOnServer",deviceTokenToSync:"deviceTokenToSync",drawOverAppsPopupEnabled:"drawOverAppsPopupEnabled",expiresAtMilliseconds:"expiresAtMilliseconds",hideImportHelpCard:"hideImportHelpCard",introSeen:"introSeen",lastGotNotificationsAtMilliseconds:"lastGotNotificationsAtMilliseconds",lastLocalNotificationTime:"lastLocalNotificationTime",lastLatitude:"lastLatitude",lastLocationAddress:"lastLocationAddress",lastLocationName:"lastLocationName",lastLocationNameAndAddress:"lastLocationNameAndAddress",lastLocationPostUnixTime:"lastLocationPostUnixTime",lastLocationResultType:"lastLocationResultType",lastLocationUpdateTimeEpochSeconds:"lastLocationUpdateTimeEpochSeconds",lastLongitude:"lastLongitude",lastReminder:"lastReminder",lastStudyOrCorrelation:"lastStudyOrCorrelation",lastPopupNotificationUnixTimeSeconds:"lastPopupNotificationUnixTimeSeconds",lastPushTimestamp:"lastPushTimestamp",measurementsQueue:"measurementsQueue",mostFrequentReminderIntervalInSeconds:"mostFrequentReminderIntervalInSeconds",notificationInterval:"notificationInterval",notificationsSyncQueue:"notificationsSyncQueue",onboarded:"onboarded",physicianUser:"physicianUser",privateConfig:"privateConfig",primaryOutcomeVariableMeasurements:"primaryOutcomeVariableMeasurements",refreshToken:"refreshToken",scheduledLocalNotifications:"scheduledLocalNotifications",trackingReminderNotifications:"trackingReminderNotifications",trackingReminderNotificationSyncScheduled:"trackingReminderNotificationSyncScheduled",trackingReminders:"trackingReminders",trackingReminderSyncQueue:"trackingReminderSyncQueue",units:"units",user:"user",useSmallInbox:"useSmallInbox",userCorrelations:"userCorrelations",userVariables:"userVariables",variableCategories:"variableCategories"},loaders:{robots:function(){new TimelineMax({repeat:-1,repeatDelay:2}).fromTo("#blueBot",2,{x:0},{x:0,ease:Power3.easeInOut},"-=1.5").to("#blueBot",2,{x:0,onStart:function(){TweenMax.fromTo("#redBot",2,{x:-1e3},{x:0,delay:.65,ease:Power3.easeInOut}),TweenMax.to("body",2,{backgroundColor:"#ADBD90",delay:.65})},ease:Power3.easeInOut},"+=2");new TimelineMax({repeat:-1}).fromTo("#redBotSignal",.5,{drawSVG:"0% 15%",ease:Linear.easeInOut},{drawSVG:"85% 100%",ease:Linear.easeInOut}).fromTo("#redBotSignal",.5,{drawSVG:"85% 100%",ease:Linear.easeInOut},{drawSVG:"0% 15%",ease:Linear.easeInOut});var bolt=new TweenMax.to(["#bolt","#leftEar","#rightEar","#nose"],.5,{opacity:.25,onComplete:function(){bolt.reverse()},onReverseComplete:function(){bolt.play()}}),rhb=new TweenMax.to("#redHeart",.5,{scale:1.1,transformOrigin:"50% 50%",ease:Power2.easeInOut,onComplete:function(){rhb.reverse()},onReverseComplete:function(){rhb.play()}}),sra=new TweenMax.to("#redRightArm",.5,{rotation:-3,ease:Linear.easeInOut,transformOrigin:"45% 25%",onComplete:function(){sra.reverse()},onReverseComplete:function(){sra.play()}}),sla=new TweenMax.to("#redLeftArm",.5,{rotation:3,ease:Linear.easeInOut,transformOrigin:"25% 25%",onComplete:function(){sla.reverse()},onReverseComplete:function(){sla.play()}}),redhead=new TweenMax.to("#redHead",1,{y:5,ease:Power2.easeInOut,onComplete:function(){redhead.reverse()},onReverseComplete:function(){redhead.play()}}),blueBotRArm=(new TweenMax.staggerFromTo(["#light3","#light6"],.5,{fill:"#fff"},{fill:"#398080",repeat:-1},.2),new TweenMax.staggerFromTo(["#light2","#light5"],.5,{fill:"#398080"},{fill:"#E20717",repeat:-1},.2),new TweenMax.staggerFromTo(["#light1","#light4"],.5,{fill:"#E20717"},{fill:"#fffff",repeat:-1},.2),new TweenMax.fromTo("#pulse",2,{drawSVG:"0%",ease:Linear.easeInOut},{drawSVG:"100%",ease:Linear.easeInOut,repeat:-1}),new TweenMax.fromTo("#blueBotStatic",.75,{ease:Power1.easeInOut,opacity:0},{ease:Power1.easeInOut,opacity:1,repeat:-1}),new TweenMax.to("#blueBotRightArm",.5,{rotation:-3,y:2,ease:Linear.easeInOut,transformOrigin:"65% 100%",onComplete:function(){blueBotRArm.reverse()},onReverseComplete:function(){blueBotRArm.play()}})),blueBotLArm=new TweenMax.to("#blueBotLeftArm",.5,{rotation:3,y:2,ease:Linear.easeInOut,transformOrigin:"100% 65%",onComplete:function(){blueBotLArm.reverse()},onReverseComplete:function(){blueBotLArm.play()}}),dial=new TweenMax.to("#dial",.5,{rotation:30,ease:Linear.easeInOut,transformOrigin:"50% 100%",onComplete:function(){dial.reverse()},onReverseComplete:function(){dial.play()}}),blueBotBody=new TweenMax.to("#blueBotBody",.5,{y:2,ease:Sine.easeInOut,onComplete:function(){blueBotBody.reverse()},onReverseComplete:function(){blueBotBody.play()}}),blueBotHead=new TweenMax.to("#blueBotHead",.5,{y:-2,ease:Sine.easeInOut,onComplete:function(){blueBotHead.reverse()},onReverseComplete:function(){blueBotHead.play()}}),eyes=(new TweenMax.staggerFromTo("#mouthBars rect",.5,{fill:"#398080"},{fill:"#fffff",repeat:-1},.2),new TweenMax.to("#blueBotEyes",.5,{scale:1.1,transformOrigin:"50% 50%",ease:Sine.easeInOut,onComplete:function(){eyes.reverse()},onReverseComplete:function(){eyes.play()}}))}},localForage:{clear:function(){qmLog.info("Clearing localforage!"),localforage.clear()},saveWithUniqueId:function(key,arrayToSave){qm.arrayHelper.variableIsArray(arrayToSave)||(arrayToSave=[arrayToSave]),qmLog.info("saving "+key+" with unique id"),qm.localForage.getItem(key,function(existingData){existingData||(existingData=[]);for(var i=0;i<arrayToSave.length;i++){var newObjectToSave=arrayToSave[i],existingObjectToReplace=existingData.find(function(obj){return obj.id===newObjectToSave.id});existingObjectToReplace&&existingObjectToReplace.lastSelectedAt&&(newObjectToSave.lastSelectedAt=existingObjectToReplace.lastSelectedAt),(existingData=existingData.filter(function(obj){return obj.id!==newObjectToSave.id})).unshift(newObjectToSave)}qm.localForage.setItem(key,existingData)})},deleteById:function(key,id){qmLog.info("deleting "+key+" by id "+id),qm.localForage.getItem(key,function(existingData){existingData||(existingData=[]),existingData=existingData.filter(function(obj){return obj.id!==id}),qm.localForage.setItem(key,existingData)})},searchByProperty:function(key,propertyName,searchTerm,successHandler,errorHandler){searchTerm=searchTerm.toLowerCase(),qmLog.info("searching "+key+" by "+propertyName+" "+searchTerm),qm.localForage.getItem(key,function(existingData){existingData||(existingData=[]),existingData=existingData.filter(function(obj){return-1!==obj[propertyName].toLowerCase().indexOf(searchTerm)}),successHandler(existingData)},errorHandler)},getItem:function(key,successHandler,errorHandler){if(successHandler){qmLog.debug("Getting "+key+" from globals");var fromGlobals=qm.globalHelper.getItem(key);if(fromGlobals||!1===fromGlobals||0===fromGlobals)successHandler(fromGlobals);else{if("undefined"==typeof localforage){var error="localforage not defined so can't get "+key+"!";return qmLog.error(error),void(errorHandler&&errorHandler(error))}qmLog.info("Getting "+key+" from localforage"),localforage.getItem(key,function(err,data){err?errorHandler&&errorHandler(err):successHandler(data)})}}else qmLog.error("No successHandler provided to localForage.getItem!")},setItem:function(key,value,successHandler,errorHandler){if(value=JSON.parse(JSON.stringify(value)),qm.globalHelper.setItem(key,value),"undefined"==typeof localforage){var errorMessage="local storage is undefined so can't set "+key;return qmLog.error(errorMessage),void(errorHandler&&errorHandler(errorMessage))}localforage.setItem(key,value,function(err){err?errorHandler&&errorHandler(err):successHandler&&successHandler()})},removeItem:function(key,value,successHandler,errorHandler){qm.globalHelper.removeItem(key),localforage.removeItem(key,function(err){err?errorHandler&&errorHandler(err):successHandler&&successHandler()})},getWithFilters:function(localStorageItemName,successHandler,errorHandler,filterPropertyName,filterPropertyValue,lessThanPropertyName,lessThanPropertyValue,greaterThanPropertyName,greaterThanPropertyValue){qm.localForage.getItem(localStorageItemName,function(data){data=qm.arrayHelper.filterByPropertyOrSize(data,filterPropertyName,filterPropertyValue,lessThanPropertyName,lessThanPropertyValue,greaterThanPropertyName,greaterThanPropertyValue),successHandler(data)},function(error){errorHandler&&errorHandler(error)})},getElementsWithRequestParams:function(localStorageItemName,requestParams,successHandler,errorHandler){qm.localForage.getItem(localStorageItemName,function(data){data=qm.arrayHelper.filterByRequestParams(data,requestParams),successHandler(data)},function(error){errorHandler&&errorHandler(error)})},addToOrReplaceByIdAndMoveToFront:function(localStorageItemName,replacementElementArray,successHandler){qmLog.debug("qm.localForage.addToOrReplaceByIdAndMoveToFront in "+localStorageItemName+": "+JSON.stringify(replacementElementArray).substring(0,20)+"..."),qm.localForage.getItem(localStorageItemName,function(localStorageItemArray){var elementsToKeep=qm.arrayHelper.addToOrReplaceByIdAndMoveToFront(localStorageItemArray,replacementElementArray);qm.localForage.setItem(localStorageItemName,elementsToKeep),successHandler&&successHandler(elementsToKeep)})}},measurements:{getMeasurementsFromApi:function(params,successHandler,errorHandler){params=qm.api.addGlobalParams(params);qm.api.cacheGet(params,"getMeasurementsFromApi");qm.api.configureClient(),(new Quantimodo.MeasurementsApi).getMeasurements(params,function(error,data,response){qm.api.generalResponseHandler(error,data,response,successHandler,errorHandler,params,"getMeasurementsFromApi")})}},manualTrackingVariableCategoryNames:["Emotions","Symptoms","Treatments","Foods","Vital Signs","Physical Activity","Sleep","Miscellaneous","Environment"],notifications:{actions:{trackYesAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:1};console.log("trackYesAction push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},trackNoAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:0};console.log("trackNoAction push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},trackZeroAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:0};console.log("trackZeroAction push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},trackOneRatingAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:1};console.log("trackOneRatingAction push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},trackTwoRatingAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:2};console.log("trackTwoRatingAction push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},trackThreeRatingAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:3};console.log("trackThreeRatingAction push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},trackFourRatingAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:4};console.log("trackFourRatingAction push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},trackFiveRatingAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:5};console.log("trackDefaultValueAction push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},trackDefaultValueAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId};console.log("trackDefaultValueAction push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},snoozeAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId};console.log("snoozeAction push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),body.action="snooze",qm.notifications.postTrackingReminderNotifications(body)},trackLastValueAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:data.lastValue};qmLog.pushDebug("trackLastValueAction"," Push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},trackSecondToLastValueAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:data.secondToLastValue};console.log("trackSecondToLastValueAction"," Push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)},trackThirdToLastValueAction:function(data){var body={trackingReminderNotificationId:data.trackingReminderNotificationId,modifiedValue:data.thirdToLastValue};console.log("trackThirdToLastValueAction"," Push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body)}},getFromGlobalsOrLocalStorage:function(variableCategoryName){var notifications=qm.storage.getItem(qm.items.trackingReminderNotifications);return notifications&&notifications.length?variableCategoryName?qm.arrayHelper.getByProperty("variableCategoryName",variableCategoryName,notifications):notifications:[]},getMostRecentRatingNotificationNotInSyncQueue:function(){var uniqueRatingNotifications=qm.notifications.getAllUniqueRatingNotifications();if(!uniqueRatingNotifications)return qmLog.info("No uniqueRatingNotifications in storage"),null;for(var i=0;i<uniqueRatingNotifications.length;i++){var notification=uniqueRatingNotifications[i];if(!window.notificationsSyncQueue||!qm.arrayHelper.arrayHasItemWithSpecificPropertyValue("variableName",notification.variableName,window.notificationsSyncQueue)){qmLog.info("Got uniqueRatingNotification not in sync queue: "+notification.variableName,null,notification);var hoursAgo=qm.timeHelper.hoursAgo(notification.trackingReminderNotificationTimeEpoch);if(hoursAgo<24)return notification;console.log(hoursAgo+" hours ago is too old!")}}return qmLog.info("No uniqueRatingNotifications not in sync queue"),null},getMostRecentUniqueNotificationNotInSyncQueue:function(){var uniqueNotifications=qm.notifications.getUniqueNotificationsDueInLast24();if(!uniqueNotifications||!uniqueNotifications.length)return qmLog.info("No uniqueNotifications due in last 24 in storage"),null;for(var i=0;i<uniqueNotifications.length;i++){var notification=uniqueNotifications[i];if(!window.notificationsSyncQueue||!qm.arrayHelper.arrayHasItemWithSpecificPropertyValue("variableName",notification.variableName,window.notificationsSyncQueue))return qmLog.info("Got uniqueNotification not in sync queue: "+notification.variableName),notification}return qmLog.info("No uniqueNotifications not in sync queue"),null},setLastPopupTime:function(time){return void 0===time&&(time=qm.timeHelper.getUnixTimestampInSeconds()),qmLog.pushDebug(arguments.callee.caller.name+" setLastPopupTime to "+time),qm.storage.setItem(qm.items.lastPopupNotificationUnixTimeSeconds,time),!0},getTimeSinceLastPopupString:function(){return qm.timeHelper.getTimeSinceString(qm.notifications.getLastPopupUnixTime())},getTimeSinceLastLocalNotification:function(){return qm.timeHelper.getTimeSinceString(qm.storage.getItem(qm.items.lastLocalNotificationTime))},getLastPopupUnixTime:function(){return qm.storage.getItem(qm.items.lastPopupNotificationUnixTimeSeconds)},lastPopupWasBeforeLastReminderTime:function(){var lastTime=qm.notifications.getLastPopupUnixTime();return qmLog.info("Last popup at "+qm.timeHelper.getTimeSinceString(lastTime)),lastTime<qm.timeHelper.getUnixTimestampInSeconds()-qm.notifications.getMostFrequentReminderIntervalInSeconds()&&(qmLog.error("No popups shown since before last reminder time!  Re-initializing popups..."),!0)},getSecondsSinceLastPopup:function(){return qm.timeHelper.getUnixTimestampInSeconds()-qm.notifications.getLastPopupUnixTime()},getMostFrequentReminderIntervalInSeconds:function(){return qm.storage.getItem(qm.items.mostFrequentReminderIntervalInSeconds)},canWeShowPopupYet:function(path){if(!qm.notifications.getLastPopupUnixTime())return qm.notifications.setLastPopupTime(),!0;var minimumTimeBetweenInMinutes=30;return qm.notifications.getMostFrequentReminderIntervalInMinutes()<30&&(minimumTimeBetweenInMinutes=qm.notifications.getMostFrequentReminderIntervalInMinutes()),qm.notifications.getSecondsSinceLastPopup()>60*minimumTimeBetweenInMinutes?(qm.notifications.setLastPopupTime(),!0):(qmLog.pushDebug("Too soon to show popup!","Cannot show popup because last one was only "+qm.notifications.getTimeSinceLastPopupString()+" and most Frequent Interval In Minutes is "+minimumTimeBetweenInMinutes+". path: "+path),!1)},getMostFrequentReminderIntervalInMinutes:function(){var mostFrequentReminderIntervalInSeconds=qm.storage.getItem(qm.items.mostFrequentReminderIntervalInSeconds);return mostFrequentReminderIntervalInSeconds||(mostFrequentReminderIntervalInSeconds=86400),mostFrequentReminderIntervalInSeconds/60},setLastNotificationsRefreshTime:function(){window.qm.storage.setLastRequestTime("GET",qm.apiPaths.trackingReminderNotificationsPast)},getLastNotificationsRefreshTime:function(){var lastTime=window.qm.storage.getLastRequestTime("GET",qm.apiPaths.trackingReminderNotificationsPast);return qmLog.info("Last notifications refresh "+qm.timeHelper.getTimeSinceString(lastTime)),lastTime},getSecondsSinceLastNotificationsRefresh:function(){return qmLog.info("Last notifications refresh "+qm.timeHelper.getTimeSinceString(qm.notifications.getLastNotificationsRefreshTime())),qm.timeHelper.getUnixTimestampInSeconds()-qm.notifications.getLastNotificationsRefreshTime()},addToSyncQueue:function(trackingReminderNotification){return qm.notifications.deleteById(trackingReminderNotification.id),qm.userVariables.updateLatestMeasurementTime(trackingReminderNotification.variableName,trackingReminderNotification.modifiedValue),qm.storage.addToOrReplaceByIdAndMoveToFront(qm.items.notificationsSyncQueue,trackingReminderNotification)},refreshIfEmpty:function(successHandler,errorHandler){return qm.notifications.getNumberInGlobalsOrLocalStorage()?(qmLog.info(qm.notifications.getNumberInGlobalsOrLocalStorage()+" notifications in local storage"),successHandler(),!1):(window.qmLog.info("No notifications in local storage"),qm.notifications.refreshNotifications(successHandler,errorHandler),!0)},refreshIfEmptyOrStale:function(callback){qmLog.info("qm.notifications.refreshIfEmptyOrStale"),!qm.notifications.getNumberInGlobalsOrLocalStorage()||qm.notifications.getSecondsSinceLastNotificationsRefresh()>3600?(window.qmLog.info("Refreshing notifications because empty or last refresh was more than an hour ago"),qm.notifications.refreshNotifications(callback)):(window.qmLog.info("Not refreshing notifications because last refresh was last than an hour ago and we have notifications in local storage"),callback&&callback(qm.notifications.getFromGlobalsOrLocalStorage()))},getAllUniqueRatingNotifications:function(){qmLog.info("Called getAllUniqueRatingNotifications");var ratingNotifications=qm.storage.getWithFilters(qm.items.trackingReminderNotifications,"unitAbbreviatedName","/5");if(!ratingNotifications)return qmLog.info("No rating notifications in storage!"),null;qmLog.info("Got "+ratingNotifications.length+" total NON-UNIQUE rating notification from storage");var unique=qm.arrayHelper.getUnique(ratingNotifications,"variableName");return qmLog.info("Got "+unique.length+" UNIQUE rating notifications"),unique},getAllUniqueNotifications:function(){qmLog.info("Called getAllUniqueRatingNotifications");var notifications=qm.storage.getItem(qm.items.trackingReminderNotifications);if(!notifications)return qmLog.info("No notifications in storage!"),null;qmLog.info("Got "+notifications.length+" total NON-UNIQUE notification from storage");var unique=qm.arrayHelper.getUnique(notifications,"variableName");return qmLog.info("Got "+unique.length+" UNIQUE notifications"),unique},getNotificationsDueInLast24:function(){var allNotifications=qm.storage.getItem(qm.items.trackingReminderNotifications);if(!allNotifications)return qmLog.info("No NotificationsDueInLast24 in localStorage"),null;for(var last24=[],i=0;i<allNotifications.length;i++)qm.timeHelper.hoursAgo(allNotifications[i].trackingReminderNotificationTimeEpoch)<24&&last24.push(allNotifications[i]);return last24},getUniqueNotificationsDueInLast24:function(){var last24=qm.notifications.getNotificationsDueInLast24();if(!last24)return qmLog.info("No UNIQUE NotificationsDueInLast24 in localStorage"),null;qmLog.info("Got "+last24.length+" total NON-UNIQUE notification due in last 24 from storage");var unique=qm.arrayHelper.getUnique(last24,"variableName");return qmLog.info("Got "+unique.length+" UNIQUE notifications"),unique},deleteById:function(id){qm.storage.deleteById(qm.items.trackingReminderNotifications,id)},undo:function(){qmLog.info("Called undo notifcation tracking...");var notificationsSyncQueue=qm.storage.getItem(qm.items.notificationsSyncQueue);if(!notificationsSyncQueue)return!1;notificationsSyncQueue[0].hide=!1,qm.storage.addToOrReplaceByIdAndMoveToFront(qm.items.trackingReminderNotifications,notificationsSyncQueue[0]),qm.storage.deleteByProperty(qm.items.notificationsSyncQueue,"trackingReminderNotificationId",notificationsSyncQueue[0].trackingReminderNotificationId)},getMostRecentRatingNotification:function(){var ratingNotifications=window.qm.storage.getWithFilters(qm.items.trackingReminderNotifications,"unitAbbreviatedName","/5");if((ratingNotifications=window.qm.arrayHelper.sortByProperty(ratingNotifications,"trackingReminderNotificationTime")).length){var notification=ratingNotifications[ratingNotifications.length-1];return notification.trackingReminderNotificationTimeEpoch<qm.timeHelper.getUnixTimestampInSeconds()-86400&&window.qmLog.info("Got this notification but it's from yesterday: "+JSON.stringify(notification).substring(0,140)+"..."),window.qmLog.info(null,"Got this notification: "+JSON.stringify(notification).substring(0,140)+"...",null),notification}return console.info("No rating notifications for popup"),qm.notifications.getLastNotificationsRefreshTime(),qm.notifications.refreshNotifications(),null},deleteByVariableName:function(variableName){qm.storage.deleteByProperty(qm.items.trackingReminderNotifications,"variableName",variableName)},refreshNotifications:function(successHandler,errorHandler){var route=qm.apiPaths.trackingReminderNotificationsPast;qm.api.canWeMakeRequestYet("GET",route,{blockRequests:!0,minimumSecondsBetweenRequests:300})?qm.api.getRequestUrl(route,function(url){qm.api.getViaXhrOrFetch(url,function(response){401===response.status?qm.chrome.showSignInNotification():(qm.storage.setTrackingReminderNotifications(response.data),successHandler&&successHandler(response.data))})}):errorHandler&&errorHandler()},refreshAndShowPopupIfNecessary:function(notificationParams){return qm.notifications.refreshNotifications(notificationParams,function(trackingReminderNotifications){var uniqueNotification=window.qm.notifications.getMostRecentUniqueNotificationNotInSyncQueue(),numberOfWaitingNotifications=function(obj){var result=0;for(var prop in obj)obj.hasOwnProperty(prop)&&result++;return result}(trackingReminderNotifications);uniqueNotification?(qm.chrome.openOrFocusChromePopupWindow(function(trackingReminderNotification){return{url:qm.notifications.getRatingNotificationPath(trackingReminderNotification),type:"panel",top:screen.height-150,left:screen.width-380,width:390,height:110,focused:!0}}(uniqueNotification)),qm.chrome.updateChromeBadge(0)):numberOfWaitingNotifications>0&&qm.chrome.createSmallNotificationAndOpenInboxInBackground()}),notificationParams},getNumberInGlobalsOrLocalStorage:function(variableCategoryName){var notifications=qm.notifications.getFromGlobalsOrLocalStorage(variableCategoryName);return notifications?notifications.length:0},postTrackingReminderNotifications:function(trackingReminderNotifications,onDoneListener,timeout){qmLog.pushDebug("postTrackingReminderNotifications",JSON.stringify(trackingReminderNotifications),trackingReminderNotifications),qm.arrayHelper.variableIsArray(trackingReminderNotifications)||(trackingReminderNotifications=[trackingReminderNotifications]),onDoneListener||(onDoneListener=function(response){qmLog.pushDebug("postTrackingReminderNotifications response ",JSON.stringify(response),response)}),qm.api.postToQuantiModo(trackingReminderNotifications,"v1/trackingReminderNotifications",onDoneListener),timeout&&setTimeout(function(){qmLog.info("Timeout expired so closing"),qm.notifications.closePopup()},timeout)},getRatingNotificationPath:function(ratingTrackingReminderNotification){"/5"!==ratingTrackingReminderNotification.unitAbbreviatedName&&qmLog.error("ratingTrackingReminderNotification must have unit /5");var url="android_popup.html?variableName="+encodeURIComponent(ratingTrackingReminderNotification.variableName)+"&valence="+ratingTrackingReminderNotification.valence+"&trackingReminderNotificationId="+ratingTrackingReminderNotification.trackingReminderNotificationId;return url=qm.api.addGlobalParams(url)},closePopup:function(){window.qmLog.info("closing popup"),qm.notifications.clearNotifications(),window.close(),"undefined"!=typeof OverApps?(console.log("Calling OverApps.closeWebView()..."),OverApps.closeWebView()):console.error("OverApps is undefined!")},clearNotifications:function(){qm.platform.isChromeExtension()?(qm.chrome.updateChromeBadge(0),chrome.notifications.clear("moodReportNotification",function(){})):window.qmLog.debug("Can't clearNotifications because chrome is undefined")}},objectHelper:{copyPropertiesFromOneObjectToAnother:function(source,destination){for(var prop in source)source.hasOwnProperty(prop)&&(destination[prop]=source[prop]);return destination},getSizeInKb:function(object){var string;return string="string"==typeof object?object:JSON.stringify(object),qm.objectHelper.getSizeOfStringInKb(string)},getSizeOfStringInKb:function(string){return Math.round(string.length/1e3)},unsetPropertiesWithSizeGreaterThanForObject:function(maximumKb,object){object=JSON.parse(JSON.stringify(object));for(var property in object)object.hasOwnProperty(property)&&qm.objectHelper.getSizeInKb(object[property])>maximumKb&&delete object[property];return object},unsetNullProperties:function(object){for(var property in object)object.hasOwnProperty(property)&&null===object[property]&&delete object[property];return object},objectContainsString:function(object,needle){return!!object&&-1!==JSON.stringify(object).toLowerCase().indexOf(needle)},snakeToCamelCaseProperties:function(object){for(var prop in object)object.hasOwnProperty(prop)&&(object[prop.toCamelCase()]=object[prop],delete object[prop]);return object},getValueOfPropertyOrSubPropertyWithNameLike:function(wantedKeyNameNeedle,obj){function eachRecursive(obj){for(var key in obj)if(obj.hasOwnProperty(key))if("object"==typeof obj[key]&&null!==obj[key]){var result=eachRecursive(obj[key]);if(result)return result}else if(-1!==key.toLowerCase().indexOf(wantedKeyNameNeedle))return obj[key];return null}return wantedKeyNameNeedle=wantedKeyNameNeedle.toLowerCase(),eachRecursive(obj)}},parameterHelper:{getStateOrUrlOrRootScopeCorrelationOrRequestParam:function(paramName,$stateParams,$scope,$rootScope){return qm.urlHelper.getParam(paramName)?qm.urlHelper.getParam(paramName,window.location.href,!0):$stateParams&&$stateParams[paramName]?$stateParams[paramName]:$scope&&$scope.state&&$scope.state.requestParams&&$scope.state.requestParams[paramName]?$scope.state.requestParams[paramName]:$rootScope&&$rootScope[paramName]?$rootScope[paramName]:void 0}},platform:{isChromeExtension:function(){return!qm.platform.isMobile()&&("undefined"==typeof chrome?(window.qmLog.debug("chrome is undefined",null,null),!1):void 0===chrome.runtime?(window.qmLog.debug("chrome.runtime is undefined",null,null),!1):void 0===chrome.alarms?(window.qmLog.debug("chrome.alarms is undefined",null,null),!1):(window.qmLog.debug("isChromeExtension returns true",null,null),!0))},isWeb:function(){var isWeb=!1;return 0===window.location.href.indexOf("https://")&&(isWeb=!0),0===window.location.href.indexOf("http://")&&(isWeb=!0),0===window.location.href.indexOf("http://localhost:")&&(isWeb=!0),isWeb},isWebOrChrome:function(){return qm.platform.isWeb()||qm.platform.isChromeExtension()},isAndroid:function(){return-1!==window.location.href.indexOf("/android_asset/")||"undefined"!=typeof ionic&&(ionic.Platform.isAndroid()&&!qm.platform.isWeb())},isIOS:function(){return"undefined"!=typeof ionic&&(ionic.Platform.isIOS()&&!qm.platform.isWeb())},isMobile:function(){return qm.platform.isAndroid()||qm.platform.isIOS()},getCurrentPlatform:function(){if(qm.urlHelper.getParam("platform"))return qm.urlHelper.getParam("platform");if(qm.platform.isChromeExtension())return qm.platform.types.chromeExtension;if(qm.platform.isAndroid())return qm.platform.types.android;if(qm.platform.isIOS())return qm.platform.types.ios;if(qm.platform.isWeb())return qm.platform.types.web;if("undefined"!=typeof ionic){var ionicPlatform=ionic.Platform.platform();return ionic.Platform.isIPad()||ionic.Platform.isIOS()||ionic.Platform.isAndroid()?(qmLog.error("Could not determine platform so returning "+ionicPlatform),ionicPlatform):qm.platform.web}qmLog.error("Could not determine platform")},types:{web:"web",android:"android",ios:"ios",chromeExtension:"chromeExtension"},isDevelopmentMode:function(){return-1!==window.location.href.indexOf("://localhost:")},isDesignMode:function(){return qm.getAppSettings().designMode},browser:{get:function(){return qm.platform.browser.isChrome()?"chrome":qm.platform.browser.isFirefox()?"firefox":qm.platform.browser.isEdge()?"edge":qm.platform.browser.isIE()?"ie":qm.platform.browser.isSafari()?"safari":qm.platform.browser.isOpera()?"opera":qm.platform.browser.isBlink()?"blink":void 0},isFirefox:function(){return"undefined"!=typeof InstallTrigger},isChrome:function(){return!!window.chrome&&!!window.chrome.webstore},isEdge:function(){return!isIE&&!!window.StyleMedia},isIE:function(){return!!document.documentMode},isSafari:function(){return/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window["safari"]||typeof safari!=="undefined"&&safari.pushNotification).toString()},isOpera:function(){return!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0},isBlink:function(){return(qm.platform.browser.isChrome()||qm.platform.browser.isOpera())&&!!window.CSS}}},push:{getLastPushTimeStampInSeconds:function(){return qm.storage.getItem(qm.items.lastPushTimestamp)},getHoursSinceLastPush:function(){return Math.round(window.qm.timeHelper.secondsAgo(qm.push.getLastPushTimeStampInSeconds())/3600)},getMinutesSinceLastPush:function(){return Math.round(window.qm.timeHelper.secondsAgo(qm.push.getLastPushTimeStampInSeconds())/60)},getTimeSinceLastPushString:function(){return qm.timeHelper.getTimeSinceString(qm.push.getLastPushTimeStampInSeconds())},enabled:function(){return!!qm.userHelper.getUserFromLocalStorage()&&qm.userHelper.getUserFromLocalStorage().pushNotificationsEnabled}},reminderHelper:{getNumberOfReminders:function(callback){var number=qm.reminderHelper.getNumberOfTrackingRemindersInLocalStorage();number?callback(number):qm.reminderHelper.getTrackingRemindersFromApi({},function(){number=qm.reminderHelper.getNumberOfTrackingRemindersInLocalStorage(),callback(number)})},getTrackingRemindersFromApi:function(params,successHandler,errorHandler){qm.api.configureClient();var apiInstance=new Quantimodo.RemindersApi;params=qm.api.addGlobalParams(params),apiInstance.getTrackingReminders(params,function(error,data,response){data&&qm.reminderHelper.saveToLocalStorage(data),qm.api.generalResponseHandler(error,data,response,successHandler,errorHandler,params,"getTrackingRemindersFromApi")})},getNumberOfTrackingRemindersInLocalStorage:function(){var trackingReminders=qm.reminderHelper.getTrackingRemindersFromLocalStorage();return trackingReminders&&trackingReminders.length?trackingReminders.length:0},getTrackingRemindersFromLocalStorage:function(requestParams){return qm.storage.getElementsWithRequestParams(qm.items.trackingReminders,requestParams)},saveToLocalStorage:function(trackingReminders){getSizeInKiloBytes(trackingReminders=qm.arrayHelper.unsetNullProperties(trackingReminders))>2e3&&(trackingReminders=qm.reminderHelper.removeArchivedReminders(trackingReminders));var mostFrequentReminderIntervalInSeconds=86400;if(trackingReminders)for(var i=0;i<trackingReminders.length;i++){var currentFrequency=trackingReminders[i].reminderFrequency;currentFrequency&&currentFrequency<mostFrequentReminderIntervalInSeconds&&(mostFrequentReminderIntervalInSeconds=currentFrequency)}qm.storage.setItem(qm.items.mostFrequentReminderIntervalInSeconds,mostFrequentReminderIntervalInSeconds),qm.storage.setItem(qm.items.trackingReminders,trackingReminders)},removeArchivedReminders:function(allReminders){var activeReminders=qm.reminderHelper.getActive(allReminders),favorites=qm.reminderHelper.getFavorites(allReminders);return activeReminders.concat(favorites)},getFavorites:function(allReminders){return allReminders||(allReminders=qm.reminderHelper.getTrackingRemindersFromLocalStorage()),allReminders?allReminders.filter(function(trackingReminder){return 0===trackingReminder.reminderFrequency}):[]},getActive:function(allReminders){return allReminders||(allReminders=qm.reminderHelper.getTrackingRemindersFromLocalStorage()),allReminders?allReminders.filter(function(trackingReminder){return 0!==trackingReminder.reminderFrequency&&-1===trackingReminder.valueAndFrequencyTextDescription.toLowerCase().indexOf("ended")}):[]},getArchived:function(allReminders){return allReminders||(allReminders=qm.reminderHelper.getTrackingRemindersFromLocalStorage()),allReminders.filter(function(trackingReminder){return 0!==trackingReminder.reminderFrequency&&-1!==trackingReminder.valueAndFrequencyTextDescription.toLowerCase().indexOf("ended")})}},ratingImages:{positive:["img/rating/face_rating_button_256_depressed.png","img/rating/face_rating_button_256_sad.png","img/rating/face_rating_button_256_ok.png","img/rating/face_rating_button_256_happy.png","img/rating/face_rating_button_256_ecstatic.png"],negative:["img/rating/face_rating_button_256_ecstatic.png","img/rating/face_rating_button_256_happy.png","img/rating/face_rating_button_256_ok.png","img/rating/face_rating_button_256_sad.png","img/rating/face_rating_button_256_depressed.png"],numeric:["img/rating/numeric_rating_button_256_1.png","img/rating/numeric_rating_button_256_2.png","img/rating/numeric_rating_button_256_3.png","img/rating/numeric_rating_button_256_4.png","img/rating/numeric_rating_button_256_5.png"]},serviceWorker:!1,storage:{getUserVariableByName:function(variableName,updateLatestMeasurementTime,lastValue){var userVariables=qm.storage.getWithFilters(qm.items.userVariables,"name",variableName);if(!userVariables||!userVariables.length)return null;var userVariable=userVariables[0];return userVariable.lastAccessedUnixTime=qm.timeHelper.getUnixTimestampInSeconds(),updateLatestMeasurementTime&&(userVariable.latestMeasurementTime=qm.timeHelper.getUnixTimestampInSeconds()),lastValue&&(userVariable.lastValue=lastValue,userVariable.lastValueInUserUnit=lastValue),qm.userVariables.saveToLocalStorage(userVariable),userVariable},setTrackingReminderNotifications:function(notifications){notifications?(qmLog.debug("Saving "+notifications.length+" notifications to local storage",null,{notifications:notifications}),qmLog.info("Saving "+notifications.length+" notifications to local storage"),qm.notifications.setLastNotificationsRefreshTime(),window.qm.chrome.updateChromeBadge(notifications.length),qm.storage.setItem(qm.items.trackingReminderNotifications,notifications)):qmLog.error("No notifications provided to qm.storage.setTrackingReminderNotifications")},deleteByProperty:function(localStorageItemName,propertyName,propertyValue){var localStorageItemArray=qm.storage.getItem(localStorageItemName);localStorageItemArray?qm.storage.setItem(localStorageItemName,qm.arrayHelper.deleteFromArrayByProperty(localStorageItemArray,propertyName,propertyValue)):window.qmLog.info("Local storage item "+localStorageItemName+" not found! Local storage items: "+JSON.stringify(qm.storage.getLocalStorageList()))},deleteByPropertyInArray:function(localStorageItemName,propertyName,objectsArray){var localStorageItemArray=qm.storage.getItem(localStorageItemName);if(localStorageItemArray){for(var arrayOfValuesForProperty=objectsArray.map(function(a){return a[propertyName]}),i=0;i<arrayOfValuesForProperty.length;i++)localStorageItemArray=qm.arrayHelper.deleteFromArrayByProperty(localStorageItemArray,propertyName,arrayOfValuesForProperty[i]);qm.storage.setItem(localStorageItemName,localStorageItemArray)}else window.qmLog.info("Local storage item "+localStorageItemName+" not found! Local storage items: "+JSON.stringify(qm.storage.getLocalStorageList()))},getAllLocalStorageDataWithSizes:function(summary){if("undefined"==typeof localStorage)return qmLog.debug("localStorage not defined"),!1;for(var localStorageItemsArray=[],i=0;i<localStorage.length;i++){var key=localStorage.key(i),value=localStorage.getItem(key);summary&&(value=value.substring(0,20)+"..."),localStorageItemsArray.push({name:key,value:value,kB:Math.round(16*localStorage.getItem(key).length/8192)})}return localStorageItemsArray.sort(function(a,b){return b.kB-a.kB})},getWithFilters:function(localStorageItemName,filterPropertyName,filterPropertyValue,lessThanPropertyName,lessThanPropertyValue,greaterThanPropertyName,greaterThanPropertyValue){var matchingElements=qm.storage.getItem(localStorageItemName);return matchingElements?matchingElements=qm.arrayHelper.filterByPropertyOrSize(matchingElements,filterPropertyName,filterPropertyValue,lessThanPropertyName,lessThanPropertyValue,greaterThanPropertyName,greaterThanPropertyValue):null},getTrackingReminderNotifications:function(variableCategoryName,limit){var trackingReminderNotifications=window.qm.storage.getWithFilters(qm.items.trackingReminderNotifications,"variableCategoryName",variableCategoryName);if(trackingReminderNotifications||(trackingReminderNotifications=[]),limit)try{trackingReminderNotifications=trackingReminderNotifications.slice(0,limit)}catch(error){qmLog.error(error,null,{trackingReminderNotifications:trackingReminderNotifications}),trackingReminderNotifications=JSON.parse(JSON.stringify(trackingReminderNotifications)),trackingReminderNotifications=trackingReminderNotifications.slice(0,limit)}return trackingReminderNotifications.length&&qm.platform.isChromeExtension()&&qm.chrome.updateChromeBadge(trackingReminderNotifications.length),trackingReminderNotifications},getAsString:function(key){var item=qm.storage.getItem(key);return"null"===item||"undefined"===item?(qm.storage.removeItem(key),null):item},deleteById:function(localStorageItemName,elementId){window.qm.storage.deleteByProperty(localStorageItemName,"id",elementId)},removeItem:function(key){return qmLog.debug("Removing "+key+" from local storage"),qm.globalHelper.removeItem(key),"undefined"==typeof localStorage?(qmLog.debug("localStorage not defined"),!1):localStorage.removeItem(key)},clear:function(){if(qm.globals={},"undefined"==typeof localStorage)return!1;localStorage.clear()},getElementOfLocalStorageItemById:function(localStorageItemName,elementId){var localStorageItemArray=qm.storage.getItem(localStorageItemName);if(localStorageItemArray){for(var i=0;i<localStorageItemArray.length;i++)if(localStorageItemArray[i].id===elementId)return localStorageItemArray[i]}else console.warn("Local storage item "+localStorageItemName+" not found")},addToOrReplaceByIdAndMoveToFront:function(localStorageItemName,replacementElementArray){qmLog.debug("qm.storage.addToOrReplaceByIdAndMoveToFront in "+localStorageItemName+": "+JSON.stringify(replacementElementArray).substring(0,20)+"...");var localStorageItemArray=qm.storage.getItem(localStorageItemName),elementsToKeep=qm.arrayHelper.addToOrReplaceByIdAndMoveToFront(localStorageItemArray,replacementElementArray);return qm.storage.setItem(localStorageItemName,elementsToKeep),elementsToKeep},setGlobal:function(key,value){"userVariables"===key&&"string"==typeof value&&qmLog.error("userVariables should not be a string!"),qmLog.debug("Setting "+key+" in globals"),qm.globals[key]=value},setLastRequestTime:function(type,route){window.qm.storage.setItem(getLocalStorageNameForRequest(type,route),qm.timeHelper.getUnixTimestampInSeconds())},getLastRequestTime:function(type,route){return window.qm.storage.getItem(getLocalStorageNameForRequest(type,route))},setItem:function(key,value){function deleteLargeLocalStorageItems(localStorageItemsArray){for(var i=0;i<localStorageItemsArray.length;i++)localStorageItemsArray[i].kB>2e3&&qm.storage.removeItem(localStorageItemsArray[i].name)}if(void 0!==value)if("null"!==value)if(value!==qm.storage.getGlobal(key)){qm.storage.setGlobal(key,value);var sizeInKb=getSizeInKiloBytes(value);if(sizeInKb>2e3){if(!(qm.arrayHelper.variableIsArray(value)&&value.length>1))return void qmLog.error(key+" is "+sizeInKb+"kb so we can't save to localStorage!");qmLog.error(key+" is "+sizeInKb+"kb so we can't save to localStorage so removing last element until less than 2MB..."),value=qm.arrayHelper.removeLastItemsUntilSizeLessThan(2e3,value)}"string"!=typeof value&&(value=JSON.stringify(value));var summaryValue=value;summaryValue&&(summaryValue=value.substring(0,18)),window.qmLog.debug("Setting localStorage."+key+" to "+summaryValue+"...");try{if("undefined"==typeof localStorage)return qmLog.debug("localStorage not defined"),!1;localStorage.setItem(key,value)}catch(error){var metaData={localStorageItems:qm.storage.getAllLocalStorageDataWithSizes(!0)};metaData["size_of_"+key+"_in_kb"]=sizeInKb;var name="Error saving "+key+" to local storage: "+error.message;window.qmLog.error(name,null,metaData),deleteLargeLocalStorageItems(metaData.localStorageItems),qm.storage.setItem(key,value)}}else{var valueString=JSON.stringify(value);qmLog.debug("Not setting "+key+" in localStorage because global is already set to "+valueString,null,value)}else qmLog.error("null string provided to qm.storage.setItem!");else qmLog.error("value provided to qm.storage.setItem is undefined!")},getGlobal:function(key){return qmLog.debug("getting "+key+" from globals"),void 0===qm.globals[key]?null:"false"!==qm.globals[key]&&("true"===qm.globals[key]||("null"===qm.globals[key]?null:qm.globals[key]))},getItem:function(key){if(!key)return qmLog.error("No key provided to qm.storage.getItem"),null;var fromGlobals=qm.storage.getGlobal(key);if(fromGlobals)return qmLog.debug("Got "+key+" from globals"),fromGlobals;if("undefined"==typeof localStorage)return qmLog.debug("localStorage not defined"),!1;var item=localStorage.getItem(key);return"undefined"===item?(qmLog.error(key+" from localStorage is undefined!"),localStorage.removeItem(key),null):item&&"string"==typeof item?(qmLog.debug("Parsing "+key+" and setting in globals"),qm.globals[key]=qm.stringHelper.parseIfJsonString(item,item),window.qmLog.debug("Got "+key+" from localStorage: "+item.substring(0,18)+"..."),qm.globals[key]):(window.qmLog.debug(key+" not found in localStorage"),null)},clearOAuthTokens:function(){qm.auth.saveAccessToken(null),window.qm.storage.setItem("refreshToken",null),window.qm.storage.setItem("expiresAtMilliseconds",null)},appendToArray:function(localStorageItemName,elementToAdd){var array=window.qm.storage.getItem(localStorageItemName)||[];(array=function(localStorageItem,elementToAdd){return elementToAdd.id&&(localStorageItem=localStorageItem.filter(function(obj){return obj.id!==elementToAdd.id})),localStorageItem}(array,elementToAdd)).push(elementToAdd),window.qm.storage.setItem(localStorageItemName,array)},deleteTrackingReminderNotification:function(body){var trackingReminderNotificationId=body;isNaN(trackingReminderNotificationId)&&body.trackingReminderNotification&&(trackingReminderNotificationId=body.trackingReminderNotification.id),isNaN(trackingReminderNotificationId)&&body.trackingReminderNotificationId&&(trackingReminderNotificationId=body.trackingReminderNotificationId),qm.storage.getTrackingReminderNotifications()&&qm.storage.getTrackingReminderNotifications().length?(window.qmLog.info(null,"Deleting notification with id "+trackingReminderNotificationId,null),window.qm.storage.deleteById(qm.items.trackingReminderNotifications,trackingReminderNotificationId)):window.qm.notifications.refreshIfEmpty()},getLocalStorageList:function(){if("undefined"==typeof localStorage)return qmLog.debug("localStorage not defined"),!1;for(var localStorageItemsArray=[],i=0;i<localStorage.length;i++){var key=localStorage.key(i);localStorageItemsArray.push({name:key})}return localStorageItemsArray},getElementsWithRequestParams:function(localStorageItemName,requestParams){qmLog.info("Getting "+localStorageItemName+" WithRequestParams");var array=qm.storage.getItem(localStorageItemName);return array=qm.arrayHelper.filterByRequestParams(array,requestParams)},clearStorageExceptForUnitsAndCommonVariables:function(){qmLog.info("Clearing local storage!");var commonVariables=qm.storage.getItem(qm.items.commonVariables),units=qm.storage.getItem(qm.items.units);qm.storage.clear(),qm.storage.setItem(qm.items.commonVariables,commonVariables),qm.storage.setItem(qm.items.units,units),qm.localForage.clear()}},stringHelper:{removeSpecialCharacters:function(str){return str.replace(/[^A-Z0-9]+/gi,"_")},prettyJsonStringify:function(jsonObject){return JSON?JSON.stringify(jsonObject,null,"  "):"your browser does not support JSON so cant pretty print"},parseBoolean:function(value){return"false"!==value&&("true"===value||value)},parseIfJsonString:function(stringOrObject,defaultValue){if(defaultValue=defaultValue||null,!stringOrObject)return stringOrObject;if("string"!=typeof stringOrObject)return stringOrObject;try{return JSON.parse(stringOrObject)}catch(e){return defaultValue}},getStringBeforeSubstring:function(needle,haystack){var i=haystack.indexOf(needle);return i>0?haystack.slice(0,i):haystack},toCamelCaseCase:function(string){return string.toCamelCase()},getStringBetween:function(string,firstString,secondString){var between=string.match(firstString+"(.*)"+secondString);return between?(console.log(between[1]+" is between "+firstString+" and "+secondString+" in "+string),between[1]):null},getStringAfter:function(fullString,substring){return fullString.split(substring)[1]},truncateIfGreaterThan:function(string,maxCharacters){return string.length>maxCharacters?string.substring(0,maxCharacters)+"...":string},replaceAll:function(str,find,replace){return str.replace(new RegExp(function(str){return str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}(find),"g"),replace)},camelToTitleCase:function(text){var result=text.replace(/([A-Z])/g," $1");return result.charAt(0).toUpperCase()+result.slice(1)}},studyHelper:{lastStudyOrCorrelation:null,getCauseVariable:function($stateParams,$scope,$rootScope){if(qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("causeVariable",$stateParams,$scope,$rootScope))return qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("causeVariable",$stateParams,$scope,$rootScope);if(qm.studyHelper.lastStudyOrCorrelation){var lastStudyOrCorrelation=qm.studyHelper.lastStudyOrCorrelation;if(lastStudyOrCorrelation.causeVariable)return lastStudyOrCorrelation.causeVariable;if(lastStudyOrCorrelation.causeVariable)return lastStudyOrCorrelation.causeVariable}},getEffectVariable:function($stateParams,$scope,$rootScope){if(qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("effectVariable",$stateParams,$scope,$rootScope))return qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("effectVariable",$stateParams,$scope,$rootScope);if(qm.studyHelper.lastStudyOrCorrelation){var lastStudyOrCorrelation=qm.studyHelper.lastStudyOrCorrelation;if(lastStudyOrCorrelation.effectVariable)return lastStudyOrCorrelation.effectVariable;if(lastStudyOrCorrelation.effectVariable)return lastStudyOrCorrelation.effectVariable}},getCauseVariableName:function($stateParams,$scope,$rootScope){if(qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("causeVariableName",$stateParams,$scope,$rootScope))return qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("causeVariableName",$stateParams,$scope,$rootScope);if(qm.studyHelper.lastStudyOrCorrelation){var lastStudyOrCorrelation=qm.studyHelper.lastStudyOrCorrelation;if(lastStudyOrCorrelation.causeVariableName)return lastStudyOrCorrelation.causeVariableName;if(lastStudyOrCorrelation.causeVariable)return lastStudyOrCorrelation.causeVariable.variableName||lastStudyOrCorrelation.causeVariable.name}},getEffectVariableName:function($stateParams,$scope,$rootScope){if(qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("effectVariableName",$stateParams,$scope,$rootScope))return qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("effectVariableName",$stateParams,$scope,$rootScope);if(qm.studyHelper.lastStudyOrCorrelation){var lastStudyOrCorrelation=qm.studyHelper.lastStudyOrCorrelation;if(lastStudyOrCorrelation.effectVariableName)return lastStudyOrCorrelation.effectVariableName;if(lastStudyOrCorrelation.effectVariable)return lastStudyOrCorrelation.effectVariable.variableName||lastStudyOrCorrelation.effectVariable.name}},getCauseVariableId:function($stateParams,$scope,$rootScope){if(qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("causeVariableId",$stateParams,$scope,$rootScope))return qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("causeVariableId",$stateParams,$scope,$rootScope);if(qm.studyHelper.lastStudyOrCorrelation){var lastStudyOrCorrelation=qm.studyHelper.lastStudyOrCorrelation;if(lastStudyOrCorrelation.causeVariableId)return lastStudyOrCorrelation.causeVariableId;if(lastStudyOrCorrelation.causeVariable)return lastStudyOrCorrelation.causeVariable.variableId||lastStudyOrCorrelation.causeVariable.id}},getEffectVariableId:function($stateParams,$scope,$rootScope){if(qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("effectVariableId",$stateParams,$scope,$rootScope))return qm.parameterHelper.getStateOrUrlOrRootScopeCorrelationOrRequestParam("effectVariableId",$stateParams,$scope,$rootScope);if(qm.studyHelper.lastStudyOrCorrelation){var lastStudyOrCorrelation=qm.studyHelper.lastStudyOrCorrelation;if(lastStudyOrCorrelation.effectVariableId)return lastStudyOrCorrelation.effectVariableId;if(lastStudyOrCorrelation.effectVariable)return lastStudyOrCorrelation.effectVariable.variableId||lastStudyOrCorrelation.effectVariable.id}},getLastStudy:function(callback){qm.studyHelper.lastStudyOrCorrelation&&callback(qm.studyHelper.lastStudyOrCorrelation),qm.localForage.getItem(qm.items.lastStudyOrCorrelation,callback)},getLastStudyIfMatchesVariableNames:function(causeVariableName,effectVariableName,callback){if(!callback&&qm.studyHelper.lastStudyOrCorrelation&&qm.studyHelper.lastStudyOrCorrelation.causeVariableName===causeVariableName&&qm.studyHelper.lastStudyOrCorrelation.effectVariableName===effectVariableName)return qm.studyHelper.lastStudyOrCorrelation;qm.studyHelper.getLastStudy(function(lastStudyOrCorrelation){lastStudyOrCorrelation.causeVariableName===causeVariableName&&lastStudyOrCorrelation.effectVariableName===effectVariableName&&callback(lastStudyOrCorrelation)})},saveLastStudy:function(study){study?qm.localForage.setItem(qm.items.lastStudyOrCorrelation,study):qmLog.error("No study provided to saveLastStudy")},deleteLastStudy:function(){qmLog.info("deleteLastStudy"),qm.localForage.removeItem(qm.items.lastStudyOrCorrelation)}},timeHelper:{getUnixTimestampInMilliseconds:function(dateTimeString){return dateTimeString?new Date(dateTimeString).getTime():(new Date).getTime()},universalConversionToUnixTimeSeconds:function(unixTimeOrString){return isNaN(unixTimeOrString)&&(unixTimeOrString=qm.timeHelper.getUnixTimestampInSeconds(unixTimeOrString)),unixTimeOrString>qm.timeHelper.getUnixTimestampInSeconds()+31536e4&&(unixTimeOrString/=1e3),unixTimeOrString},getUnixTimestampInSeconds:function(dateTimeString){return dateTimeString||(dateTimeString=(new Date).getTime()),Math.round(window.qm.timeHelper.getUnixTimestampInMilliseconds(dateTimeString)/1e3)},getTimeSinceString:function(unixTimeOrString){if(!unixTimeOrString)return"never";var unixTimestamp=qm.timeHelper.universalConversionToUnixTimeSeconds(unixTimeOrString),secondsAgo=qm.timeHelper.secondsAgo(unixTimestamp);return secondsAgo>172800?Math.round(secondsAgo/86400)+" days ago":secondsAgo>7200?Math.round(secondsAgo/3600)+" hours ago":secondsAgo>120?Math.round(secondsAgo/60)+" minutes ago":secondsAgo+" seconds ago"},secondsAgo:function(unixTimeOrString){var unixTimestamp=qm.timeHelper.universalConversionToUnixTimeSeconds(unixTimeOrString);return Math.round(qm.timeHelper.getUnixTimestampInSeconds()-unixTimestamp)},minutesAgo:function(unixTimeOrString){var unixTimestamp=qm.timeHelper.universalConversionToUnixTimeSeconds(unixTimeOrString);return Math.round(qm.timeHelper.secondsAgo(unixTimestamp)/60)},hoursAgo:function(unixTimeOrString){var unixTimestamp=qm.timeHelper.universalConversionToUnixTimeSeconds(unixTimeOrString);return Math.round(qm.timeHelper.secondsAgo(unixTimestamp)/3600)},daysAgo:function(unixTimeOrString){var unixTimestamp=qm.timeHelper.universalConversionToUnixTimeSeconds(unixTimeOrString);return Math.round(qm.timeHelper.secondsAgo(unixTimestamp)/86400)},getCurrentLocalDateAndTime:function(){return(new Date).toLocaleString()},convertUnixTimeStampToISOString:function(UNIX_timestamp){var a=new Date(1e3*UNIX_timestamp),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],year=a.getFullYear(),month=months[a.getMonth()];return a.getDate()+" "+month+" "+year+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()},addTimeZoneOffsetProperty:function(obj){var a=new Date;return obj.timeZoneOffset=a.getTimezoneOffset(),obj}},trackingReminderNotifications:[],unitHelper:{getNonAdvancedUnits:function(){for(var nonAdvancedUnitObjects=[],allUnits=qm.storage.getItem(qm.items.units),i=0;i<allUnits.length;i++)allUnits[i].advanced||nonAdvancedUnitObjects.push(allUnits[i]);var showMoreUnitsObject={name:"Show more units",abbreviatedName:"Show more units"};return nonAdvancedUnitObjects.push(showMoreUnitsObject),nonAdvancedUnitObjects},inNonAdvancedUnitAbbreviatedNames:function(unitAbbreviatedName){for(var nonAdvancedUnitAbbreviatedNames=[],allUnits=qm.storage.getItem(qm.items.units),i=0;i<allUnits.length;i++)allUnits[i].advanced||nonAdvancedUnitAbbreviatedNames.push(allUnits[i].abbreviatedName);return nonAdvancedUnitAbbreviatedNames.indexOf(unitAbbreviatedName)>-1},getManualTrackingUnits:function(){for(var manualTrackingUnitObjects=[],allUnits=qm.storage.getItem(qm.items.units),i=0;i<allUnits.length;i++)allUnits[i].manualTracking&&manualTrackingUnitObjects.push(allUnits[i]);var showMoreUnitsObject={name:"Show more units",abbreviatedName:"Show more units"};return manualTrackingUnitObjects.push(showMoreUnitsObject),manualTrackingUnitObjects},inManualTrackingUnitUnitAbbreviatedNames:function(unitAbbreviatedName){for(var manualTrackingUnitUnitAbbreviatedNames=[],allUnits=qm.storage.getItem(qm.items.units),i=0;i<allUnits.length;i++)allUnits[i].manualTracking&&manualTrackingUnitUnitAbbreviatedNames.push(allUnits[i].abbreviatedName);return manualTrackingUnitUnitAbbreviatedNames.indexOf(unitAbbreviatedName)>-1},getAllUnits:function(){return qm.storage.getItem(qm.items.units)},getProgressivelyMoreUnits:function(currentlyDisplayedUnits){return currentlyDisplayedUnits?currentlyDisplayedUnits===qm.unitHelper.getNonAdvancedUnits()?qm.unitHelper.getManualTrackingUnits():qm.unitHelper.getAllUnits():qm.unitHelper.getNonAdvancedUnits()},getByAbbreviatedName:function(unitAbbreviatedName){for(var allUnits=qm.storage.getItem(qm.items.units),i=0;i<allUnits.length;i++)if(allUnits[i].abbreviatedName===unitAbbreviatedName)return allUnits[i];return null},indexByAbbreviatedName:function(){var allUnits=qm.storage.getItem(qm.items.units);qm.unitsIndexedByAbbreviatedName=[];for(var i=0;i<allUnits.length;i++)qm.unitsIndexedByAbbreviatedName[allUnits[i].abbreviatedName]=allUnits[i];return qm.unitsIndexedByAbbreviatedName},getUnitArrayContaining:function(currentUnitAbbreviatedName){return currentUnitAbbreviatedName&&""!==currentUnitAbbreviatedName?qm.unitHelper.inNonAdvancedUnitAbbreviatedNames(currentUnitAbbreviatedName)?qm.unitHelper.getNonAdvancedUnits():qm.unitHelper.inManualTrackingUnitUnitAbbreviatedNames(currentUnitAbbreviatedName)?qm.unitHelper.getManualTrackingUnits():qm.unitHelper.getAllUnits():qm.unitHelper.getNonAdvancedUnits()},getUnitsFromApiAndIndexByAbbreviatedNames:function(successHandler,errorHandler){qm.storage.getItem(qm.items.units)?qm.unitHelper.indexByAbbreviatedName():(qm.api.configureClient(),(new Quantimodo.UnitsApi).getUnits(function(error,data,response){data&&(qm.storage.setItem(qm.items.units,data),qm.unitHelper.indexByAbbreviatedName()),qm.api.responseHandler(error,data,response,successHandler,errorHandler)}))}},urlHelper:{getParam:function(parameterName,url,shouldDecode){if(url||(url=window.location.href),-1!==parameterName.toLowerCase().indexOf("name")&&(shouldDecode=!0),url.split("?").length>1)for(var parameterKeyValuePairs=url.split("?")[1].split("&"),i=0;i<parameterKeyValuePairs.length;i++){var currentParameterKeyValuePair=parameterKeyValuePairs[i].split("=");if(currentParameterKeyValuePair[0].toCamelCase().toLowerCase()===parameterName.toCamelCase().toLowerCase())return currentParameterKeyValuePair[1]=qm.stringHelper.parseBoolean(currentParameterKeyValuePair[1]),void 0!==shouldDecode?decodeURIComponent(currentParameterKeyValuePair[1]):currentParameterKeyValuePair[1]}return null},getAllQueryParamsFromUrlString:function(url){url||(url=window.location.href);var keyValuePairsObject={},array=[];if(url.split("?").length>1)for(var parameterKeyValueSubstrings=url.split("?")[1].split("&"),i=0;i<parameterKeyValueSubstrings.length;i++)keyValuePairsObject[(array=parameterKeyValueSubstrings[i].split("="))[0]]=array[1];return keyValuePairsObject},openUrlInNewTab:function(url,showLocation){showLocation=showLocation||"yes",window.open(url,"_blank")},getIonicUrlForPath:function(path){return qm.urlHelper.getIonicAppBaseUrl()+"index.html#/app/"+path},getIonicAppBaseUrl:function(){var url=window.location.origin+window.location.pathname;return url=qm.stringHelper.getStringBeforeSubstring("configuration-index.html",url),url=qm.stringHelper.getStringBeforeSubstring("index.html",url),url=qm.stringHelper.getStringBeforeSubstring("android_popup.html",url),url=qm.stringHelper.getStringBeforeSubstring("firebase-messaging-sw.js",url),url=qm.stringHelper.getStringBeforeSubstring("_generated_background_page.html",url)},getAbsoluteUrlFromRelativePath:function(relativePath){return 0===relativePath.indexOf("/")&&(relativePath=relativePath.replace("/","")),qm.urlHelper.getIonicAppBaseUrl()+relativePath},getPrivateConfigJsonUrl:function(){return qm.urlHelper.getAbsoluteUrlFromRelativePath("default.private_config.json")},addUrlQueryParamsToUrl:function(params,url){for(var key in params)params.hasOwnProperty(key)&&-1===url.indexOf(key+"=")&&(url=-1===url.indexOf("?")?url+"?"+key+"="+encodeURIComponent(params[key]):url+"&"+key+"="+encodeURIComponent(params[key]));return url},onQMSubDomain:function(){return 0===window.location.href.indexOf("https://")&&-1!==window.location.href.indexOf(".quantimo.do")},redirectToHttpsIfNecessary:function(){0===window.location.href.indexOf("http://")&&-1===window.location.href.indexOf("http://localhost")&&(location.href="https:"+window.location.href.substring(window.location.protocol.length))}},user:null,userHelper:{deleteUserAccount:function(reason,successHandler){qm.api.configureClient(),(new Quantimodo.UserApi).deleteUser(reason,{clientId:qm.getAppSettings().clientId},function(error,data,response){qm.api.responseHandler(error,data,response,successHandler)})},getUserFromLocalStorage:function(successHandler){function checkUserId(user){return user&&user.ID&&(user.id=user.ID,user=qm.objectHelper.snakeToCamelCaseProperties(user)),user&&!user.id?(console.error("No user id in "+JSON.stringify(qmUser)),qm.userHelper.setUser(null),null):user}if(window.qmUser||(window.qmUser=qm.storage.getItem(qm.items.user)),!successHandler)return window.qmUser||qmLog.debug("We do not have a user in local storage!"),checkUserId(window.qmUser);window.qmUser?successHandler(checkUserId(window.qmUser)):qm.localForage.getItem(qm.items.user,function(user){window.qmUser=user,successHandler(checkUserId(user))})},isTestUser:function(){return window.qmUser&&-1!==window.qmUser.displayName.indexOf("test")&&230!==window.qmUser.id},setUser:function(user){user&&user.data&&user.data.user&&(user=user.data.user),window.qmUser=user,qm.storage.setItem(qm.items.user,user),qm.localForage.setItem(qm.items.user,user),user&&(window.qmLog.debug(window.qmUser.displayName+" is logged in."),qm.urlHelper.getParam("doNotRemember")||(qmLog.setupUserVoice(),user.accessToken?qm.auth.saveAccessTokenResponse(user):qmLog.error("User does not have access token!",null,{userToSave:user})))},withinAllowedNotificationTimes:function(){if(qm.userHelper.getUserFromLocalStorage()){var currentTime=(new Date).getHours()+":00:00";if(currentTime>qm.userHelper.getUserFromLocalStorage().latestReminderTime||currentTime<qm.userHelper.getUserFromLocalStorage().earliestReminderTime)return window.qmLog.info("Not showing notification because outside allowed time range"),!1}return!0},getUserFromApi:function(successCallback,errorHandler){function successHandler(userFromApi){userFromApi&&void 0!==userFromApi.displayName?(qmLog.info("Got user from API..."),qm.userHelper.setUser(userFromApi),successCallback&&successCallback(userFromApi)):(qmLog.info("Could not get user from API..."),qm.platform.isChromeExtension()&&qm.api.getRequestUrl("v2/auth/login",function(url){chrome.tabs.create({url:url,selected:!0})}))}qmLog.info("Getting user from API..."),qm.api.configureClient();var apiInstance=new Quantimodo.UserApi,params=qm.api.addGlobalParams({});apiInstance.getUser(params,function(error,data,response){qm.api.generalResponseHandler(error,data,response,successHandler,errorHandler,params,"getUserFromApi")})},getUserFromLocalStorageOrApi:function(successHandler,errorHandler){qm.userHelper.getUserFromLocalStorage(function(user){user?successHandler&&successHandler(user):qm.userHelper.getUserFromApi(successHandler,errorHandler)})}},commonVariablesHelper:{getCommonVariablesFromApi:function(params,successHandler,errorHandler){(params=qm.api.addGlobalParams(params)).sort&&-1===params.sort.indexOf("latestMeasurementTime")||(params.sort="-numberOfUserVariables"),params.commonOnly=!0,params.limit||(params.limit=50);var cacheKey="getCommonVariablesFromApi";qm.api.cacheGet(params,cacheKey);qm.api.configureClient(),(new Quantimodo.VariablesApi).getVariables(params,function(error,data,response){data&&qm.commonVariablesHelper.saveToLocalStorage(data),qm.api.generalResponseHandler(error,data,response,successHandler,errorHandler,params,cacheKey)})},putCommonVariablesInLocalStorageUsingApi:function(successHandler){qm.commonVariablesHelper.getCommonVariablesFromApi({limit:50},function(commonVariables){successHandler&&successHandler(commonVariables)},function(error){qmLog.error(error)})},saveToLocalStorage:function(commonVariables){if(commonVariables){commonVariables=qm.arrayHelper.convertToArrayIfNecessary(commonVariables);for(var definitelyCommonVariables=[],i=0;i<commonVariables.length;i++)commonVariables[i].userId||definitelyCommonVariables.push(commonVariables[i]);qm.localForage.saveWithUniqueId(qm.items.commonVariables,definitelyCommonVariables)}else qmLog.error("No commonVariables provided to saveToLocalStorage")},getFromLocalStorage:function(requestParams,successHandler,errorHandler){successHandler?(requestParams||(requestParams={}),qm.localForage.getElementsWithRequestParams(qm.items.commonVariables,requestParams,function(data){requestParams.sort||(data=qm.variablesHelper.defaultVariableSort(data)),successHandler(data)},function(error){qmLog.error(error),errorHandler&&errorHandler(error)})):qmLog.error("No successHandler provided to commonVariables getFromLocalStorage")},getFromLocalStorageOrApi:function(params,successHandler,errorHandler){qm.commonVariablesHelper.getFromLocalStorage(params,function(variables){variables&&variables.length?successHandler&&successHandler(variables):qm.commonVariablesHelper.getCommonVariablesFromApi(params,function(variables){successHandler&&successHandler(variables)},function(error){qmLog.error(error),errorHandler&&errorHandler(error)})})},refreshIfNecessary:function(){qm.commonVariablesHelper.getFromLocalStorage({},function(commonVariables){commonVariables&&commonVariables.length||qm.commonVariablesHelper.putCommonVariablesInLocalStorageUsingApi()})}},userVariables:{saveToLocalStorage:function(variables){if(variables){variables=qm.arrayHelper.convertToArrayIfNecessary(variables);for(var definitelyUserVariables=[],commonVariables=[],i=0;i<variables.length;i++)variables[i].userId?definitelyUserVariables.push(variables[i]):commonVariables.push(variables[i]);qm.localForage.saveWithUniqueId(qm.items.userVariables,definitelyUserVariables),commonVariables.length&&qm.localForage.saveWithUniqueId(qm.items.commonVariables,commonVariables)}else qmLog.error("No variables provided to userVariables.saveToLocalStorage")},updateLatestMeasurementTime:function(variableName,lastValue){qm.storage.getUserVariableByName(variableName,!0,lastValue)},getFromApi:function(params,successHandler,errorHandler){params||(params={}),(params=JSON.parse(JSON.stringify(params))).sort&&-1===params.sort.indexOf("numberOfUserVariables")||(params.sort="-latestMeasurementTime"),params.limit||(params.limit=50),params=qm.api.addGlobalParams(params);var cacheKey="getUserVariablesFromApi",cachedData=qm.api.cacheGet(params,cacheKey);cachedData&&successHandler?successHandler(cachedData):(qm.api.configureClient(),(new Quantimodo.VariablesApi).getVariables(params,function(error,data,response){data&&qm.userVariables.saveToLocalStorage(data),qm.api.generalResponseHandler(error,data,response,successHandler,errorHandler,params,cacheKey)}))},getByNameFromApi:function(variableName,params,successHandler,errorHandler){params||(params={}),params.name=variableName,qm.userVariables.getFromApi(params,function(userVariables){qm.userVariables.saveToLocalStorage(userVariables),successHandler(userVariables[0])},errorHandler)},getByName:function(variableName,params,refresh,successHandler,errorHandler){params||(params={}),variableName||(variableName=qm.getPrimaryOutcomeVariable().name),refresh?qm.userVariables.getByNameFromApi(variableName,params,successHandler,errorHandler):qm.localForage.searchByProperty(qm.items.userVariables,"name",variableName,function(userVariables){if(userVariables&&userVariables.length){var userVariable=userVariables[0];if(void 0===params.includeCharts||userVariable.charts&&userVariable.charts.lineChartWithoutSmoothing&&userVariable.charts.lineChartWithoutSmoothing.highchartConfig)return void successHandler(userVariable)}qm.userVariables.getByNameFromApi(variableName,params,successHandler,errorHandler)})},getFromLocalStorage:function(requestParams,successHandler,errorHandler){requestParams||(requestParams={}),qm.localForage.getElementsWithRequestParams(qm.items.userVariables,requestParams,function(data){requestParams.sort||(data=qm.variablesHelper.defaultVariableSort(data)),successHandler(data)},function(error){qmLog.error(error),errorHandler&&errorHandler(error)})},getFromLocalStorageOrApi:function(params,successHandler,errorHandler){params=params||{},qm.userVariables.getFromLocalStorage(params,function(userVariables){function doWeHaveEnoughVariables(variables){return variables&&variables.length>2}function doWeHaveExactMatch(variables,variableSearchQuery){return!variableSearchQuery||qm.arrayHelper.arrayHasItemWithNameProperty(variables)&&variables[0].name.toLowerCase()===variableSearchQuery.toLowerCase()}if(userVariables&&userVariables.length&&!function(variables,variableSearchQuery){var haveEnough=doWeHaveEnoughVariables(variables),exactMatch=doWeHaveExactMatch(variables,variableSearchQuery);return!haveEnough&&!exactMatch}(userVariables,params.searchPhrase))return successHandler(userVariables),void qmLog.info(userVariables.length+" user variables matching "+JSON.stringify(params)+" in local storage");qmLog.info("No user variables matching "+JSON.stringify(params)+" in local storage"),qm.userVariables.getFromApi(params,function(userVariables){qmLog.info(userVariables.length+" user variables matching "+JSON.stringify(params)+" from API"),successHandler(userVariables)},function(error){qmLog.error(error),errorHandler(error)})})},refreshIfNumberOfRemindersGreaterThanUserVariables:function(){qm.reminderHelper.getNumberOfReminders(function(number){number&&qm.userVariables.getFromLocalStorage({},function(userVariables){(!userVariables||userVariables.length<number)&&qm.userVariables.getFromApi()})})}},variablesHelper:{getFromLocalStorageOrApi:function(requestParams,successHandler,errorHandler){function sortUpdateSubtitlesAndReturnVariables(variables){requestParams.sort||(variables=qm.variablesHelper.defaultVariableSort(variables)),variables=qm.variablesHelper.updateSubtitles(variables,requestParams),successHandler&&successHandler(variables)}function getFromApi(){qm.userVariables.getFromApi(requestParams,function(variables){sortUpdateSubtitlesAndReturnVariables(variables)},function(error){qmLog.error(error),errorHandler&&errorHandler(error)})}(requestParams=requestParams||{}).searchPhrase&&""!==requestParams.searchPhrase||(requestParams.minimumNumberOfResultsRequiredToAvoidAPIRequest=20),requestParams.searchPhrase&&requestParams.searchPhrase.length>2&&(requestParams.minimumNumberOfResultsRequiredToAvoidAPIRequest=3),requestParams.searchPhrase&&requestParams.searchPhrase.length>3&&(requestParams.minimumNumberOfResultsRequiredToAvoidAPIRequest=1),requestParams.searchPhrase&&requestParams.searchPhrase.length>4&&(requestParams.minimumNumberOfResultsRequiredToAvoidAPIRequest=0),requestParams.excludeLocal?getFromApi():qm.variablesHelper.getUserAndCommonVariablesFromLocalStorage(requestParams,function(variables){variables&&variables.length>requestParams.minimumNumberOfResultsRequiredToAvoidAPIRequest?sortUpdateSubtitlesAndReturnVariables(variables):getFromApi()})},putManualTrackingFirst:function(variables){if(variables){var manualTracking=variables.filter(function(variableToCheck){return!0===variableToCheck.manualTracking}),nonManual=variables.filter(function(variableToCheck){return!0!==variableToCheck.manualTracking});return manualTracking.concat(nonManual)}qmLog.error("no variables provided to putManualTrackingFirst")},defaultVariableSort:function(variables){function getValue(object){return object.lastSelectedAt||object.latestMeasurementTime||object.numberOfTrackingReminders||object.numberOfUserVariables}return variables?((variables=qm.variablesHelper.putManualTrackingFirst(variables)).sort(function(a,b){var aValue=getValue(a),bValue=getValue(b);return aValue<bValue?1:aValue>bValue?-1:0}),variables):(qmLog.info("no variables provided to putManualTrackingFirst"),null)},getUserAndCommonVariablesFromLocalStorage:function(requestParams,successHandler){requestParams=requestParams||{},qm.userVariables.getFromLocalStorage(requestParams,function(userVariables){userVariables=userVariables||[],requestParams.includePublic?qm.commonVariablesHelper.getFromLocalStorage(requestParams,function(commonVariables){commonVariables=commonVariables||[];var both=userVariables.concat(commonVariables);both=qm.arrayHelper.getUnique(both,"id"),successHandler(both)}):successHandler(userVariables)})},updateSubtitles:function(variables,requestParams){if(requestParams&&requestParams.sort){var sort=requestParams.sort;sort=sort.replace("-","");for(var i=0;i<variables.length;i++)if(sort.toLowerCase().indexOf("correlation")&&variables[i][sort]){var number=variables[i][sort];variables[i].subtitle=number+" studies"}}return variables}},variableCategoryHelper:{getVariableCategoriesFromJsonFile:function(successHandler,errorHandler){qm.api.getViaXhrOrFetch("data/variableCategories.json",function(variableCategories){variableCategories?qm.globalHelper.setItem(qm.items.variableCategories,variableCategories):qmLog.error("No variable categories from json file!"),successHandler(variableCategories)},function(error){errorHandler&&errorHandler(error)})},getVariableCategoriesFromApi:function(successHandler,errorHandler){function globalSuccessHandler(variableCategories){qm.localForage.setItem(qm.items.variableCategories,variableCategories),successHandler&&successHandler(variableCategories)}qmLog.info("Getting variable categories from API..."),qm.api.configureClient(),(new Quantimodo.VariablesApi).getVariableCategories(function(error,data,response){qm.api.generalResponseHandler(error,data,response,globalSuccessHandler,errorHandler,{},"getVariableCategoriesFromApi")})},getVariableCategoriesFromGlobalsOrApi:function(successHandler,errorHandler){qm.variableCategoryHelper.getVariableCategoriesFromGlobals()?successHandler(qm.variableCategoryHelper.getVariableCategoriesFromGlobals()):qm.variableCategoryHelper.getVariableCategoriesFromJsonFile(function(variableCategories){variableCategories?successHandler(variableCategories):qm.variableCategoryHelper.getVariableCategoriesFromApi(function(variableCategories){successHandler(variableCategories)},errorHandler)},errorHandler)},getVariableCategoriesFromGlobals:function(){return qm.globalHelper.getItem(qm.items.variableCategories)},getVariableCategory:function(variableCategoryName,successHandler){if(!successHandler){var variableCategories=qm.variableCategoryHelper.getVariableCategoriesFromGlobals();if(variableCategories)return variableCategories.find(function(variableCategory){return variableCategory.name.toLowerCase()===variableCategoryName.toLowerCase()})}qm.variableCategoryHelper.getVariableCategoriesFromGlobalsOrApi(function(variableCategories){var match=variableCategories.find(function(category){category.name=variableCategoryName});successHandler(match)})}},webNotifications:{initializeFirebase:function(){if(qm.firebase)return qmLog.debug("Firebase already initialized"),qm.firebase;var config={apiKey:"AIzaSyAro7_WyPa9ymH5znQ6RQRU2CW5K46XaTg",authDomain:"quantimo-do.firebaseapp.com",databaseURL:"https://quantimo-do.firebaseio.com",projectId:"quantimo-do",storageBucket:"quantimo-do.appspot.com",messagingSenderId:"1052648855194"};return console.log("firebase.initializeApp(config)"),qm.firebase=firebase.initializeApp(config),qm.firebase},registerServiceWorker:function(){if(qm.serviceWorker)return qmLog.debug("serviceWorker already registered"),!1;if(!qm.platform.isWeb())return qmLog.debug("Not registering service worker because not on Web"),!1;qm.webNotifications.initializeFirebase();var serviceWorkerUrl=qm.urlHelper.getIonicAppBaseUrl()+"firebase-messaging-sw.js";return qmLog.info("Loading service worker from "+serviceWorkerUrl),void 0===navigator.serviceWorker?(qmLog.error("navigator.serviceWorker is not defined!"),!1):(navigator.serviceWorker.register(serviceWorkerUrl).then(function(registration){var messaging=firebase.messaging();messaging.useServiceWorker(registration),qm.webNotifications.subscribeUser(messaging)}),qm.serviceWorker=navigator.serviceWorker,qm.serviceWorker)},subscribeUser:function(messaging){messaging.requestPermission().then(function(){console.log("Notification permission granted."),messaging.getToken().then(function(currentToken){if(currentToken){console.log("FB token: "+currentToken);var deviceTokenOnServer=qm.storage.getItem(qm.items.deviceTokenOnServer);deviceTokenOnServer&&deviceTokenOnServer===currentToken||qm.webNotifications.postWebPushSubscriptionToServer(currentToken)}else console.log("No Instance ID token available. Request permission to generate one."),qm.webNotifications.postWebPushSubscriptionToServer(!1)}).catch(function(err){qmLog.error("An error occurred while retrieving token. ",null,err)})}).catch(function(err){console.log("Unable to get permission to notify.",err)})},postWebPushSubscriptionToServer:function(deviceTokenString){if(deviceTokenString){console.log("Got token: "+deviceTokenString),qm.api.configureClient();var apiInstance=new Quantimodo.NotificationsApi,params=qm.api.addGlobalParams({platform:qm.platform.browser.get(),deviceToken:deviceTokenString});apiInstance.postDeviceToken(params,function(error,data,response){error||qm.storage.setItem(qm.items.deviceTokenOnServer,deviceTokenString),qm.api.generalResponseHandler(error,data,response,null,null,null,"postWebPushSubscriptionToServer")})}}},windowHelper:{scrollToTop:function(){return $("html, body").animate({scrollTop:0},"slow"),!1}}},window.isTruthy=function(value){return value&&"false"!==value},window.isFalsey=function(value){if(!1===value||"false"===value)return!0},qm.urlHelper.redirectToHttpsIfNecessary(),window.qm.chrome={debugEnabled:!0,chromeDebug:function(){qm.chrome.debugEnabled&&(chrome.alarms.getAll(function(alarms){console.log("all alarms",alarms)}),chrome.windows.getLastFocused(function(window){console.log("last focused",window)}),chrome.windows.getAll(function(windows){console.log("all windows",windows)}),chrome.windows.getCurrent(function(window){console.log("current window",window)}))},checkTimePastNotificationsAndExistingPopupAndShowPopupIfNecessary:function(alarm){if(qm.platform.isChromeExtension()){if(window.qmLog.debug("showNotificationOrPopupForAlarm alarm: ",null,alarm),!qm.userHelper.withinAllowedNotificationTimes())return!1;qm.notifications.getNumberInGlobalsOrLocalStorage()?qm.chrome.createSmallInboxNotification():qm.notifications.refreshAndShowPopupIfNecessary()}},createSmallInboxNotification:function(){chrome.notifications.create("inbox",qm.chrome.windowParams.inboxNotificationParams,function(id){})},createSmallNotificationAndOpenInboxInBackground:function(){qm.chrome.createSmallInboxNotification();var windowParams=qm.chrome.windowParams.fullInboxWindowParams;windowParams.focused=!1,qm.chrome.openOrFocusChromePopupWindow(windowParams)},createPopup:function(windowParams){function createPopup(windowParams){windowParams.url=qm.api.addGlobalParams(windowParams.url),qmLog.info("creating popup window",null,windowParams),chrome.windows.create(windowParams,function(chromeWindow){qm.storage.setItem("chromeWindowId",chromeWindow.id),chrome.windows.update(chromeWindow.id,{focused:windowParams.focused})})}-1!==windowParams.url.indexOf(".quantimo.do")||-1!==windowParams.url.indexOf("popup.html")?createPopup(windowParams):qm.client.getClientWebsiteUrl(function(fullWebsiteUrl){windowParams.url=fullWebsiteUrl+windowParams.url,createPopup(windowParams)})},canShowChromePopups:function(){return"undefined"==typeof chrome||void 0===chrome.windows||void 0===chrome.windows.create?(qmLog.info("Cannot show chrome popups"),!1):!(qm.getUser()&&!qm.getUser().pushNotificationsEnabled)||(qmLog.info("User has disabled notifications"),!1)},getChromeManifest:function(){if(qm.platform.isChromeExtension())return chrome.runtime.getManifest()},getWindowByIdAndFocusOrCreateNewPopup:function(chromeWindowId,windowParams){chrome.windows.get(chromeWindowId,function(chromeWindow){!chrome.runtime.lastError&&chromeWindow?windowParams.focused?(window.qmLog.info("qm.chrome.openOrFocusChromePopupWindow: Window already open. Focusing...",windowParams),chrome.windows.update(chromeWindowId,{focused:!0})):window.qmLog.info("qm.chrome.openOrFocusChromePopupWindow: Window already open. NOT focusing...",windowParams):(window.qmLog.info("qm.chrome.openOrFocusChromePopupWindow: Window NOT already open. Creating one...",windowParams),qm.chrome.createPopup(windowParams))})},createPopupIfNoWindowIdInLocalStorage:function(windowParams){window.qmLog.info("qm.chrome.openOrFocusChromePopupWindow checking if a window is already open.  new window params: ",null,windowParams);var chromeWindowId=parseInt(qm.storage.getItem(qm.items.chromeWindowId),null);return chromeWindowId?(window.qmLog.info("qm.chrome.openOrFocusChromePopupWindow: window id from localStorage: "+chromeWindowId,windowParams),chromeWindowId):(window.qmLog.info("qm.chrome.openOrFocusChromePopupWindow: No window id from localStorage. Creating one...",windowParams),qm.chrome.createPopup(windowParams),!1)},getCurrentWindowAndFocusOrCreateNewPopup:function(windowParams){chrome.windows.getCurrent(function(window){console.log("current window",window),window&&"popup"===window.type?chrome.windows.update(window.id,{focused:!0}):qm.chrome.createPopup(windowParams)})},getAllWindowsFocusOrCreateNewPopup:function(windowParams){qm.userHelper.getUserFromLocalStorageOrApi(function(user){user.pushNotificationsEnabled?(console.log("getAllWindowsFocusOrCreateNewPopup"),chrome.windows.getAll(function(windows){for(var i=0;i<windows.length;i++){var window=windows[i];if(console.log("current window",window),"popup"===window.type)return console.log("Focusing existing popup",window),void chrome.windows.update(window.id,{focused:!0})}qm.chrome.createPopup(windowParams)})):qmLog.pushDebug("Not showing chrome popup because notifications are disabled")})},handleNotificationClick:function(notificationId){window.qmLog.debug("onClicked: notificationId:"+notificationId);qm.platform.isChromeExtension()&&(notificationId||(notificationId=null),qm.chrome.updateChromeBadge(0),qmLog.info("notificationId: "+notificationId),"moodReportNotification"===notificationId?qm.chrome.openOrFocusChromePopupWindow(qm.chrome.windowParams.facesWindowParams):"signin"===notificationId?qm.chrome.openLoginWindow():notificationId&&function(str){try{JSON.parse(str)}catch(exception){return!1}return!0}(notificationId)?qm.chrome.openMeasurementAddWindow(!0,notificationId):qm.chrome.openFullInbox(!0,notificationId),notificationId&&chrome.notifications.clear(notificationId))},initialize:function(){chrome.notifications.onClicked.addListener(function(notificationId){qm.chrome.handleNotificationClick(notificationId)}),chrome.extension.onMessage.addListener(function(request,sender,sendResponse){window.qmLog.debug("Received request: "+request.message,null),"uploadMeasurements"===request.message&&qm.api.postMeasurements(request.payload,null)}),chrome.runtime.onInstalled.addListener(function(){qm.chrome.scheduleGenericChromeExtensionNotification(),localStorage.getItem(qm.items.introSeen)||qm.chrome.openIntroWindowPopup()}),chrome.alarms.onAlarm.addListener(function(alarm){qmLog.info("onAlarm Listener heard this alarm ",null,alarm),qm.userHelper.getUserFromLocalStorageOrApi(function(){qm.notifications.refreshIfEmptyOrStale(qm.chrome.showRatingOrInboxPopup())})}),qm.userHelper.getUserFromLocalStorageOrApi(function(){qm.chrome.showRatingOrInboxPopup()},function(){qm.chrome.showSignInNotification()})},openIntroWindowPopup:function(){qm.storage.setItem("introSeen",!0),qm.chrome.createPopup(qm.chrome.windowParams.introWindowParams)},openOrFocusChromePopupWindow:function(windowParams){window.qm.chrome.canShowChromePopups()&&qm.chrome.getAllWindowsFocusOrCreateNewPopup(windowParams)},openFullInbox:function(focusWindow,notificationId){var windowParams=qm.chrome.windowParams.fullInboxWindowParams;focusWindow&&(windowParams.focused=!0),qm.chrome.openOrFocusChromePopupWindow(qm.chrome.windowParams.fullInboxWindowParams),console.error("notificationId is not a json object and is not moodReportNotification. Opening Reminder Inbox",notificationId)},openLoginWindow:function(){qm.chrome.windowParams.loginWindowParams.focused=!0,qm.chrome.openOrFocusChromePopupWindow(qm.chrome.windowParams.loginWindowParams)},openMeasurementAddWindow:function(focusWindow,notificationId){var windowParams=qm.chrome.windowParams.fullInboxWindowParams;focusWindow&&(windowParams.focused=!0),qm.chrome.windowParams.fullInboxWindowParams.url="index.html#/app/measurement-add/?trackingReminderObject="+notificationId,qm.chrome.openOrFocusChromePopupWindow(qm.chrome.windowParams.fullInboxWindowParams)},scheduleGenericChromeExtensionNotification:function(){var intervalInMinutes=parseInt(qm.storage.getItem(qm.items.notificationInterval)||"60");qmLog.info("scheduleGenericChromeExtensionNotification: Reminder notification interval is "+intervalInMinutes+" minutes");var alarmInfo={periodInMinutes:intervalInMinutes};qmLog.info("scheduleGenericChromeExtensionNotification: clear genericTrackingReminderNotificationAlarm"),chrome.alarms.clear("genericTrackingReminderNotificationAlarm"),qmLog.info("scheduleGenericChromeExtensionNotification: create genericTrackingReminderNotificationAlarm",null,alarmInfo),chrome.alarms.create("genericTrackingReminderNotificationAlarm",alarmInfo),qmLog.info("Alarm set, every "+intervalInMinutes+" minutes")},scheduleChromeExtensionNotificationWithTrackingReminder:function(trackingReminder){var alarmInfo={};alarmInfo.when=1e3*trackingReminder.nextReminderTimeEpochSeconds,alarmInfo.periodInMinutes=trackingReminder.reminderFrequency/60;var alarmName=qm.chrome.createChromeAlarmNameFromTrackingReminder(trackingReminder);alarmName=JSON.stringify(alarmName),chrome.alarms.getAll(function(alarms){var hasAlarm=alarms.some(function(oneAlarm){return oneAlarm.name===alarmName});hasAlarm&&qmLog.info(null,"Already have an alarm for "+alarmName,null),hasAlarm||(chrome.alarms.create(alarmName,alarmInfo),qmLog.info(null,"Created alarm for alarmName "+alarmName,null,alarmInfo))})},createChromeAlarmNameFromTrackingReminder:function(trackingReminder){return{trackingReminderId:trackingReminder.id,variableName:trackingReminder.variableName,defaultValue:trackingReminder.defaultValue,unitAbbreviatedName:trackingReminder.unitAbbreviatedName,periodInMinutes:trackingReminder.reminderFrequency/60,reminderStartTime:trackingReminder.reminderStartTime,startTrackingDate:trackingReminder.startTrackingDate,variableCategoryName:trackingReminder.variableCategoryName,valence:trackingReminder.valence,reminderEndTime:trackingReminder.reminderEndTime}},showRatingOrInboxPopup:function(){qm.userHelper.getUserFromLocalStorageOrApi(function(user){user.pushNotificationsEnabled?qm.notifications.refreshIfEmptyOrStale(function(){if(!qm.notifications.getNumberInGlobalsOrLocalStorage())return qmLog.info("No notifications not opening popup"),!1;qm.getUser().combineNotifications?qm.chrome.createSmallInboxNotification():(window.trackingReminderNotification=window.qm.notifications.getMostRecentRatingNotificationNotInSyncQueue(),window.trackingReminderNotification?qm.chrome.showRatingPopup(window.trackingReminderNotification):qm.storage.getItem(qm.items.useSmallInbox)?(qmLog.info("No rating notifications so opening compactInboxWindow popup"),qm.chrome.openOrFocusChromePopupWindow(qm.chrome.windowParams.compactInboxWindowParams)):qm.notifications.getNumberInGlobalsOrLocalStorage()&&(qmLog.info("Got an alarm so checkTimePastNotificationsAndExistingPopupAndShowPopupIfNecessary(alarm)"),qm.chrome.createSmallInboxNotification()))},function(err){qmLog.error("Not showing popup because of notification refresh error: "+err)}):qmLog.pushDebug("Not showing chrome popup because notifications are disabled")})},showRatingPopup:function(trackingReminderNotification){qmLog.info("Opening rating notification popup");var getChromeRatingNotificationParams=function(trackingReminderNotification){return trackingReminderNotification||(trackingReminderNotification=qm.notifications.getMostRecentRatingNotificationNotInSyncQueue()),{url:qm.notifications.getRatingNotificationPath(trackingReminderNotification),type:"panel",top:screen.height-150,left:screen.width-380,width:390,height:110,focused:!0}};window.trackingReminderNotification=trackingReminderNotification||qm.notifications.getMostRecentRatingNotificationNotInSyncQueue(),window.trackingReminderNotification&&qm.getClientId(function(clientId){qm.chrome.openOrFocusChromePopupWindow(getChromeRatingNotificationParams(window.trackingReminderNotification))}),window.qm.chrome.updateChromeBadge(0)},showSignInNotification:function(){if(qm.platform.isChromeExtension()){chrome.notifications.create("signin",qm.chrome.windowParams.signInNotificationParams,function(id){})}},updateChromeBadge:function(numberOfNotifications){var text="";qm.platform.isChromeExtension()&&void 0!==chrome.browserAction&&(numberOfNotifications&&(text=numberOfNotifications.toString()),numberOfNotifications>9&&(text="?"),chrome.browserAction.setBadgeText({text:text}))}},"undefined"!=typeof screen&&(qm.chrome.windowParams={introWindowParams:{url:"index.html#/app/intro",type:"panel",top:multiplyScreenHeight(.2),left:multiplyScreenWidth(.4),width:450,height:750,focused:!0},facesWindowParams:{url:"android_popup.html",type:"panel",top:screen.height-150,left:screen.width-380,width:390,height:110,focused:!0},loginWindowParams:{url:"index.html#/app/login",type:"panel",top:multiplyScreenHeight(.2),left:multiplyScreenWidth(.4),width:450,height:750,focused:!0},fullInboxWindowParams:{url:"index.html#/app/reminders-inbox",type:"panel",top:screen.height-800,left:screen.width-455,width:450,height:750},compactInboxWindowParams:{url:"index.html#/app/reminders-inbox-compact",type:"panel",top:screen.height-360-30,left:screen.width-350,width:350,height:360},inboxNotificationParams:{type:"basic",title:"How are you?",message:"Click to open reminder inbox",iconUrl:"img/icons/icon_700.png",priority:2},signInNotificationParams:{type:"basic",title:"How are you?",message:"Click to sign in and record a measurement",iconUrl:"img/icons/icon_700.png",priority:2}}),qm.platform.isChromeExtension()&&qm.chrome.initialize(),angular.module("starter",["ionic","oc.lazyLoad","highcharts-ng","ngCordova","ionic-datepicker","ionic-timepicker","ngIOS9UIWebViewPatch","ng-mfb","ngCordovaOauth","jtt_wikipedia","angular-clipboard","angular-google-analytics","ngMaterialDatePicker","ngMaterial","ngMessages","angular-cache","angular-d3-word-cloud","ngFileUpload","angular-web-notification","ngFitText"]).run(["$ionicPlatform","$ionicHistory","$state","$rootScope","qmService","qmLogService",function($ionicPlatform,$ionicHistory,$state,$rootScope,qmService,qmLogService){qm.urlHelper.onQMSubDomain()||qm.appsManager.loadPrivateConfigFromJsonFile(),qmService.showBlackRingLoader(),qm.urlHelper.getParam("logout")&&(qm.storage.clear(),qmService.setUser(null)),qmService.setPlatformVariables(),$ionicPlatform.ready(function(){(ionic.Platform.isIPad()||ionic.Platform.isIOS())&&(window.onerror=function(errorMsg,url,lineNumber){errorMsg="Error: "+errorMsg+" Script: "+url+" Line: "+lineNumber,qmLogService.error(null,errorMsg)}),window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),window.StatusBar&&StatusBar.styleDefault()}),$rootScope.goToState=function(stateName,stateParameters,ev){if(-1!==stateName.indexOf("button")){var buttonName=stateName;if(stateName=$rootScope.appSettings.appDesign.floatingActionButton.active[buttonName].stateName,stateParameters=$rootScope.appSettings.appDesign.floatingActionButton.active[buttonName].stateParameters,stateName===qmStates.reminderSearch)return void qmService.search.reminderSearch(null,ev,stateParameters.variableCategoryName);if(stateName===qmStates.measurementAddSearch)return void qmService.search.measurementAddSearch(null,ev,stateParameters.variableCategoryName)}qmService.goToState(stateName,stateParameters,{reload:stateName===$state.current.name})},$ionicPlatform.registerBackButtonAction(function(event){if(qmService.backButtonState)return qmService.goToState(qmService.backButtonState),void(qmService.backButtonState=null);if("app.upgrade"===$ionicHistory.currentStateName())return console.debug("registerBackButtonAction from upgrade: Going to default state..."),void qmService.goToDefaultState();if($ionicHistory.currentStateName()!==qm.getAppSettings().appDesign.defaultState)if($ionicHistory.backView())$ionicHistory.goBack();else{if(qm.storage.getItem(qm.items.user))return qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),window.qmLog.debug("registerBackButtonAction: Going to default state..."),void qmService.goToDefaultState();window.qmLog.debug("registerBackButtonAction: Closing the app"),ionic.Platform.exitApp()}else ionic.Platform.exitApp()},100);var intervalChecker=setInterval(function(){qm.getAppSettings()&&clearInterval(intervalChecker)},500);(qm.urlHelper.getParam("existingUser")||qm.urlHelper.getParam("introSeen")||qm.urlHelper.getParam("refreshUser")||window.designMode)&&(qm.storage.setItem(qm.items.introSeen,!0),qm.storage.setItem(qm.items.onboarded,!0))}]).config(["$stateProvider","$urlRouterProvider","$compileProvider","ionicTimePickerProvider","ionicDatePickerProvider","$ionicConfigProvider","AnalyticsProvider",function($stateProvider,$urlRouterProvider,$compileProvider,ionicTimePickerProvider,ionicDatePickerProvider,$ionicConfigProvider,AnalyticsProvider){window.debugMode=qm.urlHelper.getParam("debug")||qm.urlHelper.getParam("debugMode"),window.designMode=-1!==window.location.href.indexOf("configuration-index.html"),qm.urlHelper.getParam(qm.items.apiUrl)&&qm.storage.setItem(qm.items.apiUrl,"https://"+qm.urlHelper.getParam(qm.items.apiUrl));var analyticsOptions={tracker:"UA-39222734-25",trackEvent:!0};if(ionic.Platform.isAndroid()){var clientId=qm.storage.getItem("GA_LOCAL_STORAGE_KEY");clientId||(clientId=(clientId=Math.floor(9999999999*Math.random()+1e9))+"."+Math.floor(9999999999*Math.random()+1e9),window.qm.storage.setItem("GA_LOCAL_STORAGE_KEY",clientId)),analyticsOptions.fields={storage:"none",fields:clientId}}AnalyticsProvider.setAccount(analyticsOptions),AnalyticsProvider.delayScriptTag(!0),AnalyticsProvider.trackPages(!0),AnalyticsProvider.trackUrlParams(!0),AnalyticsProvider.ignoreFirstPageLoad(!0),AnalyticsProvider.setPageEvent("$stateChangeSuccess"),AnalyticsProvider.setHybridMobileSupport(!0),AnalyticsProvider.useECommerce(!0,!0),$compileProvider.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|mailto|chrome-extension|ms-appx-web|ms-appx):/),$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|file|ftp|mailto|chrome-extension|ms-appx-web|ms-appx):/),$ionicConfigProvider.tabs.position("bottom"),$ionicConfigProvider.navBar.alignTitle("center"),(ionic.Platform.isIPad()||ionic.Platform.isIOS())&&$ionicConfigProvider.views.swipeBackEnabled(!1),Array.prototype.contains=function(obj){for(var i=this.length;i--;)if(this[i]===obj)return!0};var config_resolver={appSettingsResponse:function($q){var deferred=$q.defer();return qm.appsManager.getAppSettingsLocallyOrFromApi(function(appSettings){deferred.resolve(appSettings)}),deferred.promise}};ionicTimePickerProvider.configTimePicker({format:12,step:1,closeLabel:"Cancel"});var datePickerObj={inputDate:new Date,setLabel:"Set",todayLabel:"Today",closeLabel:"Cancel",mondayFirst:!1,weeksList:["S","M","T","W","T","F","S"],templateType:"modal",from:new Date(2012,8,1),to:new Date,showTodayButton:!0,dateFormat:"dd MMMM yyyy",closeOnSelect:!1};ionicDatePickerProvider.configDatePicker(datePickerObj),window.qmStates={asNeededMeds:"app.asNeededMeds",charts:"app.charts",chartSearch:"app.chartSearch",configuration:"app.configuration",configurationClientId:"app.configurationClientId",contact:"app.contact",favoriteAdd:"app.favoriteAdd",favorites:"app.favorites",favoriteSearch:"app.favoriteSearch",feedback:"app.feedback",help:"app.help",history:"app.history",historyAll:"app.historyAll",historyAllCategory:"app.historyAllCategory",historyAllVariable:"app.historyAllVariable",import:"app.import",importNative:"app.importNative",intro:"app.intro",login:"app.login",manageScheduledMeds:"app.manageScheduledMeds",map:"app.map",measurementAdd:"app.measurementAdd",measurementAddSearch:"app.measurementAddSearch",measurementAddVariable:"app.measurementAddVariable",notificationPreferences:"app.notificationPreferences",onboarding:"app.onboarding",outcomesAll:"app.outcomesAll",outcomeSearch:"app.outcomeSearch",predictorsAggregated:"app.predictorsAggregated",predictorsAll:"app.predictorsAll",predictorSearch:"app.predictorSearch",predictorsNegative:"app.predictorsNegative",predictorsNegativeVariable:"app.predictorsNegativeVariable",predictorsPositive:"app.predictorsPositive",predictorsPositiveVariable:"app.predictorsPositiveVariable",predictorsUser:"app.predictorsUser",reminderAdd:"app.reminderAdd",reminderSearch:"app.reminderSearch",remindersInbox:"app.remindersInbox",remindersInboxCompact:"app.remindersInboxCompact",remindersInboxToday:"app.remindersInboxToday",remindersList:"app.remindersList",remindersListCategory:"app.remindersListCategory",remindersManage:"app.remindersManage",remindersManageCategory:"app.remindersManageCategory",searchVariablesWithCommonPredictors:"app.searchVariablesWithCommonPredictors",searchVariablesWithUserPredictors:"app.searchVariablesWithUserPredictors",settings:"app.settings",study:"app.study",studies:"app.studies",studyCreation:"app.studyCreation",studyJoin:"app.studyJoin",tabs:"app.tabs",tagAdd:"app.tagAdd",tageeSearch:"app.tageeSearch",tagSearch:"app.tagSearch",todayMedSchedule:"app.todayMedSchedule",track:"app.track",upgrade:"app.upgrade",variableList:"app.variableList",variableListCategory:"app.variableListCategory",variableSettingsVariableName:"app.variableSettingsVariableName",variableSettings:"app.variableSettings",welcome:"app.welcome"},$stateProvider.state("app",{url:"/app",templateUrl:"templates/menu.html",controller:"AppCtrl",resolve:config_resolver}).state(qmStates.welcome,{cache:!0,url:"/welcome",views:{menuContent:{templateUrl:"templates/welcome.html",controller:"WelcomeCtrl"}}}).state(qmStates.login,{url:"/login",params:{fromState:null,fromUrl:null},views:{menuContent:{templateUrl:"templates/login-page.html",controller:"LoginCtrl"}}}).state(qmStates.intro,{cache:!0,url:"/intro",params:{doNotRedirect:!0},views:{menuContent:{templateUrl:"templates/intro-tour-new.html",controller:"IntroCtrl"}},resolve:config_resolver}).state(qmStates.track,{url:"/track",cache:!1,views:{menuContent:{templateUrl:"templates/track-primary-outcome-variable.html",controller:"TrackPrimaryOutcomeCtrl"}}}).state(qmStates.measurementAddSearch,{url:"/measurement-add-search",params:{reminder:null,fromState:null,measurement:null,variableObject:null,nextState:qmStates.measurementAdd,variableCategoryName:null,excludeDuplicateBloodPressure:!0,variableSearchParameters:{limit:100,includePublic:!0,manualTracking:!0},hideNavigationMenu:null,doneState:null},views:{menuContent:{templateUrl:"templates/variable-search.html",controller:"VariableSearchCtrl"}}}).state(qmStates.reminderSearch,{url:"/reminder-search",params:{variableCategoryName:null,fromState:null,fromUrl:null,measurement:null,reminderSearch:!0,nextState:qmStates.reminderAdd,excludeDuplicateBloodPressure:!0,variableSearchParameters:{limit:100,includePublic:!0,manualTracking:!0},hideNavigationMenu:null,skipReminderSettingsIfPossible:null,doneState:null},views:{menuContent:{templateUrl:"templates/variable-search.html",controller:"VariableSearchCtrl"}}}).state(qmStates.favoriteSearch,{url:"/favorite-search",params:{variableCategoryName:null,fromState:null,fromUrl:null,measurement:null,favoriteSearch:!0,nextState:qmStates.favoriteAdd,pageTitle:"Add a favorite",excludeDuplicateBloodPressure:!0,variableSearchParameters:{limit:100,includePublic:!0,manualTracking:!0},hideNavigationMenu:null,doneState:null},views:{menuContent:{templateUrl:"templates/variable-search.html",controller:"VariableSearchCtrl"}}}).state(qmStates.measurementAdd,{url:"/measurement-add",cache:!1,params:{trackingReminder:null,reminderNotification:null,fromState:null,fromUrl:null,measurement:null,variableObject:null,variableName:null,currentMeasurementHistory:null},views:{menuContent:{templateUrl:"templates/measurement-add.html",controller:"MeasurementAddCtrl"}}}).state(qmStates.measurementAddVariable,{url:"/measurement-add-variable-name/:variableName",cache:!1,params:{trackingReminder:null,reminderNotification:null,fromState:null,fromUrl:null,measurement:null,variableObject:null},views:{menuContent:{templateUrl:"templates/measurement-add.html",controller:"MeasurementAddCtrl"}}}).state(qmStates.variableSettings,{url:"/variable-settings",cache:!1,params:{reminder:null,fromState:null,fromUrl:null,measurement:null,variableObject:null,variableName:null,variableId:null},views:{menuContent:{templateUrl:"templates/variable-settings.html",controller:"VariableSettingsCtrl"}}}).state(qmStates.variableSettingsVariableName,{url:"/variable-settings/:variableName",cache:!1,params:{reminder:null,fromState:null,fromUrl:null,measurement:null,variableObject:null,variableName:null},views:{menuContent:{templateUrl:"templates/variable-settings.html",controller:"VariableSettingsCtrl"}}}).state(qmStates.import,{url:"/import",cache:!1,views:{menuContent:{templateUrl:"templates/import-data.html",controller:"ImportCtrl"}}}).state(qmStates.importNative,{url:"/import-native",cache:!1,params:{native:!0},views:{menuContent:{templateUrl:"templates/import-data.html",controller:"ImportCtrl"}}}).state(qmStates.chartSearch,{url:"/chart-search",cache:!1,params:{variableCategoryName:null,fromState:null,fromUrl:null,measurement:null,nextState:qmStates.charts,doNotShowAddVariableButton:!0,excludeSingularBloodPressure:!0,variableSearchParameters:{limit:100,includePublic:!1},hideNavigationMenu:null},views:{menuContent:{templateUrl:"templates/variable-search.html",controller:"VariableSearchCtrl"}}}).state(qmStates.predictorSearch,{url:"/predictor-search",cache:!1,params:{title:"Outcomes",variableSearchPlaceholderText:"Search for an outcome...",helpText:"Search for an outcome like overall mood or a symptom that you want to know the causes of...",variableCategoryName:null,nextState:qmStates.predictorsAll,doNotShowAddVariableButton:!0,excludeSingularBloodPressure:!0,noVariablesFoundCard:{body:"I don't have enough data to determine the top predictors of __VARIABLE_NAME__, yet. I generally need about a month of data to produce significant results so start tracking!"},variableSearchParameters:{includePublic:!0,fallbackToAggregatedCorrelations:!0,numberOfCorrelationsAsEffect:"(gt)1",sort:"-numberOfCorrelationsAsEffect",outcome:!0},hideNavigationMenu:null},views:{menuContent:{templateUrl:"templates/variable-search.html",controller:"VariableSearchCtrl"}}}).state(qmStates.tageeSearch,{url:"/tagee-search",cache:!1,params:{userTagVariableObject:null,title:"Select Tagee",variableSearchPlaceholderText:"Search for a variable to tag...",variableCategoryName:null,nextState:qmStates.tagAdd,fromState:null,fromStateParams:null,doNotShowAddVariableButton:!0,excludeSingularBloodPressure:!0,noVariablesFoundCard:{body:"I can't find __VARIABLE_NAME__. Please try another"},variableSearchParameters:{includePublic:!0},hideNavigationMenu:null,doneState:null},views:{menuContent:{templateUrl:"templates/variable-search.html",controller:"VariableSearchCtrl"}}}).state(qmStates.tagSearch,{url:"/tag-search",cache:!1,params:{userTaggedVariableObject:null,title:"Tags",variableSearchPlaceholderText:"Search for a tag...",variableCategoryName:null,nextState:qmStates.tagAdd,fromState:null,fromStateParams:null,doNotShowAddVariableButton:!0,excludeSingularBloodPressure:!0,noVariablesFoundCard:{body:"I can't find __VARIABLE_NAME__. Please try another"},variableSearchParameters:{includePublic:!0},hideNavigationMenu:null,doneState:null},views:{menuContent:{templateUrl:"templates/variable-search.html",controller:"VariableSearchCtrl"}}}).state(qmStates.tagAdd,{url:"/tag-add",cache:!1,params:{tagConversionFactor:null,fromState:null,fromStateParams:null,fromUrl:null,userTagVariableObject:null,userTaggedVariableObject:null,variableObject:null,helpText:"Say I want to track how much sugar I consume and see how that affects me.  I don't need to check the label every time.  I can just tag Candy Bar and Lollypop with the amount sugar. Then during analysis the sugar from those items will be included.  Additionally if I have multiple variables that are basically the same thing like maybe a drug and it's generic name, I can tag those and then the measurements from both variables will be included in the analysis."},views:{menuContent:{templateUrl:"templates/tag-add.html",controller:"TagAddCtrl"}}}).state(qmStates.outcomeSearch,{url:"/outcome-search",cache:!1,params:{title:"Predictors",variableSearchPlaceholderText:"Search for an predictor...",helpText:"Search for a predictor like a food or treatment that you want to know the effects of...",variableCategoryName:null,nextState:qmStates.outcomesAll,doNotShowAddVariableButton:!0,excludeSingularBloodPressure:!0,noVariablesFoundCard:{body:"I don't have enough data to determine the top outcomes of __VARIABLE_NAME__, yet. I generally need about a month of data to produce significant results so start tracking!"},variableSearchParameters:{includePublic:!0,fallbackToAggregatedCorrelations:!0,numberOfCorrelationsAsCause:"(gt)1",sort:"-numberOfCorrelationsAsCause"},hideNavigationMenu:null},views:{menuContent:{templateUrl:"templates/variable-search.html",controller:"VariableSearchCtrl"}}}).state(qmStates.searchVariablesWithUserPredictors,{url:"/search-variables-with-user-predictors",cache:!1,params:{variableCategoryName:null,nextState:qmStates.predictorsAll,doNotShowAddVariableButton:!0,excludeSingularBloodPressure:!0,variableSearchParameters:{includePublic:!1,numberOfUserCorrelations:"(gt)1"},hideNavigationMenu:null},views:{menuContent:{templateUrl:"templates/variable-search.html",controller:"VariableSearchCtrl"}}}).state(qmStates.searchVariablesWithCommonPredictors,{url:"/search-variables-with-common-predictors",cache:!1,params:{variableCategoryName:null,nextState:qmStates.predictorsAll,doNotShowAddVariableButton:!0,excludeSingularBloodPressure:!0,variableSearchParameters:{includePublic:!0,numberOfAggregatedCorrelations:"(gt)1"},hideNavigationMenu:null},views:{menuContent:{templateUrl:"templates/variable-search.html",controller:"VariableSearchCtrl"}}}).state(qmStates.charts,{url:"/charts/:variableName",cache:!1,params:{trackingReminder:null,variableObject:null,measurementInfo:null,noReload:!1,fromState:null,fromUrl:null,refresh:null},views:{menuContent:{templateUrl:"templates/charts-page.html",controller:"ChartsPageCtrl"}}}).state(qmStates.studies,{url:"/studies",params:{aggregated:null,variableObject:null,causeVariableName:null,effectVariableName:null,requestParams:{correlationCoefficient:null}},cache:!0,views:{menuContent:{templateUrl:"templates/predictors-list.html",controller:"PredictorsCtrl"}}}).state(qmStates.predictorsAll,{url:"/predictors/:effectVariableName",params:{aggregated:!1,variableObject:null,causeVariableName:null,effectVariableName:null,requestParams:{correlationCoefficient:null}},cache:!0,views:{menuContent:{templateUrl:"templates/predictors-list.html",controller:"PredictorsCtrl"}}}).state(qmStates.outcomesAll,{url:"/outcomes/:causeVariableName",params:{aggregated:!1,variableObject:null,causeVariableName:null,effectVariableName:null,requestParams:{correlationCoefficient:null}},cache:!0,views:{menuContent:{templateUrl:"templates/predictors-list.html",controller:"PredictorsCtrl"}}}).state(qmStates.predictorsPositive,{url:"/predictors-positive",params:{aggregated:!1,valence:"positive",variableObject:null,causeVariableName:null,effectVariableName:null,fallBackToPrimaryOutcome:!0,requestParams:{correlationCoefficient:"(gt)0"}},cache:!0,views:{menuContent:{templateUrl:"templates/predictors-list.html",controller:"PredictorsCtrl"}}}).state(qmStates.predictorsPositiveVariable,{url:"/predictors-positive-variable/:effectVariableName",params:{aggregated:!1,valence:"positive",variableObject:null,causeVariableName:null,effectVariableName:null,fallBackToPrimaryOutcome:!0,requestParams:{correlationCoefficient:"(gt)0"}},cache:!0,views:{menuContent:{templateUrl:"templates/predictors-list.html",controller:"PredictorsCtrl"}}}).state(qmStates.predictorsNegative,{url:"/predictors-negative",params:{aggregated:!1,valence:"negative",variableObject:null,causeVariableName:null,effectVariableName:null,fallBackToPrimaryOutcome:!0,requestParams:{correlationCoefficient:"(lt)0"}},cache:!0,views:{menuContent:{templateUrl:"templates/predictors-list.html",controller:"PredictorsCtrl"}}}).state(qmStates.predictorsNegativeVariable,{url:"/predictors-negative-variable/:effectVariableName",params:{aggregated:!1,valence:"negative",variableObject:null,causeVariableName:null,effectVariableName:null,fallBackToPrimaryOutcome:!0,requestParams:{correlationCoefficient:"(lt)0"}},cache:!0,views:{menuContent:{templateUrl:"templates/predictors-list.html",controller:"PredictorsCtrl"}}}).state(qmStates.predictorsUser,{url:"/predictors/user/:effectVariableName",params:{aggregated:!1,variableObject:null,causeVariableName:null,effectVariableName:null,fallBackToPrimaryOutcome:!0,requestParams:{correlationCoefficient:null}},cache:!0,views:{menuContent:{templateUrl:"templates/predictors-list.html",controller:"PredictorsCtrl"}}}).state(qmStates.predictorsAggregated,{url:"/predictors/aggregated/:effectVariableName",params:{aggregated:!0,variableObject:null,fallBackToPrimaryOutcome:!0,requestParams:{causeVariableName:null,effectVariableName:null,correlationCoefficient:null}},cache:!0,views:{menuContent:{templateUrl:"templates/predictors-list.html",controller:"PredictorsCtrl"}}}).state(qmStates.study,{cache:!0,url:"/study",params:{correlationObject:null,causeVariableName:null,effectVariableName:null,refresh:null},views:{menuContent:{templateUrl:"templates/study-page.html",controller:"StudyCtrl"}}}).state(qmStates.studyJoin,{cache:!1,url:"/study-join",params:{correlationObject:null},views:{menuContent:{templateUrl:"templates/study-join-page.html",controller:"StudyJoinCtrl"}}}).state(qmStates.studyCreation,{cache:!1,url:"/study-creation",params:{correlationObject:null,causeVariable:null,effectVariable:null},views:{menuContent:{templateUrl:"templates/study-creation-page.html",controller:"StudyCreationCtrl"}}}).state(qmStates.settings,{url:"/settings",views:{menuContent:{templateUrl:"templates/settings.html",controller:"SettingsCtrl"}}}).state(qmStates.notificationPreferences,{url:"/notificationPreferences",views:{menuContent:{templateUrl:"templates/notification-preferences.html",controller:"SettingsCtrl"}}}).state(qmStates.map,{url:"/map",views:{menuContent:{templateUrl:"templates/map.html",controller:"MapCtrl"}}}).state(qmStates.help,{url:"/help",views:{menuContent:{templateUrl:"templates/help.html",controller:"ExternalCtrl"}}}).state(qmStates.feedback,{url:"/feedback",views:{menuContent:{templateUrl:"templates/feedback.html",controller:"ExternalCtrl"}}}).state(qmStates.contact,{url:"/contact",views:{menuContent:{templateUrl:"templates/contact.html",controller:"ExternalCtrl"}}}).state(qmStates.history,{url:"/history",params:{updatedMeasurementHistory:null,variableObject:null,refresh:null,variableCategoryName:null,connectorName:null,sourceName:null},views:{menuContent:{templateUrl:"templates/history-all.html",controller:"historyAllMeasurementsCtrl"}}}).state(qmStates.historyAll,{url:"/history-all",cache:!0,params:{variableCategoryName:null,connectorName:null,sourceName:null,updatedMeasurementHistory:null,refresh:null},views:{menuContent:{templateUrl:"templates/history-all.html",controller:"historyAllMeasurementsCtrl"}}}).state(qmStates.historyAllCategory,{url:"/history-all-category/:variableCategoryName",cache:!0,params:{updatedMeasurementHistory:null,refresh:null},views:{menuContent:{templateUrl:"templates/history-all.html",controller:"historyAllMeasurementsCtrl"}}}).state(qmStates.historyAllVariable,{url:"/history-all-variable/:variableName",cache:!0,params:{variableObject:null,updatedMeasurementHistory:null,refresh:null},views:{menuContent:{templateUrl:"templates/history-all.html",controller:"historyAllMeasurementsCtrl"}}}).state(qmStates.remindersInbox,{url:"/reminders-inbox",cache:!0,params:{title:"Reminder Inbox",reminderFrequency:null,unit:null,variableName:null,dateTime:null,value:null,fromUrl:null,showHelpCards:!0},views:{menuContent:{templateUrl:"templates/reminders-inbox.html",controller:"RemindersInboxCtrl"}}}).state(qmStates.remindersInboxCompact,{url:"/reminders-inbox-compact",cache:!1,params:{title:"Reminder Inbox",reminderFrequency:null,unit:null,variableName:null,dateTime:null,value:null,fromUrl:null,showHelpCards:!1,hideNavigationMenu:!0},views:{menuContent:{templateUrl:"templates/reminders-inbox-compact.html",controller:"RemindersInboxCtrl"}}}).state(qmStates.favorites,{url:"/favorites",cache:!1,params:{reminderFrequency:0,unit:null,variableName:null,dateTime:null,value:null,fromUrl:null},views:{menuContent:{templateUrl:"templates/favorites.html",controller:"FavoritesCtrl"}}}).state(qmStates.configurationClientId,{cache:!0,url:"/configuration/:clientId",views:{menuContent:{templateUrl:"../../app-configuration/templates/configuration.html",controller:"ConfigurationCtrl"}}}).state(qmStates.configuration,{cache:!0,url:"/configuration",views:{menuContent:{templateUrl:"../../app-configuration/templates/configuration.html",controller:"ConfigurationCtrl"}}}).state(qmStates.remindersInboxToday,{url:"/reminders-inbox-today",params:{unit:null,variableName:null,dateTime:null,value:null,fromUrl:null,today:!0},views:{menuContent:{templateUrl:"templates/reminders-inbox.html",controller:"RemindersInboxCtrl"}}}).state(qmStates.manageScheduledMeds,{url:"/manage-scheduled-meds",params:{title:"Manage Scheduled Meds",helpText:"Here you can add and manage your scheduled medications.  Long-press on a medication for more options.  You can drag down to refresh.",addButtonText:"Add scheduled medication",variableCategoryName:"Treatments",trackingReminders:null},views:{menuContent:{templateUrl:"templates/reminders-manage.html",controller:"RemindersManageCtrl"}}}).state(qmStates.todayMedSchedule,{url:"/today-med-schedule",params:{title:"Today's Med Schedule",helpText:"Here you can see and record today's scheduled doses.",today:!0,variableCategoryName:"Treatments"},views:{menuContent:{templateUrl:"templates/reminders-inbox.html",controller:"RemindersInboxCtrl"}}}).state(qmStates.asNeededMeds,{url:"/as-needed-meds",params:{title:"As Needed Meds",variableCategoryName:"Treatments"},views:{menuContent:{templateUrl:"templates/favorites.html",controller:"FavoritesCtrl"}}}).state(qmStates.remindersManage,{cache:!1,url:"/reminders-manage",views:{menuContent:{templateUrl:"templates/reminders-manage.html",controller:"RemindersManageCtrl"}},params:{variableCategoryName:null,trackingReminders:null}}).state(qmStates.remindersManageCategory,{cache:!1,url:"/reminders-manage-category/:variableCategoryName",views:{menuContent:{templateUrl:"templates/reminders-manage.html",controller:"RemindersManageCtrl"}},params:{trackingReminders:null}}).state(qmStates.remindersList,{cache:!1,url:"/reminders-list",views:{menuContent:{templateUrl:"templates/reminders-list.html",controller:"RemindersManageCtrl"}},params:{variableCategoryName:null,trackingReminders:null}}).state(qmStates.remindersListCategory,{cache:!1,url:"/reminders-list-category/:variableCategoryName",views:{menuContent:{templateUrl:"templates/reminders-list.html",controller:"RemindersManageCtrl"}},params:{trackingReminders:null}}).state(qmStates.variableList,{cache:!0,url:"/variable-list",params:{variableCategoryName:null,trackingReminders:null},views:{menuContent:{templateUrl:"templates/reminders-list.html",controller:"RemindersManageCtrl"}}}).state(qmStates.variableListCategory,{cache:!0,url:"/variable-list-category/:variableCategoryName",params:{trackingReminders:null},views:{menuContent:{templateUrl:"templates/reminders-list.html",controller:"RemindersManageCtrl"}}}).state(qmStates.reminderAdd,{url:"/reminder-add/:variableName",cache:!1,params:{variableCategoryName:null,variableName:null,reminder:null,fromState:null,fromUrl:null,measurement:null,variableObject:null,favorite:!1,doneState:null,skipReminderSettingsIfPossible:null},views:{menuContent:{templateUrl:"templates/reminder-add.html",controller:"ReminderAddCtrl"}}}).state(qmStates.onboarding,{url:"/onboarding",cache:!0,params:{},views:{menuContent:{templateUrl:"templates/onboarding-page.html",controller:"OnboardingCtrl"}}}).state(qmStates.upgrade,{url:"/upgrade",cache:!0,params:{litePlanState:null},views:{menuContent:{templateUrl:"templates/upgrade-page-cards.html",controller:"UpgradeCtrl"}}}).state(qmStates.tabs,{url:"/tabs",cache:!0,params:{},views:{menuContent:{templateUrl:"templates/tabs.html",controller:"TabsCtrl"}}}).state(qmStates.favoriteAdd,{url:"/favorite-add",cache:!1,params:{reminder:null,variableCategoryName:null,reminderNotification:null,fromState:null,fromUrl:null,measurement:null,variableObject:null,favorite:!0,doneState:null,skipReminderSettingsIfPossible:null},views:{menuContent:{templateUrl:"templates/reminder-add.html",controller:"ReminderAddCtrl"}}}),qm.storage.getItem(qm.items.introSeen)?qm.storage.getItem(qm.items.onboarded)?$urlRouterProvider.otherwise("/app/reminders-inbox"):$urlRouterProvider.otherwise("/app/onboarding"):$urlRouterProvider.otherwise("/app/intro")}]).component("mdFabProgress",{template:"<md-button class='md-fab' ng-click='$ctrl.onClick()' ng-class=\"{'is-done': $ctrl.done}\"><md-icon ng-if='!done' class=\"ion-checkmark\" md-font-icon=\"ion-checkmark\"></md-icon><md-icon ng-if='done' class=\"ion-upload\" md-font-icon=\"ion-upload\"></md-icon></md-button><md-progress-circular ng-class=\"{'is-active': $ctrl.active}\" value='{{$ctrl.value}}' md-mode='determinate' md-diameter='68'></md-progress-circular>",bindings:{icon:"<",iconDone:"<",value:"<",doAction:"&"},controller:function($scope){var that=this;that.active=!1,that.done=!1,that.onClick=function(){that.active||that.doAction()},$scope.$watch(function(){return that.value},function(newValue){newValue>=100?(that.done=!0,that.active=!1):0==newValue?(that.done=!1,that.active=!1):that.active||(that.active=!0)})}}),angular.module("exceptionOverride",[]).factory("$exceptionHandler",function(){return function(exception,cause){"undefined"!=typeof bugsnag&&(window.bugsnagClient=bugsnag("ae7bc49d1285848342342bb5c321a2cf"),bugsnagClient.notify(exception,{diagnostics:{cause:cause}}))}}),angular.module("starter").factory("qmLogService",["$state","$q","$rootScope",function($state,$q,$rootScope){function addStateNameToMessage(message){return $state.current.name&&(message=message+" in state "+$state.current.name),qmLog.context=$state.current.name,message}var qmLogService={};return qmLogService.setupBugsnag=function(){var deferred=$q.defer();return qmLog.setupBugsnag(),qmLog.metaData.platform=ionic.Platform.platform(),qmLog.metaData.platformVersion=ionic.Platform.version(),deferred.resolve(),deferred.promise},qmLogService.debug=function(name,message,metaData,stackTrace){message=message||name,name=name||message,metaData=metaData||null,message=addStateNameToMessage(message),qmLog.debug(name,message,metaData,stackTrace)},qmLogService.info=function(name,message,metaData,stackTrace){message=message||name,name=name||message,metaData=metaData||null,message=addStateNameToMessage(message),qmLog.info(name,message,metaData,stackTrace)},qmLogService.error=function(name,message,metaData,stackTrace){message=message||name,name=name||message,metaData=metaData||null,message&&message.message&&(message=message.message),message=addStateNameToMessage(message=window.stringifyIfNecessary(message)),window.qmLog.error(name,message,metaData,stackTrace)},qmLogService}]),angular.module("starter").factory("qmService",["$http","$q","$rootScope","$ionicPopup","$state","$timeout","$ionicPlatform","$mdDialog","$mdToast","qmLogService","$cordovaGeolocation","CacheFactory","$ionicLoading","Analytics","wikipediaFactory","$ionicHistory","$ionicActionSheet",function($http,$q,$rootScope,$ionicPopup,$state,$timeout,$ionicPlatform,$mdDialog,$mdToast,qmLogService,$cordovaGeolocation,CacheFactory,$ionicLoading,Analytics,wikipediaFactory,$ionicHistory,$ionicActionSheet){function qmSdkApiResponseHandler(error,data,response,successHandler,errorHandler,params,functionName){response?(window.qmLog.debug(response.status+" response from "+response.req.url),error?(qmApiGeneralErrorHandler(error,data,response),errorHandler&&errorHandler(error)):(data&&params&&qm.api.cacheSet(params,data,functionName),successHandler&&successHandler(data,response))):"app.login"!==$state.current.name&&"app.intro"!==$state.current.name&&qmLogService.info("No response provided to "+functionName+" qmSdkApiResponseHandler with params "+JSON.stringify(params))}function addGlobalUrlParamsToArray(urlParams){urlParams.push(encodeURIComponent("appName")+"="+encodeURIComponent($rootScope.appSettings.appDisplayName)),$rootScope.appSettings.versionNumber?urlParams.push(encodeURIComponent("appVersion")+"="+encodeURIComponent($rootScope.appSettings.versionNumber)):qmLog.authDebug("Version number not specified!","Version number not specified on qm.getAppSettings()"),urlParams.push(encodeURIComponent("clientId")+"="+encodeURIComponent(qm.api.getClientId())),window.devCredentials?(window.devCredentials.username&&urlParams.push(encodeURIComponent("log")+"="+encodeURIComponent(window.devCredentials.username)),window.devCredentials.password&&urlParams.push(encodeURIComponent("pwd")+"="+encodeURIComponent(window.devCredentials.password))):qmLog.authDebug("No dev credentials");for(var passableUrlParameters=["userId","log","pwd","userEmail"],i=0;i<passableUrlParameters.length;i++)qm.urlHelper.getParam(passableUrlParameters[i])&&urlParams.push(encodeURIComponent(passableUrlParameters[i])+"="+qm.urlHelper.getParam(passableUrlParameters[i]));return urlParams}function addGlobalUrlParamsToObject(urlParams){urlParams.appName=encodeURIComponent($rootScope.appSettings.appDisplayName),$rootScope.appSettings.versionNumber?urlParams.appVersion=encodeURIComponent($rootScope.appSettings.versionNumber):qmLogService.debug("Version number not specified!",null,"Version number not specified on qm.getAppSettings()"),urlParams.clientId=encodeURIComponent(qm.api.getClientId()),window.devCredentials?(window.devCredentials.username&&(urlParams.log=encodeURIComponent(window.devCredentials.username)),window.devCredentials.password&&(urlParams.pwd=encodeURIComponent(window.devCredentials.password))):qmLogService.debug("No dev credentials",null);for(var passableUrlParameters=["userId","log","pwd","userEmail"],i=0;i<passableUrlParameters.length;i++)qm.urlHelper.getParam(passableUrlParameters[i])&&(urlParams[passableUrlParameters[i]]=qm.urlHelper.getParam(passableUrlParameters[i]));return urlParams}function addVariableCategoryInfo(array){return angular.forEach(array,function(value,key){value||qmLogService.error("no value for key "+key+" in array "+JSON.stringify(array)),value&&value.variableCategoryName&&qmService.variableCategories[value.variableCategoryName]&&(void 0===value.iconClass&&(value.iconClass="icon positive "+qmService.variableCategories[value.variableCategoryName].ionIcon),void 0===value.ionIcon&&(value.ionIcon=qmService.variableCategories[value.variableCategoryName].ionIcon),void 0===value.moreInfo&&(value.moreInfo=qmService.variableCategories[value.variableCategoryName].moreInfo),void 0===value.image&&(qmLog.info("Updating image to "+value.variableCategoryName),value.image={url:qmService.variableCategories[value.variableCategoryName].imageUrl,height:"96",width:"96"}))}),array}function addColors(array){return angular.forEach(array,function(value,key){value||qmLogService.error("no value for key "+key+" in array "+JSON.stringify(array)),value&&value.color&&qmService.colors[value.color]&&(value.color=qmService.colors[value.color])}),array}function toObject(arr){for(var rv={},i=0;i<arr.length;++i)rv[i]=arr[i];return rv}function addVariableCategoryStateParam(object){if("object"!=typeof object)return qmLogService.error("not an object",object),object;for(var prop in object)object.hasOwnProperty(prop)&&object[prop].stateParameters&&(object[prop].stateParameters.constructor===Array&&(qmLogService.error("stateParams should be an object!"),object[prop].stateParameters=toObject(object[prop].stateParameters)),object[prop].stateParameters.variableCategoryName||(object[prop].stateParameters.variableCategoryName="Anything"));return object}function removeDeprecatedProperties(object){if("object"!=typeof object)return qmLogService.error("not an object",object),object;for(var deprecatedProperties=["newIntroType"],i=0;i<deprecatedProperties.length;i++)delete object[deprecatedProperties[i]];return object}function addAppDisplayName(array){return JSON.parse(JSON.stringify(array).replace("__APP_DISPLAY_NAME__",$rootScope.appSettings.appDisplayName))}function setAfterLoginGoToUrlAndSendToLogin(){-1===$state.current.name.indexOf("login")?(setAfterLoginGoToUrl(),sendToLogin()):qmLogService.info("setAfterLoginGoToUrlAndSendToLogin: Why are we sending to login from login state?")}function showOfflineError(options,request){var pathWithoutQuery=getPathWithoutQuery(request),doNotShowOfflineError=!1;options&&options.doNotShowOfflineError&&(doNotShowOfflineError=!0),$rootScope.offlineConnectionErrorShowing||doNotShowOfflineError||(qmLogService.error("Showing offline indicator because no data was returned from this request: "+pathWithoutQuery,{debugApiUrl:getDebugApiUrlFromRequest(request),request:request},options.stackTrace),qmService.navBar.setOfflineConnectionErrorShowing(!0),$rootScope.platform.isIOS&&$ionicPopup.show({title:"NOT CONNECTED",template:"Either you are not connected to the internet or the QuantiModo server cannot be reached.",buttons:[{text:"OK",type:"button-positive",onTap:function(){qmService.navBar.setOfflineConnectionErrorShowing(!1)}}]}))}function logApiError(status,request,data,options){var errorName=status+" from "+request.method+" "+getPathWithoutQuery(request);data&&data.error&&"string"==typeof data.error&&(errorName=data.error);var metaData={debugApiUrl:getDebugApiUrlFromRequest(request),appUrl:window.location.href,groupingHash:errorName,requestData:data,status:status,request:request,requestOptions:options,requestParams:qm.urlHelper.getAllQueryParamsFromUrlString(request.url)};data.error&&(metaData.groupingHash=JSON.stringify(data.error),data.error.message&&(metaData.groupingHash=JSON.stringify(data.error.message))),qmLogService.error(errorName,metaData,options.stackTrace)}function handle401Response(request,options,headers){options&&options.doNotSendToLogin||(qmLogService.debug("qmService.generalApiErrorHandler: Sending to login because we got 401 with request "+JSON.stringify(request),null,options.stackTrace),qmLogService.debug("HEADERS: "+JSON.stringify(headers),null,options.stackTrace),qm.auth.deleteAllAccessTokens(),setAfterLoginGoToUrlAndSendToLogin())}function getPathWithoutQuery(request){return request.url.match(/\/\/[^\/]+\/([^\.]+)/)[1].split("?")[0]}function generalApiErrorHandler(data,status,headers,request,options){return 302===status?qmLogService.debug("Got 302 response from "+JSON.stringify(request),null,options.stackTrace):401===status?(qmLog.info("Got 401 response with headers: "+JSON.stringify(headers),null,options.stackTrace),qmService.auth.handleExpiredAccessTokenResponse(data),handle401Response(request,options,headers)):void(data?logApiError(status,request,data,options):showOfflineError(options,request))}function getDebugApiUrlFromRequest(request){var debugUrl=request.method+" "+request.url;return request.headers&&request.headers.Authorization&&(debugUrl+="&access_token="+request.headers.Authorization.replace("Bearer ","")),debugUrl=debugUrl.replace("app.","local."),debugUrl=debugUrl.replace("staging.","local.")}function getDefaultState(){return window.designMode?qmStates.configuration:qm.getAppSettings().appDesign.defaultState||qmStates.remindersInbox}function configureQmApiClient(functionName,errorHandler,minimumSecondsBetweenRequests,blockRequests){if(minimumSecondsBetweenRequests=minimumSecondsBetweenRequests||1,blockRequests=blockRequests||!0,!qm.api.canWeMakeRequestYet("GET",functionName,{minimumSecondsBetweenRequests:1,blockRequests:blockRequests}))return errorHandler("Already made request in last "+minimumSecondsBetweenRequests+" seconds"),!1;var qmApiClient=Quantimodo.ApiClient.instance,quantimodo_oauth2=qmApiClient.authentications.quantimodo_oauth2;return qmApiClient.basePath=qm.api.getBaseUrl()+"/api",quantimodo_oauth2.accessToken=function(){if(qmService.getAccessTokenFromUrlAndSetLocalStorageFlags())return qmService.getAccessTokenFromUrlAndSetLocalStorageFlags();if($rootScope.user&&$rootScope.user.accessToken)return $rootScope.user.accessToken;var accessTokenFromLocalStorage=qm.storage.getItem("accessToken");return accessTokenFromLocalStorage||void 0}(),qmApiClient}function qmApiGeneralErrorHandler(error,data,response,options){if(!response)return qmLogService.error("No API response provided to qmApiGeneralErrorHandler",{errorMessage:error,responseData:data,apiResponse:response,requestOptions:options});if(401===response.status||response.text&&-1!==response.text.indexOf("expired"))qmService.auth.handleExpiredAccessTokenResponse(response.body),options&&options.doNotSendToLogin||setAfterLoginGoToUrlAndSendToLogin();else{var errorMessage=response.error&&response.error.message?response.error.message:error.message;qmLogService.error(errorMessage,error.stack,{apiResponse:response},error.stack)}}function getDeviceTokenToSync(){return qm.storage.getItem(qm.items.deviceTokenToSync)}function sendToAfterLoginGoToUrlIfNecessary(){var afterLoginGoToUrl=qm.storage.getItem("afterLoginGoToUrl");if(afterLoginGoToUrl)return qmLogService.info("Going to afterLoginGoToUrl from local storage  "+afterLoginGoToUrl),qm.storage.removeItem("afterLoginGoToUrl"),window.location.replace(afterLoginGoToUrl),!0;qmLogService.debug("sendToAfterLoginGoToUrlIfNecessary: No afterLoginGoToUrl from local storage",null)}function sendToAfterLoginStateIfNecessary(){var afterLoginGoToState=qm.storage.getItem("afterLoginGoToState");if(qmLogService.debug("afterLoginGoToState from localstorage is  "+afterLoginGoToState,null),afterLoginGoToState)return qm.storage.removeItem("afterLoginGoToState"),qmService.goToState(afterLoginGoToState),!0}function sendToDefaultStateIfNecessary(){if("app.login"===$state.current.name)return qmService.goToDefaultState(),!0}function checkIfStartTimeEpochIsWithinTheLastYear(startTimeEpoch){if(!(startTimeEpoch>window.qm.timeHelper.getUnixTimestampInSeconds()-31536e3)){var errorName="startTimeEpoch is earlier than last year",errorMessage=startTimeEpoch+" "+errorName;qmLog.error(errorName,errorMessage,{startTimeEpoch:startTimeEpoch},"error"),qmLogService.error(errorMessage)}return startTimeEpoch}function addLocationDataToMeasurement(measurementObject){return measurementObject.latitude||(measurementObject.latitude=qm.storage.getItem(qm.items.lastLatitude)),measurementObject.longitude||(measurementObject.longitude=qm.storage.getItem(qm.items.lastLongitude)),measurementObject.location||(measurementObject.location=qm.storage.getItem(qm.items.lastLocationNameAndAddress)),measurementObject}function updateMeasurementInQueue(measurementInfo){var found=!1;qm.storage.getItem("measurementsQueue",function(measurementsQueue){for(;!found&&0<measurementsQueue.length;)measurementsQueue[0].startTimeEpoch===measurementInfo.prevStartTimeEpoch&&(found=!0,measurementsQueue[0].startTimeEpoch=measurementInfo.startTimeEpoch,measurementsQueue[0].value=measurementInfo.value,measurementsQueue[0].note=measurementInfo.note);qmService.storage.setItem("measurementsQueue",measurementsQueue)})}function isStartTimeInMilliseconds(measurementInfo){var oneWeekInFuture=window.qm.timeHelper.getUnixTimestampInSeconds()+604800;return measurementInfo.startTimeEpoch>oneWeekInFuture&&(measurementInfo.startTimeEpoch=measurementInfo.startTimeEpoch/1e3,console.warn("Assuming startTime is in milliseconds since it is more than 1 week in the future"),!0)}function hideUnavailableConnectors(connectors){for(var i=0;i<connectors.length;i++)connectors[i].spreadsheetUpload&&$rootScope.platform.isMobile&&(connectors[i].hide=!0);return connectors}function getLocationNameFromResult(getLookupResult){return getLookupResult.name&&"undefined"!==getLookupResult.name?getLookupResult.name:getLookupResult.address&&"undefined"!==getLookupResult.address?getLookupResult.address:void qmLogService.error("No name or address property found in this coordinates result: "+JSON.stringify(getLookupResult))}function getLastLocationNameFromLocalStorage(){var lastLocationName=qm.storage.getItem(qm.items.lastLocationName);if(lastLocationName&&"undefined"!==lastLocationName)return lastLocationName}function getHoursAtLocation(){var secondsAtLocation=window.qm.timeHelper.getUnixTimestampInSeconds()-qm.storage.getItem(qm.items.lastLocationUpdateTimeEpochSeconds);return Math.round(secondsAtLocation/3600*100)/100}function getGeoLocationSourceName(isBackground){var sourceName=qm.storage.getItem(qm.items.lastLocationResultType)+" on "+qm.getSourceName();return isBackground&&(sourceName+=" (Background Geolocation)"),sourceName}function weShouldPostLocation(){return $rootScope.platform.isMobile&&getLastLocationNameFromLocalStorage()&&getHoursAtLocation()}function hasLocationNameChanged(geoLookupResult){return getLastLocationNameFromLocalStorage()!==getLocationNameFromResult(geoLookupResult)}function coordinatesChanged(coordinates){return qm.storage.getItem(qm.items.lastLatitude)!==coordinates.latitude&&qm.storage.getItem(qm.items.lastLongitude)!==coordinates.longitude}function lookupGoogleAndFoursquareLocationAndPostMeasurement(coordinates,isBackground){qm.geoLocation.getFoursqureClientId()&&qm.geoLocation.getFoursquareClientSecret()?qm.geoLocation.getGoogleMapsApiKey()?coordinatesChanged(coordinates)&&qmService.getLocationInfoFromFoursquareOrGoogleMaps(coordinates.latitude,coordinates.longitude).then(function(geoLookupResult){if(geoLocationDebug&&$rootScope.user&&230===$rootScope.user.id&&qmLogService.error("getLocationInfoFromFoursquareOrGoogleMaps was "+JSON.stringify(geoLookupResult)),"foursquare"===geoLookupResult.type)geoLocationDebug&&$rootScope.user&&230===$rootScope.user.id&&qmLogService.error("Foursquare location name is "+geoLookupResult.name+" located at "+geoLookupResult.address);else if("geocode"===geoLookupResult.type)geoLocationDebug&&$rootScope.user&&230===$rootScope.user.id&&qmLogService.error("geocode address is "+geoLookupResult.address);else{coordinates.latitude,coordinates.longitude,coordinates.latitude,coordinates.longitude;qmLogService.debug("Sorry, I've got nothing. But here is a map!",null)}geoLookupResult.latitude=coordinates.latitude,geoLookupResult.longitude=coordinates.longitude,hasLocationNameChanged(geoLookupResult)?qmService.postLocationMeasurementAndSetLocationVariables(geoLookupResult,isBackground):geoLocationDebug&&$rootScope.user&&230===$rootScope.user.id&&qmLogService.error("Location name has not changed!")}):qmLog.error("Please add GOOGLE_MAPS_API_KEY to private config"):qmLog.error("Please add FOURSQUARE_CLIENT_ID & FOURSQUARE_CLIENT_SECRET to private config")}function parseJsonIfPossible(str){var object=!1;try{object=JSON.parse(str)}catch(e){return!1}return object}function setChartExportingOptions(highchartConfig){return highchartConfig?(highchartConfig.exporting={enabled:$rootScope.platform.isWeb},highchartConfig):(qmLog.info("No highchartConfig provided to setChartExportingOptions"),highchartConfig)}function calculateWeightedMovingAverage(array,weightedPeriod){for(var weightedArray=[],i=0;i<=array.length-weightedPeriod;i++){for(var sum=0,j=0;j<weightedPeriod;j++)sum+=array[i+j]*(weightedPeriod-j);weightedArray[i]=sum/(weightedPeriod*(weightedPeriod+1)/2)}return weightedArray}function getRootDomain(url){var parts=url.split(".");return(parts[1]+"."+parts[2]).split("/")[0]}function isQuantiMoDoDomain(urlToCheck){var isHttps=0===urlToCheck.indexOf("https://"),matchesQuantiModo="quantimo.do"===getRootDomain(urlToCheck);return isHttps&&matchesQuantiModo?qmLogService.debug("Domain "+getRootDomain(urlToCheck)+" from event.url "+urlToCheck+" is a QuantiModo domain",null):qmLogService.debug("Domain "+getRootDomain(urlToCheck)+" from event.url "+urlToCheck+" is not a QuantiModo domain",null),isHttps&&matchesQuantiModo}function createWeatherIconMeasurementSet(data){return{variableCategoryName:"Environment",variableName:data.daily.data[0].icon.replace("-"," "),combinationOperation:"MEAN",sourceName:$rootScope.appSettings.appDisplayName,unitAbbreviatedName:"count",fillingValue:0,measurements:[{value:1,startTimeEpoch:checkIfStartTimeEpochIsWithinTheLastYear(getYesterdayNoonTimestamp())}]}}function createOutdoorWeatherMeasurementSet(data){return{variableCategoryName:"Environment",variableName:"Outdoor Temperature",combinationOperation:"MEAN",sourceName:$rootScope.appSettings.appDisplayName,unitAbbreviatedName:"F",measurements:[{value:(data.daily.data[0].temperatureMax+data.daily.data[0].temperatureMin)/2,startTimeEpoch:checkIfStartTimeEpochIsWithinTheLastYear(getYesterdayNoonTimestamp())}]}}function getYesterdayNoonTimestamp(){return moment(0,"HH").unix()-43200}function createBarometricPressureMeasurement(data){return{variableCategoryName:"Environment",variableName:"Barometric Pressure",combinationOperation:"MEAN",sourceName:$rootScope.appSettings.appDisplayName,unitAbbreviatedName:"Pa",measurements:[{value:100*data.daily.data[0].pressure,startTimeEpoch:checkIfStartTimeEpochIsWithinTheLastYear(getYesterdayNoonTimestamp())}]}}function createOutdoorHumidityMeasurement(data){return{variableCategoryName:"Environment",variableName:"Outdoor Humidity",combinationOperation:"MEAN",sourceName:$rootScope.appSettings.appDisplayName,unitAbbreviatedName:"%",measurements:[{value:100*data.daily.data[0].humidity,startTimeEpoch:checkIfStartTimeEpochIsWithinTheLastYear(getYesterdayNoonTimestamp())}]}}function createOutdoorVisibilityMeasurement(data){return{variableCategoryName:"Environment",variableName:"Outdoor Visibility",combinationOperation:"MEAN",sourceName:$rootScope.appSettings.appDisplayName,unitAbbreviatedName:"miles",measurements:[{value:data.daily.data[0].visibility,startTimeEpoch:checkIfStartTimeEpochIsWithinTheLastYear(getYesterdayNoonTimestamp())}]}}function createCloudCoverMeasurement(data){return{variableCategoryName:"Environment",variableName:"Cloud Cover",combinationOperation:"MEAN",sourceName:$rootScope.appSettings.appDisplayName,unitAbbreviatedName:"%",measurements:[{value:100*data.daily.data[0].cloudCover,startTimeEpoch:checkIfStartTimeEpochIsWithinTheLastYear(getYesterdayNoonTimestamp())}]}}function getLastPostedWeatherAtTimeUnixTime(){return Number(qm.storage.getItem("lastPostedWeatherAt"))}function alreadyPostedWeatherSinceNoonYesterday(){var lastPostedWeatherAt=getLastPostedWeatherAtTimeUnixTime();return!!lastPostedWeatherAt&&(!!(lastPostedWeatherAt&&lastPostedWeatherAt>getYesterdayNoonTimestamp())&&(qmLogService.debug("recently posted weather already",null),!0))}function getWeatherMeasurementSets(data){qmLogService.debug(data,null);var measurementSets=[];return measurementSets.push(createWeatherIconMeasurementSet(data)),measurementSets.push(createOutdoorWeatherMeasurementSet(data)),measurementSets.push(createBarometricPressureMeasurement(data)),measurementSets.push(createOutdoorHumidityMeasurement(data)),data.daily.data[0].visibility&&measurementSets.push(createOutdoorVisibilityMeasurement(data)),measurementSets.push(createCloudCoverMeasurement(data)),measurementSets}function setAfterLoginGoToState(afterLoginGoToState){-1===afterLoginGoToState.indexOf("login")?(qmLogService.debug("Setting afterLoginGoToState to "+afterLoginGoToState+" and going to login. ",null),qmService.storage.setItem("afterLoginGoToState",afterLoginGoToState)):qmLogService.info("setAfterLoginGoToState: Why are we sending to login from login state?")}function setAfterLoginGoToUrl(afterLoginGoToUrl){afterLoginGoToUrl||(afterLoginGoToUrl=window.location.href),-1===afterLoginGoToUrl.indexOf("login")?(qmLogService.debug("Setting afterLoginGoToUrl to "+afterLoginGoToUrl+" and going to login.",null),qmService.storage.setItem("afterLoginGoToUrl",afterLoginGoToUrl)):qmLogService.info("setAfterLoginGoToUrl: Why are we sending to login from login state?")}function processTrackingReminders(trackingReminders,variableCategoryName){trackingReminders=qmService.filterByStringProperty(trackingReminders,"variableCategoryName",variableCategoryName);for(var i=0;i<trackingReminders.length;i++)trackingReminders[i].total=null,void 0===trackingReminders[i].defaultValue&&(trackingReminders[i].defaultValue=null);return trackingReminders=qmService.attachVariableCategoryIcons(trackingReminders),separateFavoritesAndArchived(trackingReminders)}function separateFavoritesAndArchived(trackingReminders){var reminderTypesArray={allTrackingReminders:trackingReminders};qmLogService.debug("separateFavoritesAndArchived: allTrackingReminders is: "+JSON.stringify(trackingReminders),null),trackingReminders instanceof Array?qmLogService.debug("trackingReminders is an array"):qmLogService.debug("trackingReminders is not an array! trackingReminders:",null,trackingReminders);try{reminderTypesArray.favorites=trackingReminders.filter(function(trackingReminder){return 0===trackingReminder.reminderFrequency})}catch(error){qmLogService.error(error,"trying again after JSON.parse(JSON.stringify(trackingReminders)). Why is this necessary?",{trackingReminders:trackingReminders}),trackingReminders=JSON.parse(JSON.stringify(trackingReminders)),reminderTypesArray.favorites=qm.reminderHelper.getFavorites(trackingReminders)}try{reminderTypesArray.trackingReminders=qm.reminderHelper.getActive(trackingReminders)}catch(error){qmLogService.error(error,{trackingReminders:trackingReminders})}try{reminderTypesArray.archivedTrackingReminders=qm.reminderHelper.getArchived(trackingReminders)}catch(error){qmLogService.error(error,{trackingReminders:trackingReminders})}return reminderTypesArray}function sendToLogin(){if(qm.urlHelper.getParam("access_token"))return qm.auth.getAccessTokenFromCurrentUrl()||qmLogService.error("Not detecting snake case access_token",{},qmLog.getStackTrace()),void qmLogService.error("Why are we sending to login if we have an access token?",{},qmLog.getStackTrace());qmLog.authDebug("Sending to app.login",null),qmService.goToState("app.login")}function getStudyUrl(causeVariableName,effectVariableName){return getBaseAppUrl()+"#/app/study?causeVariableName="+encodeURIComponent(causeVariableName)+"&effectVariableName="+encodeURIComponent(effectVariableName)}function getBaseAppUrl(){return window.location.origin+window.location.pathname}function getStringAfterLastSlash(string){var lastSlashIndex=string.lastIndexOf("/");return string.substring(lastSlashIndex+1)}function convertObjectToQueryString(obj){if(!obj)return"";var str=[];for(var p in obj)obj.hasOwnProperty(p)&&str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return"?"+str.join("&")}function convertUrlAndParamsToHref(menuItem){var params=menuItem.params?menuItem.params:menuItem.stateParameters;return menuItem.subMenu||(menuItem.href="#/app"+menuItem.url,params&&params.variableCategoryName&&(menuItem.href+="-category/"+params.variableCategoryName,delete params.variableCategoryName),menuItem.href+=convertObjectToQueryString(params),menuItem.href=menuItem.href.replace("app/app","app")),window.qmLog.isDebugMode()&&qmLogService.debug("convertUrlAndParamsToHref ",null,menuItem),menuItem}function convertStateNameAndParamsToHref(menuItem){return menuItem.url=getUrlFromStateName(menuItem.stateName),convertUrlAndParamsToHref(menuItem)}function prettyJsonStringify(json){return JSON.stringify(json,null,"  ")}function stripQueryString(pathWithQuery){return pathWithQuery?-1===pathWithQuery.indexOf("?")?pathWithQuery:pathWithQuery.split("?")[0]:pathWithQuery}function convertUrlToLowerCaseStateName(menuItem){return menuItem.url?stripQueryString(menuItem.url).replace("/app/","app.").toLowerCase().replace("-",""):(qmLogService.debug("no url to convert in "+JSON.stringify(menuItem),null),menuItem)}function convertQueryStringToParams(menuItem){return menuItem.href?(menuItem.href&&!menuItem.params&&(menuItem.params=qm.urlHelper.getAllQueryParamsFromUrlString(menuItem.href)),menuItem.href=stripQueryString(menuItem.href),menuItem.href&&-1!==menuItem.href.indexOf("-category")&&!menuItem.params.variableCategoryName&&(menuItem.params.variableCategoryName=getStringAfterLastSlash(menuItem.href).replace("?","")),menuItem.params&&menuItem.params.variableCategoryName&&(-1===menuItem.href.indexOf("-category")&&(menuItem.href+="-category"),-1===menuItem.stateName.indexOf("Category")&&(menuItem.stateName+="Category"),-1===menuItem.href.indexOf(menuItem.params.variableCategoryName)&&(menuItem.href+="/"+menuItem.params.variableCategoryName)),menuItem):(qmLogService.debug("No menuItem.href for "+JSON.stringify(menuItem),null),menuItem)}function getUrlFromStateName(stateName){for(var i=0;i<allStates.length;i++)if(allStates[i].name===stateName)return allStates[i].url;qmLogService.error("Could not find state with name: "+stateName)}function convertStateNameAndParamsToHrefInActiveAndCustomMenus(menu){function convertStateNameAndParamsToHrefInAllMenuItems(menu){function convertStateNameAndParamsToHrefInSingleMenuItem(menuItem){if(!menuItem.stateName)return qmLogService.debug("No stateName on menu item",null,menuItem),menuItem;if(menuItem.subMenu&&menuItem.subMenu.length)return qmLogService.debug("menuItem is a parent",null,menuItem),menuItem;for(var i=0;i<allStates.length;i++)if(menuItem.stateName===allStates[i].name){if(menuItem.href="#/app"+allStates[i].url,-1!==menuItem.href.indexOf(":")){var pieces=menuItem.href.split(":"),paramName=pieces[pieces.length-1];menuItem.params&&menuItem.params[paramName]?menuItem.href=menuItem.href.replace(":"+paramName,menuItem.params[paramName]):menuItem.href=menuItem.href.replace(":"+paramName,"Anything")}return menuItem}}for(var i=0;i<menu.length;i++)if(menu[i].subMenu)for(var j=0;j<menu[i].subMenu.length;j++)menu[i].subMenu[j]=convertStateNameAndParamsToHrefInSingleMenuItem(menu[i].subMenu[j]);else menu[i]=convertStateNameAndParamsToHrefInSingleMenuItem(menu[i]);return menu}return menu.active=convertStateNameAndParamsToHrefInAllMenuItems(menu.active),menu.custom&&(menu.custom=convertStateNameAndParamsToHrefInAllMenuItems(menu.custom)),menu}function checkHoursSinceLastPushNotificationReceived(){$rootScope.platform.isMobile&&(qm.push.getLastPushTimeStampInSeconds()||(qmLogService.error("Push never received!"),qmService.notifications.reconfigurePushNotificationsIfNoTokenOnServerOrToSync()),qm.push.getMinutesSinceLastPush()>qm.notifications.getMostFrequentReminderIntervalInMinutes()&&(qmLogService.error("No pushes received in last "+qm.notifications.getMostFrequentReminderIntervalInMinutes()+"minutes (most frequent reminder period)!","Last push was "+qm.push.getHoursSinceLastPush()+" hours ago!"),qmService.notifications.reconfigurePushNotificationsIfNoTokenOnServerOrToSync()))}function isFalsey(value){if(!1===value||"false"===value)return!0}function saveDeviceTokenToSyncWhenWeLogInAgain(){qm.storage.getItem(qm.items.deviceTokenOnServer)&&(qm.storage.setItem(qm.items.deviceTokenToSync,qm.storage.getItem(qm.items.deviceTokenOnServer)),qmService.deleteDeviceTokenFromServer())}function logOutOfWebsite(){var afterLogoutGoToUrl=qm.urlHelper.getIonicUrlForPath("intro");-1!==window.location.href.indexOf("/src/")&&(afterLogoutGoToUrl=afterLogoutGoToUrl.replace("/www/","/src/")),-1===window.location.href.indexOf(".quantimo.do/")&&(afterLogoutGoToUrl=window.location.href);var logoutUrl=qmService.getQuantiModoUrl("api/v2/auth/logout?afterLogoutGoToUrl="+encodeURIComponent(afterLogoutGoToUrl));qmLog.info("Sending to "+logoutUrl);window.location.replace(logoutUrl)}var qmService={api:{headersGetter:function(headers){var headersObj="object"==typeof headers?headers:void 0;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}},auth:{deleteAllAccessTokens:function(){$rootScope.accessToken=null,$rootScope.user&&($rootScope.user.accessToken=null),qm.auth.deleteAllAccessTokens()},handleExpiredAccessTokenResponse:function(responseBody){responseBody&&qm.objectHelper.objectContainsString(responseBody,"expired")&&(qmService.rootScope.setUser(null),qmService.auth.deleteAllAccessTokens())}},barcodeScanner:{scanResult:null,upcToAttach:null,noVariableResultsHandler:function(){var scanResult=qmService.barcodeScanner.scanResult;qmService.hideLoader();var errorMessage="I couldn't find anything matching barcode "+scanResult.format+" "+scanResult.text;qmLog.error(errorMessage);var userErrorMessage=errorMessage+".  Try a manual search and I'll link the code to your selected variable so scanning should work in the future.";return qmService.barcodeScanner.upcToAttach=scanResult.text,userErrorMessage},scanSuccessHandler:function(scanResult,requestParams,variableSearchSuccessHandler,variableSearchErrorHandler){qmService.barcodeScanner.scanResult=scanResult,requestParams=requestParams||{},qmLog.pushDebug("We got a barcode\nResult: "+scanResult.text+"\nFormat: "+scanResult.format+"\nCancelled: "+scanResult.cancelled);var doneSearching=!1;$timeout(function(){doneSearching||(qmService.hideLoader(),variableSearchErrorHandler("variable search timeout"))},15e3),qmService.showBlackRingLoader(),requestParams.upc=scanResult.text,requestParams.barcodeFormat=scanResult.format,requestParams.minimumNumberOfResultsRequiredToAvoidAPIRequest=1,qm.variablesHelper.getFromLocalStorageOrApi(requestParams,function(variables){variableSearchSuccessHandler(variables),doneSearching=!0,qmService.hideLoader()},function(error){qmLog.error(error),doneSearching=!0;var userErrorMessage=qmService.barcodeScanner.noVariableResultsHandler(scanResult);variableSearchErrorHandler?variableSearchErrorHandler(userErrorMessage):qmService.showMaterialAlert("No matches found",userErrorMessage)})},scanBarcode:function(requestParams,variableSearchSuccessHandler,variableSearchErrorHandler){requestParams=requestParams||{};var scannerConfig={showFlipCameraButton:!0,showTorchButton:!0,torchOn:!0,prompt:"Place a barcode inside the scan area"};qm.platform.isAndroid()&&(scannerConfig.formats="QR_CODE,DATA_MATRIX,UPC_A,EAN_8,CODE_128,CODE_39,ITF");cordova.plugins.barcodeScanner.scan(function(result){qmService.barcodeScanner.scanSuccessHandler(result,requestParams,variableSearchSuccessHandler,variableSearchErrorHandler)},function(error){qmLog.error("Barcode scan failure! error: "+error),qmService.showMaterialAlert("Barcode scan failed!","Couldn't identify your barcode, but I'll look into it.  Please try a manual search in the meantime. ")},scannerConfig)},addUpcToVariableObject:function(variableObject){if(variableObject)return qmService.barcodeScanner.upcToAttach&&(variableObject.upc=qmService.barcodeScanner.upcToAttach,qmService.barcodeScanner.upcToAttach=null),variableObject}},deploy:{fetchUpdate:function(){if(!qmService.deploy.chcpIsDefined())return!1;qmService.deploy.setVersionInfo();var options={};chcp.fetchUpdate(qmService.deploy.updateCallback,options)},installUpdate:function(){qmLog.info("CHCP installUpdate..."),chcp.installUpdate(function(error){qmService.deploy.setVersionInfo(),error?(qmService.deploy.chcpInfo.error=error,qmLog.error("CHCP Install ERROR: "+JSON.stringify(error)),qmService.showMaterialAlert("Update error "+error.code)):qmLog.info("CHCP Update installed...")})},updateCallback:function(error,data){error?qmLog.error("CHCP UPDATE ERROR: "+JSON.stringify(error)):qmLog.info("CHCP update is loaded: "+JSON.stringify(data))},chcpIsDefined:function(){return!!qm.platform.isMobile()&&("undefined"!=typeof chcp||(qmLog.error("chcp not defined"),!1))},setVersionInfo:function(){if(!qmService.deploy.chcpIsDefined())return!1;chcp.getVersionInfo(function(error,versionInfo){qm.api.getViaXhrOrFetch("chcp.json",function(chcpConfig){chcpConfig||qmLog.error("No chcp.json config!"),qmService.deploy.chcpInfo={data:versionInfo,error:error,chcpConfig:chcpConfig},error&&qmLog.error("CHCP VERSION ERROR: "+JSON.stringify(qmService.deploy.chcpInfo)),qmLog.info("CHCP VERSION DATA: "+JSON.stringify(qmService.deploy.chcpInfo))},function(error){errorHandler&&errorHandler(error)})})},chcpInfo:null},email:{updateEmailAndExecuteCallback:function(callback){$rootScope.user.email&&($scope.data={email:$rootScope.user.email}),$ionicPopup.show({template:'<label class="item item-input"><i class="icon ion-email placeholder-icon"></i><input type="email" placeholder="Email" ng-model="data.email"></label>',title:"Update Email",subTitle:"Enter Your Email Address",scope:$scope,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(e){if($scope.data.email)return $scope.data;e.preventDefault()}}]}).then(function(res){qmService.updateUserSettingsDeferred({email:$scope.data.email}),$rootScope.user.email=$scope.data.email,callback&&callback()})},sendEmailAfterVerification:function(emailType){var verifyEmailAddressAndExecuteCallback=function(callback){$rootScope.user.email||$rootScope.user.userEmail?callback():qmService.updateEmailAndExecuteCallback(callback)};"couponInstructions"===emailType&&verifyEmailAddressAndExecuteCallback(function(){qmService.sendEmailViaAPIDeferred("couponInstructions"),qmService.showMaterialAlert("Coupon Redemption","Please go check your email at "+$rootScope.user.email+" for instructions to redeem your coupon.")}),"fitbit"===emailType&&verifyEmailAddressAndExecuteCallback(function(){qmService.sendEmailViaAPIDeferred("fitbit"),qmService.showMaterialAlert("Get Fitbit","Please check your email at "+$rootScope.user.email+" for instructions to get and connect Fitbit.")}),"chrome"===emailType&&verifyEmailAddressAndExecuteCallback(function(){qmService.sendEmailViaAPIDeferred("chrome"),qmService.showMaterialAlert("Get the Chrome Extension","Please check your email at "+$rootScope.user.email+" for your link.")})}},help:{showExplanationsPopup:function(parameterOrPropertyName,ev,modelName,title){qm.help.getExplanation(parameterOrPropertyName,modelName,function(explanation){title&&(explanation.title=title),qmService.showMaterialAlert(explanation.title,explanation.textContent,ev)})}},ionIcons:{history:"ion-ios-list-outline",reminder:"ion-android-notifications-none",recordMeasurement:"ion-compose",charts:"ion-arrow-graph-up-right",settings:"ion-settings",help:"ion-help",refresh:"ion-android-refresh",predictors:"ion-log-in",outcomes:"ion-log-out",study:"ion-ios-book",discoveries:"ion-ios-analytics"},localNotifications:{localNotificationsPluginInstalled:function(){var installed=!0;return"undefined"==typeof cordova?(qmLog.debug("cordova is undefined!"),installed=!1):void 0===cordova.plugins?(qmLog.debug("cordova.plugins is undefined"),installed=!1):void 0===cordova.plugins.notification&&(qmLog.debug("cordova.plugins.notification is undefined"),installed=!1),qmLog.debug("localNotificationsPluginInstalled: "+installed),installed},getAllLocalScheduled:function(callback){qm.platform.isMobile()?$ionicPlatform.ready(function(){qmService.localNotifications.localNotificationsPluginInstalled()?cordova.plugins.notification.local.getAll(function(notifications){qmLog.pushDebug("All local notifications: "+JSON.stringify(notifications)),qm.localForage.setItem(qm.items.scheduledLocalNotifications,notifications),callback(notifications)}):qmLog.error("local notifications plugin not installed!")}):callback()}},navBar:{setFilterBarSearchIcon:function(value){qmService.rootScope.setProperty("showFilterBarSearchIcon",value)},setOfflineConnectionErrorShowing:function(value){qmService.rootScope.setProperty("offlineConnectionErrorShowing",value)},showNavigationMenuIfHideUrlParamNotSet:function(){qm.urlHelper.getParam("hideMenu")||qmService.navBar.showNavigationMenu()},hideNavigationMenuIfHideUrlParamSet:function(){qm.urlHelper.getParam("hideMenu")&&qmService.navBar.hideNavigationMenu()},hideNavigationMenu:function(){qmLog.info("Hiding navigation menu"),qmService.rootScope.setProperty("hideNavigationMenu",!0)},showNavigationMenu:function(){qmLog.debug("Showing navigation menu"),qmService.rootScope.setProperty("hideNavigationMenu",!1)}},notifications:{enableDrawOverAppsPopups:function(){qm.notifications.setLastPopupTime(null),qmService.storage.setItem(qm.items.drawOverAppsPopupEnabled,!0),$ionicPlatform.ready(function(){qmService.scheduleSingleMostFrequentLocalNotification(),void 0!==window.overApps?window.overApps.checkPermission(function(msg){qmLogService.info("overApps.checkPermission: "+msg,null)}):qmLogService.error("window.overApps is undefined!"),qmService.notifications.showAndroidPopupForMostRecentNotification()})},showEnablePopupsConfirmation:function(ev){if($rootScope.platform.isAndroid){qmService.showMaterialConfirmationDialog("Enable Rating Popups","Would you like to receive subtle popups allowing you to rating symptoms or emotions in a fraction of a second?",function(){qmService.notifications.enableDrawOverAppsPopups()},function(){qmService.notifications.disablePopups()},ev,"No")}},disablePopups:function(){qmService.showInfoToast("Rating popups disabled"),qmService.storage.setItem(qm.items.drawOverAppsPopupEnabled,!1),qmService.localNotifications.localNotificationsPluginInstalled()&&cordova.plugins.notification.local.cancelAll()},getDrawOverAppsPopupPermissionIfNecessary:function(ev){return!!$rootScope.platform.isAndroid&&(!qmService.notifications.drawOverAppsPopupAreDisabled()&&void(qmService.notifications.drawOverAppsPopupHaveNotBeenConfigured()?qmService.notifications.showEnablePopupsConfirmation(ev):qm.notifications.lastPopupWasBeforeLastReminderTime()&&(qmLog.error("Popups enabled but no popups shown since before last reminder time!  Re-initializing popups..."),qmService.notifications.showEnablePopupsConfirmation(ev))))},drawOverAppsPopupRatingNotification:function(ratingTrackingReminderNotification,force){qmLog.pushDebug("Called qmService.notifications.drawOverAppsPopupRatingNotification..."),ratingTrackingReminderNotification||(ratingTrackingReminderNotification=qm.notifications.getMostRecentRatingNotificationNotInSyncQueue()),qmService.notifications.drawOverAppsPopup(qm.notifications.getRatingNotificationPath(ratingTrackingReminderNotification),force)},drawOverAppsPopup:function(path,force){if(qmLog.pushDebug("Called qmService.notifications.drawOverAppsPopup..."),qmService.notifications.drawOverAppsPopupAreDisabled())return qmLog.pushDebug("Cannot show popup because it has been disabled"),!1;if(void 0!==window.overApps){if(force||qm.notifications.canWeShowPopupYet(path)){var options={path:path,hasHead:!1,dragToSide:!1,enableBackBtn:!0,enableCloseBtn:!0,verticalPosition:"bottom",horizontalPosition:"center"};qmLog.pushDebug("drawOverAppsPopupRatingNotification options: "+JSON.stringify(options)),window.overApps.startOverApp(options,function(success){-1!==success.toLowerCase().indexOf("no permission")?qmService.notifications.drawOverAppsPopupEnabled()?(qmLog.error(success+" even though drawOverAppsPopupEnabled so asking for permission again!"),qmService.notifications.showEnablePopupsConfirmation()):qmService.notifications.drawOverAppsPopupHaveNotBeenConfigured()?qmService.notifications.showEnablePopupsConfirmation():qmLog.pushDebug("startOverApp popup error: "+success,"drawOverAppsPopup Have NOT Been Configured returns: "+qmService.notifications.drawOverAppsPopupHaveNotBeenConfigured()):qmLog.pushDebug("startOverApp success: "+success)},function(err){window.qmLog.error("startOverApp error: "+err)})}}else qmLog.error("window.overApps is undefined!")},drawOverAppsPopupEnabled:function(){var enabled=qm.storage.getItem(qm.items.drawOverAppsPopupEnabled);return!0===enabled||"true"===enabled||(qmLog.pushDebug("Popups are not enabled!  qm.items.drawOverAppsPopupEnabled is: "+enabled),!1)},drawOverAppsPopupAreDisabled:function(){var enabled=qm.storage.getItem(qm.items.drawOverAppsPopupEnabled);return(!1===enabled||"false"===enabled)&&(qmLog.pushDebug("Popups are explicitly disabled!  qm.items.drawOverAppsPopupEnabled is: "+enabled),!0)},drawOverAppsPopupHaveNotBeenConfigured:function(){var enabled=qm.storage.getItem(qm.items.drawOverAppsPopupEnabled);return(null===enabled||"null"===enabled)&&(qmLog.pushDebug("Popups have not been configured!  qm.items.drawOverAppsPopupEnabled is: "+enabled),!0)},showAndroidPopupForMostRecentNotification:function(doNotShowInInbox){qm.platform.isAndroid()?doNotShowInInbox&&-1!==$state.current.name.toLowerCase().indexOf("inbox")?qmLog.pushDebug("Not showing drawOverAppsPopup because we're in the inbox already"):(qmLog.pushDebug("Called drawOverAppsPopup showAndroidPopupForMostRecentNotification..."),window.qm.notifications.refreshIfEmpty(function(){qm.notifications.getMostRecentRatingNotificationNotInSyncQueue()?qmService.notifications.drawOverAppsPopupRatingNotification():qmLog.pushDebug("No getMostRecentRatingNotificationNotInSyncQueue so not showing popup!")})):qmLog.pushDebug("Can only show popups on Android")},drawOverAppsPopupCompactInboxNotification:function(){qmService.notifications.drawOverAppsPopup(qm.chrome.windowParams.compactInboxWindowParams.url)},reconfigurePushNotificationsIfNoTokenOnServerOrToSync:function(){!qm.platform.isMobile()||qm.storage.getItem(qm.items.deviceTokenOnServer)||qm.storage.getItem(qm.items.deviceTokenToSync)||(qmLogService.error("No device token on deviceTokenOnServer or deviceTokenToSync! Going to reconfigure push notifications"),qmService.configurePushNotifications())}},rootScope:{setProperty:function(property,value,callback){void 0!==$rootScope[property]&&$rootScope[property]===value||$timeout(function(){var string=value;"string"!=typeof string&&(string=JSON.stringify(string)),qmLog.info("Setting $rootScope."+property+" to "+string),$rootScope[property]=value,callback&&callback()},0)},setUser:function(user){user&&user.data&&user.data.user&&(user=user.data.user),!$rootScope.user&&user?$rootScope.user=user:qmService.rootScope.setProperty("user",user)},setShowActionSheetMenu:function(actionSheetFunction){qmService.rootScope.setProperty("showActionSheetMenu",actionSheetFunction)}},showVariableSearchDialog:function(dialogParameters,successHandler,errorHandler,ev){var SelectVariableDialogController=function($scope,$state,$rootScope,$stateParams,$filter,qmService,qmLogService,$q,$log,dialogParameters,$timeout){function showVariableList(){$timeout(function(){self.items&&self.items.length?(self.hidden=!1,qmLog.info("showing list"),console.log(document),document.querySelector("#variable-search-box").focus()):qmLog.info("Not showing list because we don't have results yet")},100)}function querySearch(query,variableSearchSuccessHandler,variableSearchErrorHandler){var deferred=$q.defer();return"barcode"===query?(self.scanBarcode(deferred),deferred.promise):self.searchText&&-1!==self.searchText.toLowerCase().indexOf("barcode")?(qmLog.info("Already searching by barcode"),deferred.resolve(self.items||[]),deferred.promise):(!query||""===query)&&self.items&&self.items.length>10?(deferred.resolve(self.items),deferred.promise):(self.notFoundText="No variables found. Please try another wording or contact mike@quantimo.do.",query===self.lastApiQuery&&self.lastResults?(qmLog.debug("Why are we researching with the same query?"),deferred.resolve(convertVariablesToToResultsList(self.lastResults)),deferred.promise):(dialogParameters.requestParams.excludeLocal=self.dialogParameters.excludeLocal,query&&""!==query&&(dialogParameters.requestParams.searchPhrase=query,self.lastApiQuery=query),""===query&&dialogParameters.requestParams.searchPhrase&&delete dialogParameters.requestParams.searchPhrase,qm.variablesHelper.getFromLocalStorageOrApi(dialogParameters.requestParams,function(variables){self.lastResults=variables,qmLogService.debug("Got "+self.lastResults.length+" results matching "+query),showVariableList(),deferred.resolve(convertVariablesToToResultsList(self.lastResults)),variables&&variables.length?variableSearchSuccessHandler&&variableSearchSuccessHandler(variables):variableSearchErrorHandler&&variableSearchErrorHandler()}),deferred.promise))}function convertVariablesToToResultsList(variables){return variables&&variables[0]?variables.map(function(variable){var variableName=variable.displayName||variable.variableName||variable.name;{if(variableName)return{value:variable.name.toLowerCase(),name:variableName,variable:variable,ionIcon:variable.ionIcon,subtitle:variable.subtitle};qmLog.error("No variable name!")}}):[]}var self=this;if(dialogParameters.placeholder||(dialogParameters.placeholder="Enter a variable"),dialogParameters.requestParams&&dialogParameters.requestParams.variableCategoryName){var variableCategory=qm.variableCategoryHelper.getVariableCategory(dialogParameters.requestParams.variableCategoryName);variableCategory&&(dialogParameters.title="Select "+variableCategory.variableCategoryNameSingular.toLowerCase(),dialogParameters.placeholder=dialogParameters.placeholder.replace("variable",variableCategory.variableCategoryNameSingular.toLowerCase()),dialogParameters.helpText=dialogParameters.helpText.replace("variable",variableCategory.variableCategoryNameSingular.toLowerCase()))}qm.platform.isMobile()&&(dialogParameters.placeholder+=" or press camera to scan",dialogParameters.helpText+=". Press the camera button to scan a barcode."),self.minLength=dialogParameters.minLength||0,self.dialogParameters=dialogParameters,self.querySearch=querySearch,self.selectedItemChange=function(item){item&&(self.selectedItem=item,self.buttonText="Select "+item.variable.name,self.barcode&&(item.variable.barcode=item.variable.upc=self.barcode,item.variable.barcodeFormat=self.barcodeFormat),$scope.variable=item.variable,item.variable.lastSelectedAt=qm.timeHelper.getUnixTimestampInSeconds(),qm.userVariables.saveToLocalStorage(item.variable),qmLogService.debug("Item changed to "+item.variable.name),self.finish())},self.searchTextChange=function(text){qmLogService.debug("Text changed to "+text)},self.platform={},self.platform.isMobile=$rootScope.platform.isMobile,self.showHelp=!0,self.title=dialogParameters.title,self.helpText=dialogParameters.helpText,self.placeholder=dialogParameters.placeholder,self.createNewVariable=function(variableName){qmService.goToState(qmStates.reminderAdd,{variableName:variableName}),$mdDialog.cancel()},self.getHelp=function(){if(self.helpText&&!self.showHelp)return self.showHelp=!0;qmService.goToState(window.qmStates.help),$mdDialog.cancel()},self.cancel=function(){self.items=null,$mdDialog.cancel()},self.finish=function(){self.items=null,$scope.variable=qmService.barcodeScanner.addUpcToVariableObject($scope.variable),$mdDialog.hide($scope.variable)},self.scanBarcode=function(deferred){function noResultsHandler(userErrorMessage){self.helpText=userErrorMessage,self.title="No matches found",self.searchText="",delete dialogParameters.requestParams.upc,delete dialogParameters.requestParams.barcodeFormat,deferred.reject(self.title),querySearch(),qmLog.error(userErrorMessage),showVariableList()}self.helpText="One moment please",self.searchText="Searching by barcode...",self.title="Barcode Search",self.loading=!0,qmService.barcodeScanner.scanBarcode(dialogParameters.requestParams,function(variables){variables&&variables.length?(self.helpText="If you don't see what you're looking for, click the x and try a manual search",self.lastResults=variables,self.items=convertVariablesToToResultsList(variables),self.searchText="Barcode search results",deferred.resolve(self.items),showVariableList()):noResultsHandler(qmService.barcodeScanner.noVariableResultsHandler())},function(userErrorMessage){noResultsHandler(userErrorMessage)})},querySearch()};SelectVariableDialogController.$inject=["$scope","$state","$rootScope","$stateParams","$filter","qmService","qmLogService","$q","$log","dialogParameters","$timeout"],$mdDialog.show({controller:SelectVariableDialogController,controllerAs:"ctrl",templateUrl:"templates/dialogs/variable-search-dialog.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!1,fullscreen:!!$rootScope.platform.isMobile,locals:{dialogParameters:dialogParameters}}).then(function(variable){successHandler(variable)},function(error){errorHandler&&errorHandler(error),qmLogService.debug("User cancelled selection")})},storage:{},search:{getTitle:function(variableCategoryName){var title="Enter a variable";if(variableCategoryName){var variableCategory=qm.variableCategoryHelper.getVariableCategory(variableCategoryName);variableCategory&&(title="Enter a "+variableCategory.variableCategoryNameSingular)}return title},reminderSearch:function(successHandler,ev,variableCategoryName){qmService.showVariableSearchDialog({title:qmService.search.getTitle(variableCategoryName),helpText:"Pick a variable you'd like to discover the effects or causes of. You'll be able to track this regularly in your inbox.",requestParams:{variableCategoryName:variableCategoryName,includePublic:!0},skipReminderSettingsIfPossible:!0},function(variableObject){successHandler&&successHandler(variableObject),qmService.addToRemindersUsingVariableObject(variableObject,{skipReminderSettingsIfPossible:!0,doneState:"false"})},null,ev)},measurementAddSearch:function(successHandler,ev,variableCategoryName){qmService.showVariableSearchDialog({title:qmService.search.getTitle(variableCategoryName),helpText:"Pick a variable you'd like to record a measurement for.",requestParams:{variableCategoryName:variableCategoryName,includePublic:!0}},function(variableObject){successHandler&&successHandler(variableObject),$rootScope.goToState(qmStates.measurementAdd,{variableObject:variableObject,doneState:"false"})},null,ev)}},stateHelper:{previousUrl:null,goBack:function(providedStateParams){if(qmLog.info("Called goBack with state params: "+JSON.stringify(providedStateParams)),qmService.stateHelper.previousUrl)return qmLog.info("Going to qmService.stateHelper.previousUrl: "+qmService.stateHelper.previousUrl),window.location.href=qmService.stateHelper.previousUrl,void(qmService.stateHelper.previousUrl=null);if($ionicHistory.viewHistory().backView){var backView=$ionicHistory.backView();qmLog.info("backView.stateName is "+backView.stateName);var stateId=backView.stateName;-1!==stateId.toLowerCase().indexOf("search")&&($ionicHistory.removeBackView(),backView=$ionicHistory.backView(),stateId=backView.stateName),providedStateParams&&function(){for(var key in providedStateParams)providedStateParams.hasOwnProperty(key)&&providedStateParams[key]&&""!==providedStateParams[key]&&(backView.stateParams||(backView.stateParams={}),backView.stateParams[key]=providedStateParams[key],stateId+="_"+key+"="+providedStateParams[key])}(),qmLog.info("Going back to "+backView.stateId+"  with stateParams "+JSON.stringify(backView.stateParams),null),$ionicHistory.goBack()}else qmLog.info("goToDefaultState because there is no $ionicHistory.viewHistory().backView "),qmService.goToDefaultState(providedStateParams)},getValueFromScopeStateParamsOrUrl:function(propertyName,$scope,$stateParams){return $stateParams[propertyName]?$stateParams[propertyName]:$scope[propertyName]?$scope[propertyName]:$scope.state&&$scope.state[propertyName]?$scope.state[propertyName]:qm.urlHelper.getParam(propertyName)},getVariableNameFromScopeStateParamsOrUrl:function($scope,$stateParams){var variableName=qmService.stateHelper.getValueFromScopeStateParamsOrUrl("variableName",$scope,$stateParams),variableObject=qmService.stateHelper.getValueFromScopeStateParamsOrUrl("variableObject",$scope,$stateParams);return variableObject&&(variableName=variableObject.name),variableName},getVariableIdFromScopeStateParamsOrUrl:function($scope,$stateParams){var variableName=qmService.stateHelper.getValueFromScopeStateParamsOrUrl("variableId",$scope,$stateParams),variableObject=qmService.stateHelper.getValueFromScopeStateParamsOrUrl("variableObject",$scope,$stateParams);return variableObject&&(variableName=variableObject.variableId||variableObject.id),variableName},addVariableNameOrIdToRequestParams:function(params,$scope,$stateParams){params=params||{};var variableName=qmService.stateHelper.getVariableNameFromScopeStateParamsOrUrl($scope,$stateParams);if(variableName)params.name=variableName;else{var variableId=qmService.stateHelper.getVariableIdFromScopeStateParamsOrUrl($scope,$stateParams);if(!variableId)return qmLog.error("No variable name or id in variable settings page!"),!1;params.variableId=variableId}return params}},studyHelper:{showShareStudyConfirmation:function(correlationObject,sharingUrl,ev){qm.studyHelper.lastStudyOrCorrelation=correlationObject;var textContent="Are you absolutely sure you want to make your "+qm.studyHelper.getCauseVariableName()+" and "+qm.studyHelper.getEffectVariableName()+" measurements publicly visible? You can make them private again at any time on this study page.";qmService.showMaterialConfirmationDialog("Share Study",textContent,function(){correlationObject.shareUserMeasurements=!0,qm.studyHelper.saveLastStudy(correlationObject);var body={causeVariableId:qm.studyHelper.getCauseVariableId(),effectVariableId:qm.studyHelper.getEffectVariableId(),shareUserMeasurements:!0};qmService.showBlackRingLoader(),qmService.postStudyDeferred(body).then(function(){qmService.hideLoader(),sharingUrl&&qmService.studyHelper.shareStudyNativelyOrViaWeb(correlationObject,sharingUrl)},function(error){qmService.hideLoader(),qmLogService.error(error)})},function(){correlationObject.shareUserMeasurements=!1},ev)},shareStudyNativelyOrViaWeb:function(correlationObject,sharingUrl){if($rootScope.platform.isMobile){var options={url:correlationObject.studyLinks.studyLinkStatic.replace("local.q","app.q"),chooserTitle:"Pick an app"};window.plugins.socialsharing.shareWithOptions(options,function(result){qmLog.error("Share to "+result.app+" completed: "+result.completed)},function(msg){qmLog.error("Sharing failed with message: "+msg)})}else qmService.openSharingUrl(sharingUrl)},showUnShareStudyConfirmation:function(correlationObject,ev){var textContent="Are you absolutely sure you want to make your "+qm.studyHelper.getCauseVariableName()+" and "+qm.studyHelper.getEffectVariableName()+" measurements private? Links to studies your previously shared with these variables will no longer work.";qmService.showMaterialConfirmationDialog("Share Study",textContent,function(){correlationObject.shareUserMeasurements=!1;var body={causeVariableId:qm.studyHelper.getCauseVariableId(),effectVariableId:qm.studyHelper.getEffectVariableId(),shareUserMeasurements:!1};qmService.postStudyDeferred(body)},function(){correlationObject.shareUserMeasurements=!0},ev)}},subscriptions:{setUpgradeDisabledIfOnAndroidWithoutKey:function(appSettings){return qm.platform.isAndroid()?(!appSettings.additionalSettings.monetizationSettings.playPublicLicenseKey.value&&appSettings.additionalSettings.monetizationSettings.subscriptionsEnabled.value&&(qmLog.error("To enable android subscriptions add your playPublicLicenseKey at https://app.quantimo.do/builder"),appSettings.additionalSettings.monetizationSettings.subscriptionsEnabled.value=!1),appSettings):appSettings}}};qmService.actionSheets={actionSheetButtons:{charts:{state:qmStates.charts,icon:qmService.ionIcons.charts,text:"Charts"},chartSearch:{state:qmStates.chartSearch,icon:qmService.ionIcons.charts,text:"Charts"},compare:{icon:qmService.ionIcons.study,text:"Compare Another Variable"},help:{state:window.qmStates.help,icon:qmService.ionIcons.help,text:"Help"},historyAll:{state:qmStates.historyAll,icon:qmService.ionIcons.history,text:"History"},historyAllCategory:{state:qmStates.historyAllCategory,icon:qmService.ionIcons.history,text:"History"},historyAllVariable:{state:qmStates.historyAllVariable,icon:qmService.ionIcons.history,text:"History"},lastValuesAction:{icon:qmService.ionIcons.recordMeasurement},measurementAdd:{state:qmStates.measurementAddSearch,icon:qmService.ionIcons.recordMeasurement,text:"Record Measurement"},measurementAddSearch:{state:qmStates.measurementAddSearch,icon:qmService.ionIcons.recordMeasurement,text:"Record Measurement"},measurementAddVariable:{state:qmStates.measurementAddVariable,icon:qmService.ionIcons.recordMeasurement,text:"Record Measurement"},outcomes:{icon:qmService.ionIcons.outcomes,text:"Top Outcomes"},openUrl:{icon:qmService.ionIcons.outcomes,text:"Go to Website"},predictors:{icon:qmService.ionIcons.predictors,text:"Top Predictors"},relationships:{icon:qmService.ionIcons.discoveries,text:"Relationships"},recordMeasurement:{state:qmStates.measurementAddVariable,icon:qmService.ionIcons.recordMeasurement,text:"Record Measurement"},refresh:{icon:qmService.ionIcons.refresh,text:"Refresh"},reminderAdd:{state:qmStates.reminderAdd,icon:qmService.ionIcons.reminder,text:"Add Reminder",stateParams:{skipReminderSettingsIfPossible:!0}},reminderSearch:{state:qmStates.reminderSearch,icon:qmService.ionIcons.reminder,text:"Add Reminder",stateParams:{skipReminderSettingsIfPossible:!0}},settings:{state:window.qmStates.settings,icon:qmService.ionIcons.settings,text:"Settings"},studyCreation:{icon:qmService.ionIcons.study,text:"Create Study"},variableSettings:{state:qmStates.variableSettingsVariableName,icon:qmService.ionIcons.settings,text:"Analysis Settings"}},addHtmlToActionSheetButton:function(actionSheetButton,id){return actionSheetButton.ionIcon&&(actionSheetButton.icon=actionSheetButton.ionIcon),actionSheetButton.id||(id?actionSheetButton.id=id:actionSheetButton.ionIcon&&(actionSheetButton.id=actionSheetButton.ionIcon)),actionSheetButton.text&&-1===actionSheetButton.text.indexOf("<span ")&&(actionSheetButton.text='<span id="'+id+'"><i class="icon '+actionSheetButton.icon+'"></i>'+actionSheetButton.text+"</span>"),actionSheetButton},addHtmlToActionSheetButtonArray:function(buttons){return buttons=JSON.parse(JSON.stringify(buttons)),buttons=buttons.map(function(button){return button=qmService.actionSheets.addHtmlToActionSheetButton(button,button.action)})},addHtmlToAllActionSheetButtons:function(){for(var propertyName in qmService.actionSheets.actionSheetButtons)qmService.actionSheets.actionSheetButtons.hasOwnProperty(propertyName)&&(qmService.actionSheets.actionSheetButtons[propertyName]=qmService.actionSheets.addHtmlToActionSheetButton(qmService.actionSheets.actionSheetButtons[propertyName],propertyName))},handleActionSheetButtonClick:function(button,variableObject){var stateParams={};return button.stateParams&&(stateParams=button.stateParams),variableObject&&(stateParams.variableObject=variableObject,stateParams.variableName=variableObject.name||variableObject.variableName),button.state?(button.state===qmStates.reminderAdd&&variableObject?qmService.addToRemindersUsingVariableObject(variableObject,{doneState:qmStates.remindersList,skipReminderSettingsIfPossible:!0}):qmService.goToState(button.state,stateParams),!0):(button.action&&button.action.modifiedValue&&qmService.trackByFavorite(stateParams.variableObject,button.action.modifiedValue),button.id===qmService.actionSheets.actionSheetButtons.compare.id&&qmService.goToStudyCreationForVariable(variableObject),button.id===qmService.actionSheets.actionSheetButtons.predictors.id&&qmService.goToCorrelationsListForVariable(variableObject),button.id===qmService.actionSheets.actionSheetButtons.outcomes.id&&qmService.goToCorrelationsListForVariable(variableObject),!1)},getVariableObjectActionSheet:function(variableName,variableObject){variableObject||(variableObject=qm.storage.getUserVariableByName(variableName));{if(variableObject)return variableName||(variableName=variableObject.name),qmLog.info("Getting action sheet for variable "+variableName),function(){qmLogService.debug("variablePageCtrl.showActionSheetMenu:  variable: "+variableName),variableName=variableObject.displayName||variableObject.variableName||variableObject.name;var buttons=[qmService.actionSheets.addHtmlToActionSheetButton({icon:variableObject.ionIcon,text:qmService.getTruncatedVariableName(variableName)},"variableName"),qmService.actionSheets.actionSheetButtons.measurementAddVariable,qmService.actionSheets.actionSheetButtons.reminderAdd];if(variableObject.userId&&variableObject.numberOfRawMeasurements&&(buttons.push(qmService.actionSheets.actionSheetButtons.charts),buttons.push(qmService.actionSheets.actionSheetButtons.historyAllVariable),buttons.push(qmService.actionSheets.actionSheetButtons.variableSettings)),variableObject&&buttons.push(qmService.actionSheets.actionSheetButtons.compare),variableObject&&variableObject.outcome?buttons.push(qmService.actionSheets.actionSheetButtons.predictors):buttons.push(qmService.actionSheets.actionSheetButtons.outcomes),variableObject.actionArray)for(var i=0;i<variableObject.actionArray.length;i++){var actionArrayItem=variableObject.actionArray[i];if(qmLog.debug("Action array item: "+JSON.stringify(actionArrayItem)),"snooze"!==actionArrayItem.action&&buttons.push({action:actionArrayItem,id:actionArrayItem.callback,text:'<span id="'+actionArrayItem.callback+'"><i class="icon '+qmService.ionIcons.recordMeasurement+'"></i>'+actionArrayItem.longTitle+"</span>"}),buttons.length>8)break}for(var j=0;j<buttons.length;j++)qmLog.debug("Button text: "+buttons[j].text),buttons[j]=qmService.actionSheets.addHtmlToActionSheetButton(buttons[j]);var actionSheetParams={buttons:buttons,cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){return qmLogService.debug("CANCELLED"),!0},buttonClicked:function(index,button){return qmService.actionSheets.handleActionSheetButtonClick(button,variableObject)}};variableObject.userId&&(actionSheetParams.destructiveText='<i class="icon ion-trash-a"></i>Delete All',actionSheetParams.destructiveButtonClicked=function(){return qmService.showDeleteAllMeasurementsForVariablePopup(variableName),!0});var hideSheet=$ionicActionSheet.show(actionSheetParams);$timeout(function(){hideSheet()},3e4)};window.qmLog.error("Could not get variable for action sheet")}},showVariableObjectActionSheet:function(variableName,variableObject){return qmService.actionSheets.getVariableObjectActionSheet(variableName,variableObject)()},addActionArrayButtonsToActionSheet:function(actionArray,buttons){if(actionArray){for(var i=0;i<actionArray.length;i++)"snooze"!==actionArray[i].action&&buttons.push({text:'<i class="icon ion-android-done-all"></i> Record '+actionArray[i].title});return buttons}qmLogService.error("No action array provided to addActionArrayButtonsToActionSheet!")}},qmService.actionSheets.addHtmlToAllActionSheetButtons(qmService.actionSheets.actionSheetButtons),qmService.navBar.setOfflineConnectionErrorShowing(!1),qmService.addColorsCategoriesAndNames=function(array){return array=addVariableCategoryInfo(array),array=addColors(array),array=addAppDisplayName(array),array=addVariableCategoryStateParam(array),array=removeDeprecatedProperties(array)},qmService.get=function(route,allowedParams,params,successHandler,requestSpecificErrorHandler,options){if(params||(params={}),!successHandler)throw"Please provide successHandler function as fourth parameter in qmService.get";options||(options={});var cache=!1;options.stackTrace=params.stackTrace?params.stackTrace:"No stacktrace provided with params",delete params.stackTrace,params&&params.cache&&(cache=params.cache,params.cache=null),qm.api.canWeMakeRequestYet("GET",route,options)||params.force?"app.intro"!==$state.current.name||params.force||qm.auth.getAccessTokenFromCurrentUrl()?(delete params.force,qmService.getAccessTokenFromAnySource().then(function(accessToken){allowedParams.push("limit"),allowedParams.push("offset"),allowedParams.push("sort"),allowedParams.push("updatedAt");var urlParams=[];for(var property in params)params.hasOwnProperty(property)&&void 0!==params[property]&&null!==params[property]&&urlParams.push(encodeURIComponent(property)+"="+encodeURIComponent(params[property]));urlParams=addGlobalUrlParamsToArray(urlParams);var request={method:"GET",url:qmService.getQuantiModoUrl(route)+(0===urlParams.length?"":"?"+urlParams.join("&")),responseType:"json",headers:{"Content-Type":"application/json"}};cache&&(request.cache=cache),accessToken&&(request.headers={Authorization:"Bearer "+accessToken,"Content-Type":"application/json"}),qmLogService.debug("GET "+request.url,null,options.stackTrace),$http(request).success(function(data,status,headers){if(qmLogService.debug("Got "+route+" "+status+" response: : "+JSON.stringify(data).substring(0,140)+"...",null,options.stackTrace),data)data.error&&(generalApiErrorHandler(data,status,headers,request,options),requestSpecificErrorHandler&&requestSpecificErrorHandler(data)),qmService.navBar.setOfflineConnectionErrorShowing(!1),data.message&&qmLogService.debug(data.message,null,options.stackTrace),successHandler(data);else{qmLog.error("No data returned from this request",status+" response from url "+request.url,{groupingHash:"No data returned from this request"},"error")}}).error(function(data,status,headers){generalApiErrorHandler(data,status,headers,request,options),requestSpecificErrorHandler&&requestSpecificErrorHandler(data)},onRequestFailed)})):qmLogService.debug("Not making request to "+route+" user because we are in the intro state",null,options.stackTrace):requestSpecificErrorHandler&&requestSpecificErrorHandler()},qmService.post=function(route,requiredFields,body,successHandler,requestSpecificErrorHandler,options){if(!body)throw"Please provide body parameter to qmService.post";if(options||(options={}),options.stackTrace=body.stackTrace?body.stackTrace:"No stacktrace provided with params",delete body.stackTrace,qm.api.canWeMakeRequestYet("POST",route,options)){qmService.navBar.setOfflineConnectionErrorShowing(!1);var bodyString=JSON.stringify(body);window.qmLog.isDebugMode()||(bodyString=bodyString.substring(0,140)),qmLogService.info("qmService.post: About to try to post request to "+route+" with body: "+bodyString,null,options.stackTrace),qmService.getAccessTokenFromAnySource().then(function(accessToken){!accessToken&&qm.auth.getAccessTokenFromUrlUserOrStorage()&&(qmLog.error("qmService.getAccessTokenFromAnySource returned: "+accessToken+", but getAccessTokenFromUrlUserOrStorage returns: "+qm.auth.getAccessTokenFromUrlUserOrStorage()),accessToken=qm.auth.getAccessTokenFromUrlUserOrStorage());for(var i=0;i<body.length;i++)for(var item=body[i],j=0;j<requiredFields.length;j++)requiredFields[j]in item||qmLogService.error("Missing required field",requiredFields[j]+" in "+route+" request!",body);var request={method:"POST",url:qmService.getQuantiModoUrl(route)+"?"+addGlobalUrlParamsToArray([]).join("&"),responseType:"json",headers:{"Content-Type":"application/json",Accept:"application/json"},data:JSON.stringify(body)};accessToken?(qmLog.info("Using access token for POST "+route+": "+accessToken,options.stackTrace),request.headers={Authorization:"Bearer "+accessToken,"Content-Type":"application/json",Accept:"application/json"}):-1===route.indexOf("googleIdToken")&&(qmLog.error("No access token for POST "+route+". $rootScope.user is "+JSON.stringify($rootScope.user),options.stackTrace),qmLog.error("No access token for POST "+route+". qm.getUser() returns "+JSON.stringify(qm.getUser()),options.stackTrace)),$http(request).success(function(response){var responseString=JSON.stringify(response);qmLog.isDebugMode()||(responseString=responseString.substring(0,140)+"..."),qmLogService.info("Response from POST "+route+": "+responseString),successHandler&&successHandler(response)}).error(function(data,status,headers){generalApiErrorHandler(data,status,headers,request,options),requestSpecificErrorHandler&&requestSpecificErrorHandler(data)})},requestSpecificErrorHandler)}else requestSpecificErrorHandler&&requestSpecificErrorHandler()};var onRequestFailed=function(error){qmLogService.error("Request error : "+error)};qmService.getMeasurementsDeferred=function(params,refresh){var deferred=$q.defer();return params.refresh=refresh,qm.measurements.getMeasurementsFromApi(params,function(response){deferred.resolve(qmService.addInfoAndImagesToMeasurements(response))},function(error){qmLogService.error(error),deferred.reject(error)}),deferred.promise},qmService.getMeasurementById=function(measurementId){var deferred=$q.defer(),params={id:measurementId};return qm.measurements.getMeasurementsFromApi(params,function(response){var measurementArray=response;measurementArray[0]||(qmLogService.debug("Could not get measurement with id: "+measurementId,null),deferred.reject());var measurementObject=measurementArray[0];deferred.resolve(measurementObject)},function(error){qmLogService.error(error),qmLogService.debug(error,null),deferred.reject()}),deferred.promise},qmService.getMeasurementsDailyFromApi=function(params,successHandler,errorHandler){(params=addGlobalUrlParamsToObject(params)).groupingWidth=86400;qm.api.cacheGet(params,"getMeasurementsDailyFromApi");if(!configureQmApiClient("getMeasurementsDailyFromApi",errorHandler))return!1;(new Quantimodo.MeasurementsApi).getMeasurements(params,function(error,data,response){qmSdkApiResponseHandler(error,data,response,successHandler,errorHandler,params,"getMeasurementsDailyFromApi")})},qmService.deleteV1Measurements=function(measurements,successHandler,errorHandler){qmService.post("api/v3/measurements/delete",["variableId","variableName","startTimeEpoch","id"],measurements,successHandler,errorHandler)},qmService.postMeasurementsExport=function(type,successHandler,errorHandler){qmService.post("api/v2/measurements/request_"+type,[],[],successHandler,errorHandler)},qmService.postMeasurementsToApi=function(measurementSet,successHandler,errorHandler){measurementSet=addLocationAndSourceDataToMeasurement(measurementSet),qmService.post("api/v3/measurements",[],measurementSet,successHandler,errorHandler)},qmService.logoutOfApi=function(successHandler,errorHandler){qmLogService.debug("Logging out of api does not work yet.  Fix it!",null),qmService.get("api/v2/auth/logout",[],{},successHandler,errorHandler)},qmService.getNotesFromApi=function(params,successHandler,errorHandler){var options={};qmService.get("api/v3/notes",["variableName"],params,successHandler,errorHandler,options)},qmService.postCorrelationToApi=function(correlationSet,successHandler,errorHandler){qmService.post("api/v3/correlations",["causeVariableName","effectVariableName","correlation","vote"],correlationSet,successHandler,errorHandler)},qmService.postVoteToApi=function(correlationSet,successHandler,errorHandler){qmService.post("api/v3/votes",["causeVariableName","effectVariableName","correlation","vote"],correlationSet,successHandler,errorHandler)},qmService.deleteVoteToApi=function(correlationSet,successHandler,errorHandler){qmService.post("api/v3/votes/delete",["causeVariableName","effectVariableName","correlation"],correlationSet,successHandler,errorHandler)},qmService.getVariableByIdFromApi=function(variableId,successHandler,errorHandler){if(!configureQmApiClient("getVariableByIdFromApi",errorHandler))return!1;var apiInstance=new Quantimodo.VariablesApi,params={id:variableId};params=addGlobalUrlParamsToObject(params),apiInstance.getVariables(params,function(error,data,response){qmSdkApiResponseHandler(error,data,response,successHandler,errorHandler)})},qmService.postUserVariableToApi=function(userVariable,successHandler,errorHandler){qmService.post("api/v3/userVariables",["user","variableId","durationOfAction","fillingValue","joinWith","maximumAllowedValue","minimumAllowedValue","onsetDelay","experimentStartTime","experimentEndTime"],userVariable,successHandler,errorHandler)},qmService.resetUserVariable=function(body,successHandler,errorHandler){qmService.post("api/v3/userVariables/reset",["variableId"],body,successHandler,errorHandler)},qmService.deleteUserVariableMeasurements=function(variableName,successHandler,errorHandler){qmService.storage.deleteByProperty(qm.items.userVariables,"variableName",variableName),qmService.storage.deleteByProperty(qm.items.commonVariables,"variableName",variableName),qmService.post("api/v3/userVariables/delete",["variableName"],{variableName:variableName},successHandler,errorHandler)},qmService.disconnectConnectorToApi=function(name,successHandler,errorHandler){qmService.get("api/v3/connectors/"+name+"/disconnect",[],{},successHandler,errorHandler)},qmService.connectConnectorWithParamsToApi=function(params,lowercaseConnectorName,successHandler,errorHandler){var allowedParams=["location","username","password","email"];qmService.get("api/v3/connectors/"+lowercaseConnectorName+"/connect",allowedParams,params,successHandler,errorHandler)},qmService.connectConnectorWithTokenToApi=function(body,lowercaseConnectorName,successHandler,errorHandler){var requiredProperties=["connector","connectorCredentials"];qmService.post("api/v3/connectors/connect",requiredProperties,body,successHandler,errorHandler)},qmService.connectWithAuthCodeToApi=function(code,connectorLowercaseName,successHandler,errorHandler){var allowedParams=["code","noRedirect"],params={noRedirect:!0,code:code};qmService.get("api/v3/connectors/"+connectorLowercaseName+"/connect",allowedParams,params,successHandler,errorHandler)},qmService.getUserEmailPreferences=function(params,successHandler,errorHandler){$rootScope.user&&console.warn("Are you sure we should be getting the user again when we already have a user?",$rootScope.user);var options={};options.minimumSecondsBetweenRequests=10,options.doNotSendToLogin=!0,qmService.get("api/v3/notificationPreferences",["userEmail"],params,successHandler,errorHandler,options)},qmService.getTrackingReminderNotificationsFromApi=function(params,successHandler,errorHandler){var functionName="getTrackingReminderNotificationsFromApi";if(qmLogService.debug(functionName,null,params,qmLog.getStackTrace()),!configureQmApiClient(functionName,errorHandler))return!1;var apiInstance=new Quantimodo.RemindersApi;params=addGlobalUrlParamsToObject(params),apiInstance.getTrackingReminderNotifications(params,function(error,trackingReminderNotifications,response){trackingReminderNotifications&&trackingReminderNotifications.length&&(qmService.notifications.getDrawOverAppsPopupPermissionIfNecessary(),checkHoursSinceLastPushNotificationReceived()),qmSdkApiResponseHandler(error,trackingReminderNotifications,response,successHandler,errorHandler,{},functionName)})},qmService.postTrackingReminderNotificationsToApi=function(trackingReminderNotificationsArray,successHandler,errorHandler){if(trackingReminderNotificationsArray){trackingReminderNotificationsArray instanceof Array||(trackingReminderNotificationsArray=[trackingReminderNotificationsArray]),trackingReminderNotificationsArray[0]=qm.timeHelper.addTimeZoneOffsetProperty(trackingReminderNotificationsArray[0]);var options={};options.doNotSendToLogin=!1,options.doNotShowOfflineError=!0,qmService.post("api/v3/trackingReminderNotifications",[],trackingReminderNotificationsArray,successHandler,errorHandler,options)}else successHandler()},qmService.getStudy=function(params,successHandler,errorHandler){params=addGlobalUrlParamsToObject(params);qm.api.cacheGet(params,"getStudy");if(!configureQmApiClient("getStudy",errorHandler))return!1;var apiInstance=new Quantimodo.AnalyticsApi;apiInstance.apiClient.timeout=12e4,apiInstance.getStudy(params,function(error,data,response){qmSdkApiResponseHandler(error,data,response,successHandler,errorHandler,params,"getStudy")})},qmService.postTrackingRemindersToApi=function(trackingRemindersArray,successHandler,errorHandler){qmLogService.debug("postTrackingRemindersToApi: "+JSON.stringify(trackingRemindersArray)),qmLogService.info("posting"+trackingRemindersArray.length+" Tracking Reminders To Api"),trackingRemindersArray instanceof Array||(trackingRemindersArray=[trackingRemindersArray]),trackingRemindersArray[0]=qm.timeHelper.addTimeZoneOffsetProperty(trackingRemindersArray[0]),qmService.post("api/v3/trackingReminders",[],trackingRemindersArray,successHandler,errorHandler)},qmService.postStudy=function(body,successHandler,errorHandler){qmService.post("api/v3/study",[],body,successHandler,errorHandler)},qmService.postStudyDeferred=function(body){var deferred=$q.defer();return qmService.postStudy(body,function(){deferred.resolve()},function(error){deferred.reject(error)}),deferred.promise},qmService.joinStudy=function(body,successHandler,errorHandler){qmService.post("api/v3/study/join",[],body,successHandler,errorHandler)},qmService.joinStudyDeferred=function(body){var deferred=$q.defer();return qmService.joinStudy(body,function(response){response&&response.data&&(response.data.trackingReminderNotifications&&putTrackingReminderNotificationsInLocalStorageAndUpdateInbox(response.data.trackingReminderNotifications),response.data.trackingReminders&&qm.reminderHelper.saveToLocalStorage(response.data.trackingReminders),response.data.causeUserVariable&&response.data.effectUserVariable&&qm.userVariables.saveToLocalStorage([response.data.causeUserVariable,response.data.effectUserVariable])),deferred.resolve()},function(error){deferred.reject(error)}),deferred.promise},qmService.postUserTagDeferred=function(tagData){var deferred=$q.defer();return qmService.postUserTag(tagData,function(response){qm.userVariables.saveToLocalStorage(response.data.userTaggedVariable),qm.userVariables.saveToLocalStorage(response.data.userTagVariable),deferred.resolve(response)},function(error){deferred.reject(error)}),deferred.promise},qmService.postUserTag=function(userTagData,successHandler,errorHandler){userTagData instanceof Array||(userTagData=[userTagData]),qmService.post("api/v3/userTags",[],userTagData,successHandler,errorHandler)},qmService.postVariableJoinDeferred=function(tagData){var deferred=$q.defer();return qmService.postVariableJoin(tagData,function(response){qm.userVariables.saveToLocalStorage(response.data.currentVariable),qm.userVariables.saveToLocalStorage(response.data.joinedVariable),deferred.resolve(response.data.currentVariable)},function(error){deferred.reject(error)}),deferred.promise},qmService.postVariableJoin=function(variableJoinData,successHandler,errorHandler){variableJoinData instanceof Array||(variableJoinData=[variableJoinData]),qmService.post("api/v3/variables/join",[],variableJoinData,successHandler,errorHandler)},qmService.deleteVariableJoinDeferred=function(tagData){var deferred=$q.defer();return qmService.deleteVariableJoin(tagData,function(response){if(!response)return qmLog.info("No response from deleteVariableJoin"),void deferred.resolve();qm.userVariables.saveToLocalStorage(response.data.currentVariable),qm.userVariables.saveToLocalStorage(response.data.joinedVariable),deferred.resolve(response.data.currentVariable)},function(error){deferred.reject(error)}),deferred.promise},qmService.deleteVariableJoin=function(variableJoinData,successHandler,errorHandler){qmService.post("api/v3/variables/join/delete",[],variableJoinData,successHandler,errorHandler)},qmService.deleteUserTagDeferred=function(tagData){var deferred=$q.defer();return qmService.deleteUserTag(tagData,function(response){if(!response)return qmLog.info("No response from deleteUserTag"),void deferred.resolve();qm.userVariables.saveToLocalStorage(response.data.userTaggedVariable),qm.userVariables.saveToLocalStorage(response.data.userTagVariable),deferred.resolve(response.data)},function(error){deferred.reject(error)}),deferred.promise},qmService.deleteUserTag=function(userTagData,successHandler,errorHandler){qmService.post("api/v3/userTags/delete",[],userTagData,successHandler,errorHandler)},qmService.getUserTagsDeferred=function(){var deferred=$q.defer();return qmService.getUserTags.then(function(userTags){deferred.resolve(userTags)}),deferred.promise},qmService.getUserTags=function(params,successHandler,errorHandler){if(!configureQmApiClient("getUserTags",errorHandler))return!1;var apiInstance=new Quantimodo.VariablesApi;params=addGlobalUrlParamsToObject(params),apiInstance.getUserTags(params,function(error,data,response){qmSdkApiResponseHandler(error,data,response,successHandler,errorHandler,params,"getUserTags")})},qmService.postDeviceToken=function(deviceToken,successHandler,errorHandler){var platform;$rootScope.platform.isAndroid&&(platform="android"),$rootScope.platform.isIOS&&(platform="ios"),$rootScope.platform.isWindows&&(platform="windows");var params={platform:platform,deviceToken:deviceToken,clientId:qm.api.getClientId(),stacktrace:qmLog.getStackTrace()};qmService.post("api/v3/deviceTokens",["deviceToken","platform"],params,successHandler,errorHandler)},qmService.deleteDeviceTokenFromServer=function(successHandler,errorHandler){var deferred=$q.defer();if(qm.storage.getItem(qm.items.deviceTokenOnServer)){var params={deviceToken:qm.storage.getItem(qm.items.deviceTokenOnServer)};qmService.post("api/v3/deviceTokens/delete",["deviceToken"],params,successHandler,errorHandler),qm.storage.removeItem(qm.items.deviceTokenOnServer),deferred.resolve()}else deferred.reject("No deviceToken provided to qmService.deleteDeviceTokenFromServer");return deferred.promise},qmService.deleteTrackingReminder=function(trackingReminderId,successHandler,errorHandler){trackingReminderId?(qmService.storage.deleteByProperty(qm.items.trackingReminderNotifications,"trackingReminderId",trackingReminderId),qmService.post("api/v3/trackingReminders/delete",["id"],{id:trackingReminderId},successHandler,errorHandler,null,{minimumSecondsBetweenRequests:.1})):qmLogService.error("No reminder id to delete with!  Maybe it has only been stored locally and has not updated from server yet.")},qmService.snoozeTrackingReminderNotification=function(params,successHandler,errorHandler){qmService.post("api/v3/trackingReminderNotifications/snooze",["id","trackingReminderNotificationId","trackingReminderId"],params,successHandler,errorHandler)},qmService.skipTrackingReminderNotification=function(params,successHandler,errorHandler){qmService.post("api/v3/trackingReminderNotifications/skip",["id","trackingReminderNotificationId","trackingReminderId"],params,successHandler,errorHandler)},qmService.skipAllTrackingReminderNotifications=function(params,successHandler,errorHandler){params||(params=[]),qmService.post("api/v3/trackingReminderNotifications/skip/all",[],params,successHandler,errorHandler)},qmService.getVariableCategoryNameFromStateParamsOrUrl=function($stateParams){var variableCategoryName;return $stateParams&&$stateParams.variableCategoryName?variableCategoryName=$stateParams.variableCategoryName:qm.urlHelper.getParam("variableCategoryName")&&(variableCategoryName=qm.urlHelper.getParam("variableCategoryName")),variableCategoryName&&"Anything"!==variableCategoryName?variableCategoryName:null},qmService.getAccessTokenFromUrlAndSetLocalStorageFlags=function(){return qm.auth.accessTokenFromUrl?qm.auth.accessTokenFromUrl:(qmLog.authDebug("getAccessTokenFromUrl: No previous qm.auth.accessTokenFromUrl"),qm.auth.accessTokenFromUrl=qm.auth.getAccessTokenFromCurrentUrl(),qm.auth.accessTokenFromUrl?("app.login"!==$state.current.name?(qmLog.authDebug("getAccessTokenFromUrl: Setting qm.auth.accessTokenFromUrl to "+qm.auth.accessTokenFromUrl),qmLog.authDebug("getAccessTokenFromUrl: Setting onboarded and introSeen in local storage because we got an access token from url"),qm.storage.setItem("onboarded",!0),qm.storage.setItem("introSeen",!0),qmLog.info("Setting onboarded and introSeen to true"),qmLog.info("Setting afterLoginGoToState and afterLoginGoToUrl to null"),qm.storage.setItem("afterLoginGoToState",null),qm.storage.setItem("afterLoginGoToUrl",null)):qmLog.info("On login state so not setting afterLoginGoToState and afterLoginGoToUrl to null"),qmLog.authDebug("getAccessTokenFromUrl: returning this access token: "+qm.auth.accessTokenFromUrl),qm.auth.accessTokenFromUrl):null)},qmService.goToState=function(to,params,options){qmLogService.info("Going to state "+to),"false"!==to&&$state.go(to,params,options)},qmService.goToDefaultState=function(params,options){qmLogService.info("Called goToDefaultState: "+getDefaultState()),qmService.goToState(getDefaultState(),params,options)},qmService.goToVariableSettingsByObject=function(variableObject){qmService.goToState(qmStates.variableSettingsVariableName,{variableObject:variableObject})},qmService.goToVariableSettingsByName=function(variableName){qmService.goToState(qmStates.variableSettingsVariableName,{variableName:variableName})},qmService.refreshUserUsingAccessTokenInUrlIfNecessary=function(){if(qmLog.authDebug("Called refreshUserUsingAccessTokenInUrlIfNecessary"),$rootScope.user&&$rootScope.user.accessToken===qmService.getAccessTokenFromUrlAndSetLocalStorageFlags())qmLog.authDebug("$rootScope.user token matches the one in url");else if(qmService.getAccessTokenFromUrlAndSetLocalStorageFlags()){qmLog.authDebug("refreshUserUsingAccessTokenInUrlIfNecessary: Got access token from url");var accessTokenFromLocalStorage=qm.storage.getItem(qm.items.accessToken);accessTokenFromLocalStorage&&qm.auth.accessTokenFromUrl!==accessTokenFromLocalStorage&&(qm.storage.clearStorageExceptForUnitsAndCommonVariables(),qmLog.authDebug("Cleared local storage because accessTokenFromLocalStorage does not match accessTokenFromUrl"));var user=qm.storage.getItem(qm.items.user);user||(user=$rootScope.user,qmLog.authDebug("No user from local storage")),!user&&$rootScope.user&&(user=$rootScope.user,qmLog.authDebug("refreshUserUsingAccessTokenInUrlIfNecessary: No user from local storage but we do have a $rootScope user")),user&&qm.auth.accessTokenFromUrl!==user.accessToken&&(qmService.rootScope.setUser(null),qm.storage.clearStorageExceptForUnitsAndCommonVariables(),qmLog.authDebug("refreshUserUsingAccessTokenInUrlIfNecessary: Cleared local storage because user.accessToken does not match qm.auth.accessTokenFromUrl")),qm.urlHelper.getParam("doNotRemember")||(qmLog.authDebug("refreshUserUsingAccessTokenInUrlIfNecessary: Setting access token in local storage because doNotRemember is not set"),qmService.storage.setItem(qm.items.accessToken,qm.auth.accessTokenFromUrl)),$rootScope.user||(qmLog.authDebug("refreshUserUsingAccessTokenInUrlIfNecessary: No $rootScope.user so going to refreshUser"),qmService.refreshUser())}},qmService.getAccessTokenFromAnySource=function(){var deferred=$q.defer();if(qmService.getAccessTokenFromUrlAndSetLocalStorageFlags())return qmLog.authDebug("getAccessTokenFromAnySource: Got AccessTokenFromUrl"),deferred.resolve(qmService.getAccessTokenFromUrlAndSetLocalStorageFlags()),deferred.promise;var accessTokenFromLocalStorage=qm.storage.getItem(qm.items.accessToken),expiresAtMilliseconds=qm.storage.getItem("expiresAtMilliseconds"),refreshToken=qm.storage.getItem("refreshToken");if(qmLog.authDebug("getAccessTokenFromAnySource: Values from local storage:",JSON.stringify({expiresAtMilliseconds:expiresAtMilliseconds,refreshToken:refreshToken,accessTokenFromLocalStorage:accessTokenFromLocalStorage})),refreshToken&&!expiresAtMilliseconds){var errorMessage="We have a refresh token but expiresAtMilliseconds is "+expiresAtMilliseconds+".  How did this happen?";qm.userHelper.isTestUser()||qmLog.error(errorMessage,qm.storage.getAsString(qm.items.user),{groupingHash:errorMessage},"error")}return accessTokenFromLocalStorage&&window.qm.timeHelper.getUnixTimestampInMilliseconds()<expiresAtMilliseconds?(qmLog.authDebug("getAccessTokenFromAnySource: Current access token should not be expired. Resolving token using one from local storage"),deferred.resolve(accessTokenFromLocalStorage)):refreshToken&&expiresAtMilliseconds&&"oAuthDisabled"!==qm.api.getClientId()&&qm.privateConfig?(qmLog.authDebug(window.qm.timeHelper.getUnixTimestampInMilliseconds()+" (now) is greater than expiresAt "+expiresAtMilliseconds),qmService.refreshAccessToken(refreshToken,deferred)):accessTokenFromLocalStorage?deferred.resolve(accessTokenFromLocalStorage):qm.platform.isDevelopmentMode()?qmService.getDevCredentials().then(function(){deferred.resolve()}):"oAuthDisabled"!==qm.api.getClientId()&&qm.privateConfig?qm.getUser()&&qm.getUser().accessToken?(qmLog.authDebug("got access token from user"),deferred.resolve(qm.getUser().accessToken)):(qmLog.info("Could not get or refresh access token at "+window.location.href),deferred.resolve()):(qmLog.authDebug("getAccessTokenFromAnySource: oAuthDisabled so we do not need an access token"),deferred.resolve()),deferred.promise},qmService.refreshAccessToken=function(refreshToken,deferred){qmLog.authDebug("Refresh token will be used to fetch access token from "+qmService.getQuantiModoUrl("api/oauth2/token")+" with client id "+qm.api.getClientId());var url=qmService.getQuantiModoUrl("api/oauth2/token");$http.post(url,{client_id:qm.api.getClientId(),refresh_token:refreshToken,grant_type:"refresh_token"}).success(function(data){if(data.error)qmLogService.debug("Token refresh failed: "+data.error,null),deferred.reject("Token refresh failed: "+data.error);else{var accessTokenRefreshed=qm.auth.saveAccessTokenResponse(data);qmLogService.debug("qmService.refreshAccessToken: access token successfully updated from api server: "+JSON.stringify(data),null),deferred.resolve(accessTokenRefreshed)}}).error(function(response){qmLogService.debug("qmService.refreshAccessToken: failed to refresh token from api server"+JSON.stringify(response),null),deferred.reject(response)})},qmService.generateV1OAuthUrl=function(register){var url=qm.api.getBaseUrl()+"/api/oauth2/authorize?";return url+="response_type=code",url+="&client_id="+qm.api.getClientId(),url+="&scope="+qmService.getPermissionString(),url+="&state=testabcd",!0===register&&(url+="&register=true"),qmLogService.debug("generateV1OAuthUrl: "+url,null),url},qmService.generateV2OAuthUrl=function(JWTToken){var url=qmService.getQuantiModoUrl("api/v2/bshaffer/oauth/authorize",!0);return url+="response_type=code",url+="&client_id="+qm.api.getClientId(),url+="&scope="+qmService.getPermissionString(),url+="&state=testabcd",JWTToken&&(url+="&token="+JWTToken),qmLogService.debug("generateV2OAuthUrl: "+url,null),url},qmService.getAuthorizationCodeFromEventUrl=function(event){qmLogService.debug("extracting authorization code from event: "+JSON.stringify(event),null);var authorizationUrl=event.url;if(authorizationUrl||(authorizationUrl=event.data),isQuantiMoDoDomain(authorizationUrl)){var authorizationCode=qm.urlHelper.getParam("code",authorizationUrl);return authorizationCode&&qmLogService.debug("got authorization code from "+authorizationUrl,null),authorizationCode}},qmService.getAccessTokenFromAuthorizationCode=function(authorizationCode){qmLogService.debug("Authorization code is "+authorizationCode,null);var deferred=$q.defer(),url=qmService.getQuantiModoUrl("api/oauth2/token"),request={method:"POST",url:url,responseType:"json",headers:{"Content-Type":"application/json"},data:{client_id:qm.api.getClientId(),client_secret:qm.appsManager.getClientSecret(),grant_type:"authorization_code",code:authorizationCode,redirect_uri:qmService.getRedirectUri()}};return qmLog.authDebug("getAccessTokenFromAuthorizationCode url:"+url+" request is ",null,request),qmLog.authDebug(JSON.stringify(request)),$http(request).success(function(response){response.error?(qmLogService.error(response),alert(response.error+": "+response.error_description+".  Please try again or contact mike@quantimo.do."),deferred.reject(response)):(qmLogService.debug("getAccessTokenFromAuthorizationCode: Successful response is ",null,response),qmLogService.debug(JSON.stringify(response),null),deferred.resolve(response))}).error(function(response){qmLogService.debug("getAccessTokenFromAuthorizationCode: Error response is ",null,response),qmLogService.debug(JSON.stringify(response),null),deferred.reject(response)}),deferred.promise},qmService.getTokensAndUserViaNativeGoogleLogin=function(body){var deferred=$q.defer();return qmService.post("api/v3/googleIdToken",[],body,function(response){deferred.resolve(response)},function(error){qmLogService.error(error),deferred.reject(error)}),deferred.promise},qmService.getTokensAndUserViaNativeSocialLogin=function(provider,accessToken){var deferred=$q.defer();accessToken&&"null"!==accessToken||(qmLogService.error("accessToken not provided to getTokensAndUserViaNativeSocialLogin function"),deferred.reject("accessToken not provided to getTokensAndUserViaNativeSocialLogin function"));var url=qmService.getQuantiModoUrl("api/v2/auth/social/authorizeToken");return url+="provider="+encodeURIComponent(provider),url+="&accessToken="+encodeURIComponent(accessToken),url+="&client_id="+encodeURIComponent(qm.api.getClientId()),qmLogService.debug("qmService.getTokensAndUserViaNativeSocialLogin about to make request to "+url,null),$http({method:"GET",url:url,headers:{"Content-Type":"application/json"}}).then(function(response){response.data.success&&response.data.data&&response.data.data.token?deferred.resolve(response.data.data):deferred.reject(response)},function(error){qmLogService.error(error),deferred.reject(error)}),deferred.promise},qmService.registerDeviceToken=function(){var deferred=$q.defer();if(!qm.platform.isMobile())return deferred.reject("Not on mobile so not posting device token"),deferred.promise;if(!$rootScope.user)return deferred.reject("Cannot post device token yet because we are not logged in"),deferred.promise;var deviceTokenToSync=getDeviceTokenToSync();if(!deviceTokenToSync)return deferred.reject("No deviceTokenToSync in localStorage"),deferred.promise;var message="last push was received "+qm.push.getHoursSinceLastPush()+" hours ago";{if(!(qm.push.getHoursSinceLastPush()<24))return qmLog.pushDebug(message),qm.storage.removeItem(qm.items.deviceTokenToSync),qmLogService.debug("Posting deviceToken to server: ",null,deviceTokenToSync),qmService.postDeviceToken(deviceTokenToSync,function(response){qmService.storage.setItem(qm.items.deviceTokenOnServer,deviceTokenToSync),qmLogService.debug(response,null),deferred.resolve()},function(error){qmService.storage.setItem(qm.items.deviceTokenToSync,deviceTokenToSync),qmLogService.error(error),deferred.reject(error)}),deferred.promise;qmLog.pushDebug("Not registering for pushes because "+message)}};var setupGoogleAnalytics=function(user){qm.getAppSettings().additionalSettings&&qm.getAppSettings().additionalSettings.googleAnalyticsTrackingIds?void 0!==Analytics&&(Analytics.configuration.accounts[0].tracker=qm.getAppSettings().additionalSettings.googleAnalyticsTrackingIds.endUserApps):qmLogService.error("No qm.getAppSettings().additionalSettings.googleAnalyticsTrackingIds.endUserApps!"),Analytics.registerScriptTags(),Analytics.registerTrackers(),user&&Analytics.set("&uid",user.id),Analytics.set("&ds",qm.platform.getCurrentPlatform()),Analytics.set("&cn",qm.getAppSettings().appDisplayName),Analytics.set("&cs",qm.getAppSettings().appDisplayName),Analytics.set("&cm",qm.platform.getCurrentPlatform()),Analytics.set("&an",qm.getAppSettings().appDisplayName),qm.getAppSettings().additionalSettings&&qm.getAppSettings().additionalSettings.appIds&&qm.getAppSettings().additionalSettings.appIds.googleReversedClientId&&Analytics.set("&aid",qm.getAppSettings().additionalSettings.appIds.googleReversedClientId),Analytics.set("&av",qm.getAppSettings().versionNumber),Analytics.set("dimension1","Paid"),user&&Analytics.set("dimension2",user.id.toString()),Analytics.pageView()};qmService.setUser=function(user){qmService.rootScope.setUser(user),qm.userHelper.setUser(user)},qmService.setUserInLocalStorageBugsnagIntercomPush=function(user){qmLogService.debug("setUserInLocalStorageBugsnagIntercomPush:"+JSON.stringify(user),null,user),qmService.setUser(user),qm.urlHelper.getParam("doNotRemember")||(qmService.backgroundGeolocationStartIfEnabled(),qmLogService.setupBugsnag(),setupGoogleAnalytics(qm.userHelper.getUserFromLocalStorage()),qm.storage.getItem(qm.items.deviceTokenOnServer)&&qmLogService.debug("This token is already on the server: "+qm.storage.getItem(qm.items.deviceTokenOnServer)),qmService.registerDeviceToken(),qmService.notifications.reconfigurePushNotificationsIfNoTokenOnServerOrToSync(),$rootScope.sendReminderNotificationEmails&&(qmService.updateUserSettingsDeferred({sendReminderNotificationEmails:$rootScope.sendReminderNotificationEmails}),$rootScope.sendReminderNotificationEmails=null),qmService.afterLoginGoToUrlOrState())},qmService.goToDefaultStateIfNoAfterLoginGoToUrlOrState=function(){qmService.afterLoginGoToUrlOrState()||qmService.goToDefaultState()},qmService.afterLoginGoToUrlOrState=function(){return!!sendToAfterLoginGoToUrlIfNecessary()||(!!sendToAfterLoginStateIfNecessary()||!!sendToDefaultStateIfNecessary())},qmService.syncAllUserData=function(){qmService.syncTrackingReminders(),qmService.getFromLocalStorageOrApiDeferred()},qmService.refreshUser=function(){var deferred=$q.defer();return qm.urlHelper.getParam("logout")?(qmLog.authDebug("qmService.refreshUser: Not refreshing user because we have a logout parameter"),deferred.reject("Not refreshing user because we have a logout parameter"),deferred.promise):(qmLogService.debug("qmService.refreshUser: Calling qmService.getUserFromApi..."),qm.userHelper.getUserFromApi(function(user){qmLog.authDebug("qmService.refreshUser: qmService.getUserFromApi returned "+JSON.stringify(user)),qmService.setUserInLocalStorageBugsnagIntercomPush(user),deferred.resolve(user)},function(error){deferred.reject(error)}),deferred.promise)},qmService.sendToNonOAuthBrowserLoginUrl=function(register){var loginUrl=qmService.getQuantiModoUrl("api/v2/auth/login");!0===register&&(loginUrl=qmService.getQuantiModoUrl("api/v2/auth/register")),qmLogService.debug("sendToNonOAuthBrowserLoginUrl: AUTH redirect URL created:",null,loginUrl),-1!==qm.api.getBaseUrl().indexOf(window.location.hostname)&&$rootScope.platform.isChromeExtension||console.warn("sendToNonOAuthBrowserLoginUrl: API url doesn't match auth base url"),qmService.showBlackRingLoader(),loginUrl+="?redirect_uri="+encodeURIComponent(window.location.href+"?loggingIn=true"),window.location.replace(loginUrl)},qmService.refreshUserEmailPreferencesDeferred=function(params,successHandler,errorHandler){qmService.getUserEmailPreferences(params,function(user){successHandler(user)},function(error){errorHandler(error)})},qmService.completelyResetAppState=function(){qmService.rootScope.setUser(null),qmService.deleteDeviceTokenFromServer(),qm.storage.clearStorageExceptForUnitsAndCommonVariables(),qmService.cancelAllNotifications(),$ionicHistory.clearHistory(),$ionicHistory.clearCache(),qmService.auth.deleteAllAccessTokens()},qmService.updateUserSettingsDeferred=function(params){if($rootScope.physicianUser||qm.storage.getItem(qm.items.physicianUser))return!1;var deferred=$q.defer();return qm.urlHelper.getParam("userEmail")&&(params.userEmail=qm.urlHelper.getParam("userEmail")),qm.userHelper.getUserFromLocalStorage()&&(params.userId=qm.userHelper.getUserFromLocalStorage().id),qmService.post("api/v3/userSettings",[],params,function(response){params.userEmail||qmService.refreshUser().then(function(user){qmLogService.debug("updateUserSettingsDeferred got this user: "+JSON.stringify(user),null)},function(error){qmLogService.error("qmService.updateUserSettingsDeferred could not refresh user because "+JSON.stringify(error))}),deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},qmService.filterByStringProperty=function(arrayToFilter,propertyName,allowedValue){if(!allowedValue||"anything"===allowedValue.toLowerCase())return arrayToFilter;for(var filteredArray=[],i=0;i<arrayToFilter.length;i++)arrayToFilter[i][propertyName].toLowerCase()===allowedValue.toLowerCase()&&filteredArray.push(arrayToFilter[i]);return filteredArray},qmService.storage.getFavorites=function(variableCategoryName){var deferred=$q.defer();return qmService.getAllReminderTypes(variableCategoryName).then(function(allTrackingReminderTypes){deferred.resolve(allTrackingReminderTypes.favorites)},function(error){deferred.reject(error)}),deferred.promise},qmService.getTruncatedVariableName=function(variableName,maxCharacters){return maxCharacters||(maxCharacters=qm.platform.isMobile()?18:30),variableName.length>maxCharacters?variableName.substring(0,maxCharacters)+"...":variableName},qmService.attachVariableCategoryIcons=function(dataArray){if(dataArray){for(var variableCategoryInfo,i=0;i<dataArray.length;i++){if(!(variableCategoryInfo=qmService.getVariableCategoryInfo(dataArray[i].variableCategoryName)).ionIcon)return console.warn("Could not find icon for variableCategoryName "+dataArray[i].variableCategoryName),"ion-speedometer";dataArray[i].ionIcon||(dataArray[i].ionIcon=variableCategoryInfo.ionIcon),dataArray[i]=qmService.addVariableCategoryImagePaths(dataArray[i])}return dataArray}},qmService.getVariableCategoryInfo=function(variableCategoryName){var selectedVariableCategoryObject=$rootScope.variableCategories.Anything;return variableCategoryName&&$rootScope.variableCategories[variableCategoryName]&&(selectedVariableCategoryObject=$rootScope.variableCategories[variableCategoryName]),selectedVariableCategoryObject},qmService.getStudyDeferred=function(params){var deferred=$q.defer();qm.urlHelper.getParam("aggregated")&&(params.aggregated=!0),qmLogService.debug("qmService.getStudy params: "+prettyJsonStringify(params),null,qmLog.getStackTrace());var studyFromGlobals=qm.globalHelper.getStudy(params.causeVariableName,params.effectVariableName);return qm.globalHelper.getStudy(params.causeVariableName,params.effectVariableName)?(deferred.resolve(studyFromGlobals),deferred.promise):(qmService.getStudy(params,function(response){qmLogService.debug("qmService.getStudy response: "+prettyJsonStringify(response),null);var study;if(response.userStudy&&(study=response.userStudy),response.publicStudy&&(study=response.publicStudy),study||(study=response),study.charts){study.charts=Object.keys(study.charts).map(function(key){return study.charts[key]});for(var i=0;i<study.charts.length;i++)study.charts[i].highchartConfig||(study.charts[i].highchartConfig=study.charts[i].chartConfig),study.charts[i].highchartConfig?study.charts[i].highchartConfig=setChartExportingOptions(study.charts[i].highchartConfig):qmLog.error("highchartConfig not defined for: ",null,{chart:study.charts[i]})}study.text&&(study.statistics=qm.objectHelper.copyPropertiesFromOneObjectToAnother(study.text,study.statistics),delete study.text),qm.studyHelper.saveLastStudy(study),qm.globalHelper.setStudy(study),deferred.resolve(study)},function(error){qmLogService.error("qmService.getStudy error: "+error),deferred.reject(error),qmLogService.error(error)}),deferred.promise)},qmService.getAndStorePrimaryOutcomeMeasurements=function(){var errorMessage,deferred=$q.defer();if(!qm.auth.getAccessTokenFromUrlUserOrStorage())return errorMessage="Cannot sync because we do not have a user or access token in url",qmLogService.error(errorMessage),deferred.reject(errorMessage),deferred.promise;var params={variableName:qm.getPrimaryOutcomeVariable().name,sort:"-startTimeEpoch",limit:900};return qm.measurements.getMeasurementsFromApi(params,function(primaryOutcomeMeasurementsFromApi){primaryOutcomeMeasurementsFromApi.length>0&&(qm.localForage.setItem(qm.items.primaryOutcomeVariableMeasurements,primaryOutcomeMeasurementsFromApi),$rootScope.$broadcast("updateCharts")),deferred.resolve(primaryOutcomeMeasurementsFromApi)},function(error){deferred.reject(error)}),deferred.promise},qmService.postMeasurementQueueToServer=function(successHandler,errorHandler){var defer=$q.defer();if(!qm.auth.getAccessTokenFromUrlUserOrStorage()){var errorMessage="Not doing syncPrimaryOutcomeVariableMeasurements because we do not have a $rootScope.user or access token in url";return qmLogService.error(errorMessage),defer.reject(errorMessage),defer.promise}var parsedMeasurementsQueue=qm.storage.getItem(qm.items.measurementsQueue);{if(parsedMeasurementsQueue&&!(parsedMeasurementsQueue.length<1))return qmService.postMeasurementsToApi(parsedMeasurementsQueue,function(response){response&&response.data&&response.data.userVariables&&qm.userVariables.saveToLocalStorage(response.data.userVariables),qm.storage.setItem(qm.items.measurementsQueue,[]),successHandler&&successHandler(),defer.resolve()},function(error){qm.storage.setItem(qm.items.measurementsQueue,parsedMeasurementsQueue),errorHandler&&errorHandler(),defer.reject(error)}),defer.promise;successHandler&&successHandler()}},qmService.syncPrimaryOutcomeVariableMeasurements=function(minimumSecondsBetweenGets){var defer=$q.defer();return qm.auth.getAccessTokenFromUrlUserOrStorage()?(minimumSecondsBetweenGets||(minimumSecondsBetweenGets=10),function(localStorageItemName,minimumSecondsBetweenSyncs){if(qm.storage.getItem(localStorageItemName)&&window.qm.timeHelper.getUnixTimestampInSeconds()-qm.storage.getItem(localStorageItemName)<minimumSecondsBetweenSyncs){var errorMessage="Cannot sync because already did within the last "+minimumSecondsBetweenSyncs+" seconds";return qmLog.info(errorMessage),!1}return qmService.storage.setItem(localStorageItemName,window.qm.timeHelper.getUnixTimestampInSeconds()),!0}("lastMeasurementSyncTime",minimumSecondsBetweenGets)?(qmService.postMeasurementQueueToServer(function(){qmService.getAndStorePrimaryOutcomeMeasurements().then(function(primaryOutcomeMeasurementsFromApi){defer.resolve(primaryOutcomeMeasurementsFromApi)},function(error){defer.reject(error)})}),defer.promise):(defer.reject("Cannot sync because already did within the last "+minimumSecondsBetweenGets+" seconds"),defer.promise)):(qmLogService.debug("Not doing syncPrimaryOutcomeVariableMeasurements because we do not have a $rootScope.user",null),defer.resolve(),defer.promise)},qmService.setDates=function(to,from){var oldFromDate=qm.storage.getItem("fromDate"),oldToDate=qm.storage.getItem("toDate");qmService.storage.setItem("fromDate",parseInt(from)),qmService.storage.setItem("toDate",parseInt(to)),parseInt(oldFromDate)===parseInt(from)&&parseInt(oldToDate)===parseInt(to)||(qmLogService.debug("setDates broadcasting to update charts",null),$rootScope.$broadcast("updateCharts"),$rootScope.$broadcast("updatePrimaryOutcomeHistory"))},qmService.getToDate=function(callback){qmService.storage.getAsStringWithCallback("toDate",function(toDate){callback(toDate?parseInt(toDate):parseInt(Date.now()))})},qmService.getFromDate=function(callback){qmService.storage.getAsStringWithCallback("fromDate",function(fromDate){if(fromDate)callback(parseInt(fromDate));else{var date=new Date;date.setDate(date.getDate()-20),qmLogService.debug("The date returned is ",null,date.toString()),callback(parseInt(date.getTime()))}})},qmService.createPrimaryOutcomeMeasurement=function(numericRatingValue){isNaN(parseFloat(numericRatingValue))&&(numericRatingValue=!!qm.getPrimaryOutcomeVariable().ratingTextToValueConversionDataSet[numericRatingValue]&&qm.getPrimaryOutcomeVariable().ratingTextToValueConversionDataSet[numericRatingValue]);var measurementObject={id:null,variable:qm.getPrimaryOutcomeVariable().name,variableName:qm.getPrimaryOutcomeVariable().name,variableCategoryName:qm.getPrimaryOutcomeVariable().variableCategoryName,valence:qm.getPrimaryOutcomeVariable().valence,startTimeEpoch:window.qm.timeHelper.getUnixTimestampInSeconds(),unitAbbreviatedName:qm.getPrimaryOutcomeVariable().unitAbbreviatedName,value:numericRatingValue,note:null};return measurementObject=addLocationAndSourceDataToMeasurement(measurementObject)};var addLocationAndSourceDataToMeasurement=function(measurementObject){return addLocationDataToMeasurement(measurementObject),measurementObject.sourceName||(measurementObject.sourceName=qm.getSourceName()),measurementObject};qmService.addToMeasurementsQueue=function(measurementObject){measurementObject=addLocationAndSourceDataToMeasurement(measurementObject),qm.storage.appendToArray("measurementsQueue",measurementObject)},qmService.postMeasurementDeferred=function(measurementInfo,successHandler){isStartTimeInMilliseconds(measurementInfo),(measurementInfo=addLocationAndSourceDataToMeasurement(measurementInfo)).prevStartTimeEpoch?updateMeasurementInQueue(measurementInfo):measurementInfo.id?(qm.localForage.deleteById(qm.items.primaryOutcomeVariableMeasurements,measurementInfo.id),qmService.addToMeasurementsQueue(measurementInfo)):qmService.addToMeasurementsQueue(measurementInfo),qm.userVariables.updateLatestMeasurementTime(measurementInfo.variableName,measurementInfo.value),measurementInfo.variableName===qm.getPrimaryOutcomeVariable().name?qmService.syncPrimaryOutcomeVariableMeasurements():qmService.postMeasurementQueueToServer(successHandler)},qmService.postMeasurementByReminder=function(trackingReminder,modifiedValue){var deferred=$q.defer(),value=trackingReminder.defaultValue;void 0!==modifiedValue&&null!==modifiedValue&&(value=modifiedValue);var measurementSet=[{variableName:trackingReminder.variableName,sourceName:qm.getSourceName(),variableCategoryName:trackingReminder.variableCategoryName,unitAbbreviatedName:trackingReminder.unitAbbreviatedName,measurements:[{startTimeEpoch:window.qm.timeHelper.getUnixTimestampInSeconds(),value:value,note:null}]}];return measurementSet[0].measurements[0]=addLocationDataToMeasurement(measurementSet[0].measurements[0]),qmService.valueIsValid(trackingReminder,value)?(qmService.postMeasurementsToApi(measurementSet,function(response){response.success?(qmLogService.debug("qmService.postMeasurementsToApi success: "+JSON.stringify(response)),response&&response.data&&response.data.userVariables&&qm.userVariables.saveToLocalStorage(response.data.userVariables),deferred.resolve()):deferred.reject(response.message?response.message.split(".")[0]:"Can't post measurement right now!")}),deferred.promise):(deferred.reject("Value is not valid"),deferred.promise)},qmService.deleteMeasurementFromServer=function(measurement){var deferred=$q.defer();return qm.localForage.deleteById(qm.items.primaryOutcomeVariableMeasurements,measurement.id),qmService.storage.deleteByProperty("measurementsQueue","startTimeEpoch",measurement.startTimeEpoch),qmService.showInfoToast("Deleted "+measurement.variableName+" measurement"),qmService.deleteV1Measurements(measurement,function(response){deferred.resolve(response),qmLogService.debug("deleteMeasurementFromServer success "+JSON.stringify(response),null)},function(response){qmLogService.debug("deleteMeasurementFromServer error "+JSON.stringify(response),null),deferred.reject()}),deferred.promise},qmService.postBloodPressureMeasurements=function(parameters){var deferred=$q.defer();parameters.startTimeEpochSeconds||(parameters.startTimeEpochSeconds=window.qm.timeHelper.getUnixTimestampInSeconds());var measurementSets=[{variableId:1874,sourceName:qm.getSourceName(),startTimeEpoch:checkIfStartTimeEpochIsWithinTheLastYear(parameters.startTimeEpochSeconds),value:parameters.systolicValue,note:parameters.note},{variableId:5554981,sourceName:qm.getSourceName(),startTimeEpoch:checkIfStartTimeEpochIsWithinTheLastYear(parameters.startTimeEpochSeconds),value:parameters.diastolicValue,note:parameters.note}];return measurementSets[0]=addLocationDataToMeasurement(measurementSets[0]),measurementSets[0]=addLocationDataToMeasurement(measurementSets[0]),qmService.postMeasurementsToApi(measurementSets,function(response){response.success?(response&&response.data&&response.data.userVariables&&qm.userVariables.saveToLocalStorage(response.data.userVariables),qmLogService.debug("qmService.postMeasurementsToApi success: "+JSON.stringify(response),null),deferred.resolve(response)):deferred.reject(response)}),deferred.promise},qmService.variableCategories=[],$rootScope.variableCategories=[],$rootScope.variableCategoryNames=[],$rootScope.variableCategories.Anything=qmService.variableCategories.Anything={defaultUnitAbbreviatedName:"",helpText:"What do you want to record?",variableCategoryNameSingular:"Anything",defaultValuePlaceholderText:"Enter most common value here...",defaultValueLabel:"Value",addNewVariableCardText:"Add a new variable",variableCategoryName:"",defaultValue:"",measurementSynonymSingularLowercase:"measurement",ionIcon:"ion-speedometer"},qmService.getVariableCategories=function(){var deferred=$q.defer();return qm.variableCategoryHelper.getVariableCategoriesFromGlobalsOrApi(function(variableCategories){angular.forEach(variableCategories,function(variableCategory,key){$rootScope.variableCategories[variableCategory.name]=variableCategory,$rootScope.variableCategoryNames.push(variableCategory.name),qmService.variableCategories[variableCategory.name]=variableCategory}),deferred.resolve(variableCategories)}),deferred.promise},qmService.getVariableCategories(),qmService.getVariableCategoryIcon=function(variableCategoryName){var variableCategoryInfo=qmService.getVariableCategoryInfo(variableCategoryName);return variableCategoryInfo.ionIcon?variableCategoryInfo.ionIcon:(console.warn("Could not find icon for variableCategoryName "+variableCategoryName),"ion-speedometer")},qmService.setPlatformVariables=function(){var platform={};platform.isWeb=qm.platform.isWeb(),platform.isWebView=ionic.Platform.isWebView(),platform.isIPad=ionic.Platform.isIPad()&&!platform.isWeb,platform.isIOS=qm.platform.isIOS(),platform.isAndroid=qm.platform.isAndroid(),platform.isWindowsPhone=ionic.Platform.isWindowsPhone()&&!platform.isWeb,platform.isChrome=!!window.chrome,platform.currentPlatform=qm.platform.getCurrentPlatform(),platform.currentPlatformVersion=ionic.Platform.version(),platform.isMobile=qm.platform.isMobile(),platform.isWindows=window.location.href.indexOf("ms-appx")>-1,platform.isChromeExtension=qm.platform.isChromeExtension(),platform.isWebOrChrome=platform.isChromeExtension||platform.isWeb,qmService.localNotificationsEnabled=platform.isChromeExtension,qmService.rootScope.setProperty("platform",platform,qmService.configurePushNotifications),platform.isMobile&&(qmService.actionSheets.actionSheetButtons.compare.text="Compare Another"),qmLog.info("Platform: "+JSON.stringify(platform))},qmService.getPermissionString=function(){for(var str="",permissions=["readmeasurements","writemeasurements"],i=0;i<permissions.length;i++)str+=permissions[i]+"%20";return str.replace(/%20([^%20]*)$/,"$1")},qmService.getRedirectUri=function(){return qm.getAppSettings().redirectUri?qm.getAppSettings().redirectUri:qm.api.getBaseUrl()+"/ionic/Modo/www/callback/"},qmService.getProtocol=function(){return"undefined"!=typeof ionic&&ionic.Platform.platform().indexOf("win")>-1?"ms-appx-web":"https"},qmService.getQuantiModoUrl=function(path){return void 0===path&&(path=""),qm.api.getBaseUrl()+"/"+path},qmService.startsWith=function(fullString,search){return fullString?fullString.slice(0,search.length)===search:(qmLogService.error("fullString not provided to qmService.startsWith"),!1)},qmService.getConnectorsDeferred=function(){var deferred=$q.defer(),connectors=qm.connectorHelper.getConnectorsFromLocalStorage();return connectors?deferred.resolve(connectors):qmService.refreshConnectors().then(function(connectors){deferred.resolve(connectors)}),deferred.promise},qmService.refreshConnectors=function(){var stackTrace=qmLog.getStackTrace();window.qmLog.isDebugMode()&&qmLogService.debug("Called refresh connectors: "+stackTrace);var deferred=$q.defer();return qm.connectorHelper.getConnectorsFromApi({},function(response){var connectors=hideUnavailableConnectors(response.connectors);qm.storage.setItem(qm.items.connectors,connectors),deferred.resolve(connectors)},function(error){deferred.reject(error)}),deferred.promise},qmService.disconnectConnectorDeferred=function(name){var deferred=$q.defer();return qmService.disconnectConnectorToApi(name,function(){deferred.resolve()},function(error){deferred.reject(error)}),deferred.promise},qmService.updateConnector=function(name){qmService.get("api/v3/connectors/"+name+"/update",[],{},function(){},function(){})},qmService.connectConnectorWithParamsDeferred=function(params,lowercaseConnectorName){var deferred=$q.defer();return lowercaseConnectorName.indexOf("weather")>-1&&!params.location?$http.get("https://freegeoip.net/json/").success(function(data){console.log(JSON.stringify(data,null,2)),qmService.connectConnectorWithParamsToApi({location:data.ip},lowercaseConnectorName,function(){qmService.refreshConnectors()},function(error){deferred.reject(error)})}):qmService.connectConnectorWithParamsToApi(params,lowercaseConnectorName,function(){qmService.refreshConnectors()},function(error){deferred.reject(error)}),deferred.promise},qmService.connectConnectorWithTokenDeferred=function(body){var deferred=$q.defer();return qmService.connectConnectorWithTokenToApi(body,function(){qmService.refreshConnectors()},function(error){deferred.reject(error)}),deferred.promise},qmService.connectConnectorWithAuthCodeDeferred=function(code,lowercaseConnectorName){var deferred=$q.defer();return qmService.connectWithAuthCodeToApi(code,lowercaseConnectorName,function(){qmService.refreshConnectors()},function(error){deferred.reject(error)}),deferred.promise};var geoLocationDebug=!1;qmService.getLocationInfoFromFoursquareOrGoogleMaps=function(latitude,longitude){geoLocationDebug&&$rootScope.user&&230===$rootScope.user.id&&qmLogService.error("getLocationInfoFromFoursquareOrGoogleMaps with longitude "+longitude+" and latitude,"+latitude);var deferred=$q.defer();return qmService.getLocationInfoFromFoursquare($http).whatsAt(latitude,longitude).then(function(geoLookupResult){if(geoLocationDebug&&$rootScope.user&&230===$rootScope.user.id&&qmLogService.error("getLocationInfoFromFoursquare result: "+JSON.stringify(geoLookupResult)),200===geoLookupResult.status&&geoLookupResult.data.response.venues.length>=1){var bestMatch=geoLookupResult.data.response.venues[0];geoLookupResult={type:"foursquare",name:bestMatch.name,address:bestMatch.location.formattedAddress.join(", ")},deferred.resolve(geoLookupResult)}else qmService.getLocationInfoFromGoogleMaps($http).lookup(latitude,longitude).then(function(googleResponse){if(googleResponse.data&&googleResponse.data.results&&googleResponse.data.results.length>=1){var geoLookupResult={type:"geocode",address:googleResponse.data.results[0].formatted_address};deferred.resolve(geoLookupResult)}})},function(error){qmLogService.error("getLocationInfoFromFoursquareOrGoogleMaps error: "+JSON.stringify(error))}),deferred.promise},qmService.getLocationInfoFromGoogleMaps=function($http){return{lookup:function(latitude,longitude){return $http.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+latitude+","+longitude+"&key="+qm.geoLocation.getGoogleMapsApiKey())}}},qmService.getLocationInfoFromFoursquare=function($http){return{whatsAt:function(latitude,longitude){return $http.get("https://api.foursquare.com/v2/venues/search?ll="+latitude+","+longitude+"&intent=browse&radius=30&client_id="+qm.geoLocation.getFoursqureClientId()+"&client_secret="+qm.geoLocation.getFoursquareClientSecret()+"&v=20151201")}}},qmService.storage.updateLocation=function(geoLookupResult){getLocationNameFromResult(geoLookupResult)&&qm.storage.setItem(qm.items.lastLocationName,getLocationNameFromResult(geoLookupResult)),geoLookupResult.type?qm.storage.setItem(qm.items.lastLocationResultType,geoLookupResult.type):qmLogService.error("Geolocation error","No geolocation lookup type",geoLookupResult),geoLookupResult.latitude?qm.storage.setItem(qm.items.lastLatitude,geoLookupResult.latitude):qmLogService.error("Geolocation error","No latitude!",geoLookupResult),geoLookupResult.longitude?qm.storage.setItem(qm.items.lastLongitude,geoLookupResult.longitude):qmLogService.error("Geolocation error","No longitude!",geoLookupResult),qm.storage.setItem(qm.items.lastLocationUpdateTimeEpochSeconds,window.qm.timeHelper.getUnixTimestampInSeconds()),geoLookupResult.address?(qm.storage.setItem(qm.items.lastLocationAddress,geoLookupResult.address),geoLookupResult.address===qm.storage.getItem(qm.items.lastLocationName)?qm.storage.setItem(qm.items.lastLocationNameAndAddress,qm.storage.getItem(qm.items.lastLocationAddress)):qm.storage.setItem(qm.items.lastLocationNameAndAddress,qm.storage.getItem(qm.items.lastLocationName)+" ("+qm.storage.getItem(qm.items.lastLocationAddress)+")")):qmLogService.error("Geolocation error","No address found!",geoLookupResult)},qmService.postLocationMeasurementAndSetLocationVariables=function(geoLookupResult,isBackground){if(weShouldPostLocation()){var newMeasurement={variableName:getLastLocationNameFromLocalStorage(),unitAbbreviatedName:"h",startTimeEpoch:checkIfStartTimeEpochIsWithinTheLastYear(qm.storage.getItem(qm.items.lastLocationUpdateTimeEpochSeconds)),sourceName:getGeoLocationSourceName(isBackground),value:getHoursAtLocation(),variableCategoryName:"Location",location:qm.storage.getItem(qm.items.lastLocationAddress),combinationOperation:"SUM"};qmService.postMeasurementDeferred(newMeasurement)}else geoLocationDebug&&$rootScope.user&&230===$rootScope.user.id&&qmLogService.error("Not posting location getLastLocationNameFromLocalStorage returns "+getLastLocationNameFromLocalStorage());qmService.storage.updateLocation(geoLookupResult)},qmService.updateLocationVariablesAndPostMeasurementIfChanged=function(){var message,deferred=$q.defer();if(!$rootScope.user)return message="Not logging location because we do not have a user",qmLogService.debug(message),deferred.reject(message),deferred.promise;if(!$rootScope.user.trackLocation)return message="Location tracking disabled for this user",qmLogService.debug(message),deferred.reject(message),deferred.promise;var currentTimestamp=window.qm.timeHelper.getUnixTimestampInSeconds(),lastLocationPostUnixTime=parseInt(qm.storage.getItem(qm.items.lastLocationPostUnixTime)),secondsSinceLastPostedLocation=currentTimestamp-lastLocationPostUnixTime;return lastLocationPostUnixTime&&secondsSinceLastPostedLocation<300?(message="Already posted location "+secondsSinceLastPostedLocation+" seconds ago",qmLogService.debug(message),deferred.reject(message),deferred.promise):($ionicPlatform.ready(function(){qm.storage.setItem(qm.items.lastLocationPostUnixTime,currentTimestamp);var posOptions={enableHighAccuracy:!0,timeout:2e4,maximumAge:0};$cordovaGeolocation.getCurrentPosition(posOptions).then(function(position){qmService.forecastIoWeather(position.coords),lookupGoogleAndFoursquareLocationAndPostMeasurement(position.coords),deferred.resolve()},function(error){deferred.reject(error),qmLogService.error(error)})}),deferred.promise)},qmService.backgroundGeolocationStartV2=function(){if("undefined"!=typeof backgroundGeolocation){qm.storage.setItem("bgGPS",1);backgroundGeolocation.configure(function(coordinates){qmLogService.debug("background location is "+JSON.stringify(coordinates),null);qmService.forecastIoWeather(coordinates),lookupGoogleAndFoursquareLocationAndPostMeasurement(coordinates,!0),backgroundGeolocation.finish()},function(error){var errorMessage="BackgroundGeoLocation error "+JSON.stringify(error);qmLogService.error(errorMessage)},{desiredAccuracy:25,stationaryRadius:50,distanceFilter:50,debug:!1,stopOnTerminate:!1,notificationTitle:"Recording Location",notificationText:"Tap to open inbox",notificationIconLarge:null,notificationIconSmall:"ic_stat_icon_bw",startForeground:!0,locationProvider:backgroundGeolocation.ANDROID_DISTANCE_FILTER_PROVIDER,interval:6e4,fastestInterval:5e3,activitiesInterval:1e4}),backgroundGeolocation.start()}else qmLog.error("Cannot execute backgroundGeolocationStartV2 because BackgroundGeolocation and backgroundGeolocation is not defined")},qmService.backgroundGeolocationStartV3=function(){"undefined"!=typeof BackgroundGeolocation?(BackgroundGeolocation.events.forEach(function(event){BackgroundGeolocation.removeAllListeners(event)}),BackgroundGeolocation.configure({locationProvider:BackgroundGeolocation.ANDROID_DISTANCE_FILTER_PROVIDER,desiredAccuracy:BackgroundGeolocation.HIGH_ACCURACY,stationaryRadius:25,distanceFilter:25,debug:!0,stopOnTerminate:!1,interval:3e5,fastestInterval:6e4,activitiesInterval:3e5,startForeground:!0,startOnBoot:!0,notificationTitle:"Recording Location",notificationText:"Tap to open inbox",notificationIconLarge:null,notificationIconSmall:"ic_stat_icon_bw"}),BackgroundGeolocation.on("stationary",function(stationaryLocation){qmLog.info("background location stationary so posting measurement "+JSON.stringify(stationaryLocation));qmService.forecastIoWeather(stationaryLocation),lookupGoogleAndFoursquareLocationAndPostMeasurement(stationaryLocation,!0)}),BackgroundGeolocation.on("error",function(error){var errorMessage="BackgroundGeoLocation error "+JSON.stringify(error);qmLog.error(errorMessage)}),BackgroundGeolocation.on("start",function(){qmLog.info("[INFO] BackgroundGeolocation service has been started")}),BackgroundGeolocation.on("stop",function(){qmLog.info("[INFO] BackgroundGeolocation service has been stopped")}),BackgroundGeolocation.on("authorization",function(status){qmLog.info("[INFO] BackgroundGeolocation authorization status: "+status),status!==BackgroundGeolocation.AUTHORIZED&&setTimeout(function(){if(confirm("App requires location tracking permission. Would you like to open app settings?"))return BackgroundGeolocation.showAppSettings()},1e3)}),BackgroundGeolocation.on("event",function(event){qmLog.info("[INFO] Event detected "+JSON.stringify(event))}),BackgroundGeolocation.on("background",function(){qmLog.info("[INFO] App is in background"),BackgroundGeolocation.configure({debug:!0})}),BackgroundGeolocation.on("foreground",function(){qmLog.info("[INFO] App is in foreground"),BackgroundGeolocation.configure({debug:!1})}),BackgroundGeolocation.checkStatus(function(status){qmLog.info("[INFO] BackgroundGeolocation service is running",status.isRunning),qmLog.info("[INFO] BackgroundGeolocation services enabled",status.locationServicesEnabled),qmLog.info("[INFO] BackgroundGeolocation auth status: "+status.authorization),status.isRunning||BackgroundGeolocation.start()})):"undefined"==typeof backgroundGeolocation?qmLog.error("Cannot execute backgroundGeolocationStartV2 because BackgroundGeolocation and backgroundGeolocation is not defined"):qmLog.error("Cannot execute backgroundGeolocationStartV2 because BackgroundGeolocation is not defined. However, backgroundGeolocation is defined")},qmService.backgroundGeolocationStartIfEnabled=function(){var deferred=$q.defer();if(qm.storage.getItem("bgGPS"))$ionicPlatform.ready(function(){qmService.backgroundGeolocationStartV2()}),deferred.resolve();else{deferred.reject("qmService.backgroundGeolocationStartIfEnabled failed because $rootScope.user.trackLocation is not true")}return deferred.promise},qmService.backgroundGeolocationStop=function(){qm.storage.setItem("bgGPS",0),"undefined"!=typeof BackgroundGeolocation&&BackgroundGeolocation.stop(),"undefined"!=typeof backgroundGeolocation&&backgroundGeolocation.stop()};var putTrackingReminderNotificationsInLocalStorageAndUpdateInbox=function(trackingReminderNotifications){return qmService.storage.setItem("lastGotNotificationsAtMilliseconds",window.qm.timeHelper.getUnixTimestampInMilliseconds()),trackingReminderNotifications=qmService.attachVariableCategoryIcons(trackingReminderNotifications),qm.storage.setTrackingReminderNotifications(trackingReminderNotifications),qmLog.info("Broadcasting broadcastGetTrackingReminderNotifications"),$rootScope.$broadcast("broadcastGetTrackingReminderNotifications"),qmService.numberOfPendingNotifications=trackingReminderNotifications.length,trackingReminderNotifications};qmService.getSecondsSinceWeLastGotNotifications=function(){var lastGotNotificationsAtMilliseconds=qm.storage.getItem(qm.items.lastGotNotificationsAtMilliseconds);return lastGotNotificationsAtMilliseconds||(lastGotNotificationsAtMilliseconds=0),parseInt((window.qm.timeHelper.getUnixTimestampInMilliseconds()-lastGotNotificationsAtMilliseconds)/1e3)},qmService.postTrackingReminderNotificationsDeferred=function(successHandler,errorHandler){var deferred=$q.defer();qmLog.info("Called postTrackingReminderNotificationsDeferred...");var trackingReminderNotificationsArray=qm.storage.getItem(qm.items.notificationsSyncQueue);return trackingReminderNotificationsArray&&trackingReminderNotificationsArray.length?(qmLogService.info("postTrackingReminderNotificationsDeferred trackingReminderNotificationsArray: "+JSON.stringify(trackingReminderNotificationsArray)),qm.storage.removeItem(qm.items.notificationsSyncQueue),qmService.postTrackingReminderNotificationsToApi(trackingReminderNotificationsArray,function(response){successHandler&&successHandler(response),deferred.resolve(response)},function(error){qmLog.info("Called postTrackingReminderNotificationsToApi...");var newNotificationsSyncQueue=qm.storage.getItem(qm.items.notificationsSyncQueue);newNotificationsSyncQueue&&(trackingReminderNotificationsArray=trackingReminderNotificationsArray.concat(newNotificationsSyncQueue)),qmService.storage.setItem(qm.items.notificationsSyncQueue,trackingReminderNotificationsArray),errorHandler&&errorHandler(),deferred.reject(error)}),deferred.promise):(successHandler&&successHandler(),deferred.resolve(),deferred.promise)};var scheduleNotificationSync=function(delayBeforePostingNotificationsInMilliseconds){delayBeforePostingNotificationsInMilliseconds||(delayBeforePostingNotificationsInMilliseconds=18e4);var trackingReminderNotificationSyncScheduled=qm.storage.getItem(qm.items.trackingReminderNotificationSyncScheduled);!trackingReminderNotificationSyncScheduled||parseInt(trackingReminderNotificationSyncScheduled)<window.qm.timeHelper.getUnixTimestampInMilliseconds()-delayBeforePostingNotificationsInMilliseconds?(qmService.storage.setItem("trackingReminderNotificationSyncScheduled",window.qm.timeHelper.getUnixTimestampInMilliseconds()),$rootScope.platform.isMobile||qmLog.info("Scheduling notifications sync for "+delayBeforePostingNotificationsInMilliseconds/1e3+" seconds from now.."),$timeout(function(){qmLog.info("Notifications sync countdown completed.  Syncing now... "),qm.storage.removeItem("trackingReminderNotificationSyncScheduled"),qmService.postTrackingReminderNotificationsDeferred()},delayBeforePostingNotificationsInMilliseconds)):$rootScope.platform.isMobile||qmLog.info("Not scheduling sync because one is already scheduled "+qm.timeHelper.getTimeSinceString(trackingReminderNotificationSyncScheduled))};qmService.skipTrackingReminderNotificationDeferred=function(trackingReminderNotification){var deferred=$q.defer();return qmService.numberOfPendingNotifications-=qmService.numberOfPendingNotifications,trackingReminderNotification.action="skip",qm.notifications.addToSyncQueue(trackingReminderNotification),scheduleNotificationSync(),deferred.promise},qmService.skipAllTrackingReminderNotificationsDeferred=function(params){var deferred=$q.defer();return params&&params.trackingReminderId?qm.storage.deleteByProperty(qm.items.trackingReminderNotifications,"trackingReminderId",params.trackingReminderId):qm.storage.removeItem(qm.items.trackingReminderNotifications),qmService.skipAllTrackingReminderNotifications(params,function(response){response.success?deferred.resolve():deferred.reject()},function(error){qmLogService.error(error),deferred.reject(error)}),deferred.promise},qmService.trackTrackingReminderNotificationDeferred=function(trackingReminderNotification,trackAll){var deferred=$q.defer();if($rootScope.platform.isMobile||qmLogService.debug("qmService.trackTrackingReminderNotificationDeferred: Going to track "+JSON.stringify(trackingReminderNotification)),!trackingReminderNotification.variableName&&trackingReminderNotification.trackingReminderNotificationId){var notificationFromLocalStorage=qm.storage.getElementOfLocalStorageItemById(qm.items.trackingReminderNotifications,trackingReminderNotification.trackingReminderNotificationId);notificationFromLocalStorage&&(void 0!==trackingReminderNotification.modifiedValue&&null!==trackingReminderNotification.modifiedValue&&(notificationFromLocalStorage.modifiedValue=trackingReminderNotification.modifiedValue),trackingReminderNotification=notificationFromLocalStorage)}return qmService.numberOfPendingNotifications-=qmService.numberOfPendingNotifications,trackingReminderNotification.action="track",trackAll&&(trackingReminderNotification.action="trackAll"),qm.notifications.addToSyncQueue(trackingReminderNotification),trackAll?scheduleNotificationSync(1):scheduleNotificationSync(),deferred.promise},qmService.snoozeTrackingReminderNotificationDeferred=function(trackingReminderNotification){var deferred=$q.defer();return qmService.numberOfPendingNotifications-=qmService.numberOfPendingNotifications,trackingReminderNotification.action="snooze",qm.notifications.addToSyncQueue(trackingReminderNotification),scheduleNotificationSync(),deferred.promise},qmService.getTrackingRemindersDeferred=function(variableCategoryName){var deferred=$q.defer();return qmService.storage.getTrackingReminders(variableCategoryName).then(function(trackingReminders){trackingReminders&&trackingReminders.length?deferred.resolve(trackingReminders):qmService.syncTrackingReminders().then(function(trackingReminders){deferred.resolve(trackingReminders)})}),deferred.promise},qmService.getTodayTrackingReminderNotificationsDeferred=function(variableCategoryName){var params={minimumReminderTimeUtcString:qmService.getLocalMidnightInUtcString(),maximumReminderTimeUtcString:qmService.getTomorrowLocalMidnightInUtcString(),sort:"reminderTime"};variableCategoryName&&(params.variableCategoryName=variableCategoryName);var deferred=$q.defer();return qmService.getTrackingReminderNotificationsFromApi(params,function(response){if(response.success){var trackingReminderNotifications=putTrackingReminderNotificationsInLocalStorageAndUpdateInbox(response.data);trackingReminderNotifications.length&&(checkHoursSinceLastPushNotificationReceived(),qmService.notifications.getDrawOverAppsPopupPermissionIfNecessary()),deferred.resolve(trackingReminderNotifications)}else deferred.reject("error")},function(error){qmLogService.error(error),deferred.reject(error)}),deferred.promise},qmService.refreshTrackingReminderNotifications=function(minimumSecondsBetweenRequests,params){var deferred=$q.defer(),options={};return options.minimumSecondsBetweenRequests=3,minimumSecondsBetweenRequests&&(options.minimumSecondsBetweenRequests=minimumSecondsBetweenRequests,options.blockRequests=!0),qm.api.canWeMakeRequestYet("GET",qm.apiPaths.trackingReminderNotificationsPast,options)?(qmService.postTrackingReminderNotificationsDeferred(function(){var currentDateTimeInUtcStringPlus5Min=qmService.getCurrentDateTimeInUtcStringPlusMin(5);params||(params={}),params.reminderTime="(lt)"+currentDateTimeInUtcStringPlus5Min,params.sort="-reminderTime",params.limit=100,qmService.getTrackingReminderNotificationsFromApi(params,function(response){if(response.success){var trackingReminderNotifications=putTrackingReminderNotificationsInLocalStorageAndUpdateInbox(response.data);trackingReminderNotifications.length&&$rootScope.platform.isMobile&&getDeviceTokenToSync()&&qmService.registerDeviceToken(),$rootScope.platform.isAndroid&&qmService.notifications.showAndroidPopupForMostRecentNotification(!0),qm.chrome.updateChromeBadge(trackingReminderNotifications.length),qmService.refreshingTrackingReminderNotifications=!1,deferred.resolve(trackingReminderNotifications)}else qmService.refreshingTrackingReminderNotifications=!1,deferred.reject("error")},function(error){qmLogService.error(error),qmService.refreshingTrackingReminderNotifications=!1,deferred.reject(error)})},function(error){qmLogService.error(error),qmService.refreshingTrackingReminderNotifications=!1,deferred.reject(error)}),deferred.promise):(deferred.reject("Already called refreshTrackingReminderNotifications within last "+options.minimumSecondsBetweenRequests+" seconds!  Rejecting promise!"),deferred.promise)},qmService.getTrackingReminderByIdDeferred=function(reminderId){var deferred=$q.defer(),params={id:reminderId};return qm.reminderHelper.getTrackingRemindersFromApi(params,function(remindersResponse){var trackingReminders=remindersResponse.data;remindersResponse.success?deferred.resolve(trackingReminders):deferred.reject("error")},function(error){qmLogService.error(error),deferred.reject(error)}),deferred.promise},qmService.getCurrentTrackingReminderNotificationsFromApi=function(category,today){var localMidnightInUtcString=qmService.getLocalMidnightInUtcString(),currentDateTimeInUtcString=qmService.getCurrentDateTimeInUtcString(),params={};today&&!category&&(params={reminderTime:"(gt)"+localMidnightInUtcString,sort:"reminderTime"}),!today&&category&&(params={variableCategoryName:category,reminderTime:"(lt)"+currentDateTimeInUtcString}),today&&category&&(params={reminderTime:"(gt)"+localMidnightInUtcString,variableCategoryName:category,sort:"reminderTime"}),today||category||(params={reminderTime:"(lt)"+currentDateTimeInUtcString});var deferred=$q.defer(),successHandler=function(trackingReminderNotifications){trackingReminderNotifications.success?deferred.resolve(trackingReminderNotifications.data):deferred.reject("error")},errorHandler=function(error){qmLogService.error(error),deferred.reject(error)};if(!configureQmApiClient("getCurrentTrackingReminderNotificationsFromApi",errorHandler))return!1;var apiInstance=new Quantimodo.RemindersApi;return params=addGlobalUrlParamsToObject(params),apiInstance.getTrackingReminderNotifications(params,function(error,data,response){qmSdkApiResponseHandler(error,data,response,successHandler,errorHandler,params,"getCurrentTrackingReminderNotificationsFromApi")}),deferred.promise},qmService.storage.deleteTrackingReminder=function(reminderToDelete){var allTrackingReminders=qm.storage.getItem("trackingReminders"),trackingRemindersToKeep=[];angular.forEach(allTrackingReminders,function(reminderFromLocalStorage,key){reminderFromLocalStorage.variableName===reminderToDelete.variableName&&reminderFromLocalStorage.reminderFrequency===reminderToDelete.reminderFrequency&&reminderFromLocalStorage.reminderStartTime===reminderToDelete.reminderStartTime||trackingRemindersToKeep.push(reminderFromLocalStorage)}),qmService.storage.setItem("trackingReminders",trackingRemindersToKeep)},qmService.deleteTrackingReminderDeferred=function(reminderToDelete){var deferred=$q.defer();return qmService.storage.deleteTrackingReminder(reminderToDelete),qmService.showInfoToast("Deleted "+reminderToDelete.variableName),reminderToDelete.id?(qmService.deleteTrackingReminder(reminderToDelete.id,function(response){qmService.storage.deleteTrackingReminder(reminderToDelete),deferred.resolve(response)},function(error){qmService.storage.deleteTrackingReminder(reminderToDelete),deferred.reject(error)}),deferred.promise):(deferred.resolve(),deferred.promise)},qmService.addRatingTimesToDailyReminders=function(reminders){var index;for(index=0;index<reminders.length;++index)reminders[index].valueAndFrequencyTextDescription&&reminders[index].valueAndFrequencyTextDescription.indexOf("daily")>0&&-1===reminders[index].valueAndFrequencyTextDescription.indexOf(" at ")&&-1===reminders[index].valueAndFrequencyTextDescription.toLowerCase().indexOf("disabled")&&(reminders[index].valueAndFrequencyTextDescription=reminders[index].valueAndFrequencyTextDescription+" at "+qmService.convertReminderTimeStringToMoment(reminders[index].reminderStartTime).format("h:mm A"));return reminders},qmService.getValueAndFrequencyTextDescriptionWithTime=function(trackingReminder){return 86400===trackingReminder.reminderFrequency?"Rating"===trackingReminder.unitCategoryName?"Daily at "+qmService.humanFormat(trackingReminder.reminderStartTimeLocal):trackingReminder.defaultValue?trackingReminder.defaultValue+" "+trackingReminder.unitAbbreviatedName+" daily at "+qmService.humanFormat(trackingReminder.reminderStartTimeLocal):"Daily at "+qmService.humanFormat(trackingReminder.reminderStartTimeLocal):0===trackingReminder.reminderFrequency?"Rating"===trackingReminder.unitCategoryName?"As-Needed":trackingReminder.defaultValue?trackingReminder.defaultValue+" "+trackingReminder.unitAbbreviatedName+" as-needed":"As-Needed":"Rating"===trackingReminder.unitCategoryName?"Rate every "+trackingReminder.reminderFrequency/3600+" hours":trackingReminder.defaultValue?trackingReminder.defaultValue+" "+trackingReminder.unitAbbreviatedName+" every "+trackingReminder.reminderFrequency/3600+" hours":"Every "+trackingReminder.reminderFrequency/3600+" hours"},qmService.convertReminderTimeStringToMoment=function(reminderTimeString){var hourOffsetFromUtc=(new Date).getTimezoneOffset()/60,parsedReminderTimeUtc=reminderTimeString.split(":"),minutes=parsedReminderTimeUtc[1],localHour=parseInt(parsedReminderTimeUtc[0])-parseInt(hourOffsetFromUtc);return localHour>23&&(localHour-=24),localHour<0&&(localHour+=24),moment().hours(localHour).minutes(minutes)},qmService.addToTrackingReminderSyncQueue=function(trackingReminder){qm.storage.addToOrReplaceByIdAndMoveToFront(qm.items.trackingReminderSyncQueue,trackingReminder),qmLog.info("Broadcasting broadcastGetTrackingReminders so manage reminders page is updated"),$rootScope.$broadcast("broadcastGetTrackingReminders")},qmService.syncTrackingReminders=function(force){var deferred=$q.defer();qmLog.checkUrlAndStorageForDebugMode();var trackingReminderSyncQueue=qm.storage.getItem(qm.items.trackingReminderSyncQueue);if(trackingReminderSyncQueue&&trackingReminderSyncQueue.length){qmLogService.debug("syncTrackingReminders: trackingReminderSyncQueue NOT empty so posting trackingReminders: "+JSON.stringify(trackingReminderSyncQueue),null,trackingReminderSyncQueue),qmLog.info("Syncing "+trackingReminderSyncQueue.length+" reminders in queue");var postTrackingRemindersToApiAndHandleResponse=function(){qmService.postTrackingRemindersToApi(trackingReminderSyncQueue,function(response){if(qmLogService.debug("postTrackingRemindersToApi response: "+JSON.stringify(response).substring(0,140)),response&&response.data)if(response.data.userVariables&&qm.userVariables.saveToLocalStorage(response.data.userVariables),response.data.trackingReminders?response.data.trackingReminders.length?(qmService.scheduleSingleMostFrequentLocalNotification(response.data.trackingReminders),qm.reminderHelper.saveToLocalStorage(response.data.trackingReminders),qm.storage.removeItem(qm.items.trackingReminderSyncQueue),qmLog.info("Broadcasting broadcastGetTrackingReminders so manage reminders page is updated"),$rootScope.$broadcast("broadcastGetTrackingReminders")):qmLogService.error("response.trackingReminders is an empty array in postTrackingRemindersDeferred"):qmLogService.error("No response.trackingReminders returned from postTrackingRemindersDeferred"),response.data.trackingReminderNotifications)if(response.data.trackingReminderNotifications.length){for(var notifications=response.data.trackingReminderNotifications,notificationExists=!1,i=0;i<notifications.length;i++)if(notifications[i].variableName===trackingReminderSyncQueue[0].variableName){notificationExists=!0;break}!notificationExists&&trackingReminderSyncQueue[0].reminderFrequency&&qmLogService.error("Notification not found for reminder we just created!",null,{reminder:trackingReminderSyncQueue[0]}),qmLog.info("Got "+notifications.length+" notifications to from postTrackingRemindersDeferred response",null,{notifications:notifications}),qm.storage.setTrackingReminderNotifications(notifications)}else qmLogService.error("response.trackingReminderNotifications is an empty array in postTrackingRemindersDeferred");else qmLogService.error("No response.trackingReminderNotifications returned from postTrackingRemindersDeferred");else qmLogService.error("No postTrackingRemindersToApi response.data!");deferred.resolve(response)},function(error){deferred.reject(error)})};qmService.postTrackingReminderNotificationsDeferred().then(function(){postTrackingRemindersToApiAndHandleResponse()},function(error){postTrackingRemindersToApiAndHandleResponse(),deferred.reject(error)})}else qmLogService.info("syncTrackingReminders: trackingReminderSyncQueue empty so just fetching trackingReminders from API",null),qm.reminderHelper.getTrackingRemindersFromApi({force:force},function(trackingReminders){qm.reminderHelper.getActive(trackingReminders)&&qm.reminderHelper.getActive(trackingReminders).length&&(checkHoursSinceLastPushNotificationReceived(),qmService.notifications.getDrawOverAppsPopupPermissionIfNecessary(),qmService.scheduleSingleMostFrequentLocalNotification(trackingReminders)),deferred.resolve(trackingReminders)},function(error){qmLogService.error(error),deferred.reject(error)});return deferred.promise},qmService.storage.deleteTrackingReminderNotification=function(body){qmService.numberOfPendingNotifications-=qmService.numberOfPendingNotifications,window.qm.storage.deleteTrackingReminderNotification(body)},qmService.groupTrackingReminderNotificationsByDateRange=function(trackingReminderNotifications){if(qm.arrayHelper.variableIsArray(trackingReminderNotifications)){qmLogService.debug("trackingReminderNotifications is an array of size: "+trackingReminderNotifications.length);var todayResult,result=[],reference=moment().local(),today=reference.clone().startOf("day"),yesterday=reference.clone().subtract(1,"days").startOf("day"),weekOld=reference.clone().subtract(7,"days").startOf("day"),monthOld=reference.clone().subtract(30,"days").startOf("day");try{todayResult=trackingReminderNotifications.filter(function(trackingReminderNotification){return!0===moment.utc(trackingReminderNotification.trackingReminderNotificationTime).local().isSame(today,"d")})}catch(error){qmLog.error(error,"Trying again after JSON.parse(JSON.stringify(trackingReminderNotifications)). Why is this necessary?",{}),trackingReminderNotifications=JSON.parse(JSON.stringify(trackingReminderNotifications)),todayResult=trackingReminderNotifications.filter(function(trackingReminderNotification){return!0===moment.utc(trackingReminderNotification.trackingReminderNotificationTime).local().isSame(today,"d")})}todayResult.length&&result.push({name:"Today",trackingReminderNotifications:todayResult});var yesterdayResult=trackingReminderNotifications.filter(function(trackingReminderNotification){return!0===moment.utc(trackingReminderNotification.trackingReminderNotificationTime).local().isSame(yesterday,"d")});yesterdayResult.length&&result.push({name:"Yesterday",trackingReminderNotifications:yesterdayResult});var last7DayResult=trackingReminderNotifications.filter(function(trackingReminderNotification){var date=moment.utc(trackingReminderNotification.trackingReminderNotificationTime).local();return!0===date.isAfter(weekOld)&&!0!==date.isSame(yesterday,"d")&&!0!==date.isSame(today,"d")});last7DayResult.length&&result.push({name:"Last 7 Days",trackingReminderNotifications:last7DayResult});var last30DayResult=trackingReminderNotifications.filter(function(trackingReminderNotification){var date=moment.utc(trackingReminderNotification.trackingReminderNotificationTime).local();return!0===date.isAfter(monthOld)&&!0===date.isBefore(weekOld)&&!0!==date.isSame(yesterday,"d")&&!0!==date.isSame(today,"d")});last30DayResult.length&&result.push({name:"Last 30 Days",trackingReminderNotifications:last30DayResult});var olderResult=trackingReminderNotifications.filter(function(trackingReminderNotification){return!0===moment.utc(trackingReminderNotification.trackingReminderNotificationTime).local().isBefore(monthOld)});return olderResult.length&&result.push({name:"Older",trackingReminderNotifications:olderResult}),result}qmLogService.error("trackingReminderNotifications is not an array! trackingReminderNotifications: "+JSON.stringify(trackingReminderNotifications))},qmService.storage.getTrackingReminders=function(variableCategoryName){var deferred=$q.defer(),filteredReminders=[],unfilteredReminders=qm.storage.getItem(qm.items.trackingReminders);if(!unfilteredReminders)return deferred.resolve([]),deferred.promise;var syncQueue=qm.storage.getItem(qm.items.trackingReminderSyncQueue);if(syncQueue&&(unfilteredReminders=unfilteredReminders.concat(syncQueue)),unfilteredReminders=qmService.attachVariableCategoryIcons(unfilteredReminders)){if(variableCategoryName&&"Anything"!==variableCategoryName)for(var j=0;j<unfilteredReminders.length;j++)variableCategoryName===unfilteredReminders[j].variableCategoryName&&filteredReminders.push(unfilteredReminders[j]);else filteredReminders=unfilteredReminders;filteredReminders=qmService.addRatingTimesToDailyReminders(filteredReminders),deferred.resolve(filteredReminders)}return deferred.promise},qmService.createDefaultReminders=function(){var deferred=$q.defer();return qmService.storage.getAsStringWithCallback("defaultRemindersCreated",function(defaultRemindersCreated){if(!0!==JSON.parse(defaultRemindersCreated)){var defaultReminders=qmService.getDefaultReminders();defaultReminders&&defaultReminders.length&&(qmService.addToTrackingReminderSyncQueue(defaultReminders),qmService.syncTrackingReminders().then(function(trackingReminders){deferred.resolve(trackingReminders)}),qmLogService.debug("Creating default reminders "+JSON.stringify(defaultReminders),null))}else deferred.reject("Default reminders already created"),qmLogService.debug("Default reminders already created",null)}),deferred.promise};var useLocalImages=function(correlationObjects){for(var i=0;i<correlationObjects.length;i++){var studyImages=correlationObjects[i].studyImages;studyImages.gaugeImage=studyImages.gaugeImage.substring(studyImages.gaugeImage.lastIndexOf("/")+1),studyImages.gaugeImage="img/gauges/246-120/"+studyImages.gaugeImage,studyImages.causeVariableImageUrl=studyImages.causeVariableImageUrl.substring(studyImages.causeVariableImageUrl.lastIndexOf("/")+1),studyImages.causeVariableImageUrl="img/variable_categories/"+studyImages.causeVariableImageUrl,studyImages.effectVariableImageUrl=studyImages.effectVariableImageUrl.substring(studyImages.effectVariableImageUrl.lastIndexOf("/")+1),studyImages.effectVariableImageUrl="img/variable_categories/"+studyImages.effectVariableImageUrl}return correlationObjects};qmService.clearCorrelationCache=function(){qm.api.cacheRemove(qm.items.agggre),qm.api.cacheRemove(qm.items.corr)},qmService.getAggregatedCorrelationsDeferred=function(params){var deferred=$q.defer();return qm.correlations.getAggregatedCorrelationsFromApi(params,function(correlationObjects){try{correlationObjects=useLocalImages(correlationObjects)}catch(error){qmLog.error(error)}deferred.resolve(correlationObjects)},function(error){qmLogService.error(error),deferred.reject(error)}),deferred.promise},qmService.getNotesDeferred=function(variableName){var deferred=$q.defer();return qmService.getNotesFromApi({variableName:variableName},function(response){deferred.resolve(response.data)},function(error){qmLogService.error(error),deferred.reject(error)}),deferred.promise},qmService.getCorrelationsDeferred=function(params){var deferred=$q.defer();return qm.correlations.getUserCorrelationsFromApi(params,function(response){if(!response)return qmLog.error("No response from getUserCorrelationsFromApi"),void deferred.reject("No response from getUserCorrelationsFromApi");try{response.data.correlations=useLocalImages(response.data.correlations)}catch(error){qmLog.error(error)}deferred.resolve(response.data)},function(error){qmLog.warn(error),deferred.reject(error)}),deferred.promise},qmService.postVoteDeferred=function(correlationObject){var deferred=$q.defer();return qmService.postVoteToApi(correlationObject,function(response){qmService.clearCorrelationCache(),deferred.resolve(!0)},function(error){qmLogService.error("postVote response",error),deferred.reject(error)}),deferred.promise},qmService.deleteVoteDeferred=function(correlationObject){var deferred=$q.defer();return qmService.deleteVoteToApi(correlationObject,function(response){qmService.clearCorrelationCache(),deferred.resolve(!0)},function(error){qmLogService.error("deleteVote response",error),deferred.reject(error)}),deferred.promise},qmService.getRatingInfo=function(){return{1:{displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[0],positiveImage:qm.ratingImages.positive[0],negativeImage:qm.ratingImages.negative[0],numericImage:qm.ratingImages.numeric[0]},2:{displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[1],positiveImage:qm.ratingImages.positive[1],negativeImage:qm.ratingImages.negative[1],numericImage:qm.ratingImages.numeric[1]},3:{displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[2],positiveImage:qm.ratingImages.positive[2],negativeImage:qm.ratingImages.negative[2],numericImage:qm.ratingImages.numeric[2]},4:{displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[3],positiveImage:qm.ratingImages.positive[3],negativeImage:qm.ratingImages.negative[3],numericImage:qm.ratingImages.numeric[3]},5:{displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[4],positiveImage:qm.ratingImages.positive[4],negativeImage:qm.ratingImages.negative[4],numericImage:qm.ratingImages.numeric[4]}}},qm.getPrimaryOutcomeVariableOptionLabels=function(shouldShowNumbers){return shouldShowNumbers||!qm.getPrimaryOutcomeVariable().ratingOptionLabels?["1","2","3","4","5"]:qm.getPrimaryOutcomeVariable().ratingOptionLabels},qmService.getPositiveImageByRatingValue=function(numericValue){var filteredList=qmService.getPositiveRatingOptions().filter(function(option){return option.numericValue===numericValue});return!!filteredList.length&&(filteredList[0].img||!1)},qmService.getNegativeImageByRatingValue=function(numericValue){var filteredList=this.getNegativeRatingOptions().filter(function(option){return option.numericValue===numericValue});return!!filteredList.length&&(filteredList[0].img||!1)},qmService.getNumericImageByRatingValue=function(numericValue){var filteredList=this.getNumericRatingOptions().filter(function(option){return option.numericValue===numericValue});return!!filteredList.length&&(filteredList[0].img||!1)},qmService.getRatingFaceImageByText=function(lowerCaseRatingTextDescription){var filteredList=qmService.getPositiveRatingOptions().filter(function(option){return option.lowerCaseTextDescription===lowerCaseRatingTextDescription});return!!filteredList.length&&(filteredList[0].img||!1)},qmService.getPositiveRatingOptions=function(){return[{numericValue:1,displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[0],lowerCaseTextDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[0].toLowerCase(),img:qm.ratingImages.positive[0]},{numericValue:2,displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[1],lowerCaseTextDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[1].toLowerCase(),img:qm.ratingImages.positive[1]},{numericValue:3,displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[2],lowerCaseTextDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[2].toLowerCase(),img:qm.ratingImages.positive[2]},{numericValue:4,displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[3],lowerCaseTextDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[3].toLowerCase(),img:qm.ratingImages.positive[3]},{numericValue:5,displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[4],lowerCaseTextDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[4].toLowerCase(),img:qm.ratingImages.positive[4]}]},qmService.getNegativeRatingOptions=function(){return[{numericValue:1,displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[4],value:qm.getPrimaryOutcomeVariable().ratingOptionLabels[4].toLowerCase(),img:qm.ratingImages.negative[0]},{numericValue:2,displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[3],value:qm.getPrimaryOutcomeVariable().ratingOptionLabels[3].toLowerCase(),img:qm.ratingImages.negative[1]},{numericValue:3,displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[2],value:qm.getPrimaryOutcomeVariable().ratingOptionLabels[2].toLowerCase(),img:qm.ratingImages.negative[2]},{numericValue:4,displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[1],value:qm.getPrimaryOutcomeVariable().ratingOptionLabels[1].toLowerCase(),img:qm.ratingImages.negative[3]},{numericValue:5,displayDescription:qm.getPrimaryOutcomeVariable().ratingOptionLabels[0],value:qm.getPrimaryOutcomeVariable().ratingOptionLabels[0].toLowerCase(),img:qm.ratingImages.negative[4]}]},qmService.getNumericRatingOptions=function(){return[{numericValue:1,img:qm.ratingImages.numeric[0]},{numericValue:2,img:qm.ratingImages.numeric[1]},{numericValue:3,img:qm.ratingImages.numeric[2]},{numericValue:4,img:qm.ratingImages.numeric[3]},{numericValue:5,img:qm.ratingImages.numeric[4]}]},qmService.addInfoAndImagesToMeasurements=function(measurements){var index,ratingInfo=qmService.getRatingInfo();for(index=0;index<measurements.length;++index){var parsedNote=parseJsonIfPossible(measurements[index].note);parsedNote&&(parsedNote.url&&parsedNote.message?measurements[index].note='<a href="'+parsedNote.url+'" target="_blank">'+parsedNote.message+"</a>":qmLog.error("Unrecognized note format","Could not properly format JSON note",{note:measurements[index].note})),measurements[index].variableName||(measurements[index].variableName=measurements[index].variable),measurements[index].variableName===qm.getPrimaryOutcomeVariable().name&&(measurements[index].valence=qm.getPrimaryOutcomeVariable().valence),"/5"===measurements[index].unitAbbreviatedName&&(measurements[index].roundedValue=Math.round(measurements[index].value)),measurements[index].valueUnitVariableName=measurements[index].displayValueAndUnitString+" "+measurements[index].variableName,measurements[index].roundedValue&&"positive"===measurements[index].valence&&ratingInfo[measurements[index].roundedValue]&&(measurements[index].image=measurements[index].image=ratingInfo[measurements[index].roundedValue].positiveImage),measurements[index].roundedValue&&"negative"===measurements[index].valence&&ratingInfo[measurements[index].roundedValue]&&(measurements[index].image=ratingInfo[measurements[index].roundedValue].negativeImage),!measurements[index].image&&measurements[index].roundedValue&&ratingInfo[measurements[index].roundedValue]&&(measurements[index].image=ratingInfo[measurements[index].roundedValue].numericImage),measurements[index].image&&(measurements[index].pngPath=measurements[index].image),measurements[index].icon=measurements[index].icon||measurements[index].ionIcon,measurements[index].variableCategoryName&&!measurements[index].icon&&(measurements[index].icon=qmService.getVariableCategoryIcon(measurements[index].variableCategoryName))}return measurements},qmService.getWeekdayChartConfigForPrimaryOutcome=function(){var deferred=$q.defer();return qm.localForage.getItem(qm.items.primaryOutcomeMeasurements,function(measurements){deferred.resolve(qmService.processDataAndConfigureWeekdayChart(measurements,qm.getPrimaryOutcomeVariable()))}),deferred.promise},qmService.generateDistributionArray=function(allMeasurements){for(var valueLabel,distributionArray=[],i=0;i<allMeasurements.length;i++){if(!allMeasurements[i])return distributionArray;(valueLabel=String(allMeasurements[i].value)).length>1&&(valueLabel=String(Number(allMeasurements[i].value.toPrecision(1)))),void 0===distributionArray[valueLabel]&&(distributionArray[valueLabel]=0),distributionArray[valueLabel]+=1}return distributionArray},qmService.generateWeekdayMeasurementArray=function(allMeasurements){if(!allMeasurements)return qmLogService.info("No measurements provided to generateWeekdayMeasurementArray",null),!1;for(var weekdayMeasurementArrays=[],startTimeMilliseconds=null,i=0;i<allMeasurements.length;i++)startTimeMilliseconds=1e3*allMeasurements[i].startTimeEpoch,void 0===weekdayMeasurementArrays[moment(startTimeMilliseconds).day()]&&(weekdayMeasurementArrays[moment(startTimeMilliseconds).day()]=[]),weekdayMeasurementArrays[moment(startTimeMilliseconds).day()].push(allMeasurements[i]);return weekdayMeasurementArrays},qmService.generateMonthlyMeasurementArray=function(allMeasurements){if(!allMeasurements)return qmLogService.info("No measurements provided to generateMonthlyMeasurementArray",null),!1;for(var monthlyMeasurementArrays=[],startTimeMilliseconds=null,i=0;i<allMeasurements.length;i++)startTimeMilliseconds=1e3*allMeasurements[i].startTimeEpoch,void 0===monthlyMeasurementArrays[moment(startTimeMilliseconds).month()]&&(monthlyMeasurementArrays[moment(startTimeMilliseconds).month()]=[]),monthlyMeasurementArrays[moment(startTimeMilliseconds).month()].push(allMeasurements[i]);return monthlyMeasurementArrays},qmService.generateHourlyMeasurementArray=function(allMeasurements){for(var hourlyMeasurementArrays=[],i=0;i<allMeasurements.length;i++){var startTimeMilliseconds=1e3*allMeasurements[i].startTimeEpoch;void 0===hourlyMeasurementArrays[moment(startTimeMilliseconds).hour()]&&(hourlyMeasurementArrays[moment(startTimeMilliseconds).hour()]=[]),hourlyMeasurementArrays[moment(startTimeMilliseconds).hour()].push(allMeasurements[i])}return hourlyMeasurementArrays},qmService.calculateAverageValueByHour=function(hourlyMeasurementArrays){for(var sumByHour=[],averageValueByHourArray=[],k=0;k<23;k++)if(void 0!==hourlyMeasurementArrays[k]){for(var j=0;j<hourlyMeasurementArrays[k].length;j++)void 0===sumByHour[k]&&(sumByHour[k]=0),sumByHour[k]=sumByHour[k]+hourlyMeasurementArrays[k][j].value;averageValueByHourArray[k]=sumByHour[k]/hourlyMeasurementArrays[k].length}else averageValueByHourArray[k]=null;return averageValueByHourArray},qmService.calculateAverageValueByWeekday=function(weekdayMeasurementArrays){for(var sumByWeekday=[],averageValueByWeekdayArray=[],k=0;k<7;k++)if(void 0!==weekdayMeasurementArrays[k]){for(var j=0;j<weekdayMeasurementArrays[k].length;j++)void 0===sumByWeekday[k]&&(sumByWeekday[k]=0),sumByWeekday[k]=sumByWeekday[k]+weekdayMeasurementArrays[k][j].value;averageValueByWeekdayArray[k]=sumByWeekday[k]/weekdayMeasurementArrays[k].length}else averageValueByWeekdayArray[k]=null;return averageValueByWeekdayArray},qmService.calculateAverageValueByMonthly=function(monthlyMeasurementArrays){for(var sumByMonthly=[],averageValueByMonthlyArray=[],k=0;k<12;k++)if(void 0!==monthlyMeasurementArrays[k]){for(var j=0;j<monthlyMeasurementArrays[k].length;j++)void 0===sumByMonthly[k]&&(sumByMonthly[k]=0),sumByMonthly[k]=sumByMonthly[k]+monthlyMeasurementArrays[k][j].value;averageValueByMonthlyArray[k]=sumByMonthly[k]/monthlyMeasurementArrays[k].length}else averageValueByMonthlyArray[k]=null;return averageValueByMonthlyArray};var shouldWeUsePrimaryOutcomeLabels=function(variableObject){return 10===variableObject.userUnitId&&variableObject.name===qm.getPrimaryOutcomeVariable().name};qmService.configureDistributionChart=function(dataAndLabels,variableObject){var xAxisLabels=[],xAxisTitle="Daily Values ("+variableObject.unitAbbreviatedName+")",data=[];shouldWeUsePrimaryOutcomeLabels(variableObject)&&(data=[0,0,0,0,0]);var dataAndLabels2=[];for(var propertyName in dataAndLabels)dataAndLabels.hasOwnProperty(propertyName)&&(dataAndLabels2.push({label:propertyName,value:dataAndLabels[propertyName]}),xAxisLabels.push(propertyName),shouldWeUsePrimaryOutcomeLabels(variableObject)?function(n){return parseFloat(n)%1==0}(propertyName)&&(data[parseInt(propertyName)-1]=dataAndLabels[propertyName]):data.push(dataAndLabels[propertyName]));dataAndLabels2.sort(function(a,b){return a.label-b.label}),xAxisLabels=[],data=[];for(var i=0;i<dataAndLabels2.length;i++)xAxisLabels.push(dataAndLabels2[i].label),data.push(dataAndLabels2[i].value);return shouldWeUsePrimaryOutcomeLabels(variableObject)&&(xAxisLabels=qm.getPrimaryOutcomeVariableOptionLabels(),xAxisTitle=""),setChartExportingOptions({chart:{height:300,type:"column",renderTo:"BarContainer",animation:{duration:0}},xAxis:{title:{text:xAxisTitle},categories:xAxisLabels},yAxis:{title:{text:"Number of Measurements"},min:0},lang:{loading:""},loading:{style:{background:"url(/res/loading3.gif) no-repeat center"},hideDuration:10,showDuration:10},legend:{enabled:!1},plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:200/xAxisLabels.length,enableMouseTracking:!0,colorByPoint:!0}},credits:{enabled:!1},colors:["#000000","#5D83FF","#68B107","#ffbd40","#CB0000"],title:{text:variableObject.name+" Distribution"},series:[{name:variableObject.name+" Distribution",data:data}]})},qmService.processDataAndConfigureWeekdayChart=function(measurements,variableObject){if(!measurements)return qmLogService.info("No measurements provided to processDataAndConfigureWeekdayChart",null),!1;{if(variableObject.name){var weekdayMeasurementArray=this.generateWeekdayMeasurementArray(measurements),averageValueByWeekdayArray=this.calculateAverageValueByWeekday(weekdayMeasurementArray);return this.configureWeekdayChart(averageValueByWeekdayArray,variableObject)}qmLogService.error("ERROR: No variable name provided to processDataAndConfigureWeekdayChart")}},qmService.processDataAndConfigureMonthlyChart=function(measurements,variableObject){if(!measurements)return qmLogService.info("No measurements provided to processDataAndConfigureMonthlyChart",null),!1;{if(variableObject.name){var monthlyMeasurementArray=this.generateMonthlyMeasurementArray(measurements),averageValueByMonthlyArray=this.calculateAverageValueByMonthly(monthlyMeasurementArray);return this.configureMonthlyChart(averageValueByMonthlyArray,variableObject)}qmLogService.error("ERROR: No variable name provided to processDataAndConfigureMonthlyChart")}},qmService.processDataAndConfigureHourlyChart=function(measurements,variableObject){if(variableObject.name){for(var hourlyMeasurementArray=this.generateHourlyMeasurementArray(measurements),count=0,i=0;i<hourlyMeasurementArray.length;++i)hourlyMeasurementArray[i]&&count++;if(-1!==variableObject.name.toLowerCase().indexOf("daily"))return qmLogService.debug("Not showing hourly chart because variable name contains daily",null),!1;if(count<3)return qmLogService.debug("Not showing hourly chart because we have less than 3 hours with measurements",null),!1;var averageValueByHourArray=this.calculateAverageValueByHour(hourlyMeasurementArray);return this.configureHourlyChart(averageValueByHourArray,variableObject)}qmLogService.error("ERROR: No variable name provided to processDataAndConfigureHourlyChart")},qmService.processDataAndConfigureDistributionChart=function(measurements,variableObject){if(variableObject.name){var distributionArray=this.generateDistributionArray(measurements);return this.configureDistributionChart(distributionArray,variableObject)}qmLogService.error("ERROR: No variable name provided to processDataAndConfigureHourlyChart")},qmService.configureWeekdayChart=function(averageValueByWeekdayArray,variableObject){if(variableObject.name){for(var maximum=0,minimum=1e32,xAxisLabels=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=0;i<averageValueByWeekdayArray.length;i++)averageValueByWeekdayArray[i]>maximum&&(maximum=averageValueByWeekdayArray[i]),averageValueByWeekdayArray[i]<minimum&&(minimum=averageValueByWeekdayArray[i]);return setChartExportingOptions({chart:{height:300,type:"column",renderTo:"BarContainer",animation:{duration:1e3}},xAxis:{categories:xAxisLabels},yAxis:{title:{text:"Average Value ("+variableObject.unitAbbreviatedName+")"},min:minimum,max:maximum},lang:{loading:""},loading:{style:{background:"url(/res/loading3.gif) no-repeat center"},hideDuration:10,showDuration:10},legend:{enabled:!1},plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:200/xAxisLabels.length,enableMouseTracking:!0,colorByPoint:!0}},credits:{enabled:!1},title:{text:"Average  "+variableObject.name+" by Day of Week"},colors:["#5D83FF","#68B107","#ffbd40","#CB0000"],series:[{name:"Average  "+variableObject.name+" by Day of Week",data:averageValueByWeekdayArray}]})}qmLogService.error("ERROR: No variable name provided to configureWeekdayChart")},qmService.configureMonthlyChart=function(averageValueByMonthlyArray,variableObject){if(variableObject.name){for(var maximum=0,minimum=1e32,xAxisLabels=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=0;i<averageValueByMonthlyArray.length;i++)averageValueByMonthlyArray[i]>maximum&&(maximum=averageValueByMonthlyArray[i]),averageValueByMonthlyArray[i]<minimum&&(minimum=averageValueByMonthlyArray[i]);return setChartExportingOptions({chart:{height:300,type:"column",renderTo:"BarContainer",animation:{duration:1e3}},xAxis:{categories:xAxisLabels},yAxis:{title:{text:"Average Value ("+variableObject.unitAbbreviatedName+")"},min:minimum,max:maximum},lang:{loading:""},loading:{style:{background:"url(/res/loading3.gif) no-repeat center"},hideDuration:10,showDuration:10},legend:{enabled:!1},plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:200/xAxisLabels.length,enableMouseTracking:!0,colorByPoint:!0}},credits:{enabled:!1},colors:["#5D83FF","#68B107","#ffbd40","#CB0000"],title:{text:"Average  "+variableObject.name+" by Month"},series:[{name:"Average  "+variableObject.name+" by Month",data:averageValueByMonthlyArray}]})}qmLogService.error("ERROR: No variable name provided to configureMonthlyChart")},qmService.configureHourlyChart=function(averageValueByHourArray,variableObject){if(variableObject.name){for(var maximum=0,minimum=1e32,xAxisLabels=["12 AM","1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM"],i=0;i<averageValueByHourArray.length;i++)averageValueByHourArray[i]>maximum&&(maximum=averageValueByHourArray[i]),averageValueByHourArray[i]<minimum&&(minimum=averageValueByHourArray[i]);return setChartExportingOptions({chart:{height:300,type:"column",renderTo:"BarContainer",animation:{duration:1e3}},title:{text:"Average  "+variableObject.name+" by Hour of Day"},xAxis:{categories:xAxisLabels},yAxis:{title:{text:"Average Value ("+variableObject.unitAbbreviatedName+")"},min:minimum,max:maximum},lang:{loading:""},loading:{style:{background:"url(/res/loading3.gif) no-repeat center"},hideDuration:10,showDuration:10},legend:{enabled:!1},plotOptions:{column:{pointPadding:.2,borderWidth:0,pointWidth:200/xAxisLabels.length,enableMouseTracking:!0,colorByPoint:!0}},credits:{enabled:!1},colors:["#5D83FF","#68B107","#ffbd40","#CB0000"],series:[{name:"Average  "+variableObject.name+" by Hour of Day",data:averageValueByHourArray}]})}qmLogService.error("ERROR: No variable name provided to configureHourlyChart")},qmService.processDataAndConfigureLineChart=function(measurements,variableObject){if(!measurements||!measurements.length)return qmLogService.info("No measurements provided to qmService.processDataAndConfigureLineChart",null),!1;var lineChartItem,name,lineChartData=[],numberOfMeasurements=measurements.length;numberOfMeasurements>1e3&&console.warn("Highstock cannot show tooltips because we have more than 100 measurements");for(var i=0;i<numberOfMeasurements;i++)numberOfMeasurements<1e3?(name=measurements[i].sourceName?"("+measurements[i].sourceName+")":"",measurements[i].note&&(name=measurements[i].note+" "+name),lineChartItem={x:1e3*measurements[i].startTimeEpoch,y:measurements[i].value,name:name}):lineChartItem=[1e3*measurements[i].startTimeEpoch,measurements[i].value],lineChartData.push(lineChartItem);return qmService.configureLineChart(lineChartData,variableObject)},qmService.processDataAndConfigureCorrelationsOverDurationsOfActionChart=function(correlations,weightedPeriod){if(!correlations||!correlations.length)return!1;for(var forwardPearsonCorrelationSeries={name:"Pearson Correlation Coefficient",data:[],tooltip:{valueDecimals:2}},smoothedPearsonCorrelationSeries={name:"Smoothed Pearson Correlation Coefficient",data:[],tooltip:{valueDecimals:2}},forwardSpearmanCorrelationSeries={name:"Spearman Correlation Coefficient",data:[],tooltip:{valueDecimals:2}},qmScoreSeries={name:"QM Score",data:[],tooltip:{valueDecimals:2}},xAxis=[],excludeSpearman=!1,excludeQmScoreSeries=!1,i=0;i<correlations.length;i++)xAxis.push("Day "+correlations[i].durationOfAction/86400),forwardPearsonCorrelationSeries.data.push(correlations[i].correlationCoefficient),forwardSpearmanCorrelationSeries.data.push(correlations[i].forwardSpearmanCorrelationCoefficient),null===correlations[i].forwardSpearmanCorrelationCoefficient&&(excludeSpearman=!0),qmScoreSeries.data.push(correlations[i].qmScore),null===correlations[i].qmScore&&(excludeQmScoreSeries=!0);var seriesToChart=[];seriesToChart.push(forwardPearsonCorrelationSeries),smoothedPearsonCorrelationSeries.data=calculateWeightedMovingAverage(forwardPearsonCorrelationSeries.data,weightedPeriod),seriesToChart.push(smoothedPearsonCorrelationSeries),excludeSpearman||seriesToChart.push(forwardSpearmanCorrelationSeries),excludeQmScoreSeries||seriesToChart.push(qmScoreSeries);var minimumTimeEpochMilliseconds=1e3*correlations[0].durationOfAction;return 1e3*correlations[correlations.length-1].durationOfAction-minimumTimeEpochMilliseconds<864e5&&console.warn("Need at least a day worth of data for line chart"),{title:{text:"Correlations Over Durations of Action"},subtitle:{text:""},legend:{enabled:!1},xAxis:{title:{text:"Assumed Duration Of Action"},categories:xAxis},yAxis:{title:{text:"Value"},plotLines:[{value:0,width:1,color:"#EA4335"}]},tooltip:{valueSuffix:""},series:seriesToChart}},qmService.processDataAndConfigureCorrelationsOverOnsetDelaysChart=function(correlations,weightedPeriod){if(!correlations)return!1;for(var forwardPearsonCorrelationSeries={name:"Pearson Correlation Coefficient",data:[],tooltip:{valueDecimals:2}},smoothedPearsonCorrelationSeries={name:"Smoothed Pearson Correlation Coefficient",data:[],tooltip:{valueDecimals:2}},forwardSpearmanCorrelationSeries={name:"Spearman Correlation Coefficient",data:[],tooltip:{valueDecimals:2}},qmScoreSeries={name:"QM Score",data:[],tooltip:{valueDecimals:2}},xAxis=[],excludeSpearman=!1,excludeQmScoreSeries=!1,i=0;i<correlations.length;i++)xAxis.push("Day "+correlations[i].onsetDelay/86400),forwardPearsonCorrelationSeries.data.push(correlations[i].correlationCoefficient),forwardSpearmanCorrelationSeries.data.push(correlations[i].forwardSpearmanCorrelationCoefficient),null===correlations[i].forwardSpearmanCorrelationCoefficient&&(excludeSpearman=!0),qmScoreSeries.data.push(correlations[i].qmScore),null===correlations[i].qmScore&&(excludeQmScoreSeries=!0);var seriesToChart=[];seriesToChart.push(forwardPearsonCorrelationSeries),smoothedPearsonCorrelationSeries.data=calculateWeightedMovingAverage(forwardPearsonCorrelationSeries.data,weightedPeriod),seriesToChart.push(smoothedPearsonCorrelationSeries),excludeSpearman||seriesToChart.push(forwardSpearmanCorrelationSeries),excludeQmScoreSeries||seriesToChart.push(qmScoreSeries);var minimumTimeEpochMilliseconds=1e3*correlations[0].onsetDelay;return 1e3*correlations[correlations.length-1].onsetDelay-minimumTimeEpochMilliseconds<864e5&&console.warn("Need at least a day worth of data for line chart"),{title:{text:"Correlations Over Onset Delays"},subtitle:{text:""},legend:{enabled:!1},xAxis:{title:{text:"Assumed Onset Delay"},categories:xAxis},yAxis:{title:{text:"Value"},plotLines:[{value:0,width:1,color:"#EA4335"}]},tooltip:{valueSuffix:""},series:seriesToChart}},qmService.processDataAndConfigurePairsOverTimeChart=function(pairs,correlationObject){if(!pairs)return!1;for(var predictorSeries={name:correlationObject.causeVariableName,data:[],tooltip:{valueDecimals:2}},outcomeSeries={name:correlationObject.effectVariableName,data:[],tooltip:{valueDecimals:2}},xAxis=[],i=0;i<pairs.length;i++)xAxis.push(moment(1e3*pairs[i].timestamp).format("ll")),predictorSeries.data.push(pairs[i].causeMeasurementValue),outcomeSeries.data.push(pairs[i].effectMeasurementValue);var seriesToChart=[];seriesToChart.push(predictorSeries),seriesToChart.push(outcomeSeries);var minimumTimeEpochMilliseconds=1e3*pairs[0].timestamp;return 1e3*pairs[pairs.length-1].timestamp-minimumTimeEpochMilliseconds<864e5&&console.warn("Need at least a day worth of data for line chart"),{title:{text:"Paired Data Over Time"},subtitle:{text:""},legend:{enabled:!1},xAxis:{title:{text:"Date"},categories:xAxis},options:{yAxis:[{lineWidth:1,title:{text:correlationObject.causeVariableName+" ("+correlationObject.causeVariableDefaultUnitAbbreviatedName+")"}},{lineWidth:1,opposite:!0,title:{text:correlationObject.effectVariableName+" ("+correlationObject.effectVariableDefaultUnitAbbreviatedName+")"}}]},tooltip:{valueSuffix:""},series:[{name:correlationObject.causeVariableName,type:"spline",color:"#00A1F1",data:predictorSeries.data,marker:{enabled:!1},dashStyle:"shortdot",tooltip:{valueSuffix:""+correlationObject.causeVariableDefaultUnitAbbreviatedName}},{name:correlationObject.effectVariableName,color:"#EA4335",type:"spline",yAxis:1,data:outcomeSeries.data,tooltip:{valueSuffix:""+correlationObject.effectVariableDefaultUnitAbbreviatedName}}]}};var calculatePearsonCorrelation=function(xyValues){var length=xyValues.length,xy=[],x2=[],y2=[];$.each(xyValues,function(index,value){xy.push(value[0]*value[1]),x2.push(value[0]*value[0]),y2.push(value[1]*value[1])});var sum_x=0,sum_y=0,sum_xy=0,sum_x2=0,sum_y2=0,i=0;$.each(xyValues,function(index,value){sum_x+=value[0],sum_y+=value[1],sum_xy+=xy[i],sum_x2+=x2[i],sum_y2+=y2[i],i+=1});var step2=length*sum_x2-sum_x*sum_x,step3=length*sum_y2-sum_y*sum_y,answer=(length*sum_xy-sum_x*sum_y)/Math.sqrt(step2*step3);return isNaN(answer)?0:answer};qmService.createScatterPlot=function(correlationObject,pairs,title){if(!pairs)return console.warn("No pairs provided to qmService.createScatterPlot"),!1;for(var xyVariableValues=[],i=0;i<pairs.length;i++)xyVariableValues.push([pairs[i].causeMeasurementValue,pairs[i].effectMeasurementValue]);return setChartExportingOptions({chart:{type:"scatter",zoomType:"xy"},plotOptions:{scatter:{marker:{radius:5,states:{hover:{enabled:!0,lineColor:"rgb(100,100,100)"}}},states:{hover:{marker:{enabled:!1}}},tooltip:{pointFormat:"{point.x}"+correlationObject.causeVariableDefaultUnitAbbreviatedName+", {point.y}"+correlationObject.effectVariableDefaultUnitAbbreviatedName}}},credits:{enabled:!1},xAxis:{title:{enabled:!0,text:correlationObject.causeVariableName+" ("+correlationObject.causeVariableDefaultUnitAbbreviatedName+")"},startOnTick:!0,endOnTick:!0,showLastLabel:!0},yAxis:{title:{text:correlationObject.effectVariableName+" ("+correlationObject.effectVariableDefaultUnitAbbreviatedName+")"}},series:[{name:correlationObject.effectVariableName+" by "+correlationObject.causeVariableName,color:"rgba(223, 83, 83, .5)",data:xyVariableValues}],title:{text:title+" (R = "+calculatePearsonCorrelation(xyVariableValues).toFixed(2)+")"},subtitle:{text:""},loading:!1})},qmService.configureLineChartForCause=function(correlationObject,pairs){for(var variableObject={unitAbbreviatedName:correlationObject.causeVariableDefaultUnitAbbreviatedName,name:correlationObject.causeVariableName},data=[],i=0;i<pairs.length;i++)data[i]=[1e3*pairs[i].timestamp,pairs[i].causeMeasurementValue];return qmService.configureLineChart(data,variableObject)},qmService.configureLineChartForEffect=function(correlationObject,pairs){for(var variableObject={unitAbbreviatedName:correlationObject.effectVariableDefaultUnitAbbreviatedName,name:correlationObject.effectVariableName},data=[],i=0;i<pairs.length;i++)data[i]=[1e3*pairs[i].timestamp,pairs[i].effectMeasurementValue];return qmService.configureLineChart(data,variableObject)},qmService.configureLineChartForPairs=function(params,pairs){if(params.causeVariableName)if(pairs.length<1)qmLogService.error("ERROR: No data provided to configureLineChart");else{for(var timezoneOffsetMilliseconds=60*((new Date).getTimezoneOffset()/60)*60*1e3,causeSeries=[],effectSeries=[],i=0;i<pairs.length;i++)causeSeries[i]=[1e3*pairs[i].timestamp-timezoneOffsetMilliseconds,pairs[i].causeMeasurementValue],effectSeries[i]=[1e3*pairs[i].timestamp-timezoneOffsetMilliseconds,pairs[i].effectMeasurementValue];var minimumTimeEpochMilliseconds=1e3*pairs[0].timestamp-timezoneOffsetMilliseconds,maximumTimeEpochMilliseconds=1e3*pairs[pairs.length-1].timestamp-timezoneOffsetMilliseconds;if(!(maximumTimeEpochMilliseconds-minimumTimeEpochMilliseconds<864e5)){return!0,"spline",!0,{chart:{renderTo:"timeline",zoomType:"x"},title:{text:params.causeVariableName+" & "+params.effectVariableName+" Over Time"},legend:{enabled:!1},scrollbar:{barBackgroundColor:"#eeeeee",barBorderRadius:0,barBorderWidth:0,buttonBackgroundColor:"#eeeeee",buttonBorderWidth:0,buttonBorderRadius:0,trackBackgroundColor:"none",trackBorderWidth:.5,trackBorderRadius:0,trackBorderColor:"#CCC"},navigator:{adaptToUpdatedData:!0,margin:10,height:50,handles:{backgroundColor:"#eeeeee"}},xAxis:{type:"datetime",gridLineWidth:!1,dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},min:minimumTimeEpochMilliseconds,max:maximumTimeEpochMilliseconds},yAxis:[{gridLineWidth:1,title:{text:"",style:{color:"#26B14C"}},labels:{formatter:function(){return this.value},style:{color:"#26B14C"}}},{gridLineWidth:1,title:{text:"Data is coming down the pipes!",style:{color:"#3284FF"}},labels:{formatter:function(){return this.value},style:{color:"#3284FF"}},opposite:!0}],plotOptions:{series:{lineWidth:1,states:{hover:{enabled:!0,lineWidth:1.5}}}},series:[{yAxis:0,name:params.causeVariableName+" ("+pairs[0].causeVariableDefaultUnitAbbreviatedName+")",type:"spline",color:"#26B14C",data:causeSeries,marker:{enabled:!0,radius:3}},{yAxis:1,name:params.effectVariableName+" ("+pairs[0].effectVariableDefaultUnitAbbreviatedName+")",type:"spline",color:"#3284FF",data:effectSeries,marker:{enabled:!0,radius:3}}],credits:{enabled:!1},rangeSelector:{inputBoxWidth:120,inputBoxHeight:18}}}console.warn("Need at least a day worth of data for line chart")}else qmLogService.error("ERROR: No variable name provided to configureLineChart")},qmService.configureLineChart=function(data,variableObject){if(!variableObject.name){if(!variableObject.variableName)return void qmLogService.error("ERROR: No variable name provided to configureLineChart");variableObject.name=variableObject.variableName}{if(!(data.length<1)){var minimumTimeEpochMilliseconds,maximumTimeEpochMilliseconds,i,timezoneOffsetMilliseconds=60*((new Date).getTimezoneOffset()/60)*60*1e3,numberOfMeasurements=data.length;if(numberOfMeasurements<1e3){for(data=data.sort(function(a,b){return a.x-b.x}),i=0;i<numberOfMeasurements;i++)data[i].x=data[i].x-timezoneOffsetMilliseconds;minimumTimeEpochMilliseconds=data[0].x-timezoneOffsetMilliseconds,maximumTimeEpochMilliseconds=data[data.length-1].x-timezoneOffsetMilliseconds}else{for(data=data.sort(function(a,b){return a[0]-b[0]}),i=0;i<numberOfMeasurements;i++)data[i][0]=data[i][0]-timezoneOffsetMilliseconds;minimumTimeEpochMilliseconds=data[0][0]-timezoneOffsetMilliseconds,maximumTimeEpochMilliseconds=data[data.length-1][0]-timezoneOffsetMilliseconds}maximumTimeEpochMilliseconds-minimumTimeEpochMilliseconds<864e5&&console.warn("Need at least a day worth of data for line chart");var chartConfig={useHighStocks:!0,tooltip:{shared:!0,formatter:function(){var value=this,string="";return string+=numberOfMeasurements<1e3?"<h3><b>"+moment(value.x).format("h A, dddd, MMM Do YYYY")+"<b></h3><br/>":"<h3><b>"+moment(value.x).format("MMM Do YYYY")+"<b></h3><br/>",angular.forEach(value.points,function(point){string+="<span>"+(point.point.y+variableObject.unitAbbreviatedName).replace(" /","/")+"</span>",string+="<br/>",value.points[0].point.name&&(string+="<span>"+value.points[0].point.name+"</span>",string+="<br/>")}),string},useHtml:!0},legend:{enabled:!1},xAxis:{type:"datetime",dateTimeLabelFormats:{millisecond:"%I:%M %p",second:"%I:%M %p",minute:"%I:%M %p",hour:"%I %p",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},min:minimumTimeEpochMilliseconds,max:maximumTimeEpochMilliseconds},credits:{enabled:!1},rangeSelector:{enabled:!0},navigator:{enabled:!0,xAxis:{type:"datetime",dateTimeLabelFormats:{millisecond:"%I:%M %p",second:"%I:%M %p",minute:"%I:%M %p",hour:"%I %p",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"}}},title:{text:variableObject.name+" Over Time ("+variableObject.unitAbbreviatedName+")"},series:[{name:variableObject.name+" Over Time",data:data,tooltip:{valueDecimals:2}}]};return"Rating"!==variableObject.unitCategoryName&&(chartConfig.series.marker={enabled:!0,radius:2},chartConfig.series.lineWidth=0,chartConfig.series.states={hover:{lineWidthPlus:0}}),setChartExportingOptions(chartConfig)}qmLogService.error("ERROR: No data provided to configureLineChart")}},qmService.searchUserVariablesDeferred=function(variableSearchQuery,params){var deferred=$q.defer();return variableSearchQuery||(variableSearchQuery="*"),params.searchPhrase=variableSearchQuery,qm.userVariables.getFromApi(params,function(variables){deferred.resolve(variables)},function(error){qmLogService.error(error),deferred.reject(error)}),deferred.promise},qmService.goToPredictorsList=function(variableName){qmService.goToState(qmStates.predictorsAll,{effectVariableName:variableName})},qmService.goToOutcomesList=function(variableName){qmService.goToState(qmStates.outcomesAll,{causeVariableName:variableName})},qmService.goToCorrelationsListForVariable=function(variable){function goToCorrelationsList(variable){variable.outcome?qmService.goToPredictorsList(variable.name):qmService.goToOutcomesList(variable.name)}"string"==typeof variable?qm.userVariables.getByName(variable,{},null,function(userVariable){goToCorrelationsList(userVariable)}):goToCorrelationsList(variable)},qmService.goToStudyCreationForOutcome=function(variable){qmService.goToState(qmStates.studyCreation,{effectVariable:variable})},qmService.goToStudyCreationForPredictor=function(variable){qmService.goToState(qmStates.studyCreation,{causeVariable:variable})},qmService.goToStudyCreationForVariable=function(variable){variable.outcome?qmService.goToStudyCreationForOutcome(variable):qmService.goToStudyCreationForPredictor(variable)},qmService.getVariableWithCharts=function(variableName,refresh,successHandler){variableName||(variableName=qm.getPrimaryOutcomeVariable().name),qm.userVariables.getByName(variableName,{includeCharts:!0},refresh,function(variableObject){qmService.hideLoader(),successHandler&&successHandler(variableObject)})},qmService.addWikipediaExtractAndThumbnail=function(variableObject){qmService.getWikipediaArticle(variableObject.name).then(function(page){page&&(variableObject.wikipediaExtract=page.extract,page.thumbnail&&(variableObject.imageUrl=page.thumbnail))})},qmService.postUserVariableDeferred=function(body){var deferred=$q.defer();return qmService.postUserVariableToApi(body,function(response){var userVariable;response.userVariables&&(userVariable=response.userVariables[0]),response.userVariable&&(userVariable=response.userVariable),qm.userVariables.saveToLocalStorage(userVariable),qm.studyHelper.deleteLastStudy(),qmService.stateHelper.previousUrl&&(qmService.stateHelper.previousUrl=qm.urlHelper.addUrlQueryParamsToUrl({recalculate:!0},qmService.stateHelper.previousUrl)),qmLogService.debug("qmService.postUserVariableDeferred: success: "+JSON.stringify(userVariable),null),deferred.resolve(userVariable)},function(error){deferred.reject(error)}),deferred.promise},qmService.resetUserVariableDeferred=function(variableId){var deferred=$q.defer(),body={variableId:variableId};return qmService.resetUserVariable(body,function(response){qm.userVariables.saveToLocalStorage(response.data.userVariable),deferred.resolve(response.data.userVariable)},function(error){deferred.reject(error)}),deferred.promise},qmService.getVariableByIdDeferred=function(variableId){var deferred=$q.defer();return qmService.getVariableByIdFromApi(variableId,function(variable){deferred.resolve(variable)},function(error){deferred.reject(error)}),deferred.promise},qmService.deleteAllMeasurementsForVariableDeferred=function(variableName){var deferred=$q.defer();return qmService.deleteUserVariableMeasurements(variableName,function(){qmService.storage.deleteByProperty(qm.items.userVariables,"variableName",variableName),deferred.resolve()},function(error){qmLogService.error(error),qmLogService.error("Error deleting all measurements for variable: ",error),deferred.reject(error)}),deferred.promise},qmService.getFromLocalStorageOrApiDeferred=function(params){var deferred=$q.defer();return qm.userVariables.getFromLocalStorageOrApi(params,function(userVariables){params=params||{},deferred.resolve(userVariables)},function(error){deferred.reject(error)}),deferred.promise},qmService.getCommonVariablesDeferred=function(params,successHandler,errorHandler){var commonVariables=qm.storage.getElementsWithRequestParams(qm.items.commonVariables,params);commonVariables&&commonVariables.length?successHandler(commonVariables):qm.commonVariablesHelper.putCommonVariablesInLocalStorageUsingApi(function(commonVariables){successHandler(commonVariables)})},qmService.scheduleSingleMostFrequentLocalNotification=function(activeTrackingReminders){if(qm.getUser())if(qmService.localNotifications.localNotificationsPluginInstalled()){qmLog.pushDebug("We HAVE TO reschedule whenever app opens or it loses binding to its trigger events!");var notificationSettings=function(){activeTrackingReminders||(activeTrackingReminders=qm.reminderHelper.getActive());var at=new Date(0),mostFrequentIntervalInMinutes=qm.notifications.getMostFrequentReminderIntervalInMinutes();if(activeTrackingReminders)for(var i=0;i<activeTrackingReminders.length;i++)activeTrackingReminders[i].reminderFrequency===60*mostFrequentIntervalInMinutes&&at.setUTCSeconds(activeTrackingReminders[i].nextReminderTimeEpochSeconds);var notificationSettings={every:mostFrequentIntervalInMinutes,at:at};if(notificationSettings.id=qm.getPrimaryOutcomeVariable().id,notificationSettings.title="How are you?",notificationSettings.text="Open reminder inbox",notificationSettings.sound=null,qmLog.pushDebug("scheduleSingleMostFrequentLocalNotification: Going to schedule generic notification"+JSON.stringify(notificationSettings)),$rootScope.platform.isAndroid&&(notificationSettings.icon="ic_stat_icon_bw"),$rootScope.platform.isIOS){notificationSettings.sound="file://sound/silent.ogg";var everyString="minute";notificationSettings.every>1&&(everyString="hour"),notificationSettings.every>60&&(everyString="day"),console.warn("scheduleGenericIosNotification: iOS requires second, minute, hour, day, week, month, year so converting "+notificationSettings.every+" minutes to string: "+everyString),notificationSettings.every=everyString}return notificationSettings}();cordova.plugins.notification.local.cancelAll(function(){qmLog.pushDebug("cancelAllNotifications: notifications have been cancelled"),qmService.localNotifications.getAllLocalScheduled(function(notifications){qmLog.pushDebug("cancelAllNotifications: All notifications after cancelling: "+JSON.stringify(notifications)),function(notificationSettings){$ionicPlatform.ready(function(){cordova.plugins.notification.local.schedule(notificationSettings,function(data){qmLogService.info("scheduleGenericNotification: notification scheduled.  Settings: "+JSON.stringify(notificationSettings)),qmLogService.info("cordova.plugins.notification.local callback. data: "+JSON.stringify(data)),qmService.notifications.showAndroidPopupForMostRecentNotification(!0),qmLog.pushDebug("Setting pop-up on local notification trigger but IT ONLY WORKS WHEN THE APP IS RUNNING so we set it for push notifications as well as local ones!"),cordova.plugins.notification.local.on("trigger",function(currentNotification){qmLog.pushDebug("onTrigger: just triggered this notification: "+JSON.stringify(currentNotification)),qm.storage.setItem(qm.items.lastLocalNotificationTime,qm.timeHelper.getUnixTimestampInSeconds()),qmService.notifications.showAndroidPopupForMostRecentNotification()})})})}(notificationSettings)})})}else qmLog.pushDebug("Can only schedule notification on mobile or Chrome extension");else qmLog.pushDebug("No user for scheduleSingleMostFrequentLocalNotification")},qmService.cancelAllNotifications=function(){var deferred=$q.defer();return"undefined"!=typeof cordova&&void 0!==cordova.plugins.notification?$ionicPlatform.ready(function(){cordova.plugins.notification.local.cancelAll(function(){qmLog.pushDebug("cancelAllNotifications: notifications have been cancelled",null),qmService.localNotifications.getAllLocalScheduled(function(notifications){qmLog.pushDebug("cancelAllNotifications: All notifications after cancelling"+JSON.stringify(notifications))}),deferred.resolve()})}):"undefined"!=typeof chrome&&void 0!==chrome.alarms?chrome.alarms.clearAll(function(){qmLogService.debug("Cleared all Chrome alarms!",null),deferred.resolve()}):(qmLog.pushDebug("cancelAllNotifications: Chrome and cordova are not defined.",null),deferred.resolve()),deferred.promise},qmService.getSecondsSinceMidnightLocalFromLocalString=function(localTimeString){return 60*parseInt(moment(localTimeString,"HH:mm:ss").format("HH"))*60+60*parseInt(moment(localTimeString,"HH:mm:ss").format("mm"))+parseInt(moment(localTimeString,"HH:mm:ss").format("ss"))},qmService.getEpochTimeFromLocalString=function(localTimeString){return moment(localTimeString,"HH:mm:ss").unix()},qmService.getEpochTimeFromLocalStringRoundedToHour=function(localTimeString){var partsOfString=localTimeString.split(":");return moment(partsOfString[0],"HH").unix()},qmService.getLocalTimeStringFromUtcString=function(utcTimeString){var utcTimeStringFull=moment().format("HH:mm:ss Z");utcTimeString&&(utcTimeStringFull=utcTimeString+" +0000");return moment(utcTimeStringFull,"HH:mm:ss Z").format("HH:mm:ss")},qmService.humanFormat=function(hhmmssFormatString){return moment(hhmmssFormatString,"HH:mm:ss").format("h:mm A")},qmService.getUtcTimeStringFromLocalString=function(localTimeString){var utcTimeString=moment(localTimeString,"HH:mm:ss").utc().format("HH:mm:ss");return qmLogService.debug("utcTimeString is "+utcTimeString,null),utcTimeString},qmService.getLocalMidnightInUtcString=function(){return moment(0,"HH").utc().format("YYYY-MM-DD HH:mm:ss")},qmService.getTomorrowLocalMidnightInUtcString=function(){var tomorrowLocalMidnightMoment=moment(0,"HH");return tomorrowLocalMidnightMoment.add(1,"days"),tomorrowLocalMidnightMoment.utc().format("YYYY-MM-DD HH:mm:ss")},qmService.getCurrentTimeInLocalString=function(){return moment().format("HH:mm:ss")},qmService.getCurrentDateTimeInUtcString=function(){return moment().utc().format("YYYY-MM-DD HH:mm:ss")},qmService.getCurrentDateString=function(){return moment().utc().format("YYYY-MM-DD")},qmService.getCurrentDateTimeInUtcStringPlusMin=function(minutes){return moment().add(minutes,"minutes").utc().format("YYYY-MM-DD HH:mm:ss")},qmService.getSecondsSinceMidnightLocalRoundedToNearestFifteen=function(defaultStartTimeInSecondsSinceMidnightLocal){var defaultStartTime=new Date(1e3*defaultStartTimeInSecondsSinceMidnightLocal),defaultStartTimeHours=defaultStartTime.getUTCHours(),defaultStartTimeMinutes=defaultStartTime.getUTCMinutes();return defaultStartTimeMinutes%15!=0&&(defaultStartTimeMinutes>0&&defaultStartTimeMinutes<=7?defaultStartTimeMinutes=0:defaultStartTimeMinutes>7&&defaultStartTimeMinutes<=22?defaultStartTimeMinutes=15:defaultStartTimeMinutes>22&&defaultStartTimeMinutes<=37?defaultStartTimeMinutes=30:defaultStartTimeMinutes>37&&defaultStartTimeMinutes<=52?defaultStartTimeMinutes=45:defaultStartTimeMinutes>52&&(defaultStartTimeMinutes=0,23===defaultStartTimeHours?defaultStartTimeHours=0:defaultStartTimeHours+=1)),defaultStartTimeInSecondsSinceMidnightLocal=qmService.getSecondsSinceMidnightLocalFromLocalString(defaultStartTimeHours+":"+defaultStartTimeMinutes+":00")},qmService.getSecondsSinceMidnightLocalRoundedToNearestFifteenFromLocalString=function(localString){var secondsSinceMidnightLocal=qmService.getSecondsSinceMidnightLocalFromLocalString(localString);return qmService.getSecondsSinceMidnightLocalRoundedToNearestFifteen(secondsSinceMidnightLocal)},qmService.storage.deleteById=function(localStorageItemName,elementId){var deferred=$q.defer();return deferred.resolve(window.qm.storage.deleteById(localStorageItemName,elementId)),deferred.promise},qmService.storage.deleteByProperty=function(localStorageItemName,propertyName,propertyValue){var deferred=$q.defer();return qm.storage.deleteByProperty(localStorageItemName,propertyName,propertyValue),deferred.resolve(),deferred.promise},qmService.storage.setItem=function(key,value){var deferred=$q.defer();return window.qm.storage.setItem(key,value),deferred.resolve(),deferred.promise},qmService.storage.getAsStringWithCallback=function(key,callback){callback(qm.storage.getItem(key))},qmService.fetchAccessTokenAndUserDetails=function(authorization_code,withJWT){qmService.getAccessTokenFromAuthorizationCode(authorization_code,withJWT).then(function(response){qmService.hideLoader(),response.error?(qmLogService.error(response.error),qmLogService.error("Error generating access token"),qmService.storage.setItem("user",null)):(qmLog.authDebug("Access token received",null,response),qm.auth.saveAccessTokenResponse(response),qmLog.authDebug("get user details from server and going to defaultState..."),qmService.showBlackRingLoader(),qmService.refreshUser().then(function(user){qmService.hideLoader(),qmService.syncAllUserData(),qmLog.authDebug($state.current.name+" qmService.fetchAccessTokenAndUserDetails got this user "+JSON.stringify(user),null)},function(error){qmService.hideLoader(),qmLogService.error($state.current.name+" could not refresh user because "+JSON.stringify(error))}))}).catch(function(exception){qmLog.error(exception),qmService.hideLoader(),qmService.storage.setItem("user",null)})},qmService.checkLoadStartEventUrlForErrors=function(ref,event){if(qm.urlHelper.getParam("error",event.url)){var errorMessage="nonNativeMobileLogin: error occurred:"+qm.urlHelper.getParam("error",event.url);qmLogService.error(errorMessage),ref.close()}},qmService.nonNativeMobileLogin=function(register){qmLog.authDebug("qmService.nonNativeMobileLogin: open the auth window via inAppBrowser."),document.addEventListener("deviceready",function(){function executeScriptCallBack(params){null==params[0]&&$("#status-message").text("Sorry we couldn't open that page. Message from the server is : '"+params.message+"'")}var url=qmService.generateV1OAuthUrl(register);qmLog.authDebug("Opening "+url),window.open=cordova.InAppBrowser.open,qmService.inAppBrowserRef=window.open(url,"_blank","location=no,toolbar=yes,clearcache=yes,clearsessioncache=yes"),qmLog.authDebug("qmService.nonNativeMobileLogin: listen to its event when the page changes"),qmService.inAppBrowserRef.addEventListener("loadstart",function(event){if(qmLog.authDebug("qmService.nonNativeMobileLogin: Checking if changed url "+event.url+" is the same as redirection url "+qmService.getRedirectUri(),null),qmService.getAuthorizationCodeFromEventUrl(event)){var authorizationCode=qmService.getAuthorizationCodeFromEventUrl(event);qmService.inAppBrowserRef.close(),qmService.inAppBrowserRef=void 0,qmLog.authDebug("qmService.nonNativeMobileLogin: Going to get an access token using authorization code"),qmService.fetchAccessTokenAndUserDetails(authorizationCode)}qmService.checkLoadStartEventUrlForErrors(qmService.inAppBrowserRef,event)}),qmService.inAppBrowserRef.addEventListener("loaderror",function(params){$("#status-message").text("");var scriptErrorMessage="alert('Sorry we cannot open that page. Message from the server is : "+params.message+"');";qmLog.error(scriptErrorMessage),qmService.inAppBrowserRef.executeScript({code:scriptErrorMessage},executeScriptCallBack),qmService.inAppBrowserRef.close(),qmService.inAppBrowserRef=void 0})},!1)},qmService.chromeAppLogin=function(register){qmLog.authDebug("login: Use Chrome app (content script, background page, etc.");var url=qmService.generateV1OAuthUrl(register);chrome.identity.launchWebAuthFlow({url:url,interactive:!0},function(){var authorizationCode=qmService.getAuthorizationCodeFromEventUrl(event);qmService.getAccessTokenFromAuthorizationCode(authorizationCode)})},qmService.chromeExtensionLogin=function(register){function getAfterLoginRedirectUrl(){return encodeURIComponent("https://"+$rootScope.appSettings.clientId+".quantimo.do")}function getLoginUrl(){var loginUrl=qmService.getQuantiModoUrl("api/v2/auth/login");return!0===register&&(loginUrl=qmService.getQuantiModoUrl("api/v2/auth/register")),loginUrl+="?afterLoginGoTo="+getAfterLoginRedirectUrl(),qmLog.authDebug("chromeExtensionLogin loginUrl is "+loginUrl),loginUrl}qmLog.authDebug("chromeExtensionLogin"),qmLog.authDebug("chrome.tabs.create "+getLoginUrl()),chrome.tabs.create({url:getLoginUrl()}),window.close()},qmService.forecastIoWeather=function(coordinates){if($rootScope.user){if(!alreadyPostedWeatherSinceNoonYesterday()){var url="https://api.forecast.io/forecast/81b54a0d1bd6e3ccdd52e777be2b14cb/";url=url+coordinates.latitude+","+coordinates.longitude+","+getYesterdayNoonTimestamp()+"?callback=JSON_CALLBACK",qmLogService.debug("Checking weather forecast at "+url),$http.jsonp(url).success(function(data){var measurementSets=getWeatherMeasurementSets(data);qmService.postMeasurementsToApi(measurementSets,function(response){qmLogService.debug("posted weather measurements"),response&&response.data&&response.data.userVariables&&qm.userVariables.saveToLocalStorage(response.data.userVariables),qmService.storage.setItem("lastPostedWeatherAt",window.qm.timeHelper.getUnixTimestampInSeconds())},function(error){qmLogService.error("could not post weather measurements: "+error)})}).error(function(error){qmLog.error(null,"forecast.io request failed!  error: "+error,{error_response:error,request_url:url})})}}else qmLogService.debug("No recording weather because we're not logged in",null)},qmService.setupHelpCards=function(){return qm.storage.getItem(qm.items.defaultHelpCards)?qm.storage.getItem(qm.items.defaultHelpCards):(qm.storage.setItem(qm.items.defaultHelpCards,qm.getAppSettings().appDesign.helpCard.active),qm.getAppSettings().appDesign.helpCard.active)},qmService.colors={green:{backgroundColor:"#0f9d58",circleColor:"#03c466"},blue:{backgroundColor:"#3467d6",circleColor:"#5b95f9"},yellow:{backgroundColor:"#f09402",circleColor:"#fab952"}},qmService.setupOnboardingPages=function(){var onboardingPagesFromLocalStorage=qm.storage.getItem("onboardingPages"),activeOnboardingPages=$rootScope.appSettings.appDesign.onboarding.active;onboardingPagesFromLocalStorage&&onboardingPagesFromLocalStorage.length&&"undefined"!==onboardingPagesFromLocalStorage&&($rootScope.appSettings.designMode||(activeOnboardingPages=onboardingPagesFromLocalStorage)),$rootScope.appSettings.appDesign.onboarding.active=qmService.addColorsCategoriesAndNames(activeOnboardingPages)},qmService.setupUpgradePages=function(){var upgradePages=[{id:"upgradePage",title:"QuantiModo Plus",backgroundColor:"#3467d6",circleColor:"#fefdfc",iconClass:"icon positive ion-ios-medkit-outline",image:{url:"img/robots/quantimodo-robot-waving.svg"},bodyText:"I need to eat electricity to live and I am very hungry.  Please help me by subscribing or I will die."},{id:"addTreatmentRemindersCard",title:"Any Treatments?",backgroundColor:"#f09402",circleColor:"#fab952",variableCategoryName:"Treatments",bodyText:"Are you taking any medications, treatments, supplements, or other interventions like meditation or psychotherapy? ",buttons:[{id:"hideAddTreatmentRemindersCardButton",buttonText:"Nope",buttonIconClass:"ion-checkmark",buttonClass:"button button-clear button-assertive",clickFunctionCall:function(){$rootScope.hideUpgradePage()}}]},{id:"addSymptomRemindersCard",title:"Recurring Symptoms?",backgroundColor:"#3467d6",circleColor:"#5b95f9",variableCategoryName:"Symptoms",bodyText:"Got any recurring symptoms that vary in their severity?",buttons:[{id:"hideAddSymptomRemindersCardButton",buttonText:"Nope",buttonIconClass:"ion-checkmark",buttonClass:"button button-clear button-assertive",clickFunctionCall:function(){$rootScope.hideUpgradePage()}}]},{id:"addEmotionRemindersCard",title:"Varying Emotions?",backgroundColor:"#0f9d58",circleColor:"#03c466",variableCategoryName:"Emotions",bodyText:"Do you have any emotions that fluctuate regularly?<br><br>If so, add them so I can try to determine which factors are influencing them.",buttons:[{id:"hideAddEmotionRemindersCardButton",buttonText:"Nope",buttonIconClass:"ion-checkmark",buttonClass:"button button-clear button-assertive",clickFunctionCall:function(){$rootScope.hideUpgradePage()}}]},{id:"addFoodRemindersCard",title:"Common Foods or Drinks?",backgroundColor:"#3467d6",circleColor:"#5b95f9",variableCategoryName:"Foods",bodyText:"Add any foods or drinks that you consume more than a few times a week",buttons:[{id:"hideAddFoodRemindersCardButton",buttonText:"Nope",buttonIconClass:"ion-checkmark",buttonClass:"button button-clear button-assertive",clickFunctionCall:function(){$rootScope.hideUpgradePage()}}]},{id:"locationTrackingInfoCard",title:"Location Tracking",backgroundColor:"#0f9d58",circleColor:"#03c466",bodyText:"Would you like to automatically log location? ",moreInfo:$rootScope.variableCategories.Location.moreInfo,buttons:[{id:"hideLocationTrackingInfoCardButton",buttonText:"NO",buttonIconClass:"ion-flash-off",buttonClass:"button button-clear button-assertive",clickFunctionCall:function(){$rootScope.hideUpgradePage()}}]},{id:"weatherTrackingInfoCard",title:"Weather Tracking",backgroundColor:"#0f9d58",circleColor:"#03c466",variableCategoryName:"Environment",bodyText:"Would you like to automatically log the weather to see how it might be affecting you? ",buttons:[{id:"hideLocationTrackingInfoCardButton",buttonText:"NO",buttonIconClass:"ion-flash-off",buttonClass:"button button-clear button-assertive",clickFunctionCall:function(){$rootScope.hideUpgradePage()}}]},{id:"importDataCard",title:"Import Your Data",backgroundColor:"#f09402",circleColor:"#fab952",iconClass:"icon positive ion-ios-cloud-download-outline",image:{url:"img/intro/download_2-96.png",height:"96",width:"96"},bodyText:"Let's go to the Import Data page and see if you're using any of the dozens of apps and devices that I can automatically pull data from!",buttons:[{id:"hideImportDataCardButton",buttonText:"Done connecting data sources",buttonIconClass:"ion-checkmark",buttonClass:"button button-clear button-assertive",clickFunctionCall:function(){$rootScope.hideUpgradePage()}}]},{id:"allDoneCard",title:"Great job!",backgroundColor:"#3467d6",circleColor:"#fefdfc",iconClass:"icon positive ion-ios-cloud-download-outline",image:{url:"img/robots/quantimodo-robot-waving.svg"},bodyText:"You're all set up!  Let's take a minute to record your first measurements and then you're done for the day! ",buttons:[{id:"goToInboxButton",buttonText:"GO TO INBOX",buttonIconClass:"ion-ios-filing-outline",buttonClass:"button button-clear button-assertive",clickFunctionCall:function(){$rootScope.doneUpgrade()}}]}],upgradePagesFromLocalStorage=qm.storage.getItem("upgradePages");upgradePagesFromLocalStorage&&upgradePagesFromLocalStorage.length&&"undefined"!==upgradePagesFromLocalStorage&&(upgradePages=upgradePagesFromLocalStorage),$rootScope.upgradePages=upgradePages},qmService.postCreditCard=function(body,successHandler,errorHandler){qmService.post("api/v2/account/subscribe",[],body,successHandler,errorHandler)},qmService.postCreditCardDeferred=function(body){function upgradeErrorHandler(response){qmLog.error("Upgrade failed",null,response);var message="Please try again or contact mike@quantimo.do for help.";response.error&&(message=response.error+"  "+message),qmService.hideLoader(),$mdDialog.show($mdDialog.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Could not upgrade").textContent(message).ariaLabel("Error").ok("OK"))}var deferred=$q.defer();return qmService.recordUpgradeProductPurchase(body.productId,null,1),qmService.showBlackRingLoader(),qmService.postCreditCard(body,function(response){qmService.hideLoader(),qmLogService.debug(JSON.stringify(response)),response&&response.user?(qmLogService.error("Successful upgrade response from API"),qmService.setUserInLocalStorageBugsnagIntercomPush(response.user),$mdDialog.show($mdDialog.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Thank you!").textContent("I'm eternally grateful for your generous support!").ariaLabel("OK!").ok("Get Started")).finally(function(){qmService.stateHelper.goBack(),qmService.recordUpgradeProductPurchase(answer.productId,response.data.purchaseId,2)}),deferred.resolve(response)):upgradeErrorHandler(response)},function(response){upgradeErrorHandler(response),deferred.reject(response)}),deferred.promise},qmService.postDowngradeSubscription=function(body,successHandler,errorHandler){qmService.post("api/v2/account/unsubscribe",[],body,successHandler,errorHandler)},qmService.postDowngradeSubscriptionDeferred=function(){var deferred=$q.defer();return $rootScope.user.stripeActive=!1,qmLogService.error("User downgraded subscription: "+JSON.stringify($rootScope.user)),qmService.postDowngradeSubscription({},function(user){qmService.setUserInLocalStorageBugsnagIntercomPush(user),deferred.resolve(user)},function(response){deferred.reject(response)}),deferred.promise},qmService.sendWithEmailComposer=function(subjectLine,emailBody,emailAddress,fallbackUrl){if(emailBody||(emailBody="I love you!"),!cordova||!cordova.plugins.email)return qmLogService.error("Trying to send with cordova.plugins.email even though it is not installed.  Using qmService.sendWithMailTo instead."),void qmService.sendWithMailTo(subjectLine,emailBody,emailAddress,fallbackUrl);emailAddress||(emailAddress=null),document.addEventListener("deviceready",function(){qmLogService.debug("deviceready"),cordova.plugins.email.isAvailable(function(isAvailable){isAvailable?window.plugins&&window.plugins.emailComposer?(qmLogService.debug("Generating email with cordova-plugin-email-composer",null),window.plugins.emailComposer.showEmailComposerWithCallback(function(result){qmLogService.debug("Response -> "+result,null)},subjectLine,emailBody,emailAddress,"info@quantimo.do",null,!0,null,null)):(qmLogService.error("window.plugins.emailComposer not available!"),qmService.sendWithMailTo(subjectLine,emailBody,emailAddress,fallbackUrl)):(qmLogService.error("Email has not been configured for this device!"),qmService.sendWithMailTo(subjectLine,emailBody,emailAddress,fallbackUrl))})},!1)},qmService.sendWithMailTo=function(subjectLine,emailBody,emailAddress){emailBody||(emailBody="I love you!");var emailUrl="mailto:";emailAddress&&(emailUrl+=emailAddress),emailUrl=emailUrl+"?subject="+subjectLine+"&body="+emailBody,qmService.openSharingUrl(emailUrl)},qmService.openSharingUrl=function(sharingUrl){window.open(sharingUrl,"_system")||alert("Please unblock popups and press the share button again!")},qmService.sendEmailViaAPI=function(body,successHandler,errorHandler){qmService.post("api/v2/email",[],body,successHandler,errorHandler)},qmService.sendEmailViaAPIDeferred=function(emailType){var deferred=$q.defer();return qmService.sendEmailViaAPI({emailType:emailType},function(){deferred.resolve()},function(error){deferred.reject(error)}),deferred.promise};var upgradeSubscriptionProducts={monthly7:{baseProductId:"monthly7",name:"QuantiModo Plus Monthly Subscription",category:"Subscription/End-User",variant:"monthly",position:1,price:6.95},yearly60:{baseProductId:"yearly60",name:"QuantiModo Plus Yearly Subscription",category:"Subscription/End-User",variant:"yearly",position:2,price:59.95}};qmService.recordUpgradeProductImpression=function(){Analytics.addImpression(upgradeSubscriptionProducts.monthly7.baseProductId,upgradeSubscriptionProducts.monthly7.name,$rootScope.platform.currentPlatform+" Upgrade Options",$rootScope.appSettings.appDisplayName,upgradeSubscriptionProducts.monthly7.category,upgradeSubscriptionProducts.monthly7.variant,upgradeSubscriptionProducts.monthly7.position,upgradeSubscriptionProducts.monthly7.price),Analytics.addImpression(upgradeSubscriptionProducts.yearly60.baseProductId,upgradeSubscriptionProducts.yearly60.name,$rootScope.platform.currentPlatform+" Upgrade Options",$rootScope.appSettings.appDisplayName,upgradeSubscriptionProducts.yearly60.category,upgradeSubscriptionProducts.yearly60.variant,upgradeSubscriptionProducts.yearly60.position,upgradeSubscriptionProducts.yearly60.price),Analytics.pageView()},qmService.recordUpgradeProductPurchase=function(baseProductId,transactionId,step,coupon){Analytics.addProduct(baseProductId,upgradeSubscriptionProducts[baseProductId].name,upgradeSubscriptionProducts[baseProductId].category,$rootScope.appSettings.appDisplayName,upgradeSubscriptionProducts[baseProductId].variant,upgradeSubscriptionProducts[baseProductId].price,1,coupon,upgradeSubscriptionProducts[baseProductId].position);var revenue=upgradeSubscriptionProducts[baseProductId].price,affiliation=$rootScope.appSettings.appDisplayName,list=$rootScope.appSettings.appDisplayName;Analytics.trackTransaction(transactionId,affiliation,revenue,0,0,coupon,list,step,"")},qmService.getStudyLinks=function(predictorVariableName,outcomeVariableName){qmService.postVoteDeferred({causeVariableName:predictorVariableName,effectVariableName:outcomeVariableName,vote:1});var subjectLine="Help us discover the effect of "+predictorVariableName+" on "+outcomeVariableName,studyLinkStatic=qm.api.getBaseUrl()+"/api/v2/study?causeVariableName="+encodeURIComponent(predictorVariableName)+"&effectVariableName="+encodeURIComponent(outcomeVariableName),bodyText="Please join my study at "+studyLinkStatic+" .  Have a great day!";return{studyLinkFacebook:"https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(studyLinkStatic),studyLinkTwitter:"https://twitter.com/home?status="+encodeURIComponent(subjectLine+" "+studyLinkStatic+" @quantimodo"),studyLinkGoogle:"https://plus.google.com/share?url="+encodeURIComponent(studyLinkStatic),studyLinkEmail:"mailto:?subject="+encodeURIComponent(subjectLine)+"&body="+encodeURIComponent(bodyText)}},qmService.getStudyLinkByVariableNames=function(causeVariableName,effectVariableName){return qm.api.getBaseUrl()+"/api/v2/study?causeVariableName="+encodeURIComponent(causeVariableName)+"&effectVariableName="+encodeURIComponent(effectVariableName)},qmService.getWikipediaArticle=function(title){var deferred=$q.defer();return wikipediaFactory.getArticle({term:title,pithumbsize:"200",exlimit:"max",redirects:""}).then(function(repsonse){if(repsonse.data.query)deferred.resolve(repsonse.data.query.pages[0]);else{var error="Wiki not found for "+title;qmLogService.error(error),qmLogService.error(error),deferred.reject(error)}}).catch(function(error){qmLogService.error(error),deferred.reject(error)}),deferred.promise},qmService.sendToLoginIfNecessaryAndComeBack=function(afterLoginGoToState,afterLoginGoToUrl){return qmLog.authDebug("Called qmService.sendToLoginIfNecessaryAndComeBack"),qmService.refreshUserUsingAccessTokenInUrlIfNecessary(),!qm.auth.getAccessTokenFromUrlUserOrStorage()&&(qm.platform.isDesignMode()?setAfterLoginGoToState(qmStates.configuration):afterLoginGoToState?setAfterLoginGoToState(afterLoginGoToState):setAfterLoginGoToUrl(afterLoginGoToUrl),sendToLogin(),!0)},qmService.addToFavoritesUsingVariableObject=function(variableObject){var trackingReminder={};if(trackingReminder.variableId=variableObject.id,trackingReminder.variableName=variableObject.name,trackingReminder.unitAbbreviatedName=variableObject.unit.abbreviatedName,trackingReminder.valence=variableObject.valence,trackingReminder.variableCategoryName=variableObject.variableCategoryName,trackingReminder.reminderFrequency=0,$rootScope.lastRefreshTrackingRemindersAndScheduleAlarmsPromise){qmLogService.debug("Got deletion request before last reminder refresh completed",null),$rootScope.lastRefreshTrackingRemindersAndScheduleAlarmsPromise.reject(),$rootScope.lastRefreshTrackingRemindersAndScheduleAlarmsPromise=null}if("/5"!==trackingReminder.unitAbbreviatedName&&"Blood Pressure"!==trackingReminder.variableName)return qmLogService.debug("Going to favoriteAdd state",null),void qmService.goToState("app.favoriteAdd",{variableObject:variableObject,fromState:$state.current.name,fromUrl:window.location.href,doneState:"app.favorites"});qmService.addToTrackingReminderSyncQueue(trackingReminder),qmService.goToState("app.favorites",{trackingReminder:trackingReminder,fromState:$state.current.name,fromUrl:window.location.href}),qmService.syncTrackingReminders()},qmService.addToRemindersUsingVariableObject=function(variableObject,options,successHandler){var doneState=getDefaultState();options.doneState&&(doneState=options.doneState);var trackingReminder=JSON.parse(JSON.stringify(variableObject));trackingReminder.variableId=variableObject.id,delete trackingReminder.id,trackingReminder.variableName=variableObject.name,trackingReminder.unitAbbreviatedName=variableObject.unit.abbreviatedName,trackingReminder.valence=variableObject.valence,trackingReminder.variableCategoryName=variableObject.variableCategoryName,trackingReminder.reminderFrequency=86400,trackingReminder.reminderStartTime=qmService.getUtcTimeStringFromLocalString("19:00:00"),"Blood Pressure"===variableObject.variableName&&(options.skipReminderSettingsIfPossible=!0),options.skipReminderSettingsIfPossible?("serving"===variableObject.unit.abbreviatedName&&(trackingReminder.defaultValue=1),trackingReminder.valueAndFrequencyTextDescription="Every day",qmService.addToTrackingReminderSyncQueue(trackingReminder),qmService.showBasicLoader(),$timeout(function(){qmService.goToState(doneState,{trackingReminder:trackingReminder}),successHandler&&successHandler(trackingReminder),$timeout(function(){qmService.showToastWithButton("Added "+trackingReminder.variableName,"SETTINGS",function(){qmService.goToState(qmStates.reminderAdd,{trackingReminder:trackingReminder})})},1),qmService.syncTrackingReminders()},1)):qmService.goToState("app.reminderAdd",{variableObject:variableObject,doneState:doneState})},qmService.getDefaultReminders=function(){return qm.getAppSettings().defaultReminders?qm.getAppSettings().defaultReminders:"medication"===qm.getAppSettings().defaultRemindersType?[{variableName:"Heart Rate (Pulse)",defaultValue:null,unitAbbreviatedName:"bpm",reminderFrequency:0,icon:"ion-heart",variableCategoryName:"Vital Signs"},{variableName:"Blood Pressure",icon:"ion-heart",unitAbbreviatedName:"mmHg",reminderFrequency:0,defaultValue:null,variableCategoryName:"Vital Signs"},{variableName:"Core Body Temperature",icon:null,unitAbbreviatedName:"C",reminderFrequency:0,defaultValue:null,variableCategoryName:"Vital Signs"},{variableName:"Oxygen Saturation",icon:null,unitAbbreviatedName:"%",reminderFrequency:0,defaultValue:null,variableCategoryName:"Vital Signs"},{variableName:"Respiratory Rate (Ventilation/Breath/RR/Respiration)",icon:null,unitAbbreviatedName:"/minute",reminderFrequency:0,defaultValue:null,variableCategoryName:"Vital Signs"},{variableName:"Weight",icon:null,unitAbbreviatedName:"lb",reminderFrequency:0,defaultValue:null,variableCategoryName:"Physique"},{variableName:"Height",icon:null,unitAbbreviatedName:"cm",reminderFrequency:0,defaultValue:null,variableCategoryName:"Physique"},{variableName:"Body Mass Index or BMI",icon:null,unitAbbreviatedName:"index",reminderFrequency:0,defaultValue:null,variableCategoryName:"Physique"},{variableName:"Blood Glucose Sugar",icon:null,unitAbbreviatedName:"mg/dL",reminderFrequency:0,defaultValue:null,variableCategoryName:"Vital Signs"}]:null},qmService.getAllReminderTypes=function(variableCategoryName,type){var deferred=$q.defer();return qmService.getTrackingRemindersDeferred(variableCategoryName).then(function(trackingReminders){var count=0;trackingReminders&&trackingReminders.length&&(count=trackingReminders.length),qmLogService.info("Got "+count+" unprocessed "+variableCategoryName+" category trackingReminders",null);var reminderTypesArray=processTrackingReminders(trackingReminders,variableCategoryName);type?(count=0,reminderTypesArray[type]&&reminderTypesArray[type].length&&(count=reminderTypesArray[type].length),qmLogService.info("Got "+count+" "+variableCategoryName+" category "+type+"s",null),deferred.resolve(reminderTypesArray[type])):(qmLogService.info("Returning reminderTypesArray from getTrackingRemindersDeferred",null),deferred.resolve(reminderTypesArray))}),deferred.promise},qmService.convertTrackingReminderToVariableObject=function(trackingReminder){var variableObject=JSON.parse(JSON.stringify(trackingReminder));return variableObject.id=trackingReminder.variableId,variableObject.name=trackingReminder.variableName,variableObject},qmService.addVariableCategoryImagePaths=function(object){if(object.variableCategoryName){var pathPrefix="img/variable_categories/"+object.variableCategoryName.toLowerCase().replace(" ","-");object.pngPath||(object.pngPath=pathPrefix+".png"),object.svgPath||(object.svgPath=pathPrefix+".svg")}return object},qmService.showMaterialAlert=function(title,textContent,ev){function AlertDialogController($scope,$mdDialog,dialogParameters){var self=this;self.title=dialogParameters.title,self.textContent=dialogParameters.textContent,$scope.hide=function(){$mdDialog.hide()},self.cancel=function(){$mdDialog.cancel()},$scope.answer=function(answer){$mdDialog.hide(answer)},self.getHelp=function(){if(self.helpText&&!self.showHelp)return self.showHelp=!0;qmService.goToState(window.qmStates.help),$mdDialog.cancel()}}AlertDialogController.$inject=["$scope","$mdDialog","dialogParameters"],$mdDialog.show({controller:AlertDialogController,controllerAs:"ctrl",templateUrl:"templates/dialogs/robot-alert.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!1,fullscreen:!1,locals:{dialogParameters:{title:title,textContent:textContent}}}).then(function(answer){"help"===answer&&qmService.goToState("app.help")},function(){})},qmService.showMaterialConfirmationDialog=function(title,textContent,yesCallbackFunction,noCallbackFunction,ev,noText){function ConfirmationDialogController($scope,$mdDialog,dialogParameters){var self=this;self.title=dialogParameters.title,self.textContent=dialogParameters.textContent,self.noText=dialogParameters.noText,$scope.hide=function(){$mdDialog.hide()},self.cancel=function(){$mdDialog.cancel()},self.getHelp=function(){if(self.helpText&&!self.showHelp)return self.showHelp=!0;qmService.goToState(window.qmStates.help),$mdDialog.cancel()},$scope.answer=function(answer){$mdDialog.hide(answer)}}ConfirmationDialogController.$inject=["$scope","$mdDialog","dialogParameters"],noText||(noText="Cancel"),$mdDialog.show({controller:ConfirmationDialogController,controllerAs:"ctrl",templateUrl:"templates/dialogs/robot-confirmation.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!1,fullscreen:!1,locals:{dialogParameters:{title:title,textContent:textContent,noText:noText}}}).then(function(answer){"help"===answer&&qmService.goToState("app.help"),"yes"===answer&&yesCallbackFunction(ev),"no"===answer&&noCallbackFunction&&noCallbackFunction(ev)})},qmService.validationFailure=function(message,object){qmService.showMaterialAlert(message),qmLogService.error(message,null,{measurement:object})},qmService.valueIsValid=function(object,value){var message;return qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName]&&void 0!==qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName].minimumValue&&null!==qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName].minimumValue&&value<qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName].minimumValue?(message=qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName].minimumValue+" is the smallest possible value for the unit "+qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName].name+".  Please select another unit or value.",qmService.validationFailure(message),!1):!(qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName]&&void 0!==qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName].maximumValue&&null!==qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName].maximumValue&&value>qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName].maximumValue)||(message=qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName].maximumValue+" is the largest possible value for the unit "+qm.unitsIndexedByAbbreviatedName[object.unitAbbreviatedName].name+".  Please select another unit or value.",qmService.validationFailure(message),!1)},qmService.getInputType=function(unitAbbreviatedName,valence,variableName){var inputType="value";return"Blood Pressure"===variableName&&(inputType="bloodPressure"),"/5"===unitAbbreviatedName&&(inputType="oneToFiveNumbers","positive"===valence&&(inputType="happiestFaceIsFive"),"negative"===valence&&(inputType="saddestFaceIsFive")),"yes/no"===unitAbbreviatedName&&(inputType="yesOrNo"),inputType},qmService.formatValueUnitDisplayText=function(valueUnitText,abbreviatedUnitName){return valueUnitText=valueUnitText.replace(" /","/"),valueUnitText=valueUnitText.replace("1 yes/no","YES"),valueUnitText=valueUnitText.replace("0 yes/no","NO"),abbreviatedUnitName&&(valueUnitText=valueUnitText.replace("("+abbreviatedUnitName+")","")),valueUnitText};var deleteAllMeasurementsForVariable=function(variableName){qmService.showBlackRingLoader(),qmService.showInfoToast("Deleted all "+variableName+" measurements"),qmService.deleteAllMeasurementsForVariableDeferred(variableName).then(function(){variableName===qm.getPrimaryOutcomeVariable().name&&(qm.localForage.setItem(qm.items.primaryOutcomeVariableMeasurements,[]),qmService.storage.setItem("measurementsQueue",[]),qmService.storage.setItem("averagePrimaryOutcomeVariableValue",0),qmService.storage.setItem("lastMeasurementSyncTime",0)),qmService.hideLoader(),qmService.goToDefaultState(),qmLogService.debug("All measurements for "+variableName+" deleted!",null)},function(error){qmService.hideLoader(),qmLogService.debug("Error deleting measurements: "+JSON.stringify(error),null)})};qmService.showDeleteAllMeasurementsForVariablePopup=function(variableName,ev){var title="Delete all "+variableName+" measurements?";qmService.showMaterialConfirmationDialog(title,"This cannot be undone!",function(){deleteAllMeasurementsForVariable(variableName)},function(){},ev)},qmService.completelyResetAppStateAndSendToLogin=function(comeBackAfterLogin){qmLogService.debug("called qmService.completelyResetAppStateAndSendToLogin",null),comeBackAfterLogin&&setAfterLoginGoToUrl(),qmService.completelyResetAppState(),sendToLogin()},qmService.sendToLogin=function(){qmLogService.debug("called qmService.sendToLogin",null),sendToLogin()},qmService.goToStudyPageViaCorrelationObject=function(correlationObject){qm.studyHelper.saveLastStudy(correlationObject),qmService.goToStudyPage(correlationObject.causeVariableName,correlationObject.effectVariableName)},qmService.goToStudyPage=function(causeVariableName,effectVariableName){window.location.href=getStudyUrl(causeVariableName,effectVariableName)},qmService.getPlanFeatureCards=function(){var planFeatureCards=[{title:"QuantiModo Lite",headerColor:"#f2f9ff",backgroundColor:"#f2f9ff",subtitle:"Improve your life!",featuresBasicList:[{title:"3 month data history"}],featuresAvatarList:[{title:"Emotion Tracking",subtitle:"Turn data into happiness!",moreInfo:$rootScope.variableCategories.Emotions.moreInfo,image:$rootScope.variableCategories.Emotions.imageUrl},{title:"Track Symptoms",subtitle:"in just seconds a day",moreInfo:$rootScope.variableCategories.Symptoms.moreInfo,image:$rootScope.variableCategories.Symptoms.imageUrl},{title:"Track Diet",subtitle:"Identify dietary triggers",moreInfo:$rootScope.variableCategories.Foods.moreInfo,image:$rootScope.variableCategories.Foods.imageUrl},{title:"Treatment Tracking",subtitle:"with reminders",moreInfo:$rootScope.variableCategories.Treatments.moreInfo,image:$rootScope.variableCategories.Treatments.imageUrl}],priceHtml:"Price: Free forever",buttonText:"Sign Up Now",buttonClass:"button button-balanced"},{title:"QuantiModo Plus",headerColor:"#f0df9a",backgroundColor:"#ffeda5",subtitle:"Perfect your life!",featuresAvatarList:[{title:"Import from Apps",subtitle:"Facebook, Google Calendar, Runkeeper, Github, Sleep as Android, MoodiModo, and even the weather!",moreInfo:"Automatically import your data from Google Calendar, Facebook, Runkeeper, QuantiModo, Sleep as Android, MoodiModo, Github, and even the weather!",image:"img/features/smartphone.svg"},{title:"Import from Devices",subtitle:"Fitbit, Jawbone Up, Withings...",moreInfo:"Automatically import your data from Fitbit, Withings, Jawbone.",image:"img/features/smartwatch.svg"},{title:"Sync Across Devices",subtitle:"Web, Chrome, Android, and iOS",moreInfo:"Any of your QuantiModo-supported apps will automatically sync with any other app on the web, Chrome, Android, and iOS.",image:"img/features/devices.svg"},{title:"Unlimited History",subtitle:"Lite gets 3 months",moreInfo:"Premium accounts can see unlimited historical data (Free accounts can see only the most recent three months). This is great for seeing long-term trends in your productivity or getting totals for the entire year.",image:"img/features/calendar.svg"},{title:"Location Tracking",subtitle:"Automatically log places",moreInfo:$rootScope.variableCategories.Location.moreInfo,image:$rootScope.variableCategories.Location.imageUrl},{title:"Purchase Tracking",subtitle:"Automatically log purchases",moreInfo:$rootScope.variableCategories.Payments.moreInfo,image:$rootScope.variableCategories.Payments.imageUrl},{title:"Weather Tracking",subtitle:"Automatically log weather",moreInfo:$rootScope.variableCategories.Environment.moreInfo,image:$rootScope.variableCategories.Environment.imageUrl},{title:"Productivity Tracking",subtitle:"Passively track app usage",moreInfo:"You can do this by installing and connecting Rescuetime on the Import Data page.  Rescuetime is a program that runs on your computer & passively tracks of productivity and app usage.",image:"img/features/rescuetime.png"},{title:"Sleep Tracking",subtitle:"Automatically track sleep duration and quality",moreInfo:$rootScope.variableCategories.Sleep.moreInfo,image:$rootScope.variableCategories.Sleep.imageUrl},{title:"Vital Signs",subtitle:"Keep your heart healthy",moreInfo:"I can get your heart rate data from the Fitbit Charge HR, Fitbit Surge.  Resting heart rate is a good measure of general fitness, and heart rate during workouts show intensity.  I can also talk to Withing's bluetooth blood pressure monitor. ",image:"img/features/heart-like.png"},{title:"Physique",subtitle:"Monitor weight and body fat",moreInfo:$rootScope.variableCategories.Physique.moreInfo,image:$rootScope.variableCategories.Physique.imageUrl},{title:"Fitness Tracking",subtitle:"Steps and physical activity",moreInfo:$rootScope.variableCategories["Physical Activity"].moreInfo,image:$rootScope.variableCategories["Physical Activity"].imageUrl},{title:"Advanced Analytics",subtitle:"See Top Predictors",moreInfo:"See a list of the strongest predictors for any outcome.  See the values for each predictor that typically precede optimal outcomes.  Dive deeper by checking out the full study on any predictor and outcome combination.",image:"img/features/calendar.svg"}],priceHtml:"14 day free trial <br> Monthly: $6.99/month <br> Annual: $4.99/month (4 months free!)",buttonText:"Start My 14 Day Free Trial",buttonClass:"button button-large button-assertive"}];return $rootScope.platform.isIOS&&(planFeatureCards=JSON.parse(JSON.stringify(planFeatureCards).replace("Android, and iOS","any mobile device").replace(", Sleep as Android",""))),planFeatureCards},qmService.showBasicLoader=function(){qmLogService.debug("Called showBasicLoader in "+$state.current.name,null,qmLog.getStackTrace()),$ionicLoading.show({duration:1e4})},qmService.showBlackRingLoader=function(){ionic&&ionic.Platform&&ionic.Platform.isIOS()?qmService.showBasicLoader():$ionicLoading.show({templateUrl:"templates/loaders/ring-loader.html",duration:1e4}),qmLogService.debug("Called showBlackRingLoader in "+$state.current.name,null,qmLog.getStackTrace())},qmService.hideLoader=function(delay){qm.urlHelper.getParam("loaderDebug")&&qmLogService.debug("Called hideLoader in "+$state.current.name,null,qmLog.getStackTrace()),delay?$timeout(function(){$ionicLoading.hide()},1e3*delay):$timeout(function(){$ionicLoading.hide()},0)},qmService.weShouldUseOAuthLogin=function(){return-1===window.location.href.indexOf(".quantimo.do")},qmService.getUserFromLocalStorageOrRefreshIfNecessary=function(){qmLogService.debug("getUserFromLocalStorageOrRefreshIfNecessary",null),qm.urlHelper.getParam("refreshUser")&&(qm.storage.clearStorageExceptForUnitsAndCommonVariables(),qmService.storage.setItem("onboarded",!0),qmService.storage.setItem("introSeen",!0),qmService.rootScope.setUser(null)),$rootScope.user||(qmService.rootScope.setUser(window.qmUser),$rootScope.user&&qmLogService.debug("Got $rootScope.user",null,$rootScope.user)),qmService.refreshUserUsingAccessTokenInUrlIfNecessary(),$rootScope.user&&(qmService.registerDeviceToken(),$rootScope.user.trackLocation||($rootScope.user.trackLocation=!1),$rootScope.user.getPreviewBuilds||($rootScope.user.getPreviewBuilds=!1))},qmService.getDevCredentials=function(){return $http.get("dev-credentials.json").success(function(response){"string"!=typeof response?response.accessToken&&!$rootScope.user&&(qmLogService.info("Using access token from dev-credentials.json",null),qm.auth.saveAccessTokenResponse(response.accessToken),qmService.refreshUser().then(function(){qmService.goToDefaultState()})):qmLogService.debug("dev-credentials.json response is a string",null)})},qmService.humanConnect=function(){var options={clientUserId:encodeURIComponent($rootScope.user.id),clientId:"e043bd14114cb0fb5f0b358f3a8910545ca9525e",publicToken:$rootScope.user.humanApiPublicToken?$rootScope.user.humanApiPublicToken:"",finish:function(err,sessionTokenObject){qmService.post("api/v3/human/connect/finish",[],sessionTokenObject).then(function(response){console.log(response),qmService.rootScope.setUser(response.data.user)})},close:function(){},error:function(err){}};HumanConnect.open(options)},qmService.quantimodoConnectPopup=function(){window.QuantiModoIntegration.options={clientUserId:encodeURIComponent($rootScope.user.id),clientId:$rootScope.appSettings.clientId,publicToken:$rootScope.user.quantimodoPublicToken?$rootScope.user.quantimodoPublicToken:"",finish:function(err,sessionTokenObject){qmService.post("api/v3/quantimodo/connect/finish",[],sessionTokenObject,function(response){console.log(response),qmService.rootScope.setUser(response.data.user)})},close:function(){},error:function(err){}},window.QuantiModoIntegration.openConnectorsListPopup()};var allStates=$state.get();qmService.convertHrefInSingleMenuType=function(menu){function convertStringToId(string){return string.replace("#/app/","").replace("/","-").replace("?","").replace("&","-").replace("=","-").toLowerCase()}function processMenuItem(menuItem){return menuItem=function(menuItem){if(menuItem.url)return menuItem;if(menuItem.stateName&&(menuItem.url=getUrlFromStateName(menuItem.stateName),menuItem.url))return menuItem;if(menuItem.href)for(var i=0;i<allStates.length;i++)-1!==menuItem.href.indexOf(allStates[i].url)&&(menuItem.url=allStates[i].url);return menuItem}(menuItem),menuItem=function(menuItem){if(menuItem.stateName)return menuItem;if(menuItem.url)for(var i=0;i<allStates.length;i++){if(allStates[i].url===menuItem.url){menuItem.stateName=allStates[i].name;break}var convertedLowerCaseStateName=convertUrlToLowerCaseStateName(menuItem);if(allStates[i].name.toLowerCase()===convertedLowerCaseStateName){menuItem.stateName=allStates[i].name;break}}return menuItem.stateName||qmLogService.debug("no state name for "+JSON.stringify(menuItem),null),menuItem}(menuItem),menuItem=convertQueryStringToParams(menuItem),menuItem=convertUrlAndParamsToHref(menuItem),menuItem=function(menuItem){return menuItem.href?menuItem.id=convertStringToId(menuItem.href):menuItem.id=convertStringToId(menuItem.title),menuItem}(menuItem),delete menuItem.url,menuItem}{if(menu){for(var i=0;i<menu.length;i++)if(menu[i]=processMenuItem(menu[i]),menu[i].subMenu)for(var j=0;j<menu[i].subMenu.length;j++)menu[i].subMenu[j]=processMenuItem(menu[i].subMenu[j]);return menu}qmLogService.debug("No menu given to convertHrefInSingleMenuType",null)}},qmService.convertHrefInFab=function(floatingActionButton){qmLogService.debug("convertHrefInFab",null);for(var i=1;i<5;i++)floatingActionButton.active["button"+i]=convertStateNameAndParamsToHref(floatingActionButton.active["button"+i]),floatingActionButton.custom["button"+i]=convertStateNameAndParamsToHref(floatingActionButton.custom["button"+i]);return floatingActionButton};var toastPosition=angular.extend({},{bottom:!0,top:!1,left:!0,right:!1}),getToastPosition=function(){return Object.keys(toastPosition).filter(function(pos){return toastPosition[pos]}).join(" ")};return qmService.showInfoToast=function(text){$mdToast.show($mdToast.simple().textContent(text).position(getToastPosition()).hideDelay(3e3))},qmService.showToastWithButton=function(textContent,buttonText,buttonFunction){var toast=$mdToast.simple().textContent(textContent).action(buttonText).highlightAction(!0).highlightClass("md-accent").hideDelay(1e4).position(getToastPosition());$mdToast.show(toast).then(function(response){"ok"===response&&buttonFunction()})},qmService.configureAppSettings=function(appSettings){qm.appSettings=appSettings,qm.getAppSettings().designMode=-1!==window.location.href.indexOf("configuration-index.html"),qm.getAppSettings().appDesign.menu=convertStateNameAndParamsToHrefInActiveAndCustomMenus(qm.getAppSettings().appDesign.menu),qm.getAppSettings().appDesign.ionNavBarClass||(qm.getAppSettings().appDesign.ionNavBarClass="bar-positive"),"object"!=typeof qm.getAppSettings().additionalSettings.monetizationSettings.subscriptionsEnabled&&(qm.getAppSettings().additionalSettings.monetizationSettings.subscriptionsEnabled={value:qm.getAppSettings().additionalSettings.monetizationSettings.subscriptionsEnabled}),$rootScope.appSettings=qm.getAppSettings(),qmLogService.debug("appSettings.clientId is "+qm.getAppSettings().clientId),qmLogService.debug("$rootScope.appSettings: ",null,qm.getAppSettings()),function(){if(qm.getAppSettings().favicon){document.head||(document.head=document.getElementsByTagName("head")[0]);var link=document.createElement("link"),oldLink=document.getElementById("dynamic-favicon");link.id="dynamic-favicon",link.rel="shortcut icon",link.href=$rootScope.appSettings.additionalSettings.appImages.favicon,oldLink&&document.head.removeChild(oldLink),document.head.appendChild(link)}}()},qmService.initializeApplication=function(appSettings){window.config||(qmLog.checkUrlAndStorageForDebugMode(),qmService.configureAppSettings(appSettings),qmService.switchBackToPhysician(),qmService.getUserFromLocalStorageOrRefreshIfNecessary(),qm.commonVariablesHelper.refreshIfNecessary(),qm.userVariables.refreshIfNumberOfRemindersGreaterThanUserVariables(),qmService.backgroundGeolocationStartIfEnabled(),qmLogService.setupBugsnag(),setupGoogleAnalytics(qm.userHelper.getUserFromLocalStorage()),qmService.navBar.hideNavigationMenuIfHideUrlParamSet(),qmService.scheduleSingleMostFrequentLocalNotification(),qm.urlHelper.getParam("finish_url")&&($rootScope.finishUrl=qm.urlHelper.getParam("finish_url",null,!0)),qm.unitHelper.getUnitsFromApiAndIndexByAbbreviatedNames(),appSettings=qmService.subscriptions.setUpgradeDisabledIfOnAndroidWithoutKey(appSettings),qmService.deploy.setVersionInfo())},qmService.sendBugReport=function(){qmService.registerDeviceToken();var subjectLine=encodeURIComponent($rootScope.appSettings.appDisplayName+" "+qm.getAppSettings().versionNumber+" Bug Report");!function(template,callback){qm.storage.getItem(qm.items.deviceTokenOnServer)&&(template=template+"\r\ndeviceTokenOnServer: "+qm.storage.getItem(qm.items.deviceTokenOnServer)+"\r\n\r\n"),qm.storage.getItem(qm.items.deviceTokenToSync)&&(template=template+"\r\ndeviceTokenToSync: "+qm.storage.getItem(qm.items.deviceTokenToSync)+"\r\n\r\n"),qmService.notifications.reconfigurePushNotificationsIfNoTokenOnServerOrToSync(),template=template+"Built "+qm.timeHelper.getTimeSinceString(qm.getAppSettings().builtAt)+"\r\n",template=template+"user.pushNotificationsEnabled: "+qm.userHelper.getUserFromLocalStorage().pushNotificationsEnabled+"\r\n",template=template+"last Push Received: "+qm.push.getTimeSinceLastPushString()+"\r\n",template=template+"last Local Notification Triggered: "+qm.notifications.getTimeSinceLastLocalNotification()+"\r\n",template=template+"drawOverAppsPopupEnabled: "+qm.storage.getItem(qm.items.drawOverAppsPopupEnabled)+"\r\n",template=template+"last popup: "+qm.notifications.getTimeSinceLastPopupString()+"\r\n",template=template+"QuantiModo Client ID: "+qm.api.getClientId()+"\r\n",template=template+"Platform: "+$rootScope.platform.currentPlatform+"\r\n",template=template+"User ID: "+$rootScope.user.id+"\r\n",template=template+"User Email: "+$rootScope.user.email+"\r\n",template=template+"inAppPurchase installed: "+(void 0!==window.inAppPurchase)+"\r\n",template=template+"PushNotification installed: "+("undefined"!=typeof PushNotification)+"\r\n";var splashInstalled="undefined"!=typeof navigator&&void 0!==navigator.splashscreen?"installed":"not installed";template=(template=template+"Splashscreen plugin: "+splashInstalled+"\r\n")+"Cordova Hot Code Push: "+JSON.stringify(qmService.deploy.chcpInfo)+"\r\n",template=function(template){return"undefined"!=typeof $ionicDeploy&&$ionicPlatform.ready(function(){var snapshotList;$ionicDeploy.getSnapshots().then(function(snapshots){for(var i=0;i<snapshots.length;i++)snapshotList=snapshotList+"\r\n"+snapshots[i];template=template+"\r\nSnapshots: "+snapshotList})}),template}(template),qmService.localNotifications.localNotificationsPluginInstalled()?qmService.localNotifications.getAllLocalScheduled(function(localNotifications){template=template+"localNotifications: "+JSON.stringify(localNotifications)+"\r\n",callback(template)}):callback(template)}("Please describe the issue here:  \r\n\r\n\r\n\r\nAdditional Information: \r\n",function(template){var emailBody=encodeURIComponent(template);qmLog.error("Bug Report",template),qm.platform.isMobile()?qmService.sendWithEmailComposer(subjectLine,emailBody,"mike@quantimo.do","http://help.quantimo.do"):qmService.sendWithMailTo(subjectLine,emailBody,"mike@quantimo.do","http://help.quantimo.do")})},qmService.logEventToGA=function(category,action,label,value,nonInteraction,customDimension,customMetric){label||(label=qmUser?qmUser.id:"NotLoggedIn"),void 0===nonInteraction&&(nonInteraction=!0),Analytics.trackEvent(category,action,label,value,nonInteraction,{dimension15:"My Custom Dimension",metric18:8e3})},qmService.configurePushNotifications=function(){$ionicPlatform.ready(function(){if($rootScope.platform.isMobile&&"undefined"==typeof PushNotification&&qmLogService.error("PushNotification is undefined on mobile!"),"undefined"!=typeof PushNotification){var pushConfig={android:{senderID:"1052648855194",badge:!0,sound:!1,vibrate:!1,icon:"ic_stat_icon_bw",clearBadge:!0},browser:{pushServiceURL:"http://push.api.phonegap.com/v1/push"},ios:{alert:"false",badge:"true",sound:"false",clearBadge:!0},windows:{}};qmLog.pushDebug("Going to try to register push ",JSON.stringify(pushConfig),pushConfig);var push=PushNotification.init(pushConfig);push.on("registration",function(registerResponse){qmService.logEventToGA(qm.analytics.eventCategories.pushNotifications,"registered"),qmLog.pushDebug("Registered device for push notifications.","registerResponse: "+JSON.stringify(registerResponse),registerResponse),registerResponse.registrationId||qmLogService.error("No registerResponse.registrationId from push registration"),qmLog.pushDebug("Got device token for push notifications: ",registerResponse.registrationId,registerResponse);var deviceTokenOnServer=qm.storage.getItem(qm.items.deviceTokenOnServer);deviceTokenOnServer&&registerResponse.registrationId===deviceTokenOnServer||qmService.storage.setItem(qm.items.deviceTokenToSync,registerResponse.registrationId)});push.on("notification",function(data){qm.storage.setItem(qm.items.lastPushTimestamp,qm.timeHelper.getUnixTimestampInSeconds()),qmService.logEventToGA(qm.analytics.eventCategories.pushNotifications,"received"),qmLog.pushDebug("Received push notification: "+JSON.stringify(data)),qmService.updateLocationVariablesAndPostMeasurementIfChanged(),void 0!==window.overApps?(qmLog.pushDebug("push notification is calling drawOverApps showAndroidPopupForMostRecentNotification..."),qmService.notifications.showAndroidPopupForMostRecentNotification()):(qmLog.pushDebug("window.overApps for popups is undefined! "),qmService.refreshTrackingReminderNotifications(300).then(function(){qmLog.pushDebug("push.on.notification: successfully refreshed notifications")},function(error){qmLog.error("push.on.notification: "+error)})),data.additionalData.url&&(qmLog.pushDebug("Opening data.additionalData.url: "+data.additionalData.url),document.location.href="#/app/settings",document.location.href=data.additionalData.url),push.finish(function(){qmLog.pushDebug("processing of push data is finished: "+JSON.stringify(data))}),data.deviceToken=qm.storage.getItem(qm.items.deviceTokenOnServer),data.additionalData.acknowledge&&(qmService.logEventToGA(qm.analytics.eventCategories.pushNotifications,"sendAcknowledgement"),qm.api.postToQuantiModo(data,"v1/trackingReminderNotification/received",function(response){qmLog.pushDebug("notification received success response: "+JSON.stringify(response))},function(error){qmLogService.error("notification received error response: "+JSON.stringify(error))}))}),push.on("error",function(e){qmService.logEventToGA(qm.analytics.eventCategories.pushNotifications,"error",e.message),qmLogService.error("Push error",e.message,pushConfig)});var finishPush=function(data){$rootScope.$broadcast("broadcastGetTrackingReminderNotifications"),push.finish(function(){qmLog.pushDebug("Push callback finished","accept callback finished for data.additionalData.notId: "+data.additionalData.notId,null,data)},function(){qmLogService.error("Push callback failed","accept callback failed for data.additionalData.notId: "+data.additionalData.notId,null,data)},data.additionalData.notId)};window.trackYesAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:1};qmLog.pushDebug("trackYesAction"," push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.trackNoAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:0};qmLog.pushDebug("trackNoAction"," push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.trackZeroAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:0};qmLog.pushDebug("trackZeroAction"," push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.trackOneRatingAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:1};qmLog.pushDebug("trackOneRatingAction"," push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.trackTwoRatingAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:2};qmLog.pushDebug("trackTwoRatingAction"," push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.trackThreeRatingAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:3};qmLog.pushDebug("trackThreeRatingAction"," push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.trackFourRatingAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:4};qmLog.pushDebug("trackFourRatingAction"," push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.trackFiveRatingAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:5};qmLog.pushDebug("trackFiveRatingAction"," push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.trackDefaultValueAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId};qmLog.pushDebug("trackDefaultValueAction"," push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.snoozeAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId};qmLog.pushDebug("snoozeAction"," push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qmService.snoozeTrackingReminderNotificationDeferred(body),finishPush(data)},window.trackLastValueAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:data.additionalData.lastValue};qmLog.pushDebug("trackLastValueAction"," Push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.trackSecondToLastValueAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:data.additionalData.secondToLastValue};qmLog.pushDebug("trackSecondToLastValueAction"," Push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)},window.trackThirdToLastValueAction=function(data){var body={trackingReminderNotificationId:data.additionalData.trackingReminderNotificationId,modifiedValue:data.additionalData.thirdToLastValue};qmLog.pushDebug("trackThirdToLastValueAction"," Push data: "+JSON.stringify(data),{pushData:data,notificationsPostBody:body}),qm.notifications.postTrackingReminderNotifications(body),finishPush(data)}}qmService.registerDeviceToken()})},qmService.setupVariableByVariableObject=function(variableObject){$rootScope.variableName=variableObject.name},qmService.drawOverAppsPopupRatingNotification=function(trackingReminderNotification,force){$rootScope.platform.isAndroid?isFalsey(qm.storage.getItem(qm.items.drawOverAppsPopupEnabled))?window.qmLog.debug("drawOverAppsPopup is disabled"):$ionicPlatform.ready(function(){qmService.notifications.drawOverAppsPopupRatingNotification(trackingReminderNotification,force)}):qmLogService.debug("Can only show popups on android",null)},qmService.toggleDrawOverAppsPopup=function(ev){qmService.notifications.drawOverAppsPopupEnabled()?qmService.notifications.disablePopups():qmService.notifications.showEnablePopupsConfirmation(ev)},qmService.showShareVariableConfirmation=function(variableObject,sharingUrl,ev){var textContent="Are you absolutely sure you want to make your "+variableObject.name+" measurements publicly visible? You can make them private again at any time on this page.";qmService.showMaterialConfirmationDialog("Share Variable",textContent,function(){variableObject.shareUserMeasurements=!0;var body={variableId:variableObject.id,shareUserMeasurements:!0};qmService.showBlackRingLoader(),qmService.postUserVariableDeferred(body).then(function(){qmService.hideLoader(),qmService.openSharingUrl(sharingUrl)},function(error){qmService.hideLoader(),qmLogService.error(error)})},function(){variableObject.shareUserMeasurements=!1},ev)},qmService.showUnShareVariableConfirmation=function(variableObject,ev){var textContent="Are you absolutely sure you want to make your "+variableObject.name+" and "+variableObject.name+" measurements private? Links to studies you previously shared with this variable will no longer work.";qmService.showMaterialConfirmationDialog("Share Variable",textContent,function(){variableObject.shareUserMeasurements=!1;var body={variableId:variableObject.id,shareUserMeasurements:!1};qmService.postUserVariableDeferred(body).then(function(){},function(error){qmLogService.error(error)})},function(){variableObject.shareUserMeasurements=!0},ev)},qmService.getVariableNameFromStateParamsRootScopeOrUrl=function($stateParams,$scope){return $scope.variableName?$scope.variableName:$stateParams.variableName?$stateParams.variableName:(qm.urlHelper.getParam("variableName")?$stateParams.variableName=qm.urlHelper.getParam("variableName",window.location.href,!0):$stateParams.variableObject?$stateParams.variableName=$stateParams.variableObject.name:$stateParams.trackingReminder?$stateParams.variableName=$stateParams.trackingReminder.variableName:qm.getPrimaryOutcomeVariable()&&($stateParams.variableName=qm.getPrimaryOutcomeVariable().name),$stateParams.variableName)},qmService.trackByFavorite=function(trackingReminder,modifiedReminderValue){void 0!==modifiedReminderValue&&null!==modifiedReminderValue||(modifiedReminderValue=trackingReminder.defaultValue),"SUM"===trackingReminder.combinationOperation?trackingReminder.total=trackingReminder.total+modifiedReminderValue:trackingReminder.total=modifiedReminderValue,trackingReminder.displayTotal=qmService.formatValueUnitDisplayText("Recorded "+trackingReminder.total+" "+trackingReminder.unitAbbreviatedName),trackingReminder.tally||(trackingReminder.tally=0),"SUM"===trackingReminder.combinationOperation?trackingReminder.tally+=modifiedReminderValue:trackingReminder.tally=modifiedReminderValue,qmService.showInfoToast(trackingReminder.displayTotal+" "+trackingReminder.variableName),$timeout(function(){void 0!==trackingReminder?null!==trackingReminder.tally&&(qmService.postMeasurementByReminder(trackingReminder,trackingReminder.tally).then(function(){qmLogService.debug("Successfully qmService.postMeasurementByReminder: "+JSON.stringify(trackingReminder),null)},function(error){qmLogService.error(error),qmLogService.error("Failed to Track by favorite! ",trackingReminder)}),trackingReminder.tally=null):qmLogService.error("$rootScope.favoritesTally[trackingReminder.id] is undefined so we can't send tally in favorite controller. Not sure how this is happening.")},2e3)},qmService.switchToPatient=function(patientUser){$rootScope.switchBackToPhysician||($rootScope.switchBackToPhysician=qmService.switchBackToPhysician),qmService.rootScope.setProperty("physicianUser",$rootScope.user),qmService.showBlackRingLoader(),qmService.completelyResetAppState(),qmService.setUserInLocalStorageBugsnagIntercomPush(patientUser),qm.storage.setItem(qm.items.physicianUser,$rootScope.physicianUser),qmService.goToState(qmStates.historyAll),qmService.showInfoToast("Now acting as "+patientUser.displayName+". Click the icon at the top to switch back.")},qmService.switchBackToPhysician=function(){if(qm.storage.getItem(qm.items.physicianUser)){var physicianUser=JSON.parse(JSON.stringify(qm.storage.getItem(qm.items.physicianUser)));qmService.showBlackRingLoader(),qmService.completelyResetAppState(),qmService.setUserInLocalStorageBugsnagIntercomPush(physicianUser),qm.storage.setItem(qm.items.physicianUser,null),qmService.rootScope.setProperty("physicianUser",null),qmService.rootScope.setUser(physicianUser),qmService.goToDefaultState(),qmService.showInfoToast("Switched back to your account")}else qmLog.debug("No physician to switch back to")},qmService.completelyResetAppStateAndLogout=function(){qmService.showBlackRingLoader(),qmService.completelyResetAppState(),logOutOfWebsite(),saveDeviceTokenToSyncWhenWeLogInAgain(),qmService.goToState(qmStates.intro),qm.platform.isMobile()&&(qmLog.info("Restarting app to enable opening login window again"),document.location.href="index.html")},qmService.afterLogoutDoNotDeleteMeasurements=function(){qmService.showBlackRingLoader(),qmService.rootScope.setUser(null),saveDeviceTokenToSyncWhenWeLogInAgain(),window.qm.storage.clearOAuthTokens(),logOutOfWebsite(),window.qm.storage.setItem(qm.items.introSeen,!1),window.qm.storage.setItem(qm.items.onboarded,!1),qmService.goToState("app.intro")},qmService}]),angular.module("starter").filter("frequency",function(){return function(value){return{43200:"every 12 hours",28800:"every 8 hours",21600:"every 6 hours",14400:"every 4 hours",10800:"every 3 hours",7200:"every 2 hours",3600:"hourly",1800:"every 30 minutes",60:"every minute",0:"never"}[value]}}).filter("range",function(){return function(arr,lower,upper){for(var i=lower;i<=upper;i++)arr.push(i);return arr}}).filter("fromUnixTimestampToLocalTimeOfDay",function(){return function(epochTime){return epochTime?moment(1e3*epochTime).format("h:mm A"):""}}).filter("fromTwentyFourToTwelveHourFormat",function(){return function(twentyFourHourFormatString){return twentyFourHourFormatString?moment(twentyFourHourFormatString,"HH:mm:ss").format("h:mm A"):""}}).filter("fromNow",function(){return function(value){if(value){var d=new Date(1e3*value);return moment(d).fromNow()}return""}}).filter("fromNowISO8601",function(){return function(isoString){return isoString?moment(isoString).fromNow():""}}).filter("unique",function(){return function(collection,keyname){var output=[],keys=[];return angular.forEach(collection,function(item){var key=item[keyname];-1===keys.indexOf(key)&&(keys.push(key),output.push(item))}),output}}).filter("fromUtcToLocalDate",function(){var localDateAndTime;return function(epochTime){return epochTime?localDateAndTime="number"==typeof epochTime?moment(1e3*epochTime).format(" dddd, MMM Do"):moment.utc(epochTime).local().format(" dddd, MMMM Do"):""}}).filter("fromUtcToLocalDateAndTime",function(){var localDateAndTime;return function(epochTime){return epochTime?localDateAndTime="number"==typeof epochTime?moment(1e3*epochTime).format(" h:mm a dddd, MMM Do"):moment.utc(epochTime).local().format(" h:mm a ddd, MMMM Do"):""}}).filter("fromUtcToLocalDateAndTimeCompact",function(){var localDateAndTime;return function(epochTime){return epochTime?localDateAndTime="number"==typeof epochTime?moment(1e3*epochTime).format(" h A dddd, MMM Do"):moment.utc(epochTime).local().format(" h A dddd, MMM Do"):""}}).filter("groupRemindersByDateRanges",function(){return function(reminders){var result=[],reference=moment().local(),today=reference.clone().startOf("day"),yesterday=reference.clone().subtract(1,"days").startOf("day"),weekold=reference.clone().subtract(7,"days").startOf("day"),monthold=reference.clone().subtract(30,"days").startOf("day"),todayResult=reminders.filter(function(reminder){return!0===moment.utc(reminder.trackingReminderNotificationTime).local().isSame(today,"d")});todayResult.length&&result.push({name:"Today",reminders:todayResult});var yesterdayResult=reminders.filter(function(reminder){return!0===moment.utc(reminder.trackingReminderNotificationTime).local().isSame(yesterday,"d")});yesterdayResult.length&&result.push({name:"Yesterday",reminders:yesterdayResult});var last7DayResult=reminders.filter(function(reminder){var date=moment.utc(reminder.trackingReminderNotificationTime).local();return!0===date.isAfter(weekold)&&!0!==date.isSame(yesterday,"d")&&!0!==date.isSame(today,"d")});last7DayResult.length&&result.push({name:"Last 7 Days",reminders:last7DayResult});var last30DayResult=reminders.filter(function(reminder){var date=moment.utc(reminder.trackingReminderNotificationTime).local();return!0===date.isAfter(monthold)&&!0===date.isBefore(weekold)&&!0!==date.isSame(yesterday,"d")&&!0!==date.isSame(today,"d")});last30DayResult.length&&result.push({name:"Last 30 Days",reminders:last30DayResult});var olderResult=reminders.filter(function(reminder){return!0===moment.utc(reminder.trackingReminderNotificationTime).local().isBefore(monthold)});return olderResult.length&&result.push({name:"Older",reminders:olderResult}),result}}).filter("reminderTimes",function(){"use strict";return function(reminder){return 86400===reminder.reminderFrequency?(reminder.reminderStartTime||(reminder.reminderStartTime="00:00:00"),"daily at "+function(reminderTimeUtc){var hourOffsetFromUtc=(new Date).getTimezoneOffset()/60,parsedReminderTimeUtc=reminderTimeUtc.split(":"),minutes=parsedReminderTimeUtc[1],localHour=parseInt(parsedReminderTimeUtc[0])-parseInt(hourOffsetFromUtc);return localHour>23&&(localHour-=24),localHour<0&&(localHour+=24),moment().hours(localHour).minutes(minutes)}(reminder.reminderStartTime).format("h:mm A")):reminder.frequencyTextDescription}}).filter("percentage",function(){return function(value){var track_factors={1:0,2:25,3:50,4:75,5:100};return track_factors[value]?track_factors[value]:0}}).filter("positiveImageByValue",["qmService","qmLogService",function(qmService,qmLogService){return function(ratingValue){return qmService.getPositiveImageByRatingValue(ratingValue)}}]).filter("negativeImageByValue",["qmService","qmLogService",function(qmService,qmLogService){return function(ratingValue){return qmService.getNegativeImageByRatingValue(ratingValue)}}]).filter("numericImageByValue",["qmService","qmLogService",function(qmService,qmLogService){return function(ratingValue){return qmService.getNumericImageByRatingValue(ratingValue)}}]).filter("PrimaryOutcomeVariableByNumber",["qmService","qmLogService",function(qmService,qmLogService){return function(value){return qm.getPrimaryOutcomeVariableByNumber(value)}}]).filter("time",function(){return function(time){return time?"number"==typeof time?moment(1e3*time).format("MMM Do YYYY, h:mm a").split(/,/g):moment.utc(time).local().format("dddd, MMMM Do YYYY, h:mm:ss a").split(/,/g):""}}).filter("timeDateOneLine",function(){return function(time){return time?"number"==typeof time?moment(1e3*time).format("h:mm a MMM Do YYYY").split(/,/g):moment.utc(time).local().format("h:mm a dddd MMMM Do YYYY").split(/,/g):""}}).filter("timeDayDate",function(){return function(time){return time?"number"==typeof time?moment(1e3*time).format("h:mm a dddd MMM Do YYYY").split(/,/g):moment.utc(time).local().format("dddd h:mm a dddd MMMM Do YYYY").split(/,/g):""}}).filter("timeOfDay",function(){return function(time){return time?"number"==typeof time?moment(1e3*time).format("hA"):moment.utc(time).local().format("hA"):""}}).filter("timeOfDayDayOfWeek",function(){return function(time){return time?"number"==typeof time?moment(1e3*time).format("h:mm a dddd").split(/,/g):moment.utc(time).local().format("h:mm a dddd").split(/,/g):""}}).filter("timeOfDayDayOfWeekNoArray",function(){return function(time){return time?"number"==typeof time?moment(1e3*time).format("h:mm a dddd"):moment.utc(time).local().format("h:mm a dddd"):""}}).filter("timeOfDayDayOfWeekDate",function(){return function(time){return time?"number"==typeof time?moment(1e3*time).format("h:mm a dddd, MMMM Do YYYY"):moment.utc(time).local().format("h:mm a dddd, MMMM Do YYYY"):""}}).filter("justDate",function(){return function(time){return time?"number"==typeof time?moment(1e3*time).format("MMMM Do YYYY").split(/,/g):moment.utc(time).local().format("MMMM Do YYYY").split(/,/g):""}}).filter("justDateNoArray",function(){return function(time){return time?"number"==typeof time?moment(1e3*time).format("MMMM Do YYYY"):moment.utc(time).local().format("MMMM Do YYYY"):""}}).filter("dayOfWeekAndDate",function(){return function(time){return time?"number"==typeof time?moment(1e3*time).format("ddd, MMM Do, YYYY"):moment.utc(time).local().format("ddd, MMM Do, YYYY"):""}}).filter("reminderTime",function(){return function(time){return time?moment.utc(time).local().calendar():""}}).filter("reminderStartTimeUtcToLocal",function(){return function(reminderStartTime){if(reminderStartTime){var reminderStartTimeStringUtc=reminderStartTime+" +0000";return moment(reminderStartTimeStringUtc,"HH:mm:ss Z").format("h:mm a")}return""}}).filter("unique",function(){return function(collection,keyname){var output=[],keys=[];return angular.forEach(collection,function(item){var key=item[keyname];-1===keys.indexOf(key)&&(keys.push(key),output.push(item))}),output}}).filter("wordAliases",function(){return function(originalName){var aliasName=qm.getAppSettings().appDesign.wordAliases[originalName];return void 0!==aliasName?aliasName:originalName}}).filter("useHttps",function(){return function(originalName){return originalName?originalName.replace("http://","https://"):originalName}}).filter("truncateText",function(){return function(originalText){return originalText.length>25?originalText.substring(0,25)+"...":originalText}}).filter("capitalizeFirstLetter",function(){return function(input){return input?input.charAt(0).toUpperCase()+input.substr(1).toLowerCase():""}}).filter("camelCaseToTitleCase",function(){return function(input){if(!input||"string"!=typeof input)return input;var result=input.replace("app.","");return(result=result.replace(/([A-Z])/g," $1")).charAt(0).toUpperCase()+result.slice(1)}}).filter("ionIconDisplayName",function(){return function(name){if(!name||"string"!=typeof name)return name;for(var splitStr=(name=(name=(name=(name=name.replace("ion-","")).replace("android-","")).replace("ios-","")).split("-").join(" ")).toLowerCase().split(" "),i=0;i<splitStr.length;i++)splitStr[i]=splitStr[i].charAt(0).toUpperCase()+splitStr[i].substring(1);return splitStr.join(" ")}}).filter("prettyJSON",function(){return function(json){return JSON?JSON.stringify(json,null,"  "):"your browser doesnt support JSON so cant pretty print"}}),angular.module("starter").controller("AppCtrl",["$scope","$timeout","$ionicPopover","$ionicLoading","$state","$ionicHistory","$rootScope","$ionicPopup","$ionicSideMenuDelegate","$ionicPlatform","$injector","qmService","qmLogService","$cordovaOauth","clipboard","$ionicActionSheet","Analytics","$locale","$mdDialog","$mdToast","$sce","wikipediaFactory","appSettingsResponse",function($scope,$timeout,$ionicPopover,$ionicLoading,$state,$ionicHistory,$rootScope,$ionicPopup,$ionicSideMenuDelegate,$ionicPlatform,$injector,qmService,qmLogService,$cordovaOauth,clipboard,$ionicActionSheet,Analytics,$locale,$mdDialog,$mdToast,$sce,wikipediaFactory,appSettingsResponse){function deleteVote(correlationObject,$index){correlationObject.userVote=null,qmService.deleteVoteDeferred(correlationObject,function(response){qmLogService.debug("deleteVote response",null,response)},function(response){qmLogService.error("deleteVote response",response)})}$scope.controller_name="AppCtrl",qmService.initializeApplication(appSettingsResponse),qmService.numberOfPendingNotifications=null,$scope.$on("$ionicView.enter",function(e){qmLogService.debug("appCtrl enter in state "+$state.current.name+" and url is "+window.location.href,null),e.targetScope&&e.targetScope.controller_name&&"TrackPrimaryOutcomeCtrl"===e.targetScope.controller_name?$scope.showCalendarButton=!0:$scope.showCalendarButton=!1,e.targetScope&&e.targetScope.controller_name&&"MeasurementAddCtrl"===e.targetScope.controller_name||"ReminderAddCtrl"===e.targetScope.controller_name||"FavoriteAddCtrl"===e.targetScope.controller_name||"ChartsPageCtrl"===e.targetScope.controller_name||"VariableSettingsCtrl"===e.targetScope.controller_name||"RemindersInboxCtrl"===e.targetScope.controller_name||"RemindersManageCtrl"===e.targetScope.controller_name||"StudyCtrl"===e.targetScope.controller_name||"PredictorsCtrl"===e.targetScope.controller_name||"historyAllMeasurementsCtrl"===e.targetScope.controller_name||"ConfigurationCtrl"===e.targetScope.controller_name?$scope.showMoreMenuButton=!0:$scope.showMoreMenuButton=!1}),$scope.$on("$ionicView.afterEnter",function(e){qmLog.info($scope.controller_name+".afterEnter so posting queued notifications if any"),qmService.postTrackingReminderNotificationsDeferred(),qmService.refreshUserUsingAccessTokenInUrlIfNecessary()}),$scope.closeMenu=function(){$ionicSideMenuDelegate.toggleLeft(!1)},$scope.$watch(function(){return $ionicSideMenuDelegate.getOpenRatio()},function(ratio){1==ratio&&($scope.showCloseMenuButton=!0,$scope.hideMenuButton=!0),0==ratio&&($scope.showCloseMenuButton=!1,$scope.hideMenuButton=!1)}),$scope.goToVariableSettingsForCauseVariable=function(correlationObject){correlationObject.causeVariable?qmService.goToState("app.variableSettingsVariableName",{variableObject:correlationObject.causeVariable,variableName:correlationObject.causeVariableName}):qmService.goToState("app.variableSettingsVariableName",{variableName:correlationObject.causeVariableName})},$scope.goToVariableSettingsForEffectVariable=function(correlationObject){correlationObject.effectVariable?qmService.goToState("app.variableSettingsVariableName",{variableObject:correlationObject.effectVariable,variableName:correlationObject.effectVariableName}):qmService.goToState("app.variableSettingsVariableName",{variableName:correlationObject.effectVariableName})},$scope.openUrl=function(url,showLocationBar,windowTarget){showLocationBar=showLocationBar||"no",windowTarget=windowTarget||"_blank","undefined"!=typeof cordova?cordova.InAppBrowser.open(url,windowTarget,"location="+showLocationBar+",toolbar=yes,clearcache=no,clearsessioncache=no"):$rootScope.platform.isWeb?window.open(url,windowTarget):window.open(url,windowTarget,"location="+showLocationBar+",toolbar=yes,clearcache=yes,clearsessioncache=yes")},$scope.toggleStudyShare=function(correlationObject,ev){correlationObject.shareUserMeasurements?qmService.studyHelper.showShareStudyConfirmation(correlationObject,ev):qmService.studyHelper.showUnShareStudyConfirmation(correlationObject,ev)},$scope.shareStudy=function(correlationObject,shareType,ev){if(correlationObject){var sharingUrl=qm.objectHelper.getValueOfPropertyOrSubPropertyWithNameLike(shareType,correlationObject);sharingUrl||qmLogService.error("No sharing url for this correlation: ",{correlation:correlationObject}),-1===sharingUrl.indexOf("userId")||correlationObject.shareUserMeasurements?qmService.studyHelper.shareStudyNativelyOrViaWeb(correlationObject,sharingUrl):qmService.studyHelper.showShareStudyConfirmation(correlationObject,sharingUrl,ev)}else qmLogService.error("No correlationObject provided to shareStudy!")},$scope.openSharingUrl=function(sharingUrl){qmService.openSharingUrl(sharingUrl)},$scope.openStudyLinkFacebook=function(predictorVariableName,outcomeVariableName){qmService.openSharingUrl(qmService.getStudyLinks(predictorVariableName,outcomeVariableName).studyLinkFacebook)},$scope.openStudyLinkTwitter=function(predictorVariableName,outcomeVariableName){qmService.openSharingUrl(qmService.getStudyLinks(predictorVariableName,outcomeVariableName).studyLinkTwitter)},$scope.openStudyLinkGoogle=function(predictorVariableName,outcomeVariableName){qmService.openSharingUrl(qmService.getStudyLinks(predictorVariableName,outcomeVariableName).studyLinkGoogle)},$scope.openStudyLinkEmail=function(predictorVariableName,outcomeVariableName){qmService.openSharingUrl(qmService.getStudyLinks(predictorVariableName,outcomeVariableName).studyLinkEmail)},$scope.toggleVariableShare=function(variableObject,ev){variableObject.shareUserMeasurements?qmService.showShareVariableConfirmation(variableObject,ev):qmService.showUnShareVariableConfirmation(variableObject,ev)},$rootScope.setLocalStorageFlagTrue=function(flagName){qmLogService.debug("Set "+flagName+" to true",null),$rootScope[flagName]=!0,qmService.storage.setItem(flagName,!0)},$scope.showHelpInfoPopup=function(explanationId,ev,modelName){qmService.help.showExplanationsPopup(explanationId,ev,modelName)},$scope.closeMenuIfNeeded=function(menuItem){menuItem.showSubMenu=!menuItem.showSubMenu,menuItem.click?$scope[menuItem.click]&&$scope[menuItem.click]():menuItem.subMenu||$scope.closeMenu()},$scope.positiveRatingOptions=qmService.getPositiveRatingOptions(),$scope.negativeRatingOptions=qmService.getNegativeRatingOptions(),$scope.numericRatingOptions=qmService.getNumericRatingOptions(),$scope.welcomeText=qm.getAppSettings().welcomeText,$scope.downVote=function(correlationObject,$index,ev){correlationObject.correlationCoefficient>0?$scope.increasesDecreases="increases":$scope.increasesDecreases="decreases";var title,textContent,yesCallback,noCallback;0!==correlationObject.userVote?(title="Implausible relationship?",textContent="Do you think is is IMPOSSIBLE that "+correlationObject.causeVariableName+" "+$scope.increasesDecreases+" your "+correlationObject.effectVariableName+"?",yesCallback=function(){correlationObject.userVote=0,correlationObject.vote=0,qmService.postVoteDeferred(correlationObject).then(function(){qmLogService.debug("Down voted!",null)},function(){qmLogService.error("Down vote failed!")})},noCallback=function(){},qmService.showMaterialConfirmationDialog(title,textContent,yesCallback,noCallback,ev)):(title="Delete Downvote",textContent="You previously voted that it is IMPOSSIBLE that "+correlationObject.causeVariableName+" "+$scope.increasesDecreases+" your "+correlationObject.effectVariableName+". Do you want to delete this down vote?",yesCallback=function(){deleteVote(correlationObject)},noCallback=function(){},qmService.showMaterialConfirmationDialog(title,textContent,yesCallback,noCallback,ev))},$scope.upVote=function(correlationObject,$index,ev){correlationObject.correlationCoefficient>0?$scope.increasesDecreases="increases":$scope.increasesDecreases="decreases";var title,textContent,yesCallback,noCallback;1!==correlationObject.userVote?(title="Plausible relationship?",textContent="Do you think it is POSSIBLE that "+correlationObject.causeVariableName+" "+$scope.increasesDecreases+" your "+correlationObject.effectVariableName+"?",yesCallback=function(){correlationObject.userVote=1,correlationObject.vote=1,qmService.postVoteDeferred(correlationObject).then(function(){qmLogService.debug("upVote",null)},function(){qmLogService.error("upVote failed!")})},noCallback=function(){},qmService.showMaterialConfirmationDialog(title,textContent,yesCallback,noCallback,ev)):(title="Delete Upvote",textContent="You previously voted that it is POSSIBLE that "+correlationObject.causeVariableName+" "+$scope.increasesDecreases+" your "+correlationObject.effectVariableName+". Do you want to delete this up vote?",yesCallback=function(){deleteVote(correlationObject)},noCallback=function(){},qmService.showMaterialConfirmationDialog(title,textContent,yesCallback,noCallback,ev))},$scope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"===phase||"$digest"===phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)},$scope.onTextClick=function($event){qmLogService.debug("Auto selecting text so the user doesn't have to press backspace...",null),$event.target.select()},$scope.favoriteValidationFailure=function(message){qmService.showMaterialAlert("Whoops!",message),qmLogService.error(message)},$scope.trackFavoriteByValueField=function(trackingReminder,modifiedValue){void 0!==modifiedValue&&null!==modifiedValue&&(trackingReminder.modifiedValue=modifiedValue),null!==trackingReminder.modifiedValue?(trackingReminder.displayTotal=qmService.formatValueUnitDisplayText("Recorded "+trackingReminder.modifiedValue+" "+trackingReminder.unitAbbreviatedName),qmService.postMeasurementByReminder(trackingReminder,trackingReminder.modifiedValue).then(function(){qmLogService.debug("Successfully qmService.postMeasurementByReminder: "+JSON.stringify(trackingReminder))},function(error){qmLogService.error("Failed to track favorite! error: "+error,null,trackingReminder)})):$scope.favoriteValidationFailure("Please specify a value for "+trackingReminder.variableName)},$scope.trackByFavorite=function(trackingReminder,modifiedReminderValue){qmService.trackByFavorite(trackingReminder,modifiedReminderValue)},$scope.showFavoriteActionSheet=function(favorite,$index,bloodPressure){var variableObject={id:favorite.variableId,name:favorite.variableName},actionMenuButtons=[{text:'<i class="icon ion-gear-a"></i>Edit Reminder'},{text:'<i class="icon ion-edit"></i>Other Value/Time/Note'},qmService.actionSheets.actionSheetButtons.charts,qmService.actionSheets.actionSheetButtons.historyAllVariable,qmService.actionSheets.actionSheetButtons.variableSettings];qm.getAppSettings().favoritesController&&qm.getAppSettings().favoritesController.actionMenuButtons&&(actionMenuButtons=qm.getAppSettings().favoritesController.actionMenuButtons),bloodPressure&&(actionMenuButtons=[]);var hideSheet=$ionicActionSheet.show({buttons:actionMenuButtons,destructiveText:'<i class="icon ion-trash-a"></i>Delete From Favorites',cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED",null)},buttonClicked:function(index){return qmLogService.debug("BUTTON CLICKED",null,index),0===index&&qmService.goToState("app.reminderAdd",{reminder:favorite}),1===index&&qmService.goToState("app.measurementAdd",{trackingReminder:favorite}),2===index&&qmService.goToState("app.charts",{trackingReminder:favorite,fromState:$state.current.name,fromUrl:window.location.href}),3===index&&qmService.goToState("app.historyAllVariable",{variableObject:variableObject,variableName:variableObject.name}),4===index&&qmService.goToVariableSettingsByName(favorite.variableName),!0},destructiveButtonClicked:function(){return favorite.hide=!0,qmService.deleteTrackingReminderDeferred(favorite),!0}});$timeout(function(){hideSheet()},2e4)},$scope.trackBloodPressure=function(){$rootScope.bloodPressure.diastolicValue&&$rootScope.bloodPressure.systolicValue?($rootScope.bloodPressure.displayTotal="Recorded "+$rootScope.bloodPressure.systolicValue+"/"+$rootScope.bloodPressure.diastolicValue+" Blood Pressure",qmService.postBloodPressureMeasurements($rootScope.bloodPressure).then(function(){qmLogService.debug("Successfully qmService.postMeasurementByReminder: "+JSON.stringify($rootScope.bloodPressure),null)},function(error){qmLogService.error("Failed to Track by favorite! ",$rootScope.bloodPressure)})):$scope.favoriteValidationFailure("Please enter both values for blood pressure.")},$scope.showExplanationsPopup=function(parameterOrPropertyName,ev,modelName,title){qmService.help.showExplanationsPopup(parameterOrPropertyName,ev,modelName,title)},$scope.goBack=function(providedStateParams){qmService.stateHelper.goBack(providedStateParams)},$scope.trackLocationWithMeasurementsChange=function(event,trackLocation){null!==trackLocation&&void 0!==trackLocation&&($rootScope.user.trackLocation=trackLocation),qmLogService.debug("trackLocation",null,$rootScope.user.trackLocation),qmService.updateUserSettingsDeferred({trackLocation:$rootScope.user.trackLocation}),$rootScope.user&&$rootScope.user.trackLocation&&(qmLogService.debug("Going to execute qmService.backgroundGeolocationStartIfEnabled if $ionicPlatform.ready"),qmService.showInfoToast("Location tracking enabled"),qmService.updateLocationVariablesAndPostMeasurementIfChanged()),$rootScope.user.trackLocation||(qmService.showInfoToast("Location tracking disabled"),qmLogService.debug("Do not track location"))},$scope.$on("$stateChangeSuccess",function(){qmService.navBar.setOfflineConnectionErrorShowing(!1),qmLog.context=$state.current.name,"undefined"!=typeof analytics&&analytics.trackView($state.current.name),$scope.closeMenu()}),$scope.showMaterialAlert=function(title,textContent,ev){qmService.showMaterialAlert(title,textContent,ev)},$scope.copyLinkText="Copy Shareable Link to Clipboard",$scope.copyToClipboard=function(text,name){name=name||text,$scope.copyLinkText="Copied!",clipboard.copyText(text),qmService.showInfoToast("Copied "+name+" to clipboard!")},$scope.sendEmailAfterVerification=function(emailType){qmService.sendEmailAfterVerification(emailType)},$scope.updateEmailAndExecuteCallback=function(callback){qmService.updateEmailAndExecuteCallback(callback)},$scope.goToStudyPage=function(correlationObject){qmService.goToStudyPageViaCorrelationObject(correlationObject)},$scope.goToStudyPageWithVariableNames=function(causeVariableName,effectVariableName){qmLogService.debug("Clicked go goToStudyPageWithVariableNames for "+causeVariableName+" and "+effectVariableName,null),qmService.goToStudyPage(causeVariableName,effectVariableName)},$scope.showGeneralVariableSearchDialog=function(ev){var dialogParameters={title:"Select Variable",helpText:"Search for a variable to add a measurement, reminder, view history, or see relationships",placeholder:"Search for a variable",buttonText:"Select Variable",requestParams:{includePublic:!0}};qmService.showVariableSearchDialog(dialogParameters,function(variable){$scope.variableObject=variable,qmLogService.debug("Selected variable: "+variable.name),qmService.actionSheets.getVariableObjectActionSheet(variable.name,variable)()},null,ev)},$scope.switchToPatient=qmService.switchToPatient,$scope.trustAsHtml=function(string){return $sce.trustAsHtml(string)}}]),angular.module("starter").controller("RemindersInboxCtrl",["$scope","$state","$stateParams","$rootScope","$filter","$ionicPlatform","$ionicActionSheet","$timeout","qmService","qmLogService","$ionicLoading","$mdToast",function($scope,$state,$stateParams,$rootScope,$filter,$ionicPlatform,$ionicActionSheet,$timeout,qmService,qmLogService,$ionicLoading,$mdToast){function autoRefresh(){$timeout(function(){-1!==$state.current.name.toLowerCase().indexOf("inbox")&&($scope.refreshTrackingReminderNotifications(),autoRefresh())},18e5)}function refreshIfRunningOutOfNotifications(){$scope.state.numberOfDisplayedNotifications<2&&(qm.notifications.getNumberInGlobalsOrLocalStorage(getVariableCategoryName())?getTrackingReminderNotifications():$scope.refreshTrackingReminderNotifications())}function getWeekdayCharts(){$scope.state.variableObject&&$scope.state.variableObject.charts||qmService.getVariableWithCharts(qm.getPrimaryOutcomeVariable().name,!1,function(variableObject){$scope.state.variableObject=variableObject})}function getFavorites(){$scope.favoritesArray||qmService.storage.getFavorites(getVariableCategoryName()).then(function(favorites){$scope.favoritesArray=favorites})}function trackAll(trackingReminderNotification,modifiedReminderValue,ev){qm.notifications.deleteByVariableName(trackingReminderNotification.variableName),$scope.track(trackingReminderNotification,modifiedReminderValue,ev,!0),qmService.logEventToGA(qm.analytics.eventCategories.inbox,"trackAll"),getTrackingReminderNotifications()}function preventDragAfterAlert(ev){ev.preventDefault(),ev.stopPropagation(),ev.gesture.stopPropagation(),ev.gesture.preventDefault(),ev.gesture.stopDetect()}function shouldWeShowZeroButton(trackingReminderNotification){return"defaultValue"===trackingReminderNotification.inputType||"value"===trackingReminderNotification.inputType&&null!==trackingReminderNotification.defaultValue}function skipAllForVariable(trackingReminderNotification){trackingReminderNotification.hide=!0,qmLogService.debug("Skipping all notifications for trackingReminder",null,trackingReminderNotification),qmService.showInfoToast("Skipping all past notifications for "+trackingReminderNotification.variableName);var params={trackingReminderId:trackingReminderNotification.trackingReminderId};return qmService.skipAllTrackingReminderNotificationsDeferred(params).then(function(){hideInboxLoader(),$scope.refreshTrackingReminderNotifications()},function(error){hideInboxLoader(),qmLogService.error(null,error),qmLogService.error(null,error),qmService.showMaterialAlert("Failed to skip! ","Please let me know by pressing the help button.  Thanks!")}),!0}function getDiscoveries(){$scope.state.correlationObjects||qmService.getCorrelationsDeferred({limit:10,fallbackToAggregateCorrelations:!0}).then(function(data){$scope.state.correlationsExplanation=data.explanation,$scope.state.correlationObjects=data.correlations})}function getVariableCategoryName(){return $stateParams.variableCategoryName?$stateParams.variableCategoryName:qm.urlHelper.getParam("variableCategoryName")?qm.urlHelper.getParam("variableCategoryName"):void 0}$rootScope.appSettings||qmService.rootScope.setProperty("appSettings",window.qm.getAppSettings()),$scope.controller_name="RemindersInboxCtrl",qmLogService.debug("Loading "+$scope.controller_name),qmService.navBar.setFilterBarSearchIcon(!1),$scope.state={showMeasurementBox:!1,selectedReminder:!1,reminderDefaultValue:"",selected1to5Value:!1,allReminders:[],trackingReminderNotifications:[],filteredReminderNotifications:[],measurementDate:new Date,slots:{epochTime:(new Date).getTime()/1e3,format:12,step:1,closeLabel:"Cancel"},variable:{},isDisabled:!1,loading:!0,lastButtonPressTimeStamp:0,lastClientX:0,lastClientY:0,numberOfDisplayedNotifications:0,favoritesTitle:"Your Favorites"},$scope.$on("$ionicView.beforeEnter",function(e){qmLogService.info("RemindersInboxCtrl beforeEnter: "+window.location.href),$scope.loading=!0,qmService.sendToLoginIfNecessaryAndComeBack()||($rootScope.hideBackButton=!0,$rootScope.hideHomeButton=!0,!0!==$stateParams.hideNavigationMenu&&qmService.navBar.showNavigationMenuIfHideUrlParamNotSet())}),$scope.$on("$ionicView.enter",function(e){qmLogService.info("RemindersInboxCtrl enter: "+window.location.href),$scope.defaultHelpCards=qmService.setupHelpCards(),getTrackingReminderNotifications(),qmService.rootScope.setProperty("bloodPressure",{systolicValue:null,diastolicValue:null,displayTotal:"Blood Pressure"}),$scope.stateParams=$stateParams,qmService.rootScope.setShowActionSheetMenu(function(){var hideSheet=$ionicActionSheet.show({buttons:[qmService.actionSheets.actionSheetButtons.historyAll,qmService.actionSheets.actionSheetButtons.reminderAdd,qmService.actionSheets.actionSheetButtons.measurementAddSearch,qmService.actionSheets.actionSheetButtons.charts,qmService.actionSheets.actionSheetButtons.settings,qmService.actionSheets.actionSheetButtons.help,qmService.actionSheets.actionSheetButtons.refresh],destructiveText:'<i class="icon ion-trash-a"></i>Clear All Notifications',cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED",null)},buttonClicked:function(index){return qmLogService.debug("BUTTON CLICKED",null,index),0===index&&qmService.goToState("app.historyAll",{variableCategoryName:getVariableCategoryName()}),1===index&&qmService.goToState("app.reminderSearch",{variableCategoryName:getVariableCategoryName()}),2===index&&qmService.goToState("app.measurementAddSearch",{variableCategoryName:getVariableCategoryName()}),3===index&&qmService.goToState("app.chartSearch",{variableCategoryName:getVariableCategoryName()}),4===index&&qmService.goToState("app.settings"),5===index&&qmService.goToState("app.help"),6===index&&$scope.refreshTrackingReminderNotifications(3),!0},destructiveButtonClicked:function(){return qmService.showInfoToast("Skipping all reminder notifications..."),qmService.skipAllTrackingReminderNotificationsDeferred().then(function(){$scope.refreshTrackingReminderNotifications()},function(error){qmLogService.error(null,error),qmService.showMaterialAlert("Failed to skip! ","Please let me know by pressing the help button.  Thanks!")}),!0}});$timeout(function(){hideSheet()},2e4)}),navigator&&navigator.splashscreen&&(qmLogService.debug("ReminderInbox: Hiding splash screen because app is ready",null),navigator.splashscreen.hide())}),$scope.$on("$ionicView.afterEnter",function(){qmLogService.info("RemindersInboxCtrl afterEnter: "+window.location.href),setPageTitle(),qm.storage.getItem(qm.items.trackingReminderNotifications)&&qm.storage.getItem(qm.items.trackingReminderNotifications).length||$scope.refreshTrackingReminderNotifications(),$rootScope.platform.isWeb&&qm.webNotifications.registerServiceWorker(),autoRefresh()}),$scope.$on("$ionicView.afterLeave",function(){qmLogService.debug("RemindersInboxCtrl afterLeave",null),$rootScope.hideHomeButton=!1,$rootScope.hideBackButton=!1});var setPageTitle=function(){$stateParams.today?"Treatments"===getVariableCategoryName()?($scope.state.title="Today's Scheduled Meds",$scope.state.favoritesTitle="As-Needed Meds"):getVariableCategoryName()?$scope.state.title="Today's Scheduled "+getVariableCategoryName():$scope.state.title="Today's Reminder Notifications":"Treatments"===getVariableCategoryName()?($scope.state.title="Overdue Meds",$scope.state.favoritesTitle="As-Needed Meds"):getVariableCategoryName()?$scope.state.title=$filter("wordAliases")(getVariableCategoryName())+" "+$filter("wordAliases")("Reminder Inbox"):$scope.state.title="Inbox"},isGhostClick=function($event){return!!$rootScope.platform.isMobile&&($event&&$scope.state.lastButtonPressTimeStamp>$event.timeStamp-3e3&&$scope.state.lastClientX===$event.clientX&&$scope.state.lastClientY===$event.clientY?(qmLogService.debug("This event is probably a ghost click so not registering.",null,$event),!0):$event?(qmLogService.debug("This Track event is not a ghost click so registering.",null,$event),$scope.state.lastButtonPressTimeStamp=$event.timeStamp,$scope.state.lastClientX=$event.clientX,$scope.state.lastClientY=$event.clientY,!1):(qmLogService.error(null,"No event provided to isGhostClick!"),!1))},setLastAction=function(modifiedValue,unitAbbreviatedName){var lastAction="Recorded "+modifiedValue+" "+unitAbbreviatedName;$scope.lastAction=qmService.formatValueUnitDisplayText(lastAction)};$scope.trackByValueField=function(trackingReminderNotification,$event){if(!isGhostClick($event)){if(!qmService.valueIsValid(trackingReminderNotification,trackingReminderNotification.modifiedValue))return!1;trackingReminderNotification.modifiedValue=trackingReminderNotification.total,setLastAction(trackingReminderNotification.modifiedValue,trackingReminderNotification.unitAbbreviatedName),notificationAction(trackingReminderNotification),qmService.trackTrackingReminderNotificationDeferred(trackingReminderNotification),refreshIfRunningOutOfNotifications()}};var getFallbackInboxContent=function(){$scope.state.numberOfDisplayedNotifications||(getVariableCategoryName()&&(qmLogService.info("Falling back to getTrackingReminderNotificationsFromApi request for category "+getVariableCategoryName()),qmService.refreshTrackingReminderNotifications(3,{variableCategoryName:getVariableCategoryName(),onlyPast:!0},function(response){qmLogService.info("getTrackingReminderNotificationsFromApi response for "+getVariableCategoryName()+": "+JSON.stringify(response)),$scope.filteredTrackingReminderNotifications=qmService.groupTrackingReminderNotificationsByDateRange(response.data)})),getFavorites(),getWeekdayCharts(),getDiscoveries())},closeWindowIfNecessary=function(){"app.remindersInboxCompact"!==$state.current.name||$scope.state.numberOfDisplayedNotifications||($scope.refreshTrackingReminderNotifications(),window.close())},enlargeChromePopupIfNecessary=function(){if(!$rootScope.alreadyEnlargedWindow){var largeInboxWindowParams={top:screen.height-800,left:screen.width-455,width:450,height:750};"app.remindersInboxCompact"===$state.current.name&&(qmService.goToState("app.remindersInbox"),chrome.windows.getCurrent({},function(chromeWindow){$rootScope.alreadyEnlargedWindow=!0;var vid=chromeWindow.id;chrome.windows.update(vid,largeInboxWindowParams)}))}},notificationAction=function(trackingReminderNotification){return qmLog.info("Clicked "+$scope.lastAction+" for "+trackingReminderNotification.variableName),trackingReminderNotification.hide=!0,qmService.numberOfPendingNotifications--,$scope.state.numberOfDisplayedNotifications--,"app.remindersInboxCompact"===$state.current.name&&($scope.state.numberOfDisplayedNotifications||window.close(),$scope.trackingReminderNotifications.shift()),closeWindowIfNecessary(),getFallbackInboxContent(),$scope.showUndoToast($scope.lastAction),trackingReminderNotification.trackingReminderNotificationId=trackingReminderNotification.id,trackingReminderNotification};$scope.track=function(trackingReminderNotification,modifiedReminderValue,$event,trackAll){if(isGhostClick($event))return!1;null===modifiedReminderValue&&(modifiedReminderValue=trackingReminderNotification.defaultValue),setLastAction(modifiedReminderValue,trackingReminderNotification.unitAbbreviatedName);var body=notificationAction(trackingReminderNotification);body.modifiedValue=modifiedReminderValue,qmService.trackTrackingReminderNotificationDeferred(body,trackAll),refreshIfRunningOutOfNotifications()},$scope.trackAllWithConfirmation=function(trackingReminderNotification,modifiedReminderValue,ev){preventDragAfterAlert(ev);var title="Record "+qmService.formatValueUnitDisplayText(modifiedReminderValue+" "+trackingReminderNotification.unitAbbreviatedName)+" for all?",textContent="Do you want to record "+qmService.formatValueUnitDisplayText(modifiedReminderValue+" "+trackingReminderNotification.unitAbbreviatedName)+" for all remaining past "+trackingReminderNotification.variableName+" reminder notifications?";qmService.showMaterialConfirmationDialog(title,textContent,function(ev){trackAll(trackingReminderNotification,modifiedReminderValue,ev)},function(){},ev)},$scope.skip=function(trackingReminderNotification,$event){if(!isGhostClick($event)){$scope.lastAction="Skipped";var params=notificationAction(trackingReminderNotification);qmService.skipTrackingReminderNotificationDeferred(params),qmService.logEventToGA(qm.analytics.eventCategories.inbox,"skip"),refreshIfRunningOutOfNotifications()}},$scope.snooze=function(trackingReminderNotification,$event){if(!isGhostClick($event)){$scope.lastAction="Snoozed";var params=notificationAction(trackingReminderNotification);qmService.snoozeTrackingReminderNotificationDeferred(params),qmService.logEventToGA(qm.analytics.eventCategories.inbox,"snooze"),refreshIfRunningOutOfNotifications()}};var getFilteredTrackingReminderNotificationsFromLocalStorage=function(){for(var trackingReminderNotifications=qm.storage.getTrackingReminderNotifications(getVariableCategoryName(),20),i=0;i<trackingReminderNotifications.length;i++)trackingReminderNotifications[i].showZeroButton=shouldWeShowZeroButton(trackingReminderNotifications[i]);qmLogService.debug("Just got "+trackingReminderNotifications.length+" trackingReminderNotifications from local storage"),$scope.state.numberOfDisplayedNotifications=trackingReminderNotifications.length,hideInboxLoader(),"app.remindersInboxCompact"===$state.current.name?$scope.trackingReminderNotifications=trackingReminderNotifications:($scope.filteredTrackingReminderNotifications=qmService.groupTrackingReminderNotificationsByDateRange(trackingReminderNotifications),qmLogService.debug("Just added "+trackingReminderNotifications.length+" to $scope.filteredTrackingReminderNotifications"),$scope.state.numberOfDisplayedNotifications||getFallbackInboxContent())},hideInboxLoader=function(){qmService.hideLoader(),$scope.$broadcast("scroll.refreshComplete"),$scope.loading=!1},getFilteredTodayTrackingReminderNotifications=function(){qmService.getTodayTrackingReminderNotificationsDeferred(getVariableCategoryName()).then(function(trackingReminderNotifications){$scope.state.numberOfDisplayedNotifications=trackingReminderNotifications.length,$scope.filteredTrackingReminderNotifications=qmService.groupTrackingReminderNotificationsByDateRange(trackingReminderNotifications),getFallbackInboxContent(),hideInboxLoader()},function(error){getFallbackInboxContent(),qmLogService.error(null,error),hideInboxLoader(),qmLogService.error(null,"failed to get reminder notifications!")})};$rootScope.$on("broadcastGetTrackingReminderNotifications",function(){qmLogService.info("qm.storage.getTrackingReminderNotifications broadcast received.."),$stateParams.today||getFilteredTrackingReminderNotificationsFromLocalStorage()});var getTrackingReminderNotifications=function(){qmLogService.info("RemindersInboxCtrl called getTrackingReminderNotifications: "+window.location.href),$stateParams.today?getFilteredTodayTrackingReminderNotifications():getFilteredTrackingReminderNotificationsFromLocalStorage()},showLoader=function(){$scope.loading=!0,$timeout(function(){$scope.loading&&($scope.loading=!1)},1e4)};$scope.refreshTrackingReminderNotifications=function(minimumSecondsBetweenRequests){showLoader(),qmService.refreshTrackingReminderNotifications(minimumSecondsBetweenRequests).then(function(){hideInboxLoader(),getTrackingReminderNotifications(),qm.notifications.getNumberInGlobalsOrLocalStorage(getVariableCategoryName())||getFallbackInboxContent()},function(error){qm.notifications.getNumberInGlobalsOrLocalStorage(getVariableCategoryName())||getFallbackInboxContent(),qmLog.info("$scope.refreshTrackingReminderNotifications: "+error),hideInboxLoader()})},$scope.editMeasurement=function(trackingReminderNotification){enlargeChromePopupIfNecessary(),trackingReminderNotification.hide=!0,qmService.numberOfPendingNotifications--,$scope.state.numberOfDisplayedNotifications--,qm.notifications.deleteById(trackingReminderNotification.id),qmService.goToState("app.measurementAdd",{reminderNotification:trackingReminderNotification,fromUrl:window.location.href})},$scope.editReminderSettingsByNotification=function(trackingReminderNotification){enlargeChromePopupIfNecessary(),trackingReminderNotification.hide=!0,qmService.numberOfPendingNotifications--,$scope.state.numberOfDisplayedNotifications--;var trackingReminder=trackingReminderNotification;trackingReminder.id=trackingReminderNotification.trackingReminderId,qmService.goToState("app.reminderAdd",{reminder:trackingReminder,fromUrl:window.location.href,fromState:$state.current.name})},$scope.showActionSheetForNotification=function(trackingReminderNotification,$event,dividerIndex,trackingReminderNotificationIndex){if(!isGhostClick($event)){enlargeChromePopupIfNecessary(),$scope.state.trackingReminderNotification=trackingReminderNotification,$scope.state.trackingReminder=trackingReminderNotification,$scope.state.trackingReminder.id=trackingReminderNotification.trackingReminderId,$scope.state.variableObject=trackingReminderNotification,$scope.state.variableObject.id=trackingReminderNotification.variableId,$scope.state.variableObject.name=trackingReminderNotification.variableName;for(var buttons=[{text:"Actions for "+trackingReminderNotification.variableName},{text:'<i class="icon ion-android-notifications-none"></i>Edit Reminder'},qmService.actionSheets.actionSheetButtons.charts,qmService.actionSheets.actionSheetButtons.historyAllVariable],i=0;i<trackingReminderNotification.trackAllActions.length;i++)buttons.push({text:'<i class="icon ion-android-done-all"></i>'+trackingReminderNotification.trackAllActions[i].title});buttons.push({text:'<i class="icon ion-trash-a"></i>Skip All '}),buttons.push(qmService.actionSheets.actionSheetButtons.variableSettings);$ionicActionSheet.show({buttons:buttons,cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED",null)},buttonClicked:function(index){qmLogService.debug("BUTTON CLICKED",null,index),0===index&&qmLogService.debug("clicked variable name",null),1===index&&$scope.editReminderSettingsByNotification($scope.state.trackingReminderNotification,dividerIndex,trackingReminderNotificationIndex),2===index&&qmService.goToState("app.charts",{variableObject:$scope.state.variableObject,variableName:$scope.state.variableObject.name}),3===index&&qmService.goToState("app.historyAllVariable",{variableObject:$scope.state.variableObject,variableName:$scope.state.variableObject.name});for(var buttonIndex=4,i=0;i<trackingReminderNotification.trackAllActions.length;i++)index===buttonIndex&&trackAll(trackingReminderNotification,trackingReminderNotification.trackAllActions[i].modifiedValue),buttonIndex++;return index===buttonIndex&&skipAllForVariable(trackingReminderNotification),buttonIndex++,index===buttonIndex&&qmService.goToVariableSettingsByName($scope.state.trackingReminderNotification.variableName),!0},destructiveButtonClicked:function(){return skipAllForVariable(trackingReminderNotification),!0}})}},$scope.hideHelpCard=function(helpCard,emailType){emailType&&$scope.sendEmailAfterVerification(emailType),helpCard.hide=!0,$scope.defaultHelpCards=$scope.defaultHelpCards.filter(function(obj){return obj.id!==helpCard.id}),qmService.storage.deleteById("defaultHelpCards",helpCard.id)},$scope.showUndoToast=function(lastAction){qmService.showToastWithButton(lastAction,"UNDO",function(){qm.notifications.undo(),getTrackingReminderNotifications()})}}]),angular.module("starter").controller("FavoritesCtrl",["$scope","$state","$ionicActionSheet","$timeout","qmService","qmLogService","$rootScope","$stateParams",function($scope,$state,$ionicActionSheet,$timeout,qmService,qmLogService,$rootScope,$stateParams){$scope.controller_name="FavoritesCtrl",qmLogService.debug("Loading "+$scope.controller_name,null),$scope.state={selected1to5Value:!1,loading:!0,trackingReminder:null,lastSent:new Date,title:"Favorites",favorites:[],addButtonText:"Add a Favorite Variable",addButtonIcon:"ion-ios-star",helpText:"Favorites are variables that you might want to track on a frequent but irregular basis.  Examples: As-needed medications, cups of coffee, or glasses of water",moreHelpText:"Tip: I recommend using reminders instead of favorites whenever possible because they allow you to record regular 0 values as well. Knowing when you didn't take a medication or eat something helps our analytics engine to figure out how these things might be affecting you."},qmService.navBar.setFilterBarSearchIcon(!1),$scope.$on("$ionicView.enter",function(e){qmLogService.debug("Entering state "+$state.current.name,null),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),qmService.rootScope.setProperty("bloodPressure",{systolicValue:null,diastolicValue:null,displayTotal:"Blood Pressure"}),$stateParams.variableCategoryName&&"Anything"!==$stateParams.variableCategoryName?($scope.variableCategoryName=$stateParams.variableCategoryName,$scope.state.addButtonText="Add favorite "+$stateParams.variableCategoryName.toLowerCase(),$scope.state.title="Favorite "+$stateParams.variableCategoryName,$scope.state.moreHelpText=null):$scope.variableCategoryName=null,"Treatments"===$stateParams.variableCategoryName&&($scope.state.addButtonText="Add an as-needed medication",$scope.state.helpText="Quickly record doses of medications taken as needed just by tapping.  Tap twice for two doses, etc.",$scope.state.addButtonIcon="ion-ios-medkit-outline",$scope.state.title="As-Needed Meds"),$stateParams.presetVariables?($scope.favoritesArray=$stateParams.presetVariables,$scope.$broadcast("scroll.refreshComplete")):(getFavoritesFromLocalStorage(),$scope.refreshFavorites())});var getFavoritesFromLocalStorage=function(){qmService.storage.getFavorites($stateParams.variableCategoryName).then(function(favorites){$scope.favoritesArray=favorites})};$scope.favoriteAddButtonClick=function(){qmService.goToState("app.favoriteSearch")},$scope.refreshFavorites=function(){qmLogService.debug("ReminderMange init: calling refreshTrackingRemindersAndScheduleAlarms",null),qmService.showInfoToast("Syncing..."),qmService.syncTrackingReminders(!0).then(function(){getFavoritesFromLocalStorage(),$scope.$broadcast("scroll.refreshComplete")})}}]),angular.module("starter").controller("IntroCtrl",["$scope","$state","$ionicSlideBoxDelegate","$ionicLoading","$rootScope","$stateParams","qmService","qmLogService","appSettingsResponse",function($scope,$state,$ionicSlideBoxDelegate,$ionicLoading,$rootScope,$stateParams,qmService,qmLogService,appSettingsResponse){window.debugMode&&qmLogService.debug("IntroCtrl first starting in state: "+$state.current.name,null),qmService.initializeApplication(appSettingsResponse),qmService.navBar.setFilterBarSearchIcon(!1),$scope.myIntro={ready:!1,backgroundColor:"white",textColor:"black",slideIndex:0,startApp:function(){if(-1!==$state.current.name.indexOf("intro")){if(qmService.sendToLogin())return;qm.platform.isDesignMode()?qmService.goToState(qmStates.configuration):qmService.goToState(qmStates.onboarding)}else console.error("Why are we calling $scope.myIntro.startApp from state other than into?")},next:function(index){index===$rootScope.appSettings.appDesign.intro.active.length-1?$scope.myIntro.startApp():$ionicSlideBoxDelegate.next()},previous:function(){$ionicSlideBoxDelegate.previous()},slideChanged:function(index){$scope.myIntro.slideIndex=index,$rootScope.appSettings.appDesign.intro.active[index].backgroundColor&&($scope.myIntro.backgroundColor=$rootScope.appSettings.appDesign.intro.active[index].backgroundColor),$rootScope.appSettings.appDesign.intro.active[index].textColor&&($scope.myIntro.textColor=$rootScope.appSettings.appDesign.intro.active[index].textColor)}},$scope.$on("$ionicView.beforeEnter",function(e){$rootScope.hideNavigationMenu=!0,$rootScope.appSettings||qmService.rootScope.setProperty("appSettings",window.qm.getAppSettings()),$rootScope.appSettings.appDesign.intro.active[0].backgroundColor&&($scope.myIntro.backgroundColor=$rootScope.appSettings.appDesign.intro.active[0].backgroundColor),$rootScope.appSettings.appDesign.intro.active[0].textColor&&($scope.myIntro.textColor=$rootScope.appSettings.appDesign.intro.active[0].textColor),qm.auth.getAccessTokenFromCurrentUrl()&&!$stateParams.doNotRedirect?(qmLogService.debug("introCtrl beforeEnter: Skipping to default state because we have access token in url: "+qm.getAppSettings().appDesign.defaultState,null),qmService.goToDefaultState()):$scope.myIntro.ready=!0,qmService.storage.setItem("introSeen",!0)}),$scope.$on("$ionicView.afterEnter",function(){qmService.hideLoader(),qmService.navBar.hideNavigationMenu(),navigator&&navigator.splashscreen&&(qmLogService.debug("introCtrl.afterEnter: Hiding splash screen because app is ready",null),navigator.splashscreen.hide()),qmService.setupOnboardingPages()})}]),angular.module("starter").controller("VariableSettingsCtrl",["$scope","$state","$rootScope","$timeout","$q","$mdDialog","$ionicLoading","$stateParams","$ionicHistory","$ionicActionSheet","qmService","qmLogService",function($scope,$state,$rootScope,$timeout,$q,$mdDialog,$ionicLoading,$stateParams,$ionicHistory,$ionicActionSheet,qmService,qmLogService){function getVariableParams(){var params={includeTags:!0};return params=qmService.stateHelper.addVariableNameOrIdToRequestParams(params,$scope,$stateParams)}function getUserVariableWithTags(){$scope.state.variableObject||qmService.showBlackRingLoader();var params=getVariableParams();params?($scope.state.loading=!0,qm.userVariables.getFromApi(params,function(userVariables){qmService.hideLoader(),$scope.state.loading=!1,userVariables&&userVariables[0]&&setVariableObject(userVariables[0])})):$scope.goBack()}function setVariableObject(variableObject){$scope.state.variableObject=$scope.state.variableObject=variableObject,$scope.variableName||($scope.variableName=variableObject.name),setShowActionSheetMenu(variableObject)}function setShowActionSheetMenu(variableObject){qmService.rootScope.setShowActionSheetMenu(function(){qmLogService.debug("variableSettingsCtrl.showActionSheetMenu: Show the action sheet!  $scope.state.variableObject: ",null,variableObject);var hideSheet=$ionicActionSheet.show({buttons:[qmService.actionSheets.actionSheetButtons.measurementAddVariable,qmService.actionSheets.actionSheetButtons.reminderAdd,qmService.actionSheets.actionSheetButtons.chartSearch,qmService.actionSheets.actionSheetButtons.historyAllVariable,{text:'<i class="icon ion-pricetag"></i>Tag '+qmService.getTruncatedVariableName(variableObject.name)},{text:'<i class="icon ion-pricetag"></i>Tag Another Variable '}],destructiveText:'<i class="icon ion-trash-a"></i>Delete All',cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED",null)},buttonClicked:function(index){return 0===index&&qmService.goToState("app.measurementAddVariable",{variableObject:variableObject,variableName:variableObject.name}),1===index&&qmService.goToState("app.reminderAdd",{variableObject:variableObject,variableName:variableObject.name}),2===index&&qmService.goToState("app.charts",{variableObject:variableObject,variableName:variableObject.name}),3===index&&qmService.goToState("app.historyAllVariable",{variableObject:variableObject,variableName:variableObject.name}),4===index&&qmService.goToState("app.tagSearch",{fromState:$state.current.name,userTaggedVariableObject:variableObject}),5===index&&$scope.tagAnotherVariable(variableObject),!0},destructiveButtonClicked:function(){return qmService.showDeleteAllMeasurementsForVariablePopup(variableObject.name),!0}});qmLogService.debug("Setting hideSheet timeout",null),$timeout(function(){hideSheet()},2e4)})}function getConversionFactor(conversionFactor){return"/5"===$scope.state.variableObject.unit.abbreviatedName?1:conversionFactor}function openTagVariableSearchDialog($event,requestParams,dialogParameters){requestParams.includePublic=!0,dialogParameters.requestParams=requestParams,qmService.showVariableSearchDialog(dialogParameters,function(selectedVariable){var userTagData;getConversionFactor(dialogParameters.conversionFactor)?(userTagData={userTagVariableId:selectedVariable.id,userTaggedVariableId:$scope.state.variableObject.id,conversionFactor:getConversionFactor(dialogParameters.conversionFactor)},qmService.showBlackRingLoader(),qmService.postUserTagDeferred(userTagData).then(function(response){$scope.state.variableObject=response.data.userTaggedVariable,qmService.hideLoader()})):goToAddTagState({userTaggedVariableObject:$scope.state.variableObject,userTagVariableObject:selectedVariable})},null,$event)}function goToAddTagState(stateParams){stateParams.fromState=$state.current.name,stateParams.fromStateParams={variableObject:$scope.state.variableObject},qmService.variableIdToGetOnReturnToSettings=$scope.state.variableObject.id,qmService.goToState(qmStates.tagAdd,stateParams)}function openTageeVariableSearchDialog($event,requestParams,dialogParameters){requestParams.includePublic=!0,dialogParameters.requestParams=requestParams,qmService.showVariableSearchDialog(dialogParameters,function(selectedVariable){var userTagData;getConversionFactor(dialogParameters.conversionFactor)?(userTagData={userTaggedVariableId:selectedVariable.id,userTagVariableId:$scope.state.variableObject.id,conversionFactor:getConversionFactor(dialogParameters.conversionFactor)},qmService.showBlackRingLoader(),qmService.postUserTagDeferred(userTagData).then(function(response){$scope.state.variableObject=response.data.userTagVariable,qmService.hideLoader()})):goToAddTagState({userTagVariableObject:$scope.state.variableObject,userTaggedVariableObject:selectedVariable})},null,$event)}$scope.controller_name="VariableSettingsCtrl",qmService.navBar.setFilterBarSearchIcon(!1),$scope.state={variableObject:null},$scope.$on("$ionicView.beforeEnter",function(e){qmLogService.debug("Entering state "+$state.current.name,null),qmService.sendToLoginIfNecessaryAndComeBack(),qmService.navBar.showNavigationMenu(),qmService.variableIdToGetOnReturnToSettings?(getUserVariableWithTags(qmService.variableIdToGetOnReturnToSettings),qm.userVariables.getFromLocalStorageOrApi({id:qmLogService.variableIdToGetOnReturnToSettings},function(variables){setVariableObject(variables[0])}),delete qmService.variableIdToGetOnReturnToSettings):$stateParams.variableObject?(setVariableObject($stateParams.variableObject),getUserVariableWithTags()):getUserVariableWithTags()}),$scope.$on("$ionicView.afterEnter",function(){qm.loaders.robots()});var dialogParameters={buttonText:"Select Variable",excludeLocal:!0,minLength:2};$scope.state.openParentVariableSearchDialog=function(e){dialogParameters.conversionFactor=1,dialogParameters.title="Add a parent category",dialogParameters.helpText="Search for a parent category that you'd like to tag "+$scope.state.variableObject.name.toUpperCase()+" with.  Then when your parent category variable is analyzed, measurements from "+$scope.state.variableObject.name.toUpperCase()+" will be included.",dialogParameters.placeholder="Search for a parent category...",openTagVariableSearchDialog(e,{childUserTagVariableId:$scope.state.variableObject.id},dialogParameters)},$scope.state.openIngredientVariableSearchDialog=function(e){dialogParameters.conversionFactor=1,dialogParameters.title="Add an ingredient",dialogParameters.helpText="Search for an ingredient that you'd like to tag "+$scope.state.variableObject.name.toUpperCase()+" with.  Then when your ingredient variable is analyzed, converted measurements from "+$scope.state.variableObject.name.toUpperCase()+" will be included.",dialogParameters.placeholder="Search for an ingredient...",openTagVariableSearchDialog(e,{ingredientOfUserTagVariableId:$scope.state.variableObject.id},dialogParameters)},$scope.state.openChildVariableSearchDialog=function(e){dialogParameters.title="Add a child sub-type",dialogParameters.helpText="Search for a child sub-class of "+$scope.state.variableObject.name.toUpperCase()+".  Then when "+$scope.state.variableObject.name.toUpperCase()+" is analyzed, measurements from your child sub-type variable will also be included.",dialogParameters.placeholder="Search for a variable to tag...",openTageeVariableSearchDialog(e,{parentUserTagVariableId:$scope.state.variableObject.id},dialogParameters)},$scope.state.openIngredientOfVariableSearchDialog=function(e){dialogParameters.title="Add a parent",dialogParameters.helpText="Search for a variable that contains "+$scope.state.variableObject.name.toUpperCase()+".  Then when "+$scope.state.variableObject.name.toUpperCase()+" is analyzed, converted measurements from your selected variable will also be included.",dialogParameters.placeholder="Search for variable containing "+$scope.state.variableObject.name,openTageeVariableSearchDialog(e,{ingredientUserTagVariableId:$scope.state.variableObject.id},dialogParameters)},$scope.openJoinVariableSearchDialog=function($event,requestParams){(requestParams=requestParams||{joinVariableId:$scope.state.variableObject.id}).includePublic=!0;var dialogParameters={title:"Join a Duplicate",helpText:"Search for a duplicated or synonymous variable that you'd like to join to "+$scope.state.variableObject.name+". Once joined, its measurements will be included in the analysis of "+$scope.state.variableObject.name+".  You can only join variables that have the same unit "+$scope.state.variableObject.unit.abbreviatedName+".",placeholder:"What variable would you like to join?",buttonText:"Select Variable",requestParams:requestParams,excludeLocal:!0,doNotCreateNewVariables:!0};qmService.showVariableSearchDialog(dialogParameters,function(selectedVariable){var variableData={parentVariableId:$scope.state.variableObject.id,joinedVariableId:selectedVariable.id,conversionFactor:1};qmService.postVariableJoinDeferred(variableData).then(function(currentVariable){qmService.hideLoader(),$scope.state.variableObject=currentVariable},function(error){qmService.hideLoader(),qmLogService.error(null,error)}),$mdDialog.hide()},null,$event)};var SelectWikipediaArticleController=function($scope,$state,$rootScope,$stateParams,$filter,qmService,qmLogService,$q,$log,dialogParameters){function loadAll(pages){return pages?pages.map(function(page){return{value:page.title,display:page.title,page:page}}):[]}var self=this;self.items=loadAll(),self.querySearch=function(query){self.notFoundText="No articles matching "+query+" were found.  Please try another wording or contact mike@quantimo.do.";var deferred=$q.defer();return query&&query.length||(query=dialogParameters.variableName),wikipediaFactory.searchArticles({term:query,pithumbsize:"200",exlimit:"max"}).then(function(repsonse){if(repsonse.data.query)deferred.resolve(loadAll(repsonse.data.query.pages)),$scope.causeWikiEntry=repsonse.data.query.pages[0].extract,repsonse.data.query.pages[0].thumbnail&&($scope.causeWikiImage=repsonse.data.query.pages[0].thumbnail.source);else{var error="Wiki not found for "+query;qmLogService.error(null,error),qmLogService.error(null,error)}}).catch(function(error){qmLogService.error(null,error)}),deferred.promise},self.selectedItemChange=function(item){$scope.state.variableObject.wikipediaPage=item.page,$scope.state.variableObject.wikipediaExtract=item.page.extract,self.selectedItem=item,self.buttonText=dialogParameters.buttonText},self.searchTextChange=function(text){qmLogService.debug("Text changed to "+text)},self.title=dialogParameters.title,self.helpText=dialogParameters.helpText,self.placeholder=dialogParameters.placeholder,self.getHelp=function(){if(self.helpText&&!self.showHelp)return self.showHelp=!0;qmService.goToState(window.qmStates.help),$mdDialog.cancel()},self.cancel=function($event){$mdDialog.cancel()},self.finish=function($event,variableName){$mdDialog.hide($scope.variable)}};SelectWikipediaArticleController.$inject=["$scope","$state","$rootScope","$stateParams","$filter","qmService","qmLogService","$q","$log","dialogParameters"],$scope.searchWikipediaArticle=function(ev){$mdDialog.show({controller:SelectWikipediaArticleController,controllerAs:"ctrl",templateUrl:"templates/dialogs/variable-search-dialog.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!1,fullscreen:!1,locals:{dialogParameters:{title:"Select Wikipedia Article",helpText:"Change the search query until you see a relevant article in the search results.  This article will be included in studies involving this variable.",placeholder:"Search for a Wikipedia article...",buttonText:"Select Article",variableName:$scope.state.variableObject.name}}}).then(function(page){$scope.state.variableObject.wikipediaPage=page},function(){qmLogService.debug("User cancelled selection",null)})},$scope.resetVariableToDefaultSettings=function(variableObject){qmService.showBlackRingLoader(),qmService.resetUserVariableDeferred(variableObject.id).then(function(userVariable){$scope.state.variableObject=userVariable})},$scope.saveVariableSettings=function(variableObject){qmService.showBlackRingLoader();var experimentEndTimeString,experimentStartTimeString=null;if(variableObject.experimentStartTimeString)try{experimentStartTimeString=variableObject.experimentStartTimeString.toISOString()}catch(error){qmLogService.error(null,"Could not convert experimentStartTimeString to ISO format",{experimentStartTimeString:variableObject.experimentStartTimeString,errorMessage:error})}if(variableObject.experimentEndTimeString)try{experimentEndTimeString=variableObject.experimentEndTimeString.toISOString()}catch(error){qmLogService.error(null,"Could not convert experimentEndTimeString to ISO format",{experimentEndTimeString:variableObject.experimentEndTimeString,errorMessage:error})}console.log("debugMode is "+window.debugMode);var body={variableId:variableObject.id,durationOfAction:60*variableObject.durationOfActionInHours*60,fillingValue:variableObject.fillingValue,maximumAllowedValue:variableObject.maximumAllowedValue,minimumAllowedValue:variableObject.minimumAllowedValue,onsetDelay:60*variableObject.onsetDelayInHours*60,combinationOperation:variableObject.combinationOperation,shareUserMeasurements:variableObject.shareUserMeasurements,defaultUnitId:variableObject.userUnitId,userVariableVariableCategoryName:variableObject.variableCategoryName,experimentStartTimeString:experimentStartTimeString,experimentEndTimeString:experimentEndTimeString};qmService.postUserVariableDeferred(body).then(function(userVariable){qmService.hideLoader(),qmService.showInfoToast("Saved "+variableObject.name+" settings"),$scope.goBack({variableObject:userVariable,refresh:!0})},function(error){qmService.hideLoader(),qmLogService.error(error)})},$scope.deleteTaggedVariable=function(taggedVariable){taggedVariable.hide=!0;var userTagData={userTagVariableId:$scope.state.variableObject.id,userTaggedVariableId:taggedVariable.id};qmService.deleteUserTagDeferred(userTagData)},$scope.deleteTagVariable=function(tagVariable){tagVariable.hide=!0;var userTagData={userTaggedVariableId:$scope.state.variableObject.id,userTagVariableId:tagVariable.id};qmService.deleteUserTagDeferred(userTagData)},$scope.deleteJoinedVariable=function(tagVariable){tagVariable.hide=!0;var postBody={currentVariableId:$scope.state.variableObject.id,joinedUserTagVariableId:tagVariable.id};qmService.deleteVariableJoinDeferred(postBody)},$scope.editTag=function(userTagVariable){goToAddTagState({tagConversionFactor:userTagVariable.tagConversionFactor,userTaggedVariableObject:$scope.state.variableObject,userTagVariableObject:userTagVariable})},$scope.editTagged=function(userTaggedVariable){goToAddTagState({tagConversionFactor:userTaggedVariable.tagConversionFactor,userTaggedVariableObject:userTaggedVariable,userTagVariableObject:$scope.state.variableObject})},$scope.refreshUserVariable=function(hideLoader){$scope.state.variableObject&&$scope.state.variableObject.name!==variableName&&($scope.state.variableObject=null),hideLoader||qmService.showBlackRingLoader();var params={includeTags:!0};qm.userVariables.getByName(variableName,params,!0,function(variableObject){$scope.$broadcast("scroll.refreshComplete"),qmService.hideLoader(),$scope.state.variableObject=variableObject,qmService.setupVariableByVariableObject(variableObject)},function(error){$scope.$broadcast("scroll.refreshComplete"),qmService.hideLoader(),qmLogService.error(error)})}}]),angular.module("starter").controller("LoginCtrl",["$scope","$state","$rootScope","$ionicLoading","$injector","$stateParams","$timeout","qmService","qmLogService","$mdDialog",function($scope,$state,$rootScope,$ionicLoading,$injector,$stateParams,$timeout,qmService,qmLogService,$mdDialog){function tryToGetUser(){$rootScope.platform.isChromeExtension&&qmService.showBasicLoader(),qmService.refreshUser().then(function(){qmService.hideLoader(),leaveIfLoggedIn()},function(error){qmService.hideLoader(),leaveIfLoggedIn()})}function LoginModalController($scope,$mdDialog,qmService){$scope.credentials={},$scope.close=function(){$mdDialog.cancel()},$scope.hide=function(){$mdDialog.hide()},$scope.answer=function(credentials){window.devCredentials=credentials,qmService.showBasicLoader(),qmService.refreshUser().then(function(){$mdDialog.hide(),qmService.goToDefaultStateIfNoAfterLoginGoToUrlOrState()})}}if(LoginModalController.$inject=["$scope","$mdDialog","qmService","qmLogService"],$scope.state={loading:!1,alreadyRetried:!1},$scope.controller_name="LoginCtrl",$scope.headline=qm.getAppSettings().headline,qmService.navBar.setFilterBarSearchIcon(!1),$rootScope.platform.isMobile){window&&window.plugins&&window.plugins.googleplus?$scope.showGoogleLoginButton=!0:$rootScope.platform.isMobile&&qmLogService.error("Google login not available on mobile!");var $cordovaFacebook={};qmLog.authDebug("Could not inject $cordovaFacebook",null)}$scope.circlePage={title:null,overlayIcon:!1,color:{backgroundColor:"#3467d6",circleColor:"#5b95f9"},image:{url:"img/robots/robot-waving.svg",height:"120",width:"120",display:"block",left:"10px"},bodyText:"Now let's get you signed in to make sure you never lose your precious data."};var leaveIfLoggedIn=function(){$rootScope.user&&$rootScope.user.accessToken&&(qmLog.authDebug("Already logged in on login page.  goToDefaultStateIfNoAfterLoginGoToUrlOrState..."),qmService.goToDefaultStateIfNoAfterLoginGoToUrlOrState())},loginTimeout=function(){return qmService.showBlackRingLoader(),$scope.circlePage.title="Logging in...",qmLog.authDebug("Setting login timeout...",null),$timeout(function(){qmLog.authDebug("Finished login timeout",null),$rootScope.user||($scope.circlePage.title="Please try logging in again",qmLogService.error("Login failure")),$rootScope.user&&-1!==$state.current.name.indexOf("login")&&qmService.goToDefaultStateIfNoAfterLoginGoToUrlOrState()},4e4)};$scope.$on("$ionicView.beforeEnter",function(e){qmLog.authDebug("beforeEnter in state "+$state.current.name,null),leaveIfLoggedIn(),"MoodiModo"!==$rootScope.appSettings.appDisplayName&&($scope.hideFacebookButton=!0),qm.urlHelper.getParam("loggingIn")||qmService.getAccessTokenFromUrlAndSetLocalStorageFlags()?loginTimeout():(qmLog.authDebug("refreshUser in beforeEnter in state "+$state.current.name+" in case we're on a Chrome extension that we can't redirect to with a token",null),tryToGetUser())}),$scope.$on("$ionicView.enter",function(){qmLog.authDebug($state.current.name+" enter...",null),qmService.navBar.hideNavigationMenu()}),$scope.$on("$ionicView.afterEnter",function(){navigator&&navigator.splashscreen&&(qmLog.authDebug("ReminderInbox: Hiding splash screen because app is ready",null),navigator.splashscreen.hide()),qmService.hideLoader(.5),qm.platform.isDevelopmentMode()&&qmService.getDevCredentials()}),$scope.register=function(){$scope.login(!0)};var oAuthBrowserLogin=function(register){var url=qmService.generateV1OAuthUrl(register);qmLog.authDebug("Going to try logging in by opening new tab at url "+url),qmService.showBlackRingLoader();var ref=window.open(url,"_blank");if(ref){qmLog.authDebug("Opened "+url+" and now broadcasting isLoggedIn message question every second to sibling tabs",null);var interval=setInterval(function(){ref.postMessage("isLoggedIn?",qmService.getRedirectUri())},1e3);window.onMessageReceived=function(event){if(qmLog.authDebug("message received from sibling tab",null,event.url),!1!==interval){if(clearInterval(interval),interval=!1,qmService.getAuthorizationCodeFromEventUrl(event)){var authorizationCode=qmService.getAuthorizationCodeFromEventUrl(event);qmService.fetchAccessTokenAndUserDetails(authorizationCode),ref.close()}qmService.checkLoadStartEventUrlForErrors(ref,event)}},window.addEventListener("message",window.onMessageReceived,!1)}else qmLogService.error("You must first unblock popups, and and refresh the page for this to work!"),alert("You must first unblock popups, and and refresh the page for this to work!")},browserLogin=function(register){qmLog.authDebug("Browser Login",null),qmService.weShouldUseOAuthLogin()?$scope.$root.$$phase?$timeout(function(){oAuthBrowserLogin(register)},0,!1):oAuthBrowserLogin(register):qmService.sendToNonOAuthBrowserLoginUrl(register)};$scope.login=function(register,event){return qm.platform.isDevelopmentMode()&&window.devCredentials?(qmLog.authDebug("$scope.login: has dev credentials"),void qmService.refreshUser()):-1!==window.location.href.indexOf("localhost")?(qmLog.authDebug("$scope.login: on localhost"),void showLoginModal(event)):(window&&window.plugins&&window.plugins.googleplus&&googleLogout(),qm.platform.isChromeExtension()?qmService.chromeExtensionLogin(register):$rootScope.platform.isAndroid||$rootScope.platform.isIOS||$rootScope.platform.isWindows?(qmLog.authDebug("$scope.login: Browser and Chrome Not Detected.  Assuming mobile platform and using qmService.nonNativeMobileLogin",null),loginTimeout(),qmService.nonNativeMobileLogin(register)):(qmService.showBlackRingLoader(),$scope.circlePage.title="Logging in...",qmLog.authDebug("$scope.login: Not windows, android or is so assuming browser.",null),browserLogin(register)),void($rootScope.user&&(qmService.createDefaultReminders(),qmLog.authDebug($scope.controller_name+".login: Got user and going to default state",null),qmService.goToDefaultStateIfNoAfterLoginGoToUrlOrState())))},$scope.retryLogin=function(){qmLog.setAuthDebug(!0),qmLog.error("Clicked retry login!"),$scope.state.alreadyRetried?showLoginModal():($scope.state.alreadyRetried=!0,$scope.circlePage.title="Please try logging in again")},$scope.nativeSocialLogin=function(provider,accessToken){qmLog.authDebug("$scope.nativeSocialLogin: Going to try to qmService.getTokensAndUserViaNativeSocialLogin for "+provider+" provider",null),qmService.getTokensAndUserViaNativeSocialLogin(provider,accessToken).then(function(response){if(qmLog.authDebug("$scope.nativeSocialLogin: Response from qmService.getTokensAndUserViaNativeSocialLogin:"+JSON.stringify(response),null),response.user)qmService.setUserInLocalStorageBugsnagIntercomPush(response.user);else{var JWTToken=response.jwtToken;qmLog.authDebug("nativeSocialLogin: Mobile device detected and provider is "+provider+". Got JWT token "+JWTToken,null);var url=qmService.generateV2OAuthUrl(JWTToken);qmLog.authDebug("nativeSocialLogin: open the auth window via inAppBrowser.",null);var ref=cordova.InAppBrowser.open(url,"_blank","location=no,toolbar=yes,clearcache=no,clearsessioncache=no");qmLog.authDebug("nativeSocialLogin: listen to event at "+url+" when the page changes.",null),ref.addEventListener("loadstart",function(event){if(qmLog.authDebug("nativeSocialLogin: loadstart event is "+JSON.stringify(event),null),qmLog.authDebug("nativeSocialLogin: check if changed url is the same as redirection url.",null),qmService.getAuthorizationCodeFromEventUrl(event)){var authorizationCode=qmService.getAuthorizationCodeFromEventUrl(event);qmLog.authDebug("nativeSocialLogin: Got authorization code: "+authorizationCode+" Closing inAppBrowser.",null),ref.close();qmService.fetchAccessTokenAndUserDetails(authorizationCode,!0)}qmService.checkLoadStartEventUrlForErrors(ref,event)})}},function(error){qmLogService.error("qmService.getTokensAndUserViaNativeSocialLogin error occurred Couldn't generate JWT! Error response: "+JSON.stringify(error))})},$scope.googleLoginDebug=function(){qmService.getTokensAndUserViaNativeGoogleLogin(JSON.parse('{"email":"m@thinkbynumbers.org","idToken":"eyJhbGciOiJSUzI1NiIsImtpZCI6IjAxMjg1OGI1YTZiNDQ3YmY4MDdjNTJkOGJjZGQyOGMwODJmZjc4MjYifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJpYXQiOjE0ODM4MTM4MTcsImV4cCI6MTQ4MzgxNzQxNywiYXVkIjoiMTA1MjY0ODg1NTE5NC5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjExODQ0NDY5MzE4NDgyOTU1NTM2MiIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJhenAiOiIxMDUyNjQ4ODU1MTk0LWVuMzg1amxua25iMzhtYThvbTI5NnBuZWozaTR0amFkLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwiaGQiOiJ0aGlua2J5bnVtYmVycy5vcmciLCJlbWFpbCI6Im1AdGhpbmtieW51bWJlcnMub3JnIiwibmFtZSI6Ik1pa2UgU2lubiIsInBpY3R1cmUiOiJodHRwczovL2xoNi5nb29nbGV1c2VyY29udGVudC5jb20vLUJIcjRoeVVXcVpVL0FBQUFBQUFBQUFJL0FBQUFBQUFFNkw0LzIxRHZnVC1UNVZNL3M5Ni1jL3Bob3RvLmpwZyIsImdpdmVuX25hbWUiOiJNaWtlIiwiZmFtaWx5X25hbWUiOiJTaW5uIiwibG9jYWxlIjoiZW4ifQ.YiHQH3-mBCaFxi9BgXe52S2scgVbMQ_-bMWVYY3d8MJZegQI5rl0IvUr0RmYT1k5bIda1sN0qeRyGkbzBHc7f3uctgpXtzjd02flgl4fNHmRgJkRgK_ttTO6Upx9bRR0ItghS_okM2gjgDWwO5wceTNF1f46vEVFH72GAUHVR9Csh4qs9yjqK66vxOEKN4UqIE9JRSn58dgIW8s6CNlBHiLUChUy1nfd2U0zGQ_tmu90y_76vVw5AYDrHDDPQBJ5Z4K_arzjnVzjhKeHpgOaywS4S1ifrylGkpGt5L2iB9sfdA8tNR5iJcEvEuhzGohnd7HvIWyJJ2-BRHukNYQX4Q","serverAuthCode":"4/3xjhGuxUYJVTVPox8Knyp0xJSzMFteFMvNxdwO5H8jQ","userId":"118444693184829555362","displayName":"Mike Sinn","familyName":"Sinn","givenName":"Mike","imageUrl":"https://lh6.googleusercontent.com/-BHr4hyUWqZU/AAAAAAAAAAI/AAAAAAAE6L4/21DvgT-T5VM/s96-c/photo.jpg"}')).then(function(response){qmLog.authDebug("$scope.nativeSocialLogin: Response from qmService.getTokensAndUserViaNativeSocialLogin:"+JSON.stringify(response),null),qmService.setUserInLocalStorageBugsnagIntercomPush(response.user)},function(errorMessage){qmLogService.error("ERROR: googleLogin could not get userData!  Fallback to qmService.nonNativeMobileLogin registration. Error: "+JSON.stringify(errorMessage));qmService.nonNativeMobileLogin(!0)})},$scope.googleLogin=function(register){$scope.hideGoogleLoginButton=!0;var timeout=loginTimeout();document.addEventListener("deviceready",function(){qmLog.authDebug("Device is ready in googleLogin!"),window.plugins.googleplus.login({scopes:"email https://www.googleapis.com/auth/plus.login",webClientId:"1052648855194.apps.googleusercontent.com",offline:!0},function(userData){$timeout.cancel(timeout),timeout=loginTimeout(),qmLog.authDebug("window.plugins.googleplus.login response:"+JSON.stringify(userData)),qmService.getTokensAndUserViaNativeGoogleLogin(userData).then(function(response){$timeout.cancel(timeout),qmService.hideLoader(),qmLog.authDebug("googleLogin: Response from QM server via getTokensAndUserViaNativeSocialLogin:"+JSON.stringify(response)),qmService.setUserInLocalStorageBugsnagIntercomPush(response.user)},function(errorMessage){qmLog.setAuthDebug(!0),qmService.hideLoader(),qmLog.error("ERROR: googleLogin could not get userData!  Fallback to qmService.nonNativeMobileLogin registration. Error: "+JSON.stringify(errorMessage)),qmService.nonNativeMobileLogin(!0)})},function(errorMessage){qmLog.error("googleLogin error: "+JSON.stringify(errorMessage)),qmLog.setAuthDebug(!0),qmService.alreadyRetriedGoogleLogin?qmService.nonNativeMobileLogin(!0):($scope.googleLogin(register),qmService.alreadyRetriedGoogleLogin=!0),qmService.hideLoader()})},!1)};var googleLogout=function(){qmLog.authDebug("googleLogout"),document.addEventListener("deviceready",function(){window.plugins.googleplus.logout(function(msg){qmLog.authDebug("logged out of google!")},function(fail){qmLog.authDebug("failed to logout",null,fail)}),window.plugins.googleplus.disconnect(function(msg){qmLog.authDebug("disconnect google!")})},!1)};$scope.facebookLogin=function(){qmService.showInfoToast("Logging you in..."),qmLog.authDebug("$scope.facebookLogin about to try $cordovaFacebook.login",null);$scope.hideFacebookButton=!0,qmLog.authDebug("Setting facebookLogin timeout for 30 seconds",null),$timeout(function(){if(!$rootScope.user){qmLogService.error("Could not get user $scope.facebookLogin within 30 seconds! Falling back to non-native registration...");qmService.nonNativeMobileLogin(!0)}},3e4),$cordovaFacebook.login(["public_profile","email","user_friends"]).then(function(response){qmLog.authDebug("facebookLogin_success response->",null,JSON.stringify(response));var accessToken=response.authResponse.accessToken;accessToken||(qmLogService.error("ERROR: facebookLogin could not get accessToken! response: "+JSON.stringify(response)),qmService.showMaterialAlert("Facebook Login Issue","Please try to sign in using on of the other methods below")),$scope.nativeSocialLogin("facebook",accessToken)},function(error){qmLog.error("ERROR: facebookLogin could not get accessToken!  ",JSON.stringify(error),{},"error"),qmLog.authDebug("facebook login error"+JSON.stringify(error))})};var showLoginModal=function(ev){$mdDialog.show({controller:LoginModalController,templateUrl:"templates/modals/login-modal.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!0,fullscreen:$scope.customFullscreen})}}]),angular.module("ngIOS9UIWebViewPatch",["ng"]).config(["$provide",function($provide){"use strict";$provide.decorator("$browser",["$delegate","$window",function($delegate,$window){return function(userAgent){return/(iPhone|iPad|iPod).* OS 9_\d/.test(userAgent)&&!/Version\/9\./.test(userAgent)}($window.navigator.userAgent)?function(browser){function clearPendingLocationUrl(){pendingLocationUrl=null}var pendingLocationUrl=null,originalUrlFn=browser.url;return browser.url=function(){return arguments.length?(pendingLocationUrl=arguments[0],originalUrlFn.apply(browser,arguments)):pendingLocationUrl||originalUrlFn.apply(browser,arguments)},window.addEventListener("popstate",clearPendingLocationUrl,!1),window.addEventListener("hashchange",clearPendingLocationUrl,!1),browser}($delegate):$delegate}])}]),angular.module("starter").controller("WelcomeCtrl",["$scope","$state","$rootScope","qmService","qmLogService","$stateParams",function($scope,$state,$rootScope,qmService,qmLogService,$stateParams){$scope.controller_name="WelcomeCtrl",qmService.navBar.hideNavigationMenu(),$scope.primaryOutcomeVariableDetails=qm.getPrimaryOutcomeVariable(),$scope.reportedVariableValue=!1,qmService.navBar.setFilterBarSearchIcon(!1),qmService.storage.getAsStringWithCallback("primaryOutcomeRatingFrequencyDescription",function(primaryOutcomeRatingFrequencyDescription){primaryOutcomeRatingFrequencyDescription&&($scope.primaryOutcomeRatingFrequencyDescription=primaryOutcomeRatingFrequencyDescription),!primaryOutcomeRatingFrequencyDescription&&$rootScope.platform.isIOS&&($scope.primaryOutcomeRatingFrequencyDescription="day"),primaryOutcomeRatingFrequencyDescription||$rootScope.platform.isIOS||($scope.primaryOutcomeRatingFrequencyDescription="daily")}),$scope.sendReminderNotificationEmails=!0,$rootScope.sendDailyEmailReminder=!0,$scope.saveIntervalAndGoToLogin=function(primaryOutcomeRatingFrequencyDescription){$scope.saveInterval(primaryOutcomeRatingFrequencyDescription),qmService.sendToLogin()},$scope.skipInterval=function(){$scope.showIntervalCard=!1,qmLogService.debug("skipInterval: Going to login state...",null),qmService.sendToLogin()},$scope.saveInterval=function(primaryOutcomeRatingFrequencyDescription){primaryOutcomeRatingFrequencyDescription&&($scope.primaryOutcomeRatingFrequencyDescription=primaryOutcomeRatingFrequencyDescription);var reminderToSchedule={reminderFrequency:{minutely:60,"every five minutes":300,never:0,hourly:3600,hour:3600,"every three hours":10800,"twice a day":43200,daily:86400,day:86400}[$scope.primaryOutcomeRatingFrequencyDescription],variableId:qm.getPrimaryOutcomeVariable().id,defaultValue:3};qmService.addToTrackingReminderSyncQueue(reminderToSchedule),$scope.showIntervalCard=!1},$scope.storeRatingLocally=function(ratingValue){$scope.reportedVariableValue=!!qm.getPrimaryOutcomeVariable().ratingTextToValueConversionDataSet[ratingValue]&&qm.getPrimaryOutcomeVariable().ratingTextToValueConversionDataSet[ratingValue];var primaryOutcomeMeasurement=qmService.createPrimaryOutcomeMeasurement(ratingValue);qmService.addToMeasurementsQueue(primaryOutcomeMeasurement),$scope.hidePrimaryOutcomeVariableCard=!0,$scope.showIntervalCard=!0},$scope.init=function(){qmService.navBar.hideNavigationMenu(),qmLogService.debug($state.current.name+" initializing...",null)},$scope.$on("$ionicView.beforeEnter",function(){$rootScope.user&&(qmLogService.debug("Already have user so no need to welcome. Going to default state.",null),qmService.goToDefaultState())}),$scope.init()}]),angular.module("starter").controller("TrackPrimaryOutcomeCtrl",["$scope","$state","$timeout","$rootScope","$ionicLoading","qmService","qmLogService",function($scope,$state,$timeout,$rootScope,$ionicLoading,qmService,qmLogService){$scope.controller_name="TrackPrimaryOutcomeCtrl",$scope.state={},$scope.primaryOutcomeVariableDetails=qm.getPrimaryOutcomeVariable(),qmService.navBar.setFilterBarSearchIcon(!1),$scope.showRatingFaces=!0,$scope.averagePrimaryOutcomeVariableImage=!1,$scope.averagePrimaryOutcomeVariableValue=!1,$scope.primaryOutcomeVariable=qm.getPrimaryOutcomeVariable();var syncDisplayText="Syncing "+qm.getPrimaryOutcomeVariable().name+" measurements...";$scope.$on("$ionicView.enter",function(e){qmLogService.debug("Entering state "+$state.current.name,null),qmLogService.debug("TrackPrimaryOutcomeCtrl enter. Updating charts and syncing..",null),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),updateCharts(),$scope.showRatingFaces=!0,$scope.timeRemaining=!1,qmService.showInfoToast(syncDisplayText),qmLogService.debug($state.current.name+" going to syncPrimaryOutcomeVariableMeasurements",null),qmService.syncPrimaryOutcomeVariableMeasurements().then(function(){updateCharts(),qmService.hideLoader()})}),$scope.$on("$ionicView.afterEnter",function(e){qmService.hideLoader()}),$scope.storeRatingLocalAndServerAndUpdateCharts=function(numericRatingValue){$scope.timeRemaining=!0,$scope.showRatingFaces=!1,qm.chrome.updateChromeBadge(0);var primaryOutcomeMeasurement=qmService.createPrimaryOutcomeMeasurement(numericRatingValue);qmService.addToMeasurementsQueue(primaryOutcomeMeasurement),updateCharts(),!$rootScope.isSyncing&&$rootScope.user&&(qmService.showInfoToast(syncDisplayText),qmService.syncPrimaryOutcomeVariableMeasurements().then(function(){updateCharts()}))};var updateAveragePrimaryOutcomeRatingView=function(){for(var sum=0,j=0;j<$scope.state.primaryOutcomeMeasurements.length;j++)sum+=$scope.state.primaryOutcomeMeasurements[j].value;$scope.averagePrimaryOutcomeVariableValue=Math.round(sum/$scope.state.primaryOutcomeMeasurements.length),$scope.averagePrimaryOutcomeVariableText=qm.getPrimaryOutcomeVariable().ratingValueToTextConversionDataSet[$scope.averagePrimaryOutcomeVariableValue],$scope.averagePrimaryOutcomeVariableText&&($scope.averagePrimaryOutcomeVariableImage=qmService.getRatingFaceImageByText($scope.averagePrimaryOutcomeVariableText))},updateCharts=function(){qm.localForage.getItem(qm.items.primaryOutcomeVariableMeasurements,function(measurements){measurements?qmLog.info("Got "+measurements.length+" measurements from localforage"):qmLog.info("Got 0 measurements from localforage"),$scope.state.primaryOutcomeMeasurements=measurements;var measurementsQueue=qm.storage.getItem("measurementsQueue");measurementsQueue?qmLog.info("Got "+measurementsQueue.length+" measurements from measurementsQueue"):qmLog.info("Got 0 measurements from measurementsQueue"),$scope.state.primaryOutcomeMeasurements||($scope.state.primaryOutcomeMeasurements=[]),measurementsQueue&&($scope.state.primaryOutcomeMeasurements=$scope.state.primaryOutcomeMeasurements.concat(measurementsQueue)),$scope.state.primaryOutcomeMeasurements&&($scope.state.distributionChartConfig=null,$timeout(function(){$scope.state.primaryOutcomeMeasurements?qmLog.info("Updating charts with "+$scope.state.primaryOutcomeMeasurements.length+" measurements"):qmLog.info("Updating charts with 0 measurements"),$scope.state.hourlyChartConfig=qmService.processDataAndConfigureHourlyChart($scope.state.primaryOutcomeMeasurements,qm.getPrimaryOutcomeVariable()),$scope.state.weekdayChartConfig=qmService.processDataAndConfigureWeekdayChart($scope.state.primaryOutcomeMeasurements,qm.getPrimaryOutcomeVariable()),$scope.state.lineChartConfig=qmService.processDataAndConfigureLineChart($scope.state.primaryOutcomeMeasurements,qm.getPrimaryOutcomeVariable()),$scope.state.distributionChartConfig=qmService.processDataAndConfigureDistributionChart($scope.state.primaryOutcomeMeasurements,qm.getPrimaryOutcomeVariable()),updateAveragePrimaryOutcomeRatingView()},1))})};$scope.$on("updateCharts",function(){qmLogService.debug("updateCharts broadcast received.."),updateCharts()})}]),angular.module("starter").controller("SettingsCtrl",["$state","$scope","$ionicPopover","$ionicPopup","$rootScope","$http","qmService","qmLogService","ionicTimePicker","$stateParams","$ionicHistory","$ionicLoading","$ionicPlatform","$mdDialog",function($state,$scope,$ionicPopover,$ionicPopup,$rootScope,$http,qmService,qmLogService,ionicTimePicker,$stateParams,$ionicHistory,$ionicLoading,$ionicPlatform,$mdDialog){function exportMeasurements(type,ev){qmService.postMeasurementsExport(type,function(response){response.success||qmLogService.error("Could not export measurements. Response: "+JSON.stringify(response))},function(error){qmLogService.error("Could not export measurements. Response: "+JSON.stringify(error))}),exportRequestAlert(ev)}$scope.controller_name="SettingsCtrl",$scope.state={},$scope.userEmail=qm.urlHelper.getParam("userEmail"),qmService.navBar.setFilterBarSearchIcon(!1),$scope.$on("$ionicView.beforeEnter",function(e){if(qmLogService.debug("beforeEnter state "+$state.current.name,null),$scope.debugMode=qmLog.debugMode,$rootScope.user&&($scope.timeZone=$rootScope.user.timeZoneOffset/60*-1),$scope.drawOverAppsPopupEnabled=qmService.notifications.drawOverAppsPopupEnabled(),$scope.backgroundLocationTracking=!!qm.storage.getItem("bgGPS"),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),qm.urlHelper.getParam("userEmail"))return $scope.state.loading=!0,qmService.showBlackRingLoader(),void qmService.refreshUserEmailPreferencesDeferred({userEmail:qm.urlHelper.getParam("userEmail")},function(user){qmService.rootScope.setUser(user),$scope.state.loading=!1,qmService.hideLoader()},function(error){qmLogService.error(error),$scope.state.loading=!1,qmService.hideLoader()});$rootScope.user||qmService.sendToLoginIfNecessaryAndComeBack()}),$scope.$on("$ionicView.afterEnter",function(e){qmService.hideLoader()}),$scope.completelyResetAppStateAndSendToLogin=function(){qmService.completelyResetAppStateAndSendToLogin()},qmService.storage.getAsStringWithCallback("primaryOutcomeRatingFrequencyDescription",function(primaryOutcomeRatingFrequencyDescription){$scope.primaryOutcomeRatingFrequencyDescription=primaryOutcomeRatingFrequencyDescription||"daily",$rootScope.platform.isIOS&&"hour"!==$scope.primaryOutcomeRatingFrequencyDescription&&"day"!==$scope.primaryOutcomeRatingFrequencyDescription&&"never"!==$scope.primaryOutcomeRatingFrequencyDescription&&($scope.primaryOutcomeRatingFrequencyDescription="day",qmService.storage.setItem("primaryOutcomeRatingFrequencyDescription","day"))}),$scope.sendSharingInvitation=function(){var subjectLine="I%27d%20like%20to%20share%20my%20data%20with%20you",emailBody="Hi!%20%20%0A%0AI%27m%20tracking%20my%20health%20and%20happiness%20with%20an%20app%20and%20I%27d%20like%20to%20share%20my%20data%20with%20you.%20%20%0A%0APlease%20generate%20a%20data%20authorization%20URL%20at%20"+encodeURIComponent(qm.api.getBaseUrl())+"%2Fapi%2Fv2%2Fphysicians%20and%20email%20it%20to%20me.%20%0A%0AThanks!%20%3AD",fallbackUrl=qmService.getQuantiModoUrl("api/v2/account/applications",!0);$rootScope.platform.isMobile?qmService.sendWithEmailComposer(subjectLine,emailBody,null,fallbackUrl):qmService.sendWithMailTo(subjectLine,emailBody,null,fallbackUrl)},$scope.sendBugReport=function(){qmService.sendBugReport()},$scope.contactUs=function(){window.location="#app/feedback"},$scope.postIdea=function(){window.open("https://help.quantimo.do/forums/211661-general","_blank")},$scope.combineNotificationChange=function(ev){qmService.updateUserSettingsDeferred({combineNotifications:$rootScope.user.combineNotifications}),$rootScope.user.combineNotifications?(qmService.showMaterialAlert("Disabled Individual Notifications","You will only get a single generic notification instead of a separate notification for each reminder that you create.  All tracking reminder notifications for specific reminders will still show up in your Reminder Inbox.",ev),qmService.cancelAllNotifications().then(function(){qmLogService.debug("SettingsCtrl combineNotificationChange: Disabled Multiple Notifications and now refreshTrackingRemindersAndScheduleAlarms will schedule a single notification for highest frequency reminder",null),qm.storage.getItem(qm.items.deviceTokenOnServer)||(console.warn("Could not find device token for push notifications so scheduling combined local notifications"),qmService.syncTrackingReminders())})):(qmService.showMaterialAlert("Enabled Multiple Notifications","You will get a separate device notification for each reminder that you create.",ev),qmService.cancelAllNotifications().then(function(){qmService.syncTrackingReminders()}))},$scope.getPreviewBuildsChange=function(){var params={getPreviewBuilds:$rootScope.user.getPreviewBuilds};qmService.updateUserSettingsDeferred(params),qmService.deploy.fetchUpdate()};var sendReminderNotificationEmailsChange=function(ev){var params={sendReminderNotificationEmails:$rootScope.user.sendReminderNotificationEmails};qm.urlHelper.getParam("userEmail")&&(params.userEmail=qm.urlHelper.getParam("userEmail")),qmService.updateUserSettingsDeferred(params),$rootScope.user.sendReminderNotificationEmails?qmService.showMaterialAlert("Reminder Emails Enabled","If you forget to record a measurement for a reminder you've created, I'll send you a daily reminder email.",ev):qmService.showMaterialAlert("Reminder Emails Disabled","If you forget to record a measurement for a reminder you've created, I won't send you a daily reminder email.",ev)};$scope.sendReminderNotificationEmailsChange=function(){verifyEmailAddressAndExecuteCallback(sendReminderNotificationEmailsChange)};var sendPredictorEmailsChange=function(ev){var params={sendPredictorEmails:$rootScope.user.sendPredictorEmails};qmService.updateUserSettingsDeferred(params),$rootScope.user.sendPredictorEmails?qmService.showMaterialAlert("Discovery Emails Enabled","I'll send you a weekly email with new discoveries from your data.",ev):qmService.showMaterialAlert("Discovery Emails Disabled","I won't send you a weekly email with new discoveries from your data.",ev)};$scope.sendPredictorEmailsChange=function(){verifyEmailAddressAndExecuteCallback(sendPredictorEmailsChange)},$scope.openEarliestReminderTimePicker=function(ev){$scope.state.earliestReminderTimePickerConfiguration={callback:function(val){if(void 0===val)qmLogService.debug("Time not selected");else{var a=new Date,selectedTime=new Date(1e3*val);a.setHours(selectedTime.getUTCHours()),a.setMinutes(selectedTime.getUTCMinutes()),qmLogService.debug("Selected epoch is : ",val,"and the time is ",selectedTime.getUTCHours(),"H :",selectedTime.getUTCMinutes(),"M");var newEarliestReminderTime=moment(a).format("HH:mm:ss");if(newEarliestReminderTime>$rootScope.user.latestReminderTime)qmService.showMaterialAlert("Choose Another Time","Earliest reminder time cannot be greater than latest reminder time.  Please change the latest reminder time and try again or select a different earliest reminder time.",ev);else if(newEarliestReminderTime!==$rootScope.user.earliestReminderTime){$rootScope.user.earliestReminderTime=newEarliestReminderTime;var params=qm.timeHelper.addTimeZoneOffsetProperty({earliestReminderTime:$rootScope.user.earliestReminderTime});qmService.updateUserSettingsDeferred(params).then(function(){qmService.syncTrackingReminders()}),qmService.showMaterialAlert("Earliest Notification Time Updated","You should not receive device notifications before "+moment(a).format("h:mm A")+".",ev)}}},inputTime:qmService.getSecondsSinceMidnightLocalRoundedToNearestFifteenFromLocalString($rootScope.user.earliestReminderTime),step:15,closeLabel:"Cancel"},ionicTimePicker.openTimePicker($scope.state.earliestReminderTimePickerConfiguration)},$scope.openLatestReminderTimePicker=function(ev){$scope.state.latestReminderTimePickerConfiguration={callback:function(val){if(void 0===val)qmLogService.debug("Time not selected",null);else{var selectedTime=new Date(1e3*val);a.setHours(selectedTime.getUTCHours()),a.setMinutes(selectedTime.getUTCMinutes()),qmLogService.debug("Selected epoch is : ",val,"and the time is ",selectedTime.getUTCHours(),"H :",selectedTime.getUTCMinutes(),"M");var newLatestReminderTime=moment(a).format("HH:mm:ss");if(newLatestReminderTime<$rootScope.user.earliestReminderTime)qmService.showMaterialAlert("Choose Another Time","Latest reminder time cannot be less than earliest reminder time.  Please change the earliest reminder time and try again or select a different latest reminder time.",ev);else if(newLatestReminderTime!==$rootScope.user.latestReminderTime){$rootScope.user.latestReminderTime=newLatestReminderTime;var params=qm.timeHelper.addTimeZoneOffsetProperty({latestReminderTime:$rootScope.user.latestReminderTime});qmService.updateUserSettingsDeferred(params).then(function(){qmService.syncTrackingReminders()}),qmService.showMaterialAlert("Latest Notification Time Updated","You should not receive device notification after "+moment(a).format("h:mm A")+".",ev)}}},inputTime:qmService.getSecondsSinceMidnightLocalRoundedToNearestFifteenFromLocalString($rootScope.user.latestReminderTime),step:15,closeLabel:"Cancel"},ionicTimePicker.openTimePicker($scope.state.latestReminderTimePickerConfiguration)},$scope.logout=function(ev){$rootScope.accessTokenFromUrl=null;qmLogService.debug("Logging out..."),qmService.rootScope.setUser(null),function(ev){qmService.showMaterialConfirmationDialog("Log Out","Are you sure you want to log out? I'll miss you dearly!",function(){qmService.completelyResetAppStateAndLogout()},function(){qmService.afterLogoutDoNotDeleteMeasurements()},ev)}(ev)};var verifyEmailAddressAndExecuteCallback=function(callback){$rootScope.user.email||$rootScope.user.userEmail?callback():qmService.updateEmailAndExecuteCallback(callback)},exportRequestAlert=function(ev){qmService.showMaterialAlert("Export Request Sent!","Your data will be emailed to you within the next 24 hours.  Enjoy your life! So do we!",ev)},exportCsv=function(){exportMeasurements("csv")},exportPdf=function(){exportMeasurements("pdf")},exportXls=function(){exportMeasurements("xls")};$scope.exportMeasurements=function(type){"csv"===type&&verifyEmailAddressAndExecuteCallback(exportCsv),"pdf"===type&&verifyEmailAddressAndExecuteCallback(exportPdf),"xls"===type&&verifyEmailAddressAndExecuteCallback(exportXls)};var webDowngrade=function(){qmService.showBlackRingLoader(),qmService.postDowngradeSubscriptionDeferred().then(function(user){qmService.hideLoader(),qmLogService.debug(JSON.stringify(user),null),qmService.showMaterialAlert("Downgraded","Successfully downgraded to QuantiModo Lite")},function(error){qmService.hideLoader(),qmService.showMaterialAlert("Error","An error occurred while downgrading. Please email mike@quantimo.do"),qmLogService.debug(JSON.stringify(error),null)})},androidDowngrade=function(){$ionicPopup.confirm({title:"Google Play",template:"You subscribed through Google Play so I have to send you to a page that tells you how to unsubscribe from Play subscriptions"}).then(function(res){res?(qmService.postDowngradeSubscriptionDeferred().then(function(user){qmLogService.debug(JSON.stringify(user),null)},function(error){qmLogService.error(error)}),window.open("https://support.google.com/googleplay/answer/7018481","_blank","location=yes")):console.log("You are not sure")})},appleDowngrade=function(){$ionicPopup.confirm({title:"App Store",template:"You subscribed through the App Store so I have to send you to a page that tells you how to unsubscribe from App Store subscriptions"}).then(function(res){res?($rootScope.user.stripeActive=!1,qmService.postDowngradeSubscriptionDeferred().then(function(user){qmLogService.debug(JSON.stringify(user),null)},function(error){qmLogService.error(error)}),window.open("https://support.apple.com/en-us/HT202039","_blank","location=yes")):console.log("You are not sure")})};$scope.downgrade=function(){"google"===$rootScope.user.subscriptionProvider?androidDowngrade():"apple"===$rootScope.user.subscriptionProvider?appleDowngrade():webDowngrade()},$rootScope.platform.isAndroid&&($scope.toggleDrawOverAppsPopup=function(ev){qmService.toggleDrawOverAppsPopup(ev)}),$scope.togglePushNotificationsEnabled=function(){qmService.updateUserSettingsDeferred({pushNotificationsEnabled:$rootScope.user.pushNotificationsEnabled}),$rootScope.user.pushNotificationsEnabled&&qmService.showInfoToast("Push notifications enabled"),$rootScope.user.pushNotificationsEnabled||qmService.showInfoToast("Push notifications disabled")},$scope.shareAllDataChange=function(){qmService.updateUserSettingsDeferred({shareAllData:$rootScope.user.shareAllData}),$rootScope.user.shareAllData&&qmService.showInfoToast("Measurements are now shared"),$rootScope.user.shareAllData||qmService.showInfoToast("Measurements are now private")},$scope.toggleDebugMode=function(){$scope.debugMode=qmLog.debugMode=!$scope.debugMode},$scope.upgradeToggle=function(){qmService.premiumModeDisabledForTesting=!$rootScope.user.stripeActive,qmService.setUser($rootScope.user)},$scope.backgroundLocationChange=function(){$scope.backgroundLocationTracking=!$scope.backgroundLocationTracking,$scope.backgroundLocationTracking?(qm.storage.setItem("bgGPS",1),qmLogService.debug("Going to execute qmService.backgroundGeolocationStartIfEnabled if $ionicPlatform.ready"),qmService.backgroundGeolocationStartIfEnabled(),qmService.showInfoToast("Background location tracking enabled"),qmService.updateLocationVariablesAndPostMeasurementIfChanged()):(qm.storage.setItem("bgGPS",0),qmService.showInfoToast("Background location tracking disabled"),qmService.backgroundGeolocationStop())},$scope.openDeleteUserAccountDialog=function(ev){qmLog.error("User clicked DELETE ACCOUNT!"),qmService.sendBugReport()}}]),angular.module("starter").controller("IframeScreenCtrl",["$stateParams","$scope","$ionicLoading","$sce","$state","$rootScope","qmService","qmLogService",function($stateParams,$scope,$ionicLoading,$sce,$state,$rootScope,qmService,qmLogService){qmLogService.debug("IframeScreenCtrl works!",null),qmService.navBar.setFilterBarSearchIcon(!1);var iFrameUrl;$scope.iFrameStyle="height:2000px; width:100%;","app.studyCreate"===$state.current.name&&($scope.iFrameStyle="height:5000px; width:100%;",iFrameUrl=qm.api.getBaseUrl()+"/api/v2/studies?hideMenu=true",$scope.title="Create Study"),$stateParams.title&&($scope.title=$stateParams.title),$stateParams.path&&(iFrameUrl=qm.api.getBaseUrl()+$stateParams.path),$stateParams.iFrameStyle&&($scope.iFrameStyle=$stateParams.iFrameStyle),window.location.href.indexOf("search-variables")>-1&&(iFrameUrl=qm.api.getBaseUrl()+"/embeddable/?plugin=search-variables",$scope.title="Your Variables"),window.location.href.indexOf("search-common-relationships")>-1&&(iFrameUrl=qm.api.getBaseUrl()+"/embeddable/?plugin=search-relationships&commonOrUser=common",$scope.title="Common Variable Relationships"),window.location.href.indexOf("search-user-relationships")>-1&&(iFrameUrl=qm.api.getBaseUrl()+"/embeddable/?plugin=search-relationships&commonOrUser=user",$scope.title="Your Variable Relationships"),window.location.href.indexOf("import-data")>-1&&(iFrameUrl=qm.api.getBaseUrl()+"/api/v1/connect/mobile",$scope.title="Your Variable Relationships"),qmLogService.debug("iframeScreen.init: Going to qmService.getAccessTokenFromAnySource",null),qmService.getAccessTokenFromAnySource().then(function(accessToken){accessToken&&(iFrameUrl=iFrameUrl.indexOf("?")>-1?iFrameUrl+"&access_token="+accessToken:iFrameUrl+"?access_token="+accessToken),$scope.iframeUrl=$sce.trustAsResourceUrl(iFrameUrl),qmService.hideLoader()},function(){qmLogService.debug("iframeScreen: No access token. Need to log in.",null),qmService.sendToLoginIfNecessaryAndComeBack(),qmService.hideLoader()})}]),angular.module("starter").controller("PredictorsCtrl",["$scope","$ionicLoading","$state","$stateParams","qmService","qmLogService","$rootScope","$ionicActionSheet","$mdDialog","$timeout",function($scope,$ionicLoading,$state,$stateParams,qmService,qmLogService,$rootScope,$ionicActionSheet,$mdDialog,$timeout){function updateNavigationMenuButton(){qmService.rootScope.setShowActionSheetMenu(function(){$ionicActionSheet.show({buttons:[{text:'<i class="icon ion-arrow-down-c"></i>Descending Significance'},{text:'<i class="icon ion-arrow-down-c"></i>Descending QM Score'},{text:'<i class="icon ion-arrow-down-c"></i>Positive Relationships'},{text:'<i class="icon ion-arrow-up-c"></i>Negative Relationships'},{text:'<i class="icon ion-arrow-down-c"></i>Number of Participants'},{text:'<i class="icon ion-arrow-up-c"></i>Ascending pValue'},{text:'<i class="icon ion-arrow-down-c"></i>Optimal Pearson Product'},qmService.actionSheets.actionSheetButtons.refresh,qmService.actionSheets.actionSheetButtons.settings],cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED",null)},buttonClicked:function(index){return 0===index&&populateCorrelationList("-statisticalSignificance"),1===index&&populateCorrelationList("-qmScore"),2===index&&populateCorrelationList("correlationCoefficient"),3===index&&populateCorrelationList("-correlationCoefficient"),4===index&&populateCorrelationList("-numberOfUsers"),5===index&&populateCorrelationList("pValue"),6===index&&populateCorrelationList("-optimalPearsonProduct"),7===index&&$scope.refreshList(),8===index&&qmService.goToState(qmStates.settings),!0}})})}function variablesHaveChanged(){return!$scope.state.correlationObjects||!$scope.state.correlationObjects.length||(!(!getEffectVariableName()||!$scope.state.requestParams.effectVariableName||getEffectVariableName()===$scope.state.requestParams.effectVariableName)||!(!getCauseVariableName()||!$scope.state.requestParams.causeVariableName||getCauseVariableName()===$scope.state.requestParams.causeVariableName))}function getEffectVariableName(){return qm.studyHelper.getEffectVariableName($stateParams,$scope,$rootScope)?qm.studyHelper.getEffectVariableName($stateParams,$scope,$rootScope):$stateParams.fallBackToPrimaryOutcome&&!getCauseVariableName()?qm.getPrimaryOutcomeVariable().name:void 0}function getCauseVariableName(){return qm.studyHelper.getCauseVariableName($stateParams,$scope,$rootScope)}function showLoadMoreButtonIfNecessary(){$scope.state.correlationObjects.length&&$scope.state.correlationObjects.length%$scope.state.requestParams.limit==0?$scope.state.showLoadMoreButton=!0:$scope.state.showLoadMoreButton=!1}function hideLoader(){$scope.$broadcast("scroll.infiniteScrollComplete"),qmService.hideLoader(),$scope.searching=!1,$scope.$broadcast("scroll.infiniteScrollComplete")}function populateCorrelationList(newSortParam){newSortParam&&($scope.state.correlationObjects=[],qmLogService.debug("Sort by "+newSortParam),$scope.state.requestParams.sort=newSortParam),$scope.searching=!0;var params=$scope.state.requestParams;params.limit=10,qmLogService.info("Getting correlations with params "+JSON.stringify(params)),qmService.getCorrelationsDeferred(params).then(function(data){data&&($scope.state.correlationsExplanation=data.explanation),data.correlations.length?(qmLogService.info("Got "+data.correlations.length+" correlations with params "+JSON.stringify(params)),qmLogService.info("First correlation is "+data.correlations[0].causeVariableName+" vs "+data.correlations[0].effectVariableName),$scope.state.requestParams.offset?$scope.state.correlationObjects=$scope.state.correlationObjects.concat(data.correlations):$scope.state.correlationObjects=data.correlations,$scope.state.requestParams.offset=$scope.state.correlationObjects.length,showLoadMoreButtonIfNecessary()):(qmLogService.info("Did not get any correlations with params "+JSON.stringify(params)),$scope.state.noCorrelations=!0),hideLoader()},function(error){hideLoader(),qmLogService.error("predictorsCtrl: Could not get correlations: "+JSON.stringify(error))})}$scope.controller_name="PredictorsCtrl",$scope.state={variableName:null,correlationObjects:[],showLoadMoreButton:!1},$scope.data={search:""},$scope.filterSearchQuery="",$scope.searching=!0,$scope.$on("$ionicView.beforeEnter",function(e){qmLogService.debug("beforeEnter state "+$state.current.name),qmLogService.info("beforeEnter state "+$state.current.name),$scope.showSearchFilterBox=!1,qmService.navBar.setFilterBarSearchIcon(!0),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),$stateParams.requestParams&&($scope.state.requestParams=$stateParams.requestParams),updateNavigationMenuButton()}),$scope.$on("$ionicView.afterEnter",function(e){qm.loaders.robots(),qmLogService.info("afterEnter state "+$state.current.name),$scope.state.requestParams.aggregated=qm.urlHelper.getParam("aggregated"),variablesHaveChanged()&&(getCauseVariableName()&&($scope.state.requestParams.causeVariableName=getCauseVariableName(),$scope.state.variableName=getCauseVariableName(),$scope.outcomeList=!0),getEffectVariableName()&&($scope.state.requestParams.effectVariableName=getEffectVariableName(),$scope.state.variableName=getEffectVariableName(),$scope.predictorList=!0),"positive"===$stateParams.valence&&($scope.state.requestParams.correlationCoefficient="(gt)0"),"negative"===$stateParams.valence&&($scope.state.requestParams.correlationCoefficient="(lt)0"),$stateParams.effectVariableName?$scope.state.title="Predictors":$scope.state.title="Outcomes",populateCorrelationList())}),$rootScope.toggleFilterBar=function(){$scope.showSearchFilterBox=!$scope.showSearchFilterBox},$scope.filterSearch=function(){qmLogService.debug($scope.data.search,null),$scope.outcomeList?$scope.state.correlationObjects=$scope.state.correlationObjects.filter(function(obj){return-1!==obj.effectVariableName.toLowerCase().indexOf($scope.data.search.toLowerCase())}):$scope.state.correlationObjects=$scope.state.correlationObjects.filter(function(obj){return-1!==obj.causeVariableName.toLowerCase().indexOf($scope.data.search.toLowerCase())}),$scope.data.search.length<4||$scope.state.correlationObjects.length||($scope.outcomeList?$stateParams.effectVariableName="**"+$scope.data.search+"**":$stateParams.causeVariableName="**"+$scope.data.search+"**",$scope.state.requestParams.offset=null,populateCorrelationList())},$scope.loadMore=function(){qmService.showBlackRingLoader(),$scope.state.correlationObjects.length&&($scope.state.requestParams.offset=$scope.state.requestParams.offset+$scope.state.requestParams.limit,populateCorrelationList())},$scope.refreshList=function(){$scope.state.requestParams.offset=0,qmService.clearCorrelationCache(),populateCorrelationList()},$scope.openStore=function(name){qmLogService.debug("open store for ",null,name);var url="http://www.amazon.com/gp/aw/s/ref=mh_283155_is_s_stripbooks?ie=UTF8&n=283155&k="+(name=name.split(" ").join("+"));$scope.openUrl(url)},$rootScope.openCorrelationSearchDialog=function($event){$mdDialog.show({controller:CorrelationSearchCtrl,controllerAs:"ctrl",templateUrl:"templates/dialogs/variable-search-dialog.html",parent:angular.element(document.body),targetEvent:$event,clickOutsideToClose:!1})};var CorrelationSearchCtrl=function($scope,$state,$rootScope,$stateParams,$filter,qmService,qmLogService,$q,$log){function loadAll(correlations){return correlations?correlations.map(function(correlationObject){return $stateParams.effectVariableName?{value:correlationObject.causeVariableName.toLowerCase(),name:correlationObject.causeVariableName,correlationObject:correlationObject}:$stateParams.causeVariableName?{value:correlationObject.effectVariableName.toLowerCase(),name:correlationObject.effectVariableName,correlationObject:correlationObject}:void 0}):[]}var self=this;self.correlations=loadAll(),self.querySearch=function(query){self.notFoundText="I don't have enough data to determine the relationship between "+query+" and "+self.variableName+".  I generally need about a month of overlapping data for each variable first.  Create some reminders and let's make some discoveries!";var deferred=$q.defer(),requestParams={};return $stateParams.causeVariableName&&(requestParams.causeVariableName=$stateParams.causeVariableName,requestParams.effectVariableName="**"+query+"**"),$stateParams.effectVariableName&&(requestParams.effectVariableName=$stateParams.effectVariableName,requestParams.causeVariableName="**"+query+"**"),qmService.getCorrelationsDeferred(requestParams).then(function(data){deferred.resolve(loadAll(data.correlations))},function(error){deferred.reject(error)}),deferred.promise},self.selectedItemChange=function(item){self.selectedItem=item,self.correlationObject=item.correlationObject,self.buttonText="Go to Study",$log.info(null,"Item changed to "+item.name,null)},self.searchTextChange=function(text){$log.debug("Text changed to "+text,null)},$stateParams.causeVariableName&&(self.variableName=$stateParams.causeVariableName,self.title="Specific Outcome",self.helpText="Search for an outcome that you think might be influenced by "+self.variableName+".",self.placeholder="Search for an outcome..."),$stateParams.effectVariableName&&(self.variableName=$stateParams.effectVariableName,self.title="Specific Predictor",self.helpText="Search for a factor that you think might influence "+self.variableName+".",self.placeholder="Search for a predictor..."),self.helpText=self.helpText+"  Then you can see a study exploring the relationship between those variables.",self.getHelp=function(){if(self.helpText&&!self.showHelp)return self.showHelp=!0;qmService.goToState(window.qmStates.help),$mdDialog.cancel()},self.cancel=function(){$mdDialog.cancel()},self.finish=function(){qmService.goToStudyPageViaCorrelationObject(self.correlationObject),$mdDialog.hide()}};CorrelationSearchCtrl.$inject=["$scope","$state","$rootScope","$stateParams","$filter","qmService","qmLogService","$q","$log"]}]),angular.module("starter").controller("ExternalCtrl",["$scope","$stateParams","$rootScope","$state","qmService","qmLogService",function($scope,$stateParams,$rootScope,$state,qmService,qmLogService){$scope.controller_name="ExternalCtrl",qmService.navBar.setFilterBarSearchIcon(!1),window.closeLoading=function(){qmService.hideLoader()},$scope.$on("$ionicView.beforeEnter",function(e){qmLogService.debug("beforeEnter state "+$state.current.name),qmService.rootScope.setProperty("hideHelpButton",!0),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet()}),$scope.$on("$ionicView.afterLeave",function(){qmService.rootScope.setProperty("hideHelpButton",!1)})}]),angular.module("starter").controller("historyAllMeasurementsCtrl",["$scope","$state","$stateParams","$rootScope","$timeout","$ionicActionSheet","qmService","qmLogService",function($scope,$state,$stateParams,$rootScope,$timeout,$ionicActionSheet,qmService,qmLogService){function updateNavigationMenuButton(){$timeout(function(){qmService.rootScope.setShowActionSheetMenu(function(){$ionicActionSheet.show({buttons:[qmService.actionSheets.actionSheetButtons.refresh,qmService.actionSheets.actionSheetButtons.settings],cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED",null)},buttonClicked:function(index){return 0===index&&$scope.refreshHistory(),1===index&&qmService.goToState(qmStates.settings),!0}})})},1)}function updateMeasurementIfNecessary(){$stateParams.updatedMeasurementHistory&&($scope.state.history=$stateParams.updatedMeasurementHistory)}function hideLoader(){$scope.$broadcast("scroll.refreshComplete"),$scope.state.loading=!1,qmService.hideLoader(),$scope.$broadcast("scroll.infiniteScrollComplete")}function getScopedVariableObject(){return $scope.state.variableObject&&$scope.state.variableObject.name===getVariableName()?$scope.state.variableObject:$stateParams.variableObject?$scope.state.variableObject=$stateParams.variableObject:null}function getVariableName(){return $stateParams.variableName?$stateParams.variableName:$stateParams.variableObject?$stateParams.variableObject.name:qm.urlHelper.getParam("variableName")?qm.urlHelper.getParam("variableName"):void qmLog.info("Could not get variableName")}function getConnectorName(){return $stateParams.connectorName?$stateParams.connectorName:qm.urlHelper.getParam("connectorName")?qm.urlHelper.getParam("connectorName"):void qmLog.info("Could not get variableName")}function setupVariableCategoryActionSheet(){qmService.rootScope.setShowActionSheetMenu(function(){var hideSheet=$ionicActionSheet.show({buttons:[{text:'<i class="icon ion-happy-outline"></i>Emotions'},{text:'<i class="icon ion-ios-nutrition-outline"></i>Foods'},{text:'<i class="icon ion-sad-outline"></i>Symptoms'},{text:'<i class="icon ion-ios-medkit-outline"></i>Treatments'},{text:'<i class="icon ion-ios-body-outline"></i>Physical Activity'},{text:'<i class="icon ion-ios-pulse"></i>Vital Signs'},{text:'<i class="icon ion-ios-location-outline"></i>Locations'}],cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED",null)},buttonClicked:function(index){return 0===index&&qmService.goToState("app.historyAll",{variableCategoryName:"Emotions"}),1===index&&qmService.goToState("app.historyAll",{variableCategoryName:"Foods"}),2===index&&qmService.goToState("app.historyAll",{variableCategoryName:"Symptoms"}),3===index&&qmService.goToState("app.historyAll",{variableCategoryName:"Treatments"}),4===index&&qmService.goToState("app.historyAll",{variableCategoryName:"Physical Activity"}),5===index&&qmService.goToState("app.historyAll",{variableCategoryName:"Vital Signs"}),6===index&&qmService.goToState("app.historyAll",{variableCategoryName:"Locations"}),!0},destructiveButtonClicked:function(){}});$timeout(function(){hideSheet()},2e4)})}$scope.controller_name="historyAllMeasurementsCtrl",$scope.state={limit:50,history:[],units:[],showLocationToggle:!1,noHistory:!1,helpCardTitle:"Past Measurements",title:"History",loadingText:"Fetching measurements...",moreDataCanBeLoaded:!0},$scope.$on("$ionicView.beforeEnter",function(e){$stateParams.refresh&&($scope.state.history=null),$scope.state.moreDataCanBeLoaded=!0,$rootScope.hideHistoryPageInstructionsCard=qm.storage.getItem("hideHistoryPageInstructionsCard"),updateMeasurementIfNecessary()}),$scope.$on("$ionicView.enter",function(e){qmLogService.debug($state.current.name+": Entering state "+$state.current.name),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),$stateParams.variableCategoryName&&"Anything"!==$stateParams.variableCategoryName&&($scope.state.title=$stateParams.variableCategoryName+" History",$scope.state.showLocationToggle="Location"===$stateParams.variableCategoryName),$stateParams.variableCategoryName&&setupVariableCategoryActionSheet(),getScopedVariableObject(),getVariableName()?($scope.state.title=getVariableName()+" History",qmService.rootScope.setShowActionSheetMenu(function(){return qmService.actionSheets.showVariableObjectActionSheet(getVariableName(),getScopedVariableObject())})):updateNavigationMenuButton(),$scope.state.history&&$scope.state.history.length||$scope.getHistory()}),$scope.editMeasurement=function(measurement){qmService.goToState("app.measurementAdd",{measurement:measurement,fromState:$state.current.name,fromUrl:window.location.href,currentMeasurementHistory:$scope.state.history})},$scope.refreshHistory=function(){$scope.state.history=[],$scope.getHistory()},$scope.getHistory=function(){if($scope.state.loading)return qmLog.info("Already getting measurements!");if(!$scope.state.moreDataCanBeLoaded)return hideLoader(),qmLog.info("No more measurements!");$scope.state.loading=!0,$scope.state.history||($scope.state.history=[]);var params={offset:$scope.state.history.length,limit:$scope.state.limit,sort:"-startTimeEpoch",doNotProcess:!0};$stateParams.variableCategoryName&&(params.variableCategoryName=$stateParams.variableCategoryName),getVariableName()&&(params.variableName=getVariableName()),getConnectorName()&&(params.connectorName=getConnectorName()),getVariableName()&&($scope.state.variableObject||qmService.searchUserVariablesDeferred("*",{variableName:getVariableName()}).then(function(variables){$scope.state.variableObject=variables[0]},function(error){qmLogService.error(error)})),qm.measurements.getMeasurementsFromApi(params,function(measurements){if((!measurements||measurements.length<params.limit)&&($scope.state.moreDataCanBeLoaded=!1),measurements.length<$scope.state.limit&&($scope.state.noHistory=0===measurements.length),measurements=qmService.addInfoAndImagesToMeasurements(measurements),qm.arrayHelper.variableIsArray($scope.state.history)){$scope.state.history||($scope.state.history=[]);try{$scope.state.history=$scope.state.history.concat(measurements)}catch(error){qmLog.error(error),$scope.state.history=JSON.parse(JSON.stringify($scope.state.history)),$scope.state.history=$scope.state.history.concat(measurements)}}else qmLogService.error("$scope.state.history is not an array! $scope.state.history: "+JSON.stringify($scope.state.history)),$scope.state.history=measurements;hideLoader()},function(error){qmLogService.error("History update error: "+error),$scope.state.noHistory=!0,hideLoader()})},$scope.deleteMeasurement=function(measurement){measurement.hide=!0,qmService.deleteMeasurementFromServer(measurement)},qmService.navBar.setFilterBarSearchIcon(!1),$scope.showActionSheetForMeasurement=function(measurement){$scope.state.measurement=measurement;var variableObject=JSON.parse(JSON.stringify(measurement));variableObject.id=measurement.variableId,variableObject.name=measurement.variableName;var buttons=[{text:'<i class="icon ion-edit"></i>Edit Measurement'},qmService.actionSheets.actionSheetButtons.reminderAdd,qmService.actionSheets.actionSheetButtons.charts,qmService.actionSheets.actionSheetButtons.historyAllVariable,qmService.actionSheets.actionSheetButtons.variableSettings,qmService.actionSheets.actionSheetButtons.relationships];measurement.url&&buttons.push(qmService.actionSheets.actionSheetButtons.openUrl);var hideSheet=$ionicActionSheet.show({buttons:buttons,destructiveText:'<i class="icon ion-trash-a"></i>Delete Measurement',cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug(null,$state.current.name+": CANCELLED",null)},buttonClicked:function(index){return qmLogService.debug(null,$state.current.name+": BUTTON CLICKED",null,index),0===index&&$scope.editMeasurement($scope.state.measurement),1===index&&qmService.goToState("app.reminderAdd",{variableObject:variableObject,variableName:variableObject.name}),2===index&&qmService.goToState("app.charts",{variableObject:variableObject,variableName:variableObject.name}),3===index&&qmService.goToState("app.historyAllVariable",{variableObject:variableObject,variableName:variableObject.name}),4===index&&qmService.goToVariableSettingsByName($scope.state.measurement.variableName),5===index&&(qmService.showBlackRingLoader(),qmService.goToCorrelationsListForVariable($scope.state.measurement.variableName)),6===index&&qm.urlHelper.openUrlInNewTab(measurement.url),!0},destructiveButtonClicked:function(){return $scope.deleteMeasurement(measurement),!0}});$timeout(function(){hideSheet()},2e4)}}]),angular.module("starter").controller("ImportCtrl",["$scope","$ionicLoading","$state","$rootScope","qmService","qmLogService","$cordovaOauth","$ionicActionSheet","Upload","$timeout","$ionicPopup","$mdDialog",function($scope,$ionicLoading,$state,$rootScope,qmService,qmLogService,$cordovaOauth,$ionicActionSheet,Upload,$timeout,$ionicPopup,$mdDialog){function userCanConnect(){return $rootScope.user?!qmService.premiumModeDisabledForTesting&&(!!$rootScope.user.stripeActive||!qm.getAppSettings().additionalSettings.monetizationSettings.subscriptionsEnabled):(qmService.refreshUser(),!0)}function amazonSettings(connector,button,ev){qmService.connector=connector,$mdDialog.show({controller:function($scope,$mdDialog,qmService){var connector=qmService.connector;$scope.appSettings=qm.getAppSettings();var addAffiliateTag=connector.connectInstructions.parameters.find(function(obj){return"addAffiliateTag"===obj.key});$scope.addAffiliateTag=isTruthy(addAffiliateTag.defaultValue);var importPurchases=connector.connectInstructions.parameters.find(function(obj){return"importPurchases"===obj.key});$scope.importPurchases=isTruthy(importPurchases.defaultValue),$scope.onToggle=function(){connectWithParams({importPurchases:$scope.importPurchases||!1,addAffiliateTag:$scope.addAffiliateTag||!1},connector.name)};var self=this;self.title="Amazon Settings",$scope.hide=function(){$mdDialog.hide()},$scope.cancel=function(){$mdDialog.cancel()},$scope.getHelp=function(){if(self.helpText&&!self.showHelp)return self.showHelp=!0;qmService.goToState(window.qmStates.help),$mdDialog.cancel()},$scope.answer=function(answer){$mdDialog.hide(answer)}},templateUrl:"templates/dialogs/amazon-settings.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!0,fullscreen:!1}).then(function(answer){$scope.status='You said the information was "'+answer+'".'},function(){$scope.status="You cancelled the dialog."})}function connectorErrorHandler(error){qmLogService.error(error)}function connectWithParams(params,lowercaseConnectorName){$scope.state.text="",qmService.connectConnectorWithParamsDeferred(params,lowercaseConnectorName).then(function(result){qmLogService.debug(JSON.stringify(result),null),$scope.refreshConnectors()},function(error){connectorErrorHandler(error),$scope.refreshConnectors()})}$scope.controller_name="ImportCtrl",qmService.navBar.setFilterBarSearchIcon(!1),$scope.state={connectors:null,searchText:""},$scope.$on("$ionicView.beforeEnter",function(e){qmLogService.debug("ImportCtrl beforeEnter",null),void 0===$rootScope.hideNavigationMenu&&qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),qmService.sendToLoginIfNecessaryAndComeBack()||(loadNativeConnectorPage(),userCanConnect()||qmService.refreshUser())}),$scope.hideImportHelpCard=function(){$scope.showImportHelpCard=!1,window.qm.storage.setItem(qm.items.hideImportHelpCard,!0)};var loadNativeConnectorPage=function(){$scope.showImportHelpCard=!qm.storage.getItem(qm.items.hideImportHelpCard),qmService.showBlackRingLoader(),qmService.getConnectorsDeferred().then(function(connectors){$scope.state.connectors=connectors,connectors&&($scope.$broadcast("scroll.refreshComplete"),qmService.hideLoader()),$scope.refreshConnectors()})};$scope.showActionSheetForConnector=function(connector){var connectorButtons=JSON.parse(JSON.stringify(connector.buttons));connectorButtons.push({text:'<i class="icon '+qmService.ionIcons.history+'"></i>'+connector.displayName+" History",id:"history",state:qmStates.historyAll,stateParams:{connectorName:connector.name}}),(connectorButtons=qmService.actionSheets.addHtmlToActionSheetButtonArray(connectorButtons)).map(function(button){return button.connector=connector,button});$ionicActionSheet.show({buttons:connectorButtons,destructiveText:connector.connected?'<i class="icon ion-trash-a"></i>Disconnect ':null,cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED")},buttonClicked:function(index){return connectorButtons[index].state?qmService.actionSheets.handleActionSheetButtonClick(connectorButtons[index]):$scope.connectorAction(connector,connectorButtons[index]),!0},destructiveButtonClicked:function(){disconnectConnector(connector)}})},$scope.uploadSpreadsheet=function(file,errFiles,connector,button){if(userCanConnect())if(file){if($scope.f=file,$scope.errFile=errFiles&&errFiles[0],file){button.text="Uploading...",qmService.showBasicLoader();var body={file:file,connectorName:connector.name};file.upload=Upload.upload({url:qm.api.getBaseUrl()+"/api/v2/spreadsheetUpload?clientId="+$rootScope.appSettings.clientId+"&access_token="+$rootScope.user.accessToken,data:body}),file.upload.then(function(response){button.text="Import Scheduled",connector.message="You should start seeing your data within the next hour or so",qmLogService.debug("File upload response: ",null,response),$timeout(function(){file.result=response.data}),qmService.hideLoader()},function(response){qmService.hideLoader(),button.text="Upload Complete",qmService.showMaterialAlert("Upload complete!","You should see the data on your history page within an hour or so"),response.status>0&&(button.text="Upload Failed",qmLog.error("Upload failed!"),qmService.showMaterialAlert("Upload failed!","Please contact mike@quantimo.do and he'll fix it. "),$scope.errorMsg=response.status+": "+response.data)},function(evt){file.progress=Math.min(100,parseInt(100*evt.loaded/evt.total))})}}else qmLogService.debug("No file provided to uploadAppFile",null);else qmService.goToState("app.upgrade")};var connectConnector=function(connector,button,ev){function connectGoogle(connector,scopes){document.addEventListener("deviceready",function(){window.plugins.googleplus.login({scopes:scopes,webClientId:"1052648855194.apps.googleusercontent.com",offline:!0},function(response){qmLogService.debug("window.plugins.googleplus.login response:"+JSON.stringify(response),null),connectWithAuthCode(response.serverAuthCode,connector)},function(errorMessage){qmLogService.error("ERROR: googleLogin could not get userData!  Fallback to qmService.nonNativeMobileLogin registration. Error: "+JSON.stringify(errorMessage))})},!1)}if(qmService.connector=connector,userCanConnect()){var options;connector.loadingText=null,connector.connecting=!0,button.text="Import Scheduled",connector.message="You should begin seeing any new data within an hour or so.",connector.updateStatus="CONNECTING";var connectWithToken=function(response){qmLogService.debug("Response Object -> "+JSON.stringify(response),null);var body={connectorCredentials:{token:response},connector:connector};qmService.connectConnectorWithTokenDeferred(body).then(function(result){qmLogService.debug(JSON.stringify(result),null),$scope.refreshConnectors()},function(error){connectorErrorHandler(error),$scope.refreshConnectors()})},connectWithAuthCode=function(authorizationCode,connector){qmLogService.debug(connector.name+" connect result is "+JSON.stringify(authorizationCode),null),qmService.connectConnectorWithAuthCodeDeferred(authorizationCode,connector.name).then(function(){$scope.refreshConnectors()},function(){qmLogService.error("error on connectWithAuthCode for "+connector.name),$scope.refreshConnectors()})};if("slack"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);$cordovaOauth.slack(connector.connectorClientId,connector.connectorClientSecret,connector.scopes).then(function(result){connectWithToken(result)},function(error){connectorErrorHandler(error)})}if("netatmo"!==connector.name){if("foursquare"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);$cordovaOauth.foursquare(connector.connectorClientId).then(function(result){connectWithToken(result)},function(error){connectorErrorHandler(error)})}if("github"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);$cordovaOauth.github(connector.connectorClientId,connector.connectorClientSecret,connector.scopes).then(function(result){connectWithToken(result)},function(error){connectorErrorHandler(error)})}if("strava"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);$cordovaOauth.strava(connector.connectorClientId,connector.connectorClientSecret,connector.scopes).then(function(result){connectWithToken(result)},function(error){connectorErrorHandler(error)})}if("withings"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);$cordovaOauth.withings(connector.connectorClientId,connector.connectorClientSecret).then(function(result){connectWithToken(result)},function(error){connectorErrorHandler(error)})}if("fitbit"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);options={redirect_uri:qm.api.getBaseUrl()+"/api/v1/connectors/"+connector.name+"/connect"},$cordovaOauth.fitbit(connector.connectorClientId,connector.scopes,options).then(function(authorizationCode){connectWithAuthCode(authorizationCode,connector)},function(error){connectorErrorHandler(error)})}if("runkeeper"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);options={redirect_uri:qm.api.getBaseUrl()+"/api/v1/connectors/"+connector.name+"/connect"},$cordovaOauth.fitbit(connector.connectorClientId,connector.scopes,options).then(function(authorizationCode){connectWithAuthCode(authorizationCode,connector)},function(error){connectorErrorHandler(error)})}if("rescuetime"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);options={redirect_uri:qm.api.getBaseUrl()+"/api/v1/connectors/"+connector.name+"/connect"},$cordovaOauth.rescuetime(connector.connectorClientId,connector.scopes,options).then(function(authorizationCode){connectWithAuthCode(authorizationCode,connector)},function(error){connectorErrorHandler(error)})}if("slice"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);options={redirect_uri:qm.api.getBaseUrl()+"/api/v1/connectors/"+connector.name+"/connect"},$cordovaOauth.slice(connector.connectorClientId,connector.scopes,options).then(function(authorizationCode){connectWithAuthCode(authorizationCode,connector)},function(error){connectorErrorHandler(error)})}if("facebook"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);$cordovaOauth.facebook(connector.connectorClientId,connector.scopes).then(function(result){connectWithToken(result)},function(error){connectorErrorHandler(error)})}if("googlefit"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);connectGoogle(connector,connector.scopes)}if("googlecalendar"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);connectGoogle(connector,connector.scopes)}if("gmail"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);connectGoogle(connector,connector.scopes)}if("sleepcloud"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);connectGoogle(connector,connector.scopes)}if("up"===connector.name){if($rootScope.platform.isWeb||$rootScope.platform.isChromeExtension)return void webConnect(connector);$cordovaOauth.jawbone(connector.connectorClientId,connector.connectorClientSecret,connector.scopes).then(function(result){connectWithToken(result)},function(error){connectorErrorHandler(error)})}"worldweatheronline"===connector.name&&connectWithParams({},"worldweatheronline"),"whatpulse"===connector.name&&($scope.data={},$ionicPopup.show({template:'<label class="item item-input"><i class="icon ion-person placeholder-icon"></i><input type="text" placeholder="Username" ng-model="data.username"></label>',title:connector.displayName,subTitle:"Enter your "+connector.displayName+" username found next to your avatar on the WhatPulse My Stats page",scope:$scope,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(e){if($scope.data.username)return $scope.data.username;e.preventDefault()}}]}).then(function(res){connectWithParams({username:$scope.data.username},connector.name)})),"myfitnesspal"===connector.name&&($scope.data={},$ionicPopup.show({template:'<label class="item item-input"><i class="icon ion-person placeholder-icon"></i><input type="text" placeholder="Username" ng-model="data.username"></label><br> <label class="item item-input"><i class="icon ion-locked placeholder-icon"></i><input type="password" placeholder="Password" ng-model="data.password"></label>',title:connector.displayName,subTitle:"Enter Your "+connector.displayName+" Credentials",scope:$scope,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(e){if($scope.data.username&&$scope.data.password)return $scope.data;e.preventDefault()}}]}).then(function(res){connectWithParams({username:$scope.data.username,password:$scope.data.password},connector.name)})),"mint"===connector.name&&($scope.data={},$ionicPopup.show({template:'<label class="item item-input"><i class="icon ion-person placeholder-icon"></i><input type="text" placeholder="Username" ng-model="data.username"></label><br> <label class="item item-input"><i class="icon ion-locked placeholder-icon"></i><input type="password" placeholder="Password" ng-model="data.password"></label>',title:connector.displayName,subTitle:"Enter Your "+connector.displayName+" Credentials",scope:$scope,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(e){if($scope.data.username&&$scope.data.password)return $scope.data;e.preventDefault()}}]}).then(function(res){connectWithParams({username:$scope.data.username,password:$scope.data.password},connector.name)})),"mynetdiary"===connector.name&&($scope.data={},$ionicPopup.show({template:'<label class="item item-input"><i class="icon ion-person placeholder-icon"></i><input type="text" placeholder="Username" ng-model="data.username"></label><br> <label class="item item-input"><i class="icon ion-locked placeholder-icon"></i><input type="password" placeholder="Password" ng-model="data.password"></label>',title:connector.displayName,subTitle:"Enter Your "+connector.displayName+" Credentials",scope:$scope,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(e){if($scope.data.password&&$scope.data.username)return $scope.data;e.preventDefault()}}]}).then(function(res){connectWithParams({username:$scope.data.username,password:$scope.data.password},connector.name)})),"moodpanda"===connector.name&&($scope.data={},$ionicPopup.show({template:'<label class="item item-input"><i class="icon ion-email placeholder-icon"></i><input type="email" placeholder="Email" ng-model="data.email"></label>',title:connector.displayName,subTitle:"Enter Your "+connector.displayName+" Email",scope:$scope,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(e){if($scope.data.email)return $scope.data;e.preventDefault()}}]}).then(function(res){connectWithParams({email:$scope.data.email},connector.name)})),"moodscope"===connector.name&&($scope.data={},$ionicPopup.show({template:'<label class="item item-input"><i class="icon ion-person placeholder-icon"></i><input type="text" placeholder="Username" ng-model="data.username"></label><br> <label class="item item-input"><i class="icon ion-locked placeholder-icon"></i><input type="password" placeholder="Password" ng-model="data.password"></label>',title:connector.displayName,subTitle:"Enter Your "+connector.displayName+" Credentials",scope:$scope,buttons:[{text:"Cancel"},{text:"<b>Save</b>",type:"button-positive",onTap:function(e){if($scope.data.password&&$scope.data.username)return $scope.data;e.preventDefault()}}]}).then(function(res){connectWithParams({username:$scope.data.username,password:$scope.data.password},connector.name)}))}else webConnect(connector)}else qmService.goToState("app.upgrade")},disconnectConnector=function(connector,button){button.text="Reconnect",qmService.showInfoToast("Disconnected "+connector.displayName),qmService.disconnectConnectorDeferred(connector.name).then(function(){$scope.refreshConnectors()},function(error){qmLogService.error("error disconnecting "+error)})},updateConnector=function(connector,button){button.text="Update Scheduled",connector.message="If you have new data, you should begin to see it in a hour or so.",qmService.updateConnector(connector.name),$scope.safeApply()},getItHere=function(connector){$scope.openUrl(connector.getItUrl,"yes","_system")};$scope.connectorAction=function(connector,button,ev){connector.message=null,-1!==button.text.toLowerCase().indexOf("disconnect")?disconnectConnector(connector,button):-1!==button.text.toLowerCase().indexOf("connect")?connectConnector(connector,button):-1!==button.text.toLowerCase().indexOf("settings")?amazonSettings(connector,0,ev):-1!==button.text.toLowerCase().indexOf("get it")?getItHere(connector):-1!==button.text.toLowerCase().indexOf("update")&&updateConnector(connector,button)},$scope.refreshConnectors=function(){qmService.refreshConnectors().then(function(connectors){$scope.state.connectors=connectors,$scope.$broadcast("scroll.refreshComplete"),qmService.hideLoader(),$scope.state.text=""},function(response){qmLogService.error(response),$scope.$broadcast("scroll.refreshComplete"),qmService.hideLoader()})};var webConnect=function(connector){var url=connector.connectInstructions.url;qmLogService.debug("targetUrl is "+url);window.open(url,"","width=600,height=800");qmLogService.debug("Opened "+url)}}]),angular.module("starter").controller("VariableSearchCtrl",["$scope","$state","$rootScope","$stateParams","$timeout","$filter","qmService","qmLogService",function($scope,$state,$rootScope,$stateParams,$timeout,$filter,qmService,qmLogService){function showAddVariableButtonIfNecessary(variables){if($scope.state.variableSearchQuery.barcode&&$scope.state.variableSearchQuery.barcode===$scope.state.variableSearchQuery.name)return $scope.state.showAddVariableButton=!1;if($scope.state.doNotShowAddVariableButton)return $scope.state.showAddVariableButton=!1;for(var resultIndex=0,found=!1;!found&&resultIndex<$scope.state.variableSearchResults.length;)$scope.state.variableSearchResults[resultIndex].name.toLowerCase()===$scope.state.variableSearchQuery.name.toLowerCase()?found=!0:resultIndex++;(variables.length<1||!found)&&($scope.showSearchLoader=!1,qmLog.info($state.current.name+": $scope.onVariableSearch: Set showAddVariableButton to true",null),$scope.state.showAddVariableButton=!0,"app.reminderAdd"===$scope.state.nextState?$scope.state.addNewVariableButtonText="+ Add "+$scope.state.variableSearchQuery.name+" reminder":"app.measurementAdd"===$scope.state.nextState?$scope.state.addNewVariableButtonText="+ Add "+$scope.state.variableSearchQuery.name+" measurement":$scope.state.addNewVariableButtonText="+ "+$scope.state.variableSearchQuery.name)}function showNoVariablesFoundCardIfNecessary(errorHandler){!$scope.state.variableSearchResults.length&&$scope.state.doNotShowAddVariableButton?($scope.state.noVariablesFoundCard.title=$scope.state.variableSearchQuery.name+" Not Found",$scope.state.noVariablesFoundCard&&$scope.state.noVariablesFoundCard.body?$scope.state.noVariablesFoundCard.body=$scope.state.noVariablesFoundCard.body.replace("__VARIABLE_NAME__",$scope.state.variableSearchQuery.name.toUpperCase()):$scope.state.noVariablesFoundCard.body="You don't have any data for "+$scope.state.variableSearchQuery.name.toUpperCase()+", yet.  Start tracking!",errorHandler&&errorHandler(),$scope.state.noVariablesFoundCard.show=!0):$scope.state.noVariablesFoundCard.show=!1}function variableSearchSuccessHandler(variables,successHandler,errorHandler){successHandler&&variables&&variables.length&&successHandler(),!errorHandler||variables&&variables.length||errorHandler(),$scope.state.noVariablesFoundCard.show=!1,$scope.state.showAddVariableButton=!1,$scope.state.variableSearchResults=variables,qmLog.info("variable search results",null,variables),$scope.state.searching=!1,errorHandler||showAddVariableButtonIfNecessary(variables),showNoVariablesFoundCardIfNecessary(errorHandler)}function setHelpText(){$scope.state.userTaggedVariableObject&&($scope.state.helpText="Search for a variable like an ingredient, category, or duplicate variable that you'd like to tag "+$scope.state.userTaggedVariableObject.name.toUpperCase()+" with.  Then when your tag variable is analyzed, measurements from "+$scope.state.userTaggedVariableObject.name.toUpperCase()+" will be included.",$scope.state.helpText=" <br><br> Search for a variable that you'd like to tag with "+$scope.state.userTaggedVariableObject.name.toUpperCase()+".  Then when "+$scope.state.userTaggedVariableObject.name.toUpperCase()+" is analyzed, measurements from your selected tagged variable will be included. <br><br> For instance, if your currently selected variable were Inflammatory Pain, you could search for and select Back Pain to be tagged with Inflammatory Pain since Inflammatory Pain includes Back Pain.  Then Back Pain measurements would be included when Inflammatory Pain is analyzed"),$scope.state.userTagVariableObject&&($scope.state.helpText="Search for a child variable that you'd like to tag with "+$scope.state.userTagVariableObject.name.toUpperCase()+".  Then when "+$scope.state.userTagVariableObject.name.toUpperCase()+" is analyzed, measurements from your selected tagged variable will be included.",$scope.state.helpText=$scope.state.helpText+" <br><br> For instance, if your currently selected variable were Sugar, you could search for Coke and tag it with 37 grams of sugar per serving. Then coke measurements would be included when analyzing to see how sugar affects you.  <br><br>If your current parent tag variable were Inflammatory Pain, you could search for Back Pain and then your Inflammatory Pain analysis would include Back Pain measurements as well."),!$scope.state.helpText&&$scope.state.variableSearchParameters.variableCategoryName&&$rootScope.variableCategories[$scope.state.variableSearchParameters.variableCategoryName].variableCategoryNameSingular&&($scope.state.helpText="Enter a "+$rootScope.variableCategories[$scope.state.variableSearchParameters.variableCategoryName].variableCategoryNameSingular.toLowerCase()+" in the search box or select one from the list below."),$scope.state.helpText||($scope.state.helpText="Enter a variable in the search box or select one from the list below.")}$scope.controller_name="VariableSearchCtrl",qmService.navBar.setFilterBarSearchIcon(!1),$scope.state=$stateParams,$scope.state.searching=!0,$scope.state.variableSearchResults=[],$scope.state.variableSearchQuery={name:""},$scope.state.noVariablesFoundCard||($scope.state.noVariablesFoundCard={show:!1,title:"No Variables Found",body:"You don't have any data, yet.  Start tracking!"}),$scope.state.title||($scope.state.title="Select Variable"),$scope.state.variableSearchPlaceholderText||($scope.state.variableSearchPlaceholderText="Search for a variable here..."),$scope.$on("$ionicView.beforeEnter",function(e){qmLog.info($state.current.name+" beforeEnter..."),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),$scope.state.variableSearchParameters.variableCategoryName=qmService.getVariableCategoryNameFromStateParamsOrUrl($stateParams),$scope.state.variableSearchParameters.variableCategoryName&&($scope.state.variableSearchPlaceholderText="Search for a "+$filter("wordAliases")(pluralize($scope.state.variableSearchParameters.variableCategoryName,1).toLowerCase())+" here...",$scope.state.title="Select "+$filter("wordAliases")(pluralize($scope.state.variableSearchParameters.variableCategoryName,1)),$scope.state.noVariablesFoundCard.title="No "+$scope.state.variableSearchParameters.variableCategoryName+" Found"),setHelpText()}),$scope.$on("$ionicView.enter",function(e){qmLog.info($state.current.name+" enter..."),populateUserVariables(),setHelpText(),qmService.hideLoader();qm.urlHelper.getParam("upc")&&qmService.barcodeScanner.scanSuccessHandler({text:qm.urlHelper.getParam("upc")},{},function(variables){console.log(variables)},function(error){console.error(error)})}),$scope.selectVariable=function(variableObject){variableObject=qmService.barcodeScanner.addUpcToVariableObject(variableObject),qmLog.info($state.current.name+": $scope.selectVariable: "+JSON.stringify(variableObject).substring(0,140)+"...",null),variableObject.latestMeasurementTime=qm.timeHelper.getUnixTimestampInSeconds(),null!==variableObject.lastValue&&qm.userVariables.saveToLocalStorage(variableObject),qm.userVariables.saveToLocalStorage(variableObject),$scope.state.variableSearchQuery.name="";var userTagData;if("app.favoriteSearch"===$state.current.name)qmService.addToFavoritesUsingVariableObject(variableObject);else if(-1!==window.location.href.indexOf("reminder-search")){var options={skipReminderSettingsIfPossible:$scope.state.skipReminderSettingsIfPossible,doneState:$scope.state.doneState};qmService.addToRemindersUsingVariableObject(variableObject,options)}else-1!==$scope.state.nextState.indexOf("predictor")?qmService.goToState($scope.state.nextState,{effectVariableName:variableObject.name}):-1!==$scope.state.nextState.indexOf("outcome")?qmService.goToState($scope.state.nextState,{causeVariableName:variableObject.name}):$scope.state.userTaggedVariableObject?"/5"!==$scope.state.userTaggedVariableObject.unit.abbreviatedName?qmService.goToState($scope.state.nextState,{userTaggedVariableObject:$scope.state.userTaggedVariableObject,fromState:$scope.state.fromState,fromStateParams:{variableObject:$scope.state.userTaggedVariableObject},userTagVariableObject:variableObject}):(userTagData={userTagVariableId:variableObject.id,userTaggedVariableId:$scope.state.userTaggedVariableObject.id,conversionFactor:1},qmService.showBlackRingLoader(),qmService.postUserTagDeferred(userTagData).then(function(){qmService.hideLoader(),$scope.state.fromState?qmService.goToState($scope.state.fromState,{variableName:$scope.state.userTaggedVariableObject.name}):qmService.goToDefaultState()})):$scope.state.userTagVariableObject?"/5"!==$scope.state.userTagVariableObject.unit.abbreviatedName?qmService.goToState($scope.state.nextState,{userTaggedVariableObject:variableObject,fromState:$scope.state.fromState,fromStateParams:{variableObject:$scope.state.userTagVariableObject},userTagVariableObject:$scope.state.userTagVariableObject}):(userTagData={userTagVariableId:$scope.state.userTagVariableObject.id,userTaggedVariableId:variableObject.id,conversionFactor:1},qmService.showBlackRingLoader(),qmService.postUserTagDeferred(userTagData).then(function(){qmService.hideLoader(),$scope.state.fromState?qmService.goToState($scope.state.fromState,{variableName:$scope.state.userTagVariableObject.name}):qmService.goToDefaultState()})):($scope.state.variableName=variableObject.name,$scope.state.variableObject=variableObject,qmService.goToState($scope.state.nextState,$scope.state))},$scope.goToStateFromVariableSearch=function(stateName){qmService.goToState(stateName,$stateParams)},$scope.onVariableSearch=function(successHandler,errorHandler){$scope.state.noVariablesFoundCard.show=!1,$scope.state.showAddVariableButton=!1,qmLog.info($state.current.name+": Search term: ",null,$scope.state.variableSearchQuery.name),$scope.state.variableSearchQuery.name.length>2?($scope.state.searching=!0,qmService.searchUserVariablesDeferred($scope.state.variableSearchQuery.name,$scope.state.variableSearchParameters).then(function(variables){variableSearchSuccessHandler(variables,successHandler,errorHandler)})):populateUserVariables()};var populateCommonVariables=function(){if($scope.state.variableSearchParameters.includePublic&&!($scope.state.variableSearchQuery.name.length>2)){$scope.state.showAddVariableButton=!1,(!$scope.state.variableSearchResults||$scope.state.variableSearchResults.length<1)&&($scope.state.searching=!0);var params=JSON.parse(JSON.stringify($scope.state.variableSearchParameters));params.commonOnly=!0,qmService.getCommonVariablesDeferred(params,function(commonVariables){commonVariables&&commonVariables.length>0&&$scope.state.variableSearchQuery.name.length<3&&($scope.state.variableSearchResults=qm.arrayHelper.removeArrayElementsWithDuplicateIds($scope.state.variableSearchResults.concat(commonVariables)),$scope.state.searching=!1)},function(error){qmLog.error(error)})}},populateUserVariables=function(){$scope.state.variableSearchQuery.name.length>2||($scope.state.showAddVariableButton=!1,(!$scope.state.variableSearchResults||$scope.state.variableSearchResults.length<1)&&($scope.state.searching=!0),qmService.getFromLocalStorageOrApiDeferred($scope.state.variableSearchParameters).then(function(userVariables){userVariables&&userVariables.length>0?$scope.state.variableSearchQuery.name.length<3&&($scope.state.variableSearchResults=qm.arrayHelper.removeArrayElementsWithDuplicateIds(userVariables.concat($scope.state.variableSearchResults)),$scope.state.searching=!1,$scope.state.noVariablesFoundCard.show=!1):($scope.state.variableSearchParameters.includePublic||($scope.state.noVariablesFoundCard.show=!0,$scope.state.searching=!1),$scope.state.variableSearchResults.length<1&&$scope.state.variableSearchParameters.includePublic&&populateCommonVariables())},function(error){qmLog.error(error)}))};$scope.addNewVariable=function(){var variableObject={};(variableObject=qmService.barcodeScanner.addUpcToVariableObject(variableObject)).name=$scope.state.variableSearchQuery.name,$scope.state.variableSearchParameters.variableCategoryName&&(variableObject.variableCategoryName=$scope.state.variableSearchParameters.variableCategoryName),qmLog.info($state.current.name+": $scope.addNewVariable: "+JSON.stringify(variableObject)),$scope.state.nextState&&($scope.state.variableObject=variableObject,qmService.goToState($scope.state.nextState,$scope.state))};var checkNameExists=function(item){if(!item.name){var message="variable doesn't have a name! variable: "+JSON.stringify(item);return qmLogService.error(null,message),qmLogService.error(null,message),!1}return!0};$scope.matchEveryWord=function(){return function(item){if($scope.state.variableSearchQuery.barcode)return!0;if(!checkNameExists(item))return!1;if(item.variableCategoryName&&$scope.state.variableSearchParameters.manualTracking&&$scope.state.variableSearchQuery.name.length<5&&(-1!==item.variableCategoryName.indexOf("Location")||-1!==item.variableCategoryName.indexOf("Software")||-1!==item.variableCategoryName.indexOf("Environment")))return!1;if($scope.state.excludeDuplicateBloodPressure&&(-1!==item.name.toLowerCase().indexOf("diastolic")||-1!==item.name.toLowerCase().indexOf("systolic")))return!1;if($scope.state.excludeSingularBloodPressure&&"blood pressure"===item.name.toLowerCase())return!1;var variableObjectAsString=JSON.stringify(item).toLowerCase(),lowercaseVariableSearchQuery=$scope.state.variableSearchQuery.name.toLowerCase(),filterBy=lowercaseVariableSearchQuery.split(/\s+/);return!lowercaseVariableSearchQuery||(!filterBy.length||filterBy.every(function(word){if(-1!==variableObjectAsString.indexOf(word))return!0}))}},$scope.scanBarcode=function(){qmService.barcodeScanner.scanBarcode($scope.state.variableSearchParameters,variableSearchSuccessHandler,function(error){qmLog.error(error)})}}]),angular.module("starter").controller("RemindersManageCtrl",["$scope","$state","$stateParams","$ionicPopup","$rootScope","$timeout","$ionicLoading","$filter","$ionicActionSheet","qmService","qmLogService",function($scope,$state,$stateParams,$ionicPopup,$rootScope,$timeout,$ionicLoading,$filter,$ionicActionSheet,qmService,qmLogService){function showAppropriateHelpInfoCards(){$scope.state.showTreatmentInfoCard=(!$scope.state.trackingReminders||0===$scope.state.trackingReminders.length)&&(window.location.href.indexOf("Treatments")>-1||"Anything"===$stateParams.variableCategoryName),$scope.state.showSymptomInfoCard=(!$scope.state.trackingReminders||0===$scope.state.trackingReminders.length)&&window.location.href.indexOf("Symptom")>-1||"Anything"===$stateParams.variableCategoryName}function hideLoader(){$scope.$broadcast("scroll.refreshComplete"),qmService.hideLoader()}function addRemindersToScope(allTrackingReminderTypes){if(hideLoader(),!allTrackingReminderTypes.allTrackingReminders||!allTrackingReminderTypes.allTrackingReminders.length)return qmLogService.info("No reminders!",null),void($scope.state.showNoRemindersCard=!0);qmLogService.info("Got "+allTrackingReminderTypes.allTrackingReminders.length+" "+$stateParams.variableCategoryName+" category allTrackingReminderTypes.allTrackingReminders!",null),$scope.state.showNoRemindersCard=!1,$scope.state.favorites=allTrackingReminderTypes.favorites,$scope.state.trackingReminders=allTrackingReminderTypes.trackingReminders;var count=0;allTrackingReminderTypes.trackingReminders&&allTrackingReminderTypes.trackingReminders.length&&(count=allTrackingReminderTypes.trackingReminders.length),qmLogService.info("Got "+count+" "+$stateParams.variableCategoryName+" category allTrackingReminderTypes.trackingReminders",null),$scope.state.archivedTrackingReminders=allTrackingReminderTypes.archivedTrackingReminders,showAppropriateHelpInfoCards()}$scope.controller_name="RemindersManageCtrl",qmLogService.debug("Loading "+$scope.controller_name,null),qmService.navBar.setFilterBarSearchIcon(!1),qmService.sendToLoginIfNecessaryAndComeBack(),$scope.state={searchText:"",search:null,showButtons:!1,variableCategory:$stateParams.variableCategoryName,showMeasurementBox:!1,selectedReminder:!1,reminderDefaultValue:"",selected1to5Value:!1,trackingReminders:[],measurementDate:new Date,slots:{epochTime:(new Date).getTime()/1e3,format:12,step:1,closeLabel:"Cancel"},variable:{},isDisabled:!1,loading:!0,showTreatmentInfoCard:!1,showSymptomInfoCard:!1,noRemindersTitle:"Add Some Variables",noRemindersText:"You don't have any reminders, yet.",noRemindersIcon:"ion-android-notifications-none"},$scope.$on("$ionicView.beforeEnter",function(e){qmLogService.info("beforeEnter RemindersManageCtrl",null),qm.urlHelper.getParam("variableCategoryName")&&($stateParams.variableCategoryName=qm.urlHelper.getParam("variableCategoryName")),qmService.showBasicLoader(),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),$scope.stateParams=$stateParams;var actionButtons=[{text:'<i class="icon ion-arrow-down-c"></i>Sort by Name'},{text:'<i class="icon ion-clock"></i>Sort by Time'}];$stateParams.variableCategoryName&&"Anything"!==$stateParams.variableCategoryName?($scope.state.noRemindersTitle="Add "+$stateParams.variableCategoryName,$scope.state.noRemindersText="You haven't saved any "+$stateParams.variableCategoryName.toLowerCase()+" favorites or reminders here, yet.",$scope.state.noRemindersIcon=qmService.getVariableCategoryInfo($stateParams.variableCategoryName).ionIcon,$scope.stateParams.title||($scope.stateParams.title=$stateParams.variableCategoryName),$scope.stateParams.addButtonText||($scope.stateParams.addButtonText="Add New "+pluralize($filter("wordAliases")($stateParams.variableCategoryName),1)),$scope.stateParams.addMeasurementButtonText="Add  "+pluralize($filter("wordAliases")($stateParams.variableCategoryName),1)+" Measurement",actionButtons[2]={text:'<i class="icon '+qmService.ionIcons.history+'"></i>'+$stateParams.variableCategoryName+" History"},actionButtons[3]={text:'<i class="icon '+qmService.ionIcons.reminder+'"></i>'+$scope.stateParams.addButtonText}):($scope.stateParams.title||($rootScope.platform.isMobile?$scope.stateParams.title="Reminders":$scope.stateParams.title="Manage Reminders"),$scope.stateParams.addButtonText||($scope.stateParams.addButtonText="Add a Variable"),$scope.stateParams.addMeasurementButtonText||($scope.stateParams.addMeasurementButtonText="Record Measurement"),actionButtons[2]=qmService.actionSheets.actionSheetButtons.historyAllCategory,actionButtons[3]=qmService.actionSheets.actionSheetButtons.reminderSearch),actionButtons[4]=qmService.actionSheets.actionSheetButtons.measurementAddSearch,actionButtons[5]=qmService.actionSheets.actionSheetButtons.charts,actionButtons[6]=qmService.actionSheets.actionSheetButtons.refresh,actionButtons[7]=qmService.actionSheets.actionSheetButtons.settings,$scope.state.showButtons=!0,getTrackingReminders(),qmService.rootScope.setShowActionSheetMenu(function(){var hideSheet=$ionicActionSheet.show({buttons:actionButtons,cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED",null)},buttonClicked:function(index){return qmLogService.debug("BUTTON CLICKED",null,index),0===index&&($rootScope.reminderOrderParameter="variableName"),1===index&&($rootScope.reminderOrderParameter="reminderStartTimeLocal"),2===index&&qmService.goToState("app.historyAll",{variableCategoryName:$stateParams.variableCategoryName}),3===index&&qmService.goToState("app.reminderSearch",{variableCategoryName:$stateParams.variableCategoryName}),4===index&&qmService.goToState("app.measurementAddSearch",{variableCategoryName:$stateParams.variableCategoryName}),5===index&&qmService.goToState("app.chartSearch",{variableCategoryName:$stateParams.variableCategoryName}),6===index&&$scope.refreshReminders(),7===index&&qmService.goToState(qmStates.settings),!0}});$timeout(function(){hideSheet()},2e4)})}),$rootScope.reminderOrderParameter||($rootScope.reminderOrderParameter="variableName"),$scope.refreshReminders=function(){qmService.showInfoToast("Syncing..."),qmService.syncTrackingReminders(!0).then(function(){hideLoader(),getTrackingReminders()})};var getTrackingReminders=function(){qm.urlHelper.getParam("variableCategoryName")&&($stateParams.variableCategoryName=qm.urlHelper.getParam("variableCategoryName")),qmLogService.info("Getting "+$stateParams.variableCategoryName+" category reminders",null),qmService.getAllReminderTypes($stateParams.variableCategoryName).then(function(allTrackingReminderTypes){addRemindersToScope(allTrackingReminderTypes)})};$scope.showMoreNotificationInfoPopup=function(){$ionicPopup.show({title:"Individual Notifications Disabled",subTitle:"Currently, you will only get one non-specific repeating device notification at a time.",scope:$scope,template:"It is possible to instead get a separate device notification for each tracking reminder that you create.  You can change this setting or update the notification frequency on the settings page.",buttons:[{text:"Settings",type:"button-positive",onTap:function(e){qmService.goToState("app.settings")}},{text:"OK",type:"button-assertive"}]}).then(function(res){qmLogService.debug("Tapped!",null,res)})},$scope.edit=function(trackingReminder){trackingReminder.fromState=$state.current.name,qmService.goToState("app.reminderAdd",{reminder:trackingReminder,fromUrl:window.location.href})},$scope.addNewReminderButtonClick=function(){$stateParams.variableCategoryName&&"Anything"!==$stateParams.variableCategoryName?qmService.goToState("app.reminderSearch",{variableCategoryName:$stateParams.variableCategoryName,fromUrl:window.location.href}):qmService.goToState("app.reminderSearch")},$scope.addNewMeasurementButtonClick=function(){$stateParams.variableCategoryName&&"Anything"!==$stateParams.variableCategoryName?qmService.goToState("app.measurementAddSearch",{variableCategoryName:$stateParams.variableCategoryName}):qmService.goToState("app.measurementAddSearch")},$scope.addMeasurementForReminder=function(trackingReminder){qmService.goToState("app.measurementAdd",{trackingReminder:trackingReminder,variableName:trackingReminder.variableName})},$scope.deleteReminder=function(reminder){reminder.hide=!0,qmService.storage.deleteById("trackingReminders",reminder.trackingReminderId),qmService.deleteTrackingReminderDeferred(reminder).then(function(){qmLogService.debug("Reminder deleted",null)},function(error){qmLogService.error("Failed to Delete Reminder: "+error)})},$scope.showActionSheet=function(trackingReminder){var variableObject=qmService.convertTrackingReminderToVariableObject(trackingReminder),buttons=[{text:'<i class="icon ion-android-notifications-none"></i>Edit Reminder'},qmService.actionSheets.actionSheetButtons.measurementAdd,qmService.actionSheets.actionSheetButtons.charts,qmService.actionSheets.actionSheetButtons.historyAllVariable,qmService.actionSheets.actionSheetButtons.variableSettings];buttons.push(qmService.actionSheets.actionSheetButtons.compare),variableObject.outcome?buttons.push(qmService.actionSheets.actionSheetButtons.predictors):buttons.push(qmService.actionSheets.actionSheetButtons.outcomes),buttons=qmService.actionSheets.addActionArrayButtonsToActionSheet(trackingReminder.actionArray,buttons);var hideSheet=$ionicActionSheet.show({buttons:buttons,destructiveText:'<i class="icon ion-trash-a"></i>Delete',cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED",null)},buttonClicked:function(index){qmLogService.debug("BUTTON CLICKED",null,index),0===index&&$scope.edit(trackingReminder),1===index&&qmService.goToState("app.measurementAdd",{variableObject:variableObject,variableName:variableObject.name}),2===index&&qmService.goToState("app.charts",{variableObject:variableObject,variableName:variableObject.name}),3===index&&qmService.goToState("app.historyAllVariable",{variableObject:variableObject,variableName:variableObject.name}),4===index&&qmService.goToVariableSettingsByObject(variableObject),5===index&&qmService.goToCorrelationsListForVariable(variableObject),6===index&&variableObject&&qmService.goToStudyCreationForVariable(variableObject);for(var buttonIndex=7,i=0;i<trackingReminder.actionArray.length;i++)"snooze"!==trackingReminder.actionArray[i].action&&(index===buttonIndex&&$scope.trackByFavorite(trackingReminder,trackingReminder.actionArray[i].modifiedValue),buttonIndex++);return!0},destructiveButtonClicked:function(){return $scope.deleteReminder(trackingReminder),!0}});$timeout(function(){hideSheet()},2e4)},$rootScope.$on("broadcastGetTrackingReminders",function(){qmLogService.info("broadcastGetTrackingReminders broadcast received.."),getTrackingReminders()})}]),angular.module("starter").controller("ReminderAddCtrl",["$scope","$state","$stateParams","$ionicLoading","$filter","$timeout","$rootScope","$ionicActionSheet","$ionicHistory","qmService","qmLogService","ionicTimePicker","$interval",function($scope,$state,$stateParams,$ionicLoading,$filter,$timeout,$rootScope,$ionicActionSheet,$ionicHistory,qmService,qmLogService,ionicTimePicker,$interval){function getFrequencySecondsFromFrequencyName(frequencyName){return{"As-Needed":0,"Every 12 hours":43200,"Every 8 hours":28800,"Every 6 hours":21600,"Every 4 hours":14400,"Every 3 hours":10800,"Every 30 minutes":1800,"Every minute":60,Hourly:3600,Daily:86400,"Twice a day":43200,"Three times a day":28800,Minutely:60,"Every other day":172800,Weekly:604800,"Every 2 weeks":1209600,"Every 4 weeks":2419200}[frequencyName]}function getFrequencyNameFromFrequencySeconds(frequencyName){return{604800:"Weekly",1209600:"Every 2 weeks",2419200:"Every 4 weeks",172800:"Every other day",86400:"Daily",43200:"Every 12 hours",28800:"Every 8 hours",21600:"Every 6 hours",14400:"Every 4 hours",10800:"Every 3 hours",7200:"Every 2 hours",3600:"Hourly",1800:"Every 30 minutes",60:"Every minute",0:"As-Needed"}[frequencyName]}function setupReminderEditingFromVariableId(variableId){variableId&&qmService.getVariableByIdDeferred(variableId).then(function(variables){$scope.state.variableObject=variables[0],qmLogService.debug("setupReminderEditingFromVariableId got this variable object "+JSON.stringify($scope.state.variableObject),null),setupByVariableObject($scope.state.variableObject),qmService.hideLoader()},function(){qmService.hideLoader(),qmLogService.error("ERROR: failed to get variable with id "+variableId)})}function setupReminderEditingFromUrlParameter(reminderIdUrlParameter){qmService.getTrackingReminderByIdDeferred(reminderIdUrlParameter).then(function(reminders){1!==reminders.length&&(validationFailure("Reminder id "+reminderIdUrlParameter+" not found!","assertive"),$scope.goBack()),$stateParams.reminder=reminders[0],setupEditReminder($stateParams.reminder),qmService.hideLoader()},function(){qmService.hideLoader(),qmLogService.error("ERROR: failed to get reminder with reminderIdUrlParameter "+reminderIdUrlParameter)})}function setHideDefaultValueField(){$scope.state.trackingReminder.variableName&&($scope.state.trackingReminder.variableName.toLowerCase().indexOf("blood pressure")>-1||"/5"===$scope.state.trackingReminder.unitAbbreviatedName||"/10"===$scope.state.trackingReminder.unitAbbreviatedName||"yes/no"===$scope.state.trackingReminder.unitAbbreviatedName?$scope.state.hideDefaultValueField=!0:$scope.state.hideDefaultValueField=!1)}function showMoreUnits(){$scope.state.units=qm.unitHelper.getProgressivelyMoreUnits($scope.state.units),$scope.state.trackingReminder.unitAbbreviatedName=null,$scope.state.trackingReminder.unitName=null,$scope.state.trackingReminder.unitId=null}$scope.controller_name="ReminderAddCtrl",qmLogService.debug("Loading "+$scope.controller_name,null),qmService.navBar.setFilterBarSearchIcon(!1),$scope.state={units:qm.unitHelper.getProgressivelyMoreUnits(),showAddVariableCard:!1,showUnits:!1,selectedFrequencyName:"Daily",selectedReminder:!1,measurementSynonymSingularLowercase:"measurement",defaultValueLabel:"Default Value",defaultValuePlaceholderText:"Enter typical value",selectedStopTrackingDate:null,showMoreOptions:!1,showMoreUnits:!1,trackingReminder:{variableId:null,variableName:null,combinationOperation:null},variableCategoryNames:qm.manualTrackingVariableCategoryNames},$scope.variables={frequencyVariables:[{id:2,name:"Daily"},{id:1,name:"As-Needed"},{id:3,name:"Every 12 hours"},{id:4,name:"Every 8 hours"},{id:5,name:"Every 6 hours"},{id:6,name:"Every 4 hours"},{id:7,name:"Every 3 hours"},{id:8,name:"Every 2 hours"},{id:9,name:"Hourly"},{id:10,name:"Every 30 minutes"},{id:11,name:"Every other day"},{id:12,name:"Weekly"},{id:13,name:"Every 2 weeks"},{id:14,name:"Every 4 weeks"}]},$rootScope.user&&($rootScope.user.administrator||$rootScope.user.email.toLowerCase().indexOf("test")>-1)&&$scope.variables.frequencyVariables.push({id:15,name:"Minutely"}),$rootScope.user||qmService.refreshUser(),$scope.$on("$ionicView.beforeEnter",function(){qmLogService.info("ReminderAddCtrl beforeEnter..."),$scope.state.savingText="Save";$ionicHistory.backView();qm.variableCategoryHelper.getVariableCategoriesFromGlobalsOrApi(function(variableCategories){$scope.state.variableCategories=variableCategories}),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),qmService.sendToLoginIfNecessaryAndComeBack(),$stateParams.variableObject&&($stateParams.variableCategoryName=$stateParams.variableObject.variableCategoryName),$stateParams.reminder&&($stateParams.variableCategoryName=$stateParams.reminder.variableCategoryName),$scope.stateParams=$stateParams,setTitle();var reminderIdUrlParameter=qm.urlHelper.getParam("reminderId"),variableIdUrlParameter=qm.urlHelper.getParam("variableId");$stateParams.variableObject?($scope.state.variableObject=$stateParams.variableObject,setupByVariableObject($stateParams.variableObject)):$stateParams.reminder&&null!==$stateParams.reminder?setupEditReminder($stateParams.reminder):reminderIdUrlParameter?setupReminderEditingFromUrlParameter(reminderIdUrlParameter):variableIdUrlParameter?setupReminderEditingFromVariableId(variableIdUrlParameter):$stateParams.variableName?setupByVariableObject({variableName:$stateParams.variableName}):$stateParams.variableCategoryName?($scope.state.trackingReminder.variableCategoryName=$stateParams.variableCategoryName,setupVariableCategory($scope.state.trackingReminder.variableCategoryName)):qm.storage.getItem(qm.items.lastReminder)?$scope.state.trackingReminder=qm.storage.getItem(qm.items.lastReminder):qm.getPrimaryOutcomeVariable()?($scope.state.variableObject=qm.getPrimaryOutcomeVariable(),setupByVariableObject(qm.getPrimaryOutcomeVariable())):$scope.goBack(),$stateParams.skipReminderSettingsIfPossible,$scope.state.trackingReminder.variableCategoryName&&""!==$scope.state.trackingReminder.variableCategoryName||($scope.state.showAddVariableCard=!0)}),$scope.$on("$ionicView.afterEnter",function(){qmLogService.info("ReminderAddCtrl beforeEnter..."),qmService.hideLoader(),qm.storage.setItem(qm.items.lastReminder,$scope.state.trackingReminder),setHideDefaultValueField()}),$scope.showMoreOptions=function(){$scope.state.showMoreOptions=!0},$rootScope.user?($scope.state.firstReminderStartTimeLocal=$rootScope.user.earliestReminderTime,$scope.state.firstReminderStartTimeEpochTime=qmService.getEpochTimeFromLocalStringRoundedToHour("20:00:00"),$scope.state.firstReminderStartTimeMoment=moment(1e3*$scope.state.firstReminderStartTimeEpochTime)):qmLogService.error($state.current.name+": $rootScope.user is not defined!"),$scope.openReminderStartTimePicker=function(order){var a=new Date;"first"===order&&($scope.state.firstReminderStartTimeEpochTime=a.getTime()/1e3,$scope.state.firstReminderStartTimeLocal=moment(a).format("HH:mm:ss"),$scope.state.firstReminderStartTimeMoment=moment(a)),"second"===order&&($scope.state.secondReminderStartTimeEpochTime=a.getTime()/1e3,$scope.state.secondReminderStartTimeLocal=moment(a).format("HH:mm:ss"),$scope.state.secondReminderStartTimeMoment=moment(a)),"third"===order&&($scope.state.hideAdditionalReminderTimeButton=!0,$scope.state.thirdReminderStartTimeEpochTime=a.getTime()/1e3,$scope.state.thirdReminderStartTimeLocal=moment(a).format("HH:mm:ss"),$scope.state.thirdReminderStartTimeMoment=moment(a))},$scope.oldOpenReminderStartTimePicker=function(order){var defaultStartTimeInSecondsSinceMidnightLocal=qmService.getSecondsSinceMidnightLocalFromLocalString($rootScope.user.earliestReminderTime);"first"===order&&$scope.state.firstReminderStartTimeLocal&&(defaultStartTimeInSecondsSinceMidnightLocal=qmService.getSecondsSinceMidnightLocalFromLocalString($scope.state.firstReminderStartTimeLocal)),"second"===order&&$scope.state.secondReminderStartTimeLocal&&(defaultStartTimeInSecondsSinceMidnightLocal=qmService.getSecondsSinceMidnightLocalFromLocalString($scope.state.secondReminderStartTimeLocal)),"third"===order&&$scope.state.thirdReminderStartTimeLocal&&(defaultStartTimeInSecondsSinceMidnightLocal=qmService.getSecondsSinceMidnightLocalFromLocalString($scope.state.thirdReminderStartTimeLocal)),defaultStartTimeInSecondsSinceMidnightLocal=qmService.getSecondsSinceMidnightLocalRoundedToNearestFifteen(defaultStartTimeInSecondsSinceMidnightLocal),$scope.state.timePickerConfiguration={callback:function(val){if(void 0===val)qmLogService.debug("Time not selected",null);else{var a=new Date,selectedTime=new Date(1e3*val);a.setHours(selectedTime.getUTCHours()),a.setMinutes(selectedTime.getUTCMinutes()),a.setSeconds(0),qmLogService.debug("Selected epoch is: ",val,"and the time is ",selectedTime.getUTCHours(),"H :",selectedTime.getUTCMinutes(),"M"),"first"===order&&($scope.state.firstReminderStartTimeEpochTime=a.getTime()/1e3,$scope.state.firstReminderStartTimeLocal=moment(a).format("HH:mm:ss"),$scope.state.firstReminderStartTimeMoment=moment(a)),"second"===order&&($scope.state.secondReminderStartTimeEpochTime=a.getTime()/1e3,$scope.state.secondReminderStartTimeLocal=moment(a).format("HH:mm:ss"),$scope.state.secondReminderStartTimeMoment=moment(a)),"third"===order&&($scope.state.hideAdditionalReminderTimeButton=!0,$scope.state.thirdReminderStartTimeEpochTime=a.getTime()/1e3,$scope.state.thirdReminderStartTimeLocal=moment(a).format("HH:mm:ss"),$scope.state.thirdReminderStartTimeMoment=moment(a))}},inputTime:defaultStartTimeInSecondsSinceMidnightLocal,step:15,closeLabel:"Cancel"},ionicTimePicker.openTimePicker($scope.state.timePickerConfiguration)};var setupByVariableObject=function(selectedVariable){qmLogService.info("remindersAdd.setupByVariableObject: "+selectedVariable.name,null),selectedVariable.variableCategoryName||($scope.state.showAddVariableCard=!0),$scope.state.variableObject=selectedVariable,setupVariableCategory(selectedVariable.variableCategoryName),selectedVariable.unitAbbreviatedName?$scope.state.trackingReminder.unitAbbreviatedName=selectedVariable.unitAbbreviatedName:qmLogService.error("selectedVariable does not have unitAbbreviatedName",selectedVariable),selectedVariable.combinationOperation&&($scope.state.trackingReminder.combinationOperation=selectedVariable.combinationOperation),selectedVariable.id&&($scope.state.trackingReminder.variableId=selectedVariable.id),selectedVariable.name&&($scope.state.trackingReminder.variableName=selectedVariable.name),selectedVariable.variableName&&($scope.state.trackingReminder.variableName=selectedVariable.variableName),selectedVariable.upc&&($scope.state.trackingReminder.upc=selectedVariable.upc),setHideDefaultValueField(),selectedVariable.valence&&($scope.state.trackingReminder.valence=selectedVariable.valence),showMoreUnitsIfNecessary()};$scope.showAdditionalReminderTime=function(){$scope.state.secondReminderStartTimeEpochTime?$scope.state.thirdReminderStartTimeEpochTime||$scope.openReminderStartTimePicker("third"):$scope.openReminderStartTimePicker("second")},$scope.oldShowAdditionalReminderTime=function(){$scope.state.secondReminderStartTimeEpochTime?$scope.state.thirdReminderStartTimeEpochTime||$scope.oldOpenReminderStartTimePicker("third"):$scope.oldOpenReminderStartTimePicker("second")};var validationFailure=function(message){qmService.showMaterialAlert("Whoops!",message),qmLogService.error(message,{trackingReminder:$scope.state.trackingReminder})},validReminderSettings=function(){return $scope.state.trackingReminder.variableCategoryName?$scope.state.trackingReminder.variableName?$scope.state.trackingReminder.unitAbbreviatedName?($scope.state.trackingReminder.unitId=qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].id,qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName]&&void 0!==qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].minimumValue&&null!==qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].minimumValue&&null!==$scope.state.trackingReminder.defaultValue&&$scope.state.trackingReminder.defaultValue<qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].minimumValue?(validationFailure(qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].minimumValue+" is the smallest possible value for the unit "+qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].name+".  Please select another unit or value."),!1):qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName]&&void 0!==qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].maximumValue&&null!==qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].maximumValue&&null!==$scope.state.trackingReminder.defaultValue&&$scope.state.trackingReminder.defaultValue>qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].maximumValue?(validationFailure(qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].maximumValue+" is the largest possible value for the unit "+qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].name+".  Please select another unit or value."),!1):!($scope.state.selectedStopTrackingDate&&$scope.state.selectedStartTrackingDate&&$scope.state.selectedStopTrackingDate<$scope.state.selectedStartTrackingDate)||(validationFailure("Start date cannot be later than the end date"),!1)):(validationFailure("Please select a unit for "+$scope.state.trackingReminder.variableName),!1):(validationFailure("Please enter a variable name"),!1):(validationFailure("Please select a variable category"),!1)},configureReminderTimeSettings=function(trackingReminder,reminderStartTimeEpochTime){var updatedTrackingReminder=trackingReminder;return updatedTrackingReminder.reminderStartTimeEpochTime=reminderStartTimeEpochTime,updatedTrackingReminder.reminderStartTimeLocal=moment(1e3*reminderStartTimeEpochTime).format("HH:mm:ss"),updatedTrackingReminder.reminderStartTimeLocal<$rootScope.user.earliestReminderTime&&validationFailure(updatedTrackingReminder.reminderStartTimeLocal+" is earlier than your earliest allowed notification time.  You can change your earliest notification time on the settings page."),updatedTrackingReminder.reminderStartTimeLocal>$rootScope.user.latestReminderTime&&validationFailure(updatedTrackingReminder.reminderStartTimeLocal+" is later than your latest allowed notification time.  You can change your latest notification time on the settings page."),updatedTrackingReminder.valueAndFrequencyTextDescriptionWithTime=qmService.getValueAndFrequencyTextDescriptionWithTime(updatedTrackingReminder),updatedTrackingReminder.reminderStartTime=qmService.getUtcTimeStringFromLocalString(updatedTrackingReminder.reminderStartTimeLocal),updatedTrackingReminder.reminderStartTimeEpochSeconds=reminderStartTimeEpochTime,updatedTrackingReminder.nextReminderTimeEpochSeconds=reminderStartTimeEpochTime,updatedTrackingReminder};$scope.save=function(){if(qmLogService.info("Clicked save reminder"),$stateParams.favorite&&($scope.state.trackingReminder.reminderFrequency=0,$scope.state.trackingReminder.valueAndFrequencyTextDescription="As Needed"),!validReminderSettings())return!1;$scope.state.trackingReminder.reminderFrequency=getFrequencySecondsFromFrequencyName($scope.state.selectedFrequencyName),$scope.state.trackingReminder.valueAndFrequencyTextDescription=$scope.state.selectedFrequencyName,$scope.state.trackingReminder.stopTrackingDate=$scope.state.trackingReminder.startTrackingDate=null,$scope.state.selectedStopTrackingDate&&($scope.state.trackingReminder.stopTrackingDate=moment($scope.state.selectedStopTrackingDate).format("YYYY-MM-DD")),$scope.state.selectedStartTrackingDate&&($scope.state.trackingReminder.startTrackingDate=moment($scope.state.selectedStartTrackingDate).format("YYYY-MM-DD"));var remindersArray=[];void 0===$scope.state.trackingReminder.defaultValue&&($scope.state.trackingReminder.defaultValue=null),remindersArray[0]=JSON.parse(JSON.stringify($scope.state.trackingReminder)),$scope.state.firstReminderStartTimeMoment&&($scope.state.firstReminderStartTimeMoment=moment($scope.state.firstReminderStartTimeMoment),$scope.state.firstReminderStartTimeEpochTime=parseInt($scope.state.firstReminderStartTimeMoment.format("X"))),remindersArray[0]=configureReminderTimeSettings(remindersArray[0],$scope.state.firstReminderStartTimeEpochTime),$scope.state.secondReminderStartTimeMoment&&($scope.state.secondReminderStartTimeMoment=moment($scope.state.secondReminderStartTimeMoment),$scope.state.secondReminderStartTimeEpochTime=parseInt($scope.state.secondReminderStartTimeMoment.format("X"))),$scope.state.secondReminderStartTimeEpochTime&&(remindersArray[1]=JSON.parse(JSON.stringify($scope.state.trackingReminder)),remindersArray[1].id=null,remindersArray[1]=configureReminderTimeSettings(remindersArray[1],$scope.state.secondReminderStartTimeEpochTime)),$scope.state.thirdReminderStartTimeMoment&&($scope.state.thirdReminderStartTimeMoment=moment($scope.state.thirdReminderStartTimeMoment),$scope.state.thirdReminderStartTimeEpochTime=$scope.state.thirdReminderStartTimeMoment.format("X")),$scope.state.thirdReminderStartTimeEpochTime&&(remindersArray[2]=JSON.parse(JSON.stringify($scope.state.trackingReminder)),remindersArray[2].id=null,remindersArray[2]=configureReminderTimeSettings(remindersArray[2],$scope.state.thirdReminderStartTimeEpochTime)),$scope.state.trackingReminder.id&&qmService.storage.deleteById("trackingReminders",$scope.state.trackingReminder.id),qmService.showBasicLoader(),qmService.addToTrackingReminderSyncQueue(remindersArray),$scope.state.savingText="Saving "+$scope.state.trackingReminder.variableName+"...",qmService.showInfoToast($scope.state.savingText),qmService.syncTrackingReminders(!0).then(function(){var toastMessage=$scope.state.trackingReminder.variableName+" saved";qmService.showInfoToast(toastMessage),qmService.hideLoader(),$scope.goBack()})};var setupEditReminder=function(trackingReminder){if($scope.state.trackingReminder=trackingReminder,setupVariableCategory($scope.state.trackingReminder.variableCategoryName),$scope.state.trackingReminder.firstDailyReminderTime=null,$scope.state.trackingReminder.secondDailyReminderTime=null,$scope.state.trackingReminder.thirdDailyReminderTime=null,$scope.state.firstReminderStartTimeLocal=qmService.getLocalTimeStringFromUtcString(trackingReminder.reminderStartTime),$scope.state.firstReminderStartTimeEpochTime=qmService.getEpochTimeFromLocalString($scope.state.firstReminderStartTimeLocal),$scope.state.firstReminderStartTimeMoment=moment(1e3*$scope.state.firstReminderStartTimeEpochTime),trackingReminder.stopTrackingDate){$scope.state.selectedStopTrackingDate=new Date(trackingReminder.stopTrackingDate);var beforeNow=moment($scope.state.selectedStopTrackingDate).isBefore();$scope.state.trackingReminder.enabled=!beforeNow}else $scope.state.trackingReminder.enabled=!0;trackingReminder.startTrackingDate&&($scope.state.selectedStartTrackingDate=new Date(trackingReminder.startTrackingDate)),null!==$scope.state.trackingReminder.reminderFrequency&&($scope.state.selectedFrequencyName=getFrequencyNameFromFrequencySeconds($scope.state.trackingReminder.reminderFrequency)),setHideDefaultValueField()};$scope.variableCategorySelectorChange=function(variableCategoryName){$scope.state.variableCategoryObject=qmService.getVariableCategoryInfo(variableCategoryName),$scope.state.trackingReminder.unitAbbreviatedName=$scope.state.variableCategoryObject.defaultUnitAbbreviatedName,$scope.state.defaultValuePlaceholderText="Enter most common value",$scope.state.defaultValueLabel="Default Value",setupVariableCategory(variableCategoryName),showMoreUnitsIfNecessary()};var showMoreUnitsIfNecessary=function(){$scope.state.units=qm.unitHelper.getUnitArrayContaining($scope.state.trackingReminder.unitAbbreviatedName)},setupVariableCategory=function(variableCategoryName){qmLogService.debug("remindersAdd.setupVariableCategory "+variableCategoryName,null),variableCategoryName&&"Anything"!==variableCategoryName||(variableCategoryName=""),$scope.state.trackingReminder.variableCategoryName=variableCategoryName,$scope.state.variableCategoryObject=qmService.getVariableCategoryInfo(variableCategoryName),$scope.state.trackingReminder.unitAbbreviatedName||($scope.state.trackingReminder.unitAbbreviatedName=$scope.state.variableCategoryObject.defaultUnitAbbreviatedName),$scope.state.measurementSynonymSingularLowercase=$scope.state.variableCategoryObject.measurementSynonymSingularLowercase,$scope.state.variableCategoryObject.defaultValueLabel&&($scope.state.defaultValueLabel=$scope.state.variableCategoryObject.defaultValueLabel),$scope.state.variableCategoryObject.defaultValuePlaceholderText&&($scope.state.defaultValuePlaceholderText=$scope.state.variableCategoryObject.defaultValuePlaceholderText),$scope.state.trackingReminder=qmService.addVariableCategoryImagePaths($scope.state.trackingReminder),showMoreUnitsIfNecessary(),setHideDefaultValueField()},setTitle=function(){$stateParams.favorite?($scope.state.selectedFrequencyName="As-Needed",$stateParams.reminder?"Treatments"===$stateParams.variableCategoryName?$scope.state.title="Modify As-Needed Med":$scope.state.title="Edit Favorite":"Treatments"===$stateParams.variableCategoryName?$scope.state.title="Add As-Needed Med":$scope.state.title="Add Favorite"):$stateParams.reminder?$scope.state.title="Edit Reminder Settings":$scope.state.title="Add Reminder"};$scope.deleteReminder=function(){qmService.storage.deleteById("trackingReminders",$scope.state.trackingReminder.id).then(function(){$scope.goBack()}),qmService.deleteTrackingReminderDeferred($scope.state.trackingReminder).then(function(){},function(error){qmLogService.error(error)})},$scope.unitSelected=function(){$scope.state.showVariableCategorySelector=!0,"Show more units"===$scope.state.trackingReminder.unitAbbreviatedName?showMoreUnits():(qmLogService.debug("selecting_unit",null,$scope.state.trackingReminder.unitAbbreviatedName),$scope.state.trackingReminder.unitName=qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].name,$scope.state.trackingReminder.unitId=qm.unitsIndexedByAbbreviatedName[$scope.state.trackingReminder.unitAbbreviatedName].id),setHideDefaultValueField()},$scope.frequencySelected=function(){$scope.state.trackingReminder.reminderFrequency=getFrequencySecondsFromFrequencyName($scope.state.selectedFrequencyName)},$scope.showUnitsDropDown=function(){$scope.showUnitsDropDown=!0},qmService.rootScope.setShowActionSheetMenu(function(){$scope.state.variableObject=$scope.state.trackingReminder,$scope.state.variableObject.id=$scope.state.trackingReminder.variableId,$scope.state.variableObject.name=$scope.state.trackingReminder.variableName,qmLogService.debug("ReminderAddCtrl.showActionSheetMenu:   $scope.state.variableObject: ",null,$scope.state.variableObject);var hideSheet=$ionicActionSheet.show({buttons:[qmService.actionSheets.actionSheetButtons.measurementAddVariable,qmService.actionSheets.actionSheetButtons.charts,qmService.actionSheets.actionSheetButtons.historyAllVariable,qmService.actionSheets.actionSheetButtons.variableSettings,{text:'<i class="icon ion-settings"></i>Show More Units'}],destructiveText:'<i class="icon ion-trash-a"></i>Delete Favorite',cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug("CANCELLED",null)},buttonClicked:function(index){return 0===index&&qmService.goToState("app.measurementAddVariable",{variableObject:$scope.state.variableObject,variableName:$scope.state.variableObject.name}),1===index&&qmService.goToState("app.charts",{variableObject:$scope.state.variableObject,variableName:$scope.state.variableObject.name}),2===index&&qmService.goToState("app.historyAllVariable",{variableObject:$scope.state.variableObject,variableName:$scope.state.variableObject.name}),3===index&&qmService.goToVariableSettingsByName($scope.state.trackingReminder.variableName),4===index&&showMoreUnits(),!0},destructiveButtonClicked:function(){return $scope.deleteReminder(),!0}});qmLogService.debug("Setting hideSheet timeout",null),$timeout(function(){hideSheet()},2e4)}),$scope.resetSaveAnimation=function fn(){return $scope.value=0,$interval(function(){$scope.value++},5,100),fn}(),$scope.toggleReminderEnabled=function(){if($scope.state.trackingReminder.enabled)$scope.state.selectedStopTrackingDate=null;else{var moment=moment();$scope.state.selectedStopTrackingDate=moment.subtract(1,"days")}}}]),angular.module("starter").controller("MeasurementAddCtrl",["$scope","$q","$timeout","$state","$rootScope","$stateParams","$filter","$ionicActionSheet","$ionicHistory","qmService","qmLogService",function($scope,$q,$timeout,$state,$rootScope,$stateParams,$filter,$ionicActionSheet,$ionicHistory,qmService,qmLogService){function showMoreUnits(){$scope.state.units=qm.unitHelper.getProgressivelyMoreUnits($scope.state.units),$scope.state.measurement.unitAbbreviatedName=null,$scope.state.measurement.unitName=null,$scope.state.measurement.unitId=null}function setupUnit(unitAbbreviatedName,valence){unitAbbreviatedName?("Show more units"===unitAbbreviatedName?showMoreUnits():(qmLogService.debug("selecting_unit "+unitAbbreviatedName,null),$scope.state.measurement.unitAbbreviatedName=unitAbbreviatedName,$scope.state.measurement.unitName=qm.unitHelper.getByAbbreviatedName(unitAbbreviatedName).name,$scope.state.measurement.unitId=qm.unitHelper.getByAbbreviatedName(unitAbbreviatedName).id),setupValueFieldType(unitAbbreviatedName,valence)):qmLog.info("No unitAbbreviatedName provided to setupUnit! Maybe a new variable?")}function setupValueFieldType(unitAbbreviatedName,valence,variableName){if($scope.state.units=qm.unitHelper.getUnitArrayContaining(unitAbbreviatedName),!unitAbbreviatedName)return qmLogService.error("No unitAbbreviatedName provided to setupValueFieldType"),!1;$scope.state.measurement.inputType=qmService.getInputType(unitAbbreviatedName,valence,variableName)}function setVariableObjectFromMeasurement(){$scope.state.variableObject={unitAbbreviatedName:$scope.state.measurement.unitAbbreviatedName,variableCategoryName:$scope.state.measurement.variableCategoryName?$scope.state.measurement.variableCategoryName:null,id:$scope.state.measurement.variableId?$scope.state.measurement.variableId:null,name:$scope.state.measurement.variableName,valence:$scope.state.measurement.valence}}function setVariableObject(){$scope.state.variableObject&&$scope.state.variableObject===$scope.state.measurement.variableName||($stateParams.variableObject?$scope.state.variableObject=$stateParams.variableObject:setVariableObjectFromMeasurement())}$scope.controller_name="MeasurementAddCtrl";var variableCategoryName=$stateParams.variableCategoryName,variableCategoryObject=qmService.getVariableCategoryInfo(variableCategoryName);qmService.navBar.setFilterBarSearchIcon(!1),$scope.state={measurementIsSetup:!1,showAddVariable:!1,showVariableCategorySelector:!1,showUnits:!1,unitCategories:[],variableCategoryName:variableCategoryName,variableCategoryObject:variableCategoryObject,helpText:variableCategoryObject.helpText,unitAbbreviatedName:"",measurement:{},searchedUnits:[],defaultValueLabel:"Value",defaultValuePlaceholderText:"Enter a value",hideReminderMeButton:!1,editReminder:!1,variableCategoryNames:qm.manualTrackingVariableCategoryNames};var unitChanged=!1;$scope.$on("$ionicView.beforeEnter",function(){unitChanged=!1,qmLogService.debug($state.current.name+": beforeEnter",null),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),qmService.rootScope.setProperty("bloodPressure",{systolicValue:null,diastolicValue:null,show:!1}),$scope.state.title="Record a Measurement",$scope.state.selectedDate=moment(),$stateParams.trackingReminder?setupTrackingByReminderNotification($stateParams.trackingReminder):$stateParams.measurement?setupTrackingByMeasurement($stateParams.measurement):qm.urlHelper.getParam("measurementObject",window.location.href,!0)?setupTrackingByMeasurement(JSON.parse(qm.urlHelper.getParam("measurementObject",window.location.href,!0))):$stateParams.variableObject?setupFromVariableObject($stateParams.variableObject):qm.urlHelper.getParam("trackingReminderObject",window.location.href,!0)?setupTrackingByReminderNotification(JSON.parse(qm.urlHelper.getParam("trackingReminderObject",window.location.href,!0))):$stateParams.reminderNotification?setupTrackingByReminderNotification($stateParams.reminderNotification):qm.urlHelper.getParam("measurementId",location.href,!0)?setMeasurementVariablesByMeasurementId().then(function(){$scope.state.measurementIsSetup||$scope.goBack()}):$stateParams.variableName&&setupFromVariableName($stateParams.variableName),$scope.state.measurementIsSetup||setupFromUrlParameters(),$scope.state.measurementIsSetup||setupFromVariableObject(qm.getPrimaryOutcomeVariable())}),$scope.$on("$ionicView.enter",function(e){qmLogService.debug("$ionicView.enter "+$state.current.name),qmService.hideLoader()});var trackBloodPressure=function(){$rootScope.bloodPressure.diastolicValue&&$rootScope.bloodPressure.systolicValue?($scope.state.selectedDate=moment($scope.state.selectedDate),$rootScope.bloodPressure.startTimeEpoch=parseInt($scope.state.selectedDate.format("X")),$rootScope.bloodPressure.note=$scope.state.measurement.note,qmService.postBloodPressureMeasurements($rootScope.bloodPressure).then(function(){qmLogService.debug("Successfully qmService.postMeasurementByReminder: "+JSON.stringify($rootScope.bloodPressure),null)},function(error){qmLogService.error("Failed to Track by favorite! ",error)}),$scope.goBack()):qmService.validationFailure("Please enter both values for blood pressure.",$scope.state.measurement)};$scope.cancel=function(){$scope.goBack({updatedMeasurementHistory:$stateParams.currentMeasurementHistory})},$scope.deleteMeasurementFromMeasurementAddCtrl=function(){var backStateParams={};$stateParams.currentMeasurementHistory&&(backStateParams.updatedMeasurementHistory=qm.arrayHelper.deleteById($scope.state.measurement.id,$stateParams.currentMeasurementHistory)),qmService.showInfoToast("Deleting "+$scope.state.measurement.variableName+" measurement"),qmService.deleteMeasurementFromServer($scope.state.measurement),$scope.goBack(backStateParams)};var validate=function(){var message;return null===$scope.state.measurement.value||""===$scope.state.measurement.value||void 0===$scope.state.measurement.value?(message="/5"===$scope.state.measurement.unitAbbreviatedName?"Please select a rating":"Please enter a value",qmService.validationFailure(message,$scope.state.measurement),!1):$scope.state.measurement.variableName&&""!==$scope.state.measurement.variableName?$scope.state.measurement.variableCategoryName?$scope.state.measurement.unitAbbreviatedName?(qm.unitHelper.getByAbbreviatedName($scope.state.measurement.unitAbbreviatedName)?$scope.state.measurement.unitId=qm.unitHelper.getByAbbreviatedName($scope.state.measurement.unitAbbreviatedName).id:qmLog.error("Cannot get unit id","abbreviated unit name is "+$scope.state.measurement.unitAbbreviatedName+" and qm.unitsIndexedByAbbreviatedName are "+JSON.stringify(qm.unitsIndexedByAbbreviatedName),{},"error"),!0):(message="Please select a unit for "+$scope.state.measurement.variableName,qmService.validationFailure(message,$scope.state.measurement),!1):(message="Please select a variable category",qmService.validationFailure(message,$scope.state.measurement),!1):(message="Please enter a variable name",qmService.validationFailure(message,$scope.state.measurement),!1)};$scope.done=function(){if($rootScope.bloodPressure.show)trackBloodPressure();else{if(!validate())return!1;if(!qmService.valueIsValid($scope.state.measurement,$scope.state.measurement.value))return!1;if($stateParams.reminderNotification&&$ionicHistory.backView().stateName.toLowerCase().indexOf("inbox")>-1){var params={trackingReminderNotificationId:$stateParams.reminderNotification.id};qmService.skipTrackingReminderNotification(params,function(){qmLogService.debug($state.current.name+": skipTrackingReminderNotification",null)},function(error){qmLogService.error($state.current.name+": skipTrackingReminderNotification error"+error)})}$scope.state.selectedDate=moment($scope.state.selectedDate);var measurementInfo={id:$scope.state.measurement.id,variableName:$scope.state.measurement.variableName||jQuery("#variableName").val(),value:$scope.state.measurement.value,note:$scope.state.measurement.note||jQuery("#note").val(),prevStartTimeEpoch:$scope.state.measurement.prevStartTimeEpoch,startTimeEpoch:parseInt($scope.state.selectedDate.format("X")),unitAbbreviatedName:$scope.state.measurement.unitAbbreviatedName,variableCategoryName:$scope.state.measurement.variableCategoryName,combinationOperation:$scope.state.variableObject.combinationOperation};measurementInfo.value||0===measurementInfo.value||(measurementInfo.value=jQuery("#measurementValue").val()),qmLogService.debug($state.current.name+": measurementAddCtrl.done is posting this measurement: "+JSON.stringify(measurementInfo),null);var toastMessage="Recorded "+$scope.state.measurement.value+" "+$scope.state.measurement.unitAbbreviatedName;toastMessage=toastMessage.replace(" /","/"),qmService.showInfoToast(toastMessage);var backStateParams={};$stateParams.currentMeasurementHistory&&(backStateParams.updatedMeasurementHistory=qm.arrayHelper.replaceElementInArrayById($stateParams.currentMeasurementHistory,$scope.state.measurement)),qmService.postMeasurementDeferred(measurementInfo,function(){unitChanged&&(qmLog.error("Syncing reminders because unit changed"),qm.storage.removeItem(qm.items.trackingReminders),qmService.syncTrackingReminders(),$scope.goBack(backStateParams))}),unitChanged||$scope.goBack(backStateParams)}},$scope.variableCategorySelectorChange=function(variableCategoryName){setupUnit(qmService.getVariableCategoryInfo(variableCategoryName).defaultUnitAbbreviatedName),$scope.state.defaultValuePlaceholderText="Enter a value",$scope.state.defaultValueLabel="Value",setupVariableCategory(variableCategoryName)};var setupVariableCategory=function(variableCategoryName){qmLogService.debug($state.current.name+": variableCategoryName  is "+variableCategoryName,null),variableCategoryName||(variableCategoryName=""),$scope.state.measurement.variableCategoryName=variableCategoryName,$scope.state.title="Add Measurement",$scope.state.measurementSynonymSingularLowercase=qmService.getVariableCategoryInfo(variableCategoryName).measurementSynonymSingularLowercase,qmService.getVariableCategoryInfo(variableCategoryName).defaultValueLabel&&($scope.state.defaultValueLabel=qmService.getVariableCategoryInfo(variableCategoryName).defaultValueLabel),qmService.getVariableCategoryInfo(variableCategoryName).defaultValuePlaceholderText&&($scope.state.defaultValuePlaceholderText=qmService.getVariableCategoryInfo(variableCategoryName).defaultValuePlaceholderText),!$scope.state.measurement.unitAbbreviatedName&&qmService.getVariableCategoryInfo(variableCategoryName).defaultUnitAbbreviatedName&&setupUnit(qmService.getVariableCategoryInfo(variableCategoryName).defaultUnitAbbreviatedName)};$scope.unitSelected=function(){$scope.state.showVariableCategorySelector=!0,setupUnit($scope.state.measurement.unitAbbreviatedName),unitChanged=!0},$scope.selectPrimaryOutcomeVariableValue=function($event,newValue){jQuery(".primary-outcome-variable-rating-buttons .active-primary-outcome-variable-rating-button").removeClass("active-primary-outcome-variable-rating-button"),jQuery($event.target).addClass("active-primary-outcome-variable-rating-button"),jQuery($event.target).parent().removeClass("primary-outcome-variable-history").addClass("primary-outcome-variable-history"),$scope.state.measurement.displayValueAndUnitString&&($scope.state.measurement.displayValueAndUnitString=$scope.state.measurement.displayValueAndUnitString.replace($scope.state.measurement.value,newValue)),$scope.state.measurement.value=newValue,$scope.state.measurement.pngPath=$event.currentTarget.currentSrc,qmLogService.debug($state.current.name+": measurementAddCtrl.selectPrimaryOutcomeVariableValue selected rating value: "+newValue)},$scope.showUnitsDropDown=function(){$scope.showUnitsDropDown=!0};var setupFromUrlParameters=function(){var unitAbbreviatedName=qm.urlHelper.getParam("unitAbbreviatedName",location.href,!0),variableName=qm.urlHelper.getParam("variableName",location.href,!0),startTimeEpoch=qm.urlHelper.getParam("startTimeEpoch",location.href,!0),value=qm.urlHelper.getParam("value",location.href,!0);if(unitAbbreviatedName||variableName||startTimeEpoch||value){var measurementObject={};measurementObject.unitAbbreviatedName=unitAbbreviatedName,measurementObject.variableName=variableName,measurementObject.startTimeEpoch=startTimeEpoch,measurementObject.value=value,setupTrackingByMeasurement(measurementObject)}},setupFromVariableObject=function(variableObject){$stateParams.variableObject=variableObject;var userVariables=qm.storage.getElementsWithRequestParams(qm.items.userVariables,{name:variableObject.name});userVariables&&userVariables.length&&(variableObject=userVariables[0]),$scope.state.variableObject=variableObject,$scope.state.title="Record Measurement",variableObject.unit&&variableObject.unit.abbreviatedName&&(variableObject.unitAbbreviatedName=variableObject.unit.abbreviatedName),variableObject.defaultUnitAbbreviatedName&&(variableObject.unitAbbreviatedName=variableObject.defaultUnitAbbreviatedName),variableObject.unitAbbreviatedName?setupUnit(variableObject.unitAbbreviatedName,variableObject.valence):variableObject.variableCategoryName&&setupUnit(qmService.getVariableCategoryInfo(variableCategoryName).defaultUnitAbbreviatedName,variableObject.valence),variableObject.upc&&($scope.state.measurement.upc=variableObject.upc),variableObject.inputType&&($scope.state.measurement.inputType=variableObject.inputType),$scope.state.measurement.variableName=variableObject.name,$scope.state.measurement.maximumAllowedValue=variableObject.maximumAllowedValue,$scope.state.measurement.minimumAllowedValue=variableObject.minimumAllowedValue,$scope.state.measurement.variableName||($scope.state.measurement.variableName=variableObject.variableName),$scope.state.measurement.variableName.toLowerCase().indexOf("blood pressure")>-1&&($rootScope.bloodPressure.show=!0),variableObject.variableCategoryName?($scope.state.measurement.variableCategoryName=variableObject.variableCategoryName,setupVariableCategory($scope.state.measurement.variableCategoryName)):$scope.state.showVariableCategorySelector=!0,$scope.state.measurement.combinationOperation=variableObject.combinationOperation?variableObject.combinationOperation:"MEAN",$scope.state.measurementIsSetup=!0,"/5"===$scope.state.measurement.unitAbbreviatedName||$scope.state.measurement.value||void 0===variableObject.lastValue||($scope.state.measurement.value=Number(variableObject.lastValueInUserUnit?variableObject.lastValueInUserUnit:variableObject.lastValue))},setupFromVariableName=function(variableName){qmService.showBlackRingLoader(),qm.userVariables.getByName(variableName,{},null,function(variableObject){qmService.hideLoader(),setupFromVariableObject(variableObject)},function(error){$scope.$broadcast("scroll.refreshComplete"),qmService.hideLoader(),qmLogService.error(error)})},setMeasurementVariablesByMeasurementId=function(){var deferred=$q.defer();return qmService.showBlackRingLoader(),qmService.getMeasurementById(qm.urlHelper.getParam("measurementId",location.href,!0)).then(function(measurementObject){qmService.hideLoader(),$scope.state.measurementIsSetup=!0,setupTrackingByMeasurement(measurementObject),deferred.resolve()},function(error){qmService.hideLoader(),qmLogService.error($state.current.name+": Error response: "+error),deferred.reject(error)}),deferred.promise};$scope.goToAddReminder=function(){qmService.goToState("app.reminderAdd",{variableObject:$scope.state.variableObject,fromState:$state.current.name,fromUrl:window.location.href,measurement:$stateParams.measurement})};var setupTrackingByMeasurement=function(measurementObject){isNaN(measurementObject.startTimeEpoch)&&(measurementObject.startTimeEpoch=moment(measurementObject.startTimeEpoch).unix()),measurementObject.id||(measurementObject.prevStartTimeEpoch=measurementObject.startTimeEpoch),$scope.state.title="Edit Measurement",$scope.state.selectedDate=moment(1e3*measurementObject.startTimeEpoch),$scope.state.measurement=measurementObject,$scope.state.measurementIsSetup=!0,setupUnit($scope.state.measurement.unitAbbreviatedName,$scope.state.measurement.valence),$scope.state.measurement.variable&&($scope.state.measurement.variableName=$scope.state.measurement.variable),setVariableObject()},setupTrackingByReminderNotification=function(reminderNotification){reminderNotification&&($scope.state.title="Record Measurement",$scope.state.measurement.unitAbbreviatedName||setupUnit(reminderNotification.unitAbbreviatedName),$scope.state.hideRemindMeButton=!0,$scope.state.measurement.value=reminderNotification.defaultValue,$scope.state.measurement.variableName=reminderNotification.variableName,$scope.state.measurement.variableCategoryName=reminderNotification.variableCategoryName,$scope.state.measurement.combinationOperation=reminderNotification.combinationOperation,"undefined"!==reminderNotification.trackingReminderNotificationTimeEpoch&&reminderNotification.trackingReminderNotificationTimeEpoch&&($scope.state.selectedDate=moment(1e3*reminderNotification.trackingReminderNotificationTimeEpoch)),$scope.state.measurementIsSetup=!0,setupUnit(reminderNotification.unitAbbreviatedName,reminderNotification.valence),setVariableObject()),$scope.state.variableObject||(null!==$stateParams.variableObject&&void 0!==$stateParams.variableObject?$scope.state.variableObject=$stateParams.variableObject:reminderNotification&&($scope.state.variableObject={unitAbbreviatedName:reminderNotification.unitAbbreviatedName,combinationOperation:reminderNotification.combinationOperation,userId:reminderNotification.userId,variableCategoryName:reminderNotification.variableCategoryName,id:reminderNotification.variableId,name:reminderNotification.variableName}))};qmService.rootScope.setShowActionSheetMenu(function(){qmLogService.debug($state.current.name+": measurementAddCtrl.showActionSheetMenu:  $scope.state.variableObject: ",null,$scope.state.variableObject);var hideSheet=$ionicActionSheet.show({buttons:[qmService.actionSheets.actionSheetButtons.reminderAdd,qmService.actionSheets.actionSheetButtons.charts,qmService.actionSheets.actionSheetButtons.historyAllVariable,qmService.actionSheets.actionSheetButtons.variableSettings,{text:'<i class="icon ion-settings"></i>Show More Units'}],destructiveText:'<i class="icon ion-trash-a"></i>Delete Measurement',cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug(null,$state.current.name+": CANCELLED",null)},buttonClicked:function(index){return 0===index&&qmService.goToState("app.reminderAdd",{variableObject:$scope.state.variableObject,variableName:$scope.state.variableObject.name}),1===index&&qmService.goToState("app.charts",{variableObject:$scope.state.variableObject,variableName:$scope.state.variableObject.name}),2===index&&qmService.goToState("app.historyAllVariable",{variableObject:$scope.state.variableObject,variableName:$scope.state.variableObject.name}),3===index&&qmService.goToVariableSettingsByName($scope.state.measurement.variableName),4===index&&showMoreUnits(),!0},destructiveButtonClicked:function(){return $scope.deleteMeasurementFromMeasurementAddCtrl(),!0}});qmLogService.debug("Setting hideSheet timeout",null),$timeout(function(){hideSheet()},2e4)})}]),angular.module("starter").controller("TagAddCtrl",["$scope","$q","$timeout","$state","$rootScope","$stateParams","$filter","$ionicActionSheet","$ionicHistory","$ionicLoading","qmService","qmLogService",function($scope,$q,$timeout,$state,$rootScope,$stateParams,$filter,$ionicActionSheet,$ionicHistory,$ionicLoading,qmService,qmLogService){function addTaggedToTagVariable(){$scope.stateParams.userTaggedVariableObject.tagConversionFactor=$scope.stateParams.tagConversionFactor,$scope.stateParams.userTaggedVariableObject.tagDisplayText=$scope.stateParams.tagConversionFactor+" "+$scope.stateParams.userTagVariableObject.unitName+" of "+$scope.stateParams.userTagVariableObject.name+" per "+$scope.stateParams.userTaggedVariableObject.unitName+" of "+$scope.stateParams.userTaggedVariableObject.name,$scope.stateParams.userTagVariableObject.userTaggedVariables||($scope.stateParams.userTagVariableObject.userTaggedVariables=[]);var userTaggedVariableObject=JSON.parse(JSON.stringify($scope.stateParams.userTaggedVariableObject));$scope.stateParams.userTagVariableObject.userTaggedVariables.push(userTaggedVariableObject),qm.userVariables.saveToLocalStorage($scope.stateParams.userTagVariableObject)}function addTagToTaggedVariable(){$scope.stateParams.userTagVariableObject.tagConversionFactor=$scope.stateParams.tagConversionFactor,$scope.stateParams.userTagVariableObject.tagDisplayText=$scope.stateParams.tagConversionFactor+" "+$scope.stateParams.userTagVariableObject.unitName+" of "+$scope.stateParams.userTagVariableObject.name+" per "+$scope.stateParams.userTaggedVariableObject.unitName+" of "+$scope.stateParams.userTaggedVariableObject.name,$scope.stateParams.userTaggedVariableObject.userTagVariables||($scope.stateParams.userTaggedVariableObject.userTagVariables=[]);var userTagVariableObject=JSON.parse(JSON.stringify($scope.stateParams.userTagVariableObject));$scope.stateParams.userTaggedVariableObject.userTagVariables.push(userTagVariableObject),qm.userVariables.saveToLocalStorage($scope.stateParams.userTaggedVariableObject)}$scope.controller_name="TagAddCtrl",$scope.state={},$scope.cancel=function(){$ionicHistory.goBack()};var goBack=function(){qmService.hideLoader(),$stateParams.fromState&&$stateParams.fromStateParams?qmService.goToState($stateParams.fromState,{}):$scope.goBack()};$scope.deleteTag=function(variableObject){var userTagData={userTagVariableId:$scope.stateParams.userTagVariableObject.id,userTaggedVariableId:$scope.stateParams.userTaggedVariableObject.id};qmService.showBlackRingLoader(),variableObject.userTagVariables&&(variableObject.userTagVariables=variableObject.userTagVariables.filter(function(obj){return obj.id!==$scope.stateParams.userTagVariableObject.id})),variableObject.userTaggedVariables&&(variableObject.userTaggedVariables=variableObject.userTaggedVariables.filter(function(obj){return obj.id!==$scope.stateParams.userTaggedVariableObject.id})),qm.userVariables.saveToLocalStorage(variableObject),qmService.deleteUserTagDeferred(userTagData).then(function(response){goBack()},function(error){qmLogService.error(error),goBack()})},$scope.done=function(){$scope.stateParams.tagConversionFactor||($scope.stateParams.tagConversionFactor=1);var userTagData={userTagVariableId:$scope.stateParams.userTagVariableObject.id,userTaggedVariableId:$scope.stateParams.userTaggedVariableObject.id,conversionFactor:$scope.stateParams.tagConversionFactor};addTaggedToTagVariable(),addTagToTaggedVariable(),qmService.showBlackRingLoader(),qmService.postUserTagDeferred(userTagData).then(function(response){qmLog.info(response),goBack()},function(error){qmLogService.error(error),goBack()})},$scope.$on("$ionicView.enter",function(e){qmLogService.debug("$ionicView.enter "+$state.current.name,null)}),$scope.$on("$ionicView.beforeEnter",function(){$scope.state.title="Record a Tag",$scope.stateParams=$stateParams;qmLogService.debug($state.current.name+": beforeEnter",null)})}]),angular.module("starter").controller("ChartsPageCtrl",["$scope","$q","$state","$timeout","$rootScope","$ionicLoading","$ionicActionSheet","$stateParams","qmService","qmLogService","clipboard",function($scope,$q,$state,$timeout,$rootScope,$ionicLoading,$ionicActionSheet,$stateParams,qmService,qmLogService,clipboard){function getVariableName(){return $scope.variableName?$scope.variableName:qm.urlHelper.getParam("variableName")?qm.urlHelper.getParam("variableName"):$stateParams.variableName?$stateParams.variableName:$stateParams.variableObject?$stateParams.variableObject.name:$scope.state.variableObject?$scope.state.variableObject.name:void $scope.goBack()}function getScopedVariableObject(){return $scope.state.variableObject&&$scope.state.variableObject.name===getVariableName()?$scope.state.variableObject:$stateParams.variableObject?$scope.state.variableObject=$stateParams.variableObject:$scope.state.variableObject}function initializeCharts(){getScopedVariableObject()&&getScopedVariableObject().charts?$stateParams.refresh?$scope.refreshCharts():qmService.hideLoader():(qmService.showBlackRingLoader(),getCharts())}function getCharts(refresh){qm.userVariables.getByName(getVariableName(),{includeCharts:!0},refresh,function(variableObject){qmLog.info("Got variable "+variableObject.name),variableObject.charts||(qmLog.error("No charts!"),$scope.state.variableObject&&$scope.state.variableObject.charts)?($scope.state.variableObject=variableObject,variableObject?(qmLog.info("Setting action sheet with variable "+variableObject.name),qmService.rootScope.setShowActionSheetMenu(function(){return qmService.actionSheets.showVariableObjectActionSheet(getVariableName(),variableObject)})):qmLog.error("No variable for action sheet!"),qmService.hideLoader(),$scope.$broadcast("scroll.refreshComplete")):qmService.goToDefaultState()})}$scope.controller_name="ChartsPageCtrl",qmService.navBar.setFilterBarSearchIcon(!1),$scope.state={title:"Charts"},$scope.$on("$ionicView.enter",function(e){qmLogService.debug("Entering state "+$state.current.name),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),$scope.variableName=getVariableName(),$scope.state.title=qmService.getTruncatedVariableName(getVariableName()),getScopedVariableObject()&&qmService.rootScope.setShowActionSheetMenu(function(){return qmService.actionSheets.showVariableObjectActionSheet(getVariableName(),getScopedVariableObject())}),initializeCharts(),clipboard.supported||(console.log("Sorry, copy to clipboard is not supported"),$scope.hideClipboardButton=!0)}),$scope.refreshCharts=function(){getCharts(!0)},$scope.addNewReminderButtonClick=function(){qmLogService.debug("addNewReminderButtonClick",null),qmService.goToState("app.reminderAdd",{variableObject:$scope.state.variableObject,fromState:$state.current.name})},$scope.compareButtonClick=function(){qmLogService.debug("compareButtonClick"),qmService.goToStudyCreationForVariable($scope.state.variableObject)},$scope.recordMeasurementButtonClick=function(){qmLog.info("Going to record measurement for "+JSON.stringify($scope.state.variableObject)),qmService.goToState(qmStates.measurementAdd,{variableObject:$scope.state.variableObject,fromState:$state.current.name})},$scope.editSettingsButtonClick=function(){qmService.goToVariableSettingsByObject($scope.state.variableObject)},$scope.shareCharts=function(variableObject,sharingUrl,ev){variableObject.shareUserMeasurements?qmService.openSharingUrl(sharingUrl):qmService.showShareVariableConfirmation(variableObject,sharingUrl,ev)}}]),angular.module("starter").controller("StudyCtrl",["$scope","$state","qmService","qmLogService","$stateParams","$ionicHistory","$rootScope","$timeout","$ionicLoading","wikipediaFactory","$ionicActionSheet","clipboard","$mdDialog",function($scope,$state,qmService,qmLogService,$stateParams,$ionicHistory,$rootScope,$timeout,$ionicLoading,wikipediaFactory,$ionicActionSheet,clipboard,$mdDialog){function setAllStateProperties(lastStudyOrCorrelation){lastStudyOrCorrelation&&(!lastStudyOrCorrelation.statistics&&lastStudyOrCorrelation.correlationCoefficient&&(lastStudyOrCorrelation.statistics=JSON.parse(JSON.stringify(lastStudyOrCorrelation))),lastStudyOrCorrelation.statistics?(delete lastStudyOrCorrelation.statistics.studyText,delete lastStudyOrCorrelation.statistics.charts,delete lastStudyOrCorrelation.statistics.highcharts,$scope.correlationObject=lastStudyOrCorrelation.statistics):$scope.correlationObject=lastStudyOrCorrelation,lastStudyOrCorrelation.charts?lastStudyOrCorrelation.charts=qm.arrayHelper.convertObjectToArray(lastStudyOrCorrelation.charts):qmLog.info("No charts on: "+JSON.stringify(lastStudyOrCorrelation).substring(0,140)),$scope.state.study=lastStudyOrCorrelation)}function setAllStatePropertiesAndSaveToLocalStorage(lastStudyOrCorrelation){lastStudyOrCorrelation&&(setAllStateProperties(lastStudyOrCorrelation),qm.studyHelper.saveLastStudy(lastStudyOrCorrelation))}function matchesVariableNames(study){return!!study&&(!getCauseVariableName()||!getEffectVariableName()||(study.causeVariableName===getCauseVariableName()&&study.effectVariableName===getEffectVariableName()||!!study.statistics&&(study.statistics.causeVariableName===getCauseVariableName()&&study.statistics.effectVariableName===getEffectVariableName())))}function getScopedStudyIfMatchesVariableNames(){return matchesVariableNames($stateParams.correlationObject)?$stateParams.correlationObject:$scope.state&&matchesVariableNames($scope.state.study)?$scope.state.study:matchesVariableNames(qm.studyHelper.lastStudyOrCorrelation)?qm.studyHelper.lastStudyOrCorrelation:void 0}function getStatistics(){return $scope.state.study&&$scope.state.study.statistics?$scope.state.study.statistics:$stateParams.correlationObject?$stateParams.correlationObject:void 0}function getStateOrUrlOrRootScopeCorrelationOrRequestParam(paramName){return window.qm.urlHelper.getParam(paramName)?window.qm.urlHelper.getParam(paramName,window.location.href,!0):$stateParams[paramName]?$stateParams[paramName]:$scope.state.requestParams&&$scope.state.requestParams[paramName]?$scope.state.requestParams[paramName]:null}function setupRequestParams(){$scope.state.requestParams.causeVariableName=getCauseVariableName(),$scope.state.requestParams.effectVariableName=getEffectVariableName(),$scope.state.requestParams.userId=getStateOrUrlOrRootScopeCorrelationOrRequestParam("userId")}function getStudyLinks(){if(getScopedStudyIfMatchesVariableNames().studyLinks)return getScopedStudyIfMatchesVariableNames().studyLinks}function getStudyLinkStatic(){if(getStudyLinks())return getStudyLinks().studyLinkStatic}function getCorrelationObjectIfNecessary(){getScopedStudyIfMatchesVariableNames()||qmService.getCorrelationsDeferred($scope.state.requestParams).then(function(data){data.correlations.length&&setAllStatePropertiesAndSaveToLocalStorage(data.correlations[0])},function(error){qmLogService.error("predictorsCtrl: Could not get correlations: "+JSON.stringify(error))})}function getStudy(recalculate){if(!getCauseVariableName()||!getEffectVariableName())return qmLogService.error("Cannot get study. Missing cause or effect variable name."),void qmService.goToDefaultState();getCorrelationObjectIfNecessary(),$scope.loadingCharts=!0,qmService.getStudyDeferred($scope.state.requestParams).then(function(study){qmService.hideLoader(),study&&($scope.state.studyNotFound=!1),setAllStatePropertiesAndSaveToLocalStorage(study),$scope.loadingCharts=!1,setActionSheetMenu()},function(error){qmLogService.error(null,error),qmService.hideLoader(),$scope.loadingCharts=!1,$scope.state.studyNotFound=!0,$scope.state.title="Not Enough Data, Yet",(recalculate||qm.urlHelper.getParam("recalculate"))&&($scope.state.requestParams.recalculate=!0)})}function getEffectVariableName(){return qm.studyHelper.getEffectVariableName($stateParams,$scope,$rootScope)}function getCauseVariableName(){return qm.studyHelper.getCauseVariableName($stateParams,$scope,$rootScope)}function getCauseVariable(){return qm.studyHelper.getCauseVariable($stateParams,$scope,$rootScope)}function getEffectVariable(){return qm.studyHelper.getEffectVariable($stateParams,$scope,$rootScope)}function setActionSheetMenu(){qmService.rootScope.setShowActionSheetMenu(function(){var hideSheet=$ionicActionSheet.show({buttons:[{text:'<i class="icon ion-log-in"></i>'+getCauseVariableName().substring(0,15)+" Settings"},{text:'<i class="icon ion-log-out"></i>'+getEffectVariableName().substring(0,15)+" Settings"},{text:'<i class="icon ion-thumbsup"></i> Seems Right'},qmService.actionSheets.actionSheetButtons.refresh],destructiveText:'<i class="icon ion-thumbsdown"></i>Seems Wrong',cancelText:'<i class="icon ion-ios-close"></i>Cancel',cancel:function(){qmLogService.debug($state.current.name+": CANCELLED",null)},buttonClicked:function(index){return 0===index&&qmService.goToVariableSettingsByObject(getCauseVariable()),1===index&&qmService.goToVariableSettingsByObject(getEffectVariable()),2===index&&$scope.upVote(getStatistics()),3===index&&$scope.refreshStudy(),!0},destructiveButtonClicked:function(){return $scope.downVote(getStatistics()),!0}});$timeout(function(){hideSheet()},2e4)})}function VariableSettingsController(qmService,qmLogService,dialogParameters){var self=this,explanations=qm.help.getExplanations();self.title=explanations[dialogParameters.propertyToUpdate].title,self.helpText=explanations[dialogParameters.propertyToUpdate].explanation,self.placeholder=explanations[dialogParameters.propertyToUpdate].title,explanations[dialogParameters.propertyToUpdate].unitName&&(self.placeholder=self.placeholder+" in "+explanations[dialogParameters.propertyToUpdate].unitName),self.value=dialogParameters.variable[dialogParameters.propertyToUpdate],self.unitName=explanations[dialogParameters.propertyToUpdate].unitName,self.getHelp=function(){if(self.helpText&&!self.showHelp)return self.showHelp=!0;qmService.goToState(window.qmStates.help),$mdDialog.cancel()},self.cancel=function(){self.items=null,$mdDialog.cancel()},self.finish=function(){dialogParameters.variable[dialogParameters.propertyToUpdate]=self.value,$mdDialog.hide(dialogParameters.variable)}}VariableSettingsController.$inject=["qmService","qmLogService","dialogParameters"],$scope.controller_name="StudyCtrl",qmService.navBar.setFilterBarSearchIcon(!1),$scope.$on("$ionicView.beforeEnter",function(){$scope.loadingCharts=!0,qmLogService.debug("beforeEnter state "+$state.current.name),$scope.state={title:"Loading study...",requestParams:{},hideStudyButton:!0,loading:!0,study:null},qmService.hideLoader(),setAllStateProperties(getScopedStudyIfMatchesVariableNames())}),$scope.$on("$ionicView.enter",function(){qmLogService.debug("enter state "+$state.current.name),qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),$stateParams.correlationObject&&setAllStatePropertiesAndSaveToLocalStorage($stateParams.correlationObject),setupRequestParams(),getStudy()}),$scope.$on("$ionicView.afterEnter",function(){qm.loaders.robots(),qm.urlHelper.getParam("causeVariableName")&&qm.urlHelper.getParam("effectVariableName")&&(qmService.stateHelper.previousUrl=window.location.href)}),$scope.refreshStudy=function(){qmService.clearCorrelationCache(),getStudy(!0),qm.windowHelper.scrollToTop()},$scope.joinStudy=function(){qmService.goToState("app.studyJoin",{correlationObject:getStatistics()})},clipboard.supported||(qmLogService.debug("Sorry, copy to clipboard is not supported",null),$scope.hideClipboardButton=!0),$scope.copyLinkText="Copy Shareable Link to Clipboard",$scope.copyStudyUrlToClipboard=function(causeVariableName,effectVariableName){$scope.copyLinkText="Copied!";var studyLink;causeVariableName&&effectVariableName&&(studyLink=qmService.getStudyLinkByVariableNames(causeVariableName,effectVariableName)),getStudyLinkStatic()&&(studyLink=getStudyLinkStatic()),clipboard.copyText(studyLink)},$scope.weightedPeriod=5,$scope.changeVariableSetting=function(variable,propertyToUpdate,ev){$mdDialog.show({controller:VariableSettingsController,controllerAs:"ctrl",templateUrl:"templates/dialogs/variable-settings-dialog.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!1,fullscreen:!1,locals:{dialogParameters:{propertyToUpdate:propertyToUpdate,buttonText:"Save",variable:variable}}}).then(function(variable){qmService.showInfoToast("Re-analyzing data using updated "+qm.stringHelper.camelToTitleCase(propertyToUpdate));var postData={variableName:variable.name};postData[propertyToUpdate]=variable[propertyToUpdate],qmService.postUserVariableDeferred(postData).then(function(response){$scope.refreshStudy()})},function(){qmLogService.debug("User cancelled selection",null)})}}]),angular.module("starter").controller("MapCtrl",["$scope","$cordovaGeolocation","$ionicLoading","$ionicPlatform","$rootScope",function($scope,$cordovaGeolocation,$ionicLoading,$ionicPlatform,$rootScope){$ionicPlatform.ready(function(){function callback(results,status){if(status===google.maps.places.PlacesServiceStatus.OK)for(var i=0;i<results.length;i++){var place=results[i];window.qmLog.debug("Place is ",null,place)}}qmService.navBar.setFilterBarSearchIcon(!1),$ionicLoading.show({template:'<ion-spinner icon="bubbles"></ion-spinner><br/>Acquiring location!'});var posOptions={enableHighAccuracy:!0,timeout:2e4,maximumAge:0};$cordovaGeolocation.getCurrentPosition(posOptions).then(function(position){var lat=position.coords.latitude,long=position.coords.longitude,myLatlng=new google.maps.LatLng(lat,long),mapOptions={center:myLatlng,zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP},map=new google.maps.Map(document.getElementById("map"),mapOptions);$scope.map=map;var request={location:myLatlng,radius:"100"};new google.maps.places.PlacesService(map).nearbySearch(request,callback),qmService.hideLoader()},function(error){qmService.hideLoader(),qmLogService.error(null,error)})})}]),angular.module("starter").controller("OnboardingCtrl",["$scope","$state","$ionicSlideBoxDelegate","$ionicLoading","$rootScope","$stateParams","qmService","qmLogService",function($scope,$state,$ionicSlideBoxDelegate,$ionicLoading,$rootScope,$stateParams,qmService,qmLogService){function initializeAddRemindersPageIfNecessary(){$scope.circlePage.variableCategoryName&&$scope.circlePage.addButtonText&&(qm.variablesHelper.getFromLocalStorageOrApi({variableCategoryName:$scope.circlePage.variableCategoryName,includePublic:!0}),$scope.circlePage.addButtonText="Yes",$scope.circlePage.nextPageButtonText="No")}$scope.state={showSkipButton:!1},$rootScope.appSettings||qmService.rootScope.setProperty("appSettings",window.qm.getAppSettings()),$scope.$on("$ionicView.beforeEnter",function(e){qmLogService.debug("OnboardingCtrl beforeEnter in state "+$state.current.name,null),qmService.navBar.hideNavigationMenu(),qmService.sendToLoginIfNecessaryAndComeBack(qmStates.onboarding)||(qmService.setupOnboardingPages(),qmService.hideLoader(),qmService.navBar.hideNavigationMenu(),$scope.circlePage=$rootScope.appSettings.appDesign.onboarding.active[0])}),$scope.$on("$ionicView.afterEnter",function(){qmLogService.debug("OnboardingCtrl afterEnter in state "+$state.current.name),qmService.getConnectorsDeferred(),qm.reminderHelper.getNumberOfReminders(function(number){number>5&&($scope.state.showSkipButton=!0)}),initializeAddRemindersPageIfNecessary()});var removeImportPage=function(){$rootScope.appSettings.appDesign.onboarding.active=$rootScope.appSettings.appDesign.onboarding.active.filter(function(obj){return-1===obj.id.indexOf("import")}),$rootScope.appSettings.designMode||qmService.storage.setItem("onboardingPages",$rootScope.appSettings.appDesign.onboarding.active),$scope.circlePage=$rootScope.appSettings.appDesign.onboarding.active[0]};$scope.onboardingGoToImportPage=function(){$rootScope.hideHomeButton=!0,qmService.rootScope.setProperty("hideMenuButton",!0),removeImportPage(),$scope.circlePage=$rootScope.appSettings.appDesign.onboarding.active[0],$scope.circlePage.nextPageButtonText="Done connecting data sources",qmService.goToState("app.import")},$scope.goToUpgradePage=function(){qmService.backButtonState=qmStates.onboarding,qmService.goToState("app.upgrade")},$scope.skipOnboarding=function(){qmService.rootScope.setProperty("hideMenuButton",!1),window.qm.storage.setItem(qm.items.onboarded,!0),qmService.goToDefaultState()},$scope.goToReminderSearchFromOnboarding=function(ev){qmService.search.reminderSearch(function(variableObject){$rootScope.appSettings.appDesign.onboarding.active&&$rootScope.appSettings.appDesign.onboarding.active[0]&&-1!==$rootScope.appSettings.appDesign.onboarding.active[0].id.toLowerCase().indexOf("reminder")&&($rootScope.appSettings.appDesign.onboarding.active[0].title=$rootScope.appSettings.appDesign.onboarding.active[0].title.replace("Any","More"),$rootScope.appSettings.appDesign.onboarding.active[0].addButtonText="Add Another",$rootScope.appSettings.appDesign.onboarding.active[0].nextPageButtonText="All Done",$rootScope.appSettings.appDesign.onboarding.active[0].bodyText="Great job!  Now you'll be able to instantly record "+variableObject.name+" in the Reminder Inbox. <br><br>   Want to add any more "+variableObject.variableCategoryName.toLowerCase()+"?",qmService.storage.setItem("onboardingPages",$rootScope.appSettings.appDesign.onboarding.active))},ev,$scope.circlePage.variableCategoryName)},$scope.enableLocationTrackingWithMeasurements=function(event){$scope.trackLocationWithMeasurementsChange(event,!0),$scope.hideOnboardingPage()},$scope.connectWeatherOnboarding=function(event){qmService.connectConnectorWithParamsDeferred({},"worldweatheronline"),$scope.hideOnboardingPage()},$scope.doneOnboarding=function(){qmService.goToState("app.remindersInbox"),qmService.rootScope.setProperty("hideMenuButton",!1),window.qm.storage.setItem(qm.items.onboarded,!0),qm.storage.removeItem("onboardingPages")},$scope.hideOnboardingPage=function(){$rootScope.appSettings.appDesign.onboarding.active=$rootScope.appSettings.appDesign.onboarding.active.filter(function(obj){return obj.id!==$rootScope.appSettings.appDesign.onboarding.active[0].id}),qmService.storage.setItem("onboardingPages",$rootScope.appSettings.appDesign.onboarding.active),$scope.circlePage=$rootScope.appSettings.appDesign.onboarding.active[0],initializeAddRemindersPageIfNecessary(),$rootScope.appSettings.appDesign.onboarding.active&&0!==$rootScope.appSettings.appDesign.onboarding.active.length?qmService.rootScope.setProperty("hideMenuButton",!0):(qmService.rootScope.setProperty("hideMenuButton",!1),qmService.goToDefaultState())},$scope.postMeasurement=function(circlePage,value){circlePage.measurements={value:value},qmService.postMeasurementsToApi(circlePage,function(response){response.success&&qmLogService.info("qmService.postMeasurementsToApi success: "+JSON.stringify(response))}),$scope.hideOnboardingPage()}}]),angular.module("starter").controller("UpgradeCtrl",["$scope","$state","$ionicSlideBoxDelegate","$ionicLoading","$mdDialog","$rootScope","$stateParams","qmService","qmLogService","$locale",function($scope,$state,$ionicSlideBoxDelegate,$ionicLoading,$mdDialog,$rootScope,$stateParams,qmService,qmLogService,$locale){function getFormObj(formId){var formObj={},inputs=$("#"+formId).serializeArray();return $.each(inputs,function(i,input){formObj[input.name]=input.value}),formObj}function stripeTokenHandler(token){var formObject=getFormObj("payment-form");formObject.productId=$scope.productId,formObject.couponCode=$scope.state.coupon,formObject.stripeToken=token,qmService.postCreditCardDeferred(formObject)}function stripeSetup(){var stripe=Stripe("pk_live_jwzyvmlPu1cU7ZQ5LbanoELX");qm.appMode.isTesting()&&(stripe=Stripe("pk_test_D1XwEhLXgG04dfp8cLr36SbP"));var style={base:{color:"#32325d",lineHeight:"18px",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},card=stripe.elements().create("card",{style:style});card.mount("#card-element"),card.addEventListener("change",function(event){var displayError=document.getElementById("card-errors");event.error?displayError.textContent=event.error.message:displayError.textContent=""}),document.getElementById("payment-form").addEventListener("submit",function(event){event.preventDefault(),stripe.createToken(card).then(function(result){result.error?document.getElementById("card-errors").textContent=result.error.message:stripeTokenHandler(result.token)})})}function WebUpgradeDialogController($scope,$mdDialog){$scope.productId="monthly7";var currentYear=(new Date).getFullYear();$scope.creditCardInfo={year:null},$scope.months=$locale.DATETIME_FORMATS.MONTH,$scope.years=[];for(var i=0;i<13;i++)$scope.years.push(currentYear+i);$scope.hide=function(){$mdDialog.hide()},$scope.cancel=function(){qmLogService.error(null,"User cancelled upgrade!  What happened?"),$mdDialog.cancel()},$scope.webSubscribe=function(productId,coupon,creditCardInfo,event){if(creditCardInfo.securityCode)if(creditCardInfo.cardNumber)if(creditCardInfo.month)if(creditCardInfo.year){var answer={productId:productId,coupon:coupon,creditCardInfo:creditCardInfo};$mdDialog.hide(answer)}else qmLogService.error(null,"Please enter card year");else qmLogService.error(null,"Please enter card month");else qmLogService.error(null,"Please enter card number");else qmLogService.error(null,"Please enter card number")}}function MobileUpgradeDialogController($scope,$mdDialog){qmLogService.debug("$scope.productId is "+$scope.productId,null),$scope.productId="monthly7",$scope.hide=function(){$mdDialog.hide()},$scope.cancel=function(){qmLogService.error(null,"User cancelled upgrade!  What happened?"),$mdDialog.cancel()},$scope.subscribe=function(answer){$mdDialog.hide(answer)}}function getSubscriptionProvider(){var subscriptionProvider="unknown";return $rootScope.platform.isAndroid&&(subscriptionProvider="google"),$rootScope.platform.isIOS&&(subscriptionProvider="apple"),subscriptionProvider}function getProductId(baseProductId){if($rootScope.platform.isIOS){if(-1!==baseProductId.toLowerCase().indexOf("month"))return qm.getAppSettings().additionalSettings.monetizationSettings.iosMonthlySubscriptionCode.value;if(-1!==baseProductId.toLowerCase().indexOf("year"))return qm.getAppSettings().additionalSettings.monetizationSettings.iosYearlySubscriptionCode.value;qmLog.error("Could not determine subscription code for baseProductId "+baseProductId)}return baseProductId}function handleSubscribeResponse(baseProductId,data){qmLogService.error(null,"inAppPurchase.subscribe response: "+JSON.stringify(data)),qmService.hideLoader();var alert;alert=$mdDialog.alert({title:"Thank you!",textContent:"Let's get started!",ok:"OK"}),$mdDialog.show(alert).finally(function(){$scope.goBack(),$rootScope.user.stripeActive=!0,alert=void 0}),qmLogService.error(null,"User subscribed to "+getProductId(baseProductId)+": "+JSON.stringify(data)),qmService.updateUserSettingsDeferred({subscriptionProvider:getSubscriptionProvider(),productId:getProductId(baseProductId),trialEndsAt:moment().add(14,"days").toISOString()}).then(function(response){qmService.recordUpgradeProductPurchase(baseProductId,response.data.purchaseId,2)}),$rootScope.user.stripeActive=!0}function makeInAppPurchase(baseProductId){qmService.showBlackRingLoader();inAppPurchase.subscribe(getProductId(baseProductId)).then(function(data){handleSubscribeResponse(baseProductId,data)}).catch(function(error){qmService.hideLoader();var alert;$rootScope.platform.isIOS&&(alert=$mdDialog.alert({title:error.errorMessage,textContent:"Please try again or contact mike@quantimo.do with Error Code: "+error.errorCode+", Error Message: "+error.errorMessage+", Product ID: "+getProductId(baseProductId),ok:"OK"}),$mdDialog.show(alert).finally(function(){alert=void 0})),$rootScope.platform.isAndroid&&handleSubscribeResponse(baseProductId,error),qmLogService.error(null,"inAppPurchase.catch error "+JSON.stringify(error))})}WebUpgradeDialogController.$inject=["$scope","$mdDialog"],MobileUpgradeDialogController.$inject=["$scope","$mdDialog"],$scope.state={coupon:null,hideFeatures:!1},$scope.signUpQuestions=[{question:"What do you do with my data?",answer:"Your data belongs entirely to you. We do not sell or otherwise do anything with your data to put your privacy at risk.  "},{question:"Can I pause my account?",answer:"You can pause or quit at any time. You have complete control."},{question:"Data Security",answer:"Our customers have demanding security and privacy requirements. Our platform was designed using the most rigorous security standards, using the same technology used by online banks."}],$scope.$on("$ionicView.beforeEnter",function(e){if(qmLogService.debug("Entering state "+$state.current.name,null),qmService.navBar.setFilterBarSearchIcon(!1),!qmService.sendToLoginIfNecessaryAndComeBack()){if(qm.platform.isChromeExtension())return chrome.tabs.create({url:qm.api.getBaseUrl()+"/upgrade"}),void window.close();$scope.planFeaturesCard=qmService.getPlanFeatureCards()[1],$rootScope.upgradeFooterText=null,qmService.navBar.showNavigationMenuIfHideUrlParamNotSet(),qmService.setupUpgradePages(),qmService.hideLoader()}}),$scope.$on("$ionicView.afterEnter",function(e){qmLogService.debug("afterEnter state "+$state.current.name,null),(qm.platform.isWebOrChrome()||qm.platform.isChromeExtension())&&stripeSetup()}),$scope.useLitePlan=function(){$stateParams.litePlanState?qmService.goToState($stateParams.litePlanState):$scope.goBack()},$scope.hideUpgradePage=function(){$rootScope.upgradePages=$rootScope.upgradePages.filter(function(obj){return obj.id!==$rootScope.upgradePages[0].id}),1===$rootScope.upgradePages.length&&($scope.hideLearnMoreButton=!0),$rootScope.upgradePages&&0!==$rootScope.upgradePages.length?qmService.rootScope.setProperty("hideMenuButton",!0):(qmService.rootScope.setProperty("hideMenuButton",!1),qmService.goToDefaultState())},$scope.productId||($scope.productId="monthly7"),$scope.monthlySubscription=function(){$scope.productId="yearly60",$scope.upgrade()},$scope.yearlySubscription=function(){$scope.productId="yearly60",$scope.upgrade()};$scope.upgrade=function(ev){$rootScope.platform.isMobile?mobileUpgrade(ev):webUpgrade(ev)};var webUpgrade=function(ev){qmLogService.error(null,"User clicked upgrade button"),$mdDialog.show({controller:WebUpgradeDialogController,templateUrl:"templates/credit-card-stripe.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!1,fullscreen:!1}).then(function(answer){qmLogService.error(null,"User submitted credit card info");var body={card_number:answer.creditCardInfo.cardNumber,card_month:answer.creditCardInfo.month,card_year:answer.creditCardInfo.year,card_cvc:answer.creditCardInfo.securityCode,productId:answer.productId,coupon:answer.coupon};qmService.postCreditCardDeferred(body)},function(){$scope.status="You cancelled the dialog."})},mobileUpgrade=function(ev){if(!window.inAppPurchase)return qmLogService.error(null,"inAppPurchase not available"),void webUpgrade(ev);$mdDialog.show({controller:MobileUpgradeDialogController,templateUrl:"templates/fragments/select-subscription-plan-fragment.html",parent:angular.element(document.body),targetEvent:ev,clickOutsideToClose:!1,fullscreen:!1}).then(function(baseProductId){getProductsAndMakeInAppPurchase(baseProductId)},function(){qmLogService.error(null,"User cancelled mobileUpgrade subscription selection"),$scope.status="You cancelled the dialog."})},getProductsAndMakeInAppPurchase=function(baseProductId){qmService.showBlackRingLoader(),inAppPurchase.getProducts([getProductId(baseProductId)]).then(function(products){qmLogService.error(null,"inAppPurchase.getProducts response: "+JSON.stringify(products)),makeInAppPurchase(baseProductId)}).catch(function(err){qmService.hideLoader(),qmLogService.error(null,"couldn't get product "+getProductId(baseProductId)+": "+JSON.stringify(err))})}}]),angular.module("starter").controller("TabsCtrl",["$scope","$state",function($scope,$state){$scope.$on("$ionicView.beforeEnter",function(e){qmLogService.debug("Entering state "+$state.current.name,null),$scope.tabsTitle="Tabs Title"})}]),angular.module("starter").controller("StudyJoinCtrl",["$scope","$state","qmService","qmLogService","$rootScope","$stateParams",function($scope,$state,qmService,qmLogService,$rootScope,$stateParams){function getParameterByName(name,url){url||(url=window.location.href),name=name.replace(/[\[\]]/g,"\\$&");var results=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)").exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null}$scope.controller_name="StudyJoinCtrl",window.debugMode&&qmLogService.debug(null,$scope.controller_name+" first starting in state: "+$state.current.name,null);var blue={backgroundColor:"#3467d6",circleColor:"#5b95f9"};$scope.state={title:"Join Our Study",color:blue,image:{url:"img/robots/quantimodo-robot-puzzled.svg",height:"100",width:"100"},bodyText:"One moment please...",moreInfo:"No personally identifiable data will be shared.  Data will only be used in an anonymous and aggregated form as is done in epidemiological studies."},$scope.$on("$ionicView.beforeEnter",function(e){window.debugMode&&qmLogService.debug(null,$scope.controller_name+" $ionicView.beforeEnter in state: "+$state.current.name,null),$rootScope.user||(qmLogService.debug("Hiding nav menu because we do not have a user",null),qmService.navBar.hideNavigationMenu()),$scope.requestParams={causeVariableName:getParameterByName("causeVariableName"),effectVariableName:getParameterByName("effectVariableName")},$stateParams.correlationObject&&($scope.requestParams=$stateParams.correlationObject),$scope.requestParams.causeVariableName||$scope.goBack(),$scope.state.title="Help us discover the effects of "+$scope.requestParams.causeVariableName+" on "+$scope.requestParams.effectVariableName+"!",$scope.state.bodyText="It only takes a few seconds to answer two questions a day.",$scope.state.moreInfo="By taking a few seconds to answer two questions a day and anonymously pooling your responses with thousands of other participants, you can help us discover the effects of "+$scope.requestParams.causeVariableName+" on "+$scope.requestParams.effectVariableName+".  After we accumulate a month or two of data, you'll also be able to see personalized study results showing the likely effects of "+$scope.requestParams.causeVariableName+" on your own "+$scope.requestParams.effectVariableName}),$scope.$on("$ionicView.enter",function(e){window.debugMode&&qmLogService.debug(null,$scope.controller_name+" $ionicView.enter in state: "+$state.current.name,null),qmService.hideLoader(),getParameterByName("alreadyJoined")&&$scope.joinStudy()}),$scope.$on("$ionicView.afterEnter",function(){}),$scope.$on("$ionicView.beforeLeave",function(){}),$scope.$on("$ionicView.leave",function(){}),$scope.$on("$ionicView.afterLeave",function(){}),$scope.joinStudy=function(){$scope.hideJoinStudyButton=!0,$scope.state.image.url="img/robots/quantimodo-robot-happy.svg",qmService.sendToLoginIfNecessaryAndComeBack(null,window.location.href+"&alreadyJoined=true")||($scope.state.title="Joining study...",$scope.state.bodyText="Thank you for helping us accelerate scientific discovery!",qmService.joinStudyDeferred($scope.requestParams).then(function(){qmService.hideLoader(),$scope.state.title="Thank you!",$scope.state.bodyText="Let's record your first measurements!",$scope.showGetStartedButton=!0},function(error){qmService.hideLoader(),qmLogService.error(error),qmService.showMaterialAlert("Could not join study!","Please contact mike@quantimo.do and he'll fix it for you.  Thanks!")}))},$scope.showMoreInfo=function(){qmService.showMaterialAlert($scope.state.title,$scope.state.moreInfo)}}]),angular.module("starter").controller("StudyCreationCtrl",["$scope","$state","qmService","qmLogService","clipboard","$mdDialog","$stateParams",function($scope,$state,qmService,qmLogService,clipboard,$mdDialog,$stateParams){function setOutcomeVariable(variable){$scope.outcomeVariable=variable,$scope.outcomeVariableName=variable.name,qmLogService.debug("Selected outcome "+variable.name)}function setPredictorVariable(variable){$scope.predictorVariable=variable,$scope.predictorVariableName=variable.name,qmLogService.debug("Selected predictor "+variable.name)}$scope.state={title:"Create a Study",color:qmService.colors.blue,image:{url:"img/robots/quantimodo-robot-waving.svg",height:"85",width:"85"},bodyText:"One moment please..."},clipboard.supported||(qmLogService.debug("Sorry, copy to clipboard is not supported",null),$scope.hideClipboardButton=!0),$scope.$on("$ionicView.beforeEnter",function(){qmLogService.debug("StudyCreationCtrl beforeEnter in state "+$state.current.name),$stateParams.causeVariable&&setPredictorVariable($stateParams.causeVariable),$stateParams.effectVariable&&setOutcomeVariable($stateParams.effectVariable)}),$scope.$on("$ionicView.afterEnter",function(){qmLogService.debug("StudyCreationCtrl afterEnter in state "+$state.current.name),qmService.hideLoader()}),$scope.copyLinkText="Copy Shareable Link to Clipboard",$scope.copyStudyUrlToClipboard=function(causeVariableName,effectVariableName){$scope.copyLinkText="Copied!",clipboard.copyText(qmService.getStudyLinkByVariableNames(causeVariableName,effectVariableName))},$scope.selectOutcomeVariable=function(ev){qm.help.getExplanation("outcomeSearch",null,function(explanation){var dialogParameters={title:explanation.title,helpText:explanation.textContent,placeholder:"Search for an outcome...",buttonText:"Select Variable",requestParams:{includePublic:!0,sort:"-numberOfAggregateCorrelationsAsEffect"}};qmService.showVariableSearchDialog(dialogParameters,setOutcomeVariable,null,ev)})},$scope.selectPredictorVariable=function(ev){qm.help.getExplanation("predictorSearch",null,function(explanation){var dialogParameters={title:explanation.title,helpText:explanation.textContent,placeholder:"Search for a predictor...",buttonText:"Select Variable",requestParams:{includePublic:!0,sort:"-numberOfAggregateCorrelationsAsCause"}};qmService.showVariableSearchDialog(dialogParameters,setPredictorVariable,null,ev)})}}]),angular.module("starter").directive("creditCardType",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(value){return scope.ccinfo.type=/^5[1-5]/.test(value)?"mastercard":/^4/.test(value)?"visa":/^3[47]/.test(value)?"amex":/^6011|65|64[4-9]|622(1(2[6-9]|[3-9]\d)|[2-8]\d{2}|9([01]\d|2[0-5]))/.test(value)?"discover":void 0,ctrl.$setValidity("invalid",!!scope.ccinfo.type),value})}}}).directive("cardExpiration",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){scope.$watch("[ccinfo.month,ccinfo.year]",function(value){return ctrl.$setValidity("invalid",!0),scope.ccinfo.year===scope.currentYear&&scope.ccinfo.month<=scope.currentMonth&&ctrl.$setValidity("invalid",!1),value},!0)}}}).directive("variableSearch",["QuantimodoSearchService",function(QuantimodoSearchService){return{require:"ngModel",link:function(scope,element,attrs,ngModel){console.log("Auto-complete attributes effectOrCause are"+JSON.stringify(attrs.effectOrCause)),element.autocomplete({minLength:0,source:function(request,response){scope.showResults=!1,request.term.length>=3?(request.effectOrCause=attrs.effectOrCause,QuantimodoSearchService.searchVariablesByName(request).then(function(searchResponse){response(Array.isArray(searchResponse.data)?jQuery.map(searchResponse.data,function(result){return window.qmLog.debug(result,null),{label:result.name,value:result.name}}):null)})):0===request.term.length&&scope.showCorrelations()},select:function(event,ui){ngModel.$setViewValue(ui.item.value),scope.$apply(),scope.showCorrelations()}})}}}]).directive("onReadFile",["$parse",function($parse){return{restrict:"A",scope:!1,link:function(scope,element,attrs){element.bind("change",function(e){window.qmLog.debug("onReadFile directive called",null);var onFileReadFn=$parse(attrs.onReadFile),reader=new FileReader;reader.onload=function(){var fileContents=reader.result;scope.$apply(function(){onFileReadFn(scope,{contents:fileContents})})},reader.readAsText(element[0].files[0])})}}}]).directive("fileModel",["$parse",function($parse){return{restrict:"A",link:function(scope,element,attrs){var modelSetter=$parse(attrs.fileModel).assign;element.bind("change",function(){scope.$apply(function(){modelSetter(scope,element[0].files[0])})})}}}]).directive("file",function(){return{restrict:"AE",scope:{file:"@"},link:function(scope,el,attrs){el.bind("change",function(event){var file=event.target.files[0];scope.file=file,scope.$parent.file=file,scope.$apply()})}}});
//# sourceMappingURL=combined-head-libraries.js.map
